function R6(e,r){for(var t=0;t<r.length;t++){const n=r[t];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();var vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xg={exports:{}},Qu={};var qw;function I6(){if(qw)return Qu;qw=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function t(n,a,s){var c=null;if(s!==void 0&&(c=""+s),a.key!==void 0&&(c=""+a.key),"key"in a){s={};for(var d in a)d!=="key"&&(s[d]=a[d])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:c,ref:a!==void 0?a:null,props:s}}return Qu.Fragment=r,Qu.jsx=t,Qu.jsxs=t,Qu}var Xw;function D6(){return Xw||(Xw=1,Xg.exports=I6()),Xg.exports}var l=D6(),Kg={exports:{}},fr={};var Kw;function M6(){if(Kw)return fr;Kw=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function E(Q){return Q===null||typeof Q!="object"?null:(Q=w&&Q[w]||Q["@@iterator"],typeof Q=="function"?Q:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function j(Q,B,te){this.props=Q,this.context=B,this.refs=T,this.updater=te||N}j.prototype.isReactComponent={},j.prototype.setState=function(Q,B){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,B,"setState")},j.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function D(){}D.prototype=j.prototype;function I(Q,B,te){this.props=Q,this.context=B,this.refs=T,this.updater=te||N}var L=I.prototype=new D;L.constructor=I,S(L,j.prototype),L.isPureReactComponent=!0;var V=Array.isArray;function X(){}var M={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function z(Q,B,te){var U=te.ref;return{$$typeof:e,type:Q,key:B,ref:U!==void 0?U:null,props:te}}function ae(Q,B){return z(Q.type,B,Q.props)}function Z(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===e}function H(Q){var B={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(te){return B[te]})}var he=/\/+/g;function q(Q,B){return typeof Q=="object"&&Q!==null&&Q.key!=null?H(""+Q.key):B.toString(36)}function se(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(X,X):(Q.status="pending",Q.then(function(B){Q.status==="pending"&&(Q.status="fulfilled",Q.value=B)},function(B){Q.status==="pending"&&(Q.status="rejected",Q.reason=B)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function ve(Q,B,te,U,P){var ue=typeof Q;(ue==="undefined"||ue==="boolean")&&(Q=null);var Re=!1;if(Q===null)Re=!0;else switch(ue){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(Q.$$typeof){case e:case r:Re=!0;break;case g:return Re=Q._init,ve(Re(Q._payload),B,te,U,P)}}if(Re)return P=P(Q),Re=U===""?"."+q(Q,0):U,V(P)?(te="",Re!=null&&(te=Re.replace(he,"$&/")+"/"),ve(P,B,te,"",function(Ke){return Ke})):P!=null&&(Z(P)&&(P=ae(P,te+(P.key==null||Q&&Q.key===P.key?"":(""+P.key).replace(he,"$&/")+"/")+Re)),B.push(P)),1;Re=0;var De=U===""?".":U+":";if(V(Q))for(var Ne=0;Ne<Q.length;Ne++)U=Q[Ne],ue=De+q(U,Ne),Re+=ve(U,B,te,ue,P);else if(Ne=E(Q),typeof Ne=="function")for(Q=Ne.call(Q),Ne=0;!(U=Q.next()).done;)U=U.value,ue=De+q(U,Ne++),Re+=ve(U,B,te,ue,P);else if(ue==="object"){if(typeof Q.then=="function")return ve(se(Q),B,te,U,P);throw B=String(Q),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Re}function le(Q,B,te){if(Q==null)return Q;var U=[],P=0;return ve(Q,U,"","",function(ue){return B.call(te,ue,P++)}),U}function ge(Q){if(Q._status===-1){var B=Q._result;B=B(),B.then(function(te){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=te)},function(te){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=te)}),Q._status===-1&&(Q._status=0,Q._result=B)}if(Q._status===1)return Q._result.default;throw Q._result}var ie=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},Le={map:le,forEach:function(Q,B,te){le(Q,function(){B.apply(this,arguments)},te)},count:function(Q){var B=0;return le(Q,function(){B++}),B},toArray:function(Q){return le(Q,function(B){return B})||[]},only:function(Q){if(!Z(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return fr.Activity=v,fr.Children=Le,fr.Component=j,fr.Fragment=t,fr.Profiler=a,fr.PureComponent=I,fr.StrictMode=n,fr.Suspense=x,fr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,fr.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return M.H.useMemoCache(Q)}},fr.cache=function(Q){return function(){return Q.apply(null,arguments)}},fr.cacheSignal=function(){return null},fr.cloneElement=function(Q,B,te){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var U=S({},Q.props),P=Q.key;if(B!=null)for(ue in B.key!==void 0&&(P=""+B.key),B)!W.call(B,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&B.ref===void 0||(U[ue]=B[ue]);var ue=arguments.length-2;if(ue===1)U.children=te;else if(1<ue){for(var Re=Array(ue),De=0;De<ue;De++)Re[De]=arguments[De+2];U.children=Re}return z(Q.type,P,U)},fr.createContext=function(Q){return Q={$$typeof:c,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:s,_context:Q},Q},fr.createElement=function(Q,B,te){var U,P={},ue=null;if(B!=null)for(U in B.key!==void 0&&(ue=""+B.key),B)W.call(B,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(P[U]=B[U]);var Re=arguments.length-2;if(Re===1)P.children=te;else if(1<Re){for(var De=Array(Re),Ne=0;Ne<Re;Ne++)De[Ne]=arguments[Ne+2];P.children=De}if(Q&&Q.defaultProps)for(U in Re=Q.defaultProps,Re)P[U]===void 0&&(P[U]=Re[U]);return z(Q,ue,P)},fr.createRef=function(){return{current:null}},fr.forwardRef=function(Q){return{$$typeof:d,render:Q}},fr.isValidElement=Z,fr.lazy=function(Q){return{$$typeof:g,_payload:{_status:-1,_result:Q},_init:ge}},fr.memo=function(Q,B){return{$$typeof:f,type:Q,compare:B===void 0?null:B}},fr.startTransition=function(Q){var B=M.T,te={};M.T=te;try{var U=Q(),P=M.S;P!==null&&P(te,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(X,ie)}catch(ue){ie(ue)}finally{B!==null&&te.types!==null&&(B.types=te.types),M.T=B}},fr.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},fr.use=function(Q){return M.H.use(Q)},fr.useActionState=function(Q,B,te){return M.H.useActionState(Q,B,te)},fr.useCallback=function(Q,B){return M.H.useCallback(Q,B)},fr.useContext=function(Q){return M.H.useContext(Q)},fr.useDebugValue=function(){},fr.useDeferredValue=function(Q,B){return M.H.useDeferredValue(Q,B)},fr.useEffect=function(Q,B){return M.H.useEffect(Q,B)},fr.useEffectEvent=function(Q){return M.H.useEffectEvent(Q)},fr.useId=function(){return M.H.useId()},fr.useImperativeHandle=function(Q,B,te){return M.H.useImperativeHandle(Q,B,te)},fr.useInsertionEffect=function(Q,B){return M.H.useInsertionEffect(Q,B)},fr.useLayoutEffect=function(Q,B){return M.H.useLayoutEffect(Q,B)},fr.useMemo=function(Q,B){return M.H.useMemo(Q,B)},fr.useOptimistic=function(Q,B){return M.H.useOptimistic(Q,B)},fr.useReducer=function(Q,B,te){return M.H.useReducer(Q,B,te)},fr.useRef=function(Q){return M.H.useRef(Q)},fr.useState=function(Q){return M.H.useState(Q)},fr.useSyncExternalStore=function(Q,B,te){return M.H.useSyncExternalStore(Q,B,te)},fr.useTransition=function(){return M.H.useTransition()},fr.version="19.2.3",fr}var Yw;function R2(){return Yw||(Yw=1,Kg.exports=M6()),Kg.exports}var J=R2(),Yg={exports:{}},ed={},$g={exports:{}},Zg={};var $w;function F6(){return $w||($w=1,(function(e){function r(ve,le){var ge=ve.length;ve.push(le);e:for(;0<ge;){var ie=ge-1>>>1,Le=ve[ie];if(0<a(Le,le))ve[ie]=le,ve[ge]=Le,ge=ie;else break e}}function t(ve){return ve.length===0?null:ve[0]}function n(ve){if(ve.length===0)return null;var le=ve[0],ge=ve.pop();if(ge!==le){ve[0]=ge;e:for(var ie=0,Le=ve.length,Q=Le>>>1;ie<Q;){var B=2*(ie+1)-1,te=ve[B],U=B+1,P=ve[U];if(0>a(te,ge))U<Le&&0>a(P,te)?(ve[ie]=P,ve[U]=ge,ie=U):(ve[ie]=te,ve[B]=ge,ie=B);else if(U<Le&&0>a(P,ge))ve[ie]=P,ve[U]=ge,ie=U;else break e}}return le}function a(ve,le){var ge=ve.sortIndex-le.sortIndex;return ge!==0?ge:ve.id-le.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var x=[],f=[],g=1,v=null,w=3,E=!1,N=!1,S=!1,T=!1,j=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function L(ve){for(var le=t(f);le!==null;){if(le.callback===null)n(f);else if(le.startTime<=ve)n(f),le.sortIndex=le.expirationTime,r(x,le);else break;le=t(f)}}function V(ve){if(S=!1,L(ve),!N)if(t(x)!==null)N=!0,X||(X=!0,H());else{var le=t(f);le!==null&&se(V,le.startTime-ve)}}var X=!1,M=-1,W=5,z=-1;function ae(){return T?!0:!(e.unstable_now()-z<W)}function Z(){if(T=!1,X){var ve=e.unstable_now();z=ve;var le=!0;try{e:{N=!1,S&&(S=!1,D(M),M=-1),E=!0;var ge=w;try{t:{for(L(ve),v=t(x);v!==null&&!(v.expirationTime>ve&&ae());){var ie=v.callback;if(typeof ie=="function"){v.callback=null,w=v.priorityLevel;var Le=ie(v.expirationTime<=ve);if(ve=e.unstable_now(),typeof Le=="function"){v.callback=Le,L(ve),le=!0;break t}v===t(x)&&n(x),L(ve)}else n(x);v=t(x)}if(v!==null)le=!0;else{var Q=t(f);Q!==null&&se(V,Q.startTime-ve),le=!1}}break e}finally{v=null,w=ge,E=!1}le=void 0}}finally{le?H():X=!1}}}var H;if(typeof I=="function")H=function(){I(Z)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,q=he.port2;he.port1.onmessage=Z,H=function(){q.postMessage(null)}}else H=function(){j(Z,0)};function se(ve,le){M=j(function(){ve(e.unstable_now())},le)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ve){ve.callback=null},e.unstable_forceFrameRate=function(ve){0>ve||125<ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<ve?Math.floor(1e3/ve):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(ve){switch(w){case 1:case 2:case 3:var le=3;break;default:le=w}var ge=w;w=le;try{return ve()}finally{w=ge}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(ve,le){switch(ve){case 1:case 2:case 3:case 4:case 5:break;default:ve=3}var ge=w;w=ve;try{return le()}finally{w=ge}},e.unstable_scheduleCallback=function(ve,le,ge){var ie=e.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?ie+ge:ie):ge=ie,ve){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ge+Le,ve={id:g++,callback:le,priorityLevel:ve,startTime:ge,expirationTime:Le,sortIndex:-1},ge>ie?(ve.sortIndex=ge,r(f,ve),t(x)===null&&ve===t(f)&&(S?(D(M),M=-1):S=!0,se(V,ge-ie))):(ve.sortIndex=Le,r(x,ve),N||E||(N=!0,X||(X=!0,H()))),ve},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(ve){var le=w;return function(){var ge=w;w=le;try{return ve.apply(this,arguments)}finally{w=ge}}}})(Zg)),Zg}var Zw;function L6(){return Zw||(Zw=1,$g.exports=F6()),$g.exports}var Jg={exports:{}},Ia={};var Jw;function B6(){if(Jw)return Ia;Jw=1;var e=R2();function r(x){var f="https://react.dev/errors/"+x;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+x+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(r(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(x,f,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:x,containerInfo:f,implementation:g}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(x,f){if(x==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ia.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ia.createPortal=function(x,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(r(299));return s(x,f,null,g)},Ia.flushSync=function(x){var f=c.T,g=n.p;try{if(c.T=null,n.p=2,x)return x()}finally{c.T=f,n.p=g,n.d.f()}},Ia.preconnect=function(x,f){typeof x=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(x,f))},Ia.prefetchDNS=function(x){typeof x=="string"&&n.d.D(x)},Ia.preinit=function(x,f){if(typeof x=="string"&&f&&typeof f.as=="string"){var g=f.as,v=d(g,f.crossOrigin),w=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?n.d.S(x,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:E}):g==="script"&&n.d.X(x,{crossOrigin:v,integrity:w,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ia.preinitModule=function(x,f){if(typeof x=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=d(f.as,f.crossOrigin);n.d.M(x,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(x)},Ia.preload=function(x,f){if(typeof x=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,v=d(g,f.crossOrigin);n.d.L(x,g,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ia.preloadModule=function(x,f){if(typeof x=="string")if(f){var g=d(f.as,f.crossOrigin);n.d.m(x,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(x)},Ia.requestFormReset=function(x){n.d.r(x)},Ia.unstable_batchedUpdates=function(x,f){return x(f)},Ia.useFormState=function(x,f,g){return c.H.useFormState(x,f,g)},Ia.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ia.version="19.2.3",Ia}var Qw;function P6(){if(Qw)return Jg.exports;Qw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),Jg.exports=B6(),Jg.exports}var e_;function U6(){if(e_)return ed;e_=1;var e=L6(),r=R2(),t=P6();function n(i){var u="https://react.dev/errors/"+i;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+i+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function s(i){var u=i,p=i;if(i.alternate)for(;u.return;)u=u.return;else{i=u;do u=i,(u.flags&4098)!==0&&(p=u.return),i=u.return;while(i)}return u.tag===3?p:null}function c(i){if(i.tag===13){var u=i.memoizedState;if(u===null&&(i=i.alternate,i!==null&&(u=i.memoizedState)),u!==null)return u.dehydrated}return null}function d(i){if(i.tag===31){var u=i.memoizedState;if(u===null&&(i=i.alternate,i!==null&&(u=i.memoizedState)),u!==null)return u.dehydrated}return null}function x(i){if(s(i)!==i)throw Error(n(188))}function f(i){var u=i.alternate;if(!u){if(u=s(i),u===null)throw Error(n(188));return u!==i?null:i}for(var p=i,_=u;;){var C=p.return;if(C===null)break;var R=C.alternate;if(R===null){if(_=C.return,_!==null){p=_;continue}break}if(C.child===R.child){for(R=C.child;R;){if(R===p)return x(C),i;if(R===_)return x(C),u;R=R.sibling}throw Error(n(188))}if(p.return!==_.return)p=C,_=R;else{for(var Y=!1,xe=C.child;xe;){if(xe===p){Y=!0,p=C,_=R;break}if(xe===_){Y=!0,_=C,p=R;break}xe=xe.sibling}if(!Y){for(xe=R.child;xe;){if(xe===p){Y=!0,p=R,_=C;break}if(xe===_){Y=!0,_=R,p=C;break}xe=xe.sibling}if(!Y)throw Error(n(189))}}if(p.alternate!==_)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?i:u}function g(i){var u=i.tag;if(u===5||u===26||u===27||u===6)return i;for(i=i.child;i!==null;){if(u=g(i),u!==null)return u;i=i.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),I=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function H(i){return i===null||typeof i!="object"?null:(i=Z&&i[Z]||i["@@iterator"],typeof i=="function"?i:null)}var he=Symbol.for("react.client.reference");function q(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===he?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case j:return"Profiler";case T:return"StrictMode";case V:return"Suspense";case X:return"SuspenseList";case z:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case N:return"Portal";case I:return i.displayName||"Context";case D:return(i._context.displayName||"Context")+".Consumer";case L:var u=i.render;return i=i.displayName,i||(i=u.displayName||u.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return u=i.displayName||null,u!==null?u:q(i.type)||"Memo";case W:u=i._payload,i=i._init;try{return q(i(u))}catch{}}return null}var se=Array.isArray,ve=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},ie=[],Le=-1;function Q(i){return{current:i}}function B(i){0>Le||(i.current=ie[Le],ie[Le]=null,Le--)}function te(i,u){Le++,ie[Le]=i.current,i.current=u}var U=Q(null),P=Q(null),ue=Q(null),Re=Q(null);function De(i,u){switch(te(ue,u),te(P,i),te(U,null),u.nodeType){case 9:case 11:i=(i=u.documentElement)&&(i=i.namespaceURI)?mw(i):0;break;default:if(i=u.tagName,u=u.namespaceURI)u=mw(u),i=gw(u,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}B(U),te(U,i)}function Ne(){B(U),B(P),B(ue)}function Ke(i){i.memoizedState!==null&&te(Re,i);var u=U.current,p=gw(u,i.type);u!==p&&(te(P,i),te(U,p))}function ye(i){P.current===i&&(B(U),B(P)),Re.current===i&&(B(Re),Yu._currentValue=ge)}var me,Ce;function G(i){if(me===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);me=u&&u[1]||"",Ce=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+me+i+Ce}var Me=!1;function Ae(i,u){if(!i||Me)return"";Me=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(u){var mt=function(){throw Error()};if(Object.defineProperty(mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mt,[])}catch(it){var tt=it}Reflect.construct(i,[],mt)}else{try{mt.call()}catch(it){tt=it}i.call(mt.prototype)}}else{try{throw Error()}catch(it){tt=it}(mt=i())&&typeof mt.catch=="function"&&mt.catch(function(){})}}catch(it){if(it&&tt&&typeof it.stack=="string")return[it.stack,tt.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=_.DetermineComponentFrameRoot(),Y=R[0],xe=R[1];if(Y&&xe){var Te=Y.split(`
`),Qe=xe.split(`
`);for(C=_=0;_<Te.length&&!Te[_].includes("DetermineComponentFrameRoot");)_++;for(;C<Qe.length&&!Qe[C].includes("DetermineComponentFrameRoot");)C++;if(_===Te.length||C===Qe.length)for(_=Te.length-1,C=Qe.length-1;1<=_&&0<=C&&Te[_]!==Qe[C];)C--;for(;1<=_&&0<=C;_--,C--)if(Te[_]!==Qe[C]){if(_!==1||C!==1)do if(_--,C--,0>C||Te[_]!==Qe[C]){var dt=`
`+Te[_].replace(" at new "," at ");return i.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",i.displayName)),dt}while(1<=_&&0<=C);break}}}finally{Me=!1,Error.prepareStackTrace=p}return(p=i?i.displayName||i.name:"")?G(p):""}function oe(i,u){switch(i.tag){case 26:case 27:case 5:return G(i.type);case 16:return G("Lazy");case 13:return i.child!==u&&u!==null?G("Suspense Fallback"):G("Suspense");case 19:return G("SuspenseList");case 0:case 15:return Ae(i.type,!1);case 11:return Ae(i.type.render,!1);case 1:return Ae(i.type,!0);case 31:return G("Activity");default:return""}}function de(i){try{var u="",p=null;do u+=oe(i,p),p=i,i=i.return;while(i);return u}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}var Se=Object.prototype.hasOwnProperty,lt=e.unstable_scheduleCallback,Ue=e.unstable_cancelCallback,He=e.unstable_shouldYield,Oe=e.unstable_requestPaint,We=e.unstable_now,rt=e.unstable_getCurrentPriorityLevel,ht=e.unstable_ImmediatePriority,Pe=e.unstable_UserBlockingPriority,Ye=e.unstable_NormalPriority,Tt=e.unstable_LowPriority,Ct=e.unstable_IdlePriority,Mt=e.log,lr=e.unstable_setDisableYieldValue,jt=null,ft=null;function qt(i){if(typeof Mt=="function"&&lr(i),ft&&typeof ft.setStrictMode=="function")try{ft.setStrictMode(jt,i)}catch{}}var Bt=Math.clz32?Math.clz32:Pr,Qt=Math.log,mr=Math.LN2;function Pr(i){return i>>>=0,i===0?32:31-(Qt(i)/mr|0)|0}var Xr=256,$t=262144,Cr=4194304;function Kr(i){var u=i&42;if(u!==0)return u;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Tn(i,u,p){var _=i.pendingLanes;if(_===0)return 0;var C=0,R=i.suspendedLanes,Y=i.pingedLanes;i=i.warmLanes;var xe=_&134217727;return xe!==0?(_=xe&~R,_!==0?C=Kr(_):(Y&=xe,Y!==0?C=Kr(Y):p||(p=xe&~i,p!==0&&(C=Kr(p))))):(xe=_&~R,xe!==0?C=Kr(xe):Y!==0?C=Kr(Y):p||(p=_&~i,p!==0&&(C=Kr(p)))),C===0?0:u!==0&&u!==C&&(u&R)===0&&(R=C&-C,p=u&-u,R>=p||R===32&&(p&4194048)!==0)?u:C}function Mr(i,u){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&u)===0}function Hr(i,u){switch(i){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ge(){var i=Cr;return Cr<<=1,(Cr&62914560)===0&&(Cr=4194304),i}function Nt(i){for(var u=[],p=0;31>p;p++)u.push(i);return u}function Dt(i,u){i.pendingLanes|=u,u!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Pt(i,u,p,_,C,R){var Y=i.pendingLanes;i.pendingLanes=p,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=p,i.entangledLanes&=p,i.errorRecoveryDisabledLanes&=p,i.shellSuspendCounter=0;var xe=i.entanglements,Te=i.expirationTimes,Qe=i.hiddenUpdates;for(p=Y&~p;0<p;){var dt=31-Bt(p),mt=1<<dt;xe[dt]=0,Te[dt]=-1;var tt=Qe[dt];if(tt!==null)for(Qe[dt]=null,dt=0;dt<tt.length;dt++){var it=tt[dt];it!==null&&(it.lane&=-536870913)}p&=~mt}_!==0&&_r(i,_,0),R!==0&&C===0&&i.tag!==0&&(i.suspendedLanes|=R&~(Y&~u))}function _r(i,u,p){i.pendingLanes|=u,i.suspendedLanes&=~u;var _=31-Bt(u);i.entangledLanes|=u,i.entanglements[_]=i.entanglements[_]|1073741824|p&261930}function Ie(i,u){var p=i.entangledLanes|=u;for(i=i.entanglements;p;){var _=31-Bt(p),C=1<<_;C&u|i[_]&u&&(i[_]|=u),p&=~C}}function wt(i,u){var p=u&-u;return p=(p&42)!==0?1:_t(p),(p&(i.suspendedLanes|u))!==0?0:p}function _t(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ft(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ee(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:Pw(i.type))}function fe(i,u){var p=le.p;try{return le.p=i,u()}finally{le.p=p}}var pe=Math.random().toString(36).slice(2),be="__reactFiber$"+pe,we="__reactProps$"+pe,Ee="__reactContainer$"+pe,Xe="__reactEvents$"+pe,ot="__reactListeners$"+pe,Ve="__reactHandles$"+pe,et="__reactResources$"+pe,Je="__reactMarker$"+pe;function gt(i){delete i[be],delete i[we],delete i[Xe],delete i[ot],delete i[Ve]}function yt(i){var u=i[be];if(u)return u;for(var p=i.parentNode;p;){if(u=p[Ee]||p[be]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(i=Ew(i);i!==null;){if(p=i[be])return p;i=Ew(i)}return u}i=p,p=i.parentNode}return null}function Et(i){if(i=i[be]||i[Ee]){var u=i.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return i}return null}function kt(i){var u=i.tag;if(u===5||u===26||u===27||u===6)return i.stateNode;throw Error(n(33))}function Ot(i){var u=i[et];return u||(u=i[et]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Ut(i){i[Je]=!0}var ct=new Set,Fr={};function pt(i,u){Sr(i,u),Sr(i+"Capture",u)}function Sr(i,u){for(Fr[i]=u,i=0;i<u.length;i++)ct.add(u[i])}var ar=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dr={},or={};function xr(i){return Se.call(or,i)?!0:Se.call(dr,i)?!1:ar.test(i)?or[i]=!0:(dr[i]=!0,!1)}function ma(i,u,p){if(xr(u))if(p===null)i.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":i.removeAttribute(u);return;case"boolean":var _=u.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){i.removeAttribute(u);return}}i.setAttribute(u,""+p)}}function Dl(i,u,p){if(p===null)i.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttribute(u,""+p)}}function fs(i,u,p,_){if(_===null)i.removeAttribute(p);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(p);return}i.setAttributeNS(u,p,""+_)}}function Gr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ii(i){var u=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function em(i,u,p){var _=Object.getOwnPropertyDescriptor(i.constructor.prototype,u);if(!i.hasOwnProperty(u)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var C=_.get,R=_.set;return Object.defineProperty(i,u,{configurable:!0,get:function(){return C.call(this)},set:function(Y){p=""+Y,R.call(this,Y)}}),Object.defineProperty(i,u,{enumerable:_.enumerable}),{getValue:function(){return p},setValue:function(Y){p=""+Y},stopTracking:function(){i._valueTracker=null,delete i[u]}}}}function bn(i){if(!i._valueTracker){var u=ii(i)?"checked":"value";i._valueTracker=em(i,u,""+i[u])}}function li(i){if(!i)return!1;var u=i._valueTracker;if(!u)return!0;var p=u.getValue(),_="";return i&&(_=ii(i)?i.checked?"true":"false":i.value),i=_,i!==p?(u.setValue(i),!0):!1}function Bc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ml=/[\n"\\]/g;function Nr(i){return i.replace(Ml,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Jn(i,u,p,_,C,R,Y,xe){i.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?i.type=Y:i.removeAttribute("type"),u!=null?Y==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+Gr(u)):i.value!==""+Gr(u)&&(i.value=""+Gr(u)):Y!=="submit"&&Y!=="reset"||i.removeAttribute("value"),u!=null?_e(i,Y,Gr(u)):p!=null?_e(i,Y,Gr(p)):_!=null&&i.removeAttribute("value"),C==null&&R!=null&&(i.defaultChecked=!!R),C!=null&&(i.checked=C&&typeof C!="function"&&typeof C!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?i.name=""+Gr(xe):i.removeAttribute("name")}function $e(i,u,p,_,C,R,Y,xe){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(i.type=R),u!=null||p!=null){if(!(R!=="submit"&&R!=="reset"||u!=null)){bn(i);return}p=p!=null?""+Gr(p):"",u=u!=null?""+Gr(u):p,xe||u===i.value||(i.value=u),i.defaultValue=u}_=_??C,_=typeof _!="function"&&typeof _!="symbol"&&!!_,i.checked=xe?i.checked:!!_,i.defaultChecked=!!_,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(i.name=Y),bn(i)}function _e(i,u,p){u==="number"&&Bc(i.ownerDocument)===i||i.defaultValue===""+p||(i.defaultValue=""+p)}function Gt(i,u,p,_){if(i=i.options,u){u={};for(var C=0;C<p.length;C++)u["$"+p[C]]=!0;for(p=0;p<i.length;p++)C=u.hasOwnProperty("$"+i[p].value),i[p].selected!==C&&(i[p].selected=C),C&&_&&(i[p].defaultSelected=!0)}else{for(p=""+Gr(p),u=null,C=0;C<i.length;C++){if(i[C].value===p){i[C].selected=!0,_&&(i[C].defaultSelected=!0);return}u!==null||i[C].disabled||(u=i[C])}u!==null&&(u.selected=!0)}}function Wn(i,u,p){if(u!=null&&(u=""+Gr(u),u!==i.value&&(i.value=u),p==null)){i.defaultValue!==u&&(i.defaultValue=u);return}i.defaultValue=p!=null?""+Gr(p):""}function Ga(i,u,p,_){if(u==null){if(_!=null){if(p!=null)throw Error(n(92));if(se(_)){if(1<_.length)throw Error(n(93));_=_[0]}p=_}p==null&&(p=""),u=p}p=Gr(u),i.defaultValue=p,_=i.textContent,_===p&&_!==""&&_!==null&&(i.value=_),bn(i)}function Fl(i,u){if(u){var p=i.firstChild;if(p&&p===i.lastChild&&p.nodeType===3){p.nodeValue=u;return}}i.textContent=u}var du=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Va(i,u,p){var _=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?_?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="":_?i.setProperty(u,p):typeof p!="number"||p===0||du.has(u)?u==="float"?i.cssFloat=p:i[u]=(""+p).trim():i[u]=p+"px"}function Xt(i,u,p){if(u!=null&&typeof u!="object")throw Error(n(62));if(i=i.style,p!=null){for(var _ in p)!p.hasOwnProperty(_)||u!=null&&u.hasOwnProperty(_)||(_.indexOf("--")===0?i.setProperty(_,""):_==="float"?i.cssFloat="":i[_]="");for(var C in u)_=u[C],u.hasOwnProperty(C)&&p[C]!==_&&Va(i,C,_)}else for(var R in u)u.hasOwnProperty(R)&&Va(i,R,u[R])}function un(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Of=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ll(i){return tm.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ja(){}var Do=null;function fu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vn=null,Bs=null;function oi(i){var u=Et(i);if(u&&(i=u.stateNode)){var p=i[we]||null;e:switch(i=u.stateNode,u.type){case"input":if(Jn(i,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=i;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Nr(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var _=p[u];if(_!==i&&_.form===i.form){var C=_[we]||null;if(!C)throw Error(n(90));Jn(_,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(u=0;u<p.length;u++)_=p[u],_.form===i.form&&li(_)}break e;case"textarea":Wn(i,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&Gt(i,!!p.multiple,u,!1)}}}var Zt=!1;function Rf(i,u,p){if(Zt)return i(u,p);Zt=!0;try{var _=i(u);return _}finally{if(Zt=!1,(vn!==null||Bs!==null)&&(Eh(),vn&&(u=vn,i=Bs,Bs=vn=null,oi(u),i)))for(u=0;u<i.length;u++)oi(i[u])}}function cr(i,u){var p=i.stateNode;if(p===null)return null;var _=p[we]||null;if(_===null)return null;p=_[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(i=i.type,_=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!_;break e;default:i=!1}if(i)return null;if(p&&typeof p!="function")throw Error(n(231,u,typeof p));return p}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hu=!1;if(dn)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){hu=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{hu=!1}var ci=null,ui=null,Pc=null;function Bl(){if(Pc)return Pc;var i,u=ui,p=u.length,_,C="value"in ci?ci.value:ci.textContent,R=C.length;for(i=0;i<p&&u[i]===C[i];i++);var Y=p-i;for(_=1;_<=Y&&u[p-_]===C[R-_];_++);return Pc=C.slice(i,1<_?1-_:void 0)}function Ni(i){var u=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&u===13&&(i=13)):i=u,i===10&&(i=13),32<=i||i===13?i:0}function Ai(){return!0}function xu(){return!1}function Qn(i){function u(p,_,C,R,Y){this._reactName=p,this._targetInst=C,this.type=_,this.nativeEvent=R,this.target=Y,this.currentTarget=null;for(var xe in i)i.hasOwnProperty(xe)&&(p=i[xe],this[xe]=p?p(R):R[xe]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Ai:xu,this.isPropagationStopped=xu,this}return v(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),u}var hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=Qn(hs),Pl=v({},hs,{view:0,detail:0}),If=Qn(Pl),Uc,mu,Mo,zc=v({},Pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Mo&&(Mo&&i.type==="mousemove"?(Uc=i.screenX-Mo.screenX,mu=i.screenY-Mo.screenY):mu=Uc=0,Mo=i),Uc)},movementY:function(i){return"movementY"in i?i.movementY:mu}}),Yr=Qn(zc),Df=v({},zc,{dataTransfer:0}),Hc=Qn(Df),Ti=v({},Pl,{relatedTarget:0}),gu=Qn(Ti),at=v({},hs,{animationName:0,elapsedTime:0,pseudoElement:0}),vr=Qn(at),ca=v({},hs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Gc=Qn(ca),Mf=v({},hs,{data:0}),Ff=Qn(Mf),rm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qn(i){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(i):(i=pu[i])?!!u[i]:!1}function Fo(){return qn}var Cn=v({},Pl,{key:function(i){if(i.key){var u=rm[i.key]||i.key;if(u!=="Unidentified")return u}return i.type==="keypress"?(i=Ni(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?nm[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fo,charCode:function(i){return i.type==="keypress"?Ni(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ni(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Vc=Qn(Cn),Yi=v({},zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jr=Qn(Yi),Jt=v({},Pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fo}),am=Qn(Jt),fn=v({},hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),$i=Qn(fn),Ul=v({},zc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),sm=Qn(Ul),Ps=v({},hs,{newState:0,oldState:0}),bu=Qn(Ps),Lf=[9,13,27,32],Lo=dn&&"CompositionEvent"in window,zl=null;dn&&"documentMode"in document&&(zl=document.documentMode);var Bf=dn&&"TextEvent"in window&&!zl,Pf=dn&&(!Lo||zl&&8<zl&&11>=zl),Zi=" ",Wc=!1;function Uf(i,u){switch(i){case"keyup":return Lf.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Gl=!1;function Ci(i,u){switch(i){case"compositionend":return Hl(u);case"keypress":return u.which!==32?null:(Wc=!0,Zi);case"textInput":return i=u.data,i===Zi&&Wc?null:i;default:return null}}function qc(i,u){if(Gl)return i==="compositionend"||!Lo&&Uf(i,u)?(i=Bl(),Pc=ui=ci=null,Gl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Pf&&u.locale!=="ko"?null:u.data;default:return null}}var Qa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vu(i){var u=i&&i.nodeName&&i.nodeName.toLowerCase();return u==="input"?!!Qa[i.type]:u==="textarea"}function xs(i,u,p,_){vn?Bs?Bs.push(_):Bs=[_]:vn=_,u=jh(u,"onChange"),0<u.length&&(p=new oa("onChange","change",null,p,_),i.push({event:p,listeners:u}))}var Bo=null,Ji=null;function im(i){cw(i,0)}function Po(i){var u=kt(i);if(li(u))return i}function ms(i,u){if(i==="change")return u}var zf=!1;if(dn){var Uo;if(dn){var Qi="oninput"in document;if(!Qi){var Rr=document.createElement("div");Rr.setAttribute("oninput","return;"),Qi=typeof Rr.oninput=="function"}Uo=Qi}else Uo=!1;zf=Uo&&(!document.documentMode||9<document.documentMode)}function zo(){Bo&&(Bo.detachEvent("onpropertychange",re),Ji=Bo=null)}function re(i){if(i.propertyName==="value"&&Po(Ji)){var u=[];xs(u,Ji,i,fu(i)),Rf(im,u)}}function o(i,u,p){i==="focusin"?(zo(),Bo=u,Ji=p,Bo.attachEvent("onpropertychange",re)):i==="focusout"&&zo()}function h(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Po(Ji)}function m(i,u){if(i==="click")return Po(u)}function b(i,u){if(i==="input"||i==="change")return Po(u)}function y(i,u){return i===u&&(i!==0||1/i===1/u)||i!==i&&u!==u}var k=typeof Object.is=="function"?Object.is:y;function A(i,u){if(k(i,u))return!0;if(typeof i!="object"||i===null||typeof u!="object"||u===null)return!1;var p=Object.keys(i),_=Object.keys(u);if(p.length!==_.length)return!1;for(_=0;_<p.length;_++){var C=p[_];if(!Se.call(u,C)||!k(i[C],u[C]))return!1}return!0}function O(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function F(i,u){var p=O(i);i=0;for(var _;p;){if(p.nodeType===3){if(_=i+p.textContent.length,i<=u&&_>=u)return{node:p,offset:u-i};i=_}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=O(p)}}function K(i,u){return i&&u?i===u?!0:i&&i.nodeType===3?!1:u&&u.nodeType===3?K(i,u.parentNode):"contains"in i?i.contains(u):i.compareDocumentPosition?!!(i.compareDocumentPosition(u)&16):!1:!1}function ne(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var u=Bc(i.document);u instanceof i.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)i=u.contentWindow;else break;u=Bc(i.document)}return u}function ce(i){var u=i&&i.nodeName&&i.nodeName.toLowerCase();return u&&(u==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||u==="textarea"||i.contentEditable==="true")}var ke=dn&&"documentMode"in document&&11>=document.documentMode,je=null,Fe=null,qe=null,nt=!1;function At(i,u,p){var _=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;nt||je==null||je!==Bc(_)||(_=je,"selectionStart"in _&&ce(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),qe&&A(qe,_)||(qe=_,_=jh(Fe,"onSelect"),0<_.length&&(u=new oa("onSelect","select",null,u,p),i.push({event:u,listeners:_}),u.target=je)))}function St(i,u){var p={};return p[i.toLowerCase()]=u.toLowerCase(),p["Webkit"+i]="webkit"+u,p["Moz"+i]="moz"+u,p}var vt={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionrun:St("Transition","TransitionRun"),transitionstart:St("Transition","TransitionStart"),transitioncancel:St("Transition","TransitionCancel"),transitionend:St("Transition","TransitionEnd")},Er={},ur={};dn&&(ur=document.createElement("div").style,"AnimationEvent"in window||(delete vt.animationend.animation,delete vt.animationiteration.animation,delete vt.animationstart.animation),"TransitionEvent"in window||delete vt.transitionend.transition);function Fn(i){if(Er[i])return Er[i];if(!vt[i])return i;var u=vt[i],p;for(p in u)if(u.hasOwnProperty(p)&&p in ur)return Er[i]=u[p];return i}var es=Fn("animationend"),_a=Fn("animationiteration"),Qr=Fn("animationstart"),ua=Fn("transitionrun"),Wa=Fn("transitionstart"),Vl=Fn("transitioncancel"),el=Fn("transitionend"),Hf=new Map,yu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yu.push("scrollEnd");function di(i,u){Hf.set(i,u),pt(u,[i])}var Gf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Us=[],Xc=0,lm=0;function Vf(){for(var i=Xc,u=lm=Xc=0;u<i;){var p=Us[u];Us[u++]=null;var _=Us[u];Us[u++]=null;var C=Us[u];Us[u++]=null;var R=Us[u];if(Us[u++]=null,_!==null&&C!==null){var Y=_.pending;Y===null?C.next=C:(C.next=Y.next,Y.next=C),_.pending=C}R!==0&&Vb(p,C,R)}}function Wf(i,u,p,_){Us[Xc++]=i,Us[Xc++]=u,Us[Xc++]=p,Us[Xc++]=_,lm|=_,i.lanes|=_,i=i.alternate,i!==null&&(i.lanes|=_)}function om(i,u,p,_){return Wf(i,u,p,_),qf(i)}function Ho(i,u){return Wf(i,null,null,u),qf(i)}function Vb(i,u,p){i.lanes|=p;var _=i.alternate;_!==null&&(_.lanes|=p);for(var C=!1,R=i.return;R!==null;)R.childLanes|=p,_=R.alternate,_!==null&&(_.childLanes|=p),R.tag===22&&(i=R.stateNode,i===null||i._visibility&1||(C=!0)),i=R,R=R.return;return i.tag===3?(R=i.stateNode,C&&u!==null&&(C=31-Bt(p),i=R.hiddenUpdates,_=i[C],_===null?i[C]=[u]:_.push(u),u.lane=p|536870912),R):null}function qf(i){if(50<Hu)throw Hu=0,pg=null,Error(n(185));for(var u=i.return;u!==null;)i=u,u=i.return;return i.tag===3?i.stateNode:null}var Kc={};function mA(i,u,p,_){this.tag=i,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(i,u,p,_){return new mA(i,u,p,_)}function cm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function tl(i,u){var p=i.alternate;return p===null?(p=gs(i.tag,u,i.key,i.mode),p.elementType=i.elementType,p.type=i.type,p.stateNode=i.stateNode,p.alternate=i,i.alternate=p):(p.pendingProps=u,p.type=i.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=i.flags&65011712,p.childLanes=i.childLanes,p.lanes=i.lanes,p.child=i.child,p.memoizedProps=i.memoizedProps,p.memoizedState=i.memoizedState,p.updateQueue=i.updateQueue,u=i.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=i.sibling,p.index=i.index,p.ref=i.ref,p.refCleanup=i.refCleanup,p}function Wb(i,u){i.flags&=65011714;var p=i.alternate;return p===null?(i.childLanes=0,i.lanes=u,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=p.childLanes,i.lanes=p.lanes,i.child=p.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=p.memoizedProps,i.memoizedState=p.memoizedState,i.updateQueue=p.updateQueue,i.type=p.type,u=p.dependencies,i.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),i}function Xf(i,u,p,_,C,R){var Y=0;if(_=i,typeof i=="function")cm(i)&&(Y=1);else if(typeof i=="string")Y=y6(i,p,U.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case z:return i=gs(31,p,u,C),i.elementType=z,i.lanes=R,i;case S:return Go(p.children,C,R,u);case T:Y=8,C|=24;break;case j:return i=gs(12,p,u,C|2),i.elementType=j,i.lanes=R,i;case V:return i=gs(13,p,u,C),i.elementType=V,i.lanes=R,i;case X:return i=gs(19,p,u,C),i.elementType=X,i.lanes=R,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case I:Y=10;break e;case D:Y=9;break e;case L:Y=11;break e;case M:Y=14;break e;case W:Y=16,_=null;break e}Y=29,p=Error(n(130,i===null?"null":typeof i,"")),_=null}return u=gs(Y,p,u,C),u.elementType=i,u.type=_,u.lanes=R,u}function Go(i,u,p,_){return i=gs(7,i,_,u),i.lanes=p,i}function um(i,u,p){return i=gs(6,i,null,u),i.lanes=p,i}function qb(i){var u=gs(18,null,null,0);return u.stateNode=i,u}function dm(i,u,p){return u=gs(4,i.children!==null?i.children:[],i.key,u),u.lanes=p,u.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},u}var Xb=new WeakMap;function zs(i,u){if(typeof i=="object"&&i!==null){var p=Xb.get(i);return p!==void 0?p:(u={value:i,source:u,stack:de(u)},Xb.set(i,u),u)}return{value:i,source:u,stack:de(u)}}var Yc=[],$c=0,Kf=null,wu=0,Hs=[],Gs=0,Wl=null,ji=1,Oi="";function rl(i,u){Yc[$c++]=wu,Yc[$c++]=Kf,Kf=i,wu=u}function Kb(i,u,p){Hs[Gs++]=ji,Hs[Gs++]=Oi,Hs[Gs++]=Wl,Wl=i;var _=ji;i=Oi;var C=32-Bt(_)-1;_&=~(1<<C),p+=1;var R=32-Bt(u)+C;if(30<R){var Y=C-C%5;R=(_&(1<<Y)-1).toString(32),_>>=Y,C-=Y,ji=1<<32-Bt(u)+C|p<<C|_,Oi=R+i}else ji=1<<R|p<<C|_,Oi=i}function fm(i){i.return!==null&&(rl(i,1),Kb(i,1,0))}function hm(i){for(;i===Kf;)Kf=Yc[--$c],Yc[$c]=null,wu=Yc[--$c],Yc[$c]=null;for(;i===Wl;)Wl=Hs[--Gs],Hs[Gs]=null,Oi=Hs[--Gs],Hs[Gs]=null,ji=Hs[--Gs],Hs[Gs]=null}function Yb(i,u){Hs[Gs++]=ji,Hs[Gs++]=Oi,Hs[Gs++]=Wl,ji=u.id,Oi=u.overflow,Wl=i}var Ea=null,yn=null,Lr=!1,ql=null,Vs=!1,xm=Error(n(519));function Xl(i){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _u(zs(u,i)),xm}function $b(i){var u=i.stateNode,p=i.type,_=i.memoizedProps;switch(u[be]=i,u[we]=_,p){case"dialog":Or("cancel",u),Or("close",u);break;case"iframe":case"object":case"embed":Or("load",u);break;case"video":case"audio":for(p=0;p<Vu.length;p++)Or(Vu[p],u);break;case"source":Or("error",u);break;case"img":case"image":case"link":Or("error",u),Or("load",u);break;case"details":Or("toggle",u);break;case"input":Or("invalid",u),$e(u,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0);break;case"select":Or("invalid",u);break;case"textarea":Or("invalid",u),Ga(u,_.value,_.defaultValue,_.children)}p=_.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||_.suppressHydrationWarning===!0||hw(u.textContent,p)?(_.popover!=null&&(Or("beforetoggle",u),Or("toggle",u)),_.onScroll!=null&&Or("scroll",u),_.onScrollEnd!=null&&Or("scrollend",u),_.onClick!=null&&(u.onclick=Ja),u=!0):u=!1,u||Xl(i,!0)}function Zb(i){for(Ea=i.return;Ea;)switch(Ea.tag){case 5:case 31:case 13:Vs=!1;return;case 27:case 3:Vs=!0;return;default:Ea=Ea.return}}function Zc(i){if(i!==Ea)return!1;if(!Lr)return Zb(i),Lr=!0,!1;var u=i.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=i.type,p=!(p!=="form"&&p!=="button")||Rg(i.type,i.memoizedProps)),p=!p),p&&yn&&Xl(i),Zb(i),u===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));yn=_w(i)}else if(u===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));yn=_w(i)}else u===27?(u=yn,lo(i.type)?(i=Lg,Lg=null,yn=i):yn=u):yn=Ea?qs(i.stateNode.nextSibling):null;return!0}function Vo(){yn=Ea=null,Lr=!1}function mm(){var i=ql;return i!==null&&(as===null?as=i:as.push.apply(as,i),ql=null),i}function _u(i){ql===null?ql=[i]:ql.push(i)}var gm=Q(null),Wo=null,nl=null;function Kl(i,u,p){te(gm,u._currentValue),u._currentValue=p}function al(i){i._currentValue=gm.current,B(gm)}function pm(i,u,p){for(;i!==null;){var _=i.alternate;if((i.childLanes&u)!==u?(i.childLanes|=u,_!==null&&(_.childLanes|=u)):_!==null&&(_.childLanes&u)!==u&&(_.childLanes|=u),i===p)break;i=i.return}}function bm(i,u,p,_){var C=i.child;for(C!==null&&(C.return=i);C!==null;){var R=C.dependencies;if(R!==null){var Y=C.child;R=R.firstContext;e:for(;R!==null;){var xe=R;R=C;for(var Te=0;Te<u.length;Te++)if(xe.context===u[Te]){R.lanes|=p,xe=R.alternate,xe!==null&&(xe.lanes|=p),pm(R.return,p,i),_||(Y=null);break e}R=xe.next}}else if(C.tag===18){if(Y=C.return,Y===null)throw Error(n(341));Y.lanes|=p,R=Y.alternate,R!==null&&(R.lanes|=p),pm(Y,p,i),Y=null}else Y=C.child;if(Y!==null)Y.return=C;else for(Y=C;Y!==null;){if(Y===i){Y=null;break}if(C=Y.sibling,C!==null){C.return=Y.return,Y=C;break}Y=Y.return}C=Y}}function Jc(i,u,p,_){i=null;for(var C=u,R=!1;C!==null;){if(!R){if((C.flags&524288)!==0)R=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var Y=C.alternate;if(Y===null)throw Error(n(387));if(Y=Y.memoizedProps,Y!==null){var xe=C.type;k(C.pendingProps.value,Y.value)||(i!==null?i.push(xe):i=[xe])}}else if(C===Re.current){if(Y=C.alternate,Y===null)throw Error(n(387));Y.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(i!==null?i.push(Yu):i=[Yu])}C=C.return}i!==null&&bm(u,i,p,_),u.flags|=262144}function Yf(i){for(i=i.firstContext;i!==null;){if(!k(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function qo(i){Wo=i,nl=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ka(i){return Jb(Wo,i)}function $f(i,u){return Wo===null&&qo(i),Jb(i,u)}function Jb(i,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},nl===null){if(i===null)throw Error(n(308));nl=u,i.dependencies={lanes:0,firstContext:u},i.flags|=524288}else nl=nl.next=u;return p}var gA=typeof AbortController<"u"?AbortController:function(){var i=[],u=this.signal={aborted:!1,addEventListener:function(p,_){i.push(_)}};this.abort=function(){u.aborted=!0,i.forEach(function(p){return p()})}},pA=e.unstable_scheduleCallback,bA=e.unstable_NormalPriority,ea={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vm(){return{controller:new gA,data:new Map,refCount:0}}function Eu(i){i.refCount--,i.refCount===0&&pA(bA,function(){i.controller.abort()})}var ku=null,ym=0,Qc=0,e0=null;function vA(i,u){if(ku===null){var p=ku=[];ym=0,Qc=Eg(),e0={status:"pending",value:void 0,then:function(_){p.push(_)}}}return ym++,u.then(Qb,Qb),u}function Qb(){if(--ym===0&&ku!==null){e0!==null&&(e0.status="fulfilled");var i=ku;ku=null,Qc=0,e0=null;for(var u=0;u<i.length;u++)(0,i[u])()}}function yA(i,u){var p=[],_={status:"pending",value:null,reason:null,then:function(C){p.push(C)}};return i.then(function(){_.status="fulfilled",_.value=u;for(var C=0;C<p.length;C++)(0,p[C])(u)},function(C){for(_.status="rejected",_.reason=C,C=0;C<p.length;C++)(0,p[C])(void 0)}),_}var ev=ve.S;ve.S=function(i,u){Ly=We(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&vA(i,u),ev!==null&&ev(i,u)};var Xo=Q(null);function wm(){var i=Xo.current;return i!==null?i:hn.pooledCache}function Zf(i,u){u===null?te(Xo,Xo.current):te(Xo,u.pool)}function tv(){var i=wm();return i===null?null:{parent:ea._currentValue,pool:i}}var t0=Error(n(460)),_m=Error(n(474)),Jf=Error(n(542)),Qf={then:function(){}};function rv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function nv(i,u,p){switch(p=i[p],p===void 0?i.push(u):p!==u&&(u.then(Ja,Ja),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw i=u.reason,sv(i),i;default:if(typeof u.status=="string")u.then(Ja,Ja);else{if(i=hn,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=u,i.status="pending",i.then(function(_){if(u.status==="pending"){var C=u;C.status="fulfilled",C.value=_}},function(_){if(u.status==="pending"){var C=u;C.status="rejected",C.reason=_}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw i=u.reason,sv(i),i}throw Yo=u,t0}}function Ko(i){try{var u=i._init;return u(i._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Yo=p,t0):p}}var Yo=null;function av(){if(Yo===null)throw Error(n(459));var i=Yo;return Yo=null,i}function sv(i){if(i===t0||i===Jf)throw Error(n(483))}var r0=null,Su=0;function eh(i){var u=Su;return Su+=1,r0===null&&(r0=[]),nv(r0,i,u)}function Nu(i,u){u=u.props.ref,i.ref=u!==void 0?u:null}function th(i,u){throw u.$$typeof===w?Error(n(525)):(i=Object.prototype.toString.call(u),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":i)))}function iv(i){function u(ze,Be){if(i){var Ze=ze.deletions;Ze===null?(ze.deletions=[Be],ze.flags|=16):Ze.push(Be)}}function p(ze,Be){if(!i)return null;for(;Be!==null;)u(ze,Be),Be=Be.sibling;return null}function _(ze){for(var Be=new Map;ze!==null;)ze.key!==null?Be.set(ze.key,ze):Be.set(ze.index,ze),ze=ze.sibling;return Be}function C(ze,Be){return ze=tl(ze,Be),ze.index=0,ze.sibling=null,ze}function R(ze,Be,Ze){return ze.index=Ze,i?(Ze=ze.alternate,Ze!==null?(Ze=Ze.index,Ze<Be?(ze.flags|=67108866,Be):Ze):(ze.flags|=67108866,Be)):(ze.flags|=1048576,Be)}function Y(ze){return i&&ze.alternate===null&&(ze.flags|=67108866),ze}function xe(ze,Be,Ze,xt){return Be===null||Be.tag!==6?(Be=um(Ze,ze.mode,xt),Be.return=ze,Be):(Be=C(Be,Ze),Be.return=ze,Be)}function Te(ze,Be,Ze,xt){var Kt=Ze.type;return Kt===S?dt(ze,Be,Ze.props.children,xt,Ze.key):Be!==null&&(Be.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===W&&Ko(Kt)===Be.type)?(Be=C(Be,Ze.props),Nu(Be,Ze),Be.return=ze,Be):(Be=Xf(Ze.type,Ze.key,Ze.props,null,ze.mode,xt),Nu(Be,Ze),Be.return=ze,Be)}function Qe(ze,Be,Ze,xt){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==Ze.containerInfo||Be.stateNode.implementation!==Ze.implementation?(Be=dm(Ze,ze.mode,xt),Be.return=ze,Be):(Be=C(Be,Ze.children||[]),Be.return=ze,Be)}function dt(ze,Be,Ze,xt,Kt){return Be===null||Be.tag!==7?(Be=Go(Ze,ze.mode,xt,Kt),Be.return=ze,Be):(Be=C(Be,Ze),Be.return=ze,Be)}function mt(ze,Be,Ze){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Be=um(""+Be,ze.mode,Ze),Be.return=ze,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case E:return Ze=Xf(Be.type,Be.key,Be.props,null,ze.mode,Ze),Nu(Ze,Be),Ze.return=ze,Ze;case N:return Be=dm(Be,ze.mode,Ze),Be.return=ze,Be;case W:return Be=Ko(Be),mt(ze,Be,Ze)}if(se(Be)||H(Be))return Be=Go(Be,ze.mode,Ze,null),Be.return=ze,Be;if(typeof Be.then=="function")return mt(ze,eh(Be),Ze);if(Be.$$typeof===I)return mt(ze,$f(ze,Be),Ze);th(ze,Be)}return null}function tt(ze,Be,Ze,xt){var Kt=Be!==null?Be.key:null;if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Kt!==null?null:xe(ze,Be,""+Ze,xt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case E:return Ze.key===Kt?Te(ze,Be,Ze,xt):null;case N:return Ze.key===Kt?Qe(ze,Be,Ze,xt):null;case W:return Ze=Ko(Ze),tt(ze,Be,Ze,xt)}if(se(Ze)||H(Ze))return Kt!==null?null:dt(ze,Be,Ze,xt,null);if(typeof Ze.then=="function")return tt(ze,Be,eh(Ze),xt);if(Ze.$$typeof===I)return tt(ze,Be,$f(ze,Ze),xt);th(ze,Ze)}return null}function it(ze,Be,Ze,xt,Kt){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return ze=ze.get(Ze)||null,xe(Be,ze,""+xt,Kt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case E:return ze=ze.get(xt.key===null?Ze:xt.key)||null,Te(Be,ze,xt,Kt);case N:return ze=ze.get(xt.key===null?Ze:xt.key)||null,Qe(Be,ze,xt,Kt);case W:return xt=Ko(xt),it(ze,Be,Ze,xt,Kt)}if(se(xt)||H(xt))return ze=ze.get(Ze)||null,dt(Be,ze,xt,Kt,null);if(typeof xt.then=="function")return it(ze,Be,Ze,eh(xt),Kt);if(xt.$$typeof===I)return it(ze,Be,Ze,$f(Be,xt),Kt);th(Be,xt)}return null}function Ht(ze,Be,Ze,xt){for(var Kt=null,Vr=null,Vt=Be,yr=Be=0,Dr=null;Vt!==null&&yr<Ze.length;yr++){Vt.index>yr?(Dr=Vt,Vt=null):Dr=Vt.sibling;var Wr=tt(ze,Vt,Ze[yr],xt);if(Wr===null){Vt===null&&(Vt=Dr);break}i&&Vt&&Wr.alternate===null&&u(ze,Vt),Be=R(Wr,Be,yr),Vr===null?Kt=Wr:Vr.sibling=Wr,Vr=Wr,Vt=Dr}if(yr===Ze.length)return p(ze,Vt),Lr&&rl(ze,yr),Kt;if(Vt===null){for(;yr<Ze.length;yr++)Vt=mt(ze,Ze[yr],xt),Vt!==null&&(Be=R(Vt,Be,yr),Vr===null?Kt=Vt:Vr.sibling=Vt,Vr=Vt);return Lr&&rl(ze,yr),Kt}for(Vt=_(Vt);yr<Ze.length;yr++)Dr=it(Vt,ze,yr,Ze[yr],xt),Dr!==null&&(i&&Dr.alternate!==null&&Vt.delete(Dr.key===null?yr:Dr.key),Be=R(Dr,Be,yr),Vr===null?Kt=Dr:Vr.sibling=Dr,Vr=Dr);return i&&Vt.forEach(function(ho){return u(ze,ho)}),Lr&&rl(ze,yr),Kt}function er(ze,Be,Ze,xt){if(Ze==null)throw Error(n(151));for(var Kt=null,Vr=null,Vt=Be,yr=Be=0,Dr=null,Wr=Ze.next();Vt!==null&&!Wr.done;yr++,Wr=Ze.next()){Vt.index>yr?(Dr=Vt,Vt=null):Dr=Vt.sibling;var ho=tt(ze,Vt,Wr.value,xt);if(ho===null){Vt===null&&(Vt=Dr);break}i&&Vt&&ho.alternate===null&&u(ze,Vt),Be=R(ho,Be,yr),Vr===null?Kt=ho:Vr.sibling=ho,Vr=ho,Vt=Dr}if(Wr.done)return p(ze,Vt),Lr&&rl(ze,yr),Kt;if(Vt===null){for(;!Wr.done;yr++,Wr=Ze.next())Wr=mt(ze,Wr.value,xt),Wr!==null&&(Be=R(Wr,Be,yr),Vr===null?Kt=Wr:Vr.sibling=Wr,Vr=Wr);return Lr&&rl(ze,yr),Kt}for(Vt=_(Vt);!Wr.done;yr++,Wr=Ze.next())Wr=it(Vt,ze,yr,Wr.value,xt),Wr!==null&&(i&&Wr.alternate!==null&&Vt.delete(Wr.key===null?yr:Wr.key),Be=R(Wr,Be,yr),Vr===null?Kt=Wr:Vr.sibling=Wr,Vr=Wr);return i&&Vt.forEach(function(O6){return u(ze,O6)}),Lr&&rl(ze,yr),Kt}function on(ze,Be,Ze,xt){if(typeof Ze=="object"&&Ze!==null&&Ze.type===S&&Ze.key===null&&(Ze=Ze.props.children),typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case E:e:{for(var Kt=Ze.key;Be!==null;){if(Be.key===Kt){if(Kt=Ze.type,Kt===S){if(Be.tag===7){p(ze,Be.sibling),xt=C(Be,Ze.props.children),xt.return=ze,ze=xt;break e}}else if(Be.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===W&&Ko(Kt)===Be.type){p(ze,Be.sibling),xt=C(Be,Ze.props),Nu(xt,Ze),xt.return=ze,ze=xt;break e}p(ze,Be);break}else u(ze,Be);Be=Be.sibling}Ze.type===S?(xt=Go(Ze.props.children,ze.mode,xt,Ze.key),xt.return=ze,ze=xt):(xt=Xf(Ze.type,Ze.key,Ze.props,null,ze.mode,xt),Nu(xt,Ze),xt.return=ze,ze=xt)}return Y(ze);case N:e:{for(Kt=Ze.key;Be!==null;){if(Be.key===Kt)if(Be.tag===4&&Be.stateNode.containerInfo===Ze.containerInfo&&Be.stateNode.implementation===Ze.implementation){p(ze,Be.sibling),xt=C(Be,Ze.children||[]),xt.return=ze,ze=xt;break e}else{p(ze,Be);break}else u(ze,Be);Be=Be.sibling}xt=dm(Ze,ze.mode,xt),xt.return=ze,ze=xt}return Y(ze);case W:return Ze=Ko(Ze),on(ze,Be,Ze,xt)}if(se(Ze))return Ht(ze,Be,Ze,xt);if(H(Ze)){if(Kt=H(Ze),typeof Kt!="function")throw Error(n(150));return Ze=Kt.call(Ze),er(ze,Be,Ze,xt)}if(typeof Ze.then=="function")return on(ze,Be,eh(Ze),xt);if(Ze.$$typeof===I)return on(ze,Be,$f(ze,Ze),xt);th(ze,Ze)}return typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint"?(Ze=""+Ze,Be!==null&&Be.tag===6?(p(ze,Be.sibling),xt=C(Be,Ze),xt.return=ze,ze=xt):(p(ze,Be),xt=um(Ze,ze.mode,xt),xt.return=ze,ze=xt),Y(ze)):p(ze,Be)}return function(ze,Be,Ze,xt){try{Su=0;var Kt=on(ze,Be,Ze,xt);return r0=null,Kt}catch(Vt){if(Vt===t0||Vt===Jf)throw Vt;var Vr=gs(29,Vt,null,ze.mode);return Vr.lanes=xt,Vr.return=ze,Vr}}}var $o=iv(!0),lv=iv(!1),Yl=!1;function Em(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function km(i,u){i=i.updateQueue,u.updateQueue===i&&(u.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function $l(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Zl(i,u,p){var _=i.updateQueue;if(_===null)return null;if(_=_.shared,($r&2)!==0){var C=_.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),_.pending=u,u=qf(i),Vb(i,null,p),u}return Wf(i,_,u,p),qf(i)}function Au(i,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var _=u.lanes;_&=i.pendingLanes,p|=_,u.lanes=p,Ie(i,p)}}function Sm(i,u){var p=i.updateQueue,_=i.alternate;if(_!==null&&(_=_.updateQueue,p===_)){var C=null,R=null;if(p=p.firstBaseUpdate,p!==null){do{var Y={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};R===null?C=R=Y:R=R.next=Y,p=p.next}while(p!==null);R===null?C=R=u:R=R.next=u}else C=R=u;p={baseState:_.baseState,firstBaseUpdate:C,lastBaseUpdate:R,shared:_.shared,callbacks:_.callbacks},i.updateQueue=p;return}i=p.lastBaseUpdate,i===null?p.firstBaseUpdate=u:i.next=u,p.lastBaseUpdate=u}var Nm=!1;function Tu(){if(Nm){var i=e0;if(i!==null)throw i}}function Cu(i,u,p,_){Nm=!1;var C=i.updateQueue;Yl=!1;var R=C.firstBaseUpdate,Y=C.lastBaseUpdate,xe=C.shared.pending;if(xe!==null){C.shared.pending=null;var Te=xe,Qe=Te.next;Te.next=null,Y===null?R=Qe:Y.next=Qe,Y=Te;var dt=i.alternate;dt!==null&&(dt=dt.updateQueue,xe=dt.lastBaseUpdate,xe!==Y&&(xe===null?dt.firstBaseUpdate=Qe:xe.next=Qe,dt.lastBaseUpdate=Te))}if(R!==null){var mt=C.baseState;Y=0,dt=Qe=Te=null,xe=R;do{var tt=xe.lane&-536870913,it=tt!==xe.lane;if(it?(Ir&tt)===tt:(_&tt)===tt){tt!==0&&tt===Qc&&(Nm=!0),dt!==null&&(dt=dt.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var Ht=i,er=xe;tt=u;var on=p;switch(er.tag){case 1:if(Ht=er.payload,typeof Ht=="function"){mt=Ht.call(on,mt,tt);break e}mt=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=er.payload,tt=typeof Ht=="function"?Ht.call(on,mt,tt):Ht,tt==null)break e;mt=v({},mt,tt);break e;case 2:Yl=!0}}tt=xe.callback,tt!==null&&(i.flags|=64,it&&(i.flags|=8192),it=C.callbacks,it===null?C.callbacks=[tt]:it.push(tt))}else it={lane:tt,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},dt===null?(Qe=dt=it,Te=mt):dt=dt.next=it,Y|=tt;if(xe=xe.next,xe===null){if(xe=C.shared.pending,xe===null)break;it=xe,xe=it.next,it.next=null,C.lastBaseUpdate=it,C.shared.pending=null}}while(!0);dt===null&&(Te=mt),C.baseState=Te,C.firstBaseUpdate=Qe,C.lastBaseUpdate=dt,R===null&&(C.shared.lanes=0),ro|=Y,i.lanes=Y,i.memoizedState=mt}}function ov(i,u){if(typeof i!="function")throw Error(n(191,i));i.call(u)}function cv(i,u){var p=i.callbacks;if(p!==null)for(i.callbacks=null,i=0;i<p.length;i++)ov(p[i],u)}var n0=Q(null),rh=Q(0);function uv(i,u){i=hl,te(rh,i),te(n0,u),hl=i|u.baseLanes}function Am(){te(rh,hl),te(n0,n0.current)}function Tm(){hl=rh.current,B(n0),B(rh)}var ps=Q(null),Ws=null;function Jl(i){var u=i.alternate;te(Xn,Xn.current&1),te(ps,i),Ws===null&&(u===null||n0.current!==null||u.memoizedState!==null)&&(Ws=i)}function Cm(i){te(Xn,Xn.current),te(ps,i),Ws===null&&(Ws=i)}function dv(i){i.tag===22?(te(Xn,Xn.current),te(ps,i),Ws===null&&(Ws=i)):Ql()}function Ql(){te(Xn,Xn.current),te(ps,ps.current)}function bs(i){B(ps),Ws===i&&(Ws=null),B(Xn)}var Xn=Q(0);function nh(i){for(var u=i;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||Mg(p)||Fg(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var sl=0,gr=null,sn=null,ta=null,ah=!1,a0=!1,Zo=!1,sh=0,ju=0,s0=null,wA=0;function Ln(){throw Error(n(321))}function jm(i,u){if(u===null)return!1;for(var p=0;p<u.length&&p<i.length;p++)if(!k(i[p],u[p]))return!1;return!0}function Om(i,u,p,_,C,R){return sl=R,gr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ve.H=i===null||i.memoizedState===null?Kv:qm,Zo=!1,R=p(_,C),Zo=!1,a0&&(R=hv(u,p,_,C)),fv(i),R}function fv(i){ve.H=Iu;var u=sn!==null&&sn.next!==null;if(sl=0,ta=sn=gr=null,ah=!1,ju=0,s0=null,u)throw Error(n(300));i===null||ra||(i=i.dependencies,i!==null&&Yf(i)&&(ra=!0))}function hv(i,u,p,_){gr=i;var C=0;do{if(a0&&(s0=null),ju=0,a0=!1,25<=C)throw Error(n(301));if(C+=1,ta=sn=null,i.updateQueue!=null){var R=i.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}ve.H=Yv,R=u(p,_)}while(a0);return R}function _A(){var i=ve.H,u=i.useState()[0];return u=typeof u.then=="function"?Ou(u):u,i=i.useState()[0],(sn!==null?sn.memoizedState:null)!==i&&(gr.flags|=1024),u}function Rm(){var i=sh!==0;return sh=0,i}function Im(i,u,p){u.updateQueue=i.updateQueue,u.flags&=-2053,i.lanes&=~p}function Dm(i){if(ah){for(i=i.memoizedState;i!==null;){var u=i.queue;u!==null&&(u.pending=null),i=i.next}ah=!1}sl=0,ta=sn=gr=null,a0=!1,ju=sh=0,s0=null}function qa(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ta===null?gr.memoizedState=ta=i:ta=ta.next=i,ta}function Kn(){if(sn===null){var i=gr.alternate;i=i!==null?i.memoizedState:null}else i=sn.next;var u=ta===null?gr.memoizedState:ta.next;if(u!==null)ta=u,sn=i;else{if(i===null)throw gr.alternate===null?Error(n(467)):Error(n(310));sn=i,i={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},ta===null?gr.memoizedState=ta=i:ta=ta.next=i}return ta}function ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ou(i){var u=ju;return ju+=1,s0===null&&(s0=[]),i=nv(s0,i,u),u=gr,(ta===null?u.memoizedState:ta.next)===null&&(u=u.alternate,ve.H=u===null||u.memoizedState===null?Kv:qm),i}function lh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ou(i);if(i.$$typeof===I)return ka(i)}throw Error(n(438,String(i)))}function Mm(i){var u=null,p=gr.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var _=gr.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(u={data:_.data.map(function(C){return C.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=ih(),gr.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(i),_=0;_<i;_++)p[_]=ae;return u.index++,p}function il(i,u){return typeof u=="function"?u(i):u}function oh(i){var u=Kn();return Fm(u,sn,i)}function Fm(i,u,p){var _=i.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=p;var C=i.baseQueue,R=_.pending;if(R!==null){if(C!==null){var Y=C.next;C.next=R.next,R.next=Y}u.baseQueue=C=R,_.pending=null}if(R=i.baseState,C===null)i.memoizedState=R;else{u=C.next;var xe=Y=null,Te=null,Qe=u,dt=!1;do{var mt=Qe.lane&-536870913;if(mt!==Qe.lane?(Ir&mt)===mt:(sl&mt)===mt){var tt=Qe.revertLane;if(tt===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,gesture:null,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),mt===Qc&&(dt=!0);else if((sl&tt)===tt){Qe=Qe.next,tt===Qc&&(dt=!0);continue}else mt={lane:0,revertLane:Qe.revertLane,gesture:null,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},Te===null?(xe=Te=mt,Y=R):Te=Te.next=mt,gr.lanes|=tt,ro|=tt;mt=Qe.action,Zo&&p(R,mt),R=Qe.hasEagerState?Qe.eagerState:p(R,mt)}else tt={lane:mt,revertLane:Qe.revertLane,gesture:Qe.gesture,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},Te===null?(xe=Te=tt,Y=R):Te=Te.next=tt,gr.lanes|=mt,ro|=mt;Qe=Qe.next}while(Qe!==null&&Qe!==u);if(Te===null?Y=R:Te.next=xe,!k(R,i.memoizedState)&&(ra=!0,dt&&(p=e0,p!==null)))throw p;i.memoizedState=R,i.baseState=Y,i.baseQueue=Te,_.lastRenderedState=R}return C===null&&(_.lanes=0),[i.memoizedState,_.dispatch]}function Lm(i){var u=Kn(),p=u.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=i;var _=p.dispatch,C=p.pending,R=u.memoizedState;if(C!==null){p.pending=null;var Y=C=C.next;do R=i(R,Y.action),Y=Y.next;while(Y!==C);k(R,u.memoizedState)||(ra=!0),u.memoizedState=R,u.baseQueue===null&&(u.baseState=R),p.lastRenderedState=R}return[R,_]}function xv(i,u,p){var _=gr,C=Kn(),R=Lr;if(R){if(p===void 0)throw Error(n(407));p=p()}else p=u();var Y=!k((sn||C).memoizedState,p);if(Y&&(C.memoizedState=p,ra=!0),C=C.queue,Um(pv.bind(null,_,C,i),[i]),C.getSnapshot!==u||Y||ta!==null&&ta.memoizedState.tag&1){if(_.flags|=2048,i0(9,{destroy:void 0},gv.bind(null,_,C,p,u),null),hn===null)throw Error(n(349));R||(sl&127)!==0||mv(_,u,p)}return p}function mv(i,u,p){i.flags|=16384,i={getSnapshot:u,value:p},u=gr.updateQueue,u===null?(u=ih(),gr.updateQueue=u,u.stores=[i]):(p=u.stores,p===null?u.stores=[i]:p.push(i))}function gv(i,u,p,_){u.value=p,u.getSnapshot=_,bv(u)&&vv(i)}function pv(i,u,p){return p(function(){bv(u)&&vv(i)})}function bv(i){var u=i.getSnapshot;i=i.value;try{var p=u();return!k(i,p)}catch{return!0}}function vv(i){var u=Ho(i,2);u!==null&&ss(u,i,2)}function Bm(i){var u=qa();if(typeof i=="function"){var p=i;if(i=p(),Zo){qt(!0);try{p()}finally{qt(!1)}}}return u.memoizedState=u.baseState=i,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:i},u}function yv(i,u,p,_){return i.baseState=p,Fm(i,sn,typeof _=="function"?_:il)}function EA(i,u,p,_,C){if(dh(i))throw Error(n(485));if(i=u.action,i!==null){var R={payload:C,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){R.listeners.push(Y)}};ve.T!==null?p(!0):R.isTransition=!1,_(R),p=u.pending,p===null?(R.next=u.pending=R,wv(u,R)):(R.next=p.next,u.pending=p.next=R)}}function wv(i,u){var p=u.action,_=u.payload,C=i.state;if(u.isTransition){var R=ve.T,Y={};ve.T=Y;try{var xe=p(C,_),Te=ve.S;Te!==null&&Te(Y,xe),_v(i,u,xe)}catch(Qe){Pm(i,u,Qe)}finally{R!==null&&Y.types!==null&&(R.types=Y.types),ve.T=R}}else try{R=p(C,_),_v(i,u,R)}catch(Qe){Pm(i,u,Qe)}}function _v(i,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(_){Ev(i,u,_)},function(_){return Pm(i,u,_)}):Ev(i,u,p)}function Ev(i,u,p){u.status="fulfilled",u.value=p,kv(u),i.state=p,u=i.pending,u!==null&&(p=u.next,p===u?i.pending=null:(p=p.next,u.next=p,wv(i,p)))}function Pm(i,u,p){var _=i.pending;if(i.pending=null,_!==null){_=_.next;do u.status="rejected",u.reason=p,kv(u),u=u.next;while(u!==_)}i.action=null}function kv(i){i=i.listeners;for(var u=0;u<i.length;u++)(0,i[u])()}function Sv(i,u){return u}function Nv(i,u){if(Lr){var p=hn.formState;if(p!==null){e:{var _=gr;if(Lr){if(yn){t:{for(var C=yn,R=Vs;C.nodeType!==8;){if(!R){C=null;break t}if(C=qs(C.nextSibling),C===null){C=null;break t}}R=C.data,C=R==="F!"||R==="F"?C:null}if(C){yn=qs(C.nextSibling),_=C.data==="F!";break e}}Xl(_)}_=!1}_&&(u=p[0])}}return p=qa(),p.memoizedState=p.baseState=u,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sv,lastRenderedState:u},p.queue=_,p=Wv.bind(null,gr,_),_.dispatch=p,_=Bm(!1),R=Wm.bind(null,gr,!1,_.queue),_=qa(),C={state:u,dispatch:null,action:i,pending:null},_.queue=C,p=EA.bind(null,gr,C,R,p),C.dispatch=p,_.memoizedState=i,[u,p,!1]}function Av(i){var u=Kn();return Tv(u,sn,i)}function Tv(i,u,p){if(u=Fm(i,u,Sv)[0],i=oh(il)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var _=Ou(u)}catch(Y){throw Y===t0?Jf:Y}else _=u;u=Kn();var C=u.queue,R=C.dispatch;return p!==u.memoizedState&&(gr.flags|=2048,i0(9,{destroy:void 0},kA.bind(null,C,p),null)),[_,R,i]}function kA(i,u){i.action=u}function Cv(i){var u=Kn(),p=sn;if(p!==null)return Tv(u,p,i);Kn(),u=u.memoizedState,p=Kn();var _=p.queue.dispatch;return p.memoizedState=i,[u,_,!1]}function i0(i,u,p,_){return i={tag:i,create:p,deps:_,inst:u,next:null},u=gr.updateQueue,u===null&&(u=ih(),gr.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=i.next=i:(_=p.next,p.next=i,i.next=_,u.lastEffect=i),i}function jv(){return Kn().memoizedState}function ch(i,u,p,_){var C=qa();gr.flags|=i,C.memoizedState=i0(1|u,{destroy:void 0},p,_===void 0?null:_)}function uh(i,u,p,_){var C=Kn();_=_===void 0?null:_;var R=C.memoizedState.inst;sn!==null&&_!==null&&jm(_,sn.memoizedState.deps)?C.memoizedState=i0(u,R,p,_):(gr.flags|=i,C.memoizedState=i0(1|u,R,p,_))}function Ov(i,u){ch(8390656,8,i,u)}function Um(i,u){uh(2048,8,i,u)}function SA(i){gr.flags|=4;var u=gr.updateQueue;if(u===null)u=ih(),gr.updateQueue=u,u.events=[i];else{var p=u.events;p===null?u.events=[i]:p.push(i)}}function Rv(i){var u=Kn().memoizedState;return SA({ref:u,nextImpl:i}),function(){if(($r&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function Iv(i,u){return uh(4,2,i,u)}function Dv(i,u){return uh(4,4,i,u)}function Mv(i,u){if(typeof u=="function"){i=i();var p=u(i);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return i=i(),u.current=i,function(){u.current=null}}function Fv(i,u,p){p=p!=null?p.concat([i]):null,uh(4,4,Mv.bind(null,u,i),p)}function zm(){}function Lv(i,u){var p=Kn();u=u===void 0?null:u;var _=p.memoizedState;return u!==null&&jm(u,_[1])?_[0]:(p.memoizedState=[i,u],i)}function Bv(i,u){var p=Kn();u=u===void 0?null:u;var _=p.memoizedState;if(u!==null&&jm(u,_[1]))return _[0];if(_=i(),Zo){qt(!0);try{i()}finally{qt(!1)}}return p.memoizedState=[_,u],_}function Hm(i,u,p){return p===void 0||(sl&1073741824)!==0&&(Ir&261930)===0?i.memoizedState=u:(i.memoizedState=p,i=Py(),gr.lanes|=i,ro|=i,p)}function Pv(i,u,p,_){return k(p,u)?p:n0.current!==null?(i=Hm(i,p,_),k(i,u)||(ra=!0),i):(sl&42)===0||(sl&1073741824)!==0&&(Ir&261930)===0?(ra=!0,i.memoizedState=p):(i=Py(),gr.lanes|=i,ro|=i,u)}function Uv(i,u,p,_,C){var R=le.p;le.p=R!==0&&8>R?R:8;var Y=ve.T,xe={};ve.T=xe,Wm(i,!1,u,p);try{var Te=C(),Qe=ve.S;if(Qe!==null&&Qe(xe,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var dt=yA(Te,_);Ru(i,u,dt,ws(i))}else Ru(i,u,_,ws(i))}catch(mt){Ru(i,u,{then:function(){},status:"rejected",reason:mt},ws())}finally{le.p=R,Y!==null&&xe.types!==null&&(Y.types=xe.types),ve.T=Y}}function NA(){}function Gm(i,u,p,_){if(i.tag!==5)throw Error(n(476));var C=zv(i).queue;Uv(i,C,u,ge,p===null?NA:function(){return Hv(i),p(_)})}function zv(i){var u=i.memoizedState;if(u!==null)return u;u={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:ge},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:p},next:null},i.memoizedState=u,i=i.alternate,i!==null&&(i.memoizedState=u),u}function Hv(i){var u=zv(i);u.next===null&&(u=i.alternate.memoizedState),Ru(i,u.next.queue,{},ws())}function Vm(){return ka(Yu)}function Gv(){return Kn().memoizedState}function Vv(){return Kn().memoizedState}function AA(i){for(var u=i.return;u!==null;){switch(u.tag){case 24:case 3:var p=ws();i=$l(p);var _=Zl(u,i,p);_!==null&&(ss(_,u,p),Au(_,u,p)),u={cache:vm()},i.payload=u;return}u=u.return}}function TA(i,u,p){var _=ws();p={lane:_,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},dh(i)?qv(u,p):(p=om(i,u,p,_),p!==null&&(ss(p,i,_),Xv(p,u,_)))}function Wv(i,u,p){var _=ws();Ru(i,u,p,_)}function Ru(i,u,p,_){var C={lane:_,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(dh(i))qv(u,C);else{var R=i.alternate;if(i.lanes===0&&(R===null||R.lanes===0)&&(R=u.lastRenderedReducer,R!==null))try{var Y=u.lastRenderedState,xe=R(Y,p);if(C.hasEagerState=!0,C.eagerState=xe,k(xe,Y))return Wf(i,u,C,0),hn===null&&Vf(),!1}catch{}if(p=om(i,u,C,_),p!==null)return ss(p,i,_),Xv(p,u,_),!0}return!1}function Wm(i,u,p,_){if(_={lane:2,revertLane:Eg(),gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},dh(i)){if(u)throw Error(n(479))}else u=om(i,p,_,2),u!==null&&ss(u,i,2)}function dh(i){var u=i.alternate;return i===gr||u!==null&&u===gr}function qv(i,u){a0=ah=!0;var p=i.pending;p===null?u.next=u:(u.next=p.next,p.next=u),i.pending=u}function Xv(i,u,p){if((p&4194048)!==0){var _=u.lanes;_&=i.pendingLanes,p|=_,u.lanes=p,Ie(i,p)}}var Iu={readContext:ka,use:lh,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useLayoutEffect:Ln,useInsertionEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useSyncExternalStore:Ln,useId:Ln,useHostTransitionStatus:Ln,useFormState:Ln,useActionState:Ln,useOptimistic:Ln,useMemoCache:Ln,useCacheRefresh:Ln};Iu.useEffectEvent=Ln;var Kv={readContext:ka,use:lh,useCallback:function(i,u){return qa().memoizedState=[i,u===void 0?null:u],i},useContext:ka,useEffect:Ov,useImperativeHandle:function(i,u,p){p=p!=null?p.concat([i]):null,ch(4194308,4,Mv.bind(null,u,i),p)},useLayoutEffect:function(i,u){return ch(4194308,4,i,u)},useInsertionEffect:function(i,u){ch(4,2,i,u)},useMemo:function(i,u){var p=qa();u=u===void 0?null:u;var _=i();if(Zo){qt(!0);try{i()}finally{qt(!1)}}return p.memoizedState=[_,u],_},useReducer:function(i,u,p){var _=qa();if(p!==void 0){var C=p(u);if(Zo){qt(!0);try{p(u)}finally{qt(!1)}}}else C=u;return _.memoizedState=_.baseState=C,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:C},_.queue=i,i=i.dispatch=TA.bind(null,gr,i),[_.memoizedState,i]},useRef:function(i){var u=qa();return i={current:i},u.memoizedState=i},useState:function(i){i=Bm(i);var u=i.queue,p=Wv.bind(null,gr,u);return u.dispatch=p,[i.memoizedState,p]},useDebugValue:zm,useDeferredValue:function(i,u){var p=qa();return Hm(p,i,u)},useTransition:function(){var i=Bm(!1);return i=Uv.bind(null,gr,i.queue,!0,!1),qa().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,u,p){var _=gr,C=qa();if(Lr){if(p===void 0)throw Error(n(407));p=p()}else{if(p=u(),hn===null)throw Error(n(349));(Ir&127)!==0||mv(_,u,p)}C.memoizedState=p;var R={value:p,getSnapshot:u};return C.queue=R,Ov(pv.bind(null,_,R,i),[i]),_.flags|=2048,i0(9,{destroy:void 0},gv.bind(null,_,R,p,u),null),p},useId:function(){var i=qa(),u=hn.identifierPrefix;if(Lr){var p=Oi,_=ji;p=(_&~(1<<32-Bt(_)-1)).toString(32)+p,u="_"+u+"R_"+p,p=sh++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=wA++,u="_"+u+"r_"+p.toString(32)+"_";return i.memoizedState=u},useHostTransitionStatus:Vm,useFormState:Nv,useActionState:Nv,useOptimistic:function(i){var u=qa();u.memoizedState=u.baseState=i;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Wm.bind(null,gr,!0,p),p.dispatch=u,[i,u]},useMemoCache:Mm,useCacheRefresh:function(){return qa().memoizedState=AA.bind(null,gr)},useEffectEvent:function(i){var u=qa(),p={impl:i};return u.memoizedState=p,function(){if(($r&2)!==0)throw Error(n(440));return p.impl.apply(void 0,arguments)}}},qm={readContext:ka,use:lh,useCallback:Lv,useContext:ka,useEffect:Um,useImperativeHandle:Fv,useInsertionEffect:Iv,useLayoutEffect:Dv,useMemo:Bv,useReducer:oh,useRef:jv,useState:function(){return oh(il)},useDebugValue:zm,useDeferredValue:function(i,u){var p=Kn();return Pv(p,sn.memoizedState,i,u)},useTransition:function(){var i=oh(il)[0],u=Kn().memoizedState;return[typeof i=="boolean"?i:Ou(i),u]},useSyncExternalStore:xv,useId:Gv,useHostTransitionStatus:Vm,useFormState:Av,useActionState:Av,useOptimistic:function(i,u){var p=Kn();return yv(p,sn,i,u)},useMemoCache:Mm,useCacheRefresh:Vv};qm.useEffectEvent=Rv;var Yv={readContext:ka,use:lh,useCallback:Lv,useContext:ka,useEffect:Um,useImperativeHandle:Fv,useInsertionEffect:Iv,useLayoutEffect:Dv,useMemo:Bv,useReducer:Lm,useRef:jv,useState:function(){return Lm(il)},useDebugValue:zm,useDeferredValue:function(i,u){var p=Kn();return sn===null?Hm(p,i,u):Pv(p,sn.memoizedState,i,u)},useTransition:function(){var i=Lm(il)[0],u=Kn().memoizedState;return[typeof i=="boolean"?i:Ou(i),u]},useSyncExternalStore:xv,useId:Gv,useHostTransitionStatus:Vm,useFormState:Cv,useActionState:Cv,useOptimistic:function(i,u){var p=Kn();return sn!==null?yv(p,sn,i,u):(p.baseState=i,[i,p.queue.dispatch])},useMemoCache:Mm,useCacheRefresh:Vv};Yv.useEffectEvent=Rv;function Xm(i,u,p,_){u=i.memoizedState,p=p(_,u),p=p==null?u:v({},u,p),i.memoizedState=p,i.lanes===0&&(i.updateQueue.baseState=p)}var Km={enqueueSetState:function(i,u,p){i=i._reactInternals;var _=ws(),C=$l(_);C.payload=u,p!=null&&(C.callback=p),u=Zl(i,C,_),u!==null&&(ss(u,i,_),Au(u,i,_))},enqueueReplaceState:function(i,u,p){i=i._reactInternals;var _=ws(),C=$l(_);C.tag=1,C.payload=u,p!=null&&(C.callback=p),u=Zl(i,C,_),u!==null&&(ss(u,i,_),Au(u,i,_))},enqueueForceUpdate:function(i,u){i=i._reactInternals;var p=ws(),_=$l(p);_.tag=2,u!=null&&(_.callback=u),u=Zl(i,_,p),u!==null&&(ss(u,i,p),Au(u,i,p))}};function $v(i,u,p,_,C,R,Y){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(_,R,Y):u.prototype&&u.prototype.isPureReactComponent?!A(p,_)||!A(C,R):!0}function Zv(i,u,p,_){i=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,_),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,_),u.state!==i&&Km.enqueueReplaceState(u,u.state,null)}function Jo(i,u){var p=u;if("ref"in u){p={};for(var _ in u)_!=="ref"&&(p[_]=u[_])}if(i=i.defaultProps){p===u&&(p=v({},p));for(var C in i)p[C]===void 0&&(p[C]=i[C])}return p}function Jv(i){Gf(i)}function Qv(i){console.error(i)}function ey(i){Gf(i)}function fh(i,u){try{var p=i.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(_){setTimeout(function(){throw _})}}function ty(i,u,p){try{var _=i.onCaughtError;_(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Ym(i,u,p){return p=$l(p),p.tag=3,p.payload={element:null},p.callback=function(){fh(i,u)},p}function ry(i){return i=$l(i),i.tag=3,i}function ny(i,u,p,_){var C=p.type.getDerivedStateFromError;if(typeof C=="function"){var R=_.value;i.payload=function(){return C(R)},i.callback=function(){ty(u,p,_)}}var Y=p.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(i.callback=function(){ty(u,p,_),typeof C!="function"&&(no===null?no=new Set([this]):no.add(this));var xe=_.stack;this.componentDidCatch(_.value,{componentStack:xe!==null?xe:""})})}function CA(i,u,p,_,C){if(p.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(u=p.alternate,u!==null&&Jc(u,p,C,!0),p=ps.current,p!==null){switch(p.tag){case 31:case 13:return Ws===null?kh():p.alternate===null&&Bn===0&&(Bn=3),p.flags&=-257,p.flags|=65536,p.lanes=C,_===Qf?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([_]):u.add(_),yg(i,_,C)),!1;case 22:return p.flags|=65536,_===Qf?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([_])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([_]):p.add(_)),yg(i,_,C)),!1}throw Error(n(435,p.tag))}return yg(i,_,C),kh(),!1}if(Lr)return u=ps.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=C,_!==xm&&(i=Error(n(422),{cause:_}),_u(zs(i,p)))):(_!==xm&&(u=Error(n(423),{cause:_}),_u(zs(u,p))),i=i.current.alternate,i.flags|=65536,C&=-C,i.lanes|=C,_=zs(_,p),C=Ym(i.stateNode,_,C),Sm(i,C),Bn!==4&&(Bn=2)),!1;var R=Error(n(520),{cause:_});if(R=zs(R,p),zu===null?zu=[R]:zu.push(R),Bn!==4&&(Bn=2),u===null)return!0;_=zs(_,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,i=C&-C,p.lanes|=i,i=Ym(p.stateNode,_,i),Sm(p,i),!1;case 1:if(u=p.type,R=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(no===null||!no.has(R))))return p.flags|=65536,C&=-C,p.lanes|=C,C=ry(C),ny(C,i,p,_),Sm(p,C),!1}p=p.return}while(p!==null);return!1}var $m=Error(n(461)),ra=!1;function Sa(i,u,p,_){u.child=i===null?lv(u,null,p,_):$o(u,i.child,p,_)}function ay(i,u,p,_,C){p=p.render;var R=u.ref;if("ref"in _){var Y={};for(var xe in _)xe!=="ref"&&(Y[xe]=_[xe])}else Y=_;return qo(u),_=Om(i,u,p,Y,R,C),xe=Rm(),i!==null&&!ra?(Im(i,u,C),ll(i,u,C)):(Lr&&xe&&fm(u),u.flags|=1,Sa(i,u,_,C),u.child)}function sy(i,u,p,_,C){if(i===null){var R=p.type;return typeof R=="function"&&!cm(R)&&R.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=R,iy(i,u,R,_,C)):(i=Xf(p.type,null,_,u,u.mode,C),i.ref=u.ref,i.return=u,u.child=i)}if(R=i.child,!ag(i,C)){var Y=R.memoizedProps;if(p=p.compare,p=p!==null?p:A,p(Y,_)&&i.ref===u.ref)return ll(i,u,C)}return u.flags|=1,i=tl(R,_),i.ref=u.ref,i.return=u,u.child=i}function iy(i,u,p,_,C){if(i!==null){var R=i.memoizedProps;if(A(R,_)&&i.ref===u.ref)if(ra=!1,u.pendingProps=_=R,ag(i,C))(i.flags&131072)!==0&&(ra=!0);else return u.lanes=i.lanes,ll(i,u,C)}return Zm(i,u,p,_,C)}function ly(i,u,p,_){var C=_.children,R=i!==null?i.memoizedState:null;if(i===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),_.mode==="hidden"){if((u.flags&128)!==0){if(R=R!==null?R.baseLanes|p:p,i!==null){for(_=u.child=i.child,C=0;_!==null;)C=C|_.lanes|_.childLanes,_=_.sibling;_=C&~R}else _=0,u.child=null;return oy(i,u,R,p,_)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},i!==null&&Zf(u,R!==null?R.cachePool:null),R!==null?uv(u,R):Am(),dv(u);else return _=u.lanes=536870912,oy(i,u,R!==null?R.baseLanes|p:p,p,_)}else R!==null?(Zf(u,R.cachePool),uv(u,R),Ql(),u.memoizedState=null):(i!==null&&Zf(u,null),Am(),Ql());return Sa(i,u,C,p),u.child}function Du(i,u){return i!==null&&i.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function oy(i,u,p,_,C){var R=wm();return R=R===null?null:{parent:ea._currentValue,pool:R},u.memoizedState={baseLanes:p,cachePool:R},i!==null&&Zf(u,null),Am(),dv(u),i!==null&&Jc(i,u,_,!0),u.childLanes=C,null}function hh(i,u){return u=mh({mode:u.mode,children:u.children},i.mode),u.ref=i.ref,i.child=u,u.return=i,u}function cy(i,u,p){return $o(u,i.child,null,p),i=hh(u,u.pendingProps),i.flags|=2,bs(u),u.memoizedState=null,i}function jA(i,u,p){var _=u.pendingProps,C=(u.flags&128)!==0;if(u.flags&=-129,i===null){if(Lr){if(_.mode==="hidden")return i=hh(u,_),u.lanes=536870912,Du(null,i);if(Cm(u),(i=yn)?(i=ww(i,Vs),i=i!==null&&i.data==="&"?i:null,i!==null&&(u.memoizedState={dehydrated:i,treeContext:Wl!==null?{id:ji,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},p=qb(i),p.return=u,u.child=p,Ea=u,yn=null)):i=null,i===null)throw Xl(u);return u.lanes=536870912,null}return hh(u,_)}var R=i.memoizedState;if(R!==null){var Y=R.dehydrated;if(Cm(u),C)if(u.flags&256)u.flags&=-257,u=cy(i,u,p);else if(u.memoizedState!==null)u.child=i.child,u.flags|=128,u=null;else throw Error(n(558));else if(ra||Jc(i,u,p,!1),C=(p&i.childLanes)!==0,ra||C){if(_=hn,_!==null&&(Y=wt(_,p),Y!==0&&Y!==R.retryLane))throw R.retryLane=Y,Ho(i,Y),ss(_,i,Y),$m;kh(),u=cy(i,u,p)}else i=R.treeContext,yn=qs(Y.nextSibling),Ea=u,Lr=!0,ql=null,Vs=!1,i!==null&&Yb(u,i),u=hh(u,_),u.flags|=4096;return u}return i=tl(i.child,{mode:_.mode,children:_.children}),i.ref=u.ref,u.child=i,i.return=u,i}function xh(i,u){var p=u.ref;if(p===null)i!==null&&i.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(i===null||i.ref!==p)&&(u.flags|=4194816)}}function Zm(i,u,p,_,C){return qo(u),p=Om(i,u,p,_,void 0,C),_=Rm(),i!==null&&!ra?(Im(i,u,C),ll(i,u,C)):(Lr&&_&&fm(u),u.flags|=1,Sa(i,u,p,C),u.child)}function uy(i,u,p,_,C,R){return qo(u),u.updateQueue=null,p=hv(u,_,p,C),fv(i),_=Rm(),i!==null&&!ra?(Im(i,u,R),ll(i,u,R)):(Lr&&_&&fm(u),u.flags|=1,Sa(i,u,p,R),u.child)}function dy(i,u,p,_,C){if(qo(u),u.stateNode===null){var R=Kc,Y=p.contextType;typeof Y=="object"&&Y!==null&&(R=ka(Y)),R=new p(_,R),u.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Km,u.stateNode=R,R._reactInternals=u,R=u.stateNode,R.props=_,R.state=u.memoizedState,R.refs={},Em(u),Y=p.contextType,R.context=typeof Y=="object"&&Y!==null?ka(Y):Kc,R.state=u.memoizedState,Y=p.getDerivedStateFromProps,typeof Y=="function"&&(Xm(u,p,Y,_),R.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(Y=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),Y!==R.state&&Km.enqueueReplaceState(R,R.state,null),Cu(u,_,R,C),Tu(),R.state=u.memoizedState),typeof R.componentDidMount=="function"&&(u.flags|=4194308),_=!0}else if(i===null){R=u.stateNode;var xe=u.memoizedProps,Te=Jo(p,xe);R.props=Te;var Qe=R.context,dt=p.contextType;Y=Kc,typeof dt=="object"&&dt!==null&&(Y=ka(dt));var mt=p.getDerivedStateFromProps;dt=typeof mt=="function"||typeof R.getSnapshotBeforeUpdate=="function",xe=u.pendingProps!==xe,dt||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(xe||Qe!==Y)&&Zv(u,R,_,Y),Yl=!1;var tt=u.memoizedState;R.state=tt,Cu(u,_,R,C),Tu(),Qe=u.memoizedState,xe||tt!==Qe||Yl?(typeof mt=="function"&&(Xm(u,p,mt,_),Qe=u.memoizedState),(Te=Yl||$v(u,p,Te,_,tt,Qe,Y))?(dt||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(u.flags|=4194308)):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=_,u.memoizedState=Qe),R.props=_,R.state=Qe,R.context=Y,_=Te):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),_=!1)}else{R=u.stateNode,km(i,u),Y=u.memoizedProps,dt=Jo(p,Y),R.props=dt,mt=u.pendingProps,tt=R.context,Qe=p.contextType,Te=Kc,typeof Qe=="object"&&Qe!==null&&(Te=ka(Qe)),xe=p.getDerivedStateFromProps,(Qe=typeof xe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(Y!==mt||tt!==Te)&&Zv(u,R,_,Te),Yl=!1,tt=u.memoizedState,R.state=tt,Cu(u,_,R,C),Tu();var it=u.memoizedState;Y!==mt||tt!==it||Yl||i!==null&&i.dependencies!==null&&Yf(i.dependencies)?(typeof xe=="function"&&(Xm(u,p,xe,_),it=u.memoizedState),(dt=Yl||$v(u,p,dt,_,tt,it,Te)||i!==null&&i.dependencies!==null&&Yf(i.dependencies))?(Qe||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(_,it,Te),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(_,it,Te)),typeof R.componentDidUpdate=="function"&&(u.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof R.componentDidUpdate!="function"||Y===i.memoizedProps&&tt===i.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Y===i.memoizedProps&&tt===i.memoizedState||(u.flags|=1024),u.memoizedProps=_,u.memoizedState=it),R.props=_,R.state=it,R.context=Te,_=dt):(typeof R.componentDidUpdate!="function"||Y===i.memoizedProps&&tt===i.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Y===i.memoizedProps&&tt===i.memoizedState||(u.flags|=1024),_=!1)}return R=_,xh(i,u),_=(u.flags&128)!==0,R||_?(R=u.stateNode,p=_&&typeof p.getDerivedStateFromError!="function"?null:R.render(),u.flags|=1,i!==null&&_?(u.child=$o(u,i.child,null,C),u.child=$o(u,null,p,C)):Sa(i,u,p,C),u.memoizedState=R.state,i=u.child):i=ll(i,u,C),i}function fy(i,u,p,_){return Vo(),u.flags|=256,Sa(i,u,p,_),u.child}var Jm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qm(i){return{baseLanes:i,cachePool:tv()}}function eg(i,u,p){return i=i!==null?i.childLanes&~p:0,u&&(i|=ys),i}function hy(i,u,p){var _=u.pendingProps,C=!1,R=(u.flags&128)!==0,Y;if((Y=R)||(Y=i!==null&&i.memoizedState===null?!1:(Xn.current&2)!==0),Y&&(C=!0,u.flags&=-129),Y=(u.flags&32)!==0,u.flags&=-33,i===null){if(Lr){if(C?Jl(u):Ql(),(i=yn)?(i=ww(i,Vs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(u.memoizedState={dehydrated:i,treeContext:Wl!==null?{id:ji,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},p=qb(i),p.return=u,u.child=p,Ea=u,yn=null)):i=null,i===null)throw Xl(u);return Fg(i)?u.lanes=32:u.lanes=536870912,null}var xe=_.children;return _=_.fallback,C?(Ql(),C=u.mode,xe=mh({mode:"hidden",children:xe},C),_=Go(_,C,p,null),xe.return=u,_.return=u,xe.sibling=_,u.child=xe,_=u.child,_.memoizedState=Qm(p),_.childLanes=eg(i,Y,p),u.memoizedState=Jm,Du(null,_)):(Jl(u),tg(u,xe))}var Te=i.memoizedState;if(Te!==null&&(xe=Te.dehydrated,xe!==null)){if(R)u.flags&256?(Jl(u),u.flags&=-257,u=rg(i,u,p)):u.memoizedState!==null?(Ql(),u.child=i.child,u.flags|=128,u=null):(Ql(),xe=_.fallback,C=u.mode,_=mh({mode:"visible",children:_.children},C),xe=Go(xe,C,p,null),xe.flags|=2,_.return=u,xe.return=u,_.sibling=xe,u.child=_,$o(u,i.child,null,p),_=u.child,_.memoizedState=Qm(p),_.childLanes=eg(i,Y,p),u.memoizedState=Jm,u=Du(null,_));else if(Jl(u),Fg(xe)){if(Y=xe.nextSibling&&xe.nextSibling.dataset,Y)var Qe=Y.dgst;Y=Qe,_=Error(n(419)),_.stack="",_.digest=Y,_u({value:_,source:null,stack:null}),u=rg(i,u,p)}else if(ra||Jc(i,u,p,!1),Y=(p&i.childLanes)!==0,ra||Y){if(Y=hn,Y!==null&&(_=wt(Y,p),_!==0&&_!==Te.retryLane))throw Te.retryLane=_,Ho(i,_),ss(Y,i,_),$m;Mg(xe)||kh(),u=rg(i,u,p)}else Mg(xe)?(u.flags|=192,u.child=i.child,u=null):(i=Te.treeContext,yn=qs(xe.nextSibling),Ea=u,Lr=!0,ql=null,Vs=!1,i!==null&&Yb(u,i),u=tg(u,_.children),u.flags|=4096);return u}return C?(Ql(),xe=_.fallback,C=u.mode,Te=i.child,Qe=Te.sibling,_=tl(Te,{mode:"hidden",children:_.children}),_.subtreeFlags=Te.subtreeFlags&65011712,Qe!==null?xe=tl(Qe,xe):(xe=Go(xe,C,p,null),xe.flags|=2),xe.return=u,_.return=u,_.sibling=xe,u.child=_,Du(null,_),_=u.child,xe=i.child.memoizedState,xe===null?xe=Qm(p):(C=xe.cachePool,C!==null?(Te=ea._currentValue,C=C.parent!==Te?{parent:Te,pool:Te}:C):C=tv(),xe={baseLanes:xe.baseLanes|p,cachePool:C}),_.memoizedState=xe,_.childLanes=eg(i,Y,p),u.memoizedState=Jm,Du(i.child,_)):(Jl(u),p=i.child,i=p.sibling,p=tl(p,{mode:"visible",children:_.children}),p.return=u,p.sibling=null,i!==null&&(Y=u.deletions,Y===null?(u.deletions=[i],u.flags|=16):Y.push(i)),u.child=p,u.memoizedState=null,p)}function tg(i,u){return u=mh({mode:"visible",children:u},i.mode),u.return=i,i.child=u}function mh(i,u){return i=gs(22,i,null,u),i.lanes=0,i}function rg(i,u,p){return $o(u,i.child,null,p),i=tg(u,u.pendingProps.children),i.flags|=2,u.memoizedState=null,i}function xy(i,u,p){i.lanes|=u;var _=i.alternate;_!==null&&(_.lanes|=u),pm(i.return,u,p)}function ng(i,u,p,_,C,R){var Y=i.memoizedState;Y===null?i.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:_,tail:p,tailMode:C,treeForkCount:R}:(Y.isBackwards=u,Y.rendering=null,Y.renderingStartTime=0,Y.last=_,Y.tail=p,Y.tailMode=C,Y.treeForkCount=R)}function my(i,u,p){var _=u.pendingProps,C=_.revealOrder,R=_.tail;_=_.children;var Y=Xn.current,xe=(Y&2)!==0;if(xe?(Y=Y&1|2,u.flags|=128):Y&=1,te(Xn,Y),Sa(i,u,_,p),_=Lr?wu:0,!xe&&i!==null&&(i.flags&128)!==0)e:for(i=u.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&xy(i,p,u);else if(i.tag===19)xy(i,p,u);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===u)break e;for(;i.sibling===null;){if(i.return===null||i.return===u)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(C){case"forwards":for(p=u.child,C=null;p!==null;)i=p.alternate,i!==null&&nh(i)===null&&(C=p),p=p.sibling;p=C,p===null?(C=u.child,u.child=null):(C=p.sibling,p.sibling=null),ng(u,!1,C,p,R,_);break;case"backwards":case"unstable_legacy-backwards":for(p=null,C=u.child,u.child=null;C!==null;){if(i=C.alternate,i!==null&&nh(i)===null){u.child=C;break}i=C.sibling,C.sibling=p,p=C,C=i}ng(u,!0,p,null,R,_);break;case"together":ng(u,!1,null,null,void 0,_);break;default:u.memoizedState=null}return u.child}function ll(i,u,p){if(i!==null&&(u.dependencies=i.dependencies),ro|=u.lanes,(p&u.childLanes)===0)if(i!==null){if(Jc(i,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(i!==null&&u.child!==i.child)throw Error(n(153));if(u.child!==null){for(i=u.child,p=tl(i,i.pendingProps),u.child=p,p.return=u;i.sibling!==null;)i=i.sibling,p=p.sibling=tl(i,i.pendingProps),p.return=u;p.sibling=null}return u.child}function ag(i,u){return(i.lanes&u)!==0?!0:(i=i.dependencies,!!(i!==null&&Yf(i)))}function OA(i,u,p){switch(u.tag){case 3:De(u,u.stateNode.containerInfo),Kl(u,ea,i.memoizedState.cache),Vo();break;case 27:case 5:Ke(u);break;case 4:De(u,u.stateNode.containerInfo);break;case 10:Kl(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Cm(u),null;break;case 13:var _=u.memoizedState;if(_!==null)return _.dehydrated!==null?(Jl(u),u.flags|=128,null):(p&u.child.childLanes)!==0?hy(i,u,p):(Jl(u),i=ll(i,u,p),i!==null?i.sibling:null);Jl(u);break;case 19:var C=(i.flags&128)!==0;if(_=(p&u.childLanes)!==0,_||(Jc(i,u,p,!1),_=(p&u.childLanes)!==0),C){if(_)return my(i,u,p);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),te(Xn,Xn.current),_)break;return null;case 22:return u.lanes=0,ly(i,u,p,u.pendingProps);case 24:Kl(u,ea,i.memoizedState.cache)}return ll(i,u,p)}function gy(i,u,p){if(i!==null)if(i.memoizedProps!==u.pendingProps)ra=!0;else{if(!ag(i,p)&&(u.flags&128)===0)return ra=!1,OA(i,u,p);ra=(i.flags&131072)!==0}else ra=!1,Lr&&(u.flags&1048576)!==0&&Kb(u,wu,u.index);switch(u.lanes=0,u.tag){case 16:e:{var _=u.pendingProps;if(i=Ko(u.elementType),u.type=i,typeof i=="function")cm(i)?(_=Jo(i,_),u.tag=1,u=dy(null,u,i,_,p)):(u.tag=0,u=Zm(null,u,i,_,p));else{if(i!=null){var C=i.$$typeof;if(C===L){u.tag=11,u=ay(null,u,i,_,p);break e}else if(C===M){u.tag=14,u=sy(null,u,i,_,p);break e}}throw u=q(i)||i,Error(n(306,u,""))}}return u;case 0:return Zm(i,u,u.type,u.pendingProps,p);case 1:return _=u.type,C=Jo(_,u.pendingProps),dy(i,u,_,C,p);case 3:e:{if(De(u,u.stateNode.containerInfo),i===null)throw Error(n(387));_=u.pendingProps;var R=u.memoizedState;C=R.element,km(i,u),Cu(u,_,null,p);var Y=u.memoizedState;if(_=Y.cache,Kl(u,ea,_),_!==R.cache&&bm(u,[ea],p,!0),Tu(),_=Y.element,R.isDehydrated)if(R={element:_,isDehydrated:!1,cache:Y.cache},u.updateQueue.baseState=R,u.memoizedState=R,u.flags&256){u=fy(i,u,_,p);break e}else if(_!==C){C=zs(Error(n(424)),u),_u(C),u=fy(i,u,_,p);break e}else for(i=u.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,yn=qs(i.firstChild),Ea=u,Lr=!0,ql=null,Vs=!0,p=lv(u,null,_,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Vo(),_===C){u=ll(i,u,p);break e}Sa(i,u,_,p)}u=u.child}return u;case 26:return xh(i,u),i===null?(p=Aw(u.type,null,u.pendingProps,null))?u.memoizedState=p:Lr||(p=u.type,i=u.pendingProps,_=Oh(ue.current).createElement(p),_[be]=u,_[we]=i,Na(_,p,i),Ut(_),u.stateNode=_):u.memoizedState=Aw(u.type,i.memoizedProps,u.pendingProps,i.memoizedState),null;case 27:return Ke(u),i===null&&Lr&&(_=u.stateNode=kw(u.type,u.pendingProps,ue.current),Ea=u,Vs=!0,C=yn,lo(u.type)?(Lg=C,yn=qs(_.firstChild)):yn=C),Sa(i,u,u.pendingProps.children,p),xh(i,u),i===null&&(u.flags|=4194304),u.child;case 5:return i===null&&Lr&&((C=_=yn)&&(_=l6(_,u.type,u.pendingProps,Vs),_!==null?(u.stateNode=_,Ea=u,yn=qs(_.firstChild),Vs=!1,C=!0):C=!1),C||Xl(u)),Ke(u),C=u.type,R=u.pendingProps,Y=i!==null?i.memoizedProps:null,_=R.children,Rg(C,R)?_=null:Y!==null&&Rg(C,Y)&&(u.flags|=32),u.memoizedState!==null&&(C=Om(i,u,_A,null,null,p),Yu._currentValue=C),xh(i,u),Sa(i,u,_,p),u.child;case 6:return i===null&&Lr&&((i=p=yn)&&(p=o6(p,u.pendingProps,Vs),p!==null?(u.stateNode=p,Ea=u,yn=null,i=!0):i=!1),i||Xl(u)),null;case 13:return hy(i,u,p);case 4:return De(u,u.stateNode.containerInfo),_=u.pendingProps,i===null?u.child=$o(u,null,_,p):Sa(i,u,_,p),u.child;case 11:return ay(i,u,u.type,u.pendingProps,p);case 7:return Sa(i,u,u.pendingProps,p),u.child;case 8:return Sa(i,u,u.pendingProps.children,p),u.child;case 12:return Sa(i,u,u.pendingProps.children,p),u.child;case 10:return _=u.pendingProps,Kl(u,u.type,_.value),Sa(i,u,_.children,p),u.child;case 9:return C=u.type._context,_=u.pendingProps.children,qo(u),C=ka(C),_=_(C),u.flags|=1,Sa(i,u,_,p),u.child;case 14:return sy(i,u,u.type,u.pendingProps,p);case 15:return iy(i,u,u.type,u.pendingProps,p);case 19:return my(i,u,p);case 31:return jA(i,u,p);case 22:return ly(i,u,p,u.pendingProps);case 24:return qo(u),_=ka(ea),i===null?(C=wm(),C===null&&(C=hn,R=vm(),C.pooledCache=R,R.refCount++,R!==null&&(C.pooledCacheLanes|=p),C=R),u.memoizedState={parent:_,cache:C},Em(u),Kl(u,ea,C)):((i.lanes&p)!==0&&(km(i,u),Cu(u,null,null,p),Tu()),C=i.memoizedState,R=u.memoizedState,C.parent!==_?(C={parent:_,cache:_},u.memoizedState=C,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=C),Kl(u,ea,_)):(_=R.cache,Kl(u,ea,_),_!==C.cache&&bm(u,[ea],p,!0))),Sa(i,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function ol(i){i.flags|=4}function sg(i,u,p,_,C){if((u=(i.mode&32)!==0)&&(u=!1),u){if(i.flags|=16777216,(C&335544128)===C)if(i.stateNode.complete)i.flags|=8192;else if(Gy())i.flags|=8192;else throw Yo=Qf,_m}else i.flags&=-16777217}function py(i,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Rw(u))if(Gy())i.flags|=8192;else throw Yo=Qf,_m}function gh(i,u){u!==null&&(i.flags|=4),i.flags&16384&&(u=i.tag!==22?Ge():536870912,i.lanes|=u,u0|=u)}function Mu(i,u){if(!Lr)switch(i.tailMode){case"hidden":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?i.tail=null:p.sibling=null;break;case"collapsed":p=i.tail;for(var _=null;p!==null;)p.alternate!==null&&(_=p),p=p.sibling;_===null?u||i.tail===null?i.tail=null:i.tail.sibling=null:_.sibling=null}}function wn(i){var u=i.alternate!==null&&i.alternate.child===i.child,p=0,_=0;if(u)for(var C=i.child;C!==null;)p|=C.lanes|C.childLanes,_|=C.subtreeFlags&65011712,_|=C.flags&65011712,C.return=i,C=C.sibling;else for(C=i.child;C!==null;)p|=C.lanes|C.childLanes,_|=C.subtreeFlags,_|=C.flags,C.return=i,C=C.sibling;return i.subtreeFlags|=_,i.childLanes=p,u}function RA(i,u,p){var _=u.pendingProps;switch(hm(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(u),null;case 1:return wn(u),null;case 3:return p=u.stateNode,_=null,i!==null&&(_=i.memoizedState.cache),u.memoizedState.cache!==_&&(u.flags|=2048),al(ea),Ne(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(Zc(u)?ol(u):i===null||i.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,mm())),wn(u),null;case 26:var C=u.type,R=u.memoizedState;return i===null?(ol(u),R!==null?(wn(u),py(u,R)):(wn(u),sg(u,C,null,_,p))):R?R!==i.memoizedState?(ol(u),wn(u),py(u,R)):(wn(u),u.flags&=-16777217):(i=i.memoizedProps,i!==_&&ol(u),wn(u),sg(u,C,i,_,p)),null;case 27:if(ye(u),p=ue.current,C=u.type,i!==null&&u.stateNode!=null)i.memoizedProps!==_&&ol(u);else{if(!_){if(u.stateNode===null)throw Error(n(166));return wn(u),null}i=U.current,Zc(u)?$b(u):(i=kw(C,_,p),u.stateNode=i,ol(u))}return wn(u),null;case 5:if(ye(u),C=u.type,i!==null&&u.stateNode!=null)i.memoizedProps!==_&&ol(u);else{if(!_){if(u.stateNode===null)throw Error(n(166));return wn(u),null}if(R=U.current,Zc(u))$b(u);else{var Y=Oh(ue.current);switch(R){case 1:R=Y.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:R=Y.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":R=Y.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":R=Y.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":R=Y.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof _.is=="string"?Y.createElement("select",{is:_.is}):Y.createElement("select"),_.multiple?R.multiple=!0:_.size&&(R.size=_.size);break;default:R=typeof _.is=="string"?Y.createElement(C,{is:_.is}):Y.createElement(C)}}R[be]=u,R[we]=_;e:for(Y=u.child;Y!==null;){if(Y.tag===5||Y.tag===6)R.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===u)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===u)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}u.stateNode=R;e:switch(Na(R,C,_),C){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}_&&ol(u)}}return wn(u),sg(u,u.type,i===null?null:i.memoizedProps,u.pendingProps,p),null;case 6:if(i&&u.stateNode!=null)i.memoizedProps!==_&&ol(u);else{if(typeof _!="string"&&u.stateNode===null)throw Error(n(166));if(i=ue.current,Zc(u)){if(i=u.stateNode,p=u.memoizedProps,_=null,C=Ea,C!==null)switch(C.tag){case 27:case 5:_=C.memoizedProps}i[be]=u,i=!!(i.nodeValue===p||_!==null&&_.suppressHydrationWarning===!0||hw(i.nodeValue,p)),i||Xl(u,!0)}else i=Oh(i).createTextNode(_),i[be]=u,u.stateNode=i}return wn(u),null;case 31:if(p=u.memoizedState,i===null||i.memoizedState!==null){if(_=Zc(u),p!==null){if(i===null){if(!_)throw Error(n(318));if(i=u.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[be]=u}else Vo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;wn(u),i=!1}else p=mm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),i=!0;if(!i)return u.flags&256?(bs(u),u):(bs(u),null);if((u.flags&128)!==0)throw Error(n(558))}return wn(u),null;case 13:if(_=u.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(C=Zc(u),_!==null&&_.dehydrated!==null){if(i===null){if(!C)throw Error(n(318));if(C=u.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(n(317));C[be]=u}else Vo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;wn(u),C=!1}else C=mm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=C),C=!0;if(!C)return u.flags&256?(bs(u),u):(bs(u),null)}return bs(u),(u.flags&128)!==0?(u.lanes=p,u):(p=_!==null,i=i!==null&&i.memoizedState!==null,p&&(_=u.child,C=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(C=_.alternate.memoizedState.cachePool.pool),R=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(R=_.memoizedState.cachePool.pool),R!==C&&(_.flags|=2048)),p!==i&&p&&(u.child.flags|=8192),gh(u,u.updateQueue),wn(u),null);case 4:return Ne(),i===null&&Ag(u.stateNode.containerInfo),wn(u),null;case 10:return al(u.type),wn(u),null;case 19:if(B(Xn),_=u.memoizedState,_===null)return wn(u),null;if(C=(u.flags&128)!==0,R=_.rendering,R===null)if(C)Mu(_,!1);else{if(Bn!==0||i!==null&&(i.flags&128)!==0)for(i=u.child;i!==null;){if(R=nh(i),R!==null){for(u.flags|=128,Mu(_,!1),i=R.updateQueue,u.updateQueue=i,gh(u,i),u.subtreeFlags=0,i=p,p=u.child;p!==null;)Wb(p,i),p=p.sibling;return te(Xn,Xn.current&1|2),Lr&&rl(u,_.treeForkCount),u.child}i=i.sibling}_.tail!==null&&We()>wh&&(u.flags|=128,C=!0,Mu(_,!1),u.lanes=4194304)}else{if(!C)if(i=nh(R),i!==null){if(u.flags|=128,C=!0,i=i.updateQueue,u.updateQueue=i,gh(u,i),Mu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!R.alternate&&!Lr)return wn(u),null}else 2*We()-_.renderingStartTime>wh&&p!==536870912&&(u.flags|=128,C=!0,Mu(_,!1),u.lanes=4194304);_.isBackwards?(R.sibling=u.child,u.child=R):(i=_.last,i!==null?i.sibling=R:u.child=R,_.last=R)}return _.tail!==null?(i=_.tail,_.rendering=i,_.tail=i.sibling,_.renderingStartTime=We(),i.sibling=null,p=Xn.current,te(Xn,C?p&1|2:p&1),Lr&&rl(u,_.treeForkCount),i):(wn(u),null);case 22:case 23:return bs(u),Tm(),_=u.memoizedState!==null,i!==null?i.memoizedState!==null!==_&&(u.flags|=8192):_&&(u.flags|=8192),_?(p&536870912)!==0&&(u.flags&128)===0&&(wn(u),u.subtreeFlags&6&&(u.flags|=8192)):wn(u),p=u.updateQueue,p!==null&&gh(u,p.retryQueue),p=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(p=i.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==p&&(u.flags|=2048),i!==null&&B(Xo),null;case 24:return p=null,i!==null&&(p=i.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),al(ea),wn(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function IA(i,u){switch(hm(u),u.tag){case 1:return i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 3:return al(ea),Ne(),i=u.flags,(i&65536)!==0&&(i&128)===0?(u.flags=i&-65537|128,u):null;case 26:case 27:case 5:return ye(u),null;case 31:if(u.memoizedState!==null){if(bs(u),u.alternate===null)throw Error(n(340));Vo()}return i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 13:if(bs(u),i=u.memoizedState,i!==null&&i.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Vo()}return i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 19:return B(Xn),null;case 4:return Ne(),null;case 10:return al(u.type),null;case 22:case 23:return bs(u),Tm(),i!==null&&B(Xo),i=u.flags,i&65536?(u.flags=i&-65537|128,u):null;case 24:return al(ea),null;case 25:return null;default:return null}}function by(i,u){switch(hm(u),u.tag){case 3:al(ea),Ne();break;case 26:case 27:case 5:ye(u);break;case 4:Ne();break;case 31:u.memoizedState!==null&&bs(u);break;case 13:bs(u);break;case 19:B(Xn);break;case 10:al(u.type);break;case 22:case 23:bs(u),Tm(),i!==null&&B(Xo);break;case 24:al(ea)}}function Fu(i,u){try{var p=u.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var C=_.next;p=C;do{if((p.tag&i)===i){_=void 0;var R=p.create,Y=p.inst;_=R(),Y.destroy=_}p=p.next}while(p!==C)}}catch(xe){tn(u,u.return,xe)}}function eo(i,u,p){try{var _=u.updateQueue,C=_!==null?_.lastEffect:null;if(C!==null){var R=C.next;_=R;do{if((_.tag&i)===i){var Y=_.inst,xe=Y.destroy;if(xe!==void 0){Y.destroy=void 0,C=u;var Te=p,Qe=xe;try{Qe()}catch(dt){tn(C,Te,dt)}}}_=_.next}while(_!==R)}}catch(dt){tn(u,u.return,dt)}}function vy(i){var u=i.updateQueue;if(u!==null){var p=i.stateNode;try{cv(u,p)}catch(_){tn(i,i.return,_)}}}function yy(i,u,p){p.props=Jo(i.type,i.memoizedProps),p.state=i.memoizedState;try{p.componentWillUnmount()}catch(_){tn(i,u,_)}}function Lu(i,u){try{var p=i.ref;if(p!==null){switch(i.tag){case 26:case 27:case 5:var _=i.stateNode;break;case 30:_=i.stateNode;break;default:_=i.stateNode}typeof p=="function"?i.refCleanup=p(_):p.current=_}}catch(C){tn(i,u,C)}}function Ri(i,u){var p=i.ref,_=i.refCleanup;if(p!==null)if(typeof _=="function")try{_()}catch(C){tn(i,u,C)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(C){tn(i,u,C)}else p.current=null}function wy(i){var u=i.type,p=i.memoizedProps,_=i.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&_.focus();break e;case"img":p.src?_.src=p.src:p.srcSet&&(_.srcset=p.srcSet)}}catch(C){tn(i,i.return,C)}}function ig(i,u,p){try{var _=i.stateNode;t6(_,i.type,p,u),_[we]=u}catch(C){tn(i,i.return,C)}}function _y(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&lo(i.type)||i.tag===4}function lg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||_y(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&lo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function og(i,u,p){var _=i.tag;if(_===5||_===6)i=i.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(i,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(i),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=Ja));else if(_!==4&&(_===27&&lo(i.type)&&(p=i.stateNode,u=null),i=i.child,i!==null))for(og(i,u,p),i=i.sibling;i!==null;)og(i,u,p),i=i.sibling}function ph(i,u,p){var _=i.tag;if(_===5||_===6)i=i.stateNode,u?p.insertBefore(i,u):p.appendChild(i);else if(_!==4&&(_===27&&lo(i.type)&&(p=i.stateNode),i=i.child,i!==null))for(ph(i,u,p),i=i.sibling;i!==null;)ph(i,u,p),i=i.sibling}function Ey(i){var u=i.stateNode,p=i.memoizedProps;try{for(var _=i.type,C=u.attributes;C.length;)u.removeAttributeNode(C[0]);Na(u,_,p),u[be]=i,u[we]=p}catch(R){tn(i,i.return,R)}}var cl=!1,na=!1,cg=!1,ky=typeof WeakSet=="function"?WeakSet:Set,ga=null;function DA(i,u){if(i=i.containerInfo,jg=Bh,i=ne(i),ce(i)){if("selectionStart"in i)var p={start:i.selectionStart,end:i.selectionEnd};else e:{p=(p=i.ownerDocument)&&p.defaultView||window;var _=p.getSelection&&p.getSelection();if(_&&_.rangeCount!==0){p=_.anchorNode;var C=_.anchorOffset,R=_.focusNode;_=_.focusOffset;try{p.nodeType,R.nodeType}catch{p=null;break e}var Y=0,xe=-1,Te=-1,Qe=0,dt=0,mt=i,tt=null;t:for(;;){for(var it;mt!==p||C!==0&&mt.nodeType!==3||(xe=Y+C),mt!==R||_!==0&&mt.nodeType!==3||(Te=Y+_),mt.nodeType===3&&(Y+=mt.nodeValue.length),(it=mt.firstChild)!==null;)tt=mt,mt=it;for(;;){if(mt===i)break t;if(tt===p&&++Qe===C&&(xe=Y),tt===R&&++dt===_&&(Te=Y),(it=mt.nextSibling)!==null)break;mt=tt,tt=mt.parentNode}mt=it}p=xe===-1||Te===-1?null:{start:xe,end:Te}}else p=null}p=p||{start:0,end:0}}else p=null;for(Og={focusedElem:i,selectionRange:p},Bh=!1,ga=u;ga!==null;)if(u=ga,i=u.child,(u.subtreeFlags&1028)!==0&&i!==null)i.return=u,ga=i;else for(;ga!==null;){switch(u=ga,R=u.alternate,i=u.flags,u.tag){case 0:if((i&4)!==0&&(i=u.updateQueue,i=i!==null?i.events:null,i!==null))for(p=0;p<i.length;p++)C=i[p],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&R!==null){i=void 0,p=u,C=R.memoizedProps,R=R.memoizedState,_=p.stateNode;try{var Ht=Jo(p.type,C);i=_.getSnapshotBeforeUpdate(Ht,R),_.__reactInternalSnapshotBeforeUpdate=i}catch(er){tn(p,p.return,er)}}break;case 3:if((i&1024)!==0){if(i=u.stateNode.containerInfo,p=i.nodeType,p===9)Dg(i);else if(p===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Dg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=u.sibling,i!==null){i.return=u.return,ga=i;break}ga=u.return}}function Sy(i,u,p){var _=p.flags;switch(p.tag){case 0:case 11:case 15:dl(i,p),_&4&&Fu(5,p);break;case 1:if(dl(i,p),_&4)if(i=p.stateNode,u===null)try{i.componentDidMount()}catch(Y){tn(p,p.return,Y)}else{var C=Jo(p.type,u.memoizedProps);u=u.memoizedState;try{i.componentDidUpdate(C,u,i.__reactInternalSnapshotBeforeUpdate)}catch(Y){tn(p,p.return,Y)}}_&64&&vy(p),_&512&&Lu(p,p.return);break;case 3:if(dl(i,p),_&64&&(i=p.updateQueue,i!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{cv(i,u)}catch(Y){tn(p,p.return,Y)}}break;case 27:u===null&&_&4&&Ey(p);case 26:case 5:dl(i,p),u===null&&_&4&&wy(p),_&512&&Lu(p,p.return);break;case 12:dl(i,p);break;case 31:dl(i,p),_&4&&Ty(i,p);break;case 13:dl(i,p),_&4&&Cy(i,p),_&64&&(i=p.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(p=GA.bind(null,p),c6(i,p))));break;case 22:if(_=p.memoizedState!==null||cl,!_){u=u!==null&&u.memoizedState!==null||na,C=cl;var R=na;cl=_,(na=u)&&!R?fl(i,p,(p.subtreeFlags&8772)!==0):dl(i,p),cl=C,na=R}break;case 30:break;default:dl(i,p)}}function Ny(i){var u=i.alternate;u!==null&&(i.alternate=null,Ny(u)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(u=i.stateNode,u!==null&&gt(u)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var jn=null,ts=!1;function ul(i,u,p){for(p=p.child;p!==null;)Ay(i,u,p),p=p.sibling}function Ay(i,u,p){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(jt,p)}catch{}switch(p.tag){case 26:na||Ri(p,u),ul(i,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:na||Ri(p,u);var _=jn,C=ts;lo(p.type)&&(jn=p.stateNode,ts=!1),ul(i,u,p),qu(p.stateNode),jn=_,ts=C;break;case 5:na||Ri(p,u);case 6:if(_=jn,C=ts,jn=null,ul(i,u,p),jn=_,ts=C,jn!==null)if(ts)try{(jn.nodeType===9?jn.body:jn.nodeName==="HTML"?jn.ownerDocument.body:jn).removeChild(p.stateNode)}catch(R){tn(p,u,R)}else try{jn.removeChild(p.stateNode)}catch(R){tn(p,u,R)}break;case 18:jn!==null&&(ts?(i=jn,vw(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,p.stateNode),b0(i)):vw(jn,p.stateNode));break;case 4:_=jn,C=ts,jn=p.stateNode.containerInfo,ts=!0,ul(i,u,p),jn=_,ts=C;break;case 0:case 11:case 14:case 15:eo(2,p,u),na||eo(4,p,u),ul(i,u,p);break;case 1:na||(Ri(p,u),_=p.stateNode,typeof _.componentWillUnmount=="function"&&yy(p,u,_)),ul(i,u,p);break;case 21:ul(i,u,p);break;case 22:na=(_=na)||p.memoizedState!==null,ul(i,u,p),na=_;break;default:ul(i,u,p)}}function Ty(i,u){if(u.memoizedState===null&&(i=u.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{b0(i)}catch(p){tn(u,u.return,p)}}}function Cy(i,u){if(u.memoizedState===null&&(i=u.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{b0(i)}catch(p){tn(u,u.return,p)}}function MA(i){switch(i.tag){case 31:case 13:case 19:var u=i.stateNode;return u===null&&(u=i.stateNode=new ky),u;case 22:return i=i.stateNode,u=i._retryCache,u===null&&(u=i._retryCache=new ky),u;default:throw Error(n(435,i.tag))}}function bh(i,u){var p=MA(i);u.forEach(function(_){if(!p.has(_)){p.add(_);var C=VA.bind(null,i,_);_.then(C,C)}})}function rs(i,u){var p=u.deletions;if(p!==null)for(var _=0;_<p.length;_++){var C=p[_],R=i,Y=u,xe=Y;e:for(;xe!==null;){switch(xe.tag){case 27:if(lo(xe.type)){jn=xe.stateNode,ts=!1;break e}break;case 5:jn=xe.stateNode,ts=!1;break e;case 3:case 4:jn=xe.stateNode.containerInfo,ts=!0;break e}xe=xe.return}if(jn===null)throw Error(n(160));Ay(R,Y,C),jn=null,ts=!1,R=C.alternate,R!==null&&(R.return=null),C.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)jy(u,i),u=u.sibling}var fi=null;function jy(i,u){var p=i.alternate,_=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:rs(u,i),ns(i),_&4&&(eo(3,i,i.return),Fu(3,i),eo(5,i,i.return));break;case 1:rs(u,i),ns(i),_&512&&(na||p===null||Ri(p,p.return)),_&64&&cl&&(i=i.updateQueue,i!==null&&(_=i.callbacks,_!==null&&(p=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=p===null?_:p.concat(_))));break;case 26:var C=fi;if(rs(u,i),ns(i),_&512&&(na||p===null||Ri(p,p.return)),_&4){var R=p!==null?p.memoizedState:null;if(_=i.memoizedState,p===null)if(_===null)if(i.stateNode===null){e:{_=i.type,p=i.memoizedProps,C=C.ownerDocument||C;t:switch(_){case"title":R=C.getElementsByTagName("title")[0],(!R||R[Je]||R[be]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=C.createElement(_),C.head.insertBefore(R,C.querySelector("head > title"))),Na(R,_,p),R[be]=i,Ut(R),_=R;break e;case"link":var Y=jw("link","href",C).get(_+(p.href||""));if(Y){for(var xe=0;xe<Y.length;xe++)if(R=Y[xe],R.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&R.getAttribute("rel")===(p.rel==null?null:p.rel)&&R.getAttribute("title")===(p.title==null?null:p.title)&&R.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){Y.splice(xe,1);break t}}R=C.createElement(_),Na(R,_,p),C.head.appendChild(R);break;case"meta":if(Y=jw("meta","content",C).get(_+(p.content||""))){for(xe=0;xe<Y.length;xe++)if(R=Y[xe],R.getAttribute("content")===(p.content==null?null:""+p.content)&&R.getAttribute("name")===(p.name==null?null:p.name)&&R.getAttribute("property")===(p.property==null?null:p.property)&&R.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&R.getAttribute("charset")===(p.charSet==null?null:p.charSet)){Y.splice(xe,1);break t}}R=C.createElement(_),Na(R,_,p),C.head.appendChild(R);break;default:throw Error(n(468,_))}R[be]=i,Ut(R),_=R}i.stateNode=_}else Ow(C,i.type,i.stateNode);else i.stateNode=Cw(C,_,i.memoizedProps);else R!==_?(R===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):R.count--,_===null?Ow(C,i.type,i.stateNode):Cw(C,_,i.memoizedProps)):_===null&&i.stateNode!==null&&ig(i,i.memoizedProps,p.memoizedProps)}break;case 27:rs(u,i),ns(i),_&512&&(na||p===null||Ri(p,p.return)),p!==null&&_&4&&ig(i,i.memoizedProps,p.memoizedProps);break;case 5:if(rs(u,i),ns(i),_&512&&(na||p===null||Ri(p,p.return)),i.flags&32){C=i.stateNode;try{Fl(C,"")}catch(Ht){tn(i,i.return,Ht)}}_&4&&i.stateNode!=null&&(C=i.memoizedProps,ig(i,C,p!==null?p.memoizedProps:C)),_&1024&&(cg=!0);break;case 6:if(rs(u,i),ns(i),_&4){if(i.stateNode===null)throw Error(n(162));_=i.memoizedProps,p=i.stateNode;try{p.nodeValue=_}catch(Ht){tn(i,i.return,Ht)}}break;case 3:if(Dh=null,C=fi,fi=Rh(u.containerInfo),rs(u,i),fi=C,ns(i),_&4&&p!==null&&p.memoizedState.isDehydrated)try{b0(u.containerInfo)}catch(Ht){tn(i,i.return,Ht)}cg&&(cg=!1,Oy(i));break;case 4:_=fi,fi=Rh(i.stateNode.containerInfo),rs(u,i),ns(i),fi=_;break;case 12:rs(u,i),ns(i);break;case 31:rs(u,i),ns(i),_&4&&(_=i.updateQueue,_!==null&&(i.updateQueue=null,bh(i,_)));break;case 13:rs(u,i),ns(i),i.child.flags&8192&&i.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(yh=We()),_&4&&(_=i.updateQueue,_!==null&&(i.updateQueue=null,bh(i,_)));break;case 22:C=i.memoizedState!==null;var Te=p!==null&&p.memoizedState!==null,Qe=cl,dt=na;if(cl=Qe||C,na=dt||Te,rs(u,i),na=dt,cl=Qe,ns(i),_&8192)e:for(u=i.stateNode,u._visibility=C?u._visibility&-2:u._visibility|1,C&&(p===null||Te||cl||na||Qo(i)),p=null,u=i;;){if(u.tag===5||u.tag===26){if(p===null){Te=p=u;try{if(R=Te.stateNode,C)Y=R.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{xe=Te.stateNode;var mt=Te.memoizedProps.style,tt=mt!=null&&mt.hasOwnProperty("display")?mt.display:null;xe.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(Ht){tn(Te,Te.return,Ht)}}}else if(u.tag===6){if(p===null){Te=u;try{Te.stateNode.nodeValue=C?"":Te.memoizedProps}catch(Ht){tn(Te,Te.return,Ht)}}}else if(u.tag===18){if(p===null){Te=u;try{var it=Te.stateNode;C?yw(it,!0):yw(Te.stateNode,!1)}catch(Ht){tn(Te,Te.return,Ht)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===i)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break e;for(;u.sibling===null;){if(u.return===null||u.return===i)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}_&4&&(_=i.updateQueue,_!==null&&(p=_.retryQueue,p!==null&&(_.retryQueue=null,bh(i,p))));break;case 19:rs(u,i),ns(i),_&4&&(_=i.updateQueue,_!==null&&(i.updateQueue=null,bh(i,_)));break;case 30:break;case 21:break;default:rs(u,i),ns(i)}}function ns(i){var u=i.flags;if(u&2){try{for(var p,_=i.return;_!==null;){if(_y(_)){p=_;break}_=_.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var C=p.stateNode,R=lg(i);ph(i,R,C);break;case 5:var Y=p.stateNode;p.flags&32&&(Fl(Y,""),p.flags&=-33);var xe=lg(i);ph(i,xe,Y);break;case 3:case 4:var Te=p.stateNode.containerInfo,Qe=lg(i);og(i,Qe,Te);break;default:throw Error(n(161))}}catch(dt){tn(i,i.return,dt)}i.flags&=-3}u&4096&&(i.flags&=-4097)}function Oy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var u=i;Oy(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),i=i.sibling}}function dl(i,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Sy(i,u.alternate,u),u=u.sibling}function Qo(i){for(i=i.child;i!==null;){var u=i;switch(u.tag){case 0:case 11:case 14:case 15:eo(4,u,u.return),Qo(u);break;case 1:Ri(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&yy(u,u.return,p),Qo(u);break;case 27:qu(u.stateNode);case 26:case 5:Ri(u,u.return),Qo(u);break;case 22:u.memoizedState===null&&Qo(u);break;case 30:Qo(u);break;default:Qo(u)}i=i.sibling}}function fl(i,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var _=u.alternate,C=i,R=u,Y=R.flags;switch(R.tag){case 0:case 11:case 15:fl(C,R,p),Fu(4,R);break;case 1:if(fl(C,R,p),_=R,C=_.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Qe){tn(_,_.return,Qe)}if(_=R,C=_.updateQueue,C!==null){var xe=_.stateNode;try{var Te=C.shared.hiddenCallbacks;if(Te!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Te.length;C++)ov(Te[C],xe)}catch(Qe){tn(_,_.return,Qe)}}p&&Y&64&&vy(R),Lu(R,R.return);break;case 27:Ey(R);case 26:case 5:fl(C,R,p),p&&_===null&&Y&4&&wy(R),Lu(R,R.return);break;case 12:fl(C,R,p);break;case 31:fl(C,R,p),p&&Y&4&&Ty(C,R);break;case 13:fl(C,R,p),p&&Y&4&&Cy(C,R);break;case 22:R.memoizedState===null&&fl(C,R,p),Lu(R,R.return);break;case 30:break;default:fl(C,R,p)}u=u.sibling}}function ug(i,u){var p=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(p=i.memoizedState.cachePool.pool),i=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(i=u.memoizedState.cachePool.pool),i!==p&&(i!=null&&i.refCount++,p!=null&&Eu(p))}function dg(i,u){i=null,u.alternate!==null&&(i=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==i&&(u.refCount++,i!=null&&Eu(i))}function hi(i,u,p,_){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Ry(i,u,p,_),u=u.sibling}function Ry(i,u,p,_){var C=u.flags;switch(u.tag){case 0:case 11:case 15:hi(i,u,p,_),C&2048&&Fu(9,u);break;case 1:hi(i,u,p,_);break;case 3:hi(i,u,p,_),C&2048&&(i=null,u.alternate!==null&&(i=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==i&&(u.refCount++,i!=null&&Eu(i)));break;case 12:if(C&2048){hi(i,u,p,_),i=u.stateNode;try{var R=u.memoizedProps,Y=R.id,xe=R.onPostCommit;typeof xe=="function"&&xe(Y,u.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Te){tn(u,u.return,Te)}}else hi(i,u,p,_);break;case 31:hi(i,u,p,_);break;case 13:hi(i,u,p,_);break;case 23:break;case 22:R=u.stateNode,Y=u.alternate,u.memoizedState!==null?R._visibility&2?hi(i,u,p,_):Bu(i,u):R._visibility&2?hi(i,u,p,_):(R._visibility|=2,l0(i,u,p,_,(u.subtreeFlags&10256)!==0||!1)),C&2048&&ug(Y,u);break;case 24:hi(i,u,p,_),C&2048&&dg(u.alternate,u);break;default:hi(i,u,p,_)}}function l0(i,u,p,_,C){for(C=C&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var R=i,Y=u,xe=p,Te=_,Qe=Y.flags;switch(Y.tag){case 0:case 11:case 15:l0(R,Y,xe,Te,C),Fu(8,Y);break;case 23:break;case 22:var dt=Y.stateNode;Y.memoizedState!==null?dt._visibility&2?l0(R,Y,xe,Te,C):Bu(R,Y):(dt._visibility|=2,l0(R,Y,xe,Te,C)),C&&Qe&2048&&ug(Y.alternate,Y);break;case 24:l0(R,Y,xe,Te,C),C&&Qe&2048&&dg(Y.alternate,Y);break;default:l0(R,Y,xe,Te,C)}u=u.sibling}}function Bu(i,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=i,_=u,C=_.flags;switch(_.tag){case 22:Bu(p,_),C&2048&&ug(_.alternate,_);break;case 24:Bu(p,_),C&2048&&dg(_.alternate,_);break;default:Bu(p,_)}u=u.sibling}}var Pu=8192;function o0(i,u,p){if(i.subtreeFlags&Pu)for(i=i.child;i!==null;)Iy(i,u,p),i=i.sibling}function Iy(i,u,p){switch(i.tag){case 26:o0(i,u,p),i.flags&Pu&&i.memoizedState!==null&&w6(p,fi,i.memoizedState,i.memoizedProps);break;case 5:o0(i,u,p);break;case 3:case 4:var _=fi;fi=Rh(i.stateNode.containerInfo),o0(i,u,p),fi=_;break;case 22:i.memoizedState===null&&(_=i.alternate,_!==null&&_.memoizedState!==null?(_=Pu,Pu=16777216,o0(i,u,p),Pu=_):o0(i,u,p));break;default:o0(i,u,p)}}function Dy(i){var u=i.alternate;if(u!==null&&(i=u.child,i!==null)){u.child=null;do u=i.sibling,i.sibling=null,i=u;while(i!==null)}}function Uu(i){var u=i.deletions;if((i.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var _=u[p];ga=_,Fy(_,i)}Dy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)My(i),i=i.sibling}function My(i){switch(i.tag){case 0:case 11:case 15:Uu(i),i.flags&2048&&eo(9,i,i.return);break;case 3:Uu(i);break;case 12:Uu(i);break;case 22:var u=i.stateNode;i.memoizedState!==null&&u._visibility&2&&(i.return===null||i.return.tag!==13)?(u._visibility&=-3,vh(i)):Uu(i);break;default:Uu(i)}}function vh(i){var u=i.deletions;if((i.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var _=u[p];ga=_,Fy(_,i)}Dy(i)}for(i=i.child;i!==null;){switch(u=i,u.tag){case 0:case 11:case 15:eo(8,u,u.return),vh(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,vh(u));break;default:vh(u)}i=i.sibling}}function Fy(i,u){for(;ga!==null;){var p=ga;switch(p.tag){case 0:case 11:case 15:eo(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var _=p.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:Eu(p.memoizedState.cache)}if(_=p.child,_!==null)_.return=p,ga=_;else e:for(p=i;ga!==null;){_=ga;var C=_.sibling,R=_.return;if(Ny(_),_===p){ga=null;break e}if(C!==null){C.return=R,ga=C;break e}ga=R}}}var FA={getCacheForType:function(i){var u=ka(ea),p=u.data.get(i);return p===void 0&&(p=i(),u.data.set(i,p)),p},cacheSignal:function(){return ka(ea).controller.signal}},LA=typeof WeakMap=="function"?WeakMap:Map,$r=0,hn=null,jr=null,Ir=0,en=0,vs=null,to=!1,c0=!1,fg=!1,hl=0,Bn=0,ro=0,ec=0,hg=0,ys=0,u0=0,zu=null,as=null,xg=!1,yh=0,Ly=0,wh=1/0,_h=null,no=null,da=0,ao=null,d0=null,xl=0,mg=0,gg=null,By=null,Hu=0,pg=null;function ws(){return($r&2)!==0&&Ir!==0?Ir&-Ir:ve.T!==null?Eg():ee()}function Py(){if(ys===0)if((Ir&536870912)===0||Lr){var i=$t;$t<<=1,($t&3932160)===0&&($t=262144),ys=i}else ys=536870912;return i=ps.current,i!==null&&(i.flags|=32),ys}function ss(i,u,p){(i===hn&&(en===2||en===9)||i.cancelPendingCommit!==null)&&(f0(i,0),so(i,Ir,ys,!1)),Dt(i,p),(($r&2)===0||i!==hn)&&(i===hn&&(($r&2)===0&&(ec|=p),Bn===4&&so(i,Ir,ys,!1)),Ii(i))}function Uy(i,u,p){if(($r&6)!==0)throw Error(n(327));var _=!p&&(u&127)===0&&(u&i.expiredLanes)===0||Mr(i,u),C=_?UA(i,u):vg(i,u,!0),R=_;do{if(C===0){c0&&!_&&so(i,u,0,!1);break}else{if(p=i.current.alternate,R&&!BA(p)){C=vg(i,u,!1),R=!1;continue}if(C===2){if(R=u,i.errorRecoveryDisabledLanes&R)var Y=0;else Y=i.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){u=Y;e:{var xe=i;C=zu;var Te=xe.current.memoizedState.isDehydrated;if(Te&&(f0(xe,Y).flags|=256),Y=vg(xe,Y,!1),Y!==2){if(fg&&!Te){xe.errorRecoveryDisabledLanes|=R,ec|=R,C=4;break e}R=as,as=C,R!==null&&(as===null?as=R:as.push.apply(as,R))}C=Y}if(R=!1,C!==2)continue}}if(C===1){f0(i,0),so(i,u,0,!0);break}e:{switch(_=i,R=C,R){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:so(_,u,ys,!to);break e;case 2:as=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(C=yh+300-We(),10<C)){if(so(_,u,ys,!to),Tn(_,0,!0)!==0)break e;xl=u,_.timeoutHandle=pw(zy.bind(null,_,p,as,_h,xg,u,ys,ec,u0,to,R,"Throttled",-0,0),C);break e}zy(_,p,as,_h,xg,u,ys,ec,u0,to,R,null,-0,0)}}break}while(!0);Ii(i)}function zy(i,u,p,_,C,R,Y,xe,Te,Qe,dt,mt,tt,it){if(i.timeoutHandle=-1,mt=u.subtreeFlags,mt&8192||(mt&16785408)===16785408){mt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ja},Iy(u,R,mt);var Ht=(R&62914560)===R?yh-We():(R&4194048)===R?Ly-We():0;if(Ht=_6(mt,Ht),Ht!==null){xl=R,i.cancelPendingCommit=Ht(Yy.bind(null,i,u,R,p,_,C,Y,xe,Te,dt,mt,null,tt,it)),so(i,R,Y,!Qe);return}}Yy(i,u,R,p,_,C,Y,xe,Te)}function BA(i){for(var u=i;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var _=0;_<p.length;_++){var C=p[_],R=C.getSnapshot;C=C.value;try{if(!k(R(),C))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function so(i,u,p,_){u&=~hg,u&=~ec,i.suspendedLanes|=u,i.pingedLanes&=~u,_&&(i.warmLanes|=u),_=i.expirationTimes;for(var C=u;0<C;){var R=31-Bt(C),Y=1<<R;_[R]=-1,C&=~Y}p!==0&&_r(i,p,u)}function Eh(){return($r&6)===0?(Gu(0),!1):!0}function bg(){if(jr!==null){if(en===0)var i=jr.return;else i=jr,nl=Wo=null,Dm(i),r0=null,Su=0,i=jr;for(;i!==null;)by(i.alternate,i),i=i.return;jr=null}}function f0(i,u){var p=i.timeoutHandle;p!==-1&&(i.timeoutHandle=-1,a6(p)),p=i.cancelPendingCommit,p!==null&&(i.cancelPendingCommit=null,p()),xl=0,bg(),hn=i,jr=p=tl(i.current,null),Ir=u,en=0,vs=null,to=!1,c0=Mr(i,u),fg=!1,u0=ys=hg=ec=ro=Bn=0,as=zu=null,xg=!1,(u&8)!==0&&(u|=u&32);var _=i.entangledLanes;if(_!==0)for(i=i.entanglements,_&=u;0<_;){var C=31-Bt(_),R=1<<C;u|=i[C],_&=~R}return hl=u,Vf(),p}function Hy(i,u){gr=null,ve.H=Iu,u===t0||u===Jf?(u=av(),en=3):u===_m?(u=av(),en=4):en=u===$m?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,vs=u,jr===null&&(Bn=1,fh(i,zs(u,i.current)))}function Gy(){var i=ps.current;return i===null?!0:(Ir&4194048)===Ir?Ws===null:(Ir&62914560)===Ir||(Ir&536870912)!==0?i===Ws:!1}function Vy(){var i=ve.H;return ve.H=Iu,i===null?Iu:i}function Wy(){var i=ve.A;return ve.A=FA,i}function kh(){Bn=4,to||(Ir&4194048)!==Ir&&ps.current!==null||(c0=!0),(ro&134217727)===0&&(ec&134217727)===0||hn===null||so(hn,Ir,ys,!1)}function vg(i,u,p){var _=$r;$r|=2;var C=Vy(),R=Wy();(hn!==i||Ir!==u)&&(_h=null,f0(i,u)),u=!1;var Y=Bn;e:do try{if(en!==0&&jr!==null){var xe=jr,Te=vs;switch(en){case 8:bg(),Y=6;break e;case 3:case 2:case 9:case 6:ps.current===null&&(u=!0);var Qe=en;if(en=0,vs=null,h0(i,xe,Te,Qe),p&&c0){Y=0;break e}break;default:Qe=en,en=0,vs=null,h0(i,xe,Te,Qe)}}PA(),Y=Bn;break}catch(dt){Hy(i,dt)}while(!0);return u&&i.shellSuspendCounter++,nl=Wo=null,$r=_,ve.H=C,ve.A=R,jr===null&&(hn=null,Ir=0,Vf()),Y}function PA(){for(;jr!==null;)qy(jr)}function UA(i,u){var p=$r;$r|=2;var _=Vy(),C=Wy();hn!==i||Ir!==u?(_h=null,wh=We()+500,f0(i,u)):c0=Mr(i,u);e:do try{if(en!==0&&jr!==null){u=jr;var R=vs;t:switch(en){case 1:en=0,vs=null,h0(i,u,R,1);break;case 2:case 9:if(rv(R)){en=0,vs=null,Xy(u);break}u=function(){en!==2&&en!==9||hn!==i||(en=7),Ii(i)},R.then(u,u);break e;case 3:en=7;break e;case 4:en=5;break e;case 7:rv(R)?(en=0,vs=null,Xy(u)):(en=0,vs=null,h0(i,u,R,7));break;case 5:var Y=null;switch(jr.tag){case 26:Y=jr.memoizedState;case 5:case 27:var xe=jr;if(Y?Rw(Y):xe.stateNode.complete){en=0,vs=null;var Te=xe.sibling;if(Te!==null)jr=Te;else{var Qe=xe.return;Qe!==null?(jr=Qe,Sh(Qe)):jr=null}break t}}en=0,vs=null,h0(i,u,R,5);break;case 6:en=0,vs=null,h0(i,u,R,6);break;case 8:bg(),Bn=6;break e;default:throw Error(n(462))}}zA();break}catch(dt){Hy(i,dt)}while(!0);return nl=Wo=null,ve.H=_,ve.A=C,$r=p,jr!==null?0:(hn=null,Ir=0,Vf(),Bn)}function zA(){for(;jr!==null&&!He();)qy(jr)}function qy(i){var u=gy(i.alternate,i,hl);i.memoizedProps=i.pendingProps,u===null?Sh(i):jr=u}function Xy(i){var u=i,p=u.alternate;switch(u.tag){case 15:case 0:u=uy(p,u,u.pendingProps,u.type,void 0,Ir);break;case 11:u=uy(p,u,u.pendingProps,u.type.render,u.ref,Ir);break;case 5:Dm(u);default:by(p,u),u=jr=Wb(u,hl),u=gy(p,u,hl)}i.memoizedProps=i.pendingProps,u===null?Sh(i):jr=u}function h0(i,u,p,_){nl=Wo=null,Dm(u),r0=null,Su=0;var C=u.return;try{if(CA(i,C,u,p,Ir)){Bn=1,fh(i,zs(p,i.current)),jr=null;return}}catch(R){if(C!==null)throw jr=C,R;Bn=1,fh(i,zs(p,i.current)),jr=null;return}u.flags&32768?(Lr||_===1?i=!0:c0||(Ir&536870912)!==0?i=!1:(to=i=!0,(_===2||_===9||_===3||_===6)&&(_=ps.current,_!==null&&_.tag===13&&(_.flags|=16384))),Ky(u,i)):Sh(u)}function Sh(i){var u=i;do{if((u.flags&32768)!==0){Ky(u,to);return}i=u.return;var p=RA(u.alternate,u,hl);if(p!==null){jr=p;return}if(u=u.sibling,u!==null){jr=u;return}jr=u=i}while(u!==null);Bn===0&&(Bn=5)}function Ky(i,u){do{var p=IA(i.alternate,i);if(p!==null){p.flags&=32767,jr=p;return}if(p=i.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(i=i.sibling,i!==null)){jr=i;return}jr=i=p}while(i!==null);Bn=6,jr=null}function Yy(i,u,p,_,C,R,Y,xe,Te){i.cancelPendingCommit=null;do Nh();while(da!==0);if(($r&6)!==0)throw Error(n(327));if(u!==null){if(u===i.current)throw Error(n(177));if(R=u.lanes|u.childLanes,R|=lm,Pt(i,p,R,Y,xe,Te),i===hn&&(jr=hn=null,Ir=0),d0=u,ao=i,xl=p,mg=R,gg=C,By=_,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,WA(Ye,function(){return ew(),null})):(i.callbackNode=null,i.callbackPriority=0),_=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||_){_=ve.T,ve.T=null,C=le.p,le.p=2,Y=$r,$r|=4;try{DA(i,u,p)}finally{$r=Y,le.p=C,ve.T=_}}da=1,$y(),Zy(),Jy()}}function $y(){if(da===1){da=0;var i=ao,u=d0,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=ve.T,ve.T=null;var _=le.p;le.p=2;var C=$r;$r|=4;try{jy(u,i);var R=Og,Y=ne(i.containerInfo),xe=R.focusedElem,Te=R.selectionRange;if(Y!==xe&&xe&&xe.ownerDocument&&K(xe.ownerDocument.documentElement,xe)){if(Te!==null&&ce(xe)){var Qe=Te.start,dt=Te.end;if(dt===void 0&&(dt=Qe),"selectionStart"in xe)xe.selectionStart=Qe,xe.selectionEnd=Math.min(dt,xe.value.length);else{var mt=xe.ownerDocument||document,tt=mt&&mt.defaultView||window;if(tt.getSelection){var it=tt.getSelection(),Ht=xe.textContent.length,er=Math.min(Te.start,Ht),on=Te.end===void 0?er:Math.min(Te.end,Ht);!it.extend&&er>on&&(Y=on,on=er,er=Y);var ze=F(xe,er),Be=F(xe,on);if(ze&&Be&&(it.rangeCount!==1||it.anchorNode!==ze.node||it.anchorOffset!==ze.offset||it.focusNode!==Be.node||it.focusOffset!==Be.offset)){var Ze=mt.createRange();Ze.setStart(ze.node,ze.offset),it.removeAllRanges(),er>on?(it.addRange(Ze),it.extend(Be.node,Be.offset)):(Ze.setEnd(Be.node,Be.offset),it.addRange(Ze))}}}}for(mt=[],it=xe;it=it.parentNode;)it.nodeType===1&&mt.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<mt.length;xe++){var xt=mt[xe];xt.element.scrollLeft=xt.left,xt.element.scrollTop=xt.top}}Bh=!!jg,Og=jg=null}finally{$r=C,le.p=_,ve.T=p}}i.current=u,da=2}}function Zy(){if(da===2){da=0;var i=ao,u=d0,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=ve.T,ve.T=null;var _=le.p;le.p=2;var C=$r;$r|=4;try{Sy(i,u.alternate,u)}finally{$r=C,le.p=_,ve.T=p}}da=3}}function Jy(){if(da===4||da===3){da=0,Oe();var i=ao,u=d0,p=xl,_=By;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?da=5:(da=0,d0=ao=null,Qy(i,i.pendingLanes));var C=i.pendingLanes;if(C===0&&(no=null),Ft(p),u=u.stateNode,ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(jt,u,void 0,(u.current.flags&128)===128)}catch{}if(_!==null){u=ve.T,C=le.p,le.p=2,ve.T=null;try{for(var R=i.onRecoverableError,Y=0;Y<_.length;Y++){var xe=_[Y];R(xe.value,{componentStack:xe.stack})}}finally{ve.T=u,le.p=C}}(xl&3)!==0&&Nh(),Ii(i),C=i.pendingLanes,(p&261930)!==0&&(C&42)!==0?i===pg?Hu++:(Hu=0,pg=i):Hu=0,Gu(0)}}function Qy(i,u){(i.pooledCacheLanes&=u)===0&&(u=i.pooledCache,u!=null&&(i.pooledCache=null,Eu(u)))}function Nh(){return $y(),Zy(),Jy(),ew()}function ew(){if(da!==5)return!1;var i=ao,u=mg;mg=0;var p=Ft(xl),_=ve.T,C=le.p;try{le.p=32>p?32:p,ve.T=null,p=gg,gg=null;var R=ao,Y=xl;if(da=0,d0=ao=null,xl=0,($r&6)!==0)throw Error(n(331));var xe=$r;if($r|=4,My(R.current),Ry(R,R.current,Y,p),$r=xe,Gu(0,!1),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(jt,R)}catch{}return!0}finally{le.p=C,ve.T=_,Qy(i,u)}}function tw(i,u,p){u=zs(p,u),u=Ym(i.stateNode,u,2),i=Zl(i,u,2),i!==null&&(Dt(i,2),Ii(i))}function tn(i,u,p){if(i.tag===3)tw(i,i,p);else for(;u!==null;){if(u.tag===3){tw(u,i,p);break}else if(u.tag===1){var _=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(no===null||!no.has(_))){i=zs(p,i),p=ry(2),_=Zl(u,p,2),_!==null&&(ny(p,_,u,i),Dt(_,2),Ii(_));break}}u=u.return}}function yg(i,u,p){var _=i.pingCache;if(_===null){_=i.pingCache=new LA;var C=new Set;_.set(u,C)}else C=_.get(u),C===void 0&&(C=new Set,_.set(u,C));C.has(p)||(fg=!0,C.add(p),i=HA.bind(null,i,u,p),u.then(i,i))}function HA(i,u,p){var _=i.pingCache;_!==null&&_.delete(u),i.pingedLanes|=i.suspendedLanes&p,i.warmLanes&=~p,hn===i&&(Ir&p)===p&&(Bn===4||Bn===3&&(Ir&62914560)===Ir&&300>We()-yh?($r&2)===0&&f0(i,0):hg|=p,u0===Ir&&(u0=0)),Ii(i)}function rw(i,u){u===0&&(u=Ge()),i=Ho(i,u),i!==null&&(Dt(i,u),Ii(i))}function GA(i){var u=i.memoizedState,p=0;u!==null&&(p=u.retryLane),rw(i,p)}function VA(i,u){var p=0;switch(i.tag){case 31:case 13:var _=i.stateNode,C=i.memoizedState;C!==null&&(p=C.retryLane);break;case 19:_=i.stateNode;break;case 22:_=i.stateNode._retryCache;break;default:throw Error(n(314))}_!==null&&_.delete(u),rw(i,p)}function WA(i,u){return lt(i,u)}var Ah=null,x0=null,wg=!1,Th=!1,_g=!1,io=0;function Ii(i){i!==x0&&i.next===null&&(x0===null?Ah=x0=i:x0=x0.next=i),Th=!0,wg||(wg=!0,XA())}function Gu(i,u){if(!_g&&Th){_g=!0;do for(var p=!1,_=Ah;_!==null;){if(i!==0){var C=_.pendingLanes;if(C===0)var R=0;else{var Y=_.suspendedLanes,xe=_.pingedLanes;R=(1<<31-Bt(42|i)+1)-1,R&=C&~(Y&~xe),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(p=!0,iw(_,R))}else R=Ir,R=Tn(_,_===hn?R:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(R&3)===0||Mr(_,R)||(p=!0,iw(_,R));_=_.next}while(p);_g=!1}}function qA(){nw()}function nw(){Th=wg=!1;var i=0;io!==0&&n6()&&(i=io);for(var u=We(),p=null,_=Ah;_!==null;){var C=_.next,R=aw(_,u);R===0?(_.next=null,p===null?Ah=C:p.next=C,C===null&&(x0=p)):(p=_,(i!==0||(R&3)!==0)&&(Th=!0)),_=C}da!==0&&da!==5||Gu(i),io!==0&&(io=0)}function aw(i,u){for(var p=i.suspendedLanes,_=i.pingedLanes,C=i.expirationTimes,R=i.pendingLanes&-62914561;0<R;){var Y=31-Bt(R),xe=1<<Y,Te=C[Y];Te===-1?((xe&p)===0||(xe&_)!==0)&&(C[Y]=Hr(xe,u)):Te<=u&&(i.expiredLanes|=xe),R&=~xe}if(u=hn,p=Ir,p=Tn(i,i===u?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),_=i.callbackNode,p===0||i===u&&(en===2||en===9)||i.cancelPendingCommit!==null)return _!==null&&_!==null&&Ue(_),i.callbackNode=null,i.callbackPriority=0;if((p&3)===0||Mr(i,p)){if(u=p&-p,u===i.callbackPriority)return u;switch(_!==null&&Ue(_),Ft(p)){case 2:case 8:p=Pe;break;case 32:p=Ye;break;case 268435456:p=Ct;break;default:p=Ye}return _=sw.bind(null,i),p=lt(p,_),i.callbackPriority=u,i.callbackNode=p,u}return _!==null&&_!==null&&Ue(_),i.callbackPriority=2,i.callbackNode=null,2}function sw(i,u){if(da!==0&&da!==5)return i.callbackNode=null,i.callbackPriority=0,null;var p=i.callbackNode;if(Nh()&&i.callbackNode!==p)return null;var _=Ir;return _=Tn(i,i===hn?_:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),_===0?null:(Uy(i,_,u),aw(i,We()),i.callbackNode!=null&&i.callbackNode===p?sw.bind(null,i):null)}function iw(i,u){if(Nh())return null;Uy(i,u,!0)}function XA(){s6(function(){($r&6)!==0?lt(ht,qA):nw()})}function Eg(){if(io===0){var i=Qc;i===0&&(i=Xr,Xr<<=1,(Xr&261888)===0&&(Xr=256)),io=i}return io}function lw(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ll(""+i)}function ow(i,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,i.id&&p.setAttribute("form",i.id),u.parentNode.insertBefore(p,u),i=new FormData(i),p.parentNode.removeChild(p),i}function KA(i,u,p,_,C){if(u==="submit"&&p&&p.stateNode===C){var R=lw((C[we]||null).action),Y=_.submitter;Y&&(u=(u=Y[we]||null)?lw(u.formAction):Y.getAttribute("formAction"),u!==null&&(R=u,Y=null));var xe=new oa("action","action",null,_,C);i.push({event:xe,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(io!==0){var Te=Y?ow(C,Y):new FormData(C);Gm(p,{pending:!0,data:Te,method:C.method,action:R},null,Te)}}else typeof R=="function"&&(xe.preventDefault(),Te=Y?ow(C,Y):new FormData(C),Gm(p,{pending:!0,data:Te,method:C.method,action:R},R,Te))},currentTarget:C}]})}}for(var kg=0;kg<yu.length;kg++){var Sg=yu[kg],YA=Sg.toLowerCase(),$A=Sg[0].toUpperCase()+Sg.slice(1);di(YA,"on"+$A)}di(es,"onAnimationEnd"),di(_a,"onAnimationIteration"),di(Qr,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(ua,"onTransitionRun"),di(Wa,"onTransitionStart"),di(Vl,"onTransitionCancel"),di(el,"onTransitionEnd"),Sr("onMouseEnter",["mouseout","mouseover"]),Sr("onMouseLeave",["mouseout","mouseover"]),Sr("onPointerEnter",["pointerout","pointerover"]),Sr("onPointerLeave",["pointerout","pointerover"]),pt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pt("onBeforeInput",["compositionend","keypress","textInput","paste"]),pt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vu));function cw(i,u){u=(u&4)!==0;for(var p=0;p<i.length;p++){var _=i[p],C=_.event;_=_.listeners;e:{var R=void 0;if(u)for(var Y=_.length-1;0<=Y;Y--){var xe=_[Y],Te=xe.instance,Qe=xe.currentTarget;if(xe=xe.listener,Te!==R&&C.isPropagationStopped())break e;R=xe,C.currentTarget=Qe;try{R(C)}catch(dt){Gf(dt)}C.currentTarget=null,R=Te}else for(Y=0;Y<_.length;Y++){if(xe=_[Y],Te=xe.instance,Qe=xe.currentTarget,xe=xe.listener,Te!==R&&C.isPropagationStopped())break e;R=xe,C.currentTarget=Qe;try{R(C)}catch(dt){Gf(dt)}C.currentTarget=null,R=Te}}}}function Or(i,u){var p=u[Xe];p===void 0&&(p=u[Xe]=new Set);var _=i+"__bubble";p.has(_)||(uw(u,i,2,!1),p.add(_))}function Ng(i,u,p){var _=0;u&&(_|=4),uw(p,i,_,u)}var Ch="_reactListening"+Math.random().toString(36).slice(2);function Ag(i){if(!i[Ch]){i[Ch]=!0,ct.forEach(function(p){p!=="selectionchange"&&(ZA.has(p)||Ng(p,!1,i),Ng(p,!0,i))});var u=i.nodeType===9?i:i.ownerDocument;u===null||u[Ch]||(u[Ch]=!0,Ng("selectionchange",!1,u))}}function uw(i,u,p,_){switch(Pw(u)){case 2:var C=S6;break;case 8:C=N6;break;default:C=Hg}p=C.bind(null,u,p,i),C=void 0,!hu||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),_?C!==void 0?i.addEventListener(u,p,{capture:!0,passive:C}):i.addEventListener(u,p,!0):C!==void 0?i.addEventListener(u,p,{passive:C}):i.addEventListener(u,p,!1)}function Tg(i,u,p,_,C){var R=_;if((u&1)===0&&(u&2)===0&&_!==null)e:for(;;){if(_===null)return;var Y=_.tag;if(Y===3||Y===4){var xe=_.stateNode.containerInfo;if(xe===C)break;if(Y===4)for(Y=_.return;Y!==null;){var Te=Y.tag;if((Te===3||Te===4)&&Y.stateNode.containerInfo===C)return;Y=Y.return}for(;xe!==null;){if(Y=yt(xe),Y===null)return;if(Te=Y.tag,Te===5||Te===6||Te===26||Te===27){_=R=Y;continue e}xe=xe.parentNode}}_=_.return}Rf(function(){var Qe=R,dt=fu(p),mt=[];e:{var tt=Hf.get(i);if(tt!==void 0){var it=oa,Ht=i;switch(i){case"keypress":if(Ni(p)===0)break e;case"keydown":case"keyup":it=Vc;break;case"focusin":Ht="focus",it=gu;break;case"focusout":Ht="blur",it=gu;break;case"beforeblur":case"afterblur":it=gu;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=Yr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=am;break;case es:case _a:case Qr:it=vr;break;case el:it=$i;break;case"scroll":case"scrollend":it=If;break;case"wheel":it=sm;break;case"copy":case"cut":case"paste":it=Gc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Jr;break;case"toggle":case"beforetoggle":it=bu}var er=(u&4)!==0,on=!er&&(i==="scroll"||i==="scrollend"),ze=er?tt!==null?tt+"Capture":null:tt;er=[];for(var Be=Qe,Ze;Be!==null;){var xt=Be;if(Ze=xt.stateNode,xt=xt.tag,xt!==5&&xt!==26&&xt!==27||Ze===null||ze===null||(xt=cr(Be,ze),xt!=null&&er.push(Wu(Be,xt,Ze))),on)break;Be=Be.return}0<er.length&&(tt=new it(tt,Ht,null,p,dt),mt.push({event:tt,listeners:er}))}}if((u&7)===0){e:{if(tt=i==="mouseover"||i==="pointerover",it=i==="mouseout"||i==="pointerout",tt&&p!==Do&&(Ht=p.relatedTarget||p.fromElement)&&(yt(Ht)||Ht[Ee]))break e;if((it||tt)&&(tt=dt.window===dt?dt:(tt=dt.ownerDocument)?tt.defaultView||tt.parentWindow:window,it?(Ht=p.relatedTarget||p.toElement,it=Qe,Ht=Ht?yt(Ht):null,Ht!==null&&(on=s(Ht),er=Ht.tag,Ht!==on||er!==5&&er!==27&&er!==6)&&(Ht=null)):(it=null,Ht=Qe),it!==Ht)){if(er=Yr,xt="onMouseLeave",ze="onMouseEnter",Be="mouse",(i==="pointerout"||i==="pointerover")&&(er=Jr,xt="onPointerLeave",ze="onPointerEnter",Be="pointer"),on=it==null?tt:kt(it),Ze=Ht==null?tt:kt(Ht),tt=new er(xt,Be+"leave",it,p,dt),tt.target=on,tt.relatedTarget=Ze,xt=null,yt(dt)===Qe&&(er=new er(ze,Be+"enter",Ht,p,dt),er.target=Ze,er.relatedTarget=on,xt=er),on=xt,it&&Ht)t:{for(er=JA,ze=it,Be=Ht,Ze=0,xt=ze;xt;xt=er(xt))Ze++;xt=0;for(var Kt=Be;Kt;Kt=er(Kt))xt++;for(;0<Ze-xt;)ze=er(ze),Ze--;for(;0<xt-Ze;)Be=er(Be),xt--;for(;Ze--;){if(ze===Be||Be!==null&&ze===Be.alternate){er=ze;break t}ze=er(ze),Be=er(Be)}er=null}else er=null;it!==null&&dw(mt,tt,it,er,!1),Ht!==null&&on!==null&&dw(mt,on,Ht,er,!0)}}e:{if(tt=Qe?kt(Qe):window,it=tt.nodeName&&tt.nodeName.toLowerCase(),it==="select"||it==="input"&&tt.type==="file")var Vr=ms;else if(vu(tt))if(zf)Vr=b;else{Vr=h;var Vt=o}else it=tt.nodeName,!it||it.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Qe&&un(Qe.elementType)&&(Vr=ms):Vr=m;if(Vr&&(Vr=Vr(i,Qe))){xs(mt,Vr,p,dt);break e}Vt&&Vt(i,tt,Qe),i==="focusout"&&Qe&&tt.type==="number"&&Qe.memoizedProps.value!=null&&_e(tt,"number",tt.value)}switch(Vt=Qe?kt(Qe):window,i){case"focusin":(vu(Vt)||Vt.contentEditable==="true")&&(je=Vt,Fe=Qe,qe=null);break;case"focusout":qe=Fe=je=null;break;case"mousedown":nt=!0;break;case"contextmenu":case"mouseup":case"dragend":nt=!1,At(mt,p,dt);break;case"selectionchange":if(ke)break;case"keydown":case"keyup":At(mt,p,dt)}var yr;if(Lo)e:{switch(i){case"compositionstart":var Dr="onCompositionStart";break e;case"compositionend":Dr="onCompositionEnd";break e;case"compositionupdate":Dr="onCompositionUpdate";break e}Dr=void 0}else Gl?Uf(i,p)&&(Dr="onCompositionEnd"):i==="keydown"&&p.keyCode===229&&(Dr="onCompositionStart");Dr&&(Pf&&p.locale!=="ko"&&(Gl||Dr!=="onCompositionStart"?Dr==="onCompositionEnd"&&Gl&&(yr=Bl()):(ci=dt,ui="value"in ci?ci.value:ci.textContent,Gl=!0)),Vt=jh(Qe,Dr),0<Vt.length&&(Dr=new Ff(Dr,i,null,p,dt),mt.push({event:Dr,listeners:Vt}),yr?Dr.data=yr:(yr=Hl(p),yr!==null&&(Dr.data=yr)))),(yr=Bf?Ci(i,p):qc(i,p))&&(Dr=jh(Qe,"onBeforeInput"),0<Dr.length&&(Vt=new Ff("onBeforeInput","beforeinput",null,p,dt),mt.push({event:Vt,listeners:Dr}),Vt.data=yr)),KA(mt,i,Qe,p,dt)}cw(mt,u)})}function Wu(i,u,p){return{instance:i,listener:u,currentTarget:p}}function jh(i,u){for(var p=u+"Capture",_=[];i!==null;){var C=i,R=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||R===null||(C=cr(i,p),C!=null&&_.unshift(Wu(i,C,R)),C=cr(i,u),C!=null&&_.push(Wu(i,C,R))),i.tag===3)return _;i=i.return}return[]}function JA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function dw(i,u,p,_,C){for(var R=u._reactName,Y=[];p!==null&&p!==_;){var xe=p,Te=xe.alternate,Qe=xe.stateNode;if(xe=xe.tag,Te!==null&&Te===_)break;xe!==5&&xe!==26&&xe!==27||Qe===null||(Te=Qe,C?(Qe=cr(p,R),Qe!=null&&Y.unshift(Wu(p,Qe,Te))):C||(Qe=cr(p,R),Qe!=null&&Y.push(Wu(p,Qe,Te)))),p=p.return}Y.length!==0&&i.push({event:u,listeners:Y})}var QA=/\r\n?/g,e6=/\u0000|\uFFFD/g;function fw(i){return(typeof i=="string"?i:""+i).replace(QA,`
`).replace(e6,"")}function hw(i,u){return u=fw(u),fw(i)===u}function ln(i,u,p,_,C,R){switch(p){case"children":typeof _=="string"?u==="body"||u==="textarea"&&_===""||Fl(i,_):(typeof _=="number"||typeof _=="bigint")&&u!=="body"&&Fl(i,""+_);break;case"className":Dl(i,"class",_);break;case"tabIndex":Dl(i,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":Dl(i,p,_);break;case"style":Xt(i,_,R);break;case"data":if(u!=="object"){Dl(i,"data",_);break}case"src":case"href":if(_===""&&(u!=="a"||p!=="href")){i.removeAttribute(p);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){i.removeAttribute(p);break}_=Ll(""+_),i.setAttribute(p,_);break;case"action":case"formAction":if(typeof _=="function"){i.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(p==="formAction"?(u!=="input"&&ln(i,u,"name",C.name,C,null),ln(i,u,"formEncType",C.formEncType,C,null),ln(i,u,"formMethod",C.formMethod,C,null),ln(i,u,"formTarget",C.formTarget,C,null)):(ln(i,u,"encType",C.encType,C,null),ln(i,u,"method",C.method,C,null),ln(i,u,"target",C.target,C,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){i.removeAttribute(p);break}_=Ll(""+_),i.setAttribute(p,_);break;case"onClick":_!=null&&(i.onclick=Ja);break;case"onScroll":_!=null&&Or("scroll",i);break;case"onScrollEnd":_!=null&&Or("scrollend",i);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(p=_.__html,p!=null){if(C.children!=null)throw Error(n(60));i.innerHTML=p}}break;case"multiple":i.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":i.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){i.removeAttribute("xlink:href");break}p=Ll(""+_),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?i.setAttribute(p,""+_):i.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?i.setAttribute(p,""):i.removeAttribute(p);break;case"capture":case"download":_===!0?i.setAttribute(p,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?i.setAttribute(p,_):i.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?i.setAttribute(p,_):i.removeAttribute(p);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?i.removeAttribute(p):i.setAttribute(p,_);break;case"popover":Or("beforetoggle",i),Or("toggle",i),ma(i,"popover",_);break;case"xlinkActuate":fs(i,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":fs(i,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":fs(i,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":fs(i,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":fs(i,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":fs(i,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":fs(i,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":fs(i,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":fs(i,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":ma(i,"is",_);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Of.get(p)||p,ma(i,p,_))}}function Cg(i,u,p,_,C,R){switch(p){case"style":Xt(i,_,R);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(p=_.__html,p!=null){if(C.children!=null)throw Error(n(60));i.innerHTML=p}}break;case"children":typeof _=="string"?Fl(i,_):(typeof _=="number"||typeof _=="bigint")&&Fl(i,""+_);break;case"onScroll":_!=null&&Or("scroll",i);break;case"onScrollEnd":_!=null&&Or("scrollend",i);break;case"onClick":_!=null&&(i.onclick=Ja);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fr.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(C=p.endsWith("Capture"),u=p.slice(2,C?p.length-7:void 0),R=i[we]||null,R=R!=null?R[p]:null,typeof R=="function"&&i.removeEventListener(u,R,C),typeof _=="function")){typeof R!="function"&&R!==null&&(p in i?i[p]=null:i.hasAttribute(p)&&i.removeAttribute(p)),i.addEventListener(u,_,C);break e}p in i?i[p]=_:_===!0?i.setAttribute(p,""):ma(i,p,_)}}}function Na(i,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Or("error",i),Or("load",i);var _=!1,C=!1,R;for(R in p)if(p.hasOwnProperty(R)){var Y=p[R];if(Y!=null)switch(R){case"src":_=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:ln(i,u,R,Y,p,null)}}C&&ln(i,u,"srcSet",p.srcSet,p,null),_&&ln(i,u,"src",p.src,p,null);return;case"input":Or("invalid",i);var xe=R=Y=C=null,Te=null,Qe=null;for(_ in p)if(p.hasOwnProperty(_)){var dt=p[_];if(dt!=null)switch(_){case"name":C=dt;break;case"type":Y=dt;break;case"checked":Te=dt;break;case"defaultChecked":Qe=dt;break;case"value":R=dt;break;case"defaultValue":xe=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(n(137,u));break;default:ln(i,u,_,dt,p,null)}}$e(i,R,xe,Te,Qe,Y,C,!1);return;case"select":Or("invalid",i),_=Y=R=null;for(C in p)if(p.hasOwnProperty(C)&&(xe=p[C],xe!=null))switch(C){case"value":R=xe;break;case"defaultValue":Y=xe;break;case"multiple":_=xe;default:ln(i,u,C,xe,p,null)}u=R,p=Y,i.multiple=!!_,u!=null?Gt(i,!!_,u,!1):p!=null&&Gt(i,!!_,p,!0);return;case"textarea":Or("invalid",i),R=C=_=null;for(Y in p)if(p.hasOwnProperty(Y)&&(xe=p[Y],xe!=null))switch(Y){case"value":_=xe;break;case"defaultValue":C=xe;break;case"children":R=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(n(91));break;default:ln(i,u,Y,xe,p,null)}Ga(i,_,C,R);return;case"option":for(Te in p)p.hasOwnProperty(Te)&&(_=p[Te],_!=null)&&(Te==="selected"?i.selected=_&&typeof _!="function"&&typeof _!="symbol":ln(i,u,Te,_,p,null));return;case"dialog":Or("beforetoggle",i),Or("toggle",i),Or("cancel",i),Or("close",i);break;case"iframe":case"object":Or("load",i);break;case"video":case"audio":for(_=0;_<Vu.length;_++)Or(Vu[_],i);break;case"image":Or("error",i),Or("load",i);break;case"details":Or("toggle",i);break;case"embed":case"source":case"link":Or("error",i),Or("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Qe in p)if(p.hasOwnProperty(Qe)&&(_=p[Qe],_!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:ln(i,u,Qe,_,p,null)}return;default:if(un(u)){for(dt in p)p.hasOwnProperty(dt)&&(_=p[dt],_!==void 0&&Cg(i,u,dt,_,p,void 0));return}}for(xe in p)p.hasOwnProperty(xe)&&(_=p[xe],_!=null&&ln(i,u,xe,_,p,null))}function t6(i,u,p,_){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,R=null,Y=null,xe=null,Te=null,Qe=null,dt=null;for(it in p){var mt=p[it];if(p.hasOwnProperty(it)&&mt!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":Te=mt;default:_.hasOwnProperty(it)||ln(i,u,it,null,_,mt)}}for(var tt in _){var it=_[tt];if(mt=p[tt],_.hasOwnProperty(tt)&&(it!=null||mt!=null))switch(tt){case"type":R=it;break;case"name":C=it;break;case"checked":Qe=it;break;case"defaultChecked":dt=it;break;case"value":Y=it;break;case"defaultValue":xe=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,u));break;default:it!==mt&&ln(i,u,tt,it,_,mt)}}Jn(i,Y,xe,Te,Qe,dt,R,C);return;case"select":it=Y=xe=tt=null;for(R in p)if(Te=p[R],p.hasOwnProperty(R)&&Te!=null)switch(R){case"value":break;case"multiple":it=Te;default:_.hasOwnProperty(R)||ln(i,u,R,null,_,Te)}for(C in _)if(R=_[C],Te=p[C],_.hasOwnProperty(C)&&(R!=null||Te!=null))switch(C){case"value":tt=R;break;case"defaultValue":xe=R;break;case"multiple":Y=R;default:R!==Te&&ln(i,u,C,R,_,Te)}u=xe,p=Y,_=it,tt!=null?Gt(i,!!p,tt,!1):!!_!=!!p&&(u!=null?Gt(i,!!p,u,!0):Gt(i,!!p,p?[]:"",!1));return;case"textarea":it=tt=null;for(xe in p)if(C=p[xe],p.hasOwnProperty(xe)&&C!=null&&!_.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:ln(i,u,xe,null,_,C)}for(Y in _)if(C=_[Y],R=p[Y],_.hasOwnProperty(Y)&&(C!=null||R!=null))switch(Y){case"value":tt=C;break;case"defaultValue":it=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(n(91));break;default:C!==R&&ln(i,u,Y,C,_,R)}Wn(i,tt,it);return;case"option":for(var Ht in p)tt=p[Ht],p.hasOwnProperty(Ht)&&tt!=null&&!_.hasOwnProperty(Ht)&&(Ht==="selected"?i.selected=!1:ln(i,u,Ht,null,_,tt));for(Te in _)tt=_[Te],it=p[Te],_.hasOwnProperty(Te)&&tt!==it&&(tt!=null||it!=null)&&(Te==="selected"?i.selected=tt&&typeof tt!="function"&&typeof tt!="symbol":ln(i,u,Te,tt,_,it));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var er in p)tt=p[er],p.hasOwnProperty(er)&&tt!=null&&!_.hasOwnProperty(er)&&ln(i,u,er,null,_,tt);for(Qe in _)if(tt=_[Qe],it=p[Qe],_.hasOwnProperty(Qe)&&tt!==it&&(tt!=null||it!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(n(137,u));break;default:ln(i,u,Qe,tt,_,it)}return;default:if(un(u)){for(var on in p)tt=p[on],p.hasOwnProperty(on)&&tt!==void 0&&!_.hasOwnProperty(on)&&Cg(i,u,on,void 0,_,tt);for(dt in _)tt=_[dt],it=p[dt],!_.hasOwnProperty(dt)||tt===it||tt===void 0&&it===void 0||Cg(i,u,dt,tt,_,it);return}}for(var ze in p)tt=p[ze],p.hasOwnProperty(ze)&&tt!=null&&!_.hasOwnProperty(ze)&&ln(i,u,ze,null,_,tt);for(mt in _)tt=_[mt],it=p[mt],!_.hasOwnProperty(mt)||tt===it||tt==null&&it==null||ln(i,u,mt,tt,_,it)}function xw(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function r6(){if(typeof performance.getEntriesByType=="function"){for(var i=0,u=0,p=performance.getEntriesByType("resource"),_=0;_<p.length;_++){var C=p[_],R=C.transferSize,Y=C.initiatorType,xe=C.duration;if(R&&xe&&xw(Y)){for(Y=0,xe=C.responseEnd,_+=1;_<p.length;_++){var Te=p[_],Qe=Te.startTime;if(Qe>xe)break;var dt=Te.transferSize,mt=Te.initiatorType;dt&&xw(mt)&&(Te=Te.responseEnd,Y+=dt*(Te<xe?1:(xe-Qe)/(Te-Qe)))}if(--_,u+=8*(R+Y)/(C.duration/1e3),i++,10<i)break}}if(0<i)return u/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var jg=null,Og=null;function Oh(i){return i.nodeType===9?i:i.ownerDocument}function mw(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gw(i,u){if(i===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&u==="foreignObject"?0:i}function Rg(i,u){return i==="textarea"||i==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Ig=null;function n6(){var i=window.event;return i&&i.type==="popstate"?i===Ig?!1:(Ig=i,!0):(Ig=null,!1)}var pw=typeof setTimeout=="function"?setTimeout:void 0,a6=typeof clearTimeout=="function"?clearTimeout:void 0,bw=typeof Promise=="function"?Promise:void 0,s6=typeof queueMicrotask=="function"?queueMicrotask:typeof bw<"u"?function(i){return bw.resolve(null).then(i).catch(i6)}:pw;function i6(i){setTimeout(function(){throw i})}function lo(i){return i==="head"}function vw(i,u){var p=u,_=0;do{var C=p.nextSibling;if(i.removeChild(p),C&&C.nodeType===8)if(p=C.data,p==="/$"||p==="/&"){if(_===0){i.removeChild(C),b0(u);return}_--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")_++;else if(p==="html")qu(i.ownerDocument.documentElement);else if(p==="head"){p=i.ownerDocument.head,qu(p);for(var R=p.firstChild;R;){var Y=R.nextSibling,xe=R.nodeName;R[Je]||xe==="SCRIPT"||xe==="STYLE"||xe==="LINK"&&R.rel.toLowerCase()==="stylesheet"||p.removeChild(R),R=Y}}else p==="body"&&qu(i.ownerDocument.body);p=C}while(p);b0(u)}function yw(i,u){var p=i;i=0;do{var _=p.nextSibling;if(p.nodeType===1?u?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(u?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),_&&_.nodeType===8)if(p=_.data,p==="/$"){if(i===0)break;i--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||i++;p=_}while(p)}function Dg(i){var u=i.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Dg(p),gt(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}i.removeChild(p)}}function l6(i,u,p,_){for(;i.nodeType===1;){var C=p;if(i.nodeName.toLowerCase()!==u.toLowerCase()){if(!_&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(_){if(!i[Je])switch(u){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(R=i.getAttribute("rel"),R==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(R!==C.rel||i.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||i.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||i.getAttribute("title")!==(C.title==null?null:C.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(R=i.getAttribute("src"),(R!==(C.src==null?null:C.src)||i.getAttribute("type")!==(C.type==null?null:C.type)||i.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&R&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(u==="input"&&i.type==="hidden"){var R=C.name==null?null:""+C.name;if(C.type==="hidden"&&i.getAttribute("name")===R)return i}else return i;if(i=qs(i.nextSibling),i===null)break}return null}function o6(i,u,p){if(u==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!p||(i=qs(i.nextSibling),i===null))return null;return i}function ww(i,u){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=qs(i.nextSibling),i===null))return null;return i}function Mg(i){return i.data==="$?"||i.data==="$~"}function Fg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function c6(i,u){var p=i.ownerDocument;if(i.data==="$~")i._reactRetry=u;else if(i.data!=="$?"||p.readyState!=="loading")u();else{var _=function(){u(),p.removeEventListener("DOMContentLoaded",_)};p.addEventListener("DOMContentLoaded",_),i._reactRetry=_}}function qs(i){for(;i!=null;i=i.nextSibling){var u=i.nodeType;if(u===1||u===3)break;if(u===8){if(u=i.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return i}var Lg=null;function _w(i){i=i.nextSibling;for(var u=0;i;){if(i.nodeType===8){var p=i.data;if(p==="/$"||p==="/&"){if(u===0)return qs(i.nextSibling);u--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||u++}i=i.nextSibling}return null}function Ew(i){i=i.previousSibling;for(var u=0;i;){if(i.nodeType===8){var p=i.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(u===0)return i;u--}else p!=="/$"&&p!=="/&"||u++}i=i.previousSibling}return null}function kw(i,u,p){switch(u=Oh(p),i){case"html":if(i=u.documentElement,!i)throw Error(n(452));return i;case"head":if(i=u.head,!i)throw Error(n(453));return i;case"body":if(i=u.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function qu(i){for(var u=i.attributes;u.length;)i.removeAttributeNode(u[0]);gt(i)}var Xs=new Map,Sw=new Set;function Rh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ml=le.d;le.d={f:u6,r:d6,D:f6,C:h6,L:x6,m:m6,X:p6,S:g6,M:b6};function u6(){var i=ml.f(),u=Eh();return i||u}function d6(i){var u=Et(i);u!==null&&u.tag===5&&u.type==="form"?Hv(u):ml.r(i)}var m0=typeof document>"u"?null:document;function Nw(i,u,p){var _=m0;if(_&&typeof u=="string"&&u){var C=Nr(u);C='link[rel="'+i+'"][href="'+C+'"]',typeof p=="string"&&(C+='[crossorigin="'+p+'"]'),Sw.has(C)||(Sw.add(C),i={rel:i,crossOrigin:p,href:u},_.querySelector(C)===null&&(u=_.createElement("link"),Na(u,"link",i),Ut(u),_.head.appendChild(u)))}}function f6(i){ml.D(i),Nw("dns-prefetch",i,null)}function h6(i,u){ml.C(i,u),Nw("preconnect",i,u)}function x6(i,u,p){ml.L(i,u,p);var _=m0;if(_&&i&&u){var C='link[rel="preload"][as="'+Nr(u)+'"]';u==="image"&&p&&p.imageSrcSet?(C+='[imagesrcset="'+Nr(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(C+='[imagesizes="'+Nr(p.imageSizes)+'"]')):C+='[href="'+Nr(i)+'"]';var R=C;switch(u){case"style":R=g0(i);break;case"script":R=p0(i)}Xs.has(R)||(i=v({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:i,as:u},p),Xs.set(R,i),_.querySelector(C)!==null||u==="style"&&_.querySelector(Xu(R))||u==="script"&&_.querySelector(Ku(R))||(u=_.createElement("link"),Na(u,"link",i),Ut(u),_.head.appendChild(u)))}}function m6(i,u){ml.m(i,u);var p=m0;if(p&&i){var _=u&&typeof u.as=="string"?u.as:"script",C='link[rel="modulepreload"][as="'+Nr(_)+'"][href="'+Nr(i)+'"]',R=C;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=p0(i)}if(!Xs.has(R)&&(i=v({rel:"modulepreload",href:i},u),Xs.set(R,i),p.querySelector(C)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Ku(R)))return}_=p.createElement("link"),Na(_,"link",i),Ut(_),p.head.appendChild(_)}}}function g6(i,u,p){ml.S(i,u,p);var _=m0;if(_&&i){var C=Ot(_).hoistableStyles,R=g0(i);u=u||"default";var Y=C.get(R);if(!Y){var xe={loading:0,preload:null};if(Y=_.querySelector(Xu(R)))xe.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":u},p),(p=Xs.get(R))&&Bg(i,p);var Te=Y=_.createElement("link");Ut(Te),Na(Te,"link",i),Te._p=new Promise(function(Qe,dt){Te.onload=Qe,Te.onerror=dt}),Te.addEventListener("load",function(){xe.loading|=1}),Te.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,Ih(Y,u,_)}Y={type:"stylesheet",instance:Y,count:1,state:xe},C.set(R,Y)}}}function p6(i,u){ml.X(i,u);var p=m0;if(p&&i){var _=Ot(p).hoistableScripts,C=p0(i),R=_.get(C);R||(R=p.querySelector(Ku(C)),R||(i=v({src:i,async:!0},u),(u=Xs.get(C))&&Pg(i,u),R=p.createElement("script"),Ut(R),Na(R,"link",i),p.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},_.set(C,R))}}function b6(i,u){ml.M(i,u);var p=m0;if(p&&i){var _=Ot(p).hoistableScripts,C=p0(i),R=_.get(C);R||(R=p.querySelector(Ku(C)),R||(i=v({src:i,async:!0,type:"module"},u),(u=Xs.get(C))&&Pg(i,u),R=p.createElement("script"),Ut(R),Na(R,"link",i),p.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},_.set(C,R))}}function Aw(i,u,p,_){var C=(C=ue.current)?Rh(C):null;if(!C)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=g0(p.href),p=Ot(C).hoistableStyles,_=p.get(u),_||(_={type:"style",instance:null,count:0,state:null},p.set(u,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){i=g0(p.href);var R=Ot(C).hoistableStyles,Y=R.get(i);if(Y||(C=C.ownerDocument||C,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(i,Y),(R=C.querySelector(Xu(i)))&&!R._p&&(Y.instance=R,Y.state.loading=5),Xs.has(i)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Xs.set(i,p),R||v6(C,i,p,Y.state))),u&&_===null)throw Error(n(528,""));return Y}if(u&&_!==null)throw Error(n(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=p0(p),p=Ot(C).hoistableScripts,_=p.get(u),_||(_={type:"script",instance:null,count:0,state:null},p.set(u,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function g0(i){return'href="'+Nr(i)+'"'}function Xu(i){return'link[rel="stylesheet"]['+i+"]"}function Tw(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function v6(i,u,p,_){i.querySelector('link[rel="preload"][as="style"]['+u+"]")?_.loading=1:(u=i.createElement("link"),_.preload=u,u.addEventListener("load",function(){return _.loading|=1}),u.addEventListener("error",function(){return _.loading|=2}),Na(u,"link",p),Ut(u),i.head.appendChild(u))}function p0(i){return'[src="'+Nr(i)+'"]'}function Ku(i){return"script[async]"+i}function Cw(i,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var _=i.querySelector('style[data-href~="'+Nr(p.href)+'"]');if(_)return u.instance=_,Ut(_),_;var C=v({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return _=(i.ownerDocument||i).createElement("style"),Ut(_),Na(_,"style",C),Ih(_,p.precedence,i),u.instance=_;case"stylesheet":C=g0(p.href);var R=i.querySelector(Xu(C));if(R)return u.state.loading|=4,u.instance=R,Ut(R),R;_=Tw(p),(C=Xs.get(C))&&Bg(_,C),R=(i.ownerDocument||i).createElement("link"),Ut(R);var Y=R;return Y._p=new Promise(function(xe,Te){Y.onload=xe,Y.onerror=Te}),Na(R,"link",_),u.state.loading|=4,Ih(R,p.precedence,i),u.instance=R;case"script":return R=p0(p.src),(C=i.querySelector(Ku(R)))?(u.instance=C,Ut(C),C):(_=p,(C=Xs.get(R))&&(_=v({},p),Pg(_,C)),i=i.ownerDocument||i,C=i.createElement("script"),Ut(C),Na(C,"link",_),i.head.appendChild(C),u.instance=C);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(_=u.instance,u.state.loading|=4,Ih(_,p.precedence,i));return u.instance}function Ih(i,u,p){for(var _=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=_.length?_[_.length-1]:null,R=C,Y=0;Y<_.length;Y++){var xe=_[Y];if(xe.dataset.precedence===u)R=xe;else if(R!==C)break}R?R.parentNode.insertBefore(i,R.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(i,u.firstChild))}function Bg(i,u){i.crossOrigin==null&&(i.crossOrigin=u.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=u.referrerPolicy),i.title==null&&(i.title=u.title)}function Pg(i,u){i.crossOrigin==null&&(i.crossOrigin=u.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=u.referrerPolicy),i.integrity==null&&(i.integrity=u.integrity)}var Dh=null;function jw(i,u,p){if(Dh===null){var _=new Map,C=Dh=new Map;C.set(p,_)}else C=Dh,_=C.get(p),_||(_=new Map,C.set(p,_));if(_.has(i))return _;for(_.set(i,null),p=p.getElementsByTagName(i),C=0;C<p.length;C++){var R=p[C];if(!(R[Je]||R[be]||i==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=R.getAttribute(u)||"";Y=i+Y;var xe=_.get(Y);xe?xe.push(R):_.set(Y,[R])}}return _}function Ow(i,u,p){i=i.ownerDocument||i,i.head.insertBefore(p,u==="title"?i.querySelector("head > title"):null)}function y6(i,u,p){if(p===1||u.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(i=u.disabled,typeof u.precedence=="string"&&i==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function Rw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function w6(i,u,p,_){if(p.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var C=g0(_.href),R=u.querySelector(Xu(C));if(R){u=R._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(i.count++,i=Mh.bind(i),u.then(i,i)),p.state.loading|=4,p.instance=R,Ut(R);return}R=u.ownerDocument||u,_=Tw(_),(C=Xs.get(C))&&Bg(_,C),R=R.createElement("link"),Ut(R);var Y=R;Y._p=new Promise(function(xe,Te){Y.onload=xe,Y.onerror=Te}),Na(R,"link",_),p.instance=R}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(p,u),(u=p.state.preload)&&(p.state.loading&3)===0&&(i.count++,p=Mh.bind(i),u.addEventListener("load",p),u.addEventListener("error",p))}}var Ug=0;function _6(i,u){return i.stylesheets&&i.count===0&&Lh(i,i.stylesheets),0<i.count||0<i.imgCount?function(p){var _=setTimeout(function(){if(i.stylesheets&&Lh(i,i.stylesheets),i.unsuspend){var R=i.unsuspend;i.unsuspend=null,R()}},6e4+u);0<i.imgBytes&&Ug===0&&(Ug=62500*r6());var C=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Lh(i,i.stylesheets),i.unsuspend)){var R=i.unsuspend;i.unsuspend=null,R()}},(i.imgBytes>Ug?50:800)+u);return i.unsuspend=p,function(){i.unsuspend=null,clearTimeout(_),clearTimeout(C)}}:null}function Mh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Fh=null;function Lh(i,u){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Fh=new Map,u.forEach(E6,i),Fh=null,Mh.call(i))}function E6(i,u){if(!(u.state.loading&4)){var p=Fh.get(i);if(p)var _=p.get(null);else{p=new Map,Fh.set(i,p);for(var C=i.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<C.length;R++){var Y=C[R];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(p.set(Y.dataset.precedence,Y),_=Y)}_&&p.set(null,_)}C=u.instance,Y=C.getAttribute("data-precedence"),R=p.get(Y)||_,R===_&&p.set(null,C),p.set(Y,C),this.count++,_=Mh.bind(this),C.addEventListener("load",_),C.addEventListener("error",_),R?R.parentNode.insertBefore(C,R.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(C,i.firstChild)),u.state.loading|=4}}var Yu={$$typeof:I,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function k6(i,u,p,_,C,R,Y,xe,Te){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=_,this.onUncaughtError=C,this.onCaughtError=R,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Te,this.incompleteTransitions=new Map}function Iw(i,u,p,_,C,R,Y,xe,Te,Qe,dt,mt){return i=new k6(i,u,p,Y,Te,Qe,dt,mt,xe),u=1,R===!0&&(u|=24),R=gs(3,null,null,u),i.current=R,R.stateNode=i,u=vm(),u.refCount++,i.pooledCache=u,u.refCount++,R.memoizedState={element:_,isDehydrated:p,cache:u},Em(R),i}function Dw(i){return i?(i=Kc,i):Kc}function Mw(i,u,p,_,C,R){C=Dw(C),_.context===null?_.context=C:_.pendingContext=C,_=$l(u),_.payload={element:p},R=R===void 0?null:R,R!==null&&(_.callback=R),p=Zl(i,_,u),p!==null&&(ss(p,i,u),Au(p,i,u))}function Fw(i,u){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var p=i.retryLane;i.retryLane=p!==0&&p<u?p:u}}function zg(i,u){Fw(i,u),(i=i.alternate)&&Fw(i,u)}function Lw(i){if(i.tag===13||i.tag===31){var u=Ho(i,67108864);u!==null&&ss(u,i,67108864),zg(i,67108864)}}function Bw(i){if(i.tag===13||i.tag===31){var u=ws();u=_t(u);var p=Ho(i,u);p!==null&&ss(p,i,u),zg(i,u)}}var Bh=!0;function S6(i,u,p,_){var C=ve.T;ve.T=null;var R=le.p;try{le.p=2,Hg(i,u,p,_)}finally{le.p=R,ve.T=C}}function N6(i,u,p,_){var C=ve.T;ve.T=null;var R=le.p;try{le.p=8,Hg(i,u,p,_)}finally{le.p=R,ve.T=C}}function Hg(i,u,p,_){if(Bh){var C=Gg(_);if(C===null)Tg(i,u,_,Ph,p),Uw(i,_);else if(T6(C,i,u,p,_))_.stopPropagation();else if(Uw(i,_),u&4&&-1<A6.indexOf(i)){for(;C!==null;){var R=Et(C);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var Y=Kr(R.pendingLanes);if(Y!==0){var xe=R;for(xe.pendingLanes|=2,xe.entangledLanes|=2;Y;){var Te=1<<31-Bt(Y);xe.entanglements[1]|=Te,Y&=~Te}Ii(R),($r&6)===0&&(wh=We()+500,Gu(0))}}break;case 31:case 13:xe=Ho(R,2),xe!==null&&ss(xe,R,2),Eh(),zg(R,2)}if(R=Gg(_),R===null&&Tg(i,u,_,Ph,p),R===C)break;C=R}C!==null&&_.stopPropagation()}else Tg(i,u,_,null,p)}}function Gg(i){return i=fu(i),Vg(i)}var Ph=null;function Vg(i){if(Ph=null,i=yt(i),i!==null){var u=s(i);if(u===null)i=null;else{var p=u.tag;if(p===13){if(i=c(u),i!==null)return i;i=null}else if(p===31){if(i=d(u),i!==null)return i;i=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;i=null}else u!==i&&(i=null)}}return Ph=i,null}function Pw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rt()){case ht:return 2;case Pe:return 8;case Ye:case Tt:return 32;case Ct:return 268435456;default:return 32}default:return 32}}var Wg=!1,oo=null,co=null,uo=null,$u=new Map,Zu=new Map,fo=[],A6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Uw(i,u){switch(i){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":$u.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zu.delete(u.pointerId)}}function Ju(i,u,p,_,C,R){return i===null||i.nativeEvent!==R?(i={blockedOn:u,domEventName:p,eventSystemFlags:_,nativeEvent:R,targetContainers:[C]},u!==null&&(u=Et(u),u!==null&&Lw(u)),i):(i.eventSystemFlags|=_,u=i.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),i)}function T6(i,u,p,_,C){switch(u){case"focusin":return oo=Ju(oo,i,u,p,_,C),!0;case"dragenter":return co=Ju(co,i,u,p,_,C),!0;case"mouseover":return uo=Ju(uo,i,u,p,_,C),!0;case"pointerover":var R=C.pointerId;return $u.set(R,Ju($u.get(R)||null,i,u,p,_,C)),!0;case"gotpointercapture":return R=C.pointerId,Zu.set(R,Ju(Zu.get(R)||null,i,u,p,_,C)),!0}return!1}function zw(i){var u=yt(i.target);if(u!==null){var p=s(u);if(p!==null){if(u=p.tag,u===13){if(u=c(p),u!==null){i.blockedOn=u,fe(i.priority,function(){Bw(p)});return}}else if(u===31){if(u=d(p),u!==null){i.blockedOn=u,fe(i.priority,function(){Bw(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){i.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Uh(i){if(i.blockedOn!==null)return!1;for(var u=i.targetContainers;0<u.length;){var p=Gg(i.nativeEvent);if(p===null){p=i.nativeEvent;var _=new p.constructor(p.type,p);Do=_,p.target.dispatchEvent(_),Do=null}else return u=Et(p),u!==null&&Lw(u),i.blockedOn=p,!1;u.shift()}return!0}function Hw(i,u,p){Uh(i)&&p.delete(u)}function C6(){Wg=!1,oo!==null&&Uh(oo)&&(oo=null),co!==null&&Uh(co)&&(co=null),uo!==null&&Uh(uo)&&(uo=null),$u.forEach(Hw),Zu.forEach(Hw)}function zh(i,u){i.blockedOn===u&&(i.blockedOn=null,Wg||(Wg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,C6)))}var Hh=null;function Gw(i){Hh!==i&&(Hh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Hh===i&&(Hh=null);for(var u=0;u<i.length;u+=3){var p=i[u],_=i[u+1],C=i[u+2];if(typeof _!="function"){if(Vg(_||p)===null)continue;break}var R=Et(p);R!==null&&(i.splice(u,3),u-=3,Gm(R,{pending:!0,data:C,method:p.method,action:_},_,C))}}))}function b0(i){function u(Te){return zh(Te,i)}oo!==null&&zh(oo,i),co!==null&&zh(co,i),uo!==null&&zh(uo,i),$u.forEach(u),Zu.forEach(u);for(var p=0;p<fo.length;p++){var _=fo[p];_.blockedOn===i&&(_.blockedOn=null)}for(;0<fo.length&&(p=fo[0],p.blockedOn===null);)zw(p),p.blockedOn===null&&fo.shift();if(p=(i.ownerDocument||i).$$reactFormReplay,p!=null)for(_=0;_<p.length;_+=3){var C=p[_],R=p[_+1],Y=C[we]||null;if(typeof R=="function")Y||Gw(p);else if(Y){var xe=null;if(R&&R.hasAttribute("formAction")){if(C=R,Y=R[we]||null)xe=Y.formAction;else if(Vg(C)!==null)continue}else xe=Y.action;typeof xe=="function"?p[_+1]=xe:(p.splice(_,3),_-=3),Gw(p)}}}function Vw(){function i(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(Y){return C=Y})},focusReset:"manual",scroll:"manual"})}function u(){C!==null&&(C(),C=null),_||setTimeout(p,20)}function p(){if(!_&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var _=!1,C=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(p,100),function(){_=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),C!==null&&(C(),C=null)}}}function qg(i){this._internalRoot=i}Gh.prototype.render=qg.prototype.render=function(i){var u=this._internalRoot;if(u===null)throw Error(n(409));var p=u.current,_=ws();Mw(p,_,i,u,null,null)},Gh.prototype.unmount=qg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var u=i.containerInfo;Mw(i.current,2,null,i,null,null),Eh(),u[Ee]=null}};function Gh(i){this._internalRoot=i}Gh.prototype.unstable_scheduleHydration=function(i){if(i){var u=ee();i={blockedOn:null,target:i,priority:u};for(var p=0;p<fo.length&&u!==0&&u<fo[p].priority;p++);fo.splice(p,0,i),p===0&&zw(i)}};var Ww=r.version;if(Ww!=="19.2.3")throw Error(n(527,Ww,"19.2.3"));le.findDOMNode=function(i){var u=i._reactInternals;if(u===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(u),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var j6={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ve,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{jt=Vh.inject(j6),ft=Vh}catch{}}return ed.createRoot=function(i,u){if(!a(i))throw Error(n(299));var p=!1,_="",C=Jv,R=Qv,Y=ey;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(Y=u.onRecoverableError)),u=Iw(i,1,!1,null,null,p,_,null,C,R,Y,Vw),i[Ee]=u.current,Ag(i),new qg(u)},ed.hydrateRoot=function(i,u,p){if(!a(i))throw Error(n(299));var _=!1,C="",R=Jv,Y=Qv,xe=ey,Te=null;return p!=null&&(p.unstable_strictMode===!0&&(_=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onUncaughtError!==void 0&&(R=p.onUncaughtError),p.onCaughtError!==void 0&&(Y=p.onCaughtError),p.onRecoverableError!==void 0&&(xe=p.onRecoverableError),p.formState!==void 0&&(Te=p.formState)),u=Iw(i,1,!0,u,p??null,_,C,Te,R,Y,xe,Vw),u.context=Dw(null),p=u.current,_=ws(),_=_t(_),C=$l(_),C.callback=null,Zl(p,C,_),p=_,u.current.lanes=p,Dt(u,p),Ii(u),i[Ee]=u.current,Ag(i),new Gh(u)},ed.version="19.2.3",ed}var t_;function z6(){if(t_)return Yg.exports;t_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),Yg.exports=U6(),Yg.exports}var H6=z6();var r_="popstate";function G6(e={}){function r(n,a){let{pathname:s,search:c,hash:d}=n.location;return Wp("",{pathname:s,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(n,a){return typeof a=="string"?a:Od(a)}return W6(r,t,null,e)}function Rn(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function ri(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function V6(){return Math.random().toString(36).substring(2,10)}function n_(e,r){return{usr:e.state,key:e.key,idx:r}}function Wp(e,r,t=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof r=="string"?J0(r):r,state:t,key:r&&r.key||n||V6()}}function Od({pathname:e="/",search:r="",hash:t=""}){return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),t&&t!=="#"&&(e+=t.charAt(0)==="#"?t:"#"+t),e}function J0(e){let r={};if(e){let t=e.indexOf("#");t>=0&&(r.hash=e.substring(t),e=e.substring(0,t));let n=e.indexOf("?");n>=0&&(r.search=e.substring(n),e=e.substring(0,n)),e&&(r.pathname=e)}return r}function W6(e,r,t,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,c=a.history,d="POP",x=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function v(){d="POP";let T=g(),j=T==null?null:T-f;f=T,x&&x({action:d,location:S.location,delta:j})}function w(T,j){d="PUSH";let D=Wp(S.location,T,j);f=g()+1;let I=n_(D,f),L=S.createHref(D);try{c.pushState(I,"",L)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;a.location.assign(L)}s&&x&&x({action:d,location:S.location,delta:1})}function E(T,j){d="REPLACE";let D=Wp(S.location,T,j);f=g();let I=n_(D,f),L=S.createHref(D);c.replaceState(I,"",L),s&&x&&x({action:d,location:S.location,delta:0})}function N(T){return q6(T)}let S={get action(){return d},get location(){return e(a,c)},listen(T){if(x)throw new Error("A history only accepts one active listener");return a.addEventListener(r_,v),x=T,()=>{a.removeEventListener(r_,v),x=null}},createHref(T){return r(a,T)},createURL:N,encodeLocation(T){let j=N(T);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:w,replace:E,go(T){return c.go(T)}};return S}function q6(e,r=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Rn(t,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Od(e);return n=n.replace(/ $/,"%20"),!r&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function rk(e,r,t="/"){return X6(e,r,t,!1)}function X6(e,r,t,n){let a=typeof r=="string"?J0(r):r,s=Tl(a.pathname||"/",t);if(s==null)return null;let c=nk(e);K6(c);let d=null;for(let x=0;d==null&&x<c.length;++x){let f=s8(s);d=n8(c[x],f,n)}return d}function nk(e,r=[],t=[],n="",a=!1){let s=(c,d,x=a,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&x)return;Rn(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let v=El([n,g.relativePath]),w=t.concat(g);c.children&&c.children.length>0&&(Rn(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),nk(c.children,r,w,v,x)),!(c.path==null&&!c.index)&&r.push({path:v,score:t8(v,c.index),routesMeta:w})};return e.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))s(c,d);else for(let x of ak(c.path))s(c,d,!0,x)}),r}function ak(e){let r=e.split("/");if(r.length===0)return[];let[t,...n]=r,a=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let c=ak(n.join("/")),d=[];return d.push(...c.map(x=>x===""?s:[s,x].join("/"))),a&&d.push(...c),d.map(x=>e.startsWith("/")&&x===""?"/":x)}function K6(e){e.sort((r,t)=>r.score!==t.score?t.score-r.score:r8(r.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var Y6=/^:[\w-]+$/,$6=3,Z6=2,J6=1,Q6=10,e8=-2,a_=e=>e==="*";function t8(e,r){let t=e.split("/"),n=t.length;return t.some(a_)&&(n+=e8),r&&(n+=Z6),t.filter(a=>!a_(a)).reduce((a,s)=>a+(Y6.test(s)?$6:s===""?J6:Q6),n)}function r8(e,r){return e.length===r.length&&e.slice(0,-1).every((n,a)=>n===r[a])?e[e.length-1]-r[r.length-1]:0}function n8(e,r,t=!1){let{routesMeta:n}=e,a={},s="/",c=[];for(let d=0;d<n.length;++d){let x=n[d],f=d===n.length-1,g=s==="/"?r:r.slice(s.length)||"/",v=sx({path:x.relativePath,caseSensitive:x.caseSensitive,end:f},g),w=x.route;if(!v&&f&&t&&!n[n.length-1].route.index&&(v=sx({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},g)),!v)return null;Object.assign(a,v.params),c.push({params:a,pathname:El([s,v.pathname]),pathnameBase:c8(El([s,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(s=El([s,v.pathnameBase]))}return c}function sx(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,n]=a8(e.path,e.caseSensitive,e.end),a=r.match(t);if(!a)return null;let s=a[0],c=s.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:v},w)=>{if(g==="*"){let N=d[w]||"";c=s.slice(0,s.length-N.length).replace(/(.)\/+$/,"$1")}const E=d[w];return v&&!E?f[g]=void 0:f[g]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:c,pattern:e}}function a8(e,r=!1,t=!0){ri(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,x)=>(n.push({paramName:d,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,r?void 0:"i"),n]}function s8(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return ri(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),e}}function Tl(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let t=r.endsWith("/")?r.length-1:r.length,n=e.charAt(t);return n&&n!=="/"?null:e.slice(t)||"/"}var sk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i8=e=>sk.test(e);function l8(e,r="/"){let{pathname:t,search:n="",hash:a=""}=typeof e=="string"?J0(e):e,s;if(t)if(i8(t))s=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),ri(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?s=s_(t.substring(1),"/"):s=s_(t,r)}else s=r;return{pathname:s,search:u8(n),hash:d8(a)}}function s_(e,r){let t=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Qg(e,r,t,n){return`Cannot include a '${e}' character in a manually specified \`to.${r}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function o8(e){return e.filter((r,t)=>t===0||r.route.path&&r.route.path.length>0)}function I2(e){let r=o8(e);return r.map((t,n)=>n===r.length-1?t.pathname:t.pathnameBase)}function D2(e,r,t,n=!1){let a;typeof e=="string"?a=J0(e):(a={...e},Rn(!a.pathname||!a.pathname.includes("?"),Qg("?","pathname","search",a)),Rn(!a.pathname||!a.pathname.includes("#"),Qg("#","pathname","hash",a)),Rn(!a.search||!a.search.includes("#"),Qg("#","search","hash",a)));let s=e===""||a.pathname==="",c=s?"/":a.pathname,d;if(c==null)d=t;else{let v=r.length-1;if(!n&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),v-=1;a.pathname=w.join("/")}d=v>=0?r[v]:"/"}let x=l8(a,d),f=c&&c!=="/"&&c.endsWith("/"),g=(s||c===".")&&t.endsWith("/");return!x.pathname.endsWith("/")&&(f||g)&&(x.pathname+="/"),x}var El=e=>e.join("/").replace(/\/\/+/g,"/"),c8=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),u8=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,d8=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,f8=class{constructor(e,r,t,n=!1){this.status=e,this.statusText=r||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function h8(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function x8(e){return e.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ik=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function lk(e,r){let t=e;if(typeof t!="string"||!sk.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,a=!1;if(ik)try{let s=new URL(window.location.href),c=t.startsWith("//")?new URL(s.protocol+t):new URL(t),d=Tl(c.pathname,r);c.origin===s.origin&&d!=null?t=d+c.search+c.hash:a=!0}catch{ri(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ok=["POST","PUT","PATCH","DELETE"];new Set(ok);var m8=["GET",...ok];new Set(m8);var Q0=J.createContext(null);Q0.displayName="DataRouter";var Cx=J.createContext(null);Cx.displayName="DataRouterState";var g8=J.createContext(!1),ck=J.createContext({isTransitioning:!1});ck.displayName="ViewTransition";var p8=J.createContext(new Map);p8.displayName="Fetchers";var b8=J.createContext(null);b8.displayName="Await";var Fs=J.createContext(null);Fs.displayName="Navigation";var lf=J.createContext(null);lf.displayName="Location";var ki=J.createContext({outlet:null,matches:[],isDataRoute:!1});ki.displayName="Route";var M2=J.createContext(null);M2.displayName="RouteError";var uk="REACT_ROUTER_ERROR",v8="REDIRECT",y8="ROUTE_ERROR_RESPONSE";function w8(e){if(e.startsWith(`${uk}:${v8}:{`))try{let r=JSON.parse(e.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function _8(e){if(e.startsWith(`${uk}:${y8}:{`))try{let r=JSON.parse(e.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new f8(r.status,r.statusText,r.data)}catch{}}function E8(e,{relative:r}={}){Rn(eu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=J.useContext(Fs),{hash:a,pathname:s,search:c}=of(e,{relative:r}),d=s;return t!=="/"&&(d=s==="/"?t:El([t,s])),n.createHref({pathname:d,search:c,hash:a})}function eu(){return J.useContext(lf)!=null}function Vi(){return Rn(eu(),"useLocation() may be used only in the context of a <Router> component."),J.useContext(lf).location}var dk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fk(e){J.useContext(Fs).static||J.useLayoutEffect(e)}function tu(){let{isDataRoute:e}=J.useContext(ki);return e?L8():k8()}function k8(){Rn(eu(),"useNavigate() may be used only in the context of a <Router> component.");let e=J.useContext(Q0),{basename:r,navigator:t}=J.useContext(Fs),{matches:n}=J.useContext(ki),{pathname:a}=Vi(),s=JSON.stringify(I2(n)),c=J.useRef(!1);return fk(()=>{c.current=!0}),J.useCallback((x,f={})=>{if(ri(c.current,dk),!c.current)return;if(typeof x=="number"){t.go(x);return}let g=D2(x,JSON.parse(s),a,f.relative==="path");e==null&&r!=="/"&&(g.pathname=g.pathname==="/"?r:El([r,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[r,t,s,a,e])}J.createContext(null);function S8(){let{matches:e}=J.useContext(ki),r=e[e.length-1];return r?r.params:{}}function of(e,{relative:r}={}){let{matches:t}=J.useContext(ki),{pathname:n}=Vi(),a=JSON.stringify(I2(t));return J.useMemo(()=>D2(e,JSON.parse(a),n,r==="path"),[e,a,n,r])}function N8(e,r){return hk(e,r)}function hk(e,r,t,n,a){Rn(eu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=J.useContext(Fs),{matches:c}=J.useContext(ki),d=c[c.length-1],x=d?d.params:{},f=d?d.pathname:"/",g=d?d.pathnameBase:"/",v=d&&d.route;{let D=v&&v.path||"";mk(f,!v||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let w=Vi(),E;if(r){let D=typeof r=="string"?J0(r):r;Rn(g==="/"||D.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${D.pathname}" was given in the \`location\` prop.`),E=D}else E=w;let N=E.pathname||"/",S=N;if(g!=="/"){let D=g.replace(/^\//,"").split("/");S="/"+N.replace(/^\//,"").split("/").slice(D.length).join("/")}let T=rk(e,{pathname:S});ri(v||T!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),ri(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=O8(T&&T.map(D=>Object.assign({},D,{params:Object.assign({},x,D.params),pathname:El([g,s.encodeLocation?s.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?g:El([g,s.encodeLocation?s.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),c,t,n,a);return r&&j?J.createElement(lf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},j):j}function A8(){let e=F8(),r=h8(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=J.createElement(J.Fragment,null,J.createElement("p",null," Hey developer "),J.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",J.createElement("code",{style:s},"ErrorBoundary")," or"," ",J.createElement("code",{style:s},"errorElement")," prop on your route.")),J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},r),t?J.createElement("pre",{style:a},t):null,c)}var T8=J.createElement(A8,null),xk=class extends J.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){this.props.onError?this.props.onError(e,r):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const t=_8(e.digest);t&&(e=t)}let r=e!==void 0?J.createElement(ki.Provider,{value:this.props.routeContext},J.createElement(M2.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?J.createElement(C8,{error:e},r):r}};xk.contextType=g8;var ep=new WeakMap;function C8({children:e,error:r}){let{basename:t}=J.useContext(Fs);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let n=w8(r.digest);if(n){let a=ep.get(r);if(a)throw a;let s=lk(n.location,t);if(ik&&!ep.get(r))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw ep.set(r,c),c}return J.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function j8({routeContext:e,match:r,children:t}){let n=J.useContext(Q0);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),J.createElement(ki.Provider,{value:e},t)}function O8(e,r=[],t=null,n=null,a=null){if(e==null){if(!t)return null;if(t.errors)e=t.matches;else if(r.length===0&&!t.initialized&&t.matches.length>0)e=t.matches;else return null}let s=e,c=t?.errors;if(c!=null){let g=s.findIndex(v=>v.route.id&&c?.[v.route.id]!==void 0);Rn(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),s=s.slice(0,Math.min(s.length,g+1))}let d=!1,x=-1;if(t)for(let g=0;g<s.length;g++){let v=s[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(x=g),v.route.id){let{loaderData:w,errors:E}=t,N=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!E||E[v.route.id]===void 0);if(v.route.lazy||N){d=!0,x>=0?s=s.slice(0,x+1):s=[s[0]];break}}}let f=t&&n?(g,v)=>{n(g,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:x8(t.matches),errorInfo:v})}:void 0;return s.reduceRight((g,v,w)=>{let E,N=!1,S=null,T=null;t&&(E=c&&v.route.id?c[v.route.id]:void 0,S=v.route.errorElement||T8,d&&(x<0&&w===0?(mk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,T=null):x===w&&(N=!0,T=v.route.hydrateFallbackElement||null)));let j=r.concat(s.slice(0,w+1)),D=()=>{let I;return E?I=S:N?I=T:v.route.Component?I=J.createElement(v.route.Component,null):v.route.element?I=v.route.element:I=g,J.createElement(j8,{match:v,routeContext:{outlet:g,matches:j,isDataRoute:t!=null},children:I})};return t&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?J.createElement(xk,{location:t.location,revalidation:t.revalidation,component:S,error:E,children:D(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:f}):D()},null)}function F2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function R8(e){let r=J.useContext(Q0);return Rn(r,F2(e)),r}function I8(e){let r=J.useContext(Cx);return Rn(r,F2(e)),r}function D8(e){let r=J.useContext(ki);return Rn(r,F2(e)),r}function L2(e){let r=D8(e),t=r.matches[r.matches.length-1];return Rn(t.route.id,`${e} can only be used on routes that contain a unique "id"`),t.route.id}function M8(){return L2("useRouteId")}function F8(){let e=J.useContext(M2),r=I8("useRouteError"),t=L2("useRouteError");return e!==void 0?e:r.errors?.[t]}function L8(){let{router:e}=R8("useNavigate"),r=L2("useNavigate"),t=J.useRef(!1);return fk(()=>{t.current=!0}),J.useCallback(async(a,s={})=>{ri(t.current,dk),t.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:r,...s}))},[e,r])}var i_={};function mk(e,r,t){!r&&!i_[e]&&(i_[e]=!0,ri(!1,t))}J.memo(B8);function B8({routes:e,future:r,state:t,onError:n}){return hk(e,void 0,t,n,r)}function gk({to:e,replace:r,state:t,relative:n}){Rn(eu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=J.useContext(Fs);ri(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=J.useContext(ki),{pathname:c}=Vi(),d=tu(),x=D2(e,I2(s),c,n==="path"),f=JSON.stringify(x);return J.useEffect(()=>{d(JSON.parse(f),{replace:r,state:t,relative:n})},[d,f,n,r,t]),null}function pa(e){Rn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function P8({basename:e="/",children:r=null,location:t,navigationType:n="POP",navigator:a,static:s=!1,unstable_useTransitions:c}){Rn(!eu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),x=J.useMemo(()=>({basename:d,navigator:a,static:s,unstable_useTransitions:c,future:{}}),[d,a,s,c]);typeof t=="string"&&(t=J0(t));let{pathname:f="/",search:g="",hash:v="",state:w=null,key:E="default"}=t,N=J.useMemo(()=>{let S=Tl(f,d);return S==null?null:{location:{pathname:S,search:g,hash:v,state:w,key:E},navigationType:n}},[d,f,g,v,w,E,n]);return ri(N!=null,`<Router basename="${d}"> is not able to match the URL "${f}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:J.createElement(Fs.Provider,{value:x},J.createElement(lf.Provider,{children:r,value:N}))}function U8({children:e,location:r}){return N8(qp(e),r)}function qp(e,r=[]){let t=[];return J.Children.forEach(e,(n,a)=>{if(!J.isValidElement(n))return;let s=[...r,a];if(n.type===J.Fragment){t.push.apply(t,qp(n.props.children,s));return}Rn(n.type===pa,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=qp(n.props.children,s)),t.push(c)}),t}var Z1="get",J1="application/x-www-form-urlencoded";function jx(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function z8(e){return jx(e)&&e.tagName.toLowerCase()==="button"}function H8(e){return jx(e)&&e.tagName.toLowerCase()==="form"}function G8(e){return jx(e)&&e.tagName.toLowerCase()==="input"}function V8(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function W8(e,r){return e.button===0&&(!r||r==="_self")&&!V8(e)}var Wh=null;function q8(){if(Wh===null)try{new FormData(document.createElement("form"),0),Wh=!1}catch{Wh=!0}return Wh}var X8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tp(e){return e!=null&&!X8.has(e)?(ri(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${J1}"`),null):e}function K8(e,r){let t,n,a,s,c;if(H8(e)){let d=e.getAttribute("action");n=d?Tl(d,r):null,t=e.getAttribute("method")||Z1,a=tp(e.getAttribute("enctype"))||J1,s=new FormData(e)}else if(z8(e)||G8(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=e.getAttribute("formaction")||d.getAttribute("action");if(n=x?Tl(x,r):null,t=e.getAttribute("formmethod")||d.getAttribute("method")||Z1,a=tp(e.getAttribute("formenctype"))||tp(d.getAttribute("enctype"))||J1,s=new FormData(d,e),!q8()){let{name:f,type:g,value:v}=e;if(g==="image"){let w=f?`${f}.`:"";s.append(`${w}x`,"0"),s.append(`${w}y`,"0")}else f&&s.append(f,v)}}else{if(jx(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Z1,n=null,a=J1,c=e}return s&&a==="text/plain"&&(c=s,s=void 0),{action:n,method:t.toLowerCase(),encType:a,formData:s,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function B2(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function Y8(e,r,t,n){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${n}`:a.pathname=`${a.pathname}.${n}`:a.pathname==="/"?a.pathname=`_root.${n}`:r&&Tl(a.pathname,r)==="/"?a.pathname=`${r.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function $8(e,r){if(e.id in r)return r[e.id];try{let t=await import(e.module);return r[e.id]=t,t}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Z8(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function J8(e,r,t){let n=await Promise.all(e.map(async a=>{let s=r.routes[a.route.id];if(s){let c=await $8(s,t);return c.links?c.links():[]}return[]}));return rT(n.flat(1).filter(Z8).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function l_(e,r,t,n,a,s){let c=(x,f)=>t[f]?x.route.id!==t[f].route.id:!0,d=(x,f)=>t[f].pathname!==x.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==x.params["*"];return s==="assets"?r.filter((x,f)=>c(x,f)||d(x,f)):s==="data"?r.filter((x,f)=>{let g=n.routes[x.route.id];if(!g||!g.hasLoader)return!1;if(c(x,f)||d(x,f))return!0;if(x.route.shouldRevalidate){let v=x.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Q8(e,r,{includeHydrateFallback:t}={}){return eT(e.map(n=>{let a=r.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function eT(e){return[...new Set(e)]}function tT(e){let r={},t=Object.keys(e).sort();for(let n of t)r[n]=e[n];return r}function rT(e,r){let t=new Set;return new Set(r),e.reduce((n,a)=>{let s=JSON.stringify(tT(a));return t.has(s)||(t.add(s),n.push({key:s,link:a})),n},[])}function pk(){let e=J.useContext(Q0);return B2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nT(){let e=J.useContext(Cx);return B2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var P2=J.createContext(void 0);P2.displayName="FrameworkContext";function bk(){let e=J.useContext(P2);return B2(e,"You must render this element inside a <HydratedRouter> element"),e}function aT(e,r){let t=J.useContext(P2),[n,a]=J.useState(!1),[s,c]=J.useState(!1),{onFocus:d,onBlur:x,onMouseEnter:f,onMouseLeave:g,onTouchStart:v}=r,w=J.useRef(null);J.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let S=j=>{j.forEach(D=>{c(D.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return w.current&&T.observe(w.current),()=>{T.disconnect()}}},[e]),J.useEffect(()=>{if(n){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[n]);let E=()=>{a(!0)},N=()=>{a(!1),c(!1)};return t?e!=="intent"?[s,w,{}]:[s,w,{onFocus:td(d,E),onBlur:td(x,N),onMouseEnter:td(f,E),onMouseLeave:td(g,N),onTouchStart:td(v,E)}]:[!1,w,{}]}function td(e,r){return t=>{e&&e(t),t.defaultPrevented||r(t)}}function sT({page:e,...r}){let{router:t}=pk(),n=J.useMemo(()=>rk(t.routes,e,t.basename),[t.routes,e,t.basename]);return n?J.createElement(lT,{page:e,matches:n,...r}):null}function iT(e){let{manifest:r,routeModules:t}=bk(),[n,a]=J.useState([]);return J.useEffect(()=>{let s=!1;return J8(e,r,t).then(c=>{s||a(c)}),()=>{s=!0}},[e,r,t]),n}function lT({page:e,matches:r,...t}){let n=Vi(),{future:a,manifest:s,routeModules:c}=bk(),{basename:d}=pk(),{loaderData:x,matches:f}=nT(),g=J.useMemo(()=>l_(e,r,f,s,n,"data"),[e,r,f,s,n]),v=J.useMemo(()=>l_(e,r,f,s,n,"assets"),[e,r,f,s,n]),w=J.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let S=new Set,T=!1;if(r.forEach(D=>{let I=s.routes[D.route.id];!I||!I.hasLoader||(!g.some(L=>L.route.id===D.route.id)&&D.route.id in x&&c[D.route.id]?.shouldRevalidate||I.hasClientLoader?T=!0:S.add(D.route.id))}),S.size===0)return[];let j=Y8(e,d,a.unstable_trailingSlashAwareDataRequests,"data");return T&&S.size>0&&j.searchParams.set("_routes",r.filter(D=>S.has(D.route.id)).map(D=>D.route.id).join(",")),[j.pathname+j.search]},[d,a.unstable_trailingSlashAwareDataRequests,x,n,s,g,r,e,c]),E=J.useMemo(()=>Q8(v,s),[v,s]),N=iT(v);return J.createElement(J.Fragment,null,w.map(S=>J.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),E.map(S=>J.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),N.map(({key:S,link:T})=>J.createElement("link",{key:S,nonce:t.nonce,...T})))}function oT(...e){return r=>{e.forEach(t=>{typeof t=="function"?t(r):t!=null&&(t.current=r)})}}var cT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cT&&(window.__reactRouterVersion="7.12.0")}catch{}function uT({basename:e,children:r,unstable_useTransitions:t,window:n}){let a=J.useRef();a.current==null&&(a.current=G6({window:n,v5Compat:!0}));let s=a.current,[c,d]=J.useState({action:s.action,location:s.location}),x=J.useCallback(f=>{t===!1?d(f):J.startTransition(()=>d(f))},[t]);return J.useLayoutEffect(()=>s.listen(x),[s,x]),J.createElement(P8,{basename:e,children:r,location:c.location,navigationType:c.action,navigator:s,unstable_useTransitions:t})}var vk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hr=J.forwardRef(function({onClick:r,discover:t="render",prefetch:n="none",relative:a,reloadDocument:s,replace:c,state:d,target:x,to:f,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:w,...E},N){let{basename:S,unstable_useTransitions:T}=J.useContext(Fs),j=typeof f=="string"&&vk.test(f),D=lk(f,S);f=D.to;let I=E8(f,{relative:a}),[L,V,X]=aT(n,E),M=xT(f,{replace:c,state:d,target:x,preventScrollReset:g,relative:a,viewTransition:v,unstable_defaultShouldRevalidate:w,unstable_useTransitions:T});function W(ae){r&&r(ae),ae.defaultPrevented||M(ae)}let z=J.createElement("a",{...E,...X,href:D.absoluteURL||I,onClick:D.isExternal||s?r:W,ref:oT(N,V),target:x,"data-discover":!j&&t==="render"?"true":void 0});return L&&!j?J.createElement(J.Fragment,null,z,J.createElement(sT,{page:I})):z});hr.displayName="Link";var dT=J.forwardRef(function({"aria-current":r="page",caseSensitive:t=!1,className:n="",end:a=!1,style:s,to:c,viewTransition:d,children:x,...f},g){let v=of(c,{relative:f.relative}),w=Vi(),E=J.useContext(Cx),{navigator:N,basename:S}=J.useContext(Fs),T=E!=null&&vT(v)&&d===!0,j=N.encodeLocation?N.encodeLocation(v).pathname:v.pathname,D=w.pathname,I=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(D=D.toLowerCase(),I=I?I.toLowerCase():null,j=j.toLowerCase()),I&&S&&(I=Tl(I,S)||I);const L=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let V=D===j||!a&&D.startsWith(j)&&D.charAt(L)==="/",X=I!=null&&(I===j||!a&&I.startsWith(j)&&I.charAt(j.length)==="/"),M={isActive:V,isPending:X,isTransitioning:T},W=V?r:void 0,z;typeof n=="function"?z=n(M):z=[n,V?"active":null,X?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let ae=typeof s=="function"?s(M):s;return J.createElement(hr,{...f,"aria-current":W,className:z,ref:g,style:ae,to:c,viewTransition:d},typeof x=="function"?x(M):x)});dT.displayName="NavLink";var fT=J.forwardRef(({discover:e="render",fetcherKey:r,navigate:t,reloadDocument:n,replace:a,state:s,method:c=Z1,action:d,onSubmit:x,relative:f,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:w,...E},N)=>{let{unstable_useTransitions:S}=J.useContext(Fs),T=pT(),j=bT(d,{relative:f}),D=c.toLowerCase()==="get"?"get":"post",I=typeof d=="string"&&vk.test(d),L=V=>{if(x&&x(V),V.defaultPrevented)return;V.preventDefault();let X=V.nativeEvent.submitter,M=X?.getAttribute("formmethod")||c,W=()=>T(X||V.currentTarget,{fetcherKey:r,method:M,navigate:t,replace:a,state:s,relative:f,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:w});S&&t!==!1?J.startTransition(()=>W()):W()};return J.createElement("form",{ref:N,method:D,action:j,onSubmit:n?x:L,...E,"data-discover":!I&&e==="render"?"true":void 0})});fT.displayName="Form";function hT(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yk(e){let r=J.useContext(Q0);return Rn(r,hT(e)),r}function xT(e,{target:r,replace:t,state:n,preventScrollReset:a,relative:s,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:x}={}){let f=tu(),g=Vi(),v=of(e,{relative:s});return J.useCallback(w=>{if(W8(w,r)){w.preventDefault();let E=t!==void 0?t:Od(g)===Od(v),N=()=>f(e,{replace:E,state:n,preventScrollReset:a,relative:s,viewTransition:c,unstable_defaultShouldRevalidate:d});x?J.startTransition(()=>N()):N()}},[g,f,v,t,n,r,e,a,s,c,d,x])}var mT=0,gT=()=>`__${String(++mT)}__`;function pT(){let{router:e}=yk("useSubmit"),{basename:r}=J.useContext(Fs),t=M8(),n=e.fetch,a=e.navigate;return J.useCallback(async(s,c={})=>{let{action:d,method:x,encType:f,formData:g,body:v}=K8(s,r);if(c.navigate===!1){let w=c.fetcherKey||gT();await n(w,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:v,formMethod:c.method||x,formEncType:c.encType||f,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:v,formMethod:c.method||x,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,a,r,t])}function bT(e,{relative:r}={}){let{basename:t}=J.useContext(Fs),n=J.useContext(ki);Rn(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...of(e||".",{relative:r})},c=Vi();if(e==null){s.search=c.search;let d=new URLSearchParams(s.search),x=d.getAll("index");if(x.some(g=>g==="")){d.delete("index"),x.filter(v=>v).forEach(v=>d.append("index",v));let g=d.toString();s.search=g?`?${g}`:""}}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:El([t,s.pathname])),Od(s)}function vT(e,{relative:r}={}){let t=J.useContext(ck);Rn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=yk("useViewTransitionState"),a=of(e,{relative:r});if(!t.isTransitioning)return!1;let s=Tl(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=Tl(t.nextLocation.pathname,n)||t.nextLocation.pathname;return sx(a.pathname,c)!=null||sx(a.pathname,s)!=null}function Ox(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t}function yT(e,r,t,n){function a(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function d(g){try{f(n.next(g))}catch(v){c(v)}}function x(g){try{f(n.throw(g))}catch(v){c(v)}}function f(g){g.done?s(g.value):a(g.value).then(d,x)}f((n=n.apply(e,r||[])).next())})}const wT=e=>e?(...r)=>e(...r):(...r)=>fetch(...r);class U2 extends Error{constructor(r,t="FunctionsError",n){super(r),this.name=t,this.context=n}}class _T extends U2{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class o_ extends U2{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class c_ extends U2{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Xp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Xp||(Xp={}));class ET{constructor(r,{headers:t={},customFetch:n,region:a=Xp.Any}={}){this.url=r,this.headers=t,this.region=a,this.fetch=wT(n)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return yT(this,arguments,void 0,function*(t,n={}){var a;let s,c;try{const{headers:d,method:x,body:f,signal:g,timeout:v}=n;let w={},{region:E}=n;E||(E=this.region);const N=new URL(`${this.url}/${t}`);E&&E!=="any"&&(w["x-region"]=E,N.searchParams.set("forceFunctionRegion",E));let S;f&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",S=f):typeof f=="string"?(w["Content-Type"]="text/plain",S=f):typeof FormData<"u"&&f instanceof FormData?S=f:(w["Content-Type"]="application/json",S=JSON.stringify(f)):f&&typeof f!="string"&&!(typeof Blob<"u"&&f instanceof Blob)&&!(f instanceof ArrayBuffer)&&!(typeof FormData<"u"&&f instanceof FormData)?S=JSON.stringify(f):S=f;let T=g;v&&(c=new AbortController,s=setTimeout(()=>c.abort(),v),g?(T=c.signal,g.addEventListener("abort",()=>c.abort())):T=c.signal);const j=yield this.fetch(N.toString(),{method:x||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),d),body:S,signal:T}).catch(V=>{throw new _T(V)}),D=j.headers.get("x-relay-error");if(D&&D==="true")throw new o_(j);if(!j.ok)throw new c_(j);let I=((a=j.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),L;return I==="application/json"?L=yield j.json():I==="application/octet-stream"||I==="application/pdf"?L=yield j.blob():I==="text/event-stream"?L=j:I==="multipart/form-data"?L=yield j.formData():L=yield j.text(),{data:L,error:null,response:j}}catch(d){return{data:null,error:d,response:d instanceof c_||d instanceof o_?d.context:void 0}}finally{s&&clearTimeout(s)}})}}var kT=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ST=class{constructor(e){var r,t;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(t=e.isMaybeSingle)!==null&&t!==void 0?t:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let c=null,d=null,x=null,f=s.status,g=s.statusText;if(s.ok){var v,w;if(t.method!=="HEAD"){var E;const j=await s.text();j===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((E=t.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?d=j:d=JSON.parse(j))}const S=(v=t.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),T=(w=s.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");S&&T&&T.length>1&&(x=parseInt(T[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,x=null,f=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var N;const S=await s.text();try{c=JSON.parse(S),Array.isArray(c)&&s.status===404&&(d=[],c=null,f=200,g="OK")}catch{s.status===404&&S===""?(f=204,g="No Content"):c={message:S}}if(c&&t.isMaybeSingle&&(!(c==null||(N=c.details)===null||N===void 0)&&N.includes("0 rows"))&&(c=null,f=200,g="OK"),c&&t.shouldThrowOnError)throw new kT(c)}return{error:c,data:d,count:x,status:f,statusText:g}});return this.shouldThrowOnError||(a=a.catch(s=>{var c;let d="";const x=s?.cause;if(x){var f,g,v,w;const N=(f=x?.message)!==null&&f!==void 0?f:"",S=(g=x?.code)!==null&&g!==void 0?g:"";d=`${(v=s?.name)!==null&&v!==void 0?v:"FetchError"}: ${s?.message}`,d+=`

Caused by: ${(w=x?.name)!==null&&w!==void 0?w:"Error"}: ${N}`,S&&(d+=` (${S})`),x?.stack&&(d+=`
${x.stack}`)}else{var E;d=(E=s?.stack)!==null&&E!==void 0?E:""}return{error:{message:`${(c=s?.name)!==null&&c!==void 0?c:"FetchError"}: ${s?.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,r)}returns(){return this}overrideTypes(){return this}},NT=class extends ST{select(e){let r=!1;const t=(e??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:t,foreignTable:n,referencedTable:a=n}={}){const s=a?`${a}.order`:"order",c=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${c?`${c},`:""}${e}.${r?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:t=r}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,r,{foreignTable:t,referencedTable:n=t}={}){const a=typeof n>"u"?"offset":`${n}.offset`,s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(s,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:t=!1,buffers:n=!1,wal:a=!1,format:s="text"}={}){var c;const d=[e?"analyze":null,r?"verbose":null,t?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),x=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${x}"; options=${d};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const u_=new RegExp("[,()]");var I0=class extends NT{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}regexMatch(e,r){return this.url.searchParams.append(e,`match.${r}`),this}regexIMatch(e,r){return this.url.searchParams.append(e,`imatch.${r}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}isDistinct(e,r){return this.url.searchParams.append(e,`isdistinct.${r}`),this}in(e,r){const t=Array.from(new Set(r)).map(n=>typeof n=="string"&&u_.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${t})`),this}notIn(e,r){const t=Array.from(new Set(r)).map(n=>typeof n=="string"&&u_.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${t})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:t,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const s=t===void 0?"":`(${t})`;return this.url.searchParams.append(e,`${a}fts${s}.${r}`),this}match(e){return Object.entries(e).forEach(([r,t])=>{this.url.searchParams.append(r,`eq.${t}`)}),this}not(e,r,t){return this.url.searchParams.append(e,`not.${r}.${t}`),this}or(e,{foreignTable:r,referencedTable:t=r}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,r,t){return this.url.searchParams.append(e,`${r}.${t}`),this}},AT=class{constructor(e,{headers:r={},schema:t,fetch:n}){this.url=e,this.headers=new Headers(r),this.schema=t,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,r){const{head:t=!1,count:n}=r??{},a=t?"HEAD":"GET";let s=!1;const c=(e??"*").split("").map(f=>/\s/.test(f)&&!s?"":(f==='"'&&(s=!s),f)).join(""),{url:d,headers:x}=this.cloneRequestState();return d.searchParams.set("select",c),n&&x.append("Prefer",`count=${n}`),new I0({method:a,url:d,headers:x,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:t=!0}={}){var n;const a="POST",{url:s,headers:c}=this.cloneRequestState();if(r&&c.append("Prefer",`count=${r}`),t||c.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((x,f)=>x.concat(Object.keys(f)),[]);if(d.length>0){const x=[...new Set(d)].map(f=>`"${f}"`);s.searchParams.set("columns",x.join(","))}}return new I0({method:a,url:s,headers:c,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:t=!1,count:n,defaultToNull:a=!0}={}){var s;const c="POST",{url:d,headers:x}=this.cloneRequestState();if(x.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),r!==void 0&&d.searchParams.set("on_conflict",r),n&&x.append("Prefer",`count=${n}`),a||x.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(f.length>0){const g=[...new Set(f)].map(v=>`"${v}"`);d.searchParams.set("columns",g.join(","))}}return new I0({method:c,url:d,headers:x,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(e,{count:r}={}){var t;const n="PATCH",{url:a,headers:s}=this.cloneRequestState();return r&&s.append("Prefer",`count=${r}`),new I0({method:n,url:a,headers:s,schema:this.schema,body:e,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:e}={}){var r;const t="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new I0({method:t,url:n,headers:a,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},TT=class wk{constructor(r,{headers:t={},schema:n,fetch:a}={}){this.url=r,this.headers=new Headers(t),this.schemaName=n,this.fetch=a}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new AT(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new wk(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,t={},{head:n=!1,get:a=!1,count:s}={}){var c;let d;const x=new URL(`${this.url}/rpc/${r}`);let f;const g=E=>E!==null&&typeof E=="object"&&(!Array.isArray(E)||E.some(g)),v=n&&Object.values(t).some(g);v?(d="POST",f=t):n||a?(d=n?"HEAD":"GET",Object.entries(t).filter(([E,N])=>N!==void 0).map(([E,N])=>[E,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([E,N])=>{x.searchParams.append(E,N)})):(d="POST",f=t);const w=new Headers(this.headers);return v?w.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&w.set("Prefer",`count=${s}`),new I0({method:d,url:x,headers:w,schema:this.schemaName,body:f,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class CT{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const n=t.versions;if(n&&n.node){const a=n.node,s=parseInt(a.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let t=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(t+=`

Suggested solution: ${r.workaround}`),new Error(t)}static createWebSocket(r,t){const n=this.getWebSocketConstructor();return new n(r,t)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const jT="2.90.1",OT=`realtime-js/${jT}`,_k="1.0.0",RT="2.0.0",d_=_k,Kp=1e4,IT=1e3,DT=100;var go;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(go||(go={}));var fa;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(fa||(fa={}));var bi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(bi||(bi={}));var Yp;(function(e){e.websocket="websocket"})(Yp||(Yp={}));var ic;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ic||(ic={}));class MT{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,t){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(r));let n=[r.join_ref,r.ref,r.topic,r.event,r.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(r){var t;return this._isArrayBuffer((t=r.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var t,n;const a=(n=(t=r.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(r){var t,n;const a=(n=(t=r.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(r,t,n){var a,s;const c=r.topic,d=(a=r.ref)!==null&&a!==void 0?a:"",x=(s=r.join_ref)!==null&&s!==void 0?s:"",f=r.payload.event,g=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},v=Object.keys(g).length===0?"":JSON.stringify(g);if(x.length>255)throw new Error(`joinRef length ${x.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+x.length+d.length+c.length+f.length+v.length,E=new ArrayBuffer(this.HEADER_LENGTH+w);let N=new DataView(E),S=0;N.setUint8(S++,this.KINDS.userBroadcastPush),N.setUint8(S++,x.length),N.setUint8(S++,d.length),N.setUint8(S++,c.length),N.setUint8(S++,f.length),N.setUint8(S++,v.length),N.setUint8(S++,t),Array.from(x,j=>N.setUint8(S++,j.charCodeAt(0))),Array.from(d,j=>N.setUint8(S++,j.charCodeAt(0))),Array.from(c,j=>N.setUint8(S++,j.charCodeAt(0))),Array.from(f,j=>N.setUint8(S++,j.charCodeAt(0))),Array.from(v,j=>N.setUint8(S++,j.charCodeAt(0)));var T=new Uint8Array(E.byteLength+n.byteLength);return T.set(new Uint8Array(E),0),T.set(new Uint8Array(n),E.byteLength),T.buffer}decode(r,t){if(this._isArrayBuffer(r)){let n=this._binaryDecode(r);return t(n)}if(typeof r=="string"){const n=JSON.parse(r),[a,s,c,d,x]=n;return t({join_ref:a,ref:s,topic:c,event:d,payload:x})}return t({})}_binaryDecode(r){const t=new DataView(r),n=t.getUint8(0),a=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(r,t,a)}_decodeUserBroadcast(r,t,n){const a=t.getUint8(1),s=t.getUint8(2),c=t.getUint8(3),d=t.getUint8(4);let x=this.HEADER_LENGTH+4;const f=n.decode(r.slice(x,x+a));x=x+a;const g=n.decode(r.slice(x,x+s));x=x+s;const v=n.decode(r.slice(x,x+c));x=x+c;const w=r.slice(x,r.byteLength),E=d===this.JSON_ENCODING?JSON.parse(n.decode(w)):w,N={type:this.BROADCAST_EVENT,event:g,payload:E};return c>0&&(N.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(r){var t;return r instanceof ArrayBuffer||((t=r?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(r,t){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([n])=>t.includes(n)))}}class Ek{constructor(r,t){this.callback=r,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(gn||(gn={}));const f_=(e,r,t={})=>{var n;const a=(n=t.skipTypes)!==null&&n!==void 0?n:[];return r?Object.keys(r).reduce((s,c)=>(s[c]=FT(c,e,r,a),s),{}):{}},FT=(e,r,t,n)=>{const a=r.find(d=>d.name===e),s=a?.type,c=t[e];return s&&!n.includes(s)?kk(s,c):$p(c)},kk=(e,r)=>{if(e.charAt(0)==="_"){const t=e.slice(1,e.length);return UT(r,t)}switch(e){case gn.bool:return LT(r);case gn.float4:case gn.float8:case gn.int2:case gn.int4:case gn.int8:case gn.numeric:case gn.oid:return BT(r);case gn.json:case gn.jsonb:return PT(r);case gn.timestamp:return zT(r);case gn.abstime:case gn.date:case gn.daterange:case gn.int4range:case gn.int8range:case gn.money:case gn.reltime:case gn.text:case gn.time:case gn.timestamptz:case gn.timetz:case gn.tsrange:case gn.tstzrange:return $p(r);default:return $p(r)}},$p=e=>e,LT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},BT=e=>{if(typeof e=="string"){const r=parseFloat(e);if(!Number.isNaN(r))return r}return e},PT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},UT=(e,r)=>{if(typeof e!="string")return e;const t=e.length-1,n=e[t];if(e[0]==="{"&&n==="}"){let s;const c=e.slice(1,t);try{s=JSON.parse("["+c+"]")}catch{s=c?c.split(","):[]}return s.map(d=>kk(r,d))}return e},zT=e=>typeof e=="string"?e.replace(" ","T"):e,Sk=e=>{const r=new URL(e);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class rp{constructor(r,t,n={},a=Kp){this.channel=r,this.event=t,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,t){var n;return this._hasReceived(r)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:r,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:t}){this.recHooks.filter(n=>n.status===r).forEach(n=>n.callback(t))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var h_;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(h_||(h_={}));class bd{constructor(r,t){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:s,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bd.syncState(this.state,a,s,c),this.pendingDiffs.forEach(x=>{this.state=bd.syncDiff(this.state,x,s,c)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},a=>{const{onJoin:s,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=bd.syncDiff(this.state,a,s,c),d())}),this.onJoin((a,s,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:c})}),this.onLeave((a,s,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,t,n,a){const s=this.cloneDeep(r),c=this.transformState(t),d={},x={};return this.map(s,(f,g)=>{c[f]||(x[f]=g)}),this.map(c,(f,g)=>{const v=s[f];if(v){const w=g.map(T=>T.presence_ref),E=v.map(T=>T.presence_ref),N=g.filter(T=>E.indexOf(T.presence_ref)<0),S=v.filter(T=>w.indexOf(T.presence_ref)<0);N.length>0&&(d[f]=N),S.length>0&&(x[f]=S)}else d[f]=g}),this.syncDiff(s,{joins:d,leaves:x},n,a)}static syncDiff(r,t,n,a){const{joins:s,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(s,(d,x)=>{var f;const g=(f=r[d])!==null&&f!==void 0?f:[];if(r[d]=this.cloneDeep(x),g.length>0){const v=r[d].map(E=>E.presence_ref),w=g.filter(E=>v.indexOf(E.presence_ref)<0);r[d].unshift(...w)}n(d,g,x)}),this.map(c,(d,x)=>{let f=r[d];if(!f)return;const g=x.map(v=>v.presence_ref);f=f.filter(v=>g.indexOf(v.presence_ref)<0),r[d]=f,a(d,f,x),f.length===0&&delete r[d]}),r}static map(r,t){return Object.getOwnPropertyNames(r).map(n=>t(n,r[n]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((t,n)=>{const a=r[n];return"metas"in a?t[n]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[n]=a,t},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var x_;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(x_||(x_={}));var vd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vd||(vd={}));var vl;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(vl||(vl={}));class L0{constructor(r,t={config:{}},n){var a,s;if(this.topic=r,this.params=t,this.socket=n,this.bindings={},this.state=fa.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new rp(this,bi.join,this.params,this.timeout),this.rejoinTimer=new Ek(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fa.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fa.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=fa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=fa.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bi.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new bd(this),this.broadcastEndpointURL=Sk(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,t=this.timeout){var n,a,s;if(this.socket.isConnected()||this.socket.connect(),this.state==fa.closed){const{config:{broadcast:c,presence:d,private:x}}=this.params,f=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(E=>E.filter))!==null&&a!==void 0?a:[],g=!!this.bindings[vd.PRESENCE]&&this.bindings[vd.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,v={},w={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:f,private:x};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(E=>r?.(vl.CHANNEL_ERROR,E)),this._onClose(()=>r?.(vl.CLOSED)),this.updateJoinPayload(Object.assign({config:w},v)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:E})=>{var N;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){r?.(vl.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,T=(N=S?.length)!==null&&N!==void 0?N:0,j=[];for(let D=0;D<T;D++){const I=S[D],{filter:{event:L,schema:V,table:X,filter:M}}=I,W=E&&E[D];if(W&&W.event===L&&L0.isFilterValueEqual(W.schema,V)&&L0.isFilterValueEqual(W.table,X)&&L0.isFilterValueEqual(W.filter,M))j.push(Object.assign(Object.assign({},I),{id:W.id}));else{this.unsubscribe(),this.state=fa.errored,r?.(vl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,r&&r(vl.SUBSCRIBED);return}}).receive("error",E=>{this.state=fa.errored,r?.(vl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{r?.(vl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,t={}){return await this.send({type:"presence",event:"track",payload:r},t.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,t,n){return this.state===fa.joined&&r===vd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,t,n)}async httpSend(r,t,n={}){var a;if(t==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:t,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let x=d.statusText;try{const f=await d.json();x=f.error||f.message||x}catch{}return Promise.reject(new Error(x))}async send(r,t={}){var n,a;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:c}=r,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const x={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:c,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var c,d,x;const f=this._push(r.type,r,t.timeout||this.timeout);r.type==="broadcast"&&!(!((x=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||x===void 0)&&x.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=fa.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new rp(this,bi.leave,{},r),n.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=fa.closed,this.bindings={}}async _fetchWithTimeout(r,t,n){const a=new AbortController,s=setTimeout(()=>a.abort(),n),c=await this.socket.fetch(r,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(s),c}_push(r,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new rp(this,r,t,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>DT){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(r,t,n){return t}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,t,n){var a,s;const c=r.toLocaleLowerCase(),{close:d,error:x,leave:f,join:g}=bi;if(n&&[d,x,f,g].indexOf(c)>=0&&n!==this._joinRef())return;let w=this._onMessage(c,t,n);if(t&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(E=>{var N,S,T;return((N=E.filter)===null||N===void 0?void 0:N.event)==="*"||((T=(S=E.filter)===null||S===void 0?void 0:S.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===c}).map(E=>E.callback(w,n)):(s=this.bindings[c])===null||s===void 0||s.filter(E=>{var N,S,T,j,D,I,L,V;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in E){const X=E.id,M=(N=E.filter)===null||N===void 0?void 0:N.event;return X&&((S=t.ids)===null||S===void 0?void 0:S.includes(X))&&(M==="*"||M?.toLocaleLowerCase()===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))&&(!(!((j=E.filter)===null||j===void 0)&&j.table)||E.filter.table===((D=t.data)===null||D===void 0?void 0:D.table))}else{const X=(L=(I=E?.filter)===null||I===void 0?void 0:I.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return X==="*"||X===((V=t?.event)===null||V===void 0?void 0:V.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===c}).map(E=>{if(typeof w=="object"&&"ids"in w){const N=w.data,{schema:S,table:T,commit_timestamp:j,type:D,errors:I}=N;w=Object.assign(Object.assign({},{schema:S,table:T,commit_timestamp:j,eventType:D,new:{},old:{},errors:I}),this._getPayloadRecords(N))}E.callback(w,n)})}_isClosed(){return this.state===fa.closed}_isJoined(){return this.state===fa.joined}_isJoining(){return this.state===fa.joining}_isLeaving(){return this.state===fa.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,t,n){const a=r.toLocaleLowerCase(),s={type:a,filter:t,callback:n};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(r,t){const n=r.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&L0.isEqual(a.filter,t))})),this}static isEqual(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const n in r)if(r[n]!==t[n])return!1;return!0}static isFilterValueEqual(r,t){return(r??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(bi.close,{},r)}_onError(r){this._on(bi.error,{},t=>r(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fa.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const t={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(t.new=f_(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(t.old=f_(r.columns,r.old_record)),t}}const np=()=>{},qh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},HT=[1e3,2e3,5e3,1e4],GT=1e4,VT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class WT{constructor(r,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kp,this.transport=null,this.heartbeatIntervalMs=qh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=np,this.ref=0,this.reconnectTimer=null,this.vsn=d_,this.logger=np,this.conn=null,this.sendBuffer=[],this.serializer=new MT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...s)=>a(...s):(...s)=>fetch(...s),!(!((n=t?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${r}/${Yp.websocket}`,this.httpEndpoint=Sk(r),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=CT.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const t=r.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const t=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const r=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,t,n){this.logger(r,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case go.connecting:return ic.Connecting;case go.open:return ic.Open;case go.closing:return ic.Closing;default:return ic.Closed}}isConnected(){return this.connectionState()===ic.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,t={config:{}}){const n=`realtime:${r}`,a=this.getChannels().find(s=>s.topic===n);if(a)return a;{const s=new L0(`realtime:${r}`,t,this);return this.channels.push(s),s}}push(r){const{topic:t,event:n,payload:a,ref:s}=r,c=()=>{this.encode(r,d=>{var x;(x=this.conn)===null||x===void 0||x.send(d)})};this.log("push",`${t} ${n} (${s})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(IT,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},qh.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let t=this.channels.find(n=>n.topic===r&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${r}"`),t.unsubscribe())}_remove(r){this.channels=this.channels.filter(t=>t.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const f=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",f)}catch(g){this.log("error","error in heartbeat callback",g)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:s,ref:c}=t,d=c?`(${c})`:"",x=s.status||"";this.log("receive",`${x} ${n} ${a} ${d}`.trim(),s),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(a,s,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(r){var t;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===go.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===go.open||this.conn.readyState===go.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var t;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(bi.error))}_appendParams(r,t){if(Object.keys(t).length===0)return r;const n=r.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${r}${n}${a}`}_workerObjectUrl(r){let t;if(r)t=r;else{const n=new Blob([VT],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(r,t=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(r=null){let t,n=!1;if(r)t=r,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(a=>{const s={access_token:t,version:OT};t&&a.updateJoinPayload(s),a.joinedOnce&&a._isJoined()&&a._push(bi.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${r}`,t)})}_triggerStateCallbacks(r,t){try{this.stateChangeCallbacks[r].forEach(n=>{try{n(t)}catch(a){this.log("error",`error in ${r} callback`,a)}})}catch(n){this.log("error",`error triggering ${r} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Ek(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var t,n,a,s,c,d,x,f,g,v,w,E;switch(this.transport=(t=r?.transport)!==null&&t!==void 0?t:null,this.timeout=(n=r?.timeout)!==null&&n!==void 0?n:Kp,this.heartbeatIntervalMs=(a=r?.heartbeatIntervalMs)!==null&&a!==void 0?a:qh.HEARTBEAT_INTERVAL,this.worker=(s=r?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(c=r?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=r?.heartbeatCallback)!==null&&d!==void 0?d:np,this.vsn=(x=r?.vsn)!==null&&x!==void 0?x:d_,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=r?.reconnectAfterMs)!==null&&f!==void 0?f:(N=>HT[N-1]||GT),this.vsn){case _k:this.encode=(g=r?.encode)!==null&&g!==void 0?g:((N,S)=>S(JSON.stringify(N))),this.decode=(v=r?.decode)!==null&&v!==void 0?v:((N,S)=>S(JSON.parse(N)));break;case RT:this.encode=(w=r?.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(E=r?.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var Rd=class extends Error{constructor(e,r){super(e),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function qT(e,r,t){const n=new URL(r,e);if(t)for(const[a,s]of Object.entries(t))s!==void 0&&n.searchParams.set(a,s);return n.toString()}async function XT(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function KT(e){const r=e.fetchImpl??globalThis.fetch;return{async request({method:t,path:n,query:a,body:s,headers:c}){const d=qT(e.baseUrl,n,a),x=await XT(e.auth),f=await r(d,{method:t,headers:{...s?{"Content-Type":"application/json"}:{},...x,...c},body:s?JSON.stringify(s):void 0}),g=await f.text(),v=(f.headers.get("content-type")||"").includes("application/json"),w=v&&g?JSON.parse(g):g;if(!f.ok){const E=v?w:void 0,N=E?.error;throw new Rd(N?.message??`Request failed with status ${f.status}`,{status:f.status,icebergType:N?.type,icebergCode:N?.code,details:E})}return{status:f.status,headers:f.headers,data:w}}}}function Xh(e){return e.join("")}var YT=class{constructor(e,r=""){this.client=e,this.prefix=r}async listNamespaces(e){const r=e?{parent:Xh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,r){const t={namespace:e.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xh(e.namespace)}`}),!0}catch(r){if(r instanceof Rd&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(e,r){try{return await this.createNamespace(e,r)}catch(t){if(t instanceof Rd&&t.status===409)return;throw t}}};function v0(e){return e.join("")}var $T=class{constructor(e,r="",t){this.client=e,this.prefix=r,this.accessDelegation=t}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${v0(e.namespace)}/tables`})).data.identifiers}async createTable(e,r){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${v0(e.namespace)}/tables`,body:r,headers:t})).data.metadata}async updateTable(e,r){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${v0(e.namespace)}/tables/${e.name}`,body:r});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(e,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${v0(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${v0(e.namespace)}/tables/${e.name}`,headers:r})).data.metadata}async tableExists(e){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${v0(e.namespace)}/tables/${e.name}`,headers:r}),!0}catch(t){if(t instanceof Rd&&t.status===404)return!1;throw t}}async createTableIfNotExists(e,r){try{return await this.createTable(e,r)}catch(t){if(t instanceof Rd&&t.status===409)return await this.loadTable({namespace:e.namespace,name:r.name});throw t}}},ZT=class{constructor(e){let r="v1";e.catalogName&&(r+=`/${e.catalogName}`);const t=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=KT({baseUrl:t,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new YT(this.client,r),this.tableOps=new $T(this.client,r,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,r){return this.namespaceOps.createNamespace(e,r)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,r){return this.tableOps.createTable(e,r)}async updateTable(e,r){return this.tableOps.updateTable(e,r)}async dropTable(e,r){await this.tableOps.dropTable(e,r)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,r){return this.namespaceOps.createNamespaceIfNotExists(e,r)}async createTableIfNotExists(e,r){return this.tableOps.createTableIfNotExists(e,r)}},Rx=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function In(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var JT=class extends Rx{constructor(e,r,t){super(e),this.name="StorageApiError",this.status=r,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Zp=class extends Rx{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}};const z2=e=>e?(...r)=>e(...r):(...r)=>fetch(...r),QT=()=>Response,Jp=e=>{if(Array.isArray(e))return e.map(t=>Jp(t));if(typeof e=="function"||e!==Object(e))return e;const r={};return Object.entries(e).forEach(([t,n])=>{const a=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));r[a]=Jp(n)}),r},eC=e=>{if(typeof e!="object"||e===null)return!1;const r=Object.getPrototypeOf(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},tC=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Id(e){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Id(e)}function rC(e,r){if(Id(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(Id(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function nC(e){var r=rC(e,"string");return Id(r)=="symbol"?r:r+""}function aC(e,r,t){return(r=nC(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function m_(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function rr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?m_(Object(t),!0).forEach(function(n){aC(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}const ap=e=>{var r;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(r=e.error)===null||r===void 0?void 0:r.message)||JSON.stringify(e)},sC=async(e,r,t)=>{e instanceof await QT()&&!t?.noResolveJson?e.json().then(n=>{const a=e.status||500,s=n?.statusCode||a+"";r(new JT(ap(n),a,s))}).catch(n=>{r(new Zp(ap(n),n))}):r(new Zp(ap(e),e))},iC=(e,r,t,n)=>{const a={method:e,headers:r?.headers||{}};return e==="GET"||!n?a:(eC(n)?(a.headers=rr({"Content-Type":"application/json"},r?.headers),a.body=JSON.stringify(n)):a.body=n,r?.duplex&&(a.duplex=r.duplex),rr(rr({},a),t))};async function cf(e,r,t,n,a,s){return new Promise((c,d)=>{e(t,iC(r,n,a,s)).then(x=>{if(!x.ok)throw x;return n?.noResolveJson?x:x.json()}).then(x=>c(x)).catch(x=>sC(x,d,n))})}async function Dd(e,r,t,n){return cf(e,"GET",r,t,n)}async function pi(e,r,t,n,a){return cf(e,"POST",r,n,a,t)}async function Qp(e,r,t,n,a){return cf(e,"PUT",r,n,a,t)}async function lC(e,r,t,n){return cf(e,"HEAD",r,rr(rr({},t),{},{noResolveJson:!0}),n)}async function H2(e,r,t,n,a){return cf(e,"DELETE",r,n,a,t)}var oC=class{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(In(r))return{data:null,error:r};throw r}}};let Nk;Nk=Symbol.toStringTag;var cC=class{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[Nk]="BlobDownloadBuilder",this.promise=null}asStream(){return new oC(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(In(r))return{data:null,error:r};throw r}}};const uC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},g_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var dC=class{constructor(e,r={},t,n){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=t,this.fetch=z2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,r,t,n){var a=this;try{let s;const c=rr(rr({},g_),n);let d=rr(rr({},a.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const x=c.metadata;typeof Blob<"u"&&t instanceof Blob?(s=new FormData,s.append("cacheControl",c.cacheControl),x&&s.append("metadata",a.encodeMetadata(x)),s.append("",t)):typeof FormData<"u"&&t instanceof FormData?(s=t,s.has("cacheControl")||s.append("cacheControl",c.cacheControl),x&&!s.has("metadata")&&s.append("metadata",a.encodeMetadata(x))):(s=t,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,x&&(d["x-metadata"]=a.toBase64(a.encodeMetadata(x))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!c.duplex&&(c.duplex="half")),n?.headers&&(d=rr(rr({},d),n.headers));const f=a._removeEmptyFolders(r),g=a._getFinalPath(f),v=await(e=="PUT"?Qp:pi)(a.fetch,`${a.url}/object/${g}`,s,rr({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:f,id:v.Id,fullPath:v.Key},error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(In(s))return{data:null,error:s};throw s}}async upload(e,r,t){return this.uploadOrUpdate("POST",e,r,t)}async uploadToSignedUrl(e,r,t,n){var a=this;const s=a._removeEmptyFolders(e),c=a._getFinalPath(s),d=new URL(a.url+`/object/upload/sign/${c}`);d.searchParams.set("token",r);try{let x;const f=rr({upsert:g_.upsert},n),g=rr(rr({},a.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&t instanceof Blob?(x=new FormData,x.append("cacheControl",f.cacheControl),x.append("",t)):typeof FormData<"u"&&t instanceof FormData?(x=t,x.append("cacheControl",f.cacheControl)):(x=t,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType),{data:{path:s,fullPath:(await Qp(a.fetch,d.toString(),x,{headers:g})).Key},error:null}}catch(x){if(a.shouldThrowOnError)throw x;if(In(x))return{data:null,error:x};throw x}}async createSignedUploadUrl(e,r){var t=this;try{let n=t._getFinalPath(e);const a=rr({},t.headers);r?.upsert&&(a["x-upsert"]="true");const s=await pi(t.fetch,`${t.url}/object/upload/sign/${n}`,{},{headers:a}),c=new URL(t.url+s.url),d=c.searchParams.get("token");if(!d)throw new Rx("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}}async update(e,r,t){return this.uploadOrUpdate("PUT",e,r,t)}async move(e,r,t){var n=this;try{return{data:await pi(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:r,destinationBucket:t?.destinationBucket},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(In(a))return{data:null,error:a};throw a}}async copy(e,r,t){var n=this;try{return{data:{path:(await pi(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:r,destinationBucket:t?.destinationBucket},{headers:n.headers})).Key},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(In(a))return{data:null,error:a};throw a}}async createSignedUrl(e,r,t){var n=this;try{let a=n._getFinalPath(e),s=await pi(n.fetch,`${n.url}/object/sign/${a}`,rr({expiresIn:r},t?.transform?{transform:t.transform}:{}),{headers:n.headers});const c=t?.download?`&download=${t.download===!0?"":t.download}`:"";return s={signedUrl:encodeURI(`${n.url}${s.signedURL}${c}`)},{data:s,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(In(a))return{data:null,error:a};throw a}}async createSignedUrls(e,r,t){var n=this;try{const a=await pi(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:r,paths:e},{headers:n.headers}),s=t?.download?`&download=${t.download===!0?"":t.download}`:"";return{data:a.map(c=>rr(rr({},c),{},{signedUrl:c.signedURL?encodeURI(`${n.url}${c.signedURL}${s}`):null})),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(In(a))return{data:null,error:a};throw a}}download(e,r){const t=typeof r?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(r?.transform||{}),a=n?`?${n}`:"",s=this._getFinalPath(e),c=()=>Dd(this.fetch,`${this.url}/${t}/${s}${a}`,{headers:this.headers,noResolveJson:!0});return new cC(c,this.shouldThrowOnError)}async info(e){var r=this;const t=r._getFinalPath(e);try{return{data:Jp(await Dd(r.fetch,`${r.url}/object/info/${t}`,{headers:r.headers})),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}}async exists(e){var r=this;const t=r._getFinalPath(e);try{return await lC(r.fetch,`${r.url}/object/${t}`,{headers:r.headers}),{data:!0,error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(In(n)&&n instanceof Zp){const a=n.originalError;if([400,404].includes(a?.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,r){const t=this._getFinalPath(e),n=[],a=r?.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&n.push(a);const s=typeof r?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(r?.transform||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${t}${d}`)}}}async remove(e){var r=this;try{return{data:await H2(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:e},{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(In(t))return{data:null,error:t};throw t}}async list(e,r,t){var n=this;try{const a=rr(rr(rr({},uC),r),{},{prefix:e||""});return{data:await pi(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},t),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(In(a))return{data:null,error:a};throw a}}async listV2(e,r){var t=this;try{const n=rr({},e);return{data:await pi(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,n,{headers:t.headers},r),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}};const Ak="2.90.1",Tk={"X-Client-Info":`storage-js/${Ak}`};var fC=class{constructor(e,r={},t,n){this.shouldThrowOnError=!1;const a=new URL(e);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=rr(rr({},Tk),r),this.fetch=z2(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var r=this;try{const t=r.listBucketOptionsToQueryString(e);return{data:await Dd(r.fetch,`${r.url}/bucket${t}`,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(In(t))return{data:null,error:t};throw t}}async getBucket(e){var r=this;try{return{data:await Dd(r.fetch,`${r.url}/bucket/${e}`,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(In(t))return{data:null,error:t};throw t}}async createBucket(e,r={public:!1}){var t=this;try{return{data:await pi(t.fetch,`${t.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}}async updateBucket(e,r){var t=this;try{return{data:await Qp(t.fetch,`${t.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}}async emptyBucket(e){var r=this;try{return{data:await pi(r.fetch,`${r.url}/bucket/${e}/empty`,{},{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(In(t))return{data:null,error:t};throw t}}async deleteBucket(e){var r=this;try{return{data:await H2(r.fetch,`${r.url}/bucket/${e}`,{},{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(In(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},hC=class{constructor(e,r={},t){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=rr(rr({},Tk),r),this.fetch=z2(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var r=this;try{return{data:await pi(r.fetch,`${r.url}/bucket`,{name:e},{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(In(t))return{data:null,error:t};throw t}}async listBuckets(e){var r=this;try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const n=t.toString(),a=n?`${r.url}/bucket?${n}`:`${r.url}/bucket`;return{data:await Dd(r.fetch,a,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(In(t))return{data:null,error:t};throw t}}async deleteBucket(e){var r=this;try{return{data:await H2(r.fetch,`${r.url}/bucket/${e}`,{},{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(In(t))return{data:null,error:t};throw t}}from(e){var r=this;if(!tC(e))throw new Rx("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new ZT({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(t,{get(a,s){const c=a[s];return typeof c!="function"?c:async(...d)=>{try{return{data:await c.apply(a,d),error:null}}catch(x){if(n)throw x;return{data:null,error:x}}}}})}};const G2={"X-Client-Info":`storage-js/${Ak}`,"Content-Type":"application/json"};var Ck=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function js(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var sp=class extends Ck{constructor(e,r,t){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},xC=class extends Ck{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}};const V2=e=>e?(...r)=>e(...r):(...r)=>fetch(...r),mC=e=>{if(typeof e!="object"||e===null)return!1;const r=Object.getPrototypeOf(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},p_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gC=async(e,r,t)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!t?.noResolveJson){const n=e.status||500,a=e;if(typeof a.json=="function")a.json().then(s=>{const c=s?.statusCode||s?.code||n+"";r(new sp(p_(s),n,c))}).catch(()=>{const s=n+"";r(new sp(a.statusText||`HTTP ${n} error`,n,s))});else{const s=n+"";r(new sp(a.statusText||`HTTP ${n} error`,n,s))}}else r(new xC(p_(e),e))},pC=(e,r,t,n)=>{const a={method:e,headers:r?.headers||{}};return n?(mC(n)?(a.headers=rr({"Content-Type":"application/json"},r?.headers),a.body=JSON.stringify(n)):a.body=n,rr(rr({},a),t)):a};async function bC(e,r,t,n,a,s){return new Promise((c,d)=>{e(t,pC(r,n,a,s)).then(x=>{if(!x.ok)throw x;if(n?.noResolveJson)return x;const f=x.headers.get("content-type");return!f||!f.includes("application/json")?{}:x.json()}).then(x=>c(x)).catch(x=>gC(x,d,n))})}async function Os(e,r,t,n,a){return bC(e,"POST",r,n,a,t)}var vC=class{constructor(e,r={},t){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=rr(rr({},G2),r),this.fetch=V2(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var r=this;try{return{data:await Os(r.fetch,`${r.url}/CreateIndex`,e,{headers:r.headers})||{},error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async getIndex(e,r){var t=this;try{return{data:await Os(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(js(n))return{data:null,error:n};throw n}}async listIndexes(e){var r=this;try{return{data:await Os(r.fetch,`${r.url}/ListIndexes`,e,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async deleteIndex(e,r){var t=this;try{return{data:await Os(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(js(n))return{data:null,error:n};throw n}}},yC=class{constructor(e,r={},t){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=rr(rr({},G2),r),this.fetch=V2(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var r=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Os(r.fetch,`${r.url}/PutVectors`,e,{headers:r.headers})||{},error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async getVectors(e){var r=this;try{return{data:await Os(r.fetch,`${r.url}/GetVectors`,e,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async listVectors(e){var r=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Os(r.fetch,`${r.url}/ListVectors`,e,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async queryVectors(e){var r=this;try{return{data:await Os(r.fetch,`${r.url}/QueryVectors`,e,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async deleteVectors(e){var r=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Os(r.fetch,`${r.url}/DeleteVectors`,e,{headers:r.headers})||{},error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}},wC=class{constructor(e,r={},t){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=rr(rr({},G2),r),this.fetch=V2(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var r=this;try{return{data:await Os(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:r.headers})||{},error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async getBucket(e){var r=this;try{return{data:await Os(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:e},{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async listBuckets(e={}){var r=this;try{return{data:await Os(r.fetch,`${r.url}/ListVectorBuckets`,e,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async deleteBucket(e){var r=this;try{return{data:await Os(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:r.headers})||{},error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}},_C=class extends wC{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new EC(this.url,this.headers,e,this.fetch)}async createBucket(e){var r=()=>super.createBucket,t=this;return r().call(t,e)}async getBucket(e){var r=()=>super.getBucket,t=this;return r().call(t,e)}async listBuckets(e={}){var r=()=>super.listBuckets,t=this;return r().call(t,e)}async deleteBucket(e){var r=()=>super.deleteBucket,t=this;return r().call(t,e)}},EC=class extends vC{constructor(e,r,t,n){super(e,r,n),this.vectorBucketName=t}async createIndex(e){var r=()=>super.createIndex,t=this;return r().call(t,rr(rr({},e),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(e={}){var r=()=>super.listIndexes,t=this;return r().call(t,rr(rr({},e),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(e){var r=()=>super.getIndex,t=this;return r().call(t,t.vectorBucketName,e)}async deleteIndex(e){var r=()=>super.deleteIndex,t=this;return r().call(t,t.vectorBucketName,e)}index(e){return new kC(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},kC=class extends yC{constructor(e,r,t,n,a){super(e,r,a),this.vectorBucketName=t,this.indexName=n}async putVectors(e){var r=()=>super.putVectors,t=this;return r().call(t,rr(rr({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(e){var r=()=>super.getVectors,t=this;return r().call(t,rr(rr({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(e={}){var r=()=>super.listVectors,t=this;return r().call(t,rr(rr({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(e){var r=()=>super.queryVectors,t=this;return r().call(t,rr(rr({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(e){var r=()=>super.deleteVectors,t=this;return r().call(t,rr(rr({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},SC=class extends fC{constructor(e,r={},t,n){super(e,r,t,n)}from(e){return new dC(this.url,this.headers,e,this.fetch)}get vectors(){return new _C(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new hC(this.url+"/iceberg",this.headers,this.fetch)}};const jk="2.90.1",D0=30*1e3,e2=3,ip=e2*D0,NC="http://localhost:9999",AC="supabase.auth.token",TC={"X-Client-Info":`gotrue-js/${jk}`},t2="X-Supabase-Api-Version",Ok={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},CC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jC=600*1e3;class Md extends Error{constructor(r,t,n){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Wt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class OC extends Md{constructor(r,t,n){super(r,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function RC(e){return Wt(e)&&e.name==="AuthApiError"}class lc extends Md{constructor(r,t){super(r),this.name="AuthUnknownError",this.originalError=t}}class jl extends Md{constructor(r,t,n,a){super(r,n,a),this.name=t,this.status=n}}class Ss extends jl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function IC(e){return Wt(e)&&e.name==="AuthSessionMissingError"}class y0 extends jl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kh extends jl{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Yh extends jl{constructor(r,t=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function DC(e){return Wt(e)&&e.name==="AuthImplicitGrantRedirectError"}class b_ extends jl{constructor(r,t=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class MC extends jl{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class r2 extends jl{constructor(r,t){super(r,"AuthRetryableFetchError",t,void 0)}}function lp(e){return Wt(e)&&e.name==="AuthRetryableFetchError"}class v_ extends jl{constructor(r,t,n){super(r,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class n2 extends jl{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const ix="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),y_=` 	
\r=`.split(""),FC=(()=>{const e=new Array(128);for(let r=0;r<e.length;r+=1)e[r]=-1;for(let r=0;r<y_.length;r+=1)e[y_[r].charCodeAt(0)]=-2;for(let r=0;r<ix.length;r+=1)e[ix[r].charCodeAt(0)]=r;return e})();function w_(e,r,t){if(e!==null)for(r.queue=r.queue<<8|e,r.queuedBits+=8;r.queuedBits>=6;){const n=r.queue>>r.queuedBits-6&63;t(ix[n]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const n=r.queue>>r.queuedBits-6&63;t(ix[n]),r.queuedBits-=6}}function Rk(e,r,t){const n=FC[e];if(n>-1)for(r.queue=r.queue<<6|n,r.queuedBits+=6;r.queuedBits>=8;)t(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function __(e){const r=[],t=c=>{r.push(String.fromCodePoint(c))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=c=>{PC(c,n,t)};for(let c=0;c<e.length;c+=1)Rk(e.charCodeAt(c),a,s);return r.join("")}function LC(e,r){if(e<=127){r(e);return}else if(e<=2047){r(192|e>>6),r(128|e&63);return}else if(e<=65535){r(224|e>>12),r(128|e>>6&63),r(128|e&63);return}else if(e<=1114111){r(240|e>>18),r(128|e>>12&63),r(128|e>>6&63),r(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function BC(e,r){for(let t=0;t<e.length;t+=1){let n=e.charCodeAt(t);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}LC(n,r)}}function PC(e,r,t){if(r.utf8seq===0){if(e<=127){t(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){r.utf8seq=n;break}if(r.utf8seq===2)r.codepoint=e&31;else if(r.utf8seq===3)r.codepoint=e&15;else if(r.utf8seq===4)r.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|e&63,r.utf8seq-=1,r.utf8seq===0&&t(r.codepoint)}}function U0(e){const r=[],t={queue:0,queuedBits:0},n=a=>{r.push(a)};for(let a=0;a<e.length;a+=1)Rk(e.charCodeAt(a),t,n);return new Uint8Array(r)}function UC(e){const r=[];return BC(e,t=>r.push(t)),new Uint8Array(r)}function cc(e){const r=[],t={queue:0,queuedBits:0},n=a=>{r.push(a)};return e.forEach(a=>w_(a,t,n)),w_(null,t,n),r.join("")}function zC(e){return Math.round(Date.now()/1e3)+e}function HC(){return Symbol("auth-callback")}const Ta=()=>typeof window<"u"&&typeof document<"u",tc={tested:!1,writable:!1},Ik=()=>{if(!Ta())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tc.tested)return tc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tc.tested=!0,tc.writable=!0}catch{tc.tested=!0,tc.writable=!1}return tc.writable};function GC(e){const r={},t=new URL(e);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,s)=>{r[s]=a})}catch{}return t.searchParams.forEach((n,a)=>{r[a]=n}),r}const Dk=e=>e?(...r)=>e(...r):(...r)=>fetch(...r),VC=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",M0=async(e,r,t)=>{await e.setItem(r,JSON.stringify(t))},rc=async(e,r)=>{const t=await e.getItem(r);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Aa=async(e,r)=>{await e.removeItem(r)};class Ix{constructor(){this.promise=new Ix.promiseConstructor((r,t)=>{this.resolve=r,this.reject=t})}}Ix.promiseConstructor=Promise;function op(e){const r=e.split(".");if(r.length!==3)throw new n2("Invalid JWT structure");for(let n=0;n<r.length;n++)if(!CC.test(r[n]))throw new n2("JWT not in base64url format");return{header:JSON.parse(__(r[0])),payload:JSON.parse(__(r[1])),signature:U0(r[2]),raw:{header:r[0],payload:r[1]}}}async function WC(e){return await new Promise(r=>{setTimeout(()=>r(null),e)})}function qC(e,r){return new Promise((n,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const c=await e(s);if(!r(s,null,c)){n(c);return}}catch(c){if(!r(s,c)){a(c);return}}})()})}function XC(e){return("0"+e.toString(16)).substr(-2)}function KC(){const r=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let a="";for(let s=0;s<56;s++)a+=t.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(r),Array.from(r,XC).join("")}async function YC(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(n);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function $C(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await YC(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function w0(e,r,t=!1){const n=KC();let a=n;t&&(a+="/PASSWORD_RECOVERY"),await M0(e,`${r}-code-verifier`,a);const s=await $C(n);return[s,n===s?"plain":"s256"]}const ZC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function JC(e){const r=e.headers.get(t2);if(!r||!r.match(ZC))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function QC(e){if(!e)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(e<=r)throw new Error("JWT has expired")}function ej(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _0(e){if(!tj.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function cp(){const e={};return new Proxy(e,{get:(r,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function rj(e,r){return new Proxy(e,{get:(t,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,a)}return!r.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(t,n,a)}})}function E_(e){return JSON.parse(JSON.stringify(e))}const sc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),nj=[502,503,504];async function k_(e){var r;if(!VC(e))throw new r2(sc(e),0);if(nj.includes(e.status))throw new r2(sc(e),e.status);let t;try{t=await e.json()}catch(s){throw new lc(sc(s),s)}let n;const a=JC(e);if(a&&a.getTime()>=Ok["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new v_(sc(t),e.status,((r=t.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(n==="session_not_found")throw new Ss}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,c)=>s&&typeof c=="string",!0))throw new v_(sc(t),e.status,t.weak_password.reasons);throw new OC(sc(t),e.status||500,n)}const aj=(e,r,t,n)=>{const a={method:e,headers:r?.headers||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),t))};async function tr(e,r,t,n){var a;const s=Object.assign({},n?.headers);s[t2]||(s[t2]=Ok["2024-01-01"].name),n?.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const c=(a=n?.query)!==null&&a!==void 0?a:{};n?.redirectTo&&(c.redirect_to=n.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",x=await sj(e,r,t+d,{headers:s,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(x):{data:Object.assign({},x),error:null}}async function sj(e,r,t,n,a,s){const c=aj(r,n,a,s);let d;try{d=await e(t,Object.assign({},c))}catch(x){throw console.error(x),new r2(sc(x),0)}if(d.ok||await k_(d),n?.noResolveJson)return d;try{return await d.json()}catch(x){await k_(x)}}function gi(e){var r;let t=null;oj(e)&&(t=Object.assign({},e),e.expires_at||(t.expires_at=zC(e.expires_in)));const n=(r=e.user)!==null&&r!==void 0?r:e;return{data:{session:t,user:n},error:null}}function S_(e){const r=gi(e);return!r.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(r.data.weak_password=e.weak_password),r}function po(e){var r;return{data:{user:(r=e.user)!==null&&r!==void 0?r:e},error:null}}function ij(e){return{data:e,error:null}}function lj(e){const{action_link:r,email_otp:t,hashed_token:n,redirect_to:a,verification_type:s}=e,c=Ox(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:r,email_otp:t,hashed_token:n,redirect_to:a,verification_type:s},x=Object.assign({},c);return{data:{properties:d,user:x},error:null}}function N_(e){return e}function oj(e){return e.access_token&&e.refresh_token&&e.expires_in}const up=["global","local","others"];class cj{constructor({url:r="",headers:t={},fetch:n}){this.url=r,this.headers=t,this.fetch=Dk(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,t=up[0]){if(up.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${up.join(", ")}`);try{return await tr(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(r,t={}){try{return await tr(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:po})}catch(n){if(Wt(n))return{data:{user:null},error:n};throw n}}async generateLink(r){try{const{options:t}=r,n=Ox(r,["options"]),a=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(a.new_email=n?.newEmail,delete a.newEmail),await tr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:lj,redirectTo:t?.redirectTo})}catch(t){if(Wt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(r){try{return await tr(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:po})}catch(t){if(Wt(t))return{data:{user:null},error:t};throw t}}async listUsers(r){var t,n,a,s,c,d,x;try{const f={nextPage:null,lastPage:0,total:0},g=await tr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=r?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=r?.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:N_});if(g.error)throw g.error;const v=await g.json(),w=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,E=(x=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&x!==void 0?x:[];return E.length>0&&(E.forEach(N=>{const S=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(N.split(";")[1].split("=")[1]);f[`${T}Page`]=S}),f.total=parseInt(w)),{data:Object.assign(Object.assign({},v),f),error:null}}catch(f){if(Wt(f))return{data:{users:[]},error:f};throw f}}async getUserById(r){_0(r);try{return await tr(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:po})}catch(t){if(Wt(t))return{data:{user:null},error:t};throw t}}async updateUserById(r,t){_0(r);try{return await tr(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:t,headers:this.headers,xform:po})}catch(n){if(Wt(n))return{data:{user:null},error:n};throw n}}async deleteUser(r,t=!1){_0(r);try{return await tr(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:t},xform:po})}catch(n){if(Wt(n))return{data:{user:null},error:n};throw n}}async _listFactors(r){_0(r.userId);try{const{data:t,error:n}=await tr(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:n}}catch(t){if(Wt(t))return{data:null,error:t};throw t}}async _deleteFactor(r){_0(r.userId),_0(r.id);try{return{data:await tr(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(t){if(Wt(t))return{data:null,error:t};throw t}}async _listOAuthClients(r){var t,n,a,s,c,d,x;try{const f={nextPage:null,lastPage:0,total:0},g=await tr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=r?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=r?.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:N_});if(g.error)throw g.error;const v=await g.json(),w=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,E=(x=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&x!==void 0?x:[];return E.length>0&&(E.forEach(N=>{const S=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(N.split(";")[1].split("=")[1]);f[`${T}Page`]=S}),f.total=parseInt(w)),{data:Object.assign(Object.assign({},v),f),error:null}}catch(f){if(Wt(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(r){try{return await tr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Wt(t))return{data:null,error:t};throw t}}async _getOAuthClient(r){try{return await tr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Wt(t))return{data:null,error:t};throw t}}async _updateOAuthClient(r,t){try{return await tr(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Wt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(r){try{return await tr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Wt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(r){try{return await tr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Wt(t))return{data:null,error:t};throw t}}}function A_(e={}){return{getItem:r=>e[r]||null,setItem:(r,t)=>{e[r]=t},removeItem:r=>{delete e[r]}}}const E0={debug:!!(globalThis&&Ik()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Mk extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class uj extends Mk{}async function dj(e,r,t){E0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,r);const n=new globalThis.AbortController;return r>0&&setTimeout(()=>{n.abort(),E0.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){E0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await t()}finally{E0.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(r===0)throw E0.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new uj(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(E0.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function fj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Fk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function hj(e){return parseInt(e,16)}function xj(e){const r=new TextEncoder().encode(e);return"0x"+Array.from(r,n=>n.toString(16).padStart(2,"0")).join("")}function mj(e){var r;const{chainId:t,domain:n,expirationTime:a,issuedAt:s=new Date,nonce:c,notBefore:d,requestId:x,resources:f,scheme:g,uri:v,version:w}=e;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((r=e.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const E=Fk(e.address),N=g?`${g}://${n}`:n,S=e.statement?`${e.statement}
`:"",T=`${N} wants you to sign in with your Ethereum account:
${E}

${S}`;let j=`URI: ${v}
Version: ${w}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${s.toISOString()}`;if(a&&(j+=`
Expiration Time: ${a.toISOString()}`),d&&(j+=`
Not Before: ${d.toISOString()}`),x&&(j+=`
Request ID: ${x}`),f){let D=`
Resources:`;for(const I of f){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);D+=`
- ${I}`}j+=D}return`${T}
${j}`}class la extends Error{constructor({message:r,code:t,cause:n,name:a}){var s;super(r,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=a??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class lx extends la{constructor(r,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:r}),this.name="WebAuthnUnknownError",this.originalError=t}}function gj({error:e,options:r}){var t,n,a;const{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(r.signal instanceof AbortSignal)return new la({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new la({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(r.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new la({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=s.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new la({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new la({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new la({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new la({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new la({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const c=window.location.hostname;if(Lk(c)){if(s.rp.id!==c)return new la({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new la({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new la({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new la({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new la({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function pj({error:e,options:r}){const{publicKey:t}=r;if(!t)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(r.signal instanceof AbortSignal)return new la({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new la({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Lk(n)){if(t.rpId!==n)return new la({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new la({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new la({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new la({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class bj{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const vj=new bj;function yj(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:r,user:t,excludeCredentials:n}=e,a=Ox(e,["challenge","user","excludeCredentials"]),s=U0(r).buffer,c=Object.assign(Object.assign({},t),{id:U0(t.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:s,user:c});if(n&&n.length>0){d.excludeCredentials=new Array(n.length);for(let x=0;x<n.length;x++){const f=n[x];d.excludeCredentials[x]=Object.assign(Object.assign({},f),{id:U0(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return d}function wj(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:r,allowCredentials:t}=e,n=Ox(e,["challenge","allowCredentials"]),a=U0(r).buffer,s=Object.assign(Object.assign({},n),{challenge:a});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const d=t[c];s.allowCredentials[c]=Object.assign(Object.assign({},d),{id:U0(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return s}function _j(e){var r;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const t=e;return{id:e.id,rawId:e.id,response:{attestationObject:cc(new Uint8Array(e.response.attestationObject)),clientDataJSON:cc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(r=t.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Ej(e){var r;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const t=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:cc(new Uint8Array(a.authenticatorData)),clientDataJSON:cc(new Uint8Array(a.clientDataJSON)),signature:cc(new Uint8Array(a.signature)),userHandle:a.userHandle?cc(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(r=t.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Lk(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function T_(){var e,r;return!!(Ta()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function kj(e){try{const r=await navigator.credentials.create(e);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new lx("Browser returned unexpected credential type",r)}:{data:null,error:new lx("Empty credential response",r)}}catch(r){return{data:null,error:gj({error:r,options:e})}}}async function Sj(e){try{const r=await navigator.credentials.get(e);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new lx("Browser returned unexpected credential type",r)}:{data:null,error:new lx("Empty credential response",r)}}catch(r){return{data:null,error:pj({error:r,options:e})}}}const Nj={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Aj={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ox(...e){const r=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const s in a){const c=a[s];if(c!==void 0)if(Array.isArray(c))n[s]=c;else if(t(c))n[s]=c;else if(r(c)){const d=n[s];r(d)?n[s]=ox(d,c):n[s]=ox(c)}else n[s]=c}return n}function Tj(e,r){return ox(Nj,e,r||{})}function Cj(e,r){return ox(Aj,e,r||{})}class jj{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:t,friendlyName:n,signal:a},s){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:r,webauthn:t});if(!c)return{data:null,error:d};const x=a??vj.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:f}=c.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${n}`),f.displayName||(f.displayName=f.name)}switch(c.webauthn.type){case"create":{const f=Tj(c.webauthn.credential_options.publicKey,s?.create),{data:g,error:v}=await kj({publicKey:f,signal:x});return g?{data:{factorId:r,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}case"request":{const f=Cj(c.webauthn.credential_options.publicKey,s?.request),{data:g,error:v}=await Sj(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:f,signal:x}));return g?{data:{factorId:r,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}}}catch(c){return Wt(c)?{data:null,error:c}:{data:null,error:new lc("Unexpected error in challenge",c)}}}async _verify({challengeId:r,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:r,webauthn:n})}async _authenticate({factorId:r,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},s){if(!t)return{data:null,error:new Md("rpId is required for WebAuthn authentication")};try{if(!T_())return{data:null,error:new lc("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:r,webauthn:{rpId:t,rpOrigins:n},signal:a},{request:s});if(!c)return{data:null,error:d};const{webauthn:x}=c;return this._verify({factorId:r,challengeId:c.challengeId,webauthn:{type:x.type,rpId:t,rpOrigins:n,credential_response:x.credential_response}})}catch(c){return Wt(c)?{data:null,error:c}:{data:null,error:new lc("Unexpected error in authenticate",c)}}}async _register({friendlyName:r,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},s){if(!t)return{data:null,error:new Md("rpId is required for WebAuthn registration")};try{if(!T_())return{data:null,error:new lc("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:r});if(!c)return await this.client.mfa.listFactors().then(g=>{var v;return(v=g.data)===null||v===void 0?void 0:v.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===r&&w.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:d};const{data:x,error:f}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:a},{create:s});return x?this._verify({factorId:c.id,challengeId:x.challengeId,webauthn:{rpId:t,rpOrigins:n,type:x.webauthn.type,credential_response:x.webauthn.credential_response}}):{data:null,error:f}}catch(c){return Wt(c)?{data:null,error:c}:{data:null,error:new lc("Unexpected error in register",c)}}}}fj();const Oj={url:NC,storageKey:AC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:TC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function C_(e,r,t){return await t()}const k0={};class Fd{get jwks(){var r,t;return(t=(r=k0[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(r){k0[this.storageKey]=Object.assign(Object.assign({},k0[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,t;return(t=(r=k0[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){k0[this.storageKey]=Object.assign(Object.assign({},k0[this.storageKey]),{cachedAt:r})}constructor(r){var t,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Oj),r);if(this.storageKey=s.storageKey,this.instanceID=(t=Fd.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Fd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Ta()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new cj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Dk(s.fetch),this.lock=s.lock||C_,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Ta()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=dj:this.lock=C_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jj(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Ik()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=A_(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=A_(this.memoryStorage)),Ta()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${jk}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let t={},n="none";if(Ta()&&(t=GC(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Ta()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),DC(s)){const x=(r=s.details)===null||r===void 0?void 0:r.code;if(x==="identity_already_exists"||x==="identity_not_found"||x==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Wt(t)?this._returnResult({error:t}):this._returnResult({error:new lc("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var t,n,a;try{const s=await tr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=r?.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=r?.options)===null||a===void 0?void 0:a.captchaToken}},xform:gi}),{data:c,error:d}=s;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const x=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",x)),this._returnResult({data:{user:f,session:x},error:null})}catch(s){if(Wt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(r){var t,n,a;try{let s;if("email"in r){const{email:g,password:v,options:w}=r;let E=null,N=null;this.flowType==="pkce"&&([E,N]=await w0(this.storage,this.storageKey)),s=await tr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:g,password:v,data:(t=w?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:E,code_challenge_method:N},xform:gi})}else if("phone"in r){const{phone:g,password:v,options:w}=r;s=await tr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(n=w?.data)!==null&&n!==void 0?n:{},channel:(a=w?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:gi})}else throw new Kh("You must provide either an email or phone number and a password");const{data:c,error:d}=s;if(d||!c)return await Aa(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const x=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",x)),this._returnResult({data:{user:f,session:x},error:null})}catch(s){if(await Aa(this.storage,`${this.storageKey}-code-verifier`),Wt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(r){try{let t;if("email"in r){const{email:s,password:c,options:d}=r;t=await tr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:S_})}else if("phone"in r){const{phone:s,password:c,options:d}=r;t=await tr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:S_})}else throw new Kh("You must provide either an email or phone number and a password");const{data:n,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const s=new y0;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(t){if(Wt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(r){var t,n,a,s;return await this._handleProviderSignIn(r.provider,{redirectTo:(t=r.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=r.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=r.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=r.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:t}=r;switch(t){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(r){var t,n,a,s,c,d,x,f,g,v,w;let E,N;if("message"in r)E=r.message,N=r.signature;else{const{chain:S,wallet:T,statement:j,options:D}=r;let I;if(Ta())if(typeof T=="object")I=T;else{const z=window;if("ethereum"in z&&typeof z.ethereum=="object"&&"request"in z.ethereum&&typeof z.ethereum.request=="function")I=z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=T}const L=new URL((t=D?.url)!==null&&t!==void 0?t:window.location.href),V=await I.request({method:"eth_requestAccounts"}).then(z=>z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!V||V.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const X=Fk(V[0]);let M=(n=D?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!M){const z=await I.request({method:"eth_chainId"});M=hj(z)}const W={domain:L.host,address:X,statement:j,uri:L.href,version:"1",chainId:M,nonce:(a=D?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(s=D?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=D?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(x=D?.signInWithEthereum)===null||x===void 0?void 0:x.notBefore,requestId:(f=D?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(g=D?.signInWithEthereum)===null||g===void 0?void 0:g.resources};E=mj(W),N=await I.request({method:"personal_sign",params:[xj(E),X]})}try{const{data:S,error:T}=await tr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:N},!((v=r.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=r.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:gi});if(T)throw T;if(!S||!S.session||!S.user){const j=new y0;return this._returnResult({data:{user:null,session:null},error:j})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:T})}catch(S){if(Wt(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(r){var t,n,a,s,c,d,x,f,g,v,w,E;let N,S;if("message"in r)N=r.message,S=r.signature;else{const{chain:T,wallet:j,statement:D,options:I}=r;let L;if(Ta())if(typeof j=="object")L=j;else{const X=window;if("solana"in X&&typeof X.solana=="object"&&("signIn"in X.solana&&typeof X.solana.signIn=="function"||"signMessage"in X.solana&&typeof X.solana.signMessage=="function"))L=X.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=j}const V=new URL((t=I?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in L&&L.signIn){const X=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I?.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),D?{statement:D}:null));let M;if(Array.isArray(X)&&X[0]&&typeof X[0]=="object")M=X[0];else if(X&&typeof X=="object"&&"signedMessage"in X&&"signature"in X)M=X;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)N=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),S=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${V.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(a=(n=I?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=I?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((c=I?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((d=I?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((x=I?.signInWithSolana)===null||x===void 0)&&x.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((f=I?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((v=(g=I?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||v===void 0)&&v.length?["Resources",...I.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const X=await L.signMessage(new TextEncoder().encode(N),"utf8");if(!X||!(X instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=X}}try{const{data:T,error:j}=await tr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:cc(S)},!((w=r.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(E=r.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:gi});if(j)throw j;if(!T||!T.session||!T.user){const D=new y0;return this._returnResult({data:{user:null,session:null},error:D})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:j})}catch(T){if(Wt(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(r){const t=await rc(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(t??"").split("/");try{if(!n&&this.flowType==="pkce")throw new MC;const{data:s,error:c}=await tr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:n},xform:gi});if(await Aa(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!s||!s.session||!s.user){const d=new y0;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:c})}catch(s){if(await Aa(this.storage,`${this.storageKey}-code-verifier`),Wt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(r){try{const{options:t,provider:n,token:a,access_token:s,nonce:c}=r,d=await tr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:s,nonce:c,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:gi}),{data:x,error:f}=d;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!x||!x.session||!x.user){const g=new y0;return this._returnResult({data:{user:null,session:null},error:g})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:x,error:f})}catch(t){if(Wt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(r){var t,n,a,s,c;try{if("email"in r){const{email:d,options:x}=r;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await w0(this.storage,this.storageKey));const{error:v}=await tr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=x?.data)!==null&&t!==void 0?t:{},create_user:(n=x?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:x?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in r){const{phone:d,options:x}=r,{data:f,error:g}=await tr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=x?.data)!==null&&a!==void 0?a:{},create_user:(s=x?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:x?.captchaToken},channel:(c=x?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:g})}throw new Kh("You must provide either an email or phone number.")}catch(d){if(await Aa(this.storage,`${this.storageKey}-code-verifier`),Wt(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(r){var t,n;try{let a,s;"options"in r&&(a=(t=r.options)===null||t===void 0?void 0:t.redirectTo,s=(n=r.options)===null||n===void 0?void 0:n.captchaToken);const{data:c,error:d}=await tr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:gi});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const x=c.session,f=c.user;return x?.access_token&&(await this._saveSession(x),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",x)),this._returnResult({data:{user:f,session:x},error:null})}catch(a){if(Wt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(r){var t,n,a,s,c;try{let d=null,x=null;this.flowType==="pkce"&&([d,x]=await w0(this.storage,this.storageKey));const f=await tr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(n=(t=r.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=r?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:x}),headers:this.headers,xform:ij});return!((s=f.data)===null||s===void 0)&&s.url&&Ta()&&!(!((c=r.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(d){if(await Aa(this.storage,`${this.storageKey}-code-verifier`),Wt(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:t},error:n}=r;if(n)throw n;if(!t)throw new Ss;const{error:a}=await tr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(r){if(Wt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const t=`${this.url}/resend`;if("email"in r){const{email:n,type:a,options:s}=r,{error:c}=await tr(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in r){const{phone:n,type:a,options:s}=r,{data:c,error:d}=await tr(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:d})}throw new Kh("You must provide either an email or phone number and a type")}catch(t){if(Wt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(r,t){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await r(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const t=await rc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?r=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const n=r.expires_at?r.expires_at*1e3-Date.now()<ip:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",r.expires_at),!n){if(this.userStorage){const c=await rc(this.userStorage,this.storageKey+"-user");c?.user?r.user=c.user:r.user=cp()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};r.user=rj(r.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:a,error:s}=await this._callRefreshToken(r.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(r){try{return r?await tr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:po}):await this._useSession(async t=>{var n,a,s;const{data:c,error:d}=t;if(d)throw d;return!(!((n=c.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ss}:await tr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:po})})}catch(t){if(Wt(t))return IC(t)&&(await this._removeSession(),await Aa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(r,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,t))}async _updateUser(r,t={}){try{return await this._useSession(async n=>{const{data:a,error:s}=n;if(s)throw s;if(!a.session)throw new Ss;const c=a.session;let d=null,x=null;this.flowType==="pkce"&&r.email!=null&&([d,x]=await w0(this.storage,this.storageKey));const{data:f,error:g}=await tr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:d,code_challenge_method:x}),jwt:c.access_token,xform:po});if(g)throw g;return c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(n){if(await Aa(this.storage,`${this.storageKey}-code-verifier`),Wt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new Ss;const t=Date.now()/1e3;let n=t,a=!0,s=null;const{payload:c}=op(r.access_token);if(c.exp&&(n=c.exp,a=n<=t),a){const{data:d,error:x}=await this._callRefreshToken(r.refresh_token);if(x)return this._returnResult({data:{user:null,session:null},error:x});if(!d)return{data:{user:null,session:null},error:null};s=d}else{const{data:d,error:x}=await this._getUser(r.access_token);if(x)throw x;s={access_token:r.access_token,refresh_token:r.refresh_token,user:d.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(t){if(Wt(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async t=>{var n;if(!r){const{data:c,error:d}=t;if(d)throw d;r=(n=c.session)!==null&&n!==void 0?n:void 0}if(!r?.refresh_token)throw new Ss;const{data:a,error:s}=await this._callRefreshToken(r.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Wt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(r,t){try{if(!Ta())throw new Yh("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Yh(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new b_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new b_("No code detected.");const{data:D,error:I}=await this._exchangeCodeForSession(r.code);if(I)throw I;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:s,refresh_token:c,expires_in:d,expires_at:x,token_type:f}=r;if(!s||!d||!c||!f)throw new Yh("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(d);let w=g+v;x&&(w=parseInt(x));const E=w-g;E*1e3<=D0&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${v}s`);const N=w-v;g-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,w,g):g-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,w,g);const{data:S,error:T}=await this._getUser(s);if(T)throw T;const j={provider_token:n,provider_refresh_token:a,access_token:s,expires_in:v,expires_at:w,refresh_token:c,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:j,redirectType:r.type},error:null})}catch(n){if(Wt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const t=await rc(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&t)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:a,error:s}=t;if(s)return this._returnResult({error:s});const c=(n=a.session)===null||n===void 0?void 0:n.access_token;if(c){const{error:d}=await this.admin.signOut(c,r);if(d&&!(RC(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return r!=="others"&&(await this._removeSession(),await Aa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const t=HC(),n={id:t,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(r){return await this._useSession(async t=>{var n,a;try{const{data:{session:s},error:c}=t;if(c)throw c;await((n=this.stateChangeEmitters.get(r))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",r,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(r))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",s),console.error(s)}})}async resetPasswordForEmail(r,t={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await w0(this.storage,this.storageKey,!0));try{return await tr(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(await Aa(this.storage,`${this.storageKey}-code-verifier`),Wt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var r;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(r=t.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(t){if(Wt(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var t;try{const{data:n,error:a}=await this._useSession(async s=>{var c,d,x,f,g;const{data:v,error:w}=s;if(w)throw w;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(c=r.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=r.options)===null||d===void 0?void 0:d.scopes,queryParams:(x=r.options)===null||x===void 0?void 0:x.queryParams,skipBrowserRedirect:!0});return await tr(this.fetch,"GET",E,{headers:this.headers,jwt:(g=(f=v.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return Ta()&&!(!((t=r.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:r.provider,url:n?.url},error:null})}catch(n){if(Wt(n))return this._returnResult({data:{provider:r.provider,url:null},error:n});throw n}}async linkIdentityIdToken(r){return await this._useSession(async t=>{var n;try{const{error:a,data:{session:s}}=t;if(a)throw a;const{options:c,provider:d,token:x,access_token:f,nonce:g}=r,v=await tr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:d,id_token:x,access_token:f,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:gi}),{data:w,error:E}=v;return E?this._returnResult({data:{user:null,session:null},error:E}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new y0}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:E}))}catch(a){if(await Aa(this.storage,`${this.storageKey}-code-verifier`),Wt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(r){try{return await this._useSession(async t=>{var n,a;const{data:s,error:c}=t;if(c)throw c;return await tr(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(a=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(Wt(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(r){const t=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await qC(async a=>(a>0&&await WC(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await tr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:gi})),(a,s)=>{const c=200*Math.pow(2,a);return s&&lp(s)&&Date.now()+c-n<D0})}catch(n){if(this._debug(t,"error",n),Wt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",t,"url",n),Ta()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:r,url:n},error:null}}async _recoverAndRefresh(){var r,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await rc(this.storage,this.storageKey);if(a&&this.userStorage){let c=await rc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await M0(this.userStorage,this.storageKey+"-user",c)),a.user=(r=c?.user)!==null&&r!==void 0?r:cp()}else if(a&&!a.user&&!a.user){const c=await rc(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await Aa(this.storage,this.storageKey+"-user"),await M0(this.storage,this.storageKey,a)):a.user=cp()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const s=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<ip;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${ip}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),lp(c)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(n,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(r){var t,n;if(!r)throw new Ss;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ix;const{data:s,error:c}=await this._refreshAccessToken(r);if(c)throw c;if(!s.session)throw new Ss;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const d={data:s.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(s){if(this._debug(a,"error",s),Wt(s)){const c={data:null,error:s};return lp(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(r,t,n=!0){const a=`#_notifyAllSubscribers(${r})`;this._debug(a,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:r,session:t});const s=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(r,t)}catch(x){s.push(x)}});if(await Promise.all(c),s.length>0){for(let d=0;d<s.length;d+=1)console.error(s[d]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await Aa(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},r),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await M0(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const s=E_(a);await M0(this.storage,this.storageKey,s)}else{const a=E_(t);await M0(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Aa(this.storage,this.storageKey),await Aa(this.storage,this.storageKey+"-code-verifier"),await Aa(this.storage,this.storageKey+"-user"),this.userStorage&&await Aa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Ta()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),D0);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-r)/D0);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${D0}ms, refresh threshold is ${e2} ticks`),a<=e2&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Mk)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ta()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const t=`#_onVisibilityChanged(${r})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,t,n){const a=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,c]=await w0(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(n?.queryParams){const s=new URLSearchParams(n.queryParams);a.push(s.toString())}return n?.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${r}?${a.join("&")}`}async _unenroll(r){try{return await this._useSession(async t=>{var n;const{data:a,error:s}=t;return s?this._returnResult({data:null,error:s}):await tr(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Wt(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(r){try{return await this._useSession(async t=>{var n,a;const{data:s,error:c}=t;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:x,error:f}=await tr(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return f?this._returnResult({data:null,error:f}):(r.factorType==="totp"&&x.type==="totp"&&(!((a=x?.totp)===null||a===void 0)&&a.qr_code)&&(x.totp.qr_code=`data:image/svg+xml;utf-8,${x.totp.qr_code}`),this._returnResult({data:x,error:null}))})}catch(t){if(Wt(t))return this._returnResult({data:null,error:t});throw t}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:a,error:s}=t;if(s)return this._returnResult({data:null,error:s});const c=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?_j(r.webauthn.credential_response):Ej(r.webauthn.credential_response)})}:{code:r.code}),{data:d,error:x}=await tr(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:c,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return x?this._returnResult({data:null,error:x}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:x}))})}catch(t){if(Wt(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:a,error:s}=t;if(s)return this._returnResult({data:null,error:s});const c=await tr(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:yj(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:wj(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Wt(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(r){const{data:t,error:n}=await this._challenge({factorId:r.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:r.factorId,challengeId:t.id,code:r.code})}async _listFactors(){var r;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const s of(r=t?.factors)!==null&&r!==void 0?r:[])a.all.push(s),s.status==="verified"&&a[s.factor_type].push(s);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var r,t;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=op(n.access_token);let c=null;s.aal&&(c=s.aal);let d=c;((t=(r=n.user.factors)===null||r===void 0?void 0:r.filter(g=>g.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(d="aal2");const f=s.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async t=>{const{data:{session:n},error:a}=t;return a?this._returnResult({data:null,error:a}):n?await tr(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ss})})}catch(t){if(Wt(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(r,t){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new Ss});const c=await tr(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Ta()&&!t?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(n){if(Wt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(r,t){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new Ss});const c=await tr(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Ta()&&!t?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(n){if(Wt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:t},error:n}=r;return n?this._returnResult({data:null,error:n}):t?await tr(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ss})})}catch(r){if(Wt(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async t=>{const{data:{session:n},error:a}=t;return a?this._returnResult({data:null,error:a}):n?(await tr(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ss})})}catch(t){if(Wt(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(r,t={keys:[]}){let n=t.keys.find(d=>d.kid===r);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(d=>d.kid===r),n&&this.jwks_cached_at+jC>a)return n;const{data:s,error:c}=await tr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,n=s.keys.find(d=>d.kid===r),!n)?null:n}async getClaims(r,t={}){try{let n=r;if(!n){const{data:E,error:N}=await this.getSession();if(N||!E.session)return this._returnResult({data:null,error:N});n=E.session.access_token}const{header:a,payload:s,signature:c,raw:{header:d,payload:x}}=op(n);t?.allowExpired||QC(s.exp);const f=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!f){const{error:E}=await this.getUser(n);if(E)throw E;return{data:{claims:s,header:a,signature:c},error:null}}const g=ej(a.alg),v=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,v,c,UC(`${d}.${x}`)))throw new n2("Invalid JWT signature");return{data:{claims:s,header:a,signature:c},error:null}}catch(n){if(Wt(n))return this._returnResult({data:null,error:n});throw n}}}Fd.nextInstanceID={};const Rj=Fd,Ij="2.90.1";let dd="";typeof Deno<"u"?dd="deno":typeof document<"u"?dd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dd="react-native":dd="node";const Dj={"X-Client-Info":`supabase-js-${dd}/${Ij}`},Mj={headers:Dj},Fj={schema:"public"},Lj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Bj={};function Ld(e){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ld(e)}function Pj(e,r){if(Ld(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(Ld(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Uj(e){var r=Pj(e,"string");return Ld(r)=="symbol"?r:r+""}function zj(e,r,t){return(r=Uj(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function j_(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function zn(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?j_(Object(t),!0).forEach(function(n){zj(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}const Hj=e=>e?(...r)=>e(...r):(...r)=>fetch(...r),Gj=()=>Headers,Vj=(e,r,t)=>{const n=Hj(t),a=Gj();return async(s,c)=>{var d;const x=(d=await r())!==null&&d!==void 0?d:e;let f=new a(c?.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${x}`),n(s,zn(zn({},c),{},{headers:f}))}};function Wj(e){return e.endsWith("/")?e:e+"/"}function qj(e,r){var t,n;const{db:a,auth:s,realtime:c,global:d}=e,{db:x,auth:f,realtime:g,global:v}=r,w={db:zn(zn({},x),a),auth:zn(zn({},f),s),realtime:zn(zn({},g),c),storage:{},global:zn(zn(zn({},v),d),{},{headers:zn(zn({},(t=v?.headers)!==null&&t!==void 0?t:{}),(n=d?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?w.accessToken=e.accessToken:delete w.accessToken,w}function Xj(e){const r=e?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Wj(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Kj=class extends Rj{constructor(e){super(e)}},Yj=class{constructor(e,r,t){var n,a;this.supabaseUrl=e,this.supabaseKey=r;const s=Xj(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const c=`sb-${s.hostname.split(".")[0]}-auth-token`,d={db:Fj,realtime:Bj,auth:zn(zn({},Lj),{},{storageKey:c}),global:Mj},x=qj(t??{},d);if(this.storageKey=(n=x.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=x.global.headers)!==null&&a!==void 0?a:{},x.accessToken)this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=x.auth)!==null&&f!==void 0?f:{},this.headers,x.global.fetch)}this.fetch=Vj(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(zn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new TT(new URL("rest/v1",s).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new SC(this.storageUrl.href,this.headers,this.fetch,t?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new ET(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,t)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,r,t;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:t,storage:n,userStorage:a,storageKey:s,flowType:c,lock:d,debug:x,throwOnError:f},g,v){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Kj({url:this.authUrl.href,headers:zn(zn({},w),g),storageKey:s,autoRefreshToken:e,persistSession:r,detectSessionInUrl:t,storage:n,userStorage:a,flowType:c,lock:d,debug:x,throwOnError:f,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new WT(this.realtimeUrl.href,zn(zn({},e),{},{params:zn(zn({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(e,r,t){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const $j=(e,r,t)=>new Yj(e,r,t);function Zj(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const r=e.version;if(r==null)return!1;const t=r.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Zj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Jj="https://pkydzwoexebmmvlvuihf.supabase.co",Qj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBreWR6d29leGVibW12bHZ1aWhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgxOTg0NTUsImV4cCI6MjA4Mzc3NDQ1NX0.0uHRIQni6xwZV7mY3pjuNKQA3yQ5A8obgSlZZUK4B10",Lt=$j(Jj,Qj),kr=(e,r)=>{if(r)throw console.error("Supabase Error:",r),{response:{data:{message:r.message||"Bir hata olutu"}}};return{data:e}},Bk={login:async(e,r)=>{if(!e.includes("@"))throw{response:{data:{message:"Ltfen e-posta adresinizi giriniz."}}};const{data:t,error:n}=await Lt.auth.signInWithPassword({email:e,password:r});if(n)throw n.message.includes("Email not confirmed")?{response:{data:{message:"E-posta adresiniz henz onaylanmam."}}}:{response:{data:{message:"Giri yaplamad. Bilgilerinizi kontrol edin."}}};const{data:a,error:s}=await Lt.from("user_profiles").select("*").eq("id",t.user.id).single();let c=a||{role:"user",permissions:{}};return{status:200,data:{token:t.session.access_token,user:{...t.user,...c}}}},verify2FA:async e=>({status:200}),logout:async()=>{const{error:e}=await Lt.auth.signOut();if(e)throw e;return localStorage.removeItem("user"),localStorage.removeItem("auth_token"),{status:200}}},pn=()=>{try{const e=localStorage.getItem("user");if(e)return JSON.parse(e).company_code}catch(e){console.error("Error reading company code",e)}return null},Sn={getAll:async()=>{const e=pn();if(!e)return{data:{products:[]}};const{data:r,error:t}=await Lt.from("products").select("*").eq("company_code",e).order("name");if(t)throw t;return{data:{products:(r||[]).map(a=>({...a,price:a.sale_price,group:a.category}))}}},add:async e=>{const r=pn();if(!r)throw new Error("irket kodu bulunamad.");const t={stock_code:e.stock_code,name:e.name,barcode:e.barcode,category:e.group,brand:e.brand,sale_price:e.price,buying_price:e.buying_price||0,stock:e.stock,vat_rate:e.vat_rate||18,image_url:e.image_url,company_code:r},{data:n,error:a}=await Lt.from("products").insert([t]).select().single();if(a)throw a;return{data:n}},update:async(e,r)=>{const t=pn(),n={name:r.name,barcode:r.barcode,category:r.group,brand:r.brand,sale_price:r.price,buying_price:r.buying_price,stock:r.stock,vat_rate:r.vat_rate,image_url:r.image_url},{data:a,error:s}=await Lt.from("products").update(n).eq("stock_code",e).eq("company_code",t).select();if(s)throw s;return{data:a}},delete:async e=>{const r=pn(),{error:t}=await Lt.from("products").delete().eq("stock_code",e).eq("company_code",r);if(t)throw t;return{data:{success:!0}}},updateStock:async(e,r)=>{const t={};r.stock!==void 0&&(t.stock=r.stock),r.buying_price!==void 0&&(t.buying_price=r.buying_price);const{data:n,error:a}=await Lt.from("products").update(t).eq("stock_code",e).select();if(a)throw a;return{data:n}},updateImage:async(e,r)=>{const t=r.get("product_image");if(!t)return{data:{success:!0}};const n=t.name.split(".").pop(),s=`${`${e}-${Date.now()}.${n}`}`,{error:c}=await Lt.storage.from("product-images").upload(s,t);if(c)throw c;const{data:d}=Lt.storage.from("product-images").getPublicUrl(s),{error:x}=await Lt.from("products").update({image_url:d.publicUrl}).eq("stock_code",e);if(x)throw x;return{data:{success:!0,image_url:d.publicUrl}}},repairStockCode:async e=>{const{data:r,error:t}=await Lt.from("products").select("*").eq("stock_code",e);if(t)throw t;if(r&&r.length>0){const{error:n}=await Lt.from("products").delete().eq("stock_code",e);if(n){const a=`${e}_DEL_${Math.floor(Date.now()/1e3)}`,{error:s}=await Lt.from("products").update({stock_code:a}).eq("stock_code",e);if(s)throw s;return{success:!0,message:`Kayt silinemedi (bal veriler var), ancak ${a} olarak yeniden adlandrld. Artk ${e} kullanlabilir.`}}return{success:!0,message:"Eski kayt baaryla veritabanndan silindi."}}else return{success:!1,message:"Bu stok koduna sahip kayt bulunamad."}}},kn={getAll:async()=>{const e=pn();if(!e)return kr({success:!0,customers:[]});const{data:r,error:t}=await Lt.from("customers").select("*").eq("company_code",e).order("name");if(t)return kr({success:!0,customers:[]},t);const n=await Promise.all((r||[]).map(async a=>{try{const{data:s}=await Lt.from("customer_payments").select("amount").eq("customer_id",a.id),c=(s||[]).reduce((d,x)=>d-(parseFloat(x.amount)||0),0);return{...a,balance:c}}catch(s){return console.warn("Balance calc error for customer",a.id,s),a}}));return kr({success:!0,customers:n},null)},add:async e=>{const r=pn(),{id:t,...n}=e,{data:a,error:s}=await Lt.from("customers").insert([{...n,company_code:r}]).select().single();return kr({success:!0,message:"Mteri eklendi",id:a?.id},s)},update:async(e,r)=>{const t=pn(),{error:n}=await Lt.from("customers").update(r).eq("id",e).eq("company_code",t);return kr({success:!0,message:"Mteri gncellendi"},n)},delete:async e=>{const r=pn(),{error:t}=await Lt.from("customers").delete().eq("id",e).eq("company_code",r);return kr({success:!0,message:"Mteri silindi"},t)},getTransactions:async e=>{let r=[];try{const{data:n,error:a}=await Lt.from("customer_payments").select("*").eq("customer_id",e).order("created_at",{ascending:!0});a?console.warn("Payments fetch warning:",a.message):r=n||[]}catch(n){console.warn("Payments fetch exception:",n)}console.log("Fetched customer_payments for transactions:",r.length);const t=r.map(n=>({...n,type:"payment",total:Math.abs(n.amount),payment_method:n.payment_type?.toLowerCase()||"nakit",sale_code:n.description?.match(/SLS-\d+/)?.[0]||n.description?.match(/Alacak.*-(SLS-\d+)/)?.[1]||null}));return kr({success:!0,transactions:t},null)},addPayment:async e=>{const{data:r,error:t}=await Lt.from("customers").select("balance").eq("id",e.customer_id).single();if(t)throw t;const n=parseFloat(r?.balance)||0,a=parseFloat(e.amount)||0,s=n-a,{error:c}=await Lt.from("customer_payments").insert({customer_id:e.customer_id,amount:a,payment_type:e.payment_type||"Nakit",description:e.description||"deme",created_at:new Date().toISOString()});c&&console.error("Payment record error:",c);const{error:d}=await Lt.from("customers").update({balance:s,last_transaction_date:new Date().toISOString()}).eq("id",e.customer_id);if(d)throw d;return{data:{success:!0,message:"deme alnd ve bakiye gncellendi."}}},addSaleDebit:async e=>{const{customer_id:r,amount:t,sale_code:n}=e,{data:a,error:s}=await Lt.from("customers").select("balance").eq("id",r).single();if(s)throw s;const c=parseFloat(a?.balance)||0,d=parseFloat(t)||0,x=c+d,{error:f}=await Lt.from("customer_payments").insert({customer_id:r,amount:-d,payment_type:"Bor (Sat)",description:`Sat - ${n}`,created_at:new Date().toISOString()});f&&console.error("Sale debit record error:",f);const{error:g}=await Lt.from("customers").update({balance:x,last_transaction_date:new Date().toISOString()}).eq("id",r);if(g)throw g;return{data:{success:!0,message:"Bor kayd oluturuldu."}}},addManualDebit:async e=>{const{customer_id:r,amount:t,description:n}=e,{data:a,error:s}=await Lt.from("customers").select("balance").eq("id",r).single();if(s)throw s;const c=parseFloat(a?.balance)||0,d=parseFloat(t)||0,x=c+d,{error:f}=await Lt.from("customer_payments").insert({customer_id:r,amount:-d,payment_type:"Bor (Manuel)",description:n||"Manuel Bor Ekleme",created_at:new Date().toISOString()});f&&console.error("Manual debit record error:",f);const{error:g}=await Lt.from("customers").update({balance:x,last_transaction_date:new Date().toISOString()}).eq("id",r);if(g)throw g;return{data:{success:!0,message:"Bor kayd ilendi."}}},addPurchaseTransaction:async e=>{const{customer_id:r,amount:t,description:n}=e,{data:a,error:s}=await Lt.from("customers").select("balance").eq("id",r).single();if(s)throw s;const c=parseFloat(a?.balance)||0,d=parseFloat(t)||0,x=c-d,{error:f}=await Lt.from("customer_payments").insert({customer_id:r,amount:d,payment_type:"Fatura (Al)",description:n||"Gelen Fatura",created_at:new Date().toISOString()});f&&console.error("Transaction record error:",f);const{error:g}=await Lt.from("customers").update({balance:x,last_transaction_date:new Date().toISOString()}).eq("id",r);if(g)throw g;return{data:{success:!0,message:"Cari hesaba ilendi."}}},cancelPurchaseTransaction:async e=>{const{customer_id:r,amount:t,description:n}=e,{data:a,error:s}=await Lt.from("customers").select("balance").eq("id",r).single();if(s)throw s;const c=parseFloat(a?.balance)||0,d=parseFloat(t)||0,x=c+d,{error:f}=await Lt.from("customer_payments").insert({customer_id:r,amount:-d,payment_type:"Fatura ptali",description:n||"Fatura ptali",created_at:new Date().toISOString()});f&&console.error("Cancel transaction record error:",f);const{error:g}=await Lt.from("customers").update({balance:x,last_transaction_date:new Date().toISOString()}).eq("id",r);if(g)throw g;return{data:{success:!0,message:"Fatura iptali cariye ilendi."}}},deletePayment:async(e,r,t)=>{const{error:n}=await Lt.from("customer_payments").delete().eq("id",e);if(n)throw n;try{const{data:a,error:s}=await Lt.from("customers").select("balance").eq("id",r).single();if(s)throw s;const c=Math.abs(parseFloat(t)),d=(a.balance||0)+c,{error:x}=await Lt.from("customers").update({balance:d}).eq("id",r);if(x)throw x;return{data:{success:!0,message:"deme silindi ve bakiye gncellendi."}}}catch(a){return console.error("Balance rollback error:",a),{data:{success:!0,warning:"deme silindi fakat bakiye gncellenemedi."}}}},updatePayment:async(e,r,t,n)=>{const a=Math.abs(n)-Math.abs(t),{error:s}=await Lt.from("customer_payments").update({amount:n}).eq("id",e);if(s)throw s;try{const{data:c,error:d}=await Lt.from("customers").select("balance").eq("id",r).single();if(d)throw d;const x=(c.balance||0)-a,{error:f}=await Lt.from("customers").update({balance:x,last_transaction_date:new Date().toISOString()}).eq("id",r);if(f)throw f;return{data:{success:!0,message:"deme gncellendi."}}}catch(c){return console.error("Balance adjustment error:",c),{data:{success:!0,warning:"deme gncellendi fakat bakiye ayarlanamad."}}}}},kl={getAll:async e=>{const r=pn();if(!r)return kr({success:!0,sales:[]});let t=Lt.from("sales").select("*, customers(name)").eq("company_code",r);e?.start_date&&(t=t.gte("date",`${e.start_date}T00:00:00`)),e?.end_date&&(t=t.lte("date",`${e.end_date}T23:59:59`)),e?.sale_code&&(t=t.ilike("sale_code",`%${e.sale_code}%`)),e?.show_deleted||(t=t.eq("is_deleted",!1));const{data:n,error:a}=await t.order("date",{ascending:!1});let s=n?.map(c=>({...c,customerName:c.customers?.name,customer:c.customers?.name||c.customer_name||c.customer||"Misafir"}))||[];if(e?.customer_name){const c=e.customer_name.toLowerCase();s=s.filter(d=>d.customer?.toLowerCase().includes(c))}return kr({success:!0,sales:s},a)},complete:async e=>{let r=[];e.items?r=e.items:e.products&&(r=e.products.map(c=>({id:c.id,name:c.name,quantity:c.quantity,price:c.price,total:c.price*c.quantity})));const t=pn(),n={sale_code:e.sale_code||`S-${Date.now()}`,items:r,total:e.total,payment_method:e.payment_method,is_deleted:!1,date:new Date().toISOString(),customer_id:e.customer_id||e.customer&&e.customer.id||null,customer_name:e.customer_name||e.customer&&e.customer.name||(typeof e.customer=="string"?e.customer:"")||"Misafir",company_code:t},{data:a,error:s}=await Lt.from("sales").insert([n]).select().single();if(s)throw console.error("Sale insert error:",s),{response:{data:{message:s.message||"Sat kaydedilemedi"}}};if(n.customer_id){try{await kn.addSaleDebit({customer_id:n.customer_id,amount:n.total,sale_code:n.sale_code}),console.log("Bor (debit) record created for sale:",n.sale_code)}catch(c){console.error("Bor creation failed:",c)}if(n.payment_method==="Nakit"||n.payment_method==="POS"||n.payment_method==="Kredi Kart")try{await kn.addPayment({customer_id:n.customer_id,amount:n.total,payment_type:n.payment_method==="POS"?"Kredi Kart":"Nakit",description:`Alacak (Tahsilat) - ${n.sale_code}`}),console.log("Alacak (credit) record created for sale:",n.sale_code)}catch(c){console.error("Alacak creation failed:",c)}}return kr({success:!0,message:"Sat tamamland",sale_code:a?.sale_code},s)},add:async e=>kl.complete(e),delete:async e=>{const r=pn(),{data:t,error:n}=await Lt.from("sales").select("customer_id").eq("sale_code",e).eq("company_code",r).single();if(n)console.error("Sale fetch error during delete:",n);else if(t&&t.customer_id){const{error:s}=await Lt.from("customer_payments").delete().eq("customer_id",t.customer_id).ilike("description",`%${e}%`);s&&console.error("Error deleting associated ledger records:",s)}const{error:a}=await Lt.from("sales").update({is_deleted:!0}).eq("sale_code",e);return kr({success:!0,message:"Sat iptal edildi"},a)},getByCode:async e=>{const{data:r,error:t}=await Lt.from("sales").select("*").eq("sale_code",e).single();return kr(r,t)},update:async(e,r)=>{const t={};r.products&&(t.items=r.products),r.total!==void 0&&(t.total=r.total),r.payment_method!==void 0&&(t.payment_method=r.payment_method),r.customer_id!==void 0&&(t.customer_id=r.customer_id),r.customer_name!==void 0&&(t.customer_name=r.customer_name);const{error:n}=await Lt.from("sales").update(t).eq("sale_code",e);return kr({success:!0,message:"Sat gncellendi"},n)}},Li={getAll:async()=>{const e=pn();if(!e)return kr({success:!0,users:[]});const{data:r,error:t}=await Lt.from("user_profiles").select("*").eq("company_code",e);return kr({success:!0,users:r||[]},t)},add:async e=>{let{data:r,error:t}=await Lt.auth.signUp({email:e.email,password:e.password,options:{data:{username:e.username,role:e.role||"user",permissions:e.permissions,access_schedule:e.access_schedule,company_code:pn()}}});if(t&&t.message&&t.message.includes("Database error")){console.warn("Metadata signUp failed, retrying without metadata...");const n=await Lt.auth.signUp({email:e.email,password:e.password});r=n.data,t=n.error}if(t)return kr(null,t);if(r.user&&r.user.identities&&r.user.identities.length===0)return kr(null,{message:"E-Mail daha nce kaydedilmitir."});if(r.user){const{error:n}=await Lt.from("user_profiles").upsert({id:r.user.id,username:e.username,role:e.role||"user",permissions:e.permissions,access_schedule:e.access_schedule,company_code:pn()});if(n)return console.error("Profile create error:",n),kr({success:!0,message:"Kullanc oluturuldu ancak profil detaylar kaydedilemedi: "+n.message},null)}return kr({success:!0,message:"Kullanc eklendi."},null)},delete:async e=>{const{error:r}=await Lt.from("user_profiles").delete().eq("id",e);return kr({success:!0,message:"Kullanc profili silindi"},r)},updatePermissions:async(e,r)=>{const{error:t}=await Lt.from("user_profiles").update({permissions:r}).eq("id",e);return kr({success:!0,message:"Yetkiler gncellendi"},t)},update:async(e,r)=>{const{error:t}=await Lt.from("user_profiles").update({username:r.username,role:r.role}).eq("id",e);return kr({success:!0,message:"Kullanc bilgileri gncellendi"},t)},updateSchedule:async(e,r)=>{const{error:t}=await Lt.from("user_profiles").update({access_schedule:r}).eq("id",e);return kr({success:!0,message:"Eriim takvimi gncellendi"},t)},forceLogout:async e=>kr({success:!0,message:"Kullanc oturumu kapatld (Token yenilenemedi - DB destei yok)"},null),updatePassword:async(e,r)=>({data:{success:!1,message:"Parola deitirme ilemi iin Ynetici Paneli gereklidir (Client-Side kstlamas)."}}),registerTenant:async e=>{const{data:r,error:t}=await Lt.auth.signUp({email:e.email,password:e.password,options:{emailRedirectTo:`${window.location.origin}/email-success`,data:{username:e.username,role:"kurucu",company_code:e.company_code}}});if(t)return kr(null,t);if(r.user&&r.user.identities&&r.user.identities.length===0)return kr(null,{message:"Bu e-posta adresi ile zaten kaytl bir kullanc var."});if(r.user){const{error:n}=await Lt.from("user_profiles").upsert({id:r.user.id,username:e.username,role:"kurucu",company_code:e.company_code,permissions:{can_view_products:!0,can_view_customers:!0,can_view_sales:!0,can_view_invoices:!0,can_view_pos:!0,can_view_users:!0,can_view_balances:!0,can_view_prices:!0}});if(n)return console.error("Tenant profile error:",n),kr({success:!0,message:"Kayt oldu ancak profil hatas: "+n.message},null);try{const a=crypto.randomUUID(),{error:s}=await Lt.from("app_settings").insert({key:"secret_token",value:a,company_code:e.company_code});s&&console.error("Secret token generation error:",s)}catch(a){console.error("Secret token generation exception:",a)}}return kr({success:!0,message:"irket kayd baaryla oluturuldu."},null)}},$h={getAll:async()=>{const e=pn();if(!e)return kr({success:!0,held_sales:[]});const{data:r,error:t}=await Lt.from("held_sales").select("*").eq("company_code",e).order("created_at",{ascending:!1});return kr({success:!0,held_sales:r||[]},t)},add:async e=>{const r=pn(),t={customer_name:e.customer||"Toptan Sat",items:e.items,company_code:r},{data:n,error:a}=await Lt.from("held_sales").insert([t]).select();if(a)throw console.error("Held sale error:",a),{response:{data:{message:a.message||"Beklemeye alma hatas"}}};return{data:{success:!0,message:"Sat beklemeye alnd",held_sale:n?.[0]}}},delete:async e=>{const{error:r}=await Lt.from("held_sales").delete().eq("id",e);return kr({success:!0,message:"Silindi"},r)}},yo={getAll:async()=>{const e=pn();if(!e)return kr({success:!0,shortcuts:[]});const{data:r,error:t}=await Lt.from("shortcuts").select("*").eq("company_code",e);return kr({success:!0,shortcuts:r||[]},t)},addCategory:async e=>{const r=pn(),{error:t}=await Lt.from("shortcuts").insert([{name:e,items:[],company_code:r}]);return kr({success:!0,message:"Kategori eklendi"},t)},updateCategory:async(e,r)=>{const t=pn(),{error:n}=await Lt.from("shortcuts").update(r).eq("name",e).eq("company_code",t);return kr({success:!0,message:"Gncellendi"},n)},deleteCategory:async e=>{const r=pn(),{error:t}=await Lt.from("shortcuts").delete().eq("name",e).eq("company_code",r);return kr({success:!0,message:"Silindi"},t)}},vi={getAll:async()=>{const e=pn();if(!e)return kr({success:!0,invoices:[]});const{data:r,error:t}=await Lt.from("invoices").select("*").eq("company_code",e).order("date",{ascending:!1});return kr({success:!0,invoices:r||[]},t)},syncBatch:async e=>{const r=pn();if(!r)throw new Error("irket kodu bulunamad.");const t=e.map(s=>({...s,company_code:r})),{data:n,error:a}=await Lt.from("invoices").upsert(t,{onConflict:"uuid"}).select();return kr({success:!0,message:`${e.length} fatura senkronize edildi.`,data:n},a)},updateStatus:async(e,r)=>{const t=pn(),{error:n}=await Lt.from("invoices").update({status:r}).eq("id",e).eq("company_code",t);return kr({success:!0,message:"Durum gncellendi"},n)}},xn={get:async e=>{const r=pn();if(!r)return{data:null};const{data:t,error:n}=await Lt.from("app_settings").select("value").eq("key",e).eq("company_code",r).single();return n&&n.code!=="PGRST116"&&console.error(`Error fetching setting ${e}:`,n),{data:t?.value||null}},set:async(e,r)=>{const t=pn();if(!t)throw new Error("irket kodu bulunamad.");const{error:n}=await Lt.from("app_settings").upsert({key:e,value:r,company_code:t},{onConflict:"company_code, key"});if(n)throw n;return{data:{success:!0}}},getAll:async()=>{const e=pn();if(!e)return{data:{}};const{data:r,error:t}=await Lt.from("app_settings").select("key, value").eq("company_code",e);if(t)throw t;const n={};return r.forEach(a=>{n[a.key]=a.value}),{data:n}}},Pk=J.createContext(null),Wi=()=>{const e=J.useContext(Pk);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},eO=({children:e})=>{const[r,t]=J.useState(null),[n,a]=J.useState(!0);J.useEffect(()=>{const f=async()=>{const v=localStorage.getItem("user");let w=null;if(v)try{w=JSON.parse(v),w.id==="mock-admin-id"?(w=null,localStorage.removeItem("user")):t(w)}catch(E){console.error("Parse error",E),localStorage.removeItem("user")}if(w&&w.id)try{const{data:{session:E},error:N}=await Lt.auth.getSession();if(!(N||!E)){const{data:S,error:T}=await Lt.from("user_profiles").select("*").eq("id",w.id).single();if(S){const j={...w,...S};JSON.stringify(j)!==JSON.stringify(w)&&(console.log("Profile refreshed from DB",j),t(j),localStorage.setItem("user",JSON.stringify(j))),await g()}}}catch(E){console.error("Profile revalidation failed",E)}a(!1)},g=async()=>{try{const v=await xn.get("birfatura_api_key"),w=await xn.get("birfatura_secret_key"),E=await xn.get("birfatura_integration_key");(v.data||w.data||E.data)&&(localStorage.setItem("birfatura_config",JSON.stringify({api_key:v.data||"",secret_key:w.data||"",integration_key:E.data||""})),console.log("BirFatura settings loaded from database"))}catch(v){console.error("Failed to load company settings:",v)}};f()},[]),J.useEffect(()=>{},[r]);const x={user:r,loading:n,login:async f=>{t(f),localStorage.setItem("user",JSON.stringify(f))},logout:async()=>{try{await Bk.logout()}catch{}t(null),localStorage.removeItem("user"),localStorage.removeItem("auth_token"),localStorage.removeItem("birfatura_config"),window.location.pathname!=="/login"&&(window.location.href="/login")},hasPermission:f=>r?r.role==="kurucu"?!0:r.permissions&&r.permissions[f]===!0:!1,isAuthenticated:!!r,isKurucu:r?.role==="kurucu"||r?.username==="admin"};return l.jsx(Pk.Provider,{value:x,children:!n&&e})};function _s({children:e,permission:r}){const{isAuthenticated:t,loading:n,hasPermission:a,logout:s}=Wi(),c=Vi();return n?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):t?r&&!a(r)?l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-center p-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Yetkisiz Eriim"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Bu sayfay grntlemek iin yeterli yetkiniz bulunmamaktadr."}),l.jsxs("div",{className:"text-sm text-gray-400 mb-6",children:["Gerekli Yetki: ",r]}),l.jsx("button",{onClick:s,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors shadow-lg",children:"k Yap"})]}):e:l.jsx(gk,{to:"/login",replace:!0,state:{from:c}})}function tO({onClose:e,onSave:r}){const t={miktar_duzenle:"F2",iskonto_ekle:"F3",fiyat_duzenle:"F4",nakit_odeme:"F8",pos_odeme:"F9",musteri_sec:"F10",search_focus:"F1",tanimsiz_urun:"Insert"},[n,a]=J.useState(t),[s,c]=J.useState(null),d=["None","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Insert","Delete","Home","End","PageUp","PageDown"];J.useEffect(()=>{const v=localStorage.getItem("pos_keyboard_shortcuts");if(v)try{a({...t,...JSON.parse(v)})}catch(w){console.error("Error parsing shortcuts",w)}},[]);const x=(v,w)=>{a(E=>({...E,[v]:w})),c(null)},f=()=>{const v=Object.values(n).filter(E=>E!=="None"),w=new Set(v);if(v.length!==w.size){alert("Her tu 1 ksayola atanabilir");return}localStorage.setItem("pos_keyboard_shortcuts",JSON.stringify(n)),window.dispatchEvent(new Event("shortcutsUpdated")),r&&r(n),e()},g=[{id:"search_focus",label:"rn Arama",icon:""},{id:"tanimsiz_urun",label:"Tanmsz rn Ekle",icon:""},{id:"miktar_duzenle",label:"Miktar Dzenle",icon:""},{id:"iskonto_ekle",label:"skonto Ekle",icon:""},{id:"fiyat_duzenle",label:"Fiyat Dzenle",icon:""},{id:"musteri_sec",label:"Mteri Se",icon:""},{id:"nakit_odeme",label:"Nakit deme",icon:""},{id:"pos_odeme",label:"Kredi Kart",icon:""}];return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-[60] flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200 flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-indigo-600 p-6 flex justify-between items-center shrink-0",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white tracking-tight",children:"Klavye Ksayollar"}),l.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:"Hzl sat ilemleri iin tular zelletirin"})]}),l.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/20 hover:bg-white/30 flex items-center justify-center text-white transition-all shadow-lg shadow-black/10",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-2 bg-gray-50/50",children:l.jsx("div",{className:"grid gap-2 p-2",children:g.map(v=>l.jsxs("div",{className:`
                                    group flex items-center justify-between p-4 border transition-all duration-200
                                    ${s===v.id?"bg-white border-violet-500 shadow-lg shadow-violet-100 ring-2 ring-violet-100 transform scale-[1.02] z-10":"bg-white border-gray-100 hover:border-gray-300 hover:shadow-md"}
                                `,children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`
                                        w-12 h-12 flex items-center justify-center text-2xl shadow-sm transition-colors
                                        ${s===v.id?"bg-violet-100":"bg-gray-100 group-hover:bg-gray-200"}
                                    `,children:v.icon}),l.jsx("span",{className:"font-bold text-gray-700 text-lg",children:v.label})]}),l.jsxs("div",{className:"relative",children:[l.jsx("select",{value:n[v.id]||"None",onChange:w=>x(v.id,w.target.value),onFocus:()=>c(v.id),onBlur:()=>c(null),className:`
                                            appearance-none cursor-pointer w-28 py-2.5 pl-4 pr-8 text-center font-mono font-bold text-lg border-2 outline-none transition-all
                                            ${s===v.id?"bg-violet-50 border-violet-500 text-violet-700 shadow-inner":"bg-gray-50 border-gray-200 text-gray-600 hover:border-gray-300"}
                                        `,children:d.map(w=>l.jsx("option",{value:w,children:w},w))}),l.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]},v.id))})}),l.jsxs("div",{className:"p-6 bg-white border-t border-gray-100 shrink-0",children:[l.jsxs("button",{onClick:f,className:"w-full py-4 bg-gradient-to-r from-violet-600 to-indigo-600 hover:from-violet-700 hover:to-indigo-700 text-white font-bold text-lg shadow-lg shadow-indigo-500/30 transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[l.jsx("span",{children:"Deiiklikleri Kaydet"}),l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]}),l.jsx("button",{onClick:e,className:"w-full mt-3 py-3 text-gray-500 font-semibold hover:text-gray-700 transition-colors text-sm",children:"Vazge"})]})]})})}const rO=[{path:"/",label:"Sat",icon:"shopping_cart",permission:"can_view_pos"},{path:"/products",label:"rnler",icon:"inventory_2",permission:"can_view_products"},{path:"/customers",label:"Bakiyeler",icon:"groups",permission:"can_view_customers"},{path:"/sales",label:"Satlar",icon:"receipt_long",permission:"can_view_sales"},{path:"/invoices",label:"Faturalar",icon:"description",permission:"can_view_invoices"},{path:"/reports",label:"Raporlar",icon:"analytics",permission:"can_view_sales"},{path:"/settings",label:"Ayarlar",icon:"settings",permission:"can_view_users"}];function xo({children:e}){const{user:r,logout:t,hasPermission:n}=Wi(),a=Vi(),[s,c]=J.useState(!1),d=a.pathname==="/",x=a.pathname==="/sales",f=rO.filter(g=>n(g.permission));return l.jsxs("div",{className:`min-h-screen bg-slate-50 flex flex-col ${d?"h-screen overflow-hidden":""}`,style:{fontFamily:"'Manrope', sans-serif"},children:[l.jsxs("header",{className:"h-16 flex items-center justify-between px-6 bg-white border-b border-slate-200 z-50 flex-none shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-3 w-auto lg:w-1/4",children:[l.jsx("div",{className:"w-9 h-9 rounded-lg bg-slate-900 flex items-center justify-center text-white shadow-lg shadow-slate-900/20",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"point_of_sale"})}),l.jsx("span",{className:"font-bold text-lg text-slate-900 tracking-tight hidden sm:block",children:"Poscebimde"})]}),l.jsxs("nav",{className:"hidden md:flex items-center justify-center flex-1 gap-2",children:[f.map(g=>l.jsxs(hr,{to:g.path,className:`flex flex-col items-center justify-center px-4 lg:px-6 h-16 border-b-2 transition-all ${a.pathname===g.path?"border-blue-600 text-blue-600 bg-blue-50/50":"border-transparent text-slate-400 hover:text-slate-900 hover:bg-slate-50"}`,children:[l.jsx("span",{className:"material-symbols-outlined",children:g.icon}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider mt-0.5",children:g.label})]},g.path)),l.jsxs("button",{onClick:()=>c(!0),className:"flex flex-col items-center justify-center px-4 lg:px-6 h-16 border-b-2 border-transparent text-slate-400 hover:text-slate-900 hover:bg-slate-50 transition-all",title:"Klavye Ksayollar",children:[l.jsx("span",{className:"material-symbols-outlined",children:"keyboard"}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider mt-0.5",children:"Ksayollar"})]})]}),l.jsxs("div",{className:"flex items-center justify-end gap-4 w-auto lg:w-1/4",children:[l.jsxs("div",{className:"text-right hidden lg:block leading-tight",children:[l.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:r?.username||"Kullanc"}),l.jsx("p",{className:"text-xs font-extra-bold text-slate-900 bg-slate-100 px-2 py-0.5 rounded text-center",children:r?.role==="kurucu"?"YNETC":"PERSONEL"})]}),l.jsx("div",{className:"h-8 w-px bg-slate-200 hidden sm:block mx-1"}),l.jsx("button",{onClick:t,className:"w-9 h-9 rounded-full bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-200 flex items-center justify-center text-slate-500 hover:text-red-500 transition-colors",title:"k Yap",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"logout"})})]})]}),l.jsx("main",{className:`flex-1 w-full mx-auto 
                ${d?"overflow-hidden flex flex-col p-0":""}
                ${x?"p-0 w-full max-w-none":""}
                ${!d&&!x?"pb-20 md:pb-6 pt-4 px-4 sm:px-6 lg:px-8 max-w-[1920px]":""}
            `,children:e}),s&&l.jsx(tO,{onClose:()=>c(!1),onSave:g=>{window.dispatchEvent(new CustomEvent("shortcuts-updated",{detail:g}))}}),l.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 md:hidden z-50 pb-safe",children:l.jsx("div",{className:"grid grid-cols-5 gap-1 px-2 py-2",children:f.slice(0,5).map(g=>l.jsxs(hr,{to:g.path,className:`flex flex-col items-center justify-center py-2 rounded-xl transition-colors ${a.pathname===g.path?"text-blue-600":"text-slate-400"}`,children:[l.jsx("span",{className:"material-symbols-outlined text-xl",children:g.icon}),l.jsx("span",{className:"text-[10px] mt-0.5 font-bold",children:g.label})]},g.path))})})]})}function nO(){const[e,r]=J.useState({email:"",password:""}),[t,n]=J.useState(!1),[a,s]=J.useState(""),c=tu(),{login:d}=Wi(),x=async f=>{f.preventDefault(),s(""),n(!0);try{const g=await Bk.login(e.email,e.password);g.status===200&&(d(g.data.user),c("/"))}catch(g){const v=g.response?.data?.message||g.response?.data?.error||g.message||"Giri baarsz. Bilgilerinizi kontrol edin.";s(v)}finally{n(!1)}};return l.jsxs("div",{className:"min-h-screen antialiased text-text-main flex items-center justify-center p-4 lg:p-8 login-bg relative overflow-hidden",children:[l.jsxs("div",{className:"fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0",children:[l.jsx("div",{className:"absolute top-[-10%] left-1/4 w-[500px] h-[500px] bg-teal-200/20 rounded-full blur-[100px]"}),l.jsx("div",{className:"absolute bottom-[-10%] right-1/4 w-[600px] h-[600px] bg-sky-100/30 rounded-full blur-[100px]"})]}),l.jsxs("div",{className:"w-full max-w-6xl h-full lg:h-[85vh] flex flex-col lg:flex-row rounded-3xl overflow-hidden shadow-soft glass-card relative z-10 transition-all duration-500",children:[l.jsxs("div",{className:"hidden lg:flex lg:w-5/12 relative flex-col justify-between p-10 bg-gradient-to-br from-teal-50 to-white overflow-hidden",children:[l.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-64 h-64 bg-teal-100 rounded-full mix-blend-multiply filter blur-3xl opacity-60"}),l.jsx("div",{className:"absolute bottom-[-5%] left-[-5%] w-72 h-72 bg-emerald-50 rounded-full mix-blend-multiply filter blur-3xl opacity-60"}),l.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[l.jsx("div",{className:"size-10 bg-gradient-to-br from-primary to-teal-400 text-white rounded-xl shadow-md flex items-center justify-center",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{clipRule:"evenodd",d:"M24 0.757355L47.2426 24L24 47.2426L0.757355 24L24 0.757355ZM21 35.7574V12.2426L9.24264 24L21 35.7574Z",fill:"currentColor",fillRule:"evenodd"})})}),l.jsx("span",{className:"text-2xl font-bold tracking-tight text-slate-700",children:"Kasa POS"})]}),l.jsx("div",{className:"relative z-10 my-auto",children:l.jsxs("div",{className:"aspect-[4/3] w-full rounded-2xl shadow-xl overflow-hidden border border-white/50 relative group",children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-105",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuBuiogz1WQpIFoh5BpePE0hk1DFUE014QA2hWUj2KbFl-PaNL47BOqaR4PuP9KAT_wMnH0pE7A085jzBeSKRwatJW4zNkAPuVS0TU7a9-lCb7NkINxMMQO5k4vCZ8NqONAv1_7EQTbStUVo2kZeTs4ouqyYyqkGt6yp-KVZHWQGwJXqSfUSkWz2GuiOkp__9hIf7ZZnsW-qhnRsCEmZ2NtzgUEVwXt4Su46UDSdpqX-yZSDz2NSXKw98gu4Qw4S5wbr58YaQRNUHm0")'}}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 via-transparent to-transparent"}),l.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-6 text-white",children:[l.jsx("div",{className:"flex items-center gap-2 mb-2",children:l.jsx("span",{className:"px-2 py-1 rounded-md bg-white/20 backdrop-blur-md text-[10px] font-bold uppercase tracking-wider border border-white/10",children:"Baar Hikayesi"})}),l.jsx("p",{className:"text-base font-light leading-relaxed text-white/95",children:'"Kullanc dostu arayz sayesinde personelimiz ok daha hzl ve hatasz alyor."'})]})]})}),l.jsxs("div",{className:"relative z-10 mt-8",children:[l.jsxs("div",{className:"flex gap-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm text-primary border border-slate-100",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"cloud_queue"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-sm text-slate-700",children:"Bulut Senkronizasyon"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Her zaman gncel"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm text-primary border border-slate-100",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"security"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-sm text-slate-700",children:"Gvenli"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Utan uca ifreleme"})]})]})]}),l.jsxs("div",{className:"flex gap-4 mt-8 pt-6 border-t border-slate-200/50",children:[l.jsx("a",{className:"text-xs font-medium text-slate-400 hover:text-primary transition-colors",href:"#",children:"Hakkmzda"}),l.jsx("a",{className:"text-xs font-medium text-slate-400 hover:text-primary transition-colors",href:"#",children:"letiim"})]})]})]}),l.jsx("div",{className:"flex-1 flex flex-col justify-center items-center p-8 lg:p-16 bg-white/40 backdrop-blur-sm relative",children:l.jsxs("div",{className:"w-full max-w-[400px]",children:[l.jsx("div",{className:"flex lg:hidden items-center gap-2 mb-8 justify-center",children:l.jsx("div",{className:"size-10 bg-primary text-white rounded-xl shadow-lg flex items-center justify-center",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{clipRule:"evenodd",d:"M24 0.757355L47.2426 24L24 47.2426L0.757355 24L24 0.757355ZM21 35.7574V12.2426L9.24264 24L21 35.7574Z",fill:"currentColor",fillRule:"evenodd"})})})}),l.jsxs("div",{className:"mb-8 text-center lg:text-left",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2 tracking-tight",children:"Giri Yap"}),l.jsx("p",{className:"text-slate-500 font-normal",children:"Tekrar ho geldiniz! Hesabnza eriin."})]}),a&&l.jsxs("div",{className:"mb-6 p-4 bg-red-50/80 backdrop-blur-sm border border-red-100 rounded-xl text-red-600 text-sm flex items-center gap-2 shadow-sm animate-pulse",children:[l.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"error"}),a]}),l.jsxs("form",{onSubmit:x,className:"space-y-5",children:[l.jsxs("div",{className:"space-y-1.5 group",children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-600 ml-1",children:"E-posta"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:l.jsx("span",{className:"material-symbols-outlined text-slate-400 group-focus-within:text-primary transition-colors text-[20px]",children:"mail"})}),l.jsx("input",{className:"glass-input block w-full pl-10 pr-4 py-3 bg-white/60 border border-border-subtle rounded-xl text-sm transition-all focus:ring-4 focus:ring-primary/10 focus:border-primary outline-none text-slate-700 placeholder-slate-400 hover:border-slate-300 hover:bg-white/80",placeholder:"isim@sirket.com",type:"email",value:e.email,onChange:f=>r({...e,email:f.target.value}),required:!0})]})]}),l.jsxs("div",{className:"space-y-1.5 group",children:[l.jsx("div",{className:"flex justify-between items-center ml-1",children:l.jsx("label",{className:"block text-sm font-semibold text-slate-600",children:"ifre"})}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:l.jsx("span",{className:"material-symbols-outlined text-slate-400 group-focus-within:text-primary transition-colors text-[20px]",children:"lock"})}),l.jsx("input",{className:"glass-input block w-full pl-10 pr-10 py-3 bg-white/60 border border-border-subtle rounded-xl text-sm transition-all focus:ring-4 focus:ring-primary/10 focus:border-primary outline-none text-slate-700 placeholder-slate-400 hover:border-slate-300 hover:bg-white/80",placeholder:"",type:"password",value:e.password,onChange:f=>r({...e,password:f.target.value}),required:!0}),l.jsx("button",{className:"absolute inset-y-0 right-0 pr-3.5 flex items-center text-slate-400 hover:text-primary transition-colors focus:outline-none cursor-pointer",type:"button",children:l.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"visibility"})})]})]}),l.jsx("button",{className:"w-full flex items-center justify-center py-3.5 px-6 rounded-xl bg-primary hover:bg-primary-hover text-white font-semibold text-base shadow-lg shadow-teal-500/20 transition-all duration-200 hover:shadow-teal-500/30 hover:-translate-y-0.5 active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none",type:"submit",disabled:t,children:t?l.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Giri Yap"})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:["Kasa POS'ta yeni misiniz?",l.jsx(hr,{className:"text-primary font-bold hover:text-primary-hover hover:underline decoration-2 underline-offset-4 transition-all ml-1",to:"/register",children:"Hesap Oluturun"})]})}),l.jsx("div",{className:"mt-auto lg:hidden pt-8 text-center",children:l.jsxs("div",{className:"flex justify-center gap-6",children:[l.jsx("a",{className:"text-xs font-medium text-slate-400 hover:text-primary transition-colors",href:"#",children:"Destek"}),l.jsx("a",{className:"text-xs font-medium text-slate-400 hover:text-primary transition-colors",href:"#",children:"Gizlilik"})]})})]})})]})]})}function aO(){const[e,r]=J.useState({username:"",companyName:"",email:"",phone:"",password:"",confirmPassword:""}),[t,n]=J.useState(!1),[a,s]=J.useState(""),c=tu(),d=async x=>{if(x.preventDefault(),s(""),n(!0),e.password!==e.confirmPassword){s("ifreler elemiyor."),n(!1);return}try{const f=Math.floor(1e6+Math.random()*9e6).toString();(await Li.registerTenant({username:e.username,email:e.email,password:e.password,company_code:f})).data?.success&&c("/login")}catch(f){s(f.response?.data?.message||f.message||"Kayt srasnda bir hata olutu.")}finally{n(!1)}};return l.jsx("div",{className:"bg-surface text-text-main min-h-screen flex flex-col font-display antialiased selection:bg-mint-accent selection:text-primary-deep overflow-x-hidden",children:l.jsxs("div",{className:"flex flex-1 flex-row overflow-hidden h-screen",children:[l.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative bg-mint-light items-center justify-center p-12 overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",children:l.jsxs("svg",{height:"100%",width:"100%",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("defs",{children:l.jsx("pattern",{height:"40",id:"grid",patternUnits:"userSpaceOnUse",width:"40",children:l.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#134E4A",strokeWidth:"1"})})}),l.jsx("rect",{fill:"url(#grid)",height:"100%",width:"100%"})]})}),l.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl mix-blend-multiply"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-mint-accent rounded-full blur-3xl mix-blend-multiply"}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center max-w-md",children:[l.jsx("div",{className:"mb-8 p-6 bg-white rounded-[2rem] shadow-xl shadow-teal-100/50",children:l.jsx("svg",{className:"text-primary size-14",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{clipRule:"evenodd",d:"M24 0.757355L47.2426 24L24 47.2426L0.757355 24L24 0.757355ZM21 35.7574V12.2426L9.24264 24L21 35.7574Z",fill:"currentColor",fillRule:"evenodd"})})}),l.jsx("h2",{className:"text-primary-deep text-4xl font-extrabold tracking-tight mb-5",children:"letmenizi Dijitalletirin"}),l.jsx("p",{className:"text-text-sub text-lg font-medium leading-relaxed",children:"Modern perakende zmleriyle satlarnz artrn, envanterinizi saniyeler iinde ynetin. Gl, hzl ve gvenilir."}),l.jsxs("div",{className:"mt-12 grid grid-cols-2 gap-4 w-full",children:[l.jsxs("div",{className:"glass-badge p-5 rounded-2xl flex flex-col items-center",children:[l.jsx("span",{className:"material-symbols-outlined text-primary mb-2 text-3xl",children:"speed"}),l.jsx("p",{className:"text-primary-deep text-sm font-bold",children:"Hzl lem"})]}),l.jsxs("div",{className:"glass-badge p-5 rounded-2xl flex flex-col items-center",children:[l.jsx("span",{className:"material-symbols-outlined text-primary mb-2 text-3xl",children:"shield"}),l.jsx("p",{className:"text-primary-deep text-sm font-bold",children:"Gvenli Altyap"})]})]})]})]}),l.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col bg-white h-full overflow-y-auto relative",children:[l.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-mint-light rounded-bl-full -z-0 opacity-50 pointer-events-none"}),l.jsxs("div",{className:"lg:hidden px-6 py-6 border-b border-gray-50 flex items-center justify-between bg-white/80 backdrop-blur sticky top-0 z-20",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("svg",{className:"text-primary size-7",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{clipRule:"evenodd",d:"M24 0.757355L47.2426 24L24 47.2426L0.757355 24L24 0.757355ZM21 35.7574V12.2426L9.24264 24L21 35.7574Z",fill:"currentColor",fillRule:"evenodd"})}),l.jsx("span",{className:"font-bold text-lg text-primary-deep",children:"Kasa POS"})]}),l.jsx(hr,{className:"text-primary font-bold text-sm bg-mint-light px-4 py-2 rounded-full hover:bg-mint-accent transition-colors",to:"/login",children:"Giri Yap"})]}),l.jsx("div",{className:"flex-1 flex flex-col justify-center items-center px-6 sm:px-12 py-12 lg:py-8 z-10 w-full",children:l.jsxs("div",{className:"w-full max-w-[480px]",children:[l.jsxs("div",{className:"mb-8 text-center lg:text-left",children:[l.jsx("h1",{className:"text-text-main tracking-tight text-3xl lg:text-4xl font-extrabold mb-3",children:"Hesabnz Oluturun"}),l.jsx("p",{className:"text-text-sub text-lg",children:"Kasa POS ile iletmenizi bytmeye balayn."})]}),a&&l.jsxs("div",{className:"mb-6 p-4 bg-red-50 text-red-600 rounded-xl border border-red-100 flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"error"}),a]}),l.jsxs("form",{onSubmit:d,className:"space-y-5",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("label",{className:"text-text-main text-sm font-bold ml-1",children:"Tam Ad"}),l.jsxs("div",{className:"relative group",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-primary transition-colors text-[22px]",children:"person"}),l.jsx("input",{className:"form-input flex w-full rounded-2xl bg-gray-50 border-gray-100 focus:bg-white focus:border-primary/40 focus:ring-4 focus:ring-primary/10 transition-all duration-200 h-14 pl-12 pr-4 placeholder:text-gray-400 text-base text-text-main shadow-input outline-none",placeholder:"Ad Soyad",type:"text",value:e.username,onChange:x=>r({...e,username:x.target.value}),required:!0})]})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("label",{className:"text-text-main text-sm font-bold ml-1",children:"letme Ad"}),l.jsxs("div",{className:"relative group",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-primary transition-colors text-[22px]",children:"storefront"}),l.jsx("input",{className:"form-input flex w-full rounded-2xl bg-gray-50 border-gray-100 focus:bg-white focus:border-primary/40 focus:ring-4 focus:ring-primary/10 transition-all duration-200 h-14 pl-12 pr-4 placeholder:text-gray-400 text-base text-text-main shadow-input outline-none",placeholder:"Maaza veya irket Ad",type:"text",value:e.companyName,onChange:x=>r({...e,companyName:x.target.value})})]})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("label",{className:"text-text-main text-sm font-bold ml-1",children:"E-posta"}),l.jsxs("div",{className:"relative group",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-primary transition-colors text-[22px]",children:"mail"}),l.jsx("input",{className:"form-input flex w-full rounded-2xl bg-gray-50 border-gray-100 focus:bg-white focus:border-primary/40 focus:ring-4 focus:ring-primary/10 transition-all duration-200 h-14 pl-12 pr-4 placeholder:text-gray-400 text-base text-text-main shadow-input outline-none",placeholder:"email@ornek.com",type:"email",value:e.email,onChange:x=>r({...e,email:x.target.value}),required:!0})]})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("label",{className:"text-text-main text-sm font-bold ml-1",children:"Telefon Numaras"}),l.jsxs("div",{className:"relative group",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-primary transition-colors text-[22px]",children:"phone"}),l.jsx("input",{className:"form-input flex w-full rounded-2xl bg-gray-50 border-gray-100 focus:bg-white focus:border-primary/40 focus:ring-4 focus:ring-primary/10 transition-all duration-200 h-14 pl-12 pr-4 placeholder:text-gray-400 text-base text-text-main shadow-input outline-none",placeholder:"05XX XXX XX XX",type:"tel",value:e.phone,onChange:x=>r({...e,phone:x.target.value})})]})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("label",{className:"text-text-main text-sm font-bold ml-1",children:"ifre"}),l.jsxs("div",{className:"relative group",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-primary transition-colors text-[22px]",children:"lock"}),l.jsx("input",{className:"form-input flex w-full rounded-2xl bg-gray-50 border-gray-100 focus:bg-white focus:border-primary/40 focus:ring-4 focus:ring-primary/10 transition-all duration-200 h-14 pl-12 pr-12 placeholder:text-gray-400 text-base text-text-main shadow-input outline-none",placeholder:"",type:"password",value:e.password,onChange:x=>r({...e,password:x.target.value}),required:!0}),l.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-primary transition-colors outline-none",type:"button",children:l.jsx("span",{className:"material-symbols-outlined",children:"visibility_off"})})]})]}),l.jsxs("div",{className:"flex items-start gap-3 py-2 ml-1",children:[l.jsx("div",{className:"flex items-center h-5",children:l.jsx("input",{className:"w-5 h-5 text-primary border-gray-300 rounded focus:ring-primary focus:ring-offset-0 cursor-pointer",id:"terms",type:"checkbox",required:!0})}),l.jsxs("label",{className:"text-sm text-text-sub",htmlFor:"terms",children:[l.jsx("a",{className:"text-primary hover:text-primary-hover font-bold hover:underline",href:"#",children:"Kullanm artlar"})," ve ",l.jsx("a",{className:"text-primary hover:text-primary-hover font-bold hover:underline",href:"#",children:"Gizlilik Politikas"}),"'n kabul ediyorum."]})]}),l.jsx("button",{className:"w-full bg-primary hover:bg-primary-hover text-white py-4 rounded-2xl font-bold text-lg transition-all shadow-soft hover:shadow-lg hover:-translate-y-0.5 mt-2 disabled:opacity-70 disabled:cursor-not-allowed",type:"submit",disabled:t,children:t?l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Kayt Yaplyor..."]}):"Kayt Ol"})]}),l.jsx("div",{className:"mt-8 pt-8 border-t border-gray-50 text-center",children:l.jsxs("p",{className:"text-text-sub",children:["Zaten bir hesabnz var m?",l.jsx(hr,{className:"text-primary font-bold hover:underline ml-1",to:"/login",children:"Giri Yap"})]})})]})})]})]})})}function sO(){const e=tu();return J.useEffect(()=>{const r=setTimeout(()=>{e("/login")},5e3);return()=>clearTimeout(r)},[e]),l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden text-center p-8",children:[l.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Tebrikler!"}),l.jsx("p",{className:"text-gray-600 mb-8",children:"E-posta adresiniz baaryla doruland. Hesabnz artk aktif."}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("button",{onClick:()=>e("/login"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-xl transition-all shadow-md hover:shadow-lg",children:"Giri Yap"}),l.jsx("p",{className:"text-sm text-gray-500",children:"5 saniye iinde otomatik olarak ynlendirileceksiniz..."})]})]})})}function Uk(e,r){return function(){return e.apply(r,arguments)}}const{toString:iO}=Object.prototype,{getPrototypeOf:W2}=Object,{iterator:Dx,toStringTag:zk}=Symbol,Mx=(e=>r=>{const t=iO.call(r);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Si=e=>(e=e.toLowerCase(),r=>Mx(r)===e),Fx=e=>r=>typeof r===e,{isArray:ru}=Array,q0=Fx("undefined");function uf(e){return e!==null&&!q0(e)&&e.constructor!==null&&!q0(e.constructor)&&os(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Hk=Si("ArrayBuffer");function lO(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&Hk(e.buffer),r}const oO=Fx("string"),os=Fx("function"),Gk=Fx("number"),df=e=>e!==null&&typeof e=="object",cO=e=>e===!0||e===!1,Q1=e=>{if(Mx(e)!=="object")return!1;const r=W2(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(zk in e)&&!(Dx in e)},uO=e=>{if(!df(e)||uf(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},dO=Si("Date"),fO=Si("File"),hO=Si("Blob"),xO=Si("FileList"),mO=e=>df(e)&&os(e.pipe),gO=e=>{let r;return e&&(typeof FormData=="function"&&e instanceof FormData||os(e.append)&&((r=Mx(e))==="formdata"||r==="object"&&os(e.toString)&&e.toString()==="[object FormData]"))},pO=Si("URLSearchParams"),[bO,vO,yO,wO]=["ReadableStream","Request","Response","Headers"].map(Si),_O=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ff(e,r,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),ru(e))for(n=0,a=e.length;n<a;n++)r.call(null,e[n],n,e);else{if(uf(e))return;const s=t?Object.getOwnPropertyNames(e):Object.keys(e),c=s.length;let d;for(n=0;n<c;n++)d=s[n],r.call(null,e[d],d,e)}}function Vk(e,r){if(uf(e))return null;r=r.toLowerCase();const t=Object.keys(e);let n=t.length,a;for(;n-- >0;)if(a=t[n],r===a.toLowerCase())return a;return null}const uc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Wk=e=>!q0(e)&&e!==uc;function a2(){const{caseless:e,skipUndefined:r}=Wk(this)&&this||{},t={},n=(a,s)=>{const c=e&&Vk(t,s)||s;Q1(t[c])&&Q1(a)?t[c]=a2(t[c],a):Q1(a)?t[c]=a2({},a):ru(a)?t[c]=a.slice():(!r||!q0(a))&&(t[c]=a)};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&ff(arguments[a],n);return t}const EO=(e,r,t,{allOwnKeys:n}={})=>(ff(r,(a,s)=>{t&&os(a)?e[s]=Uk(a,t):e[s]=a},{allOwnKeys:n}),e),kO=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),SO=(e,r,t,n)=>{e.prototype=Object.create(r.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),t&&Object.assign(e.prototype,t)},NO=(e,r,t,n)=>{let a,s,c;const d={};if(r=r||{},e==null)return r;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)c=a[s],(!n||n(c,e,r))&&!d[c]&&(r[c]=e[c],d[c]=!0);e=t!==!1&&W2(e)}while(e&&(!t||t(e,r))&&e!==Object.prototype);return r},AO=(e,r,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=r.length;const n=e.indexOf(r,t);return n!==-1&&n===t},TO=e=>{if(!e)return null;if(ru(e))return e;let r=e.length;if(!Gk(r))return null;const t=new Array(r);for(;r-- >0;)t[r]=e[r];return t},CO=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&W2(Uint8Array)),jO=(e,r)=>{const n=(e&&e[Dx]).call(e);let a;for(;(a=n.next())&&!a.done;){const s=a.value;r.call(e,s[0],s[1])}},OO=(e,r)=>{let t;const n=[];for(;(t=e.exec(r))!==null;)n.push(t);return n},RO=Si("HTMLFormElement"),IO=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,a){return n.toUpperCase()+a}),O_=(({hasOwnProperty:e})=>(r,t)=>e.call(r,t))(Object.prototype),DO=Si("RegExp"),qk=(e,r)=>{const t=Object.getOwnPropertyDescriptors(e),n={};ff(t,(a,s)=>{let c;(c=r(a,s,e))!==!1&&(n[s]=c||a)}),Object.defineProperties(e,n)},MO=e=>{qk(e,(r,t)=>{if(os(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=e[t];if(os(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},FO=(e,r)=>{const t={},n=a=>{a.forEach(s=>{t[s]=!0})};return ru(e)?n(e):n(String(e).split(r)),t},LO=()=>{},BO=(e,r)=>e!=null&&Number.isFinite(e=+e)?e:r;function PO(e){return!!(e&&os(e.append)&&e[zk]==="FormData"&&e[Dx])}const UO=e=>{const r=new Array(10),t=(n,a)=>{if(df(n)){if(r.indexOf(n)>=0)return;if(uf(n))return n;if(!("toJSON"in n)){r[a]=n;const s=ru(n)?[]:{};return ff(n,(c,d)=>{const x=t(c,a+1);!q0(x)&&(s[d]=x)}),r[a]=void 0,s}}return n};return t(e,0)},zO=Si("AsyncFunction"),HO=e=>e&&(df(e)||os(e))&&os(e.then)&&os(e.catch),Xk=((e,r)=>e?setImmediate:r?((t,n)=>(uc.addEventListener("message",({source:a,data:s})=>{a===uc&&s===t&&n.length&&n.shift()()},!1),a=>{n.push(a),uc.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",os(uc.postMessage)),GO=typeof queueMicrotask<"u"?queueMicrotask.bind(uc):typeof process<"u"&&process.nextTick||Xk,VO=e=>e!=null&&os(e[Dx]),st={isArray:ru,isArrayBuffer:Hk,isBuffer:uf,isFormData:gO,isArrayBufferView:lO,isString:oO,isNumber:Gk,isBoolean:cO,isObject:df,isPlainObject:Q1,isEmptyObject:uO,isReadableStream:bO,isRequest:vO,isResponse:yO,isHeaders:wO,isUndefined:q0,isDate:dO,isFile:fO,isBlob:hO,isRegExp:DO,isFunction:os,isStream:mO,isURLSearchParams:pO,isTypedArray:CO,isFileList:xO,forEach:ff,merge:a2,extend:EO,trim:_O,stripBOM:kO,inherits:SO,toFlatObject:NO,kindOf:Mx,kindOfTest:Si,endsWith:AO,toArray:TO,forEachEntry:jO,matchAll:OO,isHTMLForm:RO,hasOwnProperty:O_,hasOwnProp:O_,reduceDescriptors:qk,freezeMethods:MO,toObjectSet:FO,toCamelCase:IO,noop:LO,toFiniteNumber:BO,findKey:Vk,global:uc,isContextDefined:Wk,isSpecCompliantForm:PO,toJSONObject:UO,isAsyncFn:zO,isThenable:HO,setImmediate:Xk,asap:GO,isIterable:VO};function pr(e,r,t,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),t&&(this.config=t),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}st.inherits(pr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:st.toJSONObject(this.config),code:this.code,status:this.status}}});const Kk=pr.prototype,Yk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Yk[e]={value:e}});Object.defineProperties(pr,Yk);Object.defineProperty(Kk,"isAxiosError",{value:!0});pr.from=(e,r,t,n,a,s)=>{const c=Object.create(Kk);st.toFlatObject(e,c,function(g){return g!==Error.prototype},f=>f!=="isAxiosError");const d=e&&e.message?e.message:"Error",x=r==null&&e?e.code:r;return pr.call(c,d,x,t,n,a),e&&c.cause==null&&Object.defineProperty(c,"cause",{value:e,configurable:!0}),c.name=e&&e.name||"Error",s&&Object.assign(c,s),c};const WO=null;function s2(e){return st.isPlainObject(e)||st.isArray(e)}function $k(e){return st.endsWith(e,"[]")?e.slice(0,-2):e}function R_(e,r,t){return e?e.concat(r).map(function(a,s){return a=$k(a),!t&&s?"["+a+"]":a}).join(t?".":""):r}function qO(e){return st.isArray(e)&&!e.some(s2)}const XO=st.toFlatObject(st,{},null,function(r){return/^is[A-Z]/.test(r)});function Lx(e,r,t){if(!st.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,t=st.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,T){return!st.isUndefined(T[S])});const n=t.metaTokens,a=t.visitor||g,s=t.dots,c=t.indexes,x=(t.Blob||typeof Blob<"u"&&Blob)&&st.isSpecCompliantForm(r);if(!st.isFunction(a))throw new TypeError("visitor must be a function");function f(N){if(N===null)return"";if(st.isDate(N))return N.toISOString();if(st.isBoolean(N))return N.toString();if(!x&&st.isBlob(N))throw new pr("Blob is not supported. Use a Buffer instead.");return st.isArrayBuffer(N)||st.isTypedArray(N)?x&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function g(N,S,T){let j=N;if(N&&!T&&typeof N=="object"){if(st.endsWith(S,"{}"))S=n?S:S.slice(0,-2),N=JSON.stringify(N);else if(st.isArray(N)&&qO(N)||(st.isFileList(N)||st.endsWith(S,"[]"))&&(j=st.toArray(N)))return S=$k(S),j.forEach(function(I,L){!(st.isUndefined(I)||I===null)&&r.append(c===!0?R_([S],L,s):c===null?S:S+"[]",f(I))}),!1}return s2(N)?!0:(r.append(R_(T,S,s),f(N)),!1)}const v=[],w=Object.assign(XO,{defaultVisitor:g,convertValue:f,isVisitable:s2});function E(N,S){if(!st.isUndefined(N)){if(v.indexOf(N)!==-1)throw Error("Circular reference detected in "+S.join("."));v.push(N),st.forEach(N,function(j,D){(!(st.isUndefined(j)||j===null)&&a.call(r,j,st.isString(D)?D.trim():D,S,w))===!0&&E(j,S?S.concat(D):[D])}),v.pop()}}if(!st.isObject(e))throw new TypeError("data must be an object");return E(e),r}function I_(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function q2(e,r){this._pairs=[],e&&Lx(e,this,r)}const Zk=q2.prototype;Zk.append=function(r,t){this._pairs.push([r,t])};Zk.toString=function(r){const t=r?function(n){return r.call(this,n,I_)}:I_;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function KO(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Jk(e,r,t){if(!r)return e;const n=t&&t.encode||KO;st.isFunction(t)&&(t={serialize:t});const a=t&&t.serialize;let s;if(a?s=a(r,t):s=st.isURLSearchParams(r)?r.toString():new q2(r,t).toString(n),s){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class D_{constructor(){this.handlers=[]}use(r,t,n){return this.handlers.push({fulfilled:r,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){st.forEach(this.handlers,function(n){n!==null&&r(n)})}}const Qk={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},YO=typeof URLSearchParams<"u"?URLSearchParams:q2,$O=typeof FormData<"u"?FormData:null,ZO=typeof Blob<"u"?Blob:null,JO={isBrowser:!0,classes:{URLSearchParams:YO,FormData:$O,Blob:ZO},protocols:["http","https","file","blob","url","data"]},X2=typeof window<"u"&&typeof document<"u",i2=typeof navigator=="object"&&navigator||void 0,QO=X2&&(!i2||["ReactNative","NativeScript","NS"].indexOf(i2.product)<0),eR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tR=X2&&window.location.href||"http://localhost",rR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:X2,hasStandardBrowserEnv:QO,hasStandardBrowserWebWorkerEnv:eR,navigator:i2,origin:tR},Symbol.toStringTag,{value:"Module"})),Ba={...rR,...JO};function nR(e,r){return Lx(e,new Ba.classes.URLSearchParams,{visitor:function(t,n,a,s){return Ba.isNode&&st.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...r})}function aR(e){return st.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function sR(e){const r={},t=Object.keys(e);let n;const a=t.length;let s;for(n=0;n<a;n++)s=t[n],r[s]=e[s];return r}function eS(e){function r(t,n,a,s){let c=t[s++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),x=s>=t.length;return c=!c&&st.isArray(a)?a.length:c,x?(st.hasOwnProp(a,c)?a[c]=[a[c],n]:a[c]=n,!d):((!a[c]||!st.isObject(a[c]))&&(a[c]=[]),r(t,n,a[c],s)&&st.isArray(a[c])&&(a[c]=sR(a[c])),!d)}if(st.isFormData(e)&&st.isFunction(e.entries)){const t={};return st.forEachEntry(e,(n,a)=>{r(aR(n),a,t,0)}),t}return null}function iR(e,r,t){if(st.isString(e))try{return(r||JSON.parse)(e),st.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(e)}const hf={transitional:Qk,adapter:["xhr","http","fetch"],transformRequest:[function(r,t){const n=t.getContentType()||"",a=n.indexOf("application/json")>-1,s=st.isObject(r);if(s&&st.isHTMLForm(r)&&(r=new FormData(r)),st.isFormData(r))return a?JSON.stringify(eS(r)):r;if(st.isArrayBuffer(r)||st.isBuffer(r)||st.isStream(r)||st.isFile(r)||st.isBlob(r)||st.isReadableStream(r))return r;if(st.isArrayBufferView(r))return r.buffer;if(st.isURLSearchParams(r))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let d;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return nR(r,this.formSerializer).toString();if((d=st.isFileList(r))||n.indexOf("multipart/form-data")>-1){const x=this.env&&this.env.FormData;return Lx(d?{"files[]":r}:r,x&&new x,this.formSerializer)}}return s||a?(t.setContentType("application/json",!1),iR(r)):r}],transformResponse:[function(r){const t=this.transitional||hf.transitional,n=t&&t.forcedJSONParsing,a=this.responseType==="json";if(st.isResponse(r)||st.isReadableStream(r))return r;if(r&&st.isString(r)&&(n&&!this.responseType||a)){const c=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(r,this.parseReviver)}catch(d){if(c)throw d.name==="SyntaxError"?pr.from(d,pr.ERR_BAD_RESPONSE,this,null,this.response):d}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ba.classes.FormData,Blob:Ba.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};st.forEach(["delete","get","head","post","put","patch"],e=>{hf.headers[e]={}});const lR=st.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oR=e=>{const r={};let t,n,a;return e&&e.split(`
`).forEach(function(c){a=c.indexOf(":"),t=c.substring(0,a).trim().toLowerCase(),n=c.substring(a+1).trim(),!(!t||r[t]&&lR[t])&&(t==="set-cookie"?r[t]?r[t].push(n):r[t]=[n]:r[t]=r[t]?r[t]+", "+n:n)}),r},M_=Symbol("internals");function rd(e){return e&&String(e).trim().toLowerCase()}function ex(e){return e===!1||e==null?e:st.isArray(e)?e.map(ex):String(e)}function cR(e){const r=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(e);)r[n[1]]=n[2];return r}const uR=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function dp(e,r,t,n,a){if(st.isFunction(n))return n.call(this,r,t);if(a&&(r=t),!!st.isString(r)){if(st.isString(n))return r.indexOf(n)!==-1;if(st.isRegExp(n))return n.test(r)}}function dR(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,t,n)=>t.toUpperCase()+n)}function fR(e,r){const t=st.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+t,{value:function(a,s,c){return this[n].call(this,r,a,s,c)},configurable:!0})})}let cs=class{constructor(r){r&&this.set(r)}set(r,t,n){const a=this;function s(d,x,f){const g=rd(x);if(!g)throw new Error("header name must be a non-empty string");const v=st.findKey(a,g);(!v||a[v]===void 0||f===!0||f===void 0&&a[v]!==!1)&&(a[v||x]=ex(d))}const c=(d,x)=>st.forEach(d,(f,g)=>s(f,g,x));if(st.isPlainObject(r)||r instanceof this.constructor)c(r,t);else if(st.isString(r)&&(r=r.trim())&&!uR(r))c(oR(r),t);else if(st.isObject(r)&&st.isIterable(r)){let d={},x,f;for(const g of r){if(!st.isArray(g))throw TypeError("Object iterator must return a key-value pair");d[f=g[0]]=(x=d[f])?st.isArray(x)?[...x,g[1]]:[x,g[1]]:g[1]}c(d,t)}else r!=null&&s(t,r,n);return this}get(r,t){if(r=rd(r),r){const n=st.findKey(this,r);if(n){const a=this[n];if(!t)return a;if(t===!0)return cR(a);if(st.isFunction(t))return t.call(this,a,n);if(st.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,t){if(r=rd(r),r){const n=st.findKey(this,r);return!!(n&&this[n]!==void 0&&(!t||dp(this,this[n],n,t)))}return!1}delete(r,t){const n=this;let a=!1;function s(c){if(c=rd(c),c){const d=st.findKey(n,c);d&&(!t||dp(n,n[d],d,t))&&(delete n[d],a=!0)}}return st.isArray(r)?r.forEach(s):s(r),a}clear(r){const t=Object.keys(this);let n=t.length,a=!1;for(;n--;){const s=t[n];(!r||dp(this,this[s],s,r,!0))&&(delete this[s],a=!0)}return a}normalize(r){const t=this,n={};return st.forEach(this,(a,s)=>{const c=st.findKey(n,s);if(c){t[c]=ex(a),delete t[s];return}const d=r?dR(s):String(s).trim();d!==s&&delete t[s],t[d]=ex(a),n[d]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const t=Object.create(null);return st.forEach(this,(n,a)=>{n!=null&&n!==!1&&(t[a]=r&&st.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,t])=>r+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...t){const n=new this(r);return t.forEach(a=>n.set(a)),n}static accessor(r){const n=(this[M_]=this[M_]={accessors:{}}).accessors,a=this.prototype;function s(c){const d=rd(c);n[d]||(fR(a,c),n[d]=!0)}return st.isArray(r)?r.forEach(s):s(r),this}};cs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);st.reduceDescriptors(cs.prototype,({value:e},r)=>{let t=r[0].toUpperCase()+r.slice(1);return{get:()=>e,set(n){this[t]=n}}});st.freezeMethods(cs);function fp(e,r){const t=this||hf,n=r||t,a=cs.from(n.headers);let s=n.data;return st.forEach(e,function(d){s=d.call(t,s,a.normalize(),r?r.status:void 0)}),a.normalize(),s}function tS(e){return!!(e&&e.__CANCEL__)}function nu(e,r,t){pr.call(this,e??"canceled",pr.ERR_CANCELED,r,t),this.name="CanceledError"}st.inherits(nu,pr,{__CANCEL__:!0});function rS(e,r,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?e(t):r(new pr("Request failed with status code "+t.status,[pr.ERR_BAD_REQUEST,pr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function hR(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function xR(e,r){e=e||10;const t=new Array(e),n=new Array(e);let a=0,s=0,c;return r=r!==void 0?r:1e3,function(x){const f=Date.now(),g=n[s];c||(c=f),t[a]=x,n[a]=f;let v=s,w=0;for(;v!==a;)w+=t[v++],v=v%e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),f-c<r)return;const E=g&&f-g;return E?Math.round(w*1e3/E):void 0}}function mR(e,r){let t=0,n=1e3/r,a,s;const c=(f,g=Date.now())=>{t=g,a=null,s&&(clearTimeout(s),s=null),e(...f)};return[(...f)=>{const g=Date.now(),v=g-t;v>=n?c(f,g):(a=f,s||(s=setTimeout(()=>{s=null,c(a)},n-v)))},()=>a&&c(a)]}const cx=(e,r,t=3)=>{let n=0;const a=xR(50,250);return mR(s=>{const c=s.loaded,d=s.lengthComputable?s.total:void 0,x=c-n,f=a(x),g=c<=d;n=c;const v={loaded:c,total:d,progress:d?c/d:void 0,bytes:x,rate:f||void 0,estimated:f&&d&&g?(d-c)/f:void 0,event:s,lengthComputable:d!=null,[r?"download":"upload"]:!0};e(v)},t)},F_=(e,r)=>{const t=e!=null;return[n=>r[0]({lengthComputable:t,total:e,loaded:n}),r[1]]},L_=e=>(...r)=>st.asap(()=>e(...r)),gR=Ba.hasStandardBrowserEnv?((e,r)=>t=>(t=new URL(t,Ba.origin),e.protocol===t.protocol&&e.host===t.host&&(r||e.port===t.port)))(new URL(Ba.origin),Ba.navigator&&/(msie|trident)/i.test(Ba.navigator.userAgent)):()=>!0,pR=Ba.hasStandardBrowserEnv?{write(e,r,t,n,a,s,c){if(typeof document>"u")return;const d=[`${e}=${encodeURIComponent(r)}`];st.isNumber(t)&&d.push(`expires=${new Date(t).toUTCString()}`),st.isString(n)&&d.push(`path=${n}`),st.isString(a)&&d.push(`domain=${a}`),s===!0&&d.push("secure"),st.isString(c)&&d.push(`SameSite=${c}`),document.cookie=d.join("; ")},read(e){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function bR(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function vR(e,r){return r?e.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):e}function nS(e,r,t){let n=!bR(r);return e&&(n||t==!1)?vR(e,r):r}const B_=e=>e instanceof cs?{...e}:e;function yc(e,r){r=r||{};const t={};function n(f,g,v,w){return st.isPlainObject(f)&&st.isPlainObject(g)?st.merge.call({caseless:w},f,g):st.isPlainObject(g)?st.merge({},g):st.isArray(g)?g.slice():g}function a(f,g,v,w){if(st.isUndefined(g)){if(!st.isUndefined(f))return n(void 0,f,v,w)}else return n(f,g,v,w)}function s(f,g){if(!st.isUndefined(g))return n(void 0,g)}function c(f,g){if(st.isUndefined(g)){if(!st.isUndefined(f))return n(void 0,f)}else return n(void 0,g)}function d(f,g,v){if(v in r)return n(f,g);if(v in e)return n(void 0,f)}const x={url:s,method:s,data:s,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(f,g,v)=>a(B_(f),B_(g),v,!0)};return st.forEach(Object.keys({...e,...r}),function(g){const v=x[g]||a,w=v(e[g],r[g],g);st.isUndefined(w)&&v!==d||(t[g]=w)}),t}const aS=e=>{const r=yc({},e);let{data:t,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:c,auth:d}=r;if(r.headers=c=cs.from(c),r.url=Jk(nS(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),st.isFormData(t)){if(Ba.hasStandardBrowserEnv||Ba.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(st.isFunction(t.getHeaders)){const x=t.getHeaders(),f=["content-type","content-length"];Object.entries(x).forEach(([g,v])=>{f.includes(g.toLowerCase())&&c.set(g,v)})}}if(Ba.hasStandardBrowserEnv&&(n&&st.isFunction(n)&&(n=n(r)),n||n!==!1&&gR(r.url))){const x=a&&s&&pR.read(s);x&&c.set(a,x)}return r},yR=typeof XMLHttpRequest<"u",wR=yR&&function(e){return new Promise(function(t,n){const a=aS(e);let s=a.data;const c=cs.from(a.headers).normalize();let{responseType:d,onUploadProgress:x,onDownloadProgress:f}=a,g,v,w,E,N;function S(){E&&E(),N&&N(),a.cancelToken&&a.cancelToken.unsubscribe(g),a.signal&&a.signal.removeEventListener("abort",g)}let T=new XMLHttpRequest;T.open(a.method.toUpperCase(),a.url,!0),T.timeout=a.timeout;function j(){if(!T)return;const I=cs.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),V={data:!d||d==="text"||d==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:I,config:e,request:T};rS(function(M){t(M),S()},function(M){n(M),S()},V),T=null}"onloadend"in T?T.onloadend=j:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(j)},T.onabort=function(){T&&(n(new pr("Request aborted",pr.ECONNABORTED,e,T)),T=null)},T.onerror=function(L){const V=L&&L.message?L.message:"Network Error",X=new pr(V,pr.ERR_NETWORK,e,T);X.event=L||null,n(X),T=null},T.ontimeout=function(){let L=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const V=a.transitional||Qk;a.timeoutErrorMessage&&(L=a.timeoutErrorMessage),n(new pr(L,V.clarifyTimeoutError?pr.ETIMEDOUT:pr.ECONNABORTED,e,T)),T=null},s===void 0&&c.setContentType(null),"setRequestHeader"in T&&st.forEach(c.toJSON(),function(L,V){T.setRequestHeader(V,L)}),st.isUndefined(a.withCredentials)||(T.withCredentials=!!a.withCredentials),d&&d!=="json"&&(T.responseType=a.responseType),f&&([w,N]=cx(f,!0),T.addEventListener("progress",w)),x&&T.upload&&([v,E]=cx(x),T.upload.addEventListener("progress",v),T.upload.addEventListener("loadend",E)),(a.cancelToken||a.signal)&&(g=I=>{T&&(n(!I||I.type?new nu(null,e,T):I),T.abort(),T=null)},a.cancelToken&&a.cancelToken.subscribe(g),a.signal&&(a.signal.aborted?g():a.signal.addEventListener("abort",g)));const D=hR(a.url);if(D&&Ba.protocols.indexOf(D)===-1){n(new pr("Unsupported protocol "+D+":",pr.ERR_BAD_REQUEST,e));return}T.send(s||null)})},_R=(e,r)=>{const{length:t}=e=e?e.filter(Boolean):[];if(r||t){let n=new AbortController,a;const s=function(f){if(!a){a=!0,d();const g=f instanceof Error?f:this.reason;n.abort(g instanceof pr?g:new nu(g instanceof Error?g.message:g))}};let c=r&&setTimeout(()=>{c=null,s(new pr(`timeout ${r} of ms exceeded`,pr.ETIMEDOUT))},r);const d=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),e=null)};e.forEach(f=>f.addEventListener("abort",s));const{signal:x}=n;return x.unsubscribe=()=>st.asap(d),x}},ER=function*(e,r){let t=e.byteLength;if(t<r){yield e;return}let n=0,a;for(;n<t;)a=n+r,yield e.slice(n,a),n=a},kR=async function*(e,r){for await(const t of SR(e))yield*ER(t,r)},SR=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const r=e.getReader();try{for(;;){const{done:t,value:n}=await r.read();if(t)break;yield n}}finally{await r.cancel()}},P_=(e,r,t,n)=>{const a=kR(e,r);let s=0,c,d=x=>{c||(c=!0,n&&n(x))};return new ReadableStream({async pull(x){try{const{done:f,value:g}=await a.next();if(f){d(),x.close();return}let v=g.byteLength;if(t){let w=s+=v;t(w)}x.enqueue(new Uint8Array(g))}catch(f){throw d(f),f}},cancel(x){return d(x),a.return()}},{highWaterMark:2})},U_=64*1024,{isFunction:Zh}=st,NR=(({Request:e,Response:r})=>({Request:e,Response:r}))(st.global),{ReadableStream:z_,TextEncoder:H_}=st.global,G_=(e,...r)=>{try{return!!e(...r)}catch{return!1}},AR=e=>{e=st.merge.call({skipUndefined:!0},NR,e);const{fetch:r,Request:t,Response:n}=e,a=r?Zh(r):typeof fetch=="function",s=Zh(t),c=Zh(n);if(!a)return!1;const d=a&&Zh(z_),x=a&&(typeof H_=="function"?(N=>S=>N.encode(S))(new H_):async N=>new Uint8Array(await new t(N).arrayBuffer())),f=s&&d&&G_(()=>{let N=!1;const S=new t(Ba.origin,{body:new z_,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!S}),g=c&&d&&G_(()=>st.isReadableStream(new n("").body)),v={stream:g&&(N=>N.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!v[N]&&(v[N]=(S,T)=>{let j=S&&S[N];if(j)return j.call(S);throw new pr(`Response type '${N}' is not supported`,pr.ERR_NOT_SUPPORT,T)})});const w=async N=>{if(N==null)return 0;if(st.isBlob(N))return N.size;if(st.isSpecCompliantForm(N))return(await new t(Ba.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(st.isArrayBufferView(N)||st.isArrayBuffer(N))return N.byteLength;if(st.isURLSearchParams(N)&&(N=N+""),st.isString(N))return(await x(N)).byteLength},E=async(N,S)=>{const T=st.toFiniteNumber(N.getContentLength());return T??w(S)};return async N=>{let{url:S,method:T,data:j,signal:D,cancelToken:I,timeout:L,onDownloadProgress:V,onUploadProgress:X,responseType:M,headers:W,withCredentials:z="same-origin",fetchOptions:ae}=aS(N),Z=r||fetch;M=M?(M+"").toLowerCase():"text";let H=_R([D,I&&I.toAbortSignal()],L),he=null;const q=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let se;try{if(X&&f&&T!=="get"&&T!=="head"&&(se=await E(W,j))!==0){let Q=new t(S,{method:"POST",body:j,duplex:"half"}),B;if(st.isFormData(j)&&(B=Q.headers.get("content-type"))&&W.setContentType(B),Q.body){const[te,U]=F_(se,cx(L_(X)));j=P_(Q.body,U_,te,U)}}st.isString(z)||(z=z?"include":"omit");const ve=s&&"credentials"in t.prototype,le={...ae,signal:H,method:T.toUpperCase(),headers:W.normalize().toJSON(),body:j,duplex:"half",credentials:ve?z:void 0};he=s&&new t(S,le);let ge=await(s?Z(he,ae):Z(S,le));const ie=g&&(M==="stream"||M==="response");if(g&&(V||ie&&q)){const Q={};["status","statusText","headers"].forEach(P=>{Q[P]=ge[P]});const B=st.toFiniteNumber(ge.headers.get("content-length")),[te,U]=V&&F_(B,cx(L_(V),!0))||[];ge=new n(P_(ge.body,U_,te,()=>{U&&U(),q&&q()}),Q)}M=M||"text";let Le=await v[st.findKey(v,M)||"text"](ge,N);return!ie&&q&&q(),await new Promise((Q,B)=>{rS(Q,B,{data:Le,headers:cs.from(ge.headers),status:ge.status,statusText:ge.statusText,config:N,request:he})})}catch(ve){throw q&&q(),ve&&ve.name==="TypeError"&&/Load failed|fetch/i.test(ve.message)?Object.assign(new pr("Network Error",pr.ERR_NETWORK,N,he),{cause:ve.cause||ve}):pr.from(ve,ve&&ve.code,N,he)}}},TR=new Map,sS=e=>{let r=e&&e.env||{};const{fetch:t,Request:n,Response:a}=r,s=[n,a,t];let c=s.length,d=c,x,f,g=TR;for(;d--;)x=s[d],f=g.get(x),f===void 0&&g.set(x,f=d?new Map:AR(r)),g=f;return f};sS();const K2={http:WO,xhr:wR,fetch:{get:sS}};st.forEach(K2,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const V_=e=>`- ${e}`,CR=e=>st.isFunction(e)||e===null||e===!1;function jR(e,r){e=st.isArray(e)?e:[e];const{length:t}=e;let n,a;const s={};for(let c=0;c<t;c++){n=e[c];let d;if(a=n,!CR(n)&&(a=K2[(d=String(n)).toLowerCase()],a===void 0))throw new pr(`Unknown adapter '${d}'`);if(a&&(st.isFunction(a)||(a=a.get(r))))break;s[d||"#"+c]=a}if(!a){const c=Object.entries(s).map(([x,f])=>`adapter ${x} `+(f===!1?"is not supported by the environment":"is not available in the build"));let d=t?c.length>1?`since :
`+c.map(V_).join(`
`):" "+V_(c[0]):"as no adapter specified";throw new pr("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a}const iS={getAdapter:jR,adapters:K2};function hp(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new nu(null,e)}function W_(e){return hp(e),e.headers=cs.from(e.headers),e.data=fp.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),iS.getAdapter(e.adapter||hf.adapter,e)(e).then(function(n){return hp(e),n.data=fp.call(e,e.transformResponse,n),n.headers=cs.from(n.headers),n},function(n){return tS(n)||(hp(e),n&&n.response&&(n.response.data=fp.call(e,e.transformResponse,n.response),n.response.headers=cs.from(n.response.headers))),Promise.reject(n)})}const lS="1.13.2",Bx={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{Bx[e]=function(n){return typeof n===e||"a"+(r<1?"n ":" ")+e}});const q_={};Bx.transitional=function(r,t,n){function a(s,c){return"[Axios v"+lS+"] Transitional option '"+s+"'"+c+(n?". "+n:"")}return(s,c,d)=>{if(r===!1)throw new pr(a(c," has been removed"+(t?" in "+t:"")),pr.ERR_DEPRECATED);return t&&!q_[c]&&(q_[c]=!0,console.warn(a(c," has been deprecated since v"+t+" and will be removed in the near future"))),r?r(s,c,d):!0}};Bx.spelling=function(r){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${r}`),!0)};function OR(e,r,t){if(typeof e!="object")throw new pr("options must be an object",pr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const s=n[a],c=r[s];if(c){const d=e[s],x=d===void 0||c(d,s,e);if(x!==!0)throw new pr("option "+s+" must be "+x,pr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new pr("Unknown option "+s,pr.ERR_BAD_OPTION)}}const tx={assertOptions:OR,validators:Bx},Di=tx.validators;let mc=class{constructor(r){this.defaults=r||{},this.interceptors={request:new D_,response:new D_}}async request(r,t){try{return await this._request(r,t)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const s=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(r,t){typeof r=="string"?(t=t||{},t.url=r):t=r||{},t=yc(this.defaults,t);const{transitional:n,paramsSerializer:a,headers:s}=t;n!==void 0&&tx.assertOptions(n,{silentJSONParsing:Di.transitional(Di.boolean),forcedJSONParsing:Di.transitional(Di.boolean),clarifyTimeoutError:Di.transitional(Di.boolean)},!1),a!=null&&(st.isFunction(a)?t.paramsSerializer={serialize:a}:tx.assertOptions(a,{encode:Di.function,serialize:Di.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),tx.assertOptions(t,{baseUrl:Di.spelling("baseURL"),withXsrfToken:Di.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=s&&st.merge(s.common,s[t.method]);s&&st.forEach(["delete","get","head","post","put","patch","common"],N=>{delete s[N]}),t.headers=cs.concat(c,s);const d=[];let x=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(t)===!1||(x=x&&S.synchronous,d.unshift(S.fulfilled,S.rejected))});const f=[];this.interceptors.response.forEach(function(S){f.push(S.fulfilled,S.rejected)});let g,v=0,w;if(!x){const N=[W_.bind(this),void 0];for(N.unshift(...d),N.push(...f),w=N.length,g=Promise.resolve(t);v<w;)g=g.then(N[v++],N[v++]);return g}w=d.length;let E=t;for(;v<w;){const N=d[v++],S=d[v++];try{E=N(E)}catch(T){S.call(this,T);break}}try{g=W_.call(this,E)}catch(N){return Promise.reject(N)}for(v=0,w=f.length;v<w;)g=g.then(f[v++],f[v++]);return g}getUri(r){r=yc(this.defaults,r);const t=nS(r.baseURL,r.url,r.allowAbsoluteUrls);return Jk(t,r.params,r.paramsSerializer)}};st.forEach(["delete","get","head","options"],function(r){mc.prototype[r]=function(t,n){return this.request(yc(n||{},{method:r,url:t,data:(n||{}).data}))}});st.forEach(["post","put","patch"],function(r){function t(n){return function(s,c,d){return this.request(yc(d||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:c}))}}mc.prototype[r]=t(),mc.prototype[r+"Form"]=t(!0)});let RR=class oS{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const n=this;this.promise.then(a=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](a);n._listeners=null}),this.promise.then=a=>{let s;const c=new Promise(d=>{n.subscribe(d),s=d}).then(a);return c.cancel=function(){n.unsubscribe(s)},c},r(function(s,c,d){n.reason||(n.reason=new nu(s,c,d),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const t=this._listeners.indexOf(r);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const r=new AbortController,t=n=>{r.abort(n)};return this.subscribe(t),r.signal.unsubscribe=()=>this.unsubscribe(t),r.signal}static source(){let r;return{token:new oS(function(a){r=a}),cancel:r}}};function IR(e){return function(t){return e.apply(null,t)}}function DR(e){return st.isObject(e)&&e.isAxiosError===!0}const l2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(l2).forEach(([e,r])=>{l2[r]=e});function cS(e){const r=new mc(e),t=Uk(mc.prototype.request,r);return st.extend(t,mc.prototype,r,{allOwnKeys:!0}),st.extend(t,r,null,{allOwnKeys:!0}),t.create=function(a){return cS(yc(e,a))},t}const mn=cS(hf);mn.Axios=mc;mn.CanceledError=nu;mn.CancelToken=RR;mn.isCancel=tS;mn.VERSION=lS;mn.toFormData=Lx;mn.AxiosError=pr;mn.Cancel=mn.CanceledError;mn.all=function(r){return Promise.all(r)};mn.spread=IR;mn.isAxiosError=DR;mn.mergeConfig=yc;mn.AxiosHeaders=cs;mn.formToJSON=e=>eS(st.isHTMLForm(e)?new FormData(e):e);mn.getAdapter=iS.getAdapter;mn.HttpStatusCode=l2;mn.default=mn;const{Axios:DX,AxiosError:MX,CanceledError:FX,isCancel:LX,CancelToken:BX,VERSION:PX,all:UX,Cancel:zX,isAxiosError:HX,spread:GX,toFormData:VX,AxiosHeaders:WX,HttpStatusCode:qX,formToJSON:XX,getAdapter:KX,mergeConfig:YX}=mn,MR="https://uygulama.edonustur.com/api",FR={createOrder:async e=>{const r=localStorage.getItem("birfatura_config");if(!r)return{success:!1,message:"Ayarlar bulunamad. Ltfen Ayarlar sayfasndan BirFatura API anahtarlarn kaydedin."};let t;try{t=JSON.parse(r)}catch{return{success:!1,message:"Ayar dosyas bozuk. Ltfen ayarlar tekrar kaydedin."}}if(!t.api_key||!t.secret_key)return{success:!1,message:"API veya Secret Key eksik. Ltfen Ayarlar sayfasn kontrol edin."};const n=e.customer_name||e.customer?.name||(typeof e.customer=="string"?e.customer:"Misafir Mteri");let a="",s="",c="",d="Adana",x="Seyhan";e.customer&&typeof e.customer=="object"?(a=e.customer.tax_number||"",s=e.customer.tax_office||"",c=e.customer.address||"",d=e.customer.city||d,x=e.customer.district||x):e.customer_name==="Misafir Mteri"||e.customer;let f="",g="";const v=String(a||"").trim();v.length===11?g=v:v.length>0&&(f=v),!g&&!f&&(n==="Misafir Mteri"||n==="Toptan Sat")&&(g="11111111111");const w=f||g;let E=0,N=0;const S=e.items.map(I=>{const L=parseFloat(I.price||0),V=L/1.2,X=parseFloat(I.quantity||1);return E+=L*X,{ProductId:0,ProductCode:I.stock_code||"",Barcode:I.stock_code||"",ProductName:I.name||"",ProductQuantity:X,VatRate:20,ProductUnitPriceTaxExcluding:Number(V.toFixed(4)),ProductUnitPriceTaxIncluding:Number(L.toFixed(4)),Variants:[]}});N=E/1.2;const T=new Date,j=T.toLocaleDateString("tr-TR")+" "+T.toLocaleTimeString("tr-TR"),D={OrderCode:e.sale_code,OrderDate:j,CustomerId:0,BillingName:n,BillingAddress:c,BillingTown:x,BillingCity:d,BillingTaxOffice:s,TaxNo:f,SSNTCNo:g,ShippingId:0,ShippingName:n,ShippingAddress:c,ShippingTown:x,ShippingCity:d,ShippingTaxNumber:w,ShipCompany:"Kargo",PaymentTypeId:1,PaymentType:"Kredi Kart",Currency:"TRY",CurrencyRate:1,TotalPaidTaxIncluding:Number(E.toFixed(2)),TotalPaidTaxExcluding:Number(N.toFixed(2)),OrderDetails:S};try{return{success:!0,data:(await mn.post(`${MR}/Orders`,D,{headers:{"Content-Type":"application/json","X-Api-Key":t.api_key,"X-Secret-Key":t.secret_key,"X-Integration-Key":t.integration_key}})).data}}catch(I){return console.error("BirFatura API Error:",I),{success:!1,message:`BirFatura Hatas: ${I.response?.data?.message||I.message||"Bilinmeyen Hata"}`}}}},LR="A5 (148x210mm)",BR=[{type:"text",id:"baslik",x:10,y:15,text:"POS Sistemi",font_family:"Tahoma",font_size:22,font_bold:!0,color:"#000000",text_width:400,text_height:28,text_align:"center"},{type:"text",id:"alt_baslik",x:10,y:45,text:"Sat Fii",font_family:"Tahoma",font_size:14,font_bold:!1,color:"#666666",text_width:400,text_height:20,text_align:"center"},{type:"shape",id:"kutu_bilgi",x:10,y:75,width:400,height:80,fill_color:"#f8f9fa",border:{sides:{top:!0,bottom:!0,left:!0,right:!0},thickness:1,color:"#dee2e6"}},{type:"text",id:"bilgi_fis_no_label",x:20,y:82,text:"Fi No:",font_family:"Tahoma",font_size:11,font_bold:!0,color:"#000000",text_width:60,text_height:16,text_align:"left"},{type:"text",id:"bilgi_fis_no_value",x:80,y:82,text:"{{FIS_NO}}",font_family:"Tahoma",font_size:11,font_bold:!1,color:"#333333",text_width:150,text_height:16,text_align:"left"},{type:"text",id:"bilgi_tarih_label",x:20,y:100,text:"Tarih:",font_family:"Tahoma",font_size:11,font_bold:!0,color:"#000000",text_width:60,text_height:16,text_align:"left"},{type:"text",id:"bilgi_tarih_value",x:80,y:100,text:"{{TARIH}} {{SAAT}}",font_family:"Tahoma",font_size:11,font_bold:!1,color:"#333333",text_width:150,text_height:16,text_align:"left"},{type:"text",id:"bilgi_musteri_label",x:20,y:118,text:"Mteri:",font_family:"Tahoma",font_size:11,font_bold:!0,color:"#000000",text_width:60,text_height:16,text_align:"left"},{type:"text",id:"bilgi_musteri_value",x:80,y:118,text:"{{MUSTERI_ADI}}",font_family:"Tahoma",font_size:11,font_bold:!1,color:"#333333",text_width:150,text_height:16,text_align:"left"},{type:"text",id:"bilgi_odeme_label",x:20,y:136,text:"deme Tipi:",font_family:"Tahoma",font_size:11,font_bold:!0,color:"#000000",text_width:70,text_height:16,text_align:"left"},{type:"text",id:"bilgi_odeme_value",x:90,y:136,text:"{{ODEME_TIPI}}",font_family:"Tahoma",font_size:11,font_bold:!1,color:"#333333",text_width:140,text_height:16,text_align:"left"},{type:"shape",id:"tablo_baslik_bg",x:10,y:165,width:400,height:25,fill_color:"#343a40"},{type:"text",id:"th_urun",x:15,y:170,text:"rn",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#ffffff",text_width:140,text_height:16,text_align:"left"},{type:"text",id:"th_adet",x:160,y:170,text:"Adet",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#ffffff",text_width:50,text_height:16,text_align:"center"},{type:"text",id:"th_fiyat",x:215,y:170,text:"Fiyat",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#ffffff",text_width:60,text_height:16,text_align:"right"},{type:"text",id:"th_iskonto",x:280,y:170,text:"skonto",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#ffffff",text_width:55,text_height:16,text_align:"center"},{type:"text",id:"th_toplam",x:340,y:170,text:"Toplam",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#ffffff",text_width:65,text_height:16,text_align:"right"},{type:"text",id:"row_urun",x:15,y:195,text:"{{URUN_ADI}}",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#000000",text_width:140,text_height:16,text_align:"left",is_product_row:!0},{type:"text",id:"row_adet",x:160,y:195,text:"{{MIKTAR}}",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#000000",text_width:50,text_height:16,text_align:"center",is_product_row:!0},{type:"text",id:"row_fiyat",x:215,y:195,text:"{{FIYAT}} TL",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#000000",text_width:60,text_height:16,text_align:"right",is_product_row:!0},{type:"text",id:"row_iskonto",x:280,y:195,text:"%{{ISKONTO}}",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#000000",text_width:55,text_height:16,text_align:"center",is_product_row:!0},{type:"text",id:"row_toplam",x:340,y:195,text:"{{SATIR_TOPLAM}} TL",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#000000",text_width:65,text_height:16,text_align:"right",is_product_row:!0},{type:"shape",id:"row_line",x:10,y:213,width:400,height:1,fill_color:"#e0e0e0",is_product_row:!0},{type:"shape",id:"total_bg",x:200,y:280,width:210,height:32,fill_color:"#343a40",is_dynamic_footer:!0},{type:"text",id:"genel_toplam_label",x:210,y:287,text:"Toplam:",font_family:"Tahoma",font_size:12,font_bold:!0,color:"#ffffff",text_width:80,text_height:18,text_align:"left",is_dynamic_footer:!0},{type:"text",id:"genel_toplam_value",x:300,y:287,text:"{{GENEL_TOPLAM}} TL",font_family:"Tahoma",font_size:14,font_bold:!0,color:"#ffffff",text_width:100,text_height:18,text_align:"right",is_dynamic_footer:!0},{type:"shape",id:"balance_bg",x:10,y:322,width:400,height:50,fill_color:"#f9f9f9",border:{sides:{top:!0,bottom:!0,left:!0,right:!0},thickness:1,color:"#ddd"},is_dynamic_footer:!0},{type:"text",id:"eski_bakiye",x:20,y:330,text:"nceki Bakiye: {{ESKI_BAKIYE}} TL",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#666666",text_width:380,text_height:16,text_align:"left",is_dynamic_footer:!0},{type:"text",id:"yeni_bakiye",x:20,y:350,text:"Gncel Bakiye: {{YENI_BAKIYE}} TL",font_family:"Tahoma",font_size:12,font_bold:!0,color:"#000000",text_width:380,text_height:18,text_align:"left",is_dynamic_footer:!0},{type:"text",id:"footer_msg",x:10,y:390,text:"Bizi tercih ettiiniz iin teekkr ederiz.",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#666666",text_width:400,text_height:16,text_align:"center",is_dynamic_footer:!0}],uS={paper_size:LR,items:BR},PR="Termal 80mm",UR=[{type:"text",id:"firma_adi",x:10,y:10,text:"FIRMA ADI",font_family:"Tahoma",font_size:14,font_bold:!0,color:"#000000",text_width:260,text_height:20,text_align:"center"},{type:"text",id:"firma_adres",x:10,y:32,text:"Adres Bilgisi",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:260,text_height:15,text_align:"center"},{type:"text",id:"firma_tel",x:10,y:48,text:"Tel: 0XXX XXX XX XX",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:260,text_height:15,text_align:"center"},{type:"shape",id:"kesik_cizgi_1",x:10,y:68,width:260,height:1,fill_color:"#000000",border:{sides:{top:!0,bottom:!1,left:!1,right:!1},thickness:1,color:"#000000",style:"dashed"}},{type:"text",id:"tarih_saat",x:10,y:75,text:"{{TARIH}} {{SAAT}}",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:140,text_height:15,text_align:"left"},{type:"text",id:"musteri_adi",x:150,y:75,text:"{{MUSTERI_ADI}}",font_family:"Tahoma",font_size:9,font_bold:!0,color:"#000000",text_width:120,text_height:15,text_align:"right"},{type:"shape",id:"tablo_baslik_bg",x:10,y:95,width:260,height:18,fill_color:"#e5e5e5",border:{sides:{top:!0,bottom:!0,left:!0,right:!0},thickness:1,color:"#000000"}},{type:"text",id:"baslik_urun",x:12,y:98,text:"URUN",font_family:"Tahoma",font_size:8,font_bold:!0,color:"#000000",text_width:120,text_height:14,text_align:"left"},{type:"text",id:"baslik_miktar",x:140,y:98,text:"ADET",font_family:"Tahoma",font_size:8,font_bold:!0,color:"#000000",text_width:40,text_height:14,text_align:"center"},{type:"text",id:"baslik_fiyat",x:185,y:98,text:"FIYAT",font_family:"Tahoma",font_size:8,font_bold:!0,color:"#000000",text_width:40,text_height:14,text_align:"right"},{type:"text",id:"baslik_toplam",x:225,y:98,text:"TUTAR",font_family:"Tahoma",font_size:8,font_bold:!0,color:"#000000",text_width:45,text_height:14,text_align:"right"},{type:"text",id:"urun_satiri_adi",x:12,y:118,text:"{{URUN_ADI}}",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:125,text_height:14,text_align:"left",is_product_row:!0},{type:"text",id:"urun_satiri_miktar",x:140,y:118,text:"{{MIKTAR}}",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:40,text_height:14,text_align:"center",is_product_row:!0},{type:"text",id:"urun_satiri_fiyat",x:185,y:118,text:"{{FIYAT}}",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:40,text_height:14,text_align:"right",is_product_row:!0},{type:"text",id:"urun_satiri_toplam",x:225,y:118,text:"{{SATIR_TOPLAM}}",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:45,text_height:14,text_align:"right",is_product_row:!0},{type:"shape",id:"toplam_cizgi",x:10,y:180,width:260,height:1,fill_color:"#000000",is_dynamic_footer:!0},{type:"text",id:"genel_toplam_baslik",x:100,y:188,text:"TOPLAM:",font_family:"Tahoma",font_size:12,font_bold:!0,color:"#000000",text_width:80,text_height:18,text_align:"right",is_dynamic_footer:!0},{type:"text",id:"genel_toplam_deger",x:185,y:188,text:"{{GENEL_TOPLAM}} TL",font_family:"Tahoma",font_size:12,font_bold:!0,color:"#000000",text_width:85,text_height:18,text_align:"right",is_dynamic_footer:!0},{type:"shape",id:"kesik_cizgi_2",x:10,y:215,width:260,height:1,fill_color:"#000000",is_dynamic_footer:!0},{type:"text",id:"eski_bakiye",x:10,y:222,text:"Onceki Bakiye: {{ESKI_BAKIYE}} TL",font_family:"Tahoma",font_size:8,font_bold:!1,color:"#666666",text_width:260,text_height:12,text_align:"left",is_dynamic_footer:!0},{type:"text",id:"yeni_bakiye",x:10,y:236,text:"Guncel Bakiye: {{YENI_BAKIYE}} TL",font_family:"Tahoma",font_size:9,font_bold:!0,color:"#000000",text_width:260,text_height:14,text_align:"left",is_dynamic_footer:!0},{type:"text",id:"tesekkur",x:10,y:260,text:"Bizi tercih ettiginiz icin tesekkurler!",font_family:"Tahoma",font_size:8,font_bold:!1,color:"#666666",text_width:260,text_height:12,text_align:"center",is_dynamic_footer:!0}],dS={paper_size:PR,items:UR},zR="Termal 58mm",HR=[{type:"text",id:"firma_adi",x:5,y:8,text:"FIRMA ADI",font_family:"Tahoma",font_size:11,font_bold:!0,color:"#000000",text_width:190,text_height:16,text_align:"center"},{type:"text",id:"firma_tel",x:5,y:26,text:"Tel: 0XXX XXX XX XX",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#000000",text_width:190,text_height:12,text_align:"center"},{type:"shape",id:"kesik_cizgi_1",x:5,y:42,width:190,height:1,fill_color:"#000000"},{type:"text",id:"tarih_saat",x:5,y:48,text:"{{TARIH}} {{SAAT}}",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#000000",text_width:190,text_height:12,text_align:"left"},{type:"text",id:"musteri_adi",x:5,y:62,text:"{{MUSTERI_ADI}}",font_family:"Tahoma",font_size:8,font_bold:!0,color:"#000000",text_width:190,text_height:12,text_align:"left"},{type:"shape",id:"tablo_baslik_bg",x:5,y:78,width:190,height:14,fill_color:"#e5e5e5",border:{sides:{top:!0,bottom:!0,left:!0,right:!0},thickness:1,color:"#000000"}},{type:"text",id:"baslik_urun",x:7,y:80,text:"URUN",font_family:"Tahoma",font_size:7,font_bold:!0,color:"#000000",text_width:80,text_height:12,text_align:"left"},{type:"text",id:"baslik_miktar",x:90,y:80,text:"AD",font_family:"Tahoma",font_size:7,font_bold:!0,color:"#000000",text_width:25,text_height:12,text_align:"center"},{type:"text",id:"baslik_fiyat",x:115,y:80,text:"FYT",font_family:"Tahoma",font_size:7,font_bold:!0,color:"#000000",text_width:35,text_height:12,text_align:"right"},{type:"text",id:"baslik_toplam",x:155,y:80,text:"TUT",font_family:"Tahoma",font_size:7,font_bold:!0,color:"#000000",text_width:40,text_height:12,text_align:"right"},{type:"text",id:"urun_satiri_adi",x:7,y:96,text:"{{URUN_ADI}}",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#000000",text_width:80,text_height:12,text_align:"left",is_product_row:!0},{type:"text",id:"urun_satiri_miktar",x:90,y:96,text:"{{MIKTAR}}",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#000000",text_width:25,text_height:12,text_align:"center",is_product_row:!0},{type:"text",id:"urun_satiri_fiyat",x:115,y:96,text:"{{FIYAT}}",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#000000",text_width:35,text_height:12,text_align:"right",is_product_row:!0},{type:"text",id:"urun_satiri_toplam",x:155,y:96,text:"{{SATIR_TOPLAM}}",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#000000",text_width:40,text_height:12,text_align:"right",is_product_row:!0},{type:"shape",id:"toplam_cizgi",x:5,y:150,width:190,height:1,fill_color:"#000000",is_dynamic_footer:!0},{type:"text",id:"genel_toplam_baslik",x:5,y:156,text:"TOPLAM:",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#000000",text_width:90,text_height:14,text_align:"right",is_dynamic_footer:!0},{type:"text",id:"genel_toplam_deger",x:100,y:156,text:"{{GENEL_TOPLAM}} TL",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#000000",text_width:95,text_height:14,text_align:"right",is_dynamic_footer:!0},{type:"text",id:"tesekkur",x:5,y:180,text:"Tesekkurler!",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#666666",text_width:190,text_height:12,text_align:"center",is_dynamic_footer:!0}],fS={paper_size:zR,items:HR};function GR(){const e=tu();J.useEffect(()=>{window.innerWidth<768&&e("/mobile-pos",{replace:!0})},[e])}const VR=J.memo(({product:e,onAddToCart:r})=>{const[t,n]=J.useState(!1);return l.jsxs("div",{onClick:()=>r(e),className:"h-full bg-white rounded-xl border border-slate-200 p-2 shadow-sm hover:shadow-lg hover:border-blue-600/30 hover:-translate-y-0.5 transition-all group flex flex-col cursor-pointer",children:[l.jsx("div",{className:"w-full h-24 rounded-lg bg-slate-50 overflow-hidden relative flex-shrink-0 border border-slate-100 mb-1",children:t?l.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-slate-100 text-slate-400",children:[l.jsx("span",{className:"material-symbols-outlined text-3xl",children:"image"}),l.jsx("span",{className:"text-[10px] font-medium",children:"Grsel Yok"})]}):l.jsx("img",{alt:e.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",src:e.image_url||"https://via.placeholder.com/150",onError:()=>n(!0),loading:"lazy"})}),l.jsxs("div",{className:"flex flex-col flex-1 px-1",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 leading-tight line-clamp-2 group-hover:text-blue-600 transition-colors",children:e.name}),l.jsxs("span",{className:"text-base font-extrabold text-red-600 leading-none mt-0.5",children:[e.price?.toFixed(2)," "]})]})]})});function WR(){GR();const{user:e,logout:r}=Wi(),[t,n]=J.useState([]),[a,s]=J.useState(["Tm"]),[c,d]=J.useState("Tm"),[x,f]=J.useState(""),[g,v]=J.useState(""),[w,E]=J.useState([]),N=J.useRef(w),[S,T]=J.useState(null),[j,D]=J.useState("Toptan Sat"),[I,L]=J.useState([]),[V,X]=J.useState(!1),[M,W]=J.useState(""),[z,ae]=J.useState(!1),[Z,H]=J.useState(!1),[he,q]=J.useState(!1),[se,ve]=J.useState(!1),[le,ge]=J.useState([]),[ie,Le]=J.useState([]),Q=J.useRef(null),[B,te]=J.useState({}),[U,P]=J.useState(!1),ue={name:"",address:"Fatih mh.",phone:"",email:"",tax_office:"",tax_number:"11111111111"},[Re,De]=J.useState(ue),[Ne,Ke]=J.useState(!1),[ye,me]=J.useState(1),[Ce,G]=J.useState(null),[Me,Ae]=J.useState(""),[oe,de]=J.useState(""),[Se,lt]=J.useState({show:!1,x:0,y:0}),[Ue,He]=J.useState(!1),[Oe,We]=J.useState(0),[rt,ht]=J.useState({name:"",quantity:1,price:""}),Pe=J.useRef(null),Ye=J.useRef(null),Tt=J.useRef(null);J.useEffect(()=>{N.current=w},[w]),J.useEffect(()=>{Ct(),Mt(),lr(),jt(),ft();const Ie={miktar_duzenle:"F2",iskonto_ekle:"F3",fiyat_duzenle:"F4",nakit_odeme:"F8",pos_odeme:"F9",musteri_sec:"F10",search_focus:"F1",tanimsiz_urun:"Insert"},wt=()=>{const Ft=localStorage.getItem("pos_keyboard_shortcuts");if(Ft)try{te({...Ie,...JSON.parse(Ft)})}catch(ee){console.error("Shortcuts parse error",ee)}else te(Ie)};window.addEventListener("shortcutsUpdated",wt);const _t=localStorage.getItem("pos_keyboard_shortcuts");if(_t)try{te({...Ie,...JSON.parse(_t)})}catch(Ft){console.error("Shortcuts parse error",Ft),te(Ie)}else te(Ie);return()=>{window.removeEventListener("shortcutsUpdated",wt)}},[]);const Ct=async()=>{try{const wt=(await Sn.getAll()).data||{};n(wt.products||[])}catch(Ie){console.error("rnler yklenirken hata:",Ie)}},Mt=async()=>{try{const Ie=await kn.getAll();L(Ie.data?.customers||[])}catch(Ie){console.error("Mteriler yklenirken hata:",Ie)}},lr=async()=>{try{const Ie=await $h.getAll();ge(Ie.data?.held_sales||[])}catch(Ie){console.error("Bekleyen satlar yklenirken hata:",Ie)}},jt=async()=>{try{const wt=(await yo.getAll()).data?.shortcuts||[];Le(wt),s(["Tm",...wt.map(_t=>_t.name)])}catch(Ie){console.error("Ksayollar yklenirken hata:",Ie)}},ft=async()=>{try{const{data:Ie}=await xn.getAll();Ie&&Ie.pos_settings_ask_quantity!==void 0&&localStorage.setItem("pos_settings_ask_quantity",Ie.pos_settings_ask_quantity)}catch(Ie){console.error("Ayarlar yklenirken hata:",Ie)}};J.useEffect(()=>{const Ie=wt=>{if(S!==null&&w[S]){if(wt.key==="+"||wt.key==="Add"){wt.preventDefault(),Xr(S,"quantity",w[S].quantity+1);return}if(wt.key==="-"||wt.key==="Subtract"){wt.preventDefault();const Ft=w[S].quantity-1;Ft>=1&&Xr(S,"quantity",Ft);return}}const _t=Object.keys(B).find(Ft=>B[Ft]===wt.key);if(_t)switch(wt.key.startsWith("F")&&wt.preventDefault(),_t){case"search_focus":Q.current?.focus();break;case"nakit_odeme":w.length>0&&Mr("Nakit");break;case"pos_odeme":w.length>0&&Mr("POS");break;case"miktar_duzenle":S!==null&&w[S]&&(Ae(w[S].quantity),ae(!0));break;case"iskonto_ekle":S!==null&&w[S]&&(Ae(w[S].discount_rate||0),H(!0));break;case"fiyat_duzenle":S!==null&&w[S]&&(Ae(w[S].price),q(!0));break;case"musteri_sec":X(!0);break;case"tanimsiz_urun":ht({name:"",quantity:1,price:""}),We(0),He(!0),setTimeout(()=>Pe.current?.focus(),100);break}};return window.addEventListener("keydown",Ie),()=>window.removeEventListener("keydown",Ie)},[B,w,S]);const qt=J.useRef([]);J.useEffect(()=>{S!==null&&qt.current[S]&&qt.current[S].scrollIntoView({behavior:"smooth",block:"nearest"})},[S]);const Bt=J.useMemo(()=>{const wt=(c!=="Tm"?ie.find(Ft=>Ft.name===c):null)?.items||[];let _t=t.filter(Ft=>{let ee=!0;c!=="Tm"&&(ee=wt.includes(Ft.stock_code));const fe=Ft.name?.toLowerCase().includes(x.toLowerCase())||Ft.barcode?.includes(x)||Ft.stock_code?.toLowerCase().includes(x.toLowerCase());return ee&&fe});return c!=="Tm"&&wt.length>0&&_t.sort((Ft,ee)=>{const fe=wt.indexOf(Ft.stock_code),pe=wt.indexOf(ee.stock_code);return fe-pe}),_t},[t,c,x,ie]),Qt=J.useCallback(Ie=>{if(localStorage.getItem("pos_settings_ask_quantity")==="true"){G(Ie),me("1"),Ke(!0);return}const _t=N.current,Ft=_t.findIndex(ee=>ee.stock_code===Ie.stock_code);if(Ft>=0){const ee=[..._t];ee[Ft]={...ee[Ft],quantity:ee[Ft].quantity+1},E(ee),T(Ft)}else E([..._t,{...Ie,quantity:1,discount_rate:0}]),T(_t.length)},[]),mr=Ie=>{if(Ie.preventDefault(),!Ce)return;const wt=parseFloat(ye)||1,_t=w.findIndex(Ft=>Ft.stock_code===Ce.stock_code);if(_t>=0){const Ft=[...w];Ft[_t].quantity+=wt,E(Ft),T(_t)}else E([...w,{...Ce,quantity:wt,discount_rate:0}]),T(w.length);Ke(!1),G(null),v("")},Pr=Ie=>{if(Ie.key==="Enter"&&g.trim()){const wt=t.find(_t=>_t.barcode===g.trim()||_t.stock_code?.toLowerCase()===g.trim().toLowerCase());wt?(Qt(wt),v("")):alert("rn bulunamad: "+g)}},Xr=(Ie,wt,_t)=>{const Ft=[...w];Ft[Ie][wt]=_t,E(Ft),ae(!1),H(!1),q(!1)},$t=Ie=>{const wt=w.filter((_t,Ft)=>Ft!==Ie);E(wt),S===Ie&&T(null)},Cr=()=>w.reduce((Ie,wt)=>{const _t=wt.price*wt.quantity,Ft=_t*(wt.discount_rate||0)/100;return Ie+(_t-Ft)},0),Kr=Ie=>{if(Ie.preventDefault(),!Re.name.trim())return alert("sim Soyisim zorunludur!");D(`${Re.name.trim()} (Perakende)`),P(!1),X(!1)},Tn=Ie=>{const{name:wt,value:_t}=Ie.target;De(Ft=>({...Ft,[wt]:_t}))},Mr=async Ie=>{if(w.length===0)return alert("Sepet bo!");try{const wt="SLS-"+Date.now(),_t=I.find(ee=>ee.name===j),Ft=(j||"Toptan Sat").replace(/ \(Perakende\)$/i,"").trim();await kl.complete({sale_code:wt,customer:_t||null,customer_name:_t?void 0:Ft,payment_method:Ie,items:w.map(ee=>({id:ee.id,stock_code:ee.stock_code,barcode:ee.barcode,name:ee.name,quantity:ee.quantity,price:ee.price,discount_rate:ee.discount_rate||0,amount:ee.quantity})),total:Cr()}),localStorage.getItem("integration_send_sales_to_birfatura")==="true"&&FR.createOrder({sale_code:wt,customer:_t||null,customer_name:_t?void 0:Ft,items:w.map(ee=>({stock_code:ee.stock_code,name:ee.name,quantity:ee.quantity,price:ee.price})),total:Cr()}).then(ee=>{ee.success||alert("BirFatura Hatas: "+ee.message)}),localStorage.getItem("receipt_auto_print")==="true"&&Pt({customer:j,paymentMethod:Ie,items:w,total:Cr(),customerData:_t}),de("Sat lemi Baarl"),setTimeout(()=>de(""),2e3),E([]),D("Toptan Sat"),De(ue),Ct()}catch(wt){alert("Sat hatas: "+(wt.response?.data?.message||wt.message))}},Hr=async()=>{if(w.length===0)return alert("Sepet bo!");try{await $h.add({customer:j,items:w}),de("Sat Beklemeye Alnd"),setTimeout(()=>de(""),2e3),E([]),D("Toptan Sat"),lr()}catch(Ie){alert("Beklemeye alma hatas: "+Ie.message)}},Ge=async Ie=>{E(Ie.items||[]),D(Ie.customer_name||"Toptan Sat");try{await $h.delete(Ie.id),lr()}catch(wt){console.error(wt)}ve(!1)},Nt=async Ie=>{try{await $h.delete(Ie),lr()}catch(wt){alert("Silme hatas: "+wt.message)}},Dt={"A5 (148x210mm)":{width:420,height:595},"A4 (210x297mm)":{width:595,height:842},"Termal 80mm":{width:280,height:"auto"},"Termal 58mm":{width:200,height:"auto"}},Pt=Ie=>{const wt=localStorage.getItem("receipt_paper_size")||"Termal 80mm",_t=`receipt_design_template_${wt}`,Ft=localStorage.getItem(_t);let ee;try{ee=Ft?JSON.parse(Ft):null}catch{ee=null}if(!ee)switch(wt){case"Termal 80mm":ee={...dS};break;case"Termal 58mm":ee={...fS};break;case"A4 (210x297mm)":case"A5 (148x210mm)":_r(Ie,wt);return;default:ee={...uS};break}const fe=Dt[wt]||Dt["Termal 80mm"],pe=new Date,be=(pt,Sr=null)=>{if(!pt)return"";let ar=pt;ar=ar.replace("{{TARIH}}",pe.toLocaleDateString("tr-TR")),ar=ar.replace("{{SAAT}}",pe.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})),ar=ar.replace("{{FIS_NO}}",pe.getTime().toString()),ar=ar.replace("{{MUSTERI_ADI}}",Ie.customer||"Mteri"),ar=ar.replace("{{ODEME_TIPI}}",Ie.paymentMethod||"Nakit"),ar=ar.replace("{{GENEL_TOPLAM}}",Ie.total.toFixed(2));const dr=Ie.customerData?.balance||0,or=dr+Ie.total;if(ar=ar.replace("{{ESKI_BAKIYE}}",dr.toFixed(2)),ar=ar.replace("{{YENI_BAKIYE}}",or.toFixed(2)),Sr){ar=ar.replace("{{URUN_ADI}}",Sr.name||""),ar=ar.replace("{{MIKTAR}}",Sr.quantity?.toString()||"1"),ar=ar.replace("{{FIYAT}}",Sr.price?.toFixed(2)||"0.00"),ar=ar.replace("{{ISKONTO}}",(Sr.discount_rate||0).toString());const xr=Sr.price*Sr.quantity*(1-(Sr.discount_rate||0)/100);ar=ar.replace("{{SATIR_TOPLAM}}",xr.toFixed(2))}return ar},we=localStorage.getItem("receipt_show_balance")==="true",Ee=Ie.customer&&Ie.customer!=="Toptan Sat"&&!Ie.customer.includes("(Perakende)"),Xe=we&&Ee,ot=ee.items.filter(pt=>!pt.is_product_row&&!pt.is_dynamic_footer),Ve=ee.items.filter(pt=>pt.is_product_row),et=ee.items.filter(pt=>!(!pt.is_dynamic_footer||!Xe&&(pt.id&&(pt.id.includes("bakiye")||pt.id==="eski_bakiye"||pt.id==="yeni_bakiye")||pt.text&&(pt.text.includes("Bakiye")||pt.text.includes("{{ESKI_BAKIYE}}")||pt.text.includes("{{YENI_BAKIYE}}")))));let Je="";ot.forEach(pt=>{const Sr=`
                position: absolute;
                left: ${pt.x}px;
                top: ${pt.y}px;
                width: ${pt.text_width||pt.width||100}px;
                height: ${pt.text_height||pt.height||20}px;
                font-family: 'Tahoma', sans-serif;
                font-size: ${pt.font_size||10}px;
                font-weight: ${pt.font_bold?"bold":"normal"};
                color: ${pt.color||"#000"};
                text-align: ${pt.text_align||"left"};
                background-color: ${pt.type==="shape"&&pt.fill_color||"transparent"};
                display: flex;
                align-items: center;
                justify-content: ${pt.text_align==="center"?"center":pt.text_align==="right"?"flex-end":"flex-start"};
                overflow: hidden;
                white-space: nowrap;
            `;pt.type==="text"?Je+=`<div style="${Sr}">${be(pt.text)}</div>`:pt.type==="shape"?Je+=`<div style="${Sr}"></div>`:pt.type==="image"&&(Je+=`<div style="${Sr}"><img src="${pt.src}" style="width: 100%; height: 100%; object-fit: contain;"></div>`)});let gt="",yt=Ve.length>0?Ve[0].y:120;const Et=16;Ie.items.forEach((pt,Sr)=>{Ve.forEach(ar=>{const dr=Sr*Et,or=`
                    position: absolute;
                    left: ${ar.x}px;
                    top: ${ar.y+dr}px;
                    width: ${ar.text_width||100}px;
                    height: ${ar.text_height||14}px;
                    font-family: 'Tahoma', sans-serif;
                    font-size: ${ar.font_size||9}px;
                    font-weight: ${ar.font_bold?"bold":"normal"};
                    color: ${ar.color||"#000"};
                    text-align: ${ar.text_align||"left"};
                    display: flex;
                    align-items: center;
                    justify-content: ${ar.text_align==="center"?"center":ar.text_align==="right"?"flex-end":"flex-start"};
                    overflow: hidden;
                    white-space: nowrap;
                `;gt+=`<div style="${or}">${be(ar.text,pt)}</div>`}),yt+=Et});let kt="";const Ot=(Ie.items.length-1)*Et;et.forEach(pt=>{const Sr=`
                position: absolute;
                left: ${pt.x}px;
                top: ${pt.y+Ot}px;
                width: ${pt.text_width||pt.width||100}px;
                height: ${pt.text_height||pt.height||20}px;
                font-family: 'Tahoma', sans-serif;
                font-size: ${pt.font_size||10}px;
                font-weight: ${pt.font_bold?"bold":"normal"};
                color: ${pt.color||"#000"};
                text-align: ${pt.text_align||"left"};
                background-color: ${pt.type==="shape"&&pt.fill_color||"transparent"};
                display: flex;
                align-items: center;
                justify-content: ${pt.text_align==="center"?"center":pt.text_align==="right"?"flex-end":"flex-start"};
                overflow: hidden;
            `;pt.type==="text"?kt+=`<div style="${Sr}">${be(pt.text)}</div>`:pt.type==="shape"?kt+=`<div style="${Sr}"></div>`:pt.type==="image"&&(kt+=`<div style="${Sr}"><img src="${pt.src}" style="width: 100%; height: 100%; object-fit: contain;"></div>`)});const Ut=yt+100,ct=`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Sat Fii</title>
                <style>
                    * { margin: 0; padding: 0; box-sizing: border-box; }
                    body { 
                        width: ${fe.width}px; 
                        margin: 0 auto;
                        transform-origin: top left;
                    }
                    .receipt { position: relative; width: ${fe.width}px; min-height: ${Ut}px; }
                    @media print { 
                        body { 
                            margin: 0; 
                            ${wt.includes("A5")||wt.includes("A4")?"transform: scale(1.35);":""}
                        } 
                        @page { 
                            margin: 0; 
                            size: ${wt.includes("A5")||wt.includes("A4")?"auto":`${fe.width}px auto`}; 
                        }
                    }
                </style>
            </head>
            <body>
                <div class="receipt">
                    ${Je}
                    ${gt}
                    ${kt}
                </div>
            </body>
            </html>
        `,Fr=window.open("","_blank",`width=${fe.width+50},height=600`);Fr&&(Fr.document.write(ct),Fr.document.close(),Fr.focus(),setTimeout(()=>{Fr.print(),Fr.close()},100))},_r=(Ie,wt)=>{const _t=wt==="A4 (210x297mm)",Ft=localStorage.getItem("receipt_company_name")||"FIRMA ADI",ee=localStorage.getItem("receipt_company_address")||"Adres Bilgisi",fe=localStorage.getItem("receipt_company_phone")||"Tel: 0XXX XXX XX XX",pe=`<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Sat Fii</title>
    <style>
        @page {
            size: ${_t?"A4":"A5"};
            margin: 10mm;
        }
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        html, body { 
            width: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Tahoma', 'Segoe UI', Arial, sans-serif;
            font-size: ${_t?"11px":"10px"};
            color: #333;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        .receipt-container {
            width: 100%;
            padding: 0;
        }
        .receipt-header { 
            text-align: center; 
            border-bottom: 1px solid #333; 
            padding-bottom: 8px; 
            margin-bottom: 8px; 
        }
        .receipt-header h1 { 
            font-size: ${_t?"18px":"14px"}; 
            margin-bottom: 2px; 
            color: #000;
            font-weight: bold;
        }
        .receipt-header .sub-info { 
            font-size: ${_t?"10px":"8px"}; 
            color: #0066cc; 
            line-height: 1.4;
        }
        .info-line {
            display: table;
            width: 100%;
            margin-bottom: 6px;
            padding-bottom: 4px;
            border-bottom: 1px solid #ddd;
            font-size: ${_t?"10px":"9px"};
        }
        .info-line .left { 
            display: table-cell;
            text-align: left;
            width: 50%;
        }
        .info-line .right { 
            display: table-cell;
            text-align: right;
            width: 50%;
            font-weight: bold;
        }
        table.items { 
            width: 100%; 
            border-collapse: collapse; 
            margin-bottom: 12px;
        }
        table.items th { 
            background: transparent; 
            color: #333; 
            padding: 4px 2px; 
            font-size: ${_t?"9px":"8px"};
            font-weight: bold;
            border-bottom: 1px solid #333;
        }
        table.items th.col-name { width: 50%; text-align: left; }
        table.items th.col-qty { width: 12%; text-align: center; }
        table.items th.col-price { width: 18%; text-align: center; }
        table.items th.col-total { width: 20%; text-align: center; }
        table.items td { 
            padding: 3px 2px; 
            font-size: ${_t?"9px":"8px"};
            vertical-align: top;
        }
        table.items td.col-name { text-align: left; }
        table.items td.col-qty { text-align: center; }
        table.items td.col-price { text-align: center; }
        table.items td.col-total { text-align: center; }
        .total-section { 
            margin-top: 15px;
            text-align: center;
        }
        .total-amount {
            font-size: ${_t?"14px":"12px"}; 
            font-weight: bold;
        }
        .footer-msg { 
            text-align: center; 
            margin-top: 20px;
            color: #0066cc; 
            font-size: ${_t?"9px":"8px"}; 
        }
    </style>
</head>
<body>
    <div class="receipt-container">
        <div class="receipt-header">
            <h1>${Ft}</h1>
            <div class="sub-info">${ee}<br>${fe}</div>
        </div>
        <div class="info-line">
            <span class="left">${new Date().toLocaleDateString("tr-TR")} ${new Date().toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}</span>
            <span class="right">${Ie.customer?.includes("Perakende")?"Perakende Sat":"Toptan Sat"}</span>
        </div>
        <table class="items">
            <thead>
                <tr>
                    <th class="col-name">URUN</th>
                    <th class="col-qty">ADET</th>
                    <th class="col-price">FIYAT</th>
                    <th class="col-total">TUTAR</th>
                </tr>
            </thead>
            <tbody>
                ${(Ie.items||[]).map(we=>{const Ee=parseFloat(we.quantity)||1,Xe=parseFloat(we.price)||0,ot=parseFloat(we.discount_rate)||0,Ve=Xe*Ee*(1-ot/100);return`<tr>
                        <td class="col-name">${we.name||""}</td>
                        <td class="col-qty">${Ee.toFixed(0)}</td>
                        <td class="col-price">${Xe.toFixed(2)}</td>
                        <td class="col-total">${Ve.toFixed(2)}</td>
                    </tr>`}).join("")}
            </tbody>
        </table>
        <div class="total-section">
            <span class="total-amount">TOPLAM: ${(Ie.total||0).toFixed(2)} TL</span>
        </div>
        <div class="footer-msg">Bizi tercih ettiiniz iin teekkrler!</div>
    </div>
</body>
</html>`,be=window.open("","_blank",`width=${_t?800:600},height=${_t?1e3:800}`);be&&(be.document.write(pe),be.document.close(),be.focus(),setTimeout(()=>{be.print(),be.close()},200))};return l.jsxs("div",{className:"h-full flex flex-col overflow-hidden bg-slate-100",style:{fontFamily:"'Manrope', sans-serif"},children:[l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsxs("aside",{className:"w-[500px] bg-white border-r border-slate-200 flex flex-col z-20 shadow-xl shadow-slate-200/50",children:[l.jsxs("div",{className:"p-3 bg-white border-b border-slate-200 shadow-sm z-20",children:[l.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[l.jsxs("button",{className:`col-span-2 border rounded-lg p-2 flex items-center gap-2 transition-all text-left group ${j!=="Toptan Sat"?"bg-yellow-100 border-yellow-400 hover:border-yellow-500":"bg-slate-50 border-slate-200 hover:border-blue-400"}`,onClick:()=>X(!0),title:"Mteri Se",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 transition-colors ${j!=="Toptan Sat"?"bg-yellow-400 text-yellow-800":"bg-blue-100 text-blue-600 group-hover:bg-blue-600 group-hover:text-white"}`,children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"person"})}),l.jsxs("div",{className:"min-w-0 overflow-hidden",children:[l.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase leading-none mb-0.5",children:"Mteri"}),l.jsx("p",{className:`truncate leading-none ${j!=="Toptan Sat"?"text-sm font-extrabold text-black":"text-[11px] font-bold text-slate-800"}`,children:j})]})]}),l.jsx("button",{onClick:Hr,className:"col-span-1 bg-orange-50 border border-orange-200 rounded-lg flex items-center justify-center p-2 hover:bg-orange-100 hover:border-orange-400 transition-all",title:"Sat Beklemeye Al",children:l.jsxs("span",{className:"text-xs font-extrabold text-orange-700 text-center leading-tight",children:["BEKLEMEYE",l.jsx("br",{}),"AL"]})}),l.jsxs("button",{onClick:()=>ve(!0),className:"col-span-1 bg-slate-50 border border-slate-200 rounded-lg flex items-center justify-center p-2 hover:bg-slate-100 hover:border-slate-400 transition-all relative",title:"Bekleyen Satlar",children:[le.length>0&&l.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[9px] font-bold rounded-full flex items-center justify-center shadow-sm",children:le.length}),l.jsxs("span",{className:"text-xs font-extrabold text-slate-700 text-center leading-tight",children:["BEKLEME",l.jsx("br",{}),"LSTES"]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-600 transition-colors",children:"barcode_scanner"}),l.jsx("input",{className:"w-full pl-10 pr-4 py-3 bg-white border border-slate-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-blue-600/20 focus:border-blue-600 transition-all outline-none shadow-sm placeholder:text-slate-400",placeholder:"Barkod okutun...",type:"text",value:g,onChange:Ie=>v(Ie.target.value),onKeyDown:Pr,autoFocus:!0})]})]}),l.jsxs("div",{className:"flex items-center px-4 py-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider bg-white border-b border-slate-100",children:[l.jsx("span",{className:"flex-1",children:"Sepetteki rnler"}),l.jsx("span",{className:"w-16 text-center",children:"Adet"}),l.jsx("span",{className:"w-24 text-right",children:"Tutar"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-0 py-0 divide-y divide-slate-100",children:w.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-slate-400",children:[l.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 text-slate-300",children:"shopping_basket"}),l.jsx("p",{className:"text-sm font-medium",children:"Sepet bo"})]}):w.map((Ie,wt)=>l.jsxs("div",{ref:_t=>qt.current[wt]=_t,className:`flex items-center gap-1.5 pr-2 py-0.5 hover:bg-slate-50 group transition-all border-l-4 ${S===wt?"bg-green-100 border-green-500":"border-transparent pl-1"}`,onClick:()=>T(wt),children:[l.jsxs("div",{className:"w-8 h-8 bg-slate-100 overflow-hidden flex-shrink-0 border-r border-slate-100",children:[Ie.image_url?l.jsx("img",{alt:Ie.name,loading:"lazy",className:"w-full h-full object-cover",src:Ie.image_url,onError:_t=>{_t.target.style.display="none",_t.target.nextSibling.style.display="flex"}}):null,l.jsx("div",{className:`w-full h-full flex-col items-center justify-center bg-slate-100 text-slate-400 ${Ie.image_url?"hidden":"flex"}`,children:l.jsxs("span",{className:"text-[6px] text-center leading-tight font-medium",children:["Grsel",l.jsx("br",{}),"Yok"]})})]}),l.jsxs("div",{className:"flex-1 min-w-0 pl-0.5",children:[l.jsx("h4",{className:"text-lg font-bold text-slate-800 line-clamp-1 leading-tight",children:Ie.name}),l.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:Ie.discount_rate>0?l.jsxs("div",{className:"flex flex-col leading-none",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("span",{className:"text-sm text-slate-400 line-through decoration-red-400",children:[Ie.price?.toFixed(2)," "]}),l.jsxs("p",{className:"text-xl font-bold text-emerald-600",children:[(Ie.price*(1-(Ie.discount_rate||0)/100)).toFixed(2)," "]})]}),l.jsxs("span",{className:"text-xs font-bold text-red-700 bg-yellow-300 px-2 py-0.5 rounded",children:["%",Ie.discount_rate," iskonto uygulanmtr"]})]}):l.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[Ie.price?.toFixed(2)," "]})})]}),l.jsx("div",{className:"w-16 flex items-center justify-center",children:l.jsx("div",{className:"h-8 px-2 bg-slate-100 rounded flex items-center justify-center text-lg font-bold text-slate-700 cursor-pointer hover:bg-slate-200 transition-colors",onClick:_t=>{_t.stopPropagation(),Ae(Ie.quantity),T(wt),ae(!0)},children:Ie.quantity})}),l.jsx("div",{className:"w-24 text-right",children:l.jsxs("span",{className:"text-lg font-bold text-red-500",children:[(Ie.price*Ie.quantity*(1-(Ie.discount_rate||0)/100)).toFixed(2)," "]})}),l.jsx("button",{onClick:_t=>{_t.stopPropagation(),$t(wt)},className:"w-8 h-8 rounded-full flex items-center justify-center text-slate-300 hover:text-white hover:bg-rose-500 transition-all ml-1",children:l.jsx("span",{className:"material-symbols-outlined text-xl",children:"close"})})]},Ie.id||`${Ie.stock_code}-${wt}`))}),l.jsxs("div",{className:"p-4 bg-white border-t border-slate-200 shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.05)] z-10",children:[l.jsx("div",{className:"space-y-0 mb-4",children:l.jsxs("div",{className:"flex justify-between items-end pt-2",children:[l.jsx("span",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TOPLAM"}),l.jsxs("span",{className:"text-3xl font-extrabold text-slate-900 tracking-tighter",children:[Cr().toFixed(2)," "]})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx("button",{onClick:()=>Mr("Nakit"),className:"flex items-center justify-center p-2 bg-emerald-50 border border-emerald-200 rounded-xl hover:border-emerald-500 hover:bg-emerald-100 hover:shadow-md transition-all",children:l.jsx("span",{className:"text-base font-extrabold text-emerald-700 whitespace-nowrap",children:"NAKT"})}),l.jsx("button",{onClick:()=>Mr("POS"),className:"flex items-center justify-center p-2 bg-blue-50 border border-blue-200 rounded-xl hover:border-blue-500 hover:bg-blue-100 hover:shadow-md transition-all",children:l.jsx("span",{className:"text-base font-extrabold text-blue-700 whitespace-nowrap",children:"KRED KARTI"})}),l.jsx("button",{onClick:()=>Mr("Ak Hesap"),className:"flex items-center justify-center p-2 bg-orange-50 border border-orange-200 rounded-xl hover:border-orange-500 hover:bg-orange-100 hover:shadow-md transition-all",children:l.jsx("span",{className:"text-base font-extrabold text-orange-700 whitespace-nowrap",children:"VERESYE"})})]}),l.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[l.jsx("button",{onClick:()=>{S!==null&&w[S]?(Ae(w[S].quantity),ae(!0)):alert("Ltfen sepetten bir rn sein")},className:"flex items-center justify-center p-3 bg-slate-50 border border-slate-200 rounded-lg hover:border-slate-400 hover:bg-slate-100 transition-all",children:l.jsx("span",{className:"text-sm font-extrabold text-slate-700",children:"MKTAR DZENLE"})}),l.jsx("button",{onClick:()=>{S!==null&&w[S]?(Ae(w[S].price),q(!0)):alert("Ltfen sepetten bir rn sein")},className:"flex items-center justify-center p-3 bg-slate-50 border border-slate-200 rounded-lg hover:border-slate-400 hover:bg-slate-100 transition-all",children:l.jsx("span",{className:"text-sm font-extrabold text-slate-700",children:"FYAT DZENLE"})}),l.jsx("button",{onClick:()=>{S!==null&&w[S]?(Ae(w[S].discount_rate||0),H(!0)):alert("Ltfen sepetten bir rn sein")},className:"flex items-center justify-center p-3 bg-slate-50 border border-slate-200 rounded-lg hover:border-slate-400 hover:bg-slate-100 transition-all",children:l.jsx("span",{className:"text-sm font-extrabold text-slate-700",children:"SKONTO DZENLE"})}),l.jsx("button",{onClick:()=>{window.confirm("Sepeti temizle?")&&E([])},className:"flex items-center justify-center p-3 bg-rose-50 border border-rose-200 rounded-lg hover:border-rose-400 hover:bg-rose-100 transition-all",children:l.jsx("span",{className:"text-sm font-extrabold text-rose-700",children:"SEPET BOALT"})})]})]})]})]}),l.jsxs("main",{className:"flex-1 flex flex-col bg-slate-50 overflow-hidden relative",children:[l.jsx("div",{className:"px-6 py-4 flex gap-2 overflow-x-auto no-scrollbar border-b border-slate-200 bg-white flex-none z-10",children:a.map(Ie=>l.jsx("button",{onClick:()=>d(Ie),className:`px-5 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ${c===Ie?"bg-slate-900 text-white shadow-sm hover:bg-slate-800":"bg-white border border-slate-200 text-slate-600 hover:border-blue-600 hover:text-blue-600 hover:bg-blue-50"}`,children:Ie},Ie))}),l.jsx("div",{className:"mt-4 px-6",children:l.jsxs("div",{className:"relative group",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-600 transition-colors",children:"search"}),l.jsx("input",{className:"w-full pl-10 pr-4 py-3 bg-white border border-slate-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-blue-600/20 focus:border-blue-600 transition-all outline-none shadow-sm placeholder:text-slate-400",placeholder:"rn ad ile ara...",type:"text",value:x,onChange:Ie=>f(Ie.target.value),ref:Q})]})}),l.jsx("div",{className:"flex-1 overflow-x-auto custom-scrollbar p-6 bg-slate-50/50 border-b border-slate-200 shadow-inner h-auto",children:l.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(140px,1fr))] gap-3",children:Bt.map(Ie=>l.jsx(VR,{product:Ie,onAddToCart:Qt},Ie.id||Ie.stock_code))})}),l.jsx("div",{className:"flex-none p-4 bg-white flex items-center justify-center gap-4 border-t border-slate-200",children:l.jsxs("p",{className:"text-xs text-slate-400 font-medium",children:[Bt.length," rn listeleniyor"]})})]})]}),V&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col shadow-2xl",children:[l.jsxs("div",{className:"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-600 px-6 py-5 flex justify-between items-center",children:[l.jsx("h3",{className:"text-2xl font-bold text-white",children:"Mteri Se"}),l.jsx("button",{onClick:()=>X(!1),className:"text-white hover:bg-white/20 rounded p-1",children:l.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),l.jsx("div",{className:"p-4 bg-slate-50 border-b",children:l.jsx("input",{className:"w-full px-4 py-3 rounded-xl border border-slate-200",placeholder:"Mteri ara...",value:M,onChange:Ie=>W(Ie.target.value),autoFocus:!0})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[l.jsxs("div",{onClick:()=>{D("Toptan Sat"),X(!1)},className:"p-4 bg-white border border-slate-200 rounded-xl hover:border-blue-500 cursor-pointer flex justify-between items-center group",children:[l.jsx("span",{className:"font-bold text-slate-800",children:"Toptan Sat (Varsaylan)"}),l.jsx("span",{className:"material-symbols-outlined text-slate-300 group-hover:text-blue-500",children:"check_circle"})]}),I.filter(Ie=>Ie.name?.toLowerCase().includes(M.toLowerCase())||Ie.phone?.includes(M)).map(Ie=>l.jsxs("div",{onClick:()=>{D(Ie.name),X(!1)},className:"p-4 bg-white border border-slate-200 rounded-xl hover:border-blue-500 cursor-pointer flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800",children:Ie.name}),l.jsx("p",{className:"text-xs text-slate-500",children:Ie.phone})]}),l.jsx("div",{className:"text-right",children:l.jsxs("p",{className:`font-bold ${Ie.balance>0?"text-red-500":"text-green-500"}`,children:[Ie.balance?.toFixed(2)," "]})})]},Ie.id))]}),l.jsx("div",{className:"p-4 border-t bg-gray-50 flex justify-end",children:l.jsx("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-orange-500 text-white rounded-lg font-bold hover:bg-orange-600 transition-colors",children:"+ Perakende Mteri"})})]})}),U&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center z-[60] p-4",children:l.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"bg-slate-900 px-10 py-8 text-white",children:[l.jsx("h3",{className:"text-3xl font-bold",children:"Perakende Mteri"}),l.jsx("p",{className:"text-slate-400",children:"Hzl sat iin bilgileri doldurun"})]}),l.jsxs("form",{onSubmit:Kr,className:"p-10 space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block font-semibold text-slate-700",children:"sim Soyisim *"}),l.jsx("input",{name:"name",value:Re.name,onChange:Tn,className:"w-full px-6 py-4 rounded-2xl border-2 border-slate-200 focus:border-blue-500 outline-none",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block font-semibold text-slate-700",children:"Telefon"}),l.jsx("input",{name:"phone",value:Re.phone,onChange:Tn,className:"w-full px-6 py-4 rounded-2xl border-2 border-slate-200 focus:border-blue-500 outline-none"})]}),l.jsxs("div",{className:"flex gap-4 pt-6",children:[l.jsx("button",{type:"button",onClick:()=>P(!1),className:"flex-1 py-4 bg-slate-100 font-bold text-slate-600 rounded-2xl hover:bg-slate-200",children:"ptal"}),l.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-blue-600 font-bold text-white rounded-2xl hover:bg-blue-700",children:" Tamamla"})]})]})]})}),z&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-slate-900/40 backdrop-blur-[2px]",children:l.jsxs("div",{className:"w-full max-w-[340px] bg-white rounded-[2.5rem] shadow-2xl transform transition-all animate-in fade-in zoom-in duration-300 overflow-hidden border border-white/20",children:[l.jsxs("div",{className:"p-8 flex flex-col items-center text-center",children:[l.jsx("button",{onClick:()=>ae(!1),className:"absolute top-6 right-6 text-slate-400 hover:text-slate-600 transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:"close"})}),l.jsxs("div",{className:"space-y-2 mb-8",children:[l.jsx("h2",{className:"text-[22px] font-bold text-slate-900 leading-tight tracking-tight",children:"Miktar Dzenle"}),l.jsx("p",{className:"text-[13px] font-medium text-slate-400 uppercase tracking-wider",children:w[S]?.name})]}),l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex items-center justify-between w-full mb-10 px-2",children:[l.jsx("button",{onClick:()=>Ae(Ie=>Math.max(1,(parseFloat(Ie)||0)-1).toString()),className:"w-14 h-14 flex items-center justify-center rounded-2xl bg-slate-50 text-slate-600 border border-slate-100 active:scale-90 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:"remove"})}),l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[l.jsx("input",{type:"number",value:Me,onChange:Ie=>Ae(Ie.target.value),onFocus:Ie=>Ie.target.select(),onKeyDown:Ie=>{Ie.key==="Enter"&&Xr(S,"quantity",parseInt(Me)||1)},className:"w-full text-center text-4xl font-bold bg-transparent border-none focus:ring-0 text-slate-900 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none outline-none",autoFocus:!0}),l.jsx("div",{className:"h-1 w-8 bg-blue-500 rounded-full mt-1 opacity-20"})]}),l.jsx("button",{onClick:()=>Ae(Ie=>((parseFloat(Ie)||0)+1).toString()),className:"w-14 h-14 flex items-center justify-center rounded-2xl bg-slate-50 text-slate-600 border border-slate-100 active:scale-90 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:"add"})})]}),l.jsxs("button",{onClick:()=>Xr(S,"quantity",parseInt(Me)||1),className:"w-full h-16 bg-blue-600 hover:bg-blue-700 active:scale-[0.98] text-white font-bold text-lg rounded-[1.25rem] shadow-[0_10px_20px_-5px_rgba(37,99,235,0.4)] transition-all flex items-center justify-center group",children:[l.jsx("span",{children:"Kaydet"}),l.jsx("span",{className:"material-symbols-outlined ml-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all",children:"check"})]})]})]}),l.jsx("div",{className:"pb-2 flex justify-center opacity-10",children:l.jsx("div",{className:"w-12 h-1 bg-slate-900 rounded-full"})})]})}),he&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-slate-900/40 backdrop-blur-[2px]",children:l.jsxs("div",{className:"w-full max-w-[340px] bg-white rounded-[2.5rem] shadow-2xl transform transition-all animate-in fade-in zoom-in duration-300 overflow-hidden border border-white/20",children:[l.jsxs("div",{className:"p-8 flex flex-col items-center text-center",children:[l.jsx("button",{onClick:()=>q(!1),className:"absolute top-6 right-6 text-slate-400 hover:text-slate-600 transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:"close"})}),l.jsxs("div",{className:"space-y-2 mb-8",children:[l.jsx("h2",{className:"text-[22px] font-bold text-slate-900 leading-tight tracking-tight",children:"Fiyat Dzenle"}),l.jsx("p",{className:"text-[13px] font-medium text-slate-400 uppercase tracking-wider",children:w[S]?.name})]}),l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex items-center justify-between w-full mb-10 px-2",children:[l.jsx("button",{onClick:()=>Ae(Ie=>Math.max(0,(parseFloat(Ie)||0)-1).toString()),className:"w-14 h-14 flex items-center justify-center rounded-2xl bg-slate-50 text-slate-600 border border-slate-100 active:scale-90 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:"remove"})}),l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[l.jsx("input",{type:"number",value:Me,onChange:Ie=>Ae(Ie.target.value),onFocus:Ie=>Ie.target.select(),onKeyDown:Ie=>{Ie.key==="Enter"&&Xr(S,"price",parseFloat(Me)||0)},className:"w-full text-center text-4xl font-bold bg-transparent border-none focus:ring-0 text-slate-900 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none outline-none",autoFocus:!0}),l.jsx("div",{className:"h-1 w-8 bg-blue-500 rounded-full mt-1 opacity-20"})]}),l.jsx("button",{onClick:()=>Ae(Ie=>((parseFloat(Ie)||0)+1).toString()),className:"w-14 h-14 flex items-center justify-center rounded-2xl bg-slate-50 text-slate-600 border border-slate-100 active:scale-90 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:"add"})})]}),l.jsxs("button",{onClick:()=>Xr(S,"price",parseFloat(Me)||0),className:"w-full h-16 bg-blue-600 hover:bg-blue-700 active:scale-[0.98] text-white font-bold text-lg rounded-[1.25rem] shadow-[0_10px_20px_-5px_rgba(37,99,235,0.4)] transition-all flex items-center justify-center group",children:[l.jsx("span",{children:"Kaydet"}),l.jsx("span",{className:"material-symbols-outlined ml-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all",children:"check"})]})]})]}),l.jsx("div",{className:"pb-2 flex justify-center opacity-10",children:l.jsx("div",{className:"w-12 h-1 bg-slate-900 rounded-full"})})]})}),Z&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-slate-900/40 backdrop-blur-[2px]",children:l.jsxs("div",{className:"w-full max-w-[340px] bg-white rounded-[2.5rem] shadow-2xl transform transition-all animate-in fade-in zoom-in duration-300 overflow-hidden border border-white/20",children:[l.jsxs("div",{className:"p-8 flex flex-col items-center text-center",children:[l.jsx("button",{onClick:()=>H(!1),className:"absolute top-6 right-6 text-slate-400 hover:text-slate-600 transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:"close"})}),l.jsxs("div",{className:"space-y-2 mb-8",children:[l.jsx("h2",{className:"text-[22px] font-bold text-slate-900 leading-tight tracking-tight",children:"skonto Ekle (%)"}),l.jsx("p",{className:"text-[13px] font-medium text-slate-400 uppercase tracking-wider",children:w[S]?.name})]}),l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex items-center justify-between w-full mb-10 px-2",children:[l.jsx("button",{onClick:()=>Ae(Ie=>Math.max(0,(parseFloat(Ie)||0)-1).toString()),className:"w-14 h-14 flex items-center justify-center rounded-2xl bg-slate-50 text-slate-600 border border-slate-100 active:scale-90 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:"remove"})}),l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[l.jsx("input",{type:"number",value:Me,onChange:Ie=>Ae(Ie.target.value),onFocus:Ie=>Ie.target.select(),onKeyDown:Ie=>{Ie.key==="Enter"&&Xr(S,"discount_rate",parseFloat(Me)||0)},className:"w-full text-center text-4xl font-bold bg-transparent border-none focus:ring-0 text-slate-900 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none outline-none",autoFocus:!0,placeholder:"%"}),l.jsx("div",{className:"h-1 w-8 bg-orange-500 rounded-full mt-1 opacity-20"})]}),l.jsx("button",{onClick:()=>Ae(Ie=>Math.min(100,(parseFloat(Ie)||0)+1).toString()),className:"w-14 h-14 flex items-center justify-center rounded-2xl bg-slate-50 text-slate-600 border border-slate-100 active:scale-90 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:"add"})})]}),l.jsxs("button",{onClick:()=>Xr(S,"discount_rate",parseFloat(Me)||0),className:"w-full h-16 bg-orange-500 hover:bg-orange-600 active:scale-[0.98] text-white font-bold text-lg rounded-[1.25rem] shadow-[0_10px_20px_-5px_rgba(249,115,22,0.4)] transition-all flex items-center justify-center group",children:[l.jsx("span",{children:"Kaydet"}),l.jsx("span",{className:"material-symbols-outlined ml-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all",children:"check"})]})]})]}),l.jsx("div",{className:"pb-2 flex justify-center opacity-10",children:l.jsx("div",{className:"w-12 h-1 bg-slate-900 rounded-full"})})]})}),se&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white w-[500px] max-h-[80vh] rounded-2xl shadow-2xl overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-3 flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:"Bekleme Listesi"}),l.jsx("button",{onClick:()=>ve(!1),className:"text-white/60 hover:text-white",children:l.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:le.length===0?l.jsxs("div",{className:"text-center text-slate-400 py-10",children:[l.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"hourglass_empty"}),l.jsx("p",{children:"Bekleyen sat yok"})]}):le.map((Ie,wt)=>{const _t=(Ie.items||[]).reduce((ee,fe)=>{const pe=fe.price*(1-(fe.discount_rate||0)/100);return ee+pe*fe.quantity},0),Ft=Ie.customer_name||Ie.customer||"Toptan Sat";return l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3 hover:border-blue-400 transition-all flex items-center gap-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"font-bold text-slate-800 truncate",children:Ft}),l.jsxs("p",{className:"font-extrabold text-lg text-red-600",children:[_t.toFixed(2)," "]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[l.jsx("span",{className:"text-sm font-bold",children:new Date(Ie.created_at).toLocaleDateString("tr-TR")}),l.jsx("span",{className:"text-sm font-bold",children:new Date(Ie.created_at).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}),l.jsxs("span",{className:"text-xs",children:[" ",Ie.items?.length||0," rn"]})]})]}),l.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[l.jsx("button",{onClick:()=>{Ge(Ie),ve(!1)},className:"px-3 py-2 bg-blue-600 text-white text-sm font-bold rounded-lg hover:bg-blue-700",children:"Ykle"}),l.jsx("button",{onClick:()=>Nt(Ie.id),className:"px-2 py-2 bg-red-100 text-red-600 font-bold rounded-lg hover:bg-red-200",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})]},Ie.id||wt)})})]})}),Ne&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-slate-900/40 backdrop-blur-[2px]",children:l.jsxs("div",{className:"w-full max-w-[340px] bg-white rounded-[2.5rem] shadow-2xl transform transition-all animate-in fade-in zoom-in duration-300 overflow-hidden border border-white/20",children:[l.jsxs("div",{className:"p-8 flex flex-col items-center text-center",children:[l.jsx("button",{onClick:()=>Ke(!1),className:"absolute top-6 right-6 text-slate-400 hover:text-slate-600 transition-colors",children:l.jsx("span",{className:"material-symbols-outlined text-2xl",children:"close"})}),l.jsxs("div",{className:"space-y-2 mb-8",children:[l.jsx("h2",{className:"text-[22px] font-bold text-slate-900 leading-tight tracking-tight",children:"Miktar Giriniz"}),l.jsx("p",{className:"text-[13px] font-medium text-slate-400 uppercase tracking-wider",children:Ce?.name})]}),l.jsxs("form",{onSubmit:mr,className:"w-full",children:[l.jsxs("div",{className:"flex items-center justify-between w-full mb-10 px-2",children:[l.jsx("button",{type:"button",onClick:()=>me(Ie=>Math.max(1,(parseFloat(Ie)||0)-1).toString()),className:"w-14 h-14 flex items-center justify-center rounded-2xl bg-slate-50 text-slate-600 border border-slate-100 active:scale-90 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:"remove"})}),l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[l.jsx("input",{className:"w-full text-center text-4xl font-bold bg-transparent border-none focus:ring-0 text-slate-900 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none outline-none",type:"number",value:ye,onChange:Ie=>me(Ie.target.value),autoFocus:!0,onFocus:Ie=>Ie.target.select()}),l.jsx("div",{className:"h-1 w-8 bg-emerald-500 rounded-full mt-1 opacity-20"})]}),l.jsx("button",{type:"button",onClick:()=>me(Ie=>((parseFloat(Ie)||0)+1).toString()),className:"w-14 h-14 flex items-center justify-center rounded-2xl bg-slate-50 text-slate-600 border border-slate-100 active:scale-90 transition-transform",children:l.jsx("span",{className:"material-symbols-outlined text-3xl",children:"add"})})]}),l.jsxs("button",{type:"submit",className:"w-full h-16 bg-emerald-500 hover:bg-emerald-600 active:scale-[0.98] text-white font-bold text-lg rounded-[1.25rem] shadow-[0_10px_20px_-5px_rgba(16,185,129,0.4)] transition-all flex items-center justify-center group",children:[l.jsx("span",{children:"Ekle"}),l.jsx("span",{className:"material-symbols-outlined ml-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all",children:"chevron_right"})]})]})]}),l.jsx("div",{className:"pb-2 flex justify-center opacity-10",children:l.jsx("div",{className:"w-12 h-1 bg-slate-900 rounded-full"})})]})}),Ue&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-[70] p-4",children:l.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in duration-200",children:[l.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-indigo-600 px-6 py-4 flex justify-between items-center text-white",children:[l.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined",children:"add_circle"}),"Hzl rn Ekle"]}),l.jsx("button",{onClick:()=>He(!1),className:"hover:bg-white/20 rounded-full p-1 transition-colors",children:l.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:`space-y-2 transition-all duration-300 ${Oe===0?"opacity-100 scale-100":"opacity-50 scale-95 grayscale"}`,children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"1. rn smi"}),l.jsx("input",{ref:Pe,disabled:Oe!==0,value:rt.name,onChange:Ie=>ht({...rt,name:Ie.target.value}),onKeyDown:Ie=>{Ie.key==="Enter"&&rt.name.trim()&&(We(1),setTimeout(()=>Ye.current?.focus(),100))},className:"w-full px-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl focus:border-violet-500 focus:bg-white outline-none font-bold text-lg disabled:opacity-60",placeholder:"rn: ay"})]}),l.jsxs("div",{className:`space-y-2 transition-all duration-300 ${Oe===1?"opacity-100 scale-100":"opacity-50 scale-95 grayscale"}`,children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"2. Adet"}),l.jsx("input",{ref:Ye,type:"number",disabled:Oe!==1,value:rt.quantity,onChange:Ie=>ht({...rt,quantity:Ie.target.value}),onKeyDown:Ie=>{Ie.key==="Enter"&&rt.quantity&&(We(2),setTimeout(()=>Tt.current?.focus(),100))},className:"w-full px-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl focus:border-violet-500 focus:bg-white outline-none font-bold text-lg disabled:opacity-60",placeholder:"1"})]}),l.jsxs("div",{className:`space-y-2 transition-all duration-300 ${Oe===2?"opacity-100 scale-100":"opacity-50 scale-95 grayscale"}`,children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700",children:"3. Fiyat (TL)"}),l.jsx("input",{ref:Tt,type:"number",disabled:Oe!==2,value:rt.price,onChange:Ie=>ht({...rt,price:Ie.target.value}),onKeyDown:Ie=>{if(Ie.key==="Enter"&&rt.price){const wt={id:`TEMP-${Date.now()}`,stock_code:"TANIMSIZ",name:rt.name,price:parseFloat(rt.price),quantity:parseFloat(rt.quantity),discount_rate:0},_t=w.findIndex(Ft=>Ft.name===wt.name&&Ft.price===wt.price);if(_t>=0){const Ft=[...w];Ft[_t].quantity+=wt.quantity,E(Ft),T(_t)}else E([...w,wt]),T(w.length);He(!1),ht({name:"",quantity:1,price:""}),We(0)}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl focus:border-violet-500 focus:bg-white outline-none font-bold text-lg disabled:opacity-60",placeholder:"0.00"})]})]}),l.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>He(!1),className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-200 rounded-lg",children:"ptal"}),Oe>0&&l.jsx("button",{onClick:()=>We(Ie=>Ie-1),className:"px-4 py-2 text-violet-600 font-bold hover:bg-violet-50 rounded-lg",children:"Geri"})]})]})}),oe&&l.jsxs("div",{className:"fixed bottom-10 right-10 z-50 bg-emerald-500 text-white px-6 py-4 rounded-xl shadow-2xl text-lg font-bold animate-pulse flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined",children:"check_circle"}),oe]})]})}var zt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(zt||(zt={}));var X_=new Map([[zt.QR_CODE,"QR_CODE"],[zt.AZTEC,"AZTEC"],[zt.CODABAR,"CODABAR"],[zt.CODE_39,"CODE_39"],[zt.CODE_93,"CODE_93"],[zt.CODE_128,"CODE_128"],[zt.DATA_MATRIX,"DATA_MATRIX"],[zt.MAXICODE,"MAXICODE"],[zt.ITF,"ITF"],[zt.EAN_13,"EAN_13"],[zt.EAN_8,"EAN_8"],[zt.PDF_417,"PDF_417"],[zt.RSS_14,"RSS_14"],[zt.RSS_EXPANDED,"RSS_EXPANDED"],[zt.UPC_A,"UPC_A"],[zt.UPC_E,"UPC_E"],[zt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),K_;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(K_||(K_={}));function qR(e){return Object.values(zt).includes(e)}var ux;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(ux||(ux={}));var XR=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[ux.SCAN_TYPE_CAMERA,ux.SCAN_TYPE_FILE],e})(),hS=(function(){function e(r,t){this.format=r,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(r){if(!X_.has(r))throw"".concat(r," not in html5QrcodeSupportedFormatsTextMap");return new e(r,X_.get(r))},e})(),Y_=(function(){function e(){}return e.createFromText=function(r){var t={text:r};return{decodedText:r,result:t}},e.createFromQrcodeResult=function(r){return{decodedText:r.text,result:r}},e})(),o2;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(o2||(o2={}));var KR=(function(){function e(){}return e.createFrom=function(r){return{errorMessage:r,type:o2.UNKWOWN_ERROR}},e})(),YR=(function(){function e(r){this.verbose=r}return e.prototype.log=function(r){this.verbose&&console.log(r)},e.prototype.warn=function(r){this.verbose&&console.warn(r)},e.prototype.logError=function(r,t){(this.verbose||t===!0)&&console.error(r)},e.prototype.logErrors=function(r){if(r.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(r)},e})();function bl(e){return typeof e>"u"||e===null}var B0=(function(){function e(){}return e.codeParseError=function(r){return"QR code parse error, error = ".concat(r)},e.errorGettingUserMedia=function(r){return"Error getting userMedia, error = ".concat(r)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),xS=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(r,t){if(typeof r!="object"){var n=typeof r;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(a),c=Object.keys(r),d=0,x=c;d<x.length;d++){var f=x[d];if(s.has(f))return t.logError("".concat(f," is not supported videoConstaints."),!0),!1}return!0},e})(),fd={exports:{}},$R=fd.exports,$_;function ZR(){return $_||($_=1,(function(e,r){(function(t,n){n(r)})($R,(function(t){function n(re){return re==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,o){re.__proto__=o}||function(re,o){for(var h in o)o.hasOwnProperty(h)&&(re[h]=o[h])};function s(re,o){a(re,o);function h(){this.constructor=re}re.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)}function c(re,o){var h=Object.setPrototypeOf;h?h(re,o):re.__proto__=o}function d(re,o){o===void 0&&(o=re.constructor);var h=Error.captureStackTrace;h&&h(re,o)}var x=(function(re){s(o,re);function o(h){var m=this.constructor,b=re.call(this,h)||this;return Object.defineProperty(b,"name",{value:m.name,enumerable:!1}),c(b,m.prototype),d(b),b}return o})(Error);class f extends x{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}f.kind="Exception";class g extends f{}g.kind="ArgumentException";class v extends f{}v.kind="IllegalArgumentException";class w{constructor(o){if(this.binarizer=o,o===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,h){return this.binarizer.getBlackRow(o,h)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,h,m,b){const y=this.binarizer.getLuminanceSource().crop(o,h,m,b);return new w(this.binarizer.createBinarizer(y))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new w(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new w(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class E extends f{static getChecksumInstance(){return new E}}E.kind="ChecksumException";class N{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class S{static arraycopy(o,h,m,b,y){for(;y--;)m[b++]=o[h++]}static currentTimeMillis(){return Date.now()}}class T extends f{}T.kind="IndexOutOfBoundsException";class j extends T{constructor(o=void 0,h=void 0){super(h),this.index=o,this.message=h}}j.kind="ArrayIndexOutOfBoundsException";class D{static fill(o,h){for(let m=0,b=o.length;m<b;m++)o[m]=h}static fillWithin(o,h,m,b){D.rangeCheck(o.length,h,m);for(let y=h;y<m;y++)o[y]=b}static rangeCheck(o,h,m){if(h>m)throw new v("fromIndex("+h+") > toIndex("+m+")");if(h<0)throw new j(h);if(m>o)throw new j(m)}static asList(...o){return o}static create(o,h,m){return Array.from({length:o}).map(y=>Array.from({length:h}).fill(m))}static createInt32Array(o,h,m){return Array.from({length:o}).map(y=>Int32Array.from({length:h}).fill(m))}static equals(o,h){if(!o||!h||!o.length||!h.length||o.length!==h.length)return!1;for(let m=0,b=o.length;m<b;m++)if(o[m]!==h[m])return!1;return!0}static hashCode(o){if(o===null)return 0;let h=1;for(const m of o)h=31*h+m;return h}static fillUint8Array(o,h){for(let m=0;m!==o.length;m++)o[m]=h}static copyOf(o,h){return o.slice(0,h)}static copyOfUint8Array(o,h){if(o.length<=h){const m=new Uint8Array(h);return m.set(o),m}return o.slice(0,h)}static copyOfRange(o,h,m){const b=m-h,y=new Int32Array(b);return S.arraycopy(o,h,y,0,b),y}static binarySearch(o,h,m){m===void 0&&(m=D.numberComparator);let b=0,y=o.length-1;for(;b<=y;){const k=y+b>>1,A=m(h,o[k]);if(A>0)b=k+1;else if(A<0)y=k-1;else return k}return-b-1}static numberComparator(o,h){return o-h}}class I{static numberOfTrailingZeros(o){let h;if(o===0)return 32;let m=31;return h=o<<16,h!==0&&(m-=16,o=h),h=o<<8,h!==0&&(m-=8,o=h),h=o<<4,h!==0&&(m-=4,o=h),h=o<<2,h!==0&&(m-=2,o=h),m-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let h=1;return o>>>16||(h+=16,o<<=16),o>>>24||(h+=8,o<<=8),o>>>28||(h+=4,o<<=4),o>>>30||(h+=2,o<<=2),h-=o>>>31,h}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,h){return Math.trunc(o/h)}static parseInt(o,h=void 0){return parseInt(o,h)}}I.MIN_VALUE_32_BITS=-2147483648,I.MAX_VALUE=Number.MAX_SAFE_INTEGER;class L{constructor(o,h){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,h==null?this.bits=L.makeArray(o):this.bits=h)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const h=L.makeArray(o);S.arraycopy(this.bits,0,h,0,this.bits.length),this.bits=h}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const h=this.size;if(o>=h)return h;const m=this.bits;let b=Math.floor(o/32),y=m[b];y&=~((1<<(o&31))-1);const k=m.length;for(;y===0;){if(++b===k)return h;y=m[b]}const A=b*32+I.numberOfTrailingZeros(y);return A>h?h:A}getNextUnset(o){const h=this.size;if(o>=h)return h;const m=this.bits;let b=Math.floor(o/32),y=~m[b];y&=~((1<<(o&31))-1);const k=m.length;for(;y===0;){if(++b===k)return h;y=~m[b]}const A=b*32+I.numberOfTrailingZeros(y);return A>h?h:A}setBulk(o,h){this.bits[Math.floor(o/32)]=h}setRange(o,h){if(h<o||o<0||h>this.size)throw new v;if(h===o)return;h--;const m=Math.floor(o/32),b=Math.floor(h/32),y=this.bits;for(let k=m;k<=b;k++){const A=k>m?0:o&31,F=(2<<(k<b?31:h&31))-(1<<A);y[k]|=F}}clear(){const o=this.bits.length,h=this.bits;for(let m=0;m<o;m++)h[m]=0}isRange(o,h,m){if(h<o||o<0||h>this.size)throw new v;if(h===o)return!0;h--;const b=Math.floor(o/32),y=Math.floor(h/32),k=this.bits;for(let A=b;A<=y;A++){const O=A>b?0:o&31,K=(2<<(A<y?31:h&31))-(1<<O)&4294967295;if((k[A]&K)!==(m?K:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,h){if(h<0||h>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+h);for(let m=h;m>0;m--)this.appendBit((o>>m-1&1)===1)}appendBitArray(o){const h=o.size;this.ensureCapacity(this.size+h);for(let m=0;m<h;m++)this.appendBit(o.get(m))}xor(o){if(this.size!==o.size)throw new v("Sizes don't match");const h=this.bits;for(let m=0,b=h.length;m<b;m++)h[m]^=o.bits[m]}toBytes(o,h,m,b){for(let y=0;y<b;y++){let k=0;for(let A=0;A<8;A++)this.get(o)&&(k|=1<<7-A),o++;h[m+y]=k}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),h=Math.floor((this.size-1)/32),m=h+1,b=this.bits;for(let y=0;y<m;y++){let k=b[y];k=k>>1&1431655765|(k&1431655765)<<1,k=k>>2&858993459|(k&858993459)<<2,k=k>>4&252645135|(k&252645135)<<4,k=k>>8&16711935|(k&16711935)<<8,k=k>>16&65535|(k&65535)<<16,o[h-y]=k}if(this.size!==m*32){const y=m*32-this.size;let k=o[0]>>>y;for(let A=1;A<m;A++){const O=o[A];k|=O<<32-y,o[A-1]=k,k=O>>>y}o[m-1]=k}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof L))return!1;const h=o;return this.size===h.size&&D.equals(this.bits,h.bits)}hashCode(){return 31*this.size+D.hashCode(this.bits)}toString(){let o="";for(let h=0,m=this.size;h<m;h++)(h&7)===0&&(o+=" "),o+=this.get(h)?"X":".";return o}clone(){return new L(this.size,this.bits.slice())}}var V;(function(re){re[re.OTHER=0]="OTHER",re[re.PURE_BARCODE=1]="PURE_BARCODE",re[re.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",re[re.TRY_HARDER=3]="TRY_HARDER",re[re.CHARACTER_SET=4]="CHARACTER_SET",re[re.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",re[re.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",re[re.ASSUME_GS1=7]="ASSUME_GS1",re[re.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",re[re.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",re[re.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(V||(V={}));var X=V;class M extends f{static getFormatInstance(){return new M}}M.kind="FormatException";var W;(function(re){re[re.Cp437=0]="Cp437",re[re.ISO8859_1=1]="ISO8859_1",re[re.ISO8859_2=2]="ISO8859_2",re[re.ISO8859_3=3]="ISO8859_3",re[re.ISO8859_4=4]="ISO8859_4",re[re.ISO8859_5=5]="ISO8859_5",re[re.ISO8859_6=6]="ISO8859_6",re[re.ISO8859_7=7]="ISO8859_7",re[re.ISO8859_8=8]="ISO8859_8",re[re.ISO8859_9=9]="ISO8859_9",re[re.ISO8859_10=10]="ISO8859_10",re[re.ISO8859_11=11]="ISO8859_11",re[re.ISO8859_13=12]="ISO8859_13",re[re.ISO8859_14=13]="ISO8859_14",re[re.ISO8859_15=14]="ISO8859_15",re[re.ISO8859_16=15]="ISO8859_16",re[re.SJIS=16]="SJIS",re[re.Cp1250=17]="Cp1250",re[re.Cp1251=18]="Cp1251",re[re.Cp1252=19]="Cp1252",re[re.Cp1256=20]="Cp1256",re[re.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",re[re.UTF8=22]="UTF8",re[re.ASCII=23]="ASCII",re[re.Big5=24]="Big5",re[re.GB18030=25]="GB18030",re[re.EUC_KR=26]="EUC_KR"})(W||(W={}));class z{constructor(o,h,m,...b){this.valueIdentifier=o,this.name=m,typeof h=="number"?this.values=Int32Array.from([h]):this.values=h,this.otherEncodingNames=b,z.VALUE_IDENTIFIER_TO_ECI.set(o,this),z.NAME_TO_ECI.set(m,this);const y=this.values;for(let k=0,A=y.length;k!==A;k++){const O=y[k];z.VALUES_TO_ECI.set(O,this)}for(const k of b)z.NAME_TO_ECI.set(k,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new M("incorect value");const h=z.VALUES_TO_ECI.get(o);if(h===void 0)throw new M("incorect value");return h}static getCharacterSetECIByName(o){const h=z.NAME_TO_ECI.get(o);if(h===void 0)throw new M("incorect value");return h}equals(o){if(!(o instanceof z))return!1;const h=o;return this.getName()===h.getName()}}z.VALUE_IDENTIFIER_TO_ECI=new Map,z.VALUES_TO_ECI=new Map,z.NAME_TO_ECI=new Map,z.Cp437=new z(W.Cp437,Int32Array.from([0,2]),"Cp437"),z.ISO8859_1=new z(W.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),z.ISO8859_2=new z(W.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),z.ISO8859_3=new z(W.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),z.ISO8859_4=new z(W.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),z.ISO8859_5=new z(W.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),z.ISO8859_6=new z(W.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),z.ISO8859_7=new z(W.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),z.ISO8859_8=new z(W.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),z.ISO8859_9=new z(W.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),z.ISO8859_10=new z(W.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),z.ISO8859_11=new z(W.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),z.ISO8859_13=new z(W.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),z.ISO8859_14=new z(W.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),z.ISO8859_15=new z(W.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),z.ISO8859_16=new z(W.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),z.SJIS=new z(W.SJIS,20,"SJIS","Shift_JIS"),z.Cp1250=new z(W.Cp1250,21,"Cp1250","windows-1250"),z.Cp1251=new z(W.Cp1251,22,"Cp1251","windows-1251"),z.Cp1252=new z(W.Cp1252,23,"Cp1252","windows-1252"),z.Cp1256=new z(W.Cp1256,24,"Cp1256","windows-1256"),z.UnicodeBigUnmarked=new z(W.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),z.UTF8=new z(W.UTF8,26,"UTF8","UTF-8"),z.ASCII=new z(W.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),z.Big5=new z(W.Big5,28,"Big5"),z.GB18030=new z(W.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),z.EUC_KR=new z(W.EUC_KR,30,"EUC_KR","EUC-KR");class ae extends f{}ae.kind="UnsupportedOperationException";class Z{static decode(o,h){const m=this.encodingName(h);return this.customDecoder?this.customDecoder(o,m):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(m)?this.decodeFallback(o,m):new TextDecoder(m).decode(o)}static shouldDecodeOnFallback(o){return!Z.isBrowser()&&o==="ISO-8859-1"}static encode(o,h){const m=this.encodingName(h);return this.customEncoder?this.customEncoder(o,m):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof z?o:z.getCharacterSetECIByName(o)}static decodeFallback(o,h){const m=this.encodingCharacterSet(h);if(Z.isDecodeFallbackSupported(m)){let b="";for(let y=0,k=o.length;y<k;y++){let A=o[y].toString(16);A.length<2&&(A="0"+A),b+="%"+A}return decodeURIComponent(b)}if(m.equals(z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new ae(`Encoding ${this.encodingName(h)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(z.UTF8)||o.equals(z.ISO8859_1)||o.equals(z.ASCII)}static encodeFallback(o){const m=btoa(unescape(encodeURIComponent(o))).split(""),b=[];for(let y=0;y<m.length;y++)b.push(m[y].charCodeAt(0));return new Uint8Array(b)}}class H{static castAsNonUtf8Char(o,h=null){const m=h?h.getName():this.ISO88591;return Z.decode(new Uint8Array([o]),m)}static guessEncoding(o,h){if(h!=null&&h.get(X.CHARACTER_SET)!==void 0)return h.get(X.CHARACTER_SET).toString();const m=o.length;let b=!0,y=!0,k=!0,A=0,O=0,F=0,K=0,ne=0,ce=0,ke=0,je=0,Fe=0,qe=0,nt=0;const At=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let St=0;St<m&&(b||y||k);St++){const vt=o[St]&255;k&&(A>0?(vt&128)===0?k=!1:A--:(vt&128)!==0&&((vt&64)===0?k=!1:(A++,(vt&32)===0?O++:(A++,(vt&16)===0?F++:(A++,(vt&8)===0?K++:k=!1))))),b&&(vt>127&&vt<160?b=!1:vt>159&&(vt<192||vt===215||vt===247)&&nt++),y&&(ne>0?vt<64||vt===127||vt>252?y=!1:ne--:vt===128||vt===160||vt>239?y=!1:vt>160&&vt<224?(ce++,je=0,ke++,ke>Fe&&(Fe=ke)):vt>127?(ne++,ke=0,je++,je>qe&&(qe=je)):(ke=0,je=0))}return k&&A>0&&(k=!1),y&&ne>0&&(y=!1),k&&(At||O+F+K>0)?H.UTF8:y&&(H.ASSUME_SHIFT_JIS||Fe>=3||qe>=3)?H.SHIFT_JIS:b&&y?Fe===2&&ce===2||nt*10>=m?H.SHIFT_JIS:H.ISO88591:b?H.ISO88591:y?H.SHIFT_JIS:k?H.UTF8:H.PLATFORM_DEFAULT_ENCODING}static format(o,...h){let m=-1;function b(k,A,O,F,K,ne){if(k==="%%")return"%";if(h[++m]===void 0)return;k=F?parseInt(F.substr(1)):void 0;let ce=K?parseInt(K.substr(1)):void 0,ke;switch(ne){case"s":ke=h[m];break;case"c":ke=h[m][0];break;case"f":ke=parseFloat(h[m]).toFixed(k);break;case"p":ke=parseFloat(h[m]).toPrecision(k);break;case"e":ke=parseFloat(h[m]).toExponential(k);break;case"x":ke=parseInt(h[m]).toString(ce||16);break;case"d":ke=parseFloat(parseInt(h[m],ce||10).toPrecision(k)).toFixed(0);break}ke=typeof ke=="object"?JSON.stringify(ke):(+ke).toString(ce);let je=parseInt(O),Fe=O&&O[0]+""=="0"?"0":" ";for(;ke.length<je;)ke=A!==void 0?ke+Fe:Fe+ke;return ke}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(y,b)}static getBytes(o,h){return Z.encode(o,h)}static getCharCode(o,h=0){return o.charCodeAt(h)}static getCharAt(o){return String.fromCharCode(o)}}H.SHIFT_JIS=z.SJIS.getName(),H.GB2312="GB2312",H.ISO88591=z.ISO8859_1.getName(),H.EUC_JP="EUC_JP",H.UTF8=z.UTF8.getName(),H.PLATFORM_DEFAULT_ENCODING=H.UTF8,H.ASSUME_SHIFT_JIS=!1;class he{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=H.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,h,m){for(let b=h;h<h+m;b++)this.append(o[b]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,h){this.value=this.value.substr(0,o)+h+this.value.substr(o+1)}substring(o,h){return this.value.substring(o,h)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,h){this.value=this.value.substr(0,o)+h+this.value.substr(o+h.length)}}class q{constructor(o,h,m,b){if(this.width=o,this.height=h,this.rowSize=m,this.bits=b,h==null&&(h=o),this.height=h,o<1||h<1)throw new v("Both dimensions must be greater than 0");m==null&&(m=Math.floor((o+31)/32)),this.rowSize=m,b==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const h=o.length,m=o[0].length,b=new q(m,h);for(let y=0;y<h;y++){const k=o[y];for(let A=0;A<m;A++)k[A]&&b.set(A,y)}return b}static parseFromString(o,h,m){if(o===null)throw new v("stringRepresentation cannot be null");const b=new Array(o.length);let y=0,k=0,A=-1,O=0,F=0;for(;F<o.length;)if(o.charAt(F)===`
`||o.charAt(F)==="\r"){if(y>k){if(A===-1)A=y-k;else if(y-k!==A)throw new v("row lengths do not match");k=y,O++}F++}else if(o.substring(F,F+h.length)===h)F+=h.length,b[y]=!0,y++;else if(o.substring(F,F+m.length)===m)F+=m.length,b[y]=!1,y++;else throw new v("illegal character encountered: "+o.substring(F));if(y>k){if(A===-1)A=y-k;else if(y-k!==A)throw new v("row lengths do not match");O++}const K=new q(A,O);for(let ne=0;ne<y;ne++)b[ne]&&K.set(Math.floor(ne%A),Math.floor(ne/A));return K}get(o,h){const m=h*this.rowSize+Math.floor(o/32);return(this.bits[m]>>>(o&31)&1)!==0}set(o,h){const m=h*this.rowSize+Math.floor(o/32);this.bits[m]|=1<<(o&31)&4294967295}unset(o,h){const m=h*this.rowSize+Math.floor(o/32);this.bits[m]&=~(1<<(o&31)&4294967295)}flip(o,h){const m=h*this.rowSize+Math.floor(o/32);this.bits[m]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new v("input matrix dimensions do not match");const h=new L(Math.floor(this.width/32)+1),m=this.rowSize,b=this.bits;for(let y=0,k=this.height;y<k;y++){const A=y*m,O=o.getRow(y,h).getBitArray();for(let F=0;F<m;F++)b[A+F]^=O[F]}}clear(){const o=this.bits,h=o.length;for(let m=0;m<h;m++)o[m]=0}setRegion(o,h,m,b){if(h<0||o<0)throw new v("Left and top must be nonnegative");if(b<1||m<1)throw new v("Height and width must be at least 1");const y=o+m,k=h+b;if(k>this.height||y>this.width)throw new v("The region must fit inside the matrix");const A=this.rowSize,O=this.bits;for(let F=h;F<k;F++){const K=F*A;for(let ne=o;ne<y;ne++)O[K+Math.floor(ne/32)]|=1<<(ne&31)&4294967295}}getRow(o,h){h==null||h.getSize()<this.width?h=new L(this.width):h.clear();const m=this.rowSize,b=this.bits,y=o*m;for(let k=0;k<m;k++)h.setBulk(k*32,b[y+k]);return h}setRow(o,h){S.arraycopy(h.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),h=this.getHeight();let m=new L(o),b=new L(o);for(let y=0,k=Math.floor((h+1)/2);y<k;y++)m=this.getRow(y,m),b=this.getRow(h-1-y,b),m.reverse(),b.reverse(),this.setRow(y,b),this.setRow(h-1-y,m)}getEnclosingRectangle(){const o=this.width,h=this.height,m=this.rowSize,b=this.bits;let y=o,k=h,A=-1,O=-1;for(let F=0;F<h;F++)for(let K=0;K<m;K++){const ne=b[F*m+K];if(ne!==0){if(F<k&&(k=F),F>O&&(O=F),K*32<y){let ce=0;for(;(ne<<31-ce&4294967295)===0;)ce++;K*32+ce<y&&(y=K*32+ce)}if(K*32+31>A){let ce=31;for(;!(ne>>>ce);)ce--;K*32+ce>A&&(A=K*32+ce)}}}return A<y||O<k?null:Int32Array.from([y,k,A-y+1,O-k+1])}getTopLeftOnBit(){const o=this.rowSize,h=this.bits;let m=0;for(;m<h.length&&h[m]===0;)m++;if(m===h.length)return null;const b=m/o;let y=m%o*32;const k=h[m];let A=0;for(;(k<<31-A&4294967295)===0;)A++;return y+=A,Int32Array.from([y,b])}getBottomRightOnBit(){const o=this.rowSize,h=this.bits;let m=h.length-1;for(;m>=0&&h[m]===0;)m--;if(m<0)return null;const b=Math.floor(m/o);let y=Math.floor(m%o)*32;const k=h[m];let A=31;for(;!(k>>>A);)A--;return y+=A,Int32Array.from([y,b])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof q))return!1;const h=o;return this.width===h.width&&this.height===h.height&&this.rowSize===h.rowSize&&D.equals(this.bits,h.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+D.hashCode(this.bits),o}toString(o="X ",h="  ",m=`
`){return this.buildToString(o,h,m)}buildToString(o,h,m){let b=new he;for(let y=0,k=this.height;y<k;y++){for(let A=0,O=this.width;A<O;A++)b.append(this.get(A,y)?o:h);b.append(m)}return b.toString()}clone(){return new q(this.width,this.height,this.rowSize,this.bits.slice())}}class se extends f{static getNotFoundInstance(){return new se}}se.kind="NotFoundException";class ve extends N{constructor(o){super(o),this.luminances=ve.EMPTY,this.buckets=new Int32Array(ve.LUMINANCE_BUCKETS)}getBlackRow(o,h){const m=this.getLuminanceSource(),b=m.getWidth();h==null||h.getSize()<b?h=new L(b):h.clear(),this.initArrays(b);const y=m.getRow(o,this.luminances),k=this.buckets;for(let O=0;O<b;O++)k[(y[O]&255)>>ve.LUMINANCE_SHIFT]++;const A=ve.estimateBlackPoint(k);if(b<3)for(let O=0;O<b;O++)(y[O]&255)<A&&h.set(O);else{let O=y[0]&255,F=y[1]&255;for(let K=1;K<b-1;K++){const ne=y[K+1]&255;(F*4-O-ne)/2<A&&h.set(K),O=F,F=ne}}return h}getBlackMatrix(){const o=this.getLuminanceSource(),h=o.getWidth(),m=o.getHeight(),b=new q(h,m);this.initArrays(h);const y=this.buckets;for(let O=1;O<5;O++){const F=Math.floor(m*O/5),K=o.getRow(F,this.luminances),ne=Math.floor(h*4/5);for(let ce=Math.floor(h/5);ce<ne;ce++){const ke=K[ce]&255;y[ke>>ve.LUMINANCE_SHIFT]++}}const k=ve.estimateBlackPoint(y),A=o.getMatrix();for(let O=0;O<m;O++){const F=O*h;for(let K=0;K<h;K++)(A[F+K]&255)<k&&b.set(K,O)}return b}createBinarizer(o){return new ve(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const h=this.buckets;for(let m=0;m<ve.LUMINANCE_BUCKETS;m++)h[m]=0}static estimateBlackPoint(o){const h=o.length;let m=0,b=0,y=0;for(let K=0;K<h;K++)o[K]>y&&(b=K,y=o[K]),o[K]>m&&(m=o[K]);let k=0,A=0;for(let K=0;K<h;K++){const ne=K-b,ce=o[K]*ne*ne;ce>A&&(k=K,A=ce)}if(b>k){const K=b;b=k,k=K}if(k-b<=h/16)throw new se;let O=k-1,F=-1;for(let K=k-1;K>b;K--){const ne=K-b,ce=ne*ne*(k-K)*(m-o[K]);ce>F&&(O=K,F=ce)}return O<<ve.LUMINANCE_SHIFT}}ve.LUMINANCE_BITS=5,ve.LUMINANCE_SHIFT=8-ve.LUMINANCE_BITS,ve.LUMINANCE_BUCKETS=1<<ve.LUMINANCE_BITS,ve.EMPTY=Uint8ClampedArray.from([0]);class le extends ve{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),h=o.getWidth(),m=o.getHeight();if(h>=le.MINIMUM_DIMENSION&&m>=le.MINIMUM_DIMENSION){const b=o.getMatrix();let y=h>>le.BLOCK_SIZE_POWER;(h&le.BLOCK_SIZE_MASK)!==0&&y++;let k=m>>le.BLOCK_SIZE_POWER;(m&le.BLOCK_SIZE_MASK)!==0&&k++;const A=le.calculateBlackPoints(b,y,k,h,m),O=new q(h,m);le.calculateThresholdForBlock(b,y,k,h,m,A,O),this.matrix=O}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new le(o)}static calculateThresholdForBlock(o,h,m,b,y,k,A){const O=y-le.BLOCK_SIZE,F=b-le.BLOCK_SIZE;for(let K=0;K<m;K++){let ne=K<<le.BLOCK_SIZE_POWER;ne>O&&(ne=O);const ce=le.cap(K,2,m-3);for(let ke=0;ke<h;ke++){let je=ke<<le.BLOCK_SIZE_POWER;je>F&&(je=F);const Fe=le.cap(ke,2,h-3);let qe=0;for(let At=-2;At<=2;At++){const St=k[ce+At];qe+=St[Fe-2]+St[Fe-1]+St[Fe]+St[Fe+1]+St[Fe+2]}const nt=qe/25;le.thresholdBlock(o,je,ne,nt,b,A)}}}static cap(o,h,m){return o<h?h:o>m?m:o}static thresholdBlock(o,h,m,b,y,k){for(let A=0,O=m*y+h;A<le.BLOCK_SIZE;A++,O+=y)for(let F=0;F<le.BLOCK_SIZE;F++)(o[O+F]&255)<=b&&k.set(h+F,m+A)}static calculateBlackPoints(o,h,m,b,y){const k=y-le.BLOCK_SIZE,A=b-le.BLOCK_SIZE,O=new Array(m);for(let F=0;F<m;F++){O[F]=new Int32Array(h);let K=F<<le.BLOCK_SIZE_POWER;K>k&&(K=k);for(let ne=0;ne<h;ne++){let ce=ne<<le.BLOCK_SIZE_POWER;ce>A&&(ce=A);let ke=0,je=255,Fe=0;for(let nt=0,At=K*b+ce;nt<le.BLOCK_SIZE;nt++,At+=b){for(let St=0;St<le.BLOCK_SIZE;St++){const vt=o[At+St]&255;ke+=vt,vt<je&&(je=vt),vt>Fe&&(Fe=vt)}if(Fe-je>le.MIN_DYNAMIC_RANGE)for(nt++,At+=b;nt<le.BLOCK_SIZE;nt++,At+=b)for(let St=0;St<le.BLOCK_SIZE;St++)ke+=o[At+St]&255}let qe=ke>>le.BLOCK_SIZE_POWER*2;if(Fe-je<=le.MIN_DYNAMIC_RANGE&&(qe=je/2,F>0&&ne>0)){const nt=(O[F-1][ne]+2*O[F][ne-1]+O[F-1][ne-1])/4;je<nt&&(qe=nt)}O[F][ne]=qe}}return O}}le.BLOCK_SIZE_POWER=3,le.BLOCK_SIZE=1<<le.BLOCK_SIZE_POWER,le.BLOCK_SIZE_MASK=le.BLOCK_SIZE-1,le.MINIMUM_DIMENSION=le.BLOCK_SIZE*5,le.MIN_DYNAMIC_RANGE=24;class ge{constructor(o,h){this.width=o,this.height=h}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,h,m,b){throw new ae("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ae("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ae("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let h=new he;for(let m=0;m<this.height;m++){const b=this.getRow(m,o);for(let y=0;y<this.width;y++){const k=b[y]&255;let A;k<64?A="#":k<128?A="+":k<192?A=".":A=" ",h.append(A)}h.append(`
`)}return h.toString()}}class ie extends ge{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,h){const m=this.delegate.getRow(o,h),b=this.getWidth();for(let y=0;y<b;y++)m[y]=255-(m[y]&255);return m}getMatrix(){const o=this.delegate.getMatrix(),h=this.getWidth()*this.getHeight(),m=new Uint8ClampedArray(h);for(let b=0;b<h;b++)m[b]=255-(o[b]&255);return m}isCropSupported(){return this.delegate.isCropSupported()}crop(o,h,m,b){return new ie(this.delegate.crop(o,h,m,b))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ie(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ie(this.delegate.rotateCounterClockwise45())}}class Le extends ge{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=Le.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const h=o.getContext("2d").getImageData(0,0,o.width,o.height);return Le.toGrayscaleBuffer(h.data,o.width,o.height)}static toGrayscaleBuffer(o,h,m){const b=new Uint8ClampedArray(h*m);for(let y=0,k=0,A=o.length;y<A;y+=4,k++){let O;if(o[y+3]===0)O=255;else{const K=o[y],ne=o[y+1],ce=o[y+2];O=306*K+601*ne+117*ce+512>>10}b[k]=O}return b}getRow(o,h){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);const m=this.getWidth(),b=o*m;return h===null?h=this.buffer.slice(b,b+m):(h.length<m&&(h=new Uint8ClampedArray(m)),h.set(this.buffer.slice(b,b+m))),h}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,h,m,b){return super.crop(o,h,m,b),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const h=this.getTempCanvasElement(),m=h.getContext("2d"),b=o*Le.DEGREE_TO_RADIANS,y=this.canvas.width,k=this.canvas.height,A=Math.ceil(Math.abs(Math.cos(b))*y+Math.abs(Math.sin(b))*k),O=Math.ceil(Math.abs(Math.sin(b))*y+Math.abs(Math.cos(b))*k);return h.width=A,h.height=O,m.translate(A/2,O/2),m.rotate(b),m.drawImage(this.canvas,y/-2,k/-2),this.buffer=Le.makeBufferFromCanvasImageData(h),this}invert(){return new ie(this)}}Le.DEGREE_TO_RADIANS=Math.PI/180;class Q{constructor(o,h,m){this.deviceId=o,this.label=h,this.kind="videoinput",this.groupId=m||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var B=(globalThis||vo||self||window||void 0)&&(globalThis||vo||self||window||void 0).__awaiter||function(re,o,h,m){function b(y){return y instanceof h?y:new h(function(k){k(y)})}return new(h||(h=Promise))(function(y,k){function A(K){try{F(m.next(K))}catch(ne){k(ne)}}function O(K){try{F(m.throw(K))}catch(ne){k(ne)}}function F(K){K.done?y(K.value):b(K.value).then(A,O)}F((m=m.apply(re,o||[])).next())})};class te{constructor(o,h=500,m){this.reader=o,this.timeBetweenScansMillis=h,this._hints=m,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return B(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),h=[];for(const m of o){const b=m.kind==="video"?"videoinput":m.kind;if(b!=="videoinput")continue;const y=m.deviceId||m.id,k=m.label||`Video device ${h.length+1}`,A=m.groupId,O={deviceId:y,label:k,kind:b,groupId:A};h.push(O)}return h})}getVideoInputDevices(){return B(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(h=>new Q(h.deviceId,h.label))})}findDeviceById(o){return B(this,void 0,void 0,function*(){const h=yield this.listVideoInputDevices();return h?h.find(m=>m.deviceId===o):null})}decodeFromInputVideoDevice(o,h){return B(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,h)})}decodeOnceFromVideoDevice(o,h){return B(this,void 0,void 0,function*(){this.reset();let m;o?m={deviceId:{exact:o}}:m={facingMode:"environment"};const b={video:m};return yield this.decodeOnceFromConstraints(b,h)})}decodeOnceFromConstraints(o,h){return B(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(m,h)})}decodeOnceFromStream(o,h){return B(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(o,h);return yield this.decodeOnce(m)})}decodeFromInputVideoDeviceContinuously(o,h,m){return B(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,h,m)})}decodeFromVideoDevice(o,h,m){return B(this,void 0,void 0,function*(){let b;o?b={deviceId:{exact:o}}:b={facingMode:"environment"};const y={video:b};return yield this.decodeFromConstraints(y,h,m)})}decodeFromConstraints(o,h,m){return B(this,void 0,void 0,function*(){const b=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(b,h,m)})}decodeFromStream(o,h,m){return B(this,void 0,void 0,function*(){this.reset();const b=yield this.attachStreamToVideo(o,h);return yield this.decodeContinuously(b,m)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,h){return B(this,void 0,void 0,function*(){const m=this.prepareVideoElement(h);return this.addVideoSource(m,o),this.videoElement=m,this.stream=o,yield this.playVideoOnLoadAsync(m),m})}playVideoOnLoadAsync(o){return new Promise((h,m)=>this.playVideoOnLoad(o,()=>h()))}playVideoOnLoad(o,h){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",h),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return B(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,h){const m=document.getElementById(o);if(!m)throw new g(`element with id '${o}' not found`);if(m.nodeName.toLowerCase()!==h.toLowerCase())throw new g(`element with id '${o}' must be an ${h} element`);return m}decodeFromImage(o,h){if(!o&&!h)throw new g("either imageElement with a src set or an url must be provided");return h&&!o?this.decodeFromImageUrl(h):this.decodeFromImageElement(o)}decodeFromVideo(o,h){if(!o&&!h)throw new g("Either an element with a src set or an URL must be provided");return h&&!o?this.decodeFromVideoUrl(h):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,h,m){if(o===void 0&&h===void 0)throw new g("Either an element with a src set or an URL must be provided");return h&&!o?this.decodeFromVideoUrlContinuously(h,m):this.decodeFromVideoElementContinuously(o,m)}decodeFromImageElement(o){if(!o)throw new g("An image element must be provided.");this.reset();const h=this.prepareImageElement(o);this.imageElement=h;let m;return this.isImageLoaded(h)?m=this.decodeOnce(h,!1,!0):m=this._decodeOnLoadImage(h),m}decodeFromVideoElement(o){const h=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(h)}decodeFromVideoElementContinuously(o,h){const m=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(m,h)}_decodeFromVideoElementSetup(o){if(!o)throw new g("A video element must be provided.");this.reset();const h=this.prepareVideoElement(o);return this.videoElement=h,h}decodeFromImageUrl(o){if(!o)throw new g("An URL must be provided.");this.reset();const h=this.prepareImageElement();this.imageElement=h;const m=this._decodeOnLoadImage(h);return h.src=o,m}decodeFromVideoUrl(o){if(!o)throw new g("An URL must be provided.");this.reset();const h=this.prepareVideoElement(),m=this.decodeFromVideoElement(h);return h.src=o,m}decodeFromVideoUrlContinuously(o,h){if(!o)throw new g("An URL must be provided.");this.reset();const m=this.prepareVideoElement(),b=this.decodeFromVideoElementContinuously(m,h);return m.src=o,b}_decodeOnLoadImage(o){return new Promise((h,m)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(h,m),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return B(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,h){return B(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,h)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let h;return typeof o>"u"&&(h=document.createElement("img"),h.width=200,h.height=200),typeof o=="string"&&(h=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(h=o),h}prepareVideoElement(o){let h;return!o&&typeof document<"u"&&(h=document.createElement("video"),h.width=200,h.height=200),typeof o=="string"&&(h=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(h=o),h.setAttribute("autoplay","true"),h.setAttribute("muted","true"),h.setAttribute("playsinline","true"),h}decodeOnce(o,h=!0,m=!0){this._stopAsyncDecode=!1;const b=(y,k)=>{if(this._stopAsyncDecode){k(new se("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const A=this.decode(o);y(A)}catch(A){const O=h&&A instanceof se,K=(A instanceof E||A instanceof M)&&m;if(O||K)return setTimeout(b,this._timeBetweenDecodingAttempts,y,k);k(A)}};return new Promise((y,k)=>b(y,k))}decodeContinuously(o,h){this._stopContinuousDecode=!1;const m=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const b=this.decode(o);h(b,null),setTimeout(m,this.timeBetweenScansMillis)}catch(b){h(null,b);const y=b instanceof E||b instanceof M,k=b instanceof se;(y||k)&&setTimeout(m,this._timeBetweenDecodingAttempts)}};m()}decode(o){const h=this.createBinaryBitmap(o);return this.decodeBitmap(h)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,h,m){h||(h={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),m||(m=this.captureCanvasContext),m.drawImage(o,h.sx,h.sy,h.sWidth,h.sHeight,h.dx,h.dy,h.dWidth,h.dHeight)}drawImageOnCanvas(o,h,m=this.captureCanvasContext){h||(h={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),m||(m=this.captureCanvasContext),m.drawImage(o,h.sx,h.sy,h.sWidth,h.sHeight,h.dx,h.dy,h.dWidth,h.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const h=this.getCaptureCanvas(o),m=new Le(h),b=new le(m);return new w(b)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const m=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=m}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const h=this.createCaptureCanvas(o);this.captureCanvas=h}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const h=document.createElement("canvas");let m,b;return typeof o<"u"&&(o instanceof HTMLVideoElement?(m=o.videoWidth,b=o.videoHeight):o instanceof HTMLImageElement&&(m=o.naturalWidth||o.width,b=o.naturalHeight||o.height)),h.style.width=m+"px",h.style.height=b+"px",h.width=m,h.height=b,h}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,h){try{o.srcObject=h}catch{o.src=URL.createObjectURL(h)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class U{constructor(o,h,m=h==null?0:8*h.length,b,y,k=S.currentTimeMillis()){this.text=o,this.rawBytes=h,this.numBits=m,this.resultPoints=b,this.format=y,this.timestamp=k,this.text=o,this.rawBytes=h,m==null?this.numBits=h==null?0:8*h.length:this.numBits=m,this.resultPoints=b,this.format=y,this.resultMetadata=null,k==null?this.timestamp=S.currentTimeMillis():this.timestamp=k}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,h){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,h)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const h=this.resultPoints;if(h===null)this.resultPoints=o;else if(o!==null&&o.length>0){const m=new Array(h.length+o.length);S.arraycopy(h,0,m,0,h.length),S.arraycopy(o,0,m,h.length,o.length),this.resultPoints=m}}getTimestamp(){return this.timestamp}toString(){return this.text}}var P;(function(re){re[re.AZTEC=0]="AZTEC",re[re.CODABAR=1]="CODABAR",re[re.CODE_39=2]="CODE_39",re[re.CODE_93=3]="CODE_93",re[re.CODE_128=4]="CODE_128",re[re.DATA_MATRIX=5]="DATA_MATRIX",re[re.EAN_8=6]="EAN_8",re[re.EAN_13=7]="EAN_13",re[re.ITF=8]="ITF",re[re.MAXICODE=9]="MAXICODE",re[re.PDF_417=10]="PDF_417",re[re.QR_CODE=11]="QR_CODE",re[re.RSS_14=12]="RSS_14",re[re.RSS_EXPANDED=13]="RSS_EXPANDED",re[re.UPC_A=14]="UPC_A",re[re.UPC_E=15]="UPC_E",re[re.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(P||(P={}));var ue=P,Re;(function(re){re[re.OTHER=0]="OTHER",re[re.ORIENTATION=1]="ORIENTATION",re[re.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",re[re.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",re[re.ISSUE_NUMBER=4]="ISSUE_NUMBER",re[re.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",re[re.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",re[re.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",re[re.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",re[re.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",re[re.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Re||(Re={}));var De=Re;class Ne{constructor(o,h,m,b,y=-1,k=-1){this.rawBytes=o,this.text=h,this.byteSegments=m,this.ecLevel=b,this.structuredAppendSequenceNumber=y,this.structuredAppendParity=k,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ke{exp(o){return this.expTable[o]}log(o){if(o===0)throw new v;return this.logTable[o]}static addOrSubtract(o,h){return o^h}}class ye{constructor(o,h){if(h.length===0)throw new v;this.field=o;const m=h.length;if(m>1&&h[0]===0){let b=1;for(;b<m&&h[b]===0;)b++;b===m?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(m-b),S.arraycopy(h,b,this.coefficients,0,this.coefficients.length))}else this.coefficients=h}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const h=this.coefficients;let m;if(o===1){m=0;for(let k=0,A=h.length;k!==A;k++){const O=h[k];m=Ke.addOrSubtract(m,O)}return m}m=h[0];const b=h.length,y=this.field;for(let k=1;k<b;k++)m=Ke.addOrSubtract(y.multiply(o,m),h[k]);return m}addOrSubtract(o){if(!this.field.equals(o.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let h=this.coefficients,m=o.coefficients;if(h.length>m.length){const k=h;h=m,m=k}let b=new Int32Array(m.length);const y=m.length-h.length;S.arraycopy(m,0,b,0,y);for(let k=y;k<m.length;k++)b[k]=Ke.addOrSubtract(h[k-y],m[k]);return new ye(this.field,b)}multiply(o){if(!this.field.equals(o.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const h=this.coefficients,m=h.length,b=o.coefficients,y=b.length,k=new Int32Array(m+y-1),A=this.field;for(let O=0;O<m;O++){const F=h[O];for(let K=0;K<y;K++)k[O+K]=Ke.addOrSubtract(k[O+K],A.multiply(F,b[K]))}return new ye(A,k)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const h=this.coefficients.length,m=this.field,b=new Int32Array(h),y=this.coefficients;for(let k=0;k<h;k++)b[k]=m.multiply(y[k],o);return new ye(m,b)}multiplyByMonomial(o,h){if(o<0)throw new v;if(h===0)return this.field.getZero();const m=this.coefficients,b=m.length,y=new Int32Array(b+o),k=this.field;for(let A=0;A<b;A++)y[A]=k.multiply(m[A],h);return new ye(k,y)}divide(o){if(!this.field.equals(o.field))throw new v("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new v("Divide by 0");const h=this.field;let m=h.getZero(),b=this;const y=o.getCoefficient(o.getDegree()),k=h.inverse(y);for(;b.getDegree()>=o.getDegree()&&!b.isZero();){const A=b.getDegree()-o.getDegree(),O=h.multiply(b.getCoefficient(b.getDegree()),k),F=o.multiplyByMonomial(A,O),K=h.buildMonomial(A,O);m=m.addOrSubtract(K),b=b.addOrSubtract(F)}return[m,b]}toString(){let o="";for(let h=this.getDegree();h>=0;h--){let m=this.getCoefficient(h);if(m!==0){if(m<0?(o+=" - ",m=-m):o.length>0&&(o+=" + "),h===0||m!==1){const b=this.field.log(m);b===0?o+="1":b===1?o+="a":(o+="a^",o+=b)}h!==0&&(h===1?o+="x":(o+="x^",o+=h))}}return o}}class me extends f{}me.kind="ArithmeticException";class Ce extends Ke{constructor(o,h,m){super(),this.primitive=o,this.size=h,this.generatorBase=m;const b=new Int32Array(h);let y=1;for(let A=0;A<h;A++)b[A]=y,y*=2,y>=h&&(y^=o,y&=h-1);this.expTable=b;const k=new Int32Array(h);for(let A=0;A<h-1;A++)k[b[A]]=A;this.logTable=k,this.zero=new ye(this,Int32Array.from([0])),this.one=new ye(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,h){if(o<0)throw new v;if(h===0)return this.zero;const m=new Int32Array(o+1);return m[0]=h,new ye(this,m)}inverse(o){if(o===0)throw new me;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,h){return o===0||h===0?0:this.expTable[(this.logTable[o]+this.logTable[h])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+I.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}Ce.AZTEC_DATA_12=new Ce(4201,4096,1),Ce.AZTEC_DATA_10=new Ce(1033,1024,1),Ce.AZTEC_DATA_6=new Ce(67,64,1),Ce.AZTEC_PARAM=new Ce(19,16,1),Ce.QR_CODE_FIELD_256=new Ce(285,256,0),Ce.DATA_MATRIX_FIELD_256=new Ce(301,256,1),Ce.AZTEC_DATA_8=Ce.DATA_MATRIX_FIELD_256,Ce.MAXICODE_FIELD_64=Ce.AZTEC_DATA_6;class G extends f{}G.kind="ReedSolomonException";class Me extends f{}Me.kind="IllegalStateException";class Ae{constructor(o){this.field=o}decode(o,h){const m=this.field,b=new ye(m,o),y=new Int32Array(h);let k=!0;for(let ke=0;ke<h;ke++){const je=b.evaluateAt(m.exp(ke+m.getGeneratorBase()));y[y.length-1-ke]=je,je!==0&&(k=!1)}if(k)return;const A=new ye(m,y),O=this.runEuclideanAlgorithm(m.buildMonomial(h,1),A,h),F=O[0],K=O[1],ne=this.findErrorLocations(F),ce=this.findErrorMagnitudes(K,ne);for(let ke=0;ke<ne.length;ke++){const je=o.length-1-m.log(ne[ke]);if(je<0)throw new G("Bad error location");o[je]=Ce.addOrSubtract(o[je],ce[ke])}}runEuclideanAlgorithm(o,h,m){if(o.getDegree()<h.getDegree()){const ke=o;o=h,h=ke}const b=this.field;let y=o,k=h,A=b.getZero(),O=b.getOne();for(;k.getDegree()>=(m/2|0);){let ke=y,je=A;if(y=k,A=O,y.isZero())throw new G("r_{i-1} was zero");k=ke;let Fe=b.getZero();const qe=y.getCoefficient(y.getDegree()),nt=b.inverse(qe);for(;k.getDegree()>=y.getDegree()&&!k.isZero();){const At=k.getDegree()-y.getDegree(),St=b.multiply(k.getCoefficient(k.getDegree()),nt);Fe=Fe.addOrSubtract(b.buildMonomial(At,St)),k=k.addOrSubtract(y.multiplyByMonomial(At,St))}if(O=Fe.multiply(A).addOrSubtract(je),k.getDegree()>=y.getDegree())throw new Me("Division algorithm failed to reduce polynomial?")}const F=O.getCoefficient(0);if(F===0)throw new G("sigmaTilde(0) was zero");const K=b.inverse(F),ne=O.multiplyScalar(K),ce=k.multiplyScalar(K);return[ne,ce]}findErrorLocations(o){const h=o.getDegree();if(h===1)return Int32Array.from([o.getCoefficient(1)]);const m=new Int32Array(h);let b=0;const y=this.field;for(let k=1;k<y.getSize()&&b<h;k++)o.evaluateAt(k)===0&&(m[b]=y.inverse(k),b++);if(b!==h)throw new G("Error locator degree does not match number of roots");return m}findErrorMagnitudes(o,h){const m=h.length,b=new Int32Array(m),y=this.field;for(let k=0;k<m;k++){const A=y.inverse(h[k]);let O=1;for(let F=0;F<m;F++)if(k!==F){const K=y.multiply(h[F],A),ne=(K&1)===0?K|1:K&-2;O=y.multiply(O,ne)}b[k]=y.multiply(o.evaluateAt(A),y.inverse(O)),y.getGeneratorBase()!==0&&(b[k]=y.multiply(b[k],A))}return b}}var oe;(function(re){re[re.UPPER=0]="UPPER",re[re.LOWER=1]="LOWER",re[re.MIXED=2]="MIXED",re[re.DIGIT=3]="DIGIT",re[re.PUNCT=4]="PUNCT",re[re.BINARY=5]="BINARY"})(oe||(oe={}));class de{decode(o){this.ddata=o;let h=o.getBits(),m=this.extractBits(h),b=this.correctBits(m),y=de.convertBoolArrayToByteArray(b),k=de.getEncodedData(b),A=new Ne(y,k,null,null);return A.setNumBits(b.length),A}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let h=o.length,m=oe.UPPER,b=oe.UPPER,y="",k=0;for(;k<h;)if(b===oe.BINARY){if(h-k<5)break;let A=de.readCode(o,k,5);if(k+=5,A===0){if(h-k<11)break;A=de.readCode(o,k,11)+31,k+=11}for(let O=0;O<A;O++){if(h-k<8){k=h;break}const F=de.readCode(o,k,8);y+=H.castAsNonUtf8Char(F),k+=8}b=m}else{let A=b===oe.DIGIT?4:5;if(h-k<A)break;let O=de.readCode(o,k,A);k+=A;let F=de.getCharacter(b,O);F.startsWith("CTRL_")?(m=b,b=de.getTable(F.charAt(5)),F.charAt(6)==="L"&&(m=b)):(y+=F,b=m)}return y}static getTable(o){switch(o){case"L":return oe.LOWER;case"P":return oe.PUNCT;case"M":return oe.MIXED;case"D":return oe.DIGIT;case"B":return oe.BINARY;default:return oe.UPPER}}static getCharacter(o,h){switch(o){case oe.UPPER:return de.UPPER_TABLE[h];case oe.LOWER:return de.LOWER_TABLE[h];case oe.MIXED:return de.MIXED_TABLE[h];case oe.PUNCT:return de.PUNCT_TABLE[h];case oe.DIGIT:return de.DIGIT_TABLE[h];default:throw new Me("Bad table")}}correctBits(o){let h,m;this.ddata.getNbLayers()<=2?(m=6,h=Ce.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(m=8,h=Ce.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(m=10,h=Ce.AZTEC_DATA_10):(m=12,h=Ce.AZTEC_DATA_12);let b=this.ddata.getNbDatablocks(),y=o.length/m;if(y<b)throw new M;let k=o.length%m,A=new Int32Array(y);for(let ce=0;ce<y;ce++,k+=m)A[ce]=de.readCode(o,k,m);try{new Ae(h).decode(A,y-b)}catch(ce){throw new M(ce)}let O=(1<<m)-1,F=0;for(let ce=0;ce<b;ce++){let ke=A[ce];if(ke===0||ke===O)throw new M;(ke===1||ke===O-1)&&F++}let K=new Array(b*m-F),ne=0;for(let ce=0;ce<b;ce++){let ke=A[ce];if(ke===1||ke===O-1)K.fill(ke>1,ne,ne+m-1),ne+=m-1;else for(let je=m-1;je>=0;--je)K[ne++]=(ke&1<<je)!==0}return K}extractBits(o){let h=this.ddata.isCompact(),m=this.ddata.getNbLayers(),b=(h?11:14)+m*4,y=new Int32Array(b),k=new Array(this.totalBitsInLayer(m,h));if(h)for(let A=0;A<y.length;A++)y[A]=A;else{let A=b+1+2*I.truncDivision(I.truncDivision(b,2)-1,15),O=b/2,F=I.truncDivision(A,2);for(let K=0;K<O;K++){let ne=K+I.truncDivision(K,15);y[O-K-1]=F-ne-1,y[O+K]=F+ne+1}}for(let A=0,O=0;A<m;A++){let F=(m-A)*4+(h?9:12),K=A*2,ne=b-1-K;for(let ce=0;ce<F;ce++){let ke=ce*2;for(let je=0;je<2;je++)k[O+ke+je]=o.get(y[K+je],y[K+ce]),k[O+2*F+ke+je]=o.get(y[K+ce],y[ne-je]),k[O+4*F+ke+je]=o.get(y[ne-je],y[ne-ce]),k[O+6*F+ke+je]=o.get(y[ne-ce],y[K+je])}O+=F*8}return k}static readCode(o,h,m){let b=0;for(let y=h;y<h+m;y++)b<<=1,o[y]&&(b|=1);return b}static readByte(o,h){let m=o.length-h;return m>=8?de.readCode(o,h,8):de.readCode(o,h,m)<<8-m}static convertBoolArrayToByteArray(o){let h=new Uint8Array((o.length+7)/8);for(let m=0;m<h.length;m++)h[m]=de.readByte(o,8*m);return h}totalBitsInLayer(o,h){return((h?88:112)+16*o)*o}}de.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],de.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],de.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],de.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],de.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Se{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,h,m,b){const y=o-m,k=h-b;return Math.sqrt(y*y+k*k)}static sum(o){let h=0;for(let m=0,b=o.length;m!==b;m++){const y=o[m];h+=y}return h}}class lt{static floatToIntBits(o){return o}}lt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ue{constructor(o,h){this.x=o,this.y=h}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof Ue){const h=o;return this.x===h.x&&this.y===h.y}return!1}hashCode(){return 31*lt.floatToIntBits(this.x)+lt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const h=this.distance(o[0],o[1]),m=this.distance(o[1],o[2]),b=this.distance(o[0],o[2]);let y,k,A;if(m>=h&&m>=b?(k=o[0],y=o[1],A=o[2]):b>=m&&b>=h?(k=o[1],y=o[0],A=o[2]):(k=o[2],y=o[0],A=o[1]),this.crossProductZ(y,k,A)<0){const O=y;y=A,A=O}o[0]=y,o[1]=k,o[2]=A}static distance(o,h){return Se.distance(o.x,o.y,h.x,h.y)}static crossProductZ(o,h,m){const b=h.x,y=h.y;return(m.x-b)*(o.y-y)-(m.y-y)*(o.x-b)}}class He{constructor(o,h){this.bits=o,this.points=h}getBits(){return this.bits}getPoints(){return this.points}}class Oe extends He{constructor(o,h,m,b,y){super(o,h),this.compact=m,this.nbDatablocks=b,this.nbLayers=y}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class We{constructor(o,h,m,b){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),h==null&&(h=We.INIT_SIZE),m==null&&(m=o.getWidth()/2|0),b==null&&(b=o.getHeight()/2|0);const y=h/2|0;if(this.leftInit=m-y,this.rightInit=m+y,this.upInit=b-y,this.downInit=b+y,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}detect(){let o=this.leftInit,h=this.rightInit,m=this.upInit,b=this.downInit,y=!1,k=!0,A=!1,O=!1,F=!1,K=!1,ne=!1;const ce=this.width,ke=this.height;for(;k;){k=!1;let je=!0;for(;(je||!O)&&h<ce;)je=this.containsBlackPoint(m,b,h,!1),je?(h++,k=!0,O=!0):O||h++;if(h>=ce){y=!0;break}let Fe=!0;for(;(Fe||!F)&&b<ke;)Fe=this.containsBlackPoint(o,h,b,!0),Fe?(b++,k=!0,F=!0):F||b++;if(b>=ke){y=!0;break}let qe=!0;for(;(qe||!K)&&o>=0;)qe=this.containsBlackPoint(m,b,o,!1),qe?(o--,k=!0,K=!0):K||o--;if(o<0){y=!0;break}let nt=!0;for(;(nt||!ne)&&m>=0;)nt=this.containsBlackPoint(o,h,m,!0),nt?(m--,k=!0,ne=!0):ne||m--;if(m<0){y=!0;break}k&&(A=!0)}if(!y&&A){const je=h-o;let Fe=null;for(let St=1;Fe===null&&St<je;St++)Fe=this.getBlackPointOnSegment(o,b-St,o+St,b);if(Fe==null)throw new se;let qe=null;for(let St=1;qe===null&&St<je;St++)qe=this.getBlackPointOnSegment(o,m+St,o+St,m);if(qe==null)throw new se;let nt=null;for(let St=1;nt===null&&St<je;St++)nt=this.getBlackPointOnSegment(h,m+St,h-St,m);if(nt==null)throw new se;let At=null;for(let St=1;At===null&&St<je;St++)At=this.getBlackPointOnSegment(h,b-St,h-St,b);if(At==null)throw new se;return this.centerEdges(At,Fe,nt,qe)}else throw new se}getBlackPointOnSegment(o,h,m,b){const y=Se.round(Se.distance(o,h,m,b)),k=(m-o)/y,A=(b-h)/y,O=this.image;for(let F=0;F<y;F++){const K=Se.round(o+F*k),ne=Se.round(h+F*A);if(O.get(K,ne))return new Ue(K,ne)}return null}centerEdges(o,h,m,b){const y=o.getX(),k=o.getY(),A=h.getX(),O=h.getY(),F=m.getX(),K=m.getY(),ne=b.getX(),ce=b.getY(),ke=We.CORR;return y<this.width/2?[new Ue(ne-ke,ce+ke),new Ue(A+ke,O+ke),new Ue(F-ke,K-ke),new Ue(y+ke,k-ke)]:[new Ue(ne+ke,ce+ke),new Ue(A+ke,O-ke),new Ue(F-ke,K+ke),new Ue(y-ke,k-ke)]}containsBlackPoint(o,h,m,b){const y=this.image;if(b){for(let k=o;k<=h;k++)if(y.get(k,m))return!0}else for(let k=o;k<=h;k++)if(y.get(m,k))return!0;return!1}}We.INIT_SIZE=10,We.CORR=1;class rt{static checkAndNudgePoints(o,h){const m=o.getWidth(),b=o.getHeight();let y=!0;for(let k=0;k<h.length&&y;k+=2){const A=Math.floor(h[k]),O=Math.floor(h[k+1]);if(A<-1||A>m||O<-1||O>b)throw new se;y=!1,A===-1?(h[k]=0,y=!0):A===m&&(h[k]=m-1,y=!0),O===-1?(h[k+1]=0,y=!0):O===b&&(h[k+1]=b-1,y=!0)}y=!0;for(let k=h.length-2;k>=0&&y;k-=2){const A=Math.floor(h[k]),O=Math.floor(h[k+1]);if(A<-1||A>m||O<-1||O>b)throw new se;y=!1,A===-1?(h[k]=0,y=!0):A===m&&(h[k]=m-1,y=!0),O===-1?(h[k+1]=0,y=!0):O===b&&(h[k+1]=b-1,y=!0)}}}class ht{constructor(o,h,m,b,y,k,A,O,F){this.a11=o,this.a21=h,this.a31=m,this.a12=b,this.a22=y,this.a32=k,this.a13=A,this.a23=O,this.a33=F}static quadrilateralToQuadrilateral(o,h,m,b,y,k,A,O,F,K,ne,ce,ke,je,Fe,qe){const nt=ht.quadrilateralToSquare(o,h,m,b,y,k,A,O);return ht.squareToQuadrilateral(F,K,ne,ce,ke,je,Fe,qe).times(nt)}transformPoints(o){const h=o.length,m=this.a11,b=this.a12,y=this.a13,k=this.a21,A=this.a22,O=this.a23,F=this.a31,K=this.a32,ne=this.a33;for(let ce=0;ce<h;ce+=2){const ke=o[ce],je=o[ce+1],Fe=y*ke+O*je+ne;o[ce]=(m*ke+k*je+F)/Fe,o[ce+1]=(b*ke+A*je+K)/Fe}}transformPointsWithValues(o,h){const m=this.a11,b=this.a12,y=this.a13,k=this.a21,A=this.a22,O=this.a23,F=this.a31,K=this.a32,ne=this.a33,ce=o.length;for(let ke=0;ke<ce;ke++){const je=o[ke],Fe=h[ke],qe=y*je+O*Fe+ne;o[ke]=(m*je+k*Fe+F)/qe,h[ke]=(b*je+A*Fe+K)/qe}}static squareToQuadrilateral(o,h,m,b,y,k,A,O){const F=o-m+y-A,K=h-b+k-O;if(F===0&&K===0)return new ht(m-o,y-m,o,b-h,k-b,h,0,0,1);{const ne=m-y,ce=A-y,ke=b-k,je=O-k,Fe=ne*je-ce*ke,qe=(F*je-ce*K)/Fe,nt=(ne*K-F*ke)/Fe;return new ht(m-o+qe*m,A-o+nt*A,o,b-h+qe*b,O-h+nt*O,h,qe,nt,1)}}static quadrilateralToSquare(o,h,m,b,y,k,A,O){return ht.squareToQuadrilateral(o,h,m,b,y,k,A,O).buildAdjoint()}buildAdjoint(){return new ht(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new ht(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class Pe extends rt{sampleGrid(o,h,m,b,y,k,A,O,F,K,ne,ce,ke,je,Fe,qe,nt,At,St){const vt=ht.quadrilateralToQuadrilateral(b,y,k,A,O,F,K,ne,ce,ke,je,Fe,qe,nt,At,St);return this.sampleGridWithTransform(o,h,m,vt)}sampleGridWithTransform(o,h,m,b){if(h<=0||m<=0)throw new se;const y=new q(h,m),k=new Float32Array(2*h);for(let A=0;A<m;A++){const O=k.length,F=A+.5;for(let K=0;K<O;K+=2)k[K]=K/2+.5,k[K+1]=F;b.transformPoints(k),rt.checkAndNudgePoints(o,k);try{for(let K=0;K<O;K+=2)o.get(Math.floor(k[K]),Math.floor(k[K+1]))&&y.set(K/2,A)}catch{throw new se}}return y}}class Ye{static setGridSampler(o){Ye.gridSampler=o}static getInstance(){return Ye.gridSampler}}Ye.gridSampler=new Pe;class Tt{constructor(o,h){this.x=o,this.y=h}toResultPoint(){return new Ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ct{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let h=this.getMatrixCenter(),m=this.getBullsEyeCorners(h);if(o){let k=m[0];m[0]=m[2],m[2]=k}this.extractParameters(m);let b=this.sampleGrid(this.image,m[this.shift%4],m[(this.shift+1)%4],m[(this.shift+2)%4],m[(this.shift+3)%4]),y=this.getMatrixCornerPoints(m);return new Oe(b,y,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new se;let h=2*this.nbCenterLayers,m=new Int32Array([this.sampleLine(o[0],o[1],h),this.sampleLine(o[1],o[2],h),this.sampleLine(o[2],o[3],h),this.sampleLine(o[3],o[0],h)]);this.shift=this.getRotation(m,h);let b=0;for(let k=0;k<4;k++){let A=m[(this.shift+k)%4];this.compact?(b<<=7,b+=A>>1&127):(b<<=10,b+=(A>>2&992)+(A>>1&31))}let y=this.getCorrectedParameterData(b,this.compact);this.compact?(this.nbLayers=(y>>6)+1,this.nbDataBlocks=(y&63)+1):(this.nbLayers=(y>>11)+1,this.nbDataBlocks=(y&2047)+1)}getRotation(o,h){let m=0;o.forEach((b,y,k)=>{let A=(b>>h-2<<1)+(b&1);m=(m<<3)+A}),m=((m&1)<<11)+(m>>1);for(let b=0;b<4;b++)if(I.bitCount(m^this.EXPECTED_CORNER_BITS[b])<=2)return b;throw new se}getCorrectedParameterData(o,h){let m,b;h?(m=7,b=2):(m=10,b=4);let y=m-b,k=new Int32Array(m);for(let O=m-1;O>=0;--O)k[O]=o&15,o>>=4;try{new Ae(Ce.AZTEC_PARAM).decode(k,y)}catch{throw new se}let A=0;for(let O=0;O<b;O++)A=(A<<4)+k[O];return A}getBullsEyeCorners(o){let h=o,m=o,b=o,y=o,k=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let ne=this.getFirstDifferent(h,k,1,-1),ce=this.getFirstDifferent(m,k,1,1),ke=this.getFirstDifferent(b,k,-1,1),je=this.getFirstDifferent(y,k,-1,-1);if(this.nbCenterLayers>2){let Fe=this.distancePoint(je,ne)*this.nbCenterLayers/(this.distancePoint(y,h)*(this.nbCenterLayers+2));if(Fe<.75||Fe>1.25||!this.isWhiteOrBlackRectangle(ne,ce,ke,je))break}h=ne,m=ce,b=ke,y=je,k=!k}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;let A=new Ue(h.getX()+.5,h.getY()-.5),O=new Ue(m.getX()+.5,m.getY()+.5),F=new Ue(b.getX()-.5,b.getY()+.5),K=new Ue(y.getX()-.5,y.getY()-.5);return this.expandSquare([A,O,F,K],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,h,m,b;try{let A=new We(this.image).detect();o=A[0],h=A[1],m=A[2],b=A[3]}catch{let O=this.image.getWidth()/2,F=this.image.getHeight()/2;o=this.getFirstDifferent(new Tt(O+7,F-7),!1,1,-1).toResultPoint(),h=this.getFirstDifferent(new Tt(O+7,F+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new Tt(O-7,F+7),!1,-1,1).toResultPoint(),b=this.getFirstDifferent(new Tt(O-7,F-7),!1,-1,-1).toResultPoint()}let y=Se.round((o.getX()+b.getX()+h.getX()+m.getX())/4),k=Se.round((o.getY()+b.getY()+h.getY()+m.getY())/4);try{let A=new We(this.image,15,y,k).detect();o=A[0],h=A[1],m=A[2],b=A[3]}catch{o=this.getFirstDifferent(new Tt(y+7,k-7),!1,1,-1).toResultPoint(),h=this.getFirstDifferent(new Tt(y+7,k+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new Tt(y-7,k+7),!1,-1,1).toResultPoint(),b=this.getFirstDifferent(new Tt(y-7,k-7),!1,-1,-1).toResultPoint()}return y=Se.round((o.getX()+b.getX()+h.getX()+m.getX())/4),k=Se.round((o.getY()+b.getY()+h.getY()+m.getY())/4),new Tt(y,k)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,h,m,b,y){let k=Ye.getInstance(),A=this.getDimension(),O=A/2-this.nbCenterLayers,F=A/2+this.nbCenterLayers;return k.sampleGrid(o,A,A,O,O,F,O,F,F,O,F,h.getX(),h.getY(),m.getX(),m.getY(),b.getX(),b.getY(),y.getX(),y.getY())}sampleLine(o,h,m){let b=0,y=this.distanceResultPoint(o,h),k=y/m,A=o.getX(),O=o.getY(),F=k*(h.getX()-o.getX())/y,K=k*(h.getY()-o.getY())/y;for(let ne=0;ne<m;ne++)this.image.get(Se.round(A+ne*F),Se.round(O+ne*K))&&(b|=1<<m-ne-1);return b}isWhiteOrBlackRectangle(o,h,m,b){let y=3;o=new Tt(o.getX()-y,o.getY()+y),h=new Tt(h.getX()-y,h.getY()-y),m=new Tt(m.getX()+y,m.getY()-y),b=new Tt(b.getX()+y,b.getY()+y);let k=this.getColor(b,o);if(k===0)return!1;let A=this.getColor(o,h);return A!==k||(A=this.getColor(h,m),A!==k)?!1:(A=this.getColor(m,b),A===k)}getColor(o,h){let m=this.distancePoint(o,h),b=(h.getX()-o.getX())/m,y=(h.getY()-o.getY())/m,k=0,A=o.getX(),O=o.getY(),F=this.image.get(o.getX(),o.getY()),K=Math.ceil(m);for(let ce=0;ce<K;ce++)A+=b,O+=y,this.image.get(Se.round(A),Se.round(O))!==F&&k++;let ne=k/m;return ne>.1&&ne<.9?0:ne<=.1===F?1:-1}getFirstDifferent(o,h,m,b){let y=o.getX()+m,k=o.getY()+b;for(;this.isValid(y,k)&&this.image.get(y,k)===h;)y+=m,k+=b;for(y-=m,k-=b;this.isValid(y,k)&&this.image.get(y,k)===h;)y+=m;for(y-=m;this.isValid(y,k)&&this.image.get(y,k)===h;)k+=b;return k-=b,new Tt(y,k)}expandSquare(o,h,m){let b=m/(2*h),y=o[0].getX()-o[2].getX(),k=o[0].getY()-o[2].getY(),A=(o[0].getX()+o[2].getX())/2,O=(o[0].getY()+o[2].getY())/2,F=new Ue(A+b*y,O+b*k),K=new Ue(A-b*y,O-b*k);y=o[1].getX()-o[3].getX(),k=o[1].getY()-o[3].getY(),A=(o[1].getX()+o[3].getX())/2,O=(o[1].getY()+o[3].getY())/2;let ne=new Ue(A+b*y,O+b*k),ce=new Ue(A-b*y,O-b*k);return[F,ne,K,ce]}isValid(o,h){return o>=0&&o<this.image.getWidth()&&h>0&&h<this.image.getHeight()}isValidPoint(o){let h=Se.round(o.getX()),m=Se.round(o.getY());return this.isValid(h,m)}distancePoint(o,h){return Se.distance(o.getX(),o.getY(),h.getX(),h.getY())}distanceResultPoint(o,h){return Se.distance(o.getX(),o.getY(),h.getX(),h.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(I.truncDivision(this.nbLayers-4,8)+1)+15}}class Mt{decode(o,h=null){let m=null,b=new Ct(o.getBlackMatrix()),y=null,k=null;try{let K=b.detectMirror(!1);y=K.getPoints(),this.reportFoundResultPoints(h,y),k=new de().decode(K)}catch(K){m=K}if(k==null)try{let K=b.detectMirror(!0);y=K.getPoints(),this.reportFoundResultPoints(h,y),k=new de().decode(K)}catch(K){throw m??K}let A=new U(k.getText(),k.getRawBytes(),k.getNumBits(),y,ue.AZTEC,S.currentTimeMillis()),O=k.getByteSegments();O!=null&&A.putMetadata(De.BYTE_SEGMENTS,O);let F=k.getECLevel();return F!=null&&A.putMetadata(De.ERROR_CORRECTION_LEVEL,F),A}reportFoundResultPoints(o,h){if(o!=null){let m=o.get(X.NEED_RESULT_POINT_CALLBACK);m!=null&&h.forEach((b,y,k)=>{m.foundPossibleResultPoint(b)})}}reset(){}}class lr extends te{constructor(o=500){super(new Mt,o)}}class jt{decode(o,h){try{return this.doDecode(o,h)}catch{if(h&&h.get(X.TRY_HARDER)===!0&&o.isRotateSupported()){const y=o.rotateCounterClockwise(),k=this.doDecode(y,h),A=k.getResultMetadata();let O=270;A!==null&&A.get(De.ORIENTATION)===!0&&(O=O+A.get(De.ORIENTATION)%360),k.putMetadata(De.ORIENTATION,O);const F=k.getResultPoints();if(F!==null){const K=y.getHeight();for(let ne=0;ne<F.length;ne++)F[ne]=new Ue(K-F[ne].getY()-1,F[ne].getX())}return k}else throw new se}}reset(){}doDecode(o,h){const m=o.getWidth(),b=o.getHeight();let y=new L(m);const k=h&&h.get(X.TRY_HARDER)===!0,A=Math.max(1,b>>(k?8:5));let O;k?O=b:O=15;const F=Math.trunc(b/2);for(let K=0;K<O;K++){const ne=Math.trunc((K+1)/2),ce=(K&1)===0,ke=F+A*(ce?ne:-ne);if(ke<0||ke>=b)break;try{y=o.getBlackRow(ke,y)}catch{continue}for(let je=0;je<2;je++){if(je===1&&(y.reverse(),h&&h.get(X.NEED_RESULT_POINT_CALLBACK)===!0)){const Fe=new Map;h.forEach((qe,nt)=>Fe.set(nt,qe)),Fe.delete(X.NEED_RESULT_POINT_CALLBACK),h=Fe}try{const Fe=this.decodeRow(ke,y,h);if(je===1){Fe.putMetadata(De.ORIENTATION,180);const qe=Fe.getResultPoints();qe!==null&&(qe[0]=new Ue(m-qe[0].getX()-1,qe[0].getY()),qe[1]=new Ue(m-qe[1].getX()-1,qe[1].getY()))}return Fe}catch{}}}throw new se}static recordPattern(o,h,m){const b=m.length;for(let F=0;F<b;F++)m[F]=0;const y=o.getSize();if(h>=y)throw new se;let k=!o.get(h),A=0,O=h;for(;O<y;){if(o.get(O)!==k)m[A]++;else{if(++A===b)break;m[A]=1,k=!k}O++}if(!(A===b||A===b-1&&O===y))throw new se}static recordPatternInReverse(o,h,m){let b=m.length,y=o.get(h);for(;h>0&&b>=0;)o.get(--h)!==y&&(b--,y=!y);if(b>=0)throw new se;jt.recordPattern(o,h+1,m)}static patternMatchVariance(o,h,m){const b=o.length;let y=0,k=0;for(let F=0;F<b;F++)y+=o[F],k+=h[F];if(y<k)return Number.POSITIVE_INFINITY;const A=y/k;m*=A;let O=0;for(let F=0;F<b;F++){const K=o[F],ne=h[F]*A,ce=K>ne?K-ne:ne-K;if(ce>m)return Number.POSITIVE_INFINITY;O+=ce}return O/y}}class ft extends jt{static findStartPattern(o){const h=o.getSize(),m=o.getNextSet(0);let b=0,y=Int32Array.from([0,0,0,0,0,0]),k=m,A=!1;const O=6;for(let F=m;F<h;F++)if(o.get(F)!==A)y[b]++;else{if(b===O-1){let K=ft.MAX_AVG_VARIANCE,ne=-1;for(let ce=ft.CODE_START_A;ce<=ft.CODE_START_C;ce++){const ke=jt.patternMatchVariance(y,ft.CODE_PATTERNS[ce],ft.MAX_INDIVIDUAL_VARIANCE);ke<K&&(K=ke,ne=ce)}if(ne>=0&&o.isRange(Math.max(0,k-(F-k)/2),k,!1))return Int32Array.from([k,F,ne]);k+=y[0]+y[1],y=y.slice(2,y.length-1),y[b-1]=0,y[b]=0,b--}else b++;y[b]=1,A=!A}throw new se}static decodeCode(o,h,m){jt.recordPattern(o,m,h);let b=ft.MAX_AVG_VARIANCE,y=-1;for(let k=0;k<ft.CODE_PATTERNS.length;k++){const A=ft.CODE_PATTERNS[k],O=this.patternMatchVariance(h,A,ft.MAX_INDIVIDUAL_VARIANCE);O<b&&(b=O,y=k)}if(y>=0)return y;throw new se}decodeRow(o,h,m){const b=m&&m.get(X.ASSUME_GS1)===!0,y=ft.findStartPattern(h),k=y[2];let A=0;const O=new Uint8Array(20);O[A++]=k;let F;switch(k){case ft.CODE_START_A:F=ft.CODE_CODE_A;break;case ft.CODE_START_B:F=ft.CODE_CODE_B;break;case ft.CODE_START_C:F=ft.CODE_CODE_C;break;default:throw new M}let K=!1,ne=!1,ce="",ke=y[0],je=y[1];const Fe=Int32Array.from([0,0,0,0,0,0]);let qe=0,nt=0,At=k,St=0,vt=!0,Er=!1,ur=!1;for(;!K;){const el=ne;switch(ne=!1,qe=nt,nt=ft.decodeCode(h,Fe,je),O[A++]=nt,nt!==ft.CODE_STOP&&(vt=!0),nt!==ft.CODE_STOP&&(St++,At+=St*nt),ke=je,je+=Fe.reduce((Hf,yu)=>Hf+yu,0),nt){case ft.CODE_START_A:case ft.CODE_START_B:case ft.CODE_START_C:throw new M}switch(F){case ft.CODE_CODE_A:if(nt<64)ur===Er?ce+=String.fromCharCode(32+nt):ce+=String.fromCharCode(32+nt+128),ur=!1;else if(nt<96)ur===Er?ce+=String.fromCharCode(nt-64):ce+=String.fromCharCode(nt+64),ur=!1;else switch(nt!==ft.CODE_STOP&&(vt=!1),nt){case ft.CODE_FNC_1:b&&(ce.length===0?ce+="]C1":ce+="");break;case ft.CODE_FNC_2:case ft.CODE_FNC_3:break;case ft.CODE_FNC_4_A:!Er&&ur?(Er=!0,ur=!1):Er&&ur?(Er=!1,ur=!1):ur=!0;break;case ft.CODE_SHIFT:ne=!0,F=ft.CODE_CODE_B;break;case ft.CODE_CODE_B:F=ft.CODE_CODE_B;break;case ft.CODE_CODE_C:F=ft.CODE_CODE_C;break;case ft.CODE_STOP:K=!0;break}break;case ft.CODE_CODE_B:if(nt<96)ur===Er?ce+=String.fromCharCode(32+nt):ce+=String.fromCharCode(32+nt+128),ur=!1;else switch(nt!==ft.CODE_STOP&&(vt=!1),nt){case ft.CODE_FNC_1:b&&(ce.length===0?ce+="]C1":ce+="");break;case ft.CODE_FNC_2:case ft.CODE_FNC_3:break;case ft.CODE_FNC_4_B:!Er&&ur?(Er=!0,ur=!1):Er&&ur?(Er=!1,ur=!1):ur=!0;break;case ft.CODE_SHIFT:ne=!0,F=ft.CODE_CODE_A;break;case ft.CODE_CODE_A:F=ft.CODE_CODE_A;break;case ft.CODE_CODE_C:F=ft.CODE_CODE_C;break;case ft.CODE_STOP:K=!0;break}break;case ft.CODE_CODE_C:if(nt<100)nt<10&&(ce+="0"),ce+=nt;else switch(nt!==ft.CODE_STOP&&(vt=!1),nt){case ft.CODE_FNC_1:b&&(ce.length===0?ce+="]C1":ce+="");break;case ft.CODE_CODE_A:F=ft.CODE_CODE_A;break;case ft.CODE_CODE_B:F=ft.CODE_CODE_B;break;case ft.CODE_STOP:K=!0;break}break}el&&(F=F===ft.CODE_CODE_A?ft.CODE_CODE_B:ft.CODE_CODE_A)}const Fn=je-ke;if(je=h.getNextUnset(je),!h.isRange(je,Math.min(h.getSize(),je+(je-ke)/2),!1))throw new se;if(At-=St*qe,At%103!==qe)throw new E;const es=ce.length;if(es===0)throw new se;es>0&&vt&&(F===ft.CODE_CODE_C?ce=ce.substring(0,es-2):ce=ce.substring(0,es-1));const _a=(y[1]+y[0])/2,Qr=ke+Fn/2,ua=O.length,Wa=new Uint8Array(ua);for(let el=0;el<ua;el++)Wa[el]=O[el];const Vl=[new Ue(_a,o),new Ue(Qr,o)];return new U(ce,Wa,0,Vl,ue.CODE_128,new Date().getTime())}}ft.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ft.MAX_AVG_VARIANCE=.25,ft.MAX_INDIVIDUAL_VARIANCE=.7,ft.CODE_SHIFT=98,ft.CODE_CODE_C=99,ft.CODE_CODE_B=100,ft.CODE_CODE_A=101,ft.CODE_FNC_1=102,ft.CODE_FNC_2=97,ft.CODE_FNC_3=96,ft.CODE_FNC_4_A=101,ft.CODE_FNC_4_B=100,ft.CODE_START_A=103,ft.CODE_START_B=104,ft.CODE_START_C=105,ft.CODE_STOP=106;class qt extends jt{constructor(o=!1,h=!1){super(),this.usingCheckDigit=o,this.extendedMode=h,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,h,m){let b=this.counters;b.fill(0),this.decodeRowResult="";let y=qt.findAsteriskPattern(h,b),k=h.getNextSet(y[1]),A=h.getSize(),O,F;do{qt.recordPattern(h,k,b);let Fe=qt.toNarrowWidePattern(b);if(Fe<0)throw new se;O=qt.patternToChar(Fe),this.decodeRowResult+=O,F=k;for(let qe of b)k+=qe;k=h.getNextSet(k)}while(O!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let K=0;for(let Fe of b)K+=Fe;let ne=k-F-K;if(k!==A&&ne*2<K)throw new se;if(this.usingCheckDigit){let Fe=this.decodeRowResult.length-1,qe=0;for(let nt=0;nt<Fe;nt++)qe+=qt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(nt));if(this.decodeRowResult.charAt(Fe)!==qt.ALPHABET_STRING.charAt(qe%43))throw new E;this.decodeRowResult=this.decodeRowResult.substring(0,Fe)}if(this.decodeRowResult.length===0)throw new se;let ce;this.extendedMode?ce=qt.decodeExtended(this.decodeRowResult):ce=this.decodeRowResult;let ke=(y[1]+y[0])/2,je=F+K/2;return new U(ce,null,0,[new Ue(ke,o),new Ue(je,o)],ue.CODE_39,new Date().getTime())}static findAsteriskPattern(o,h){let m=o.getSize(),b=o.getNextSet(0),y=0,k=b,A=!1,O=h.length;for(let F=b;F<m;F++)if(o.get(F)!==A)h[y]++;else{if(y===O-1){if(this.toNarrowWidePattern(h)===qt.ASTERISK_ENCODING&&o.isRange(Math.max(0,k-Math.floor((F-k)/2)),k,!1))return[k,F];k+=h[0]+h[1],h.copyWithin(0,2,2+y-1),h[y-1]=0,h[y]=0,y--}else y++;h[y]=1,A=!A}throw new se}static toNarrowWidePattern(o){let h=o.length,m=0,b;do{let y=2147483647;for(let O of o)O<y&&O>m&&(y=O);m=y,b=0;let k=0,A=0;for(let O=0;O<h;O++){let F=o[O];F>m&&(A|=1<<h-1-O,b++,k+=F)}if(b===3){for(let O=0;O<h&&b>0;O++){let F=o[O];if(F>m&&(b--,F*2>=k))return-1}return A}}while(b>3);return-1}static patternToChar(o){for(let h=0;h<qt.CHARACTER_ENCODINGS.length;h++)if(qt.CHARACTER_ENCODINGS[h]===o)return qt.ALPHABET_STRING.charAt(h);if(o===qt.ASTERISK_ENCODING)return"*";throw new se}static decodeExtended(o){let h=o.length,m="";for(let b=0;b<h;b++){let y=o.charAt(b);if(y==="+"||y==="$"||y==="%"||y==="/"){let k=o.charAt(b+1),A="\0";switch(y){case"+":if(k>="A"&&k<="Z")A=String.fromCharCode(k.charCodeAt(0)+32);else throw new M;break;case"$":if(k>="A"&&k<="Z")A=String.fromCharCode(k.charCodeAt(0)-64);else throw new M;break;case"%":if(k>="A"&&k<="E")A=String.fromCharCode(k.charCodeAt(0)-38);else if(k>="F"&&k<="J")A=String.fromCharCode(k.charCodeAt(0)-11);else if(k>="K"&&k<="O")A=String.fromCharCode(k.charCodeAt(0)+16);else if(k>="P"&&k<="T")A=String.fromCharCode(k.charCodeAt(0)+43);else if(k==="U")A="\0";else if(k==="V")A="@";else if(k==="W")A="`";else if(k==="X"||k==="Y"||k==="Z")A="";else throw new M;break;case"/":if(k>="A"&&k<="O")A=String.fromCharCode(k.charCodeAt(0)-32);else if(k==="Z")A=":";else throw new M;break}m+=A,b++}else m+=y}return m}}qt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",qt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],qt.ASTERISK_ENCODING=148;class Bt extends jt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,h,m){let b=this.decodeStart(h),y=this.decodeEnd(h),k=new he;Bt.decodeMiddle(h,b[1],y[0],k);let A=k.toString(),O=null;m!=null&&(O=m.get(X.ALLOWED_LENGTHS)),O==null&&(O=Bt.DEFAULT_ALLOWED_LENGTHS);let F=A.length,K=!1,ne=0;for(let je of O){if(F===je){K=!0;break}je>ne&&(ne=je)}if(!K&&F>ne&&(K=!0),!K)throw new M;const ce=[new Ue(b[1],o),new Ue(y[0],o)];return new U(A,null,0,ce,ue.ITF,new Date().getTime())}static decodeMiddle(o,h,m,b){let y=new Int32Array(10),k=new Int32Array(5),A=new Int32Array(5);for(y.fill(0),k.fill(0),A.fill(0);h<m;){jt.recordPattern(o,h,y);for(let F=0;F<5;F++){let K=2*F;k[F]=y[K],A[F]=y[K+1]}let O=Bt.decodeDigit(k);b.append(O.toString()),O=this.decodeDigit(A),b.append(O.toString()),y.forEach(function(F){h+=F})}}decodeStart(o){let h=Bt.skipWhiteSpace(o),m=Bt.findGuardPattern(o,h,Bt.START_PATTERN);return this.narrowLineWidth=(m[1]-m[0])/4,this.validateQuietZone(o,m[0]),m}validateQuietZone(o,h){let m=this.narrowLineWidth*10;m=m<h?m:h;for(let b=h-1;m>0&&b>=0&&!o.get(b);b--)m--;if(m!==0)throw new se}static skipWhiteSpace(o){const h=o.getSize(),m=o.getNextSet(0);if(m===h)throw new se;return m}decodeEnd(o){o.reverse();try{let h=Bt.skipWhiteSpace(o),m;try{m=Bt.findGuardPattern(o,h,Bt.END_PATTERN_REVERSED[0])}catch(y){y instanceof se&&(m=Bt.findGuardPattern(o,h,Bt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,m[0]);let b=m[0];return m[0]=o.getSize()-m[1],m[1]=o.getSize()-b,m}finally{o.reverse()}}static findGuardPattern(o,h,m){let b=m.length,y=new Int32Array(b),k=o.getSize(),A=!1,O=0,F=h;y.fill(0);for(let K=h;K<k;K++)if(o.get(K)!==A)y[O]++;else{if(O===b-1){if(jt.patternMatchVariance(y,m,Bt.MAX_INDIVIDUAL_VARIANCE)<Bt.MAX_AVG_VARIANCE)return[F,K];F+=y[0]+y[1],S.arraycopy(y,2,y,0,O-1),y[O-1]=0,y[O]=0,O--}else O++;y[O]=1,A=!A}throw new se}static decodeDigit(o){let h=Bt.MAX_AVG_VARIANCE,m=-1,b=Bt.PATTERNS.length;for(let y=0;y<b;y++){let k=Bt.PATTERNS[y],A=jt.patternMatchVariance(o,k,Bt.MAX_INDIVIDUAL_VARIANCE);A<h?(h=A,m=y):A===h&&(m=-1)}if(m>=0)return m%10;throw new se}}Bt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Bt.MAX_AVG_VARIANCE=.38,Bt.MAX_INDIVIDUAL_VARIANCE=.5,Bt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Bt.START_PATTERN=Int32Array.from([1,1,1,1]),Bt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Qt extends jt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let h=!1,m,b=0,y=Int32Array.from([0,0,0]);for(;!h;){y=Int32Array.from([0,0,0]),m=Qt.findGuardPattern(o,b,!1,this.START_END_PATTERN,y);let k=m[0];b=m[1];let A=k-(b-k);A>=0&&(h=o.isRange(A,k,!1))}return m}static checkChecksum(o){return Qt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let h=o.length;if(h===0)return!1;let m=parseInt(o.charAt(h-1),10);return Qt.getStandardUPCEANChecksum(o.substring(0,h-1))===m}static getStandardUPCEANChecksum(o){let h=o.length,m=0;for(let b=h-1;b>=0;b-=2){let y=o.charAt(b).charCodeAt(0)-48;if(y<0||y>9)throw new M;m+=y}m*=3;for(let b=h-2;b>=0;b-=2){let y=o.charAt(b).charCodeAt(0)-48;if(y<0||y>9)throw new M;m+=y}return(1e3-m)%10}static decodeEnd(o,h){return Qt.findGuardPattern(o,h,!1,Qt.START_END_PATTERN,new Int32Array(Qt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,h,m,b){return this.findGuardPattern(o,h,m,b,new Int32Array(b.length))}static findGuardPattern(o,h,m,b,y){let k=o.getSize();h=m?o.getNextUnset(h):o.getNextSet(h);let A=0,O=h,F=b.length,K=m;for(let ne=h;ne<k;ne++)if(o.get(ne)!==K)y[A]++;else{if(A===F-1){if(jt.patternMatchVariance(y,b,Qt.MAX_INDIVIDUAL_VARIANCE)<Qt.MAX_AVG_VARIANCE)return Int32Array.from([O,ne]);O+=y[0]+y[1];let ce=y.slice(2,y.length-1);for(let ke=0;ke<A-1;ke++)y[ke]=ce[ke];y[A-1]=0,y[A]=0,A--}else A++;y[A]=1,K=!K}throw new se}static decodeDigit(o,h,m,b){this.recordPattern(o,m,h);let y=this.MAX_AVG_VARIANCE,k=-1,A=b.length;for(let O=0;O<A;O++){let F=b[O],K=jt.patternMatchVariance(h,F,Qt.MAX_INDIVIDUAL_VARIANCE);K<y&&(y=K,k=O)}if(k>=0)return k;throw new se}}Qt.MAX_AVG_VARIANCE=.48,Qt.MAX_INDIVIDUAL_VARIANCE=.7,Qt.START_END_PATTERN=Int32Array.from([1,1,1]),Qt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Qt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class mr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,h,m){let b=this.decodeRowStringBuffer,y=this.decodeMiddle(h,m,b),k=b.toString(),A=mr.parseExtensionString(k),O=[new Ue((m[0]+m[1])/2,o),new Ue(y,o)],F=new U(k,null,0,O,ue.UPC_EAN_EXTENSION,new Date().getTime());return A!=null&&F.putAllMetadata(A),F}decodeMiddle(o,h,m){let b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;let y=o.getSize(),k=h[1],A=0;for(let F=0;F<5&&k<y;F++){let K=Qt.decodeDigit(o,b,k,Qt.L_AND_G_PATTERNS);m+=String.fromCharCode(48+K%10);for(let ne of b)k+=ne;K>=10&&(A|=1<<4-F),F!==4&&(k=o.getNextSet(k),k=o.getNextUnset(k))}if(m.length!==5)throw new se;let O=this.determineCheckDigit(A);if(mr.extensionChecksum(m.toString())!==O)throw new se;return k}static extensionChecksum(o){let h=o.length,m=0;for(let b=h-2;b>=0;b-=2)m+=o.charAt(b).charCodeAt(0)-48;m*=3;for(let b=h-1;b>=0;b-=2)m+=o.charAt(b).charCodeAt(0)-48;return m*=3,m%10}determineCheckDigit(o){for(let h=0;h<10;h++)if(o===this.CHECK_DIGIT_ENCODINGS[h])return h;throw new se}static parseExtensionString(o){if(o.length!==5)return null;let h=mr.parseExtension5String(o);return h==null?null:new Map([[De.SUGGESTED_PRICE,h]])}static parseExtension5String(o){let h;switch(o.charAt(0)){case"0":h="";break;case"5":h="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}h="";break;default:h="";break}let m=parseInt(o.substring(1)),b=(m/100).toString(),y=m%100,k=y<10?"0"+y:y.toString();return h+b+"."+k}}class Pr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,h,m){let b=this.decodeRowStringBuffer,y=this.decodeMiddle(h,m,b),k=b.toString(),A=Pr.parseExtensionString(k),O=[new Ue((m[0]+m[1])/2,o),new Ue(y,o)],F=new U(k,null,0,O,ue.UPC_EAN_EXTENSION,new Date().getTime());return A!=null&&F.putAllMetadata(A),F}decodeMiddle(o,h,m){let b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;let y=o.getSize(),k=h[1],A=0;for(let O=0;O<2&&k<y;O++){let F=Qt.decodeDigit(o,b,k,Qt.L_AND_G_PATTERNS);m+=String.fromCharCode(48+F%10);for(let K of b)k+=K;F>=10&&(A|=1<<1-O),O!==1&&(k=o.getNextSet(k),k=o.getNextUnset(k))}if(m.length!==2)throw new se;if(parseInt(m.toString())%4!==A)throw new se;return k}static parseExtensionString(o){return o.length!==2?null:new Map([[De.ISSUE_NUMBER,parseInt(o)]])}}class Xr{static decodeRow(o,h,m){let b=Qt.findGuardPattern(h,m,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new mr().decodeRow(o,h,b)}catch{return new Pr().decodeRow(o,h,b)}}}Xr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class $t extends Qt{constructor(){super(),this.decodeRowStringBuffer="",$t.L_AND_G_PATTERNS=$t.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let h=$t.L_PATTERNS[o-10],m=new Int32Array(h.length);for(let b=0;b<h.length;b++)m[b]=h[h.length-b-1];$t.L_AND_G_PATTERNS[o]=m}}decodeRow(o,h,m){let b=$t.findStartGuardPattern(h),y=m==null?null:m.get(X.NEED_RESULT_POINT_CALLBACK);if(y!=null){const vt=new Ue((b[0]+b[1])/2,o);y.foundPossibleResultPoint(vt)}let k=this.decodeMiddle(h,b,this.decodeRowStringBuffer),A=k.rowOffset,O=k.resultString;if(y!=null){const vt=new Ue(A,o);y.foundPossibleResultPoint(vt)}let F=this.decodeEnd(h,A);if(y!=null){const vt=new Ue((F[0]+F[1])/2,o);y.foundPossibleResultPoint(vt)}let K=F[1],ne=K+(K-F[0]);if(ne>=h.getSize()||!h.isRange(K,ne,!1))throw new se;let ce=O.toString();if(ce.length<8)throw new M;if(!$t.checkChecksum(ce))throw new E;let ke=(b[1]+b[0])/2,je=(F[1]+F[0])/2,Fe=this.getBarcodeFormat(),qe=[new Ue(ke,o),new Ue(je,o)],nt=new U(ce,null,0,qe,Fe,new Date().getTime()),At=0;try{let vt=Xr.decodeRow(o,h,F[1]);nt.putMetadata(De.UPC_EAN_EXTENSION,vt.getText()),nt.putAllMetadata(vt.getResultMetadata()),nt.addResultPoints(vt.getResultPoints()),At=vt.getText().length}catch{}let St=m==null?null:m.get(X.ALLOWED_EAN_EXTENSIONS);if(St!=null){let vt=!1;for(let Er in St)if(At.toString()===Er){vt=!0;break}if(!vt)throw new se}return nt}decodeEnd(o,h){return $t.findGuardPattern(o,h,!1,$t.START_END_PATTERN,new Int32Array($t.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return $t.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let h=o.length;if(h===0)return!1;let m=parseInt(o.charAt(h-1),10);return $t.getStandardUPCEANChecksum(o.substring(0,h-1))===m}static getStandardUPCEANChecksum(o){let h=o.length,m=0;for(let b=h-1;b>=0;b-=2){let y=o.charAt(b).charCodeAt(0)-48;if(y<0||y>9)throw new M;m+=y}m*=3;for(let b=h-2;b>=0;b-=2){let y=o.charAt(b).charCodeAt(0)-48;if(y<0||y>9)throw new M;m+=y}return(1e3-m)%10}}class Cr extends $t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,h,m){let b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;let y=o.getSize(),k=h[1],A=0;for(let F=0;F<6&&k<y;F++){let K=$t.decodeDigit(o,b,k,$t.L_AND_G_PATTERNS);m+=String.fromCharCode(48+K%10);for(let ne of b)k+=ne;K>=10&&(A|=1<<5-F)}m=Cr.determineFirstDigit(m,A),k=$t.findGuardPattern(o,k,!0,$t.MIDDLE_PATTERN,new Int32Array($t.MIDDLE_PATTERN.length).fill(0))[1];for(let F=0;F<6&&k<y;F++){let K=$t.decodeDigit(o,b,k,$t.L_PATTERNS);m+=String.fromCharCode(48+K);for(let ne of b)k+=ne}return{rowOffset:k,resultString:m}}getBarcodeFormat(){return ue.EAN_13}static determineFirstDigit(o,h){for(let m=0;m<10;m++)if(h===this.FIRST_DIGIT_ENCODINGS[m])return o=String.fromCharCode(48+m)+o,o;throw new se}}Cr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Kr extends $t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,h,m){const b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;let y=o.getSize(),k=h[1];for(let O=0;O<4&&k<y;O++){let F=$t.decodeDigit(o,b,k,$t.L_PATTERNS);m+=String.fromCharCode(48+F);for(let K of b)k+=K}k=$t.findGuardPattern(o,k,!0,$t.MIDDLE_PATTERN,new Int32Array($t.MIDDLE_PATTERN.length).fill(0))[1];for(let O=0;O<4&&k<y;O++){let F=$t.decodeDigit(o,b,k,$t.L_PATTERNS);m+=String.fromCharCode(48+F);for(let K of b)k+=K}return{rowOffset:k,resultString:m}}getBarcodeFormat(){return ue.EAN_8}}class Tn extends $t{constructor(){super(...arguments),this.ean13Reader=new Cr}getBarcodeFormat(){return ue.UPC_A}decode(o,h){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,h,m){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,h,m))}decodeMiddle(o,h,m){return this.ean13Reader.decodeMiddle(o,h,m)}maybeReturnResult(o){let h=o.getText();if(h.charAt(0)==="0"){let m=new U(h.substring(1),null,null,o.getResultPoints(),ue.UPC_A);return o.getResultMetadata()!=null&&m.putAllMetadata(o.getResultMetadata()),m}else throw new se}reset(){this.ean13Reader.reset()}}class Mr extends $t{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,h,m){const b=this.decodeMiddleCounters.map(F=>F);b[0]=0,b[1]=0,b[2]=0,b[3]=0;const y=o.getSize();let k=h[1],A=0;for(let F=0;F<6&&k<y;F++){const K=Mr.decodeDigit(o,b,k,Mr.L_AND_G_PATTERNS);m+=String.fromCharCode(48+K%10);for(let ne of b)k+=ne;K>=10&&(A|=1<<5-F)}let O=Mr.determineNumSysAndCheckDigit(m,A);return{rowOffset:k,resultString:O}}decodeEnd(o,h){return Mr.findGuardPatternWithoutCounters(o,h,!0,Mr.MIDDLE_END_PATTERN)}checkChecksum(o){return $t.checkChecksum(Mr.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,h){for(let m=0;m<=1;m++)for(let b=0;b<10;b++)if(h===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[m][b]){let y=String.fromCharCode(48+m),k=String.fromCharCode(48+b);return y+o+k}throw se.getNotFoundInstance()}getBarcodeFormat(){return ue.UPC_E}static convertUPCEtoUPCA(o){const h=o.slice(1,7).split("").map(y=>y.charCodeAt(0)),m=new he;m.append(o.charAt(0));let b=h[5];switch(b){case 0:case 1:case 2:m.appendChars(h,0,2),m.append(b),m.append("0000"),m.appendChars(h,2,3);break;case 3:m.appendChars(h,0,3),m.append("00000"),m.appendChars(h,3,2);break;case 4:m.appendChars(h,0,4),m.append("00000"),m.append(h[4]);break;default:m.appendChars(h,0,5),m.append("0000"),m.append(b);break}return o.length>=8&&m.append(o.charAt(7)),m.toString()}}Mr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Mr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Hr extends jt{constructor(o){super();let h=o==null?null:o.get(X.POSSIBLE_FORMATS),m=[];n(h)?(m.push(new Cr),m.push(new Tn),m.push(new Kr),m.push(new Mr)):(h.indexOf(ue.EAN_13)>-1&&m.push(new Cr),h.indexOf(ue.UPC_A)>-1&&m.push(new Tn),h.indexOf(ue.EAN_8)>-1&&m.push(new Kr),h.indexOf(ue.UPC_E)>-1&&m.push(new Mr)),this.readers=m}decodeRow(o,h,m){for(let b of this.readers)try{const y=b.decodeRow(o,h,m),k=y.getBarcodeFormat()===ue.EAN_13&&y.getText().charAt(0)==="0",A=m==null?null:m.get(X.POSSIBLE_FORMATS),O=A==null||A.includes(ue.UPC_A);if(k&&O){const F=y.getRawBytes(),K=new U(y.getText().substring(1),F,F?F.length:null,y.getResultPoints(),ue.UPC_A);return K.putAllMetadata(y.getResultMetadata()),K}return y}catch{}throw new se}reset(){for(let o of this.readers)o.reset()}}class Ge extends jt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,h){for(let m=0;m<h.length;m++)if(jt.patternMatchVariance(o,h[m],Ge.MAX_INDIVIDUAL_VARIANCE)<Ge.MAX_AVG_VARIANCE)return m;throw new se}static count(o){return Se.sum(new Int32Array(o))}static increment(o,h){let m=0,b=h[0];for(let y=1;y<o.length;y++)h[y]>b&&(b=h[y],m=y);o[m]++}static decrement(o,h){let m=0,b=h[0];for(let y=1;y<o.length;y++)h[y]<b&&(b=h[y],m=y);o[m]--}static isFinderPattern(o){let h=o[0]+o[1],m=h+o[2]+o[3],b=h/m;if(b>=Ge.MIN_FINDER_PATTERN_RATIO&&b<=Ge.MAX_FINDER_PATTERN_RATIO){let y=Number.MAX_SAFE_INTEGER,k=Number.MIN_SAFE_INTEGER;for(let A of o)A>k&&(k=A),A<y&&(y=A);return k<10*y}return!1}}Ge.MAX_AVG_VARIANCE=.2,Ge.MAX_INDIVIDUAL_VARIANCE=.45,Ge.MIN_FINDER_PATTERN_RATIO=9.5/12,Ge.MAX_FINDER_PATTERN_RATIO=12.5/14;class Nt{constructor(o,h){this.value=o,this.checksumPortion=h}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof Nt))return!1;const h=o;return this.value===h.value&&this.checksumPortion===h.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Dt{constructor(o,h,m,b,y){this.value=o,this.startEnd=h,this.value=o,this.startEnd=h,this.resultPoints=new Array,this.resultPoints.push(new Ue(m,y)),this.resultPoints.push(new Ue(b,y))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof Dt))return!1;const h=o;return this.value===h.value}hashCode(){return this.value}}class Pt{constructor(){}static getRSSvalue(o,h,m){let b=0;for(let O of o)b+=O;let y=0,k=0,A=o.length;for(let O=0;O<A-1;O++){let F;for(F=1,k|=1<<O;F<o[O];F++,k&=~(1<<O)){let K=Pt.combins(b-F-1,A-O-2);if(m&&k===0&&b-F-(A-O-1)>=A-O-1&&(K-=Pt.combins(b-F-(A-O),A-O-2)),A-O-1>1){let ne=0;for(let ce=b-F-(A-O-2);ce>h;ce--)ne+=Pt.combins(b-F-ce-1,A-O-3);K-=ne*(A-1-O)}else b-F>h&&K--;y+=K}b-=F}return y}static combins(o,h){let m,b;o-h>h?(b=h,m=o-h):(b=o-h,m=h);let y=1,k=1;for(let A=o;A>m;A--)y*=A,k<=b&&(y/=k,k++);for(;k<=b;)y/=k,k++;return y}}class _r{static buildBitArray(o){let h=o.length*2-1;o[o.length-1].getRightChar()==null&&(h-=1);let m=12*h,b=new L(m),y=0,A=o[0].getRightChar().getValue();for(let O=11;O>=0;--O)(A&1<<O)!=0&&b.set(y),y++;for(let O=1;O<o.length;++O){let F=o[O],K=F.getLeftChar().getValue();for(let ne=11;ne>=0;--ne)(K&1<<ne)!=0&&b.set(y),y++;if(F.getRightChar()!=null){let ne=F.getRightChar().getValue();for(let ce=11;ce>=0;--ce)(ne&1<<ce)!=0&&b.set(y),y++}}return b}}class Ie{constructor(o,h){h?this.decodedInformation=null:(this.finished=o,this.decodedInformation=h)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class wt{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class _t extends wt{constructor(o,h){super(o),this.value=h}getValue(){return this.value}isFNC1(){return this.value===_t.FNC1}}_t.FNC1="$";class Ft extends wt{constructor(o,h,m){super(o),m?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=h}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ee extends wt{constructor(o,h,m){if(super(o),h<0||h>10||m<0||m>10)throw new M;this.firstDigit=h,this.secondDigit=m}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ee.FNC1}isSecondDigitFNC1(){return this.secondDigit===ee.FNC1}isAnyFNC1(){return this.firstDigit===ee.FNC1||this.secondDigit===ee.FNC1}}ee.FNC1=10;class fe{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new se;let h=o.substring(0,2);for(let y of fe.TWO_DIGIT_DATA_LENGTH)if(y[0]===h)return y[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(2,y[2],o):fe.processFixedAI(2,y[1],o);if(o.length<3)throw new se;let m=o.substring(0,3);for(let y of fe.THREE_DIGIT_DATA_LENGTH)if(y[0]===m)return y[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(3,y[2],o):fe.processFixedAI(3,y[1],o);for(let y of fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(y[0]===m)return y[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(4,y[2],o):fe.processFixedAI(4,y[1],o);if(o.length<4)throw new se;let b=o.substring(0,4);for(let y of fe.FOUR_DIGIT_DATA_LENGTH)if(y[0]===b)return y[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(4,y[2],o):fe.processFixedAI(4,y[1],o);throw new se}static processFixedAI(o,h,m){if(m.length<o)throw new se;let b=m.substring(0,o);if(m.length<o+h)throw new se;let y=m.substring(o,o+h),k=m.substring(o+h),A="("+b+")"+y,O=fe.parseFieldsInGeneralPurpose(k);return O==null?A:A+O}static processVariableAI(o,h,m){let b=m.substring(0,o),y;m.length<o+h?y=m.length:y=o+h;let k=m.substring(o,y),A=m.substring(y),O="("+b+")"+k,F=fe.parseFieldsInGeneralPurpose(A);return F==null?O:O+F}}fe.VARIABLE_LENGTH=[],fe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",fe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",fe.VARIABLE_LENGTH,20],["22",fe.VARIABLE_LENGTH,29],["30",fe.VARIABLE_LENGTH,8],["37",fe.VARIABLE_LENGTH,8],["90",fe.VARIABLE_LENGTH,30],["91",fe.VARIABLE_LENGTH,30],["92",fe.VARIABLE_LENGTH,30],["93",fe.VARIABLE_LENGTH,30],["94",fe.VARIABLE_LENGTH,30],["95",fe.VARIABLE_LENGTH,30],["96",fe.VARIABLE_LENGTH,30],["97",fe.VARIABLE_LENGTH,3],["98",fe.VARIABLE_LENGTH,30],["99",fe.VARIABLE_LENGTH,30]],fe.THREE_DIGIT_DATA_LENGTH=[["240",fe.VARIABLE_LENGTH,30],["241",fe.VARIABLE_LENGTH,30],["242",fe.VARIABLE_LENGTH,6],["250",fe.VARIABLE_LENGTH,30],["251",fe.VARIABLE_LENGTH,30],["253",fe.VARIABLE_LENGTH,17],["254",fe.VARIABLE_LENGTH,20],["400",fe.VARIABLE_LENGTH,30],["401",fe.VARIABLE_LENGTH,30],["402",17],["403",fe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",fe.VARIABLE_LENGTH,20],["421",fe.VARIABLE_LENGTH,15],["422",3],["423",fe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",fe.VARIABLE_LENGTH,15],["391",fe.VARIABLE_LENGTH,18],["392",fe.VARIABLE_LENGTH,15],["393",fe.VARIABLE_LENGTH,18],["703",fe.VARIABLE_LENGTH,30]],fe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",fe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",fe.VARIABLE_LENGTH,20],["8003",fe.VARIABLE_LENGTH,30],["8004",fe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",fe.VARIABLE_LENGTH,30],["8008",fe.VARIABLE_LENGTH,12],["8018",18],["8020",fe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",fe.VARIABLE_LENGTH,70],["8200",fe.VARIABLE_LENGTH,70]];class pe{constructor(o){this.buffer=new he,this.information=o}decodeAllCodes(o,h){let m=h,b=null;do{let y=this.decodeGeneralPurposeField(m,b),k=fe.parseFieldsInGeneralPurpose(y.getNewString());if(k!=null&&o.append(k),y.isRemaining()?b=""+y.getRemainingValue():b=null,m===y.getNewPosition())break;m=y.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let h=o;h<o+3;++h)if(this.information.get(h))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let y=this.extractNumericValueFromBitArray(o,4);return y===0?new ee(this.information.getSize(),ee.FNC1,ee.FNC1):new ee(this.information.getSize(),y-1,ee.FNC1)}let h=this.extractNumericValueFromBitArray(o,7),m=(h-8)/11,b=(h-8)%11;return new ee(o+7,m,b)}extractNumericValueFromBitArray(o,h){return pe.extractNumericValueFromBitArray(this.information,o,h)}static extractNumericValueFromBitArray(o,h,m){let b=0;for(let y=0;y<m;++y)o.get(h+y)&&(b|=1<<m-y-1);return b}decodeGeneralPurposeField(o,h){this.buffer.setLengthToZero(),h!=null&&this.buffer.append(h),this.current.setPosition(o);let m=this.parseBlocks();return m!=null&&m.isRemaining()?new Ft(this.current.getPosition(),this.buffer.toString(),m.getRemainingValue()):new Ft(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,h;do{let m=this.current.getPosition();if(this.current.isAlpha()?(h=this.parseAlphaBlock(),o=h.isFinished()):this.current.isIsoIec646()?(h=this.parseIsoIec646Block(),o=h.isFinished()):(h=this.parseNumericBlock(),o=h.isFinished()),!(m!==this.current.getPosition())&&!o)break}while(!o);return h.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let h;return o.isSecondDigitFNC1()?h=new Ft(this.current.getPosition(),this.buffer.toString()):h=new Ft(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new Ie(!0,h)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let h=new Ft(this.current.getPosition(),this.buffer.toString());return new Ie(!0,h)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ie(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let h=new Ft(this.current.getPosition(),this.buffer.toString());return new Ie(!0,h)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ie(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let h=new Ft(this.current.getPosition(),this.buffer.toString());return new Ie(!0,h)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ie(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(o,5);if(h>=5&&h<16)return!0;if(o+7>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(o,7);if(m>=64&&m<116)return!0;if(o+8>this.information.getSize())return!1;let b=this.extractNumericValueFromBitArray(o,8);return b>=232&&b<253}decodeIsoIec646(o){let h=this.extractNumericValueFromBitArray(o,5);if(h===15)return new _t(o+5,_t.FNC1);if(h>=5&&h<15)return new _t(o+5,"0"+(h-5));let m=this.extractNumericValueFromBitArray(o,7);if(m>=64&&m<90)return new _t(o+7,""+(m+1));if(m>=90&&m<116)return new _t(o+7,""+(m+7));let b=this.extractNumericValueFromBitArray(o,8),y;switch(b){case 232:y="!";break;case 233:y='"';break;case 234:y="%";break;case 235:y="&";break;case 236:y="'";break;case 237:y="(";break;case 238:y=")";break;case 239:y="*";break;case 240:y="+";break;case 241:y=",";break;case 242:y="-";break;case 243:y=".";break;case 244:y="/";break;case 245:y=":";break;case 246:y=";";break;case 247:y="<";break;case 248:y="=";break;case 249:y=">";break;case 250:y="?";break;case 251:y="_";break;case 252:y=" ";break;default:throw new M}return new _t(o+8,y)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(o,5);if(h>=5&&h<16)return!0;if(o+6>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(o,6);return m>=16&&m<63}decodeAlphanumeric(o){let h=this.extractNumericValueFromBitArray(o,5);if(h===15)return new _t(o+5,_t.FNC1);if(h>=5&&h<15)return new _t(o+5,"0"+(h-5));let m=this.extractNumericValueFromBitArray(o,6);if(m>=32&&m<58)return new _t(o+6,""+(m+33));let b;switch(m){case 58:b="*";break;case 59:b=",";break;case 60:b="-";break;case 61:b=".";break;case 62:b="/";break;default:throw new Me("Decoding invalid alphanumeric value: "+m)}return new _t(o+6,b)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let h=0;h<5&&h+o<this.information.getSize();++h)if(h===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+h))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let h=o;h<o+3;++h)if(this.information.get(h))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let h=0;h<4&&h+o<this.information.getSize();++h)if(this.information.get(o+h))return!1;return!0}}class be{constructor(o){this.information=o,this.generalDecoder=new pe(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class we extends be{constructor(o){super(o)}encodeCompressedGtin(o,h){o.append("(01)");let m=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,h,m)}encodeCompressedGtinWithoutAI(o,h,m){for(let b=0;b<4;++b){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(h+10*b,10);y/100===0&&o.append("0"),y/10===0&&o.append("0"),o.append(y)}we.appendCheckDigit(o,m)}static appendCheckDigit(o,h){let m=0;for(let b=0;b<13;b++){let y=o.charAt(b+h).charCodeAt(0)-48;m+=(b&1)===0?3*y:y}m=10-m%10,m===10&&(m=0),o.append(m)}}we.GTIN_SIZE=40;class Ee extends we{constructor(o){super(o)}parseInformation(){let o=new he;o.append("(01)");let h=o.length(),m=this.getGeneralDecoder().extractNumericValueFromBitArray(Ee.HEADER_SIZE,4);return o.append(m),this.encodeCompressedGtinWithoutAI(o,Ee.HEADER_SIZE+4,h),this.getGeneralDecoder().decodeAllCodes(o,Ee.HEADER_SIZE+44)}}Ee.HEADER_SIZE=4;class Xe extends be{constructor(o){super(o)}parseInformation(){let o=new he;return this.getGeneralDecoder().decodeAllCodes(o,Xe.HEADER_SIZE)}}Xe.HEADER_SIZE=5;class ot extends we{constructor(o){super(o)}encodeCompressedWeight(o,h,m){let b=this.getGeneralDecoder().extractNumericValueFromBitArray(h,m);this.addWeightCode(o,b);let y=this.checkWeight(b),k=1e5;for(let A=0;A<5;++A)y/k===0&&o.append("0"),k/=10;o.append(y)}}class Ve extends ot{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=Ve.HEADER_SIZE+ot.GTIN_SIZE+Ve.WEIGHT_SIZE)throw new se;let o=new he;return this.encodeCompressedGtin(o,Ve.HEADER_SIZE),this.encodeCompressedWeight(o,Ve.HEADER_SIZE+ot.GTIN_SIZE,Ve.WEIGHT_SIZE),o.toString()}}Ve.HEADER_SIZE=5,Ve.WEIGHT_SIZE=15;class et extends Ve{constructor(o){super(o)}addWeightCode(o,h){o.append("(3103)")}checkWeight(o){return o}}class Je extends Ve{constructor(o){super(o)}addWeightCode(o,h){h<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class gt extends we{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<gt.HEADER_SIZE+we.GTIN_SIZE)throw new se;let o=new he;this.encodeCompressedGtin(o,gt.HEADER_SIZE);let h=this.getGeneralDecoder().extractNumericValueFromBitArray(gt.HEADER_SIZE+we.GTIN_SIZE,gt.LAST_DIGIT_SIZE);o.append("(392"),o.append(h),o.append(")");let m=this.getGeneralDecoder().decodeGeneralPurposeField(gt.HEADER_SIZE+we.GTIN_SIZE+gt.LAST_DIGIT_SIZE,null);return o.append(m.getNewString()),o.toString()}}gt.HEADER_SIZE=8,gt.LAST_DIGIT_SIZE=2;class yt extends we{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<yt.HEADER_SIZE+we.GTIN_SIZE)throw new se;let o=new he;this.encodeCompressedGtin(o,yt.HEADER_SIZE);let h=this.getGeneralDecoder().extractNumericValueFromBitArray(yt.HEADER_SIZE+we.GTIN_SIZE,yt.LAST_DIGIT_SIZE);o.append("(393"),o.append(h),o.append(")");let m=this.getGeneralDecoder().extractNumericValueFromBitArray(yt.HEADER_SIZE+we.GTIN_SIZE+yt.LAST_DIGIT_SIZE,yt.FIRST_THREE_DIGITS_SIZE);m/100==0&&o.append("0"),m/10==0&&o.append("0"),o.append(m);let b=this.getGeneralDecoder().decodeGeneralPurposeField(yt.HEADER_SIZE+we.GTIN_SIZE+yt.LAST_DIGIT_SIZE+yt.FIRST_THREE_DIGITS_SIZE,null);return o.append(b.getNewString()),o.toString()}}yt.HEADER_SIZE=8,yt.LAST_DIGIT_SIZE=2,yt.FIRST_THREE_DIGITS_SIZE=10;class Et extends ot{constructor(o,h,m){super(o),this.dateCode=m,this.firstAIdigits=h}parseInformation(){if(this.getInformation().getSize()!=Et.HEADER_SIZE+Et.GTIN_SIZE+Et.WEIGHT_SIZE+Et.DATE_SIZE)throw new se;let o=new he;return this.encodeCompressedGtin(o,Et.HEADER_SIZE),this.encodeCompressedWeight(o,Et.HEADER_SIZE+Et.GTIN_SIZE,Et.WEIGHT_SIZE),this.encodeCompressedDate(o,Et.HEADER_SIZE+Et.GTIN_SIZE+Et.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,h){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(h,Et.DATE_SIZE);if(m==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let b=m%32;m/=32;let y=m%12+1;m/=12;let k=m;k/10==0&&o.append("0"),o.append(k),y/10==0&&o.append("0"),o.append(y),b/10==0&&o.append("0"),o.append(b)}addWeightCode(o,h){o.append("("),o.append(this.firstAIdigits),o.append(h/1e5),o.append(")")}checkWeight(o){return o%1e5}}Et.HEADER_SIZE=8,Et.WEIGHT_SIZE=20,Et.DATE_SIZE=16;function kt(re){try{if(re.get(1))return new Ee(re);if(!re.get(2))return new Xe(re);switch(pe.extractNumericValueFromBitArray(re,1,4)){case 4:return new et(re);case 5:return new Je(re)}switch(pe.extractNumericValueFromBitArray(re,1,5)){case 12:return new gt(re);case 13:return new yt(re)}switch(pe.extractNumericValueFromBitArray(re,1,7)){case 56:return new Et(re,"310","11");case 57:return new Et(re,"320","11");case 58:return new Et(re,"310","13");case 59:return new Et(re,"320","13");case 60:return new Et(re,"310","15");case 61:return new Et(re,"320","15");case 62:return new Et(re,"310","17");case 63:return new Et(re,"320","17")}}catch(o){throw console.log(o),new Me("unknown decoder: "+re)}}class Ot{constructor(o,h,m,b){this.leftchar=o,this.rightchar=h,this.finderpattern=m,this.maybeLast=b}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,h){return o instanceof Ot?Ot.equalsOrNull(o.leftchar,h.leftchar)&&Ot.equalsOrNull(o.rightchar,h.rightchar)&&Ot.equalsOrNull(o.finderpattern,h.finderpattern):!1}static equalsOrNull(o,h){return o===null?h===null:Ot.equals(o,h)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ut{constructor(o,h,m){this.pairs=o,this.rowNumber=h,this.wasReversed=m}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,h){return o instanceof Ut?this.checkEqualitity(o,h)&&o.wasReversed===h.wasReversed:!1}checkEqualitity(o,h){if(!o||!h)return;let m;return o.forEach((b,y)=>{h.forEach(k=>{b.getLeftChar().getValue()===k.getLeftChar().getValue()&&b.getRightChar().getValue()===k.getRightChar().getValue()&&b.getFinderPatter().getValue()===k.getFinderPatter().getValue()&&(m=!0)})}),m}}class ct extends Ge{constructor(o){super(...arguments),this.pairs=new Array(ct.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,h,m){this.pairs.length=0,this.startFromEven=!1;try{return ct.constructResult(this.decodeRow2pairs(o,h))}catch(b){this.verbose&&console.log(b)}return this.pairs.length=0,this.startFromEven=!0,ct.constructResult(this.decodeRow2pairs(o,h))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,h){let m=!1;for(;!m;)try{this.pairs.push(this.retrieveNextPair(h,this.pairs,o))}catch(y){if(y instanceof se){if(!this.pairs.length)throw new se;m=!0}}if(this.checkChecksum())return this.pairs;let b;if(this.rows.length?b=!0:b=!1,this.storeRow(o,!1),b){let y=this.checkRowsBoolean(!1);if(y!=null||(y=this.checkRowsBoolean(!0),y!=null))return y}throw new se}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let h=null;try{h=this.checkRows(new Array,0)}catch(m){this.verbose&&console.log(m)}return o&&(this.rows=this.rows.reverse()),h}checkRows(o,h){for(let m=h;m<this.rows.length;m++){let b=this.rows[m];this.pairs.length=0;for(let k of o)this.pairs.push(k.getPairs());if(this.pairs.push(b.getPairs()),!ct.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let y=new Array(o);y.push(b);try{return this.checkRows(y,m+1)}catch(k){this.verbose&&console.log(k)}}throw new se}static isValidSequence(o){for(let h of ct.FINDER_PATTERN_SEQUENCES){if(o.length>h.length)continue;let m=!0;for(let b=0;b<o.length;b++)if(o[b].getFinderPattern().getValue()!=h[b]){m=!1;break}if(m)return!0}return!1}storeRow(o,h){let m=0,b=!1,y=!1;for(;m<this.rows.length;){let k=this.rows[m];if(k.getRowNumber()>o){y=k.isEquivalent(this.pairs);break}b=k.isEquivalent(this.pairs),m++}y||b||ct.isPartialRow(this.pairs,this.rows)||(this.rows.push(m,new Ut(this.pairs,o,h)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,h){for(let m of h)if(m.getPairs().length!==o.length){for(let b of m.getPairs())for(let y of o)if(Ot.equals(b,y))break}}static isPartialRow(o,h){for(let m of h){let b=!0;for(let y of o){let k=!1;for(let A of m.getPairs())if(y.equals(A)){k=!0;break}if(!k){b=!1;break}}if(b)return!0}return!1}getRows(){return this.rows}static constructResult(o){let h=_r.buildBitArray(o),b=kt(h).parseInformation(),y=o[0].getFinderPattern().getResultPoints(),k=o[o.length-1].getFinderPattern().getResultPoints(),A=[y[0],y[1],k[0],k[1]];return new U(b,null,null,A,ue.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),h=o.getLeftChar(),m=o.getRightChar();if(m==null)return!1;let b=m.getChecksumPortion(),y=2;for(let A=1;A<this.pairs.size();++A){let O=this.pairs.get(A);b+=O.getLeftChar().getChecksumPortion(),y++;let F=O.getRightChar();F!=null&&(b+=F.getChecksumPortion(),y++)}return b%=211,211*(y-4)+b==h.getValue()}static getNextSecondBar(o,h){let m;return o.get(h)?(m=o.getNextUnset(h),m=o.getNextSet(m)):(m=o.getNextSet(h),m=o.getNextUnset(m)),m}retrieveNextPair(o,h,m){let b=h.length%2==0;this.startFromEven&&(b=!b);let y,k=!0,A=-1;do this.findNextPair(o,h,A),y=this.parseFoundFinderPattern(o,m,b),y==null?A=ct.getNextSecondBar(o,this.startEnd[0]):k=!1;while(k);let O=this.decodeDataCharacter(o,y,b,!0);if(!this.isEmptyPair(h)&&h[h.length-1].mustBeLast())throw new se;let F;try{F=this.decodeDataCharacter(o,y,b,!1)}catch(K){F=null,this.verbose&&console.log(K)}return new Ot(O,F,y,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,h,m){let b=this.getDecodeFinderCounters();b[0]=0,b[1]=0,b[2]=0,b[3]=0;let y=o.getSize(),k;m>=0?k=m:this.isEmptyPair(h)?k=0:k=h[h.length-1].getFinderPattern().getStartEnd()[1];let A=h.length%2!=0;this.startFromEven&&(A=!A);let O=!1;for(;k<y&&(O=!o.get(k),!!O);)k++;let F=0,K=k;for(let ne=k;ne<y;ne++)if(o.get(ne)!=O)b[F]++;else{if(F==3){if(A&&ct.reverseCounters(b),ct.isFinderPattern(b)){this.startEnd[0]=K,this.startEnd[1]=ne;return}A&&ct.reverseCounters(b),K+=b[0]+b[1],b[0]=b[2],b[1]=b[3],b[2]=0,b[3]=0,F--}else F++;b[F]=1,O=!O}throw new se}static reverseCounters(o){let h=o.length;for(let m=0;m<h/2;++m){let b=o[m];o[m]=o[h-m-1],o[h-m-1]=b}}parseFoundFinderPattern(o,h,m){let b,y,k;if(m){let F=this.startEnd[0]-1;for(;F>=0&&!o.get(F);)F--;F++,b=this.startEnd[0]-F,y=F,k=this.startEnd[1]}else y=this.startEnd[0],k=o.getNextUnset(this.startEnd[1]+1),b=k-this.startEnd[1];let A=this.getDecodeFinderCounters();S.arraycopy(A,0,A,1,A.length-1),A[0]=b;let O;try{O=this.parseFinderValue(A,ct.FINDER_PATTERNS)}catch{return null}return new Dt(O,[y,k],y,k,h)}decodeDataCharacter(o,h,m,b){let y=this.getDataCharacterCounters();for(let Qr=0;Qr<y.length;Qr++)y[Qr]=0;if(b)ct.recordPatternInReverse(o,h.getStartEnd()[0],y);else{ct.recordPattern(o,h.getStartEnd()[1],y);for(let Qr=0,ua=y.length-1;Qr<ua;Qr++,ua--){let Wa=y[Qr];y[Qr]=y[ua],y[ua]=Wa}}let k=17,A=Se.sum(new Int32Array(y))/k,O=(h.getStartEnd()[1]-h.getStartEnd()[0])/15;if(Math.abs(A-O)/O>.3)throw new se;let F=this.getOddCounts(),K=this.getEvenCounts(),ne=this.getOddRoundingErrors(),ce=this.getEvenRoundingErrors();for(let Qr=0;Qr<y.length;Qr++){let ua=1*y[Qr]/A,Wa=ua+.5;if(Wa<1){if(ua<.3)throw new se;Wa=1}else if(Wa>8){if(ua>8.7)throw new se;Wa=8}let Vl=Qr/2;(Qr&1)==0?(F[Vl]=Wa,ne[Vl]=ua-Wa):(K[Vl]=Wa,ce[Vl]=ua-Wa)}this.adjustOddEvenCounts(k);let ke=4*h.getValue()+(m?0:2)+(b?0:1)-1,je=0,Fe=0;for(let Qr=F.length-1;Qr>=0;Qr--){if(ct.isNotA1left(h,m,b)){let ua=ct.WEIGHTS[ke][2*Qr];Fe+=F[Qr]*ua}je+=F[Qr]}let qe=0;for(let Qr=K.length-1;Qr>=0;Qr--)if(ct.isNotA1left(h,m,b)){let ua=ct.WEIGHTS[ke][2*Qr+1];qe+=K[Qr]*ua}let nt=Fe+qe;if((je&1)!=0||je>13||je<4)throw new se;let At=(13-je)/2,St=ct.SYMBOL_WIDEST[At],vt=9-St,Er=Pt.getRSSvalue(F,St,!0),ur=Pt.getRSSvalue(K,vt,!1),Fn=ct.EVEN_TOTAL_SUBSET[At],es=ct.GSUM[At],_a=Er*Fn+ur+es;return new Nt(_a,nt)}static isNotA1left(o,h,m){return!(o.getValue()==0&&h&&m)}adjustOddEvenCounts(o){let h=Se.sum(new Int32Array(this.getOddCounts())),m=Se.sum(new Int32Array(this.getEvenCounts())),b=!1,y=!1;h>13?y=!0:h<4&&(b=!0);let k=!1,A=!1;m>13?A=!0:m<4&&(k=!0);let O=h+m-o,F=(h&1)==1,K=(m&1)==0;if(O==1)if(F){if(K)throw new se;y=!0}else{if(!K)throw new se;A=!0}else if(O==-1)if(F){if(K)throw new se;b=!0}else{if(!K)throw new se;k=!0}else if(O==0){if(F){if(!K)throw new se;h<m?(b=!0,A=!0):(y=!0,k=!0)}else if(K)throw new se}else throw new se;if(b){if(y)throw new se;ct.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&ct.decrement(this.getOddCounts(),this.getOddRoundingErrors()),k){if(A)throw new se;ct.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&ct.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ct.SYMBOL_WIDEST=[7,5,4,3,1],ct.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ct.GSUM=[0,348,1388,2948,3988],ct.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ct.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ct.FINDER_PAT_A=0,ct.FINDER_PAT_B=1,ct.FINDER_PAT_C=2,ct.FINDER_PAT_D=3,ct.FINDER_PAT_E=4,ct.FINDER_PAT_F=5,ct.FINDER_PATTERN_SEQUENCES=[[ct.FINDER_PAT_A,ct.FINDER_PAT_A],[ct.FINDER_PAT_A,ct.FINDER_PAT_B,ct.FINDER_PAT_B],[ct.FINDER_PAT_A,ct.FINDER_PAT_C,ct.FINDER_PAT_B,ct.FINDER_PAT_D],[ct.FINDER_PAT_A,ct.FINDER_PAT_E,ct.FINDER_PAT_B,ct.FINDER_PAT_D,ct.FINDER_PAT_C],[ct.FINDER_PAT_A,ct.FINDER_PAT_E,ct.FINDER_PAT_B,ct.FINDER_PAT_D,ct.FINDER_PAT_D,ct.FINDER_PAT_F],[ct.FINDER_PAT_A,ct.FINDER_PAT_E,ct.FINDER_PAT_B,ct.FINDER_PAT_D,ct.FINDER_PAT_E,ct.FINDER_PAT_F,ct.FINDER_PAT_F],[ct.FINDER_PAT_A,ct.FINDER_PAT_A,ct.FINDER_PAT_B,ct.FINDER_PAT_B,ct.FINDER_PAT_C,ct.FINDER_PAT_C,ct.FINDER_PAT_D,ct.FINDER_PAT_D],[ct.FINDER_PAT_A,ct.FINDER_PAT_A,ct.FINDER_PAT_B,ct.FINDER_PAT_B,ct.FINDER_PAT_C,ct.FINDER_PAT_C,ct.FINDER_PAT_D,ct.FINDER_PAT_E,ct.FINDER_PAT_E],[ct.FINDER_PAT_A,ct.FINDER_PAT_A,ct.FINDER_PAT_B,ct.FINDER_PAT_B,ct.FINDER_PAT_C,ct.FINDER_PAT_C,ct.FINDER_PAT_D,ct.FINDER_PAT_E,ct.FINDER_PAT_F,ct.FINDER_PAT_F],[ct.FINDER_PAT_A,ct.FINDER_PAT_A,ct.FINDER_PAT_B,ct.FINDER_PAT_B,ct.FINDER_PAT_C,ct.FINDER_PAT_D,ct.FINDER_PAT_D,ct.FINDER_PAT_E,ct.FINDER_PAT_E,ct.FINDER_PAT_F,ct.FINDER_PAT_F]],ct.MAX_PAIRS=11;class Fr extends Nt{constructor(o,h,m){super(o,h),this.count=0,this.finderPattern=m}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class pt extends Ge{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,h,m){const b=this.decodePair(h,!1,o,m);pt.addOrTally(this.possibleLeftPairs,b),h.reverse();let y=this.decodePair(h,!0,o,m);pt.addOrTally(this.possibleRightPairs,y),h.reverse();for(let k of this.possibleLeftPairs)if(k.getCount()>1){for(let A of this.possibleRightPairs)if(A.getCount()>1&&pt.checkChecksum(k,A))return pt.constructResult(k,A)}throw new se}static addOrTally(o,h){if(h==null)return;let m=!1;for(let b of o)if(b.getValue()===h.getValue()){b.incrementCount(),m=!0;break}m||o.push(h)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,h){let m=4537077*o.getValue()+h.getValue(),b=new String(m).toString(),y=new he;for(let F=13-b.length;F>0;F--)y.append("0");y.append(b);let k=0;for(let F=0;F<13;F++){let K=y.charAt(F).charCodeAt(0)-48;k+=(F&1)===0?3*K:K}k=10-k%10,k===10&&(k=0),y.append(k.toString());let A=o.getFinderPattern().getResultPoints(),O=h.getFinderPattern().getResultPoints();return new U(y.toString(),null,0,[A[0],A[1],O[0],O[1]],ue.RSS_14,new Date().getTime())}static checkChecksum(o,h){let m=(o.getChecksumPortion()+16*h.getChecksumPortion())%79,b=9*o.getFinderPattern().getValue()+h.getFinderPattern().getValue();return b>72&&b--,b>8&&b--,m===b}decodePair(o,h,m,b){try{let y=this.findFinderPattern(o,h),k=this.parseFoundFinderPattern(o,m,h,y),A=b==null?null:b.get(X.NEED_RESULT_POINT_CALLBACK);if(A!=null){let K=(y[0]+y[1])/2;h&&(K=o.getSize()-1-K),A.foundPossibleResultPoint(new Ue(K,m))}let O=this.decodeDataCharacter(o,k,!0),F=this.decodeDataCharacter(o,k,!1);return new Fr(1597*O.getValue()+F.getValue(),O.getChecksumPortion()+4*F.getChecksumPortion(),k)}catch{return null}}decodeDataCharacter(o,h,m){let b=this.getDataCharacterCounters();for(let qe=0;qe<b.length;qe++)b[qe]=0;if(m)jt.recordPatternInReverse(o,h.getStartEnd()[0],b);else{jt.recordPattern(o,h.getStartEnd()[1]+1,b);for(let qe=0,nt=b.length-1;qe<nt;qe++,nt--){let At=b[qe];b[qe]=b[nt],b[nt]=At}}let y=m?16:15,k=Se.sum(new Int32Array(b))/y,A=this.getOddCounts(),O=this.getEvenCounts(),F=this.getOddRoundingErrors(),K=this.getEvenRoundingErrors();for(let qe=0;qe<b.length;qe++){let nt=b[qe]/k,At=Math.floor(nt+.5);At<1?At=1:At>8&&(At=8);let St=Math.floor(qe/2);(qe&1)===0?(A[St]=At,F[St]=nt-At):(O[St]=At,K[St]=nt-At)}this.adjustOddEvenCounts(m,y);let ne=0,ce=0;for(let qe=A.length-1;qe>=0;qe--)ce*=9,ce+=A[qe],ne+=A[qe];let ke=0,je=0;for(let qe=O.length-1;qe>=0;qe--)ke*=9,ke+=O[qe],je+=O[qe];let Fe=ce+3*ke;if(m){if((ne&1)!==0||ne>12||ne<4)throw new se;let qe=(12-ne)/2,nt=pt.OUTSIDE_ODD_WIDEST[qe],At=9-nt,St=Pt.getRSSvalue(A,nt,!1),vt=Pt.getRSSvalue(O,At,!0),Er=pt.OUTSIDE_EVEN_TOTAL_SUBSET[qe],ur=pt.OUTSIDE_GSUM[qe];return new Nt(St*Er+vt+ur,Fe)}else{if((je&1)!==0||je>10||je<4)throw new se;let qe=(10-je)/2,nt=pt.INSIDE_ODD_WIDEST[qe],At=9-nt,St=Pt.getRSSvalue(A,nt,!0),vt=Pt.getRSSvalue(O,At,!1),Er=pt.INSIDE_ODD_TOTAL_SUBSET[qe],ur=pt.INSIDE_GSUM[qe];return new Nt(vt*Er+St+ur,Fe)}}findFinderPattern(o,h){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let b=o.getSize(),y=!1,k=0;for(;k<b&&(y=!o.get(k),h!==y);)k++;let A=0,O=k;for(let F=k;F<b;F++)if(o.get(F)!==y)m[A]++;else{if(A===3){if(Ge.isFinderPattern(m))return[O,F];O+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,A--}else A++;m[A]=1,y=!y}throw new se}parseFoundFinderPattern(o,h,m,b){let y=o.get(b[0]),k=b[0]-1;for(;k>=0&&y!==o.get(k);)k--;k++;const A=b[0]-k,O=this.getDecodeFinderCounters(),F=new Int32Array(O.length);S.arraycopy(O,0,F,1,O.length-1),F[0]=A;const K=this.parseFinderValue(F,pt.FINDER_PATTERNS);let ne=k,ce=b[1];return m&&(ne=o.getSize()-1-ne,ce=o.getSize()-1-ce),new Dt(K,[k,b[1]],ne,ce,h)}adjustOddEvenCounts(o,h){let m=Se.sum(new Int32Array(this.getOddCounts())),b=Se.sum(new Int32Array(this.getEvenCounts())),y=!1,k=!1,A=!1,O=!1;o?(m>12?k=!0:m<4&&(y=!0),b>12?O=!0:b<4&&(A=!0)):(m>11?k=!0:m<5&&(y=!0),b>10?O=!0:b<4&&(A=!0));let F=m+b-h,K=(m&1)===(o?1:0),ne=(b&1)===1;if(F===1)if(K){if(ne)throw new se;k=!0}else{if(!ne)throw new se;O=!0}else if(F===-1)if(K){if(ne)throw new se;y=!0}else{if(!ne)throw new se;A=!0}else if(F===0){if(K){if(!ne)throw new se;m<b?(y=!0,O=!0):(k=!0,A=!0)}else if(ne)throw new se}else throw new se;if(y){if(k)throw new se;Ge.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(k&&Ge.decrement(this.getOddCounts(),this.getOddRoundingErrors()),A){if(O)throw new se;Ge.increment(this.getEvenCounts(),this.getOddRoundingErrors())}O&&Ge.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],pt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],pt.OUTSIDE_GSUM=[0,161,961,2015,2715],pt.INSIDE_GSUM=[0,336,1036,1516],pt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],pt.INSIDE_ODD_WIDEST=[2,4,6,8],pt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Sr extends jt{constructor(o,h){super(),this.readers=[],this.verbose=h===!0;const m=o?o.get(X.POSSIBLE_FORMATS):null,b=o&&o.get(X.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;m?((m.includes(ue.EAN_13)||m.includes(ue.UPC_A)||m.includes(ue.EAN_8)||m.includes(ue.UPC_E))&&this.readers.push(new Hr(o)),m.includes(ue.CODE_39)&&this.readers.push(new qt(b)),m.includes(ue.CODE_128)&&this.readers.push(new ft),m.includes(ue.ITF)&&this.readers.push(new Bt),m.includes(ue.RSS_14)&&this.readers.push(new pt),m.includes(ue.RSS_EXPANDED)&&this.readers.push(new ct(this.verbose))):(this.readers.push(new Hr(o)),this.readers.push(new qt),this.readers.push(new Hr(o)),this.readers.push(new ft),this.readers.push(new Bt),this.readers.push(new pt),this.readers.push(new ct(this.verbose)))}decodeRow(o,h,m){for(let b=0;b<this.readers.length;b++)try{return this.readers[b].decodeRow(o,h,m)}catch{}throw new se}reset(){this.readers.forEach(o=>o.reset())}}class ar extends te{constructor(o=500,h){super(new Sr(h),o,h)}}class dr{constructor(o,h,m){this.ecCodewords=o,this.ecBlocks=[h],m&&this.ecBlocks.push(m)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class or{constructor(o,h){this.count=o,this.dataCodewords=h}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class xr{constructor(o,h,m,b,y,k){this.versionNumber=o,this.symbolSizeRows=h,this.symbolSizeColumns=m,this.dataRegionSizeRows=b,this.dataRegionSizeColumns=y,this.ecBlocks=k;let A=0;const O=k.getECCodewords(),F=k.getECBlocks();for(let K of F)A+=K.getCount()*(K.getDataCodewords()+O);this.totalCodewords=A}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,h){if((o&1)!==0||(h&1)!==0)throw new M;for(let m of xr.VERSIONS)if(m.symbolSizeRows===o&&m.symbolSizeColumns===h)return m;throw new M}toString(){return""+this.versionNumber}static buildVersions(){return[new xr(1,10,10,8,8,new dr(5,new or(1,3))),new xr(2,12,12,10,10,new dr(7,new or(1,5))),new xr(3,14,14,12,12,new dr(10,new or(1,8))),new xr(4,16,16,14,14,new dr(12,new or(1,12))),new xr(5,18,18,16,16,new dr(14,new or(1,18))),new xr(6,20,20,18,18,new dr(18,new or(1,22))),new xr(7,22,22,20,20,new dr(20,new or(1,30))),new xr(8,24,24,22,22,new dr(24,new or(1,36))),new xr(9,26,26,24,24,new dr(28,new or(1,44))),new xr(10,32,32,14,14,new dr(36,new or(1,62))),new xr(11,36,36,16,16,new dr(42,new or(1,86))),new xr(12,40,40,18,18,new dr(48,new or(1,114))),new xr(13,44,44,20,20,new dr(56,new or(1,144))),new xr(14,48,48,22,22,new dr(68,new or(1,174))),new xr(15,52,52,24,24,new dr(42,new or(2,102))),new xr(16,64,64,14,14,new dr(56,new or(2,140))),new xr(17,72,72,16,16,new dr(36,new or(4,92))),new xr(18,80,80,18,18,new dr(48,new or(4,114))),new xr(19,88,88,20,20,new dr(56,new or(4,144))),new xr(20,96,96,22,22,new dr(68,new or(4,174))),new xr(21,104,104,24,24,new dr(56,new or(6,136))),new xr(22,120,120,18,18,new dr(68,new or(6,175))),new xr(23,132,132,20,20,new dr(62,new or(8,163))),new xr(24,144,144,22,22,new dr(62,new or(8,156),new or(2,155))),new xr(25,8,18,6,16,new dr(7,new or(1,5))),new xr(26,8,32,6,14,new dr(11,new or(1,10))),new xr(27,12,26,10,24,new dr(14,new or(1,16))),new xr(28,12,36,10,16,new dr(18,new or(1,22))),new xr(29,16,36,14,16,new dr(24,new or(1,32))),new xr(30,16,48,14,22,new dr(28,new or(1,49)))]}}xr.VERSIONS=xr.buildVersions();class ma{constructor(o){const h=o.getHeight();if(h<8||h>144||(h&1)!==0)throw new M;this.version=ma.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new q(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const h=o.getHeight(),m=o.getWidth();return xr.getVersionForDimensions(h,m)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let h=0,m=4,b=0;const y=this.mappingBitMatrix.getHeight(),k=this.mappingBitMatrix.getWidth();let A=!1,O=!1,F=!1,K=!1;do if(m===y&&b===0&&!A)o[h++]=this.readCorner1(y,k)&255,m-=2,b+=2,A=!0;else if(m===y-2&&b===0&&(k&3)!==0&&!O)o[h++]=this.readCorner2(y,k)&255,m-=2,b+=2,O=!0;else if(m===y+4&&b===2&&(k&7)===0&&!F)o[h++]=this.readCorner3(y,k)&255,m-=2,b+=2,F=!0;else if(m===y-2&&b===0&&(k&7)===4&&!K)o[h++]=this.readCorner4(y,k)&255,m-=2,b+=2,K=!0;else{do m<y&&b>=0&&!this.readMappingMatrix.get(b,m)&&(o[h++]=this.readUtah(m,b,y,k)&255),m-=2,b+=2;while(m>=0&&b<k);m+=1,b+=3;do m>=0&&b<k&&!this.readMappingMatrix.get(b,m)&&(o[h++]=this.readUtah(m,b,y,k)&255),m+=2,b-=2;while(m<y&&b>=0);m+=3,b+=1}while(m<y||b<k);if(h!==this.version.getTotalCodewords())throw new M;return o}readModule(o,h,m,b){return o<0&&(o+=m,h+=4-(m+4&7)),h<0&&(h+=b,o+=4-(b+4&7)),this.readMappingMatrix.set(h,o),this.mappingBitMatrix.get(h,o)}readUtah(o,h,m,b){let y=0;return this.readModule(o-2,h-2,m,b)&&(y|=1),y<<=1,this.readModule(o-2,h-1,m,b)&&(y|=1),y<<=1,this.readModule(o-1,h-2,m,b)&&(y|=1),y<<=1,this.readModule(o-1,h-1,m,b)&&(y|=1),y<<=1,this.readModule(o-1,h,m,b)&&(y|=1),y<<=1,this.readModule(o,h-2,m,b)&&(y|=1),y<<=1,this.readModule(o,h-1,m,b)&&(y|=1),y<<=1,this.readModule(o,h,m,b)&&(y|=1),y}readCorner1(o,h){let m=0;return this.readModule(o-1,0,o,h)&&(m|=1),m<<=1,this.readModule(o-1,1,o,h)&&(m|=1),m<<=1,this.readModule(o-1,2,o,h)&&(m|=1),m<<=1,this.readModule(0,h-2,o,h)&&(m|=1),m<<=1,this.readModule(0,h-1,o,h)&&(m|=1),m<<=1,this.readModule(1,h-1,o,h)&&(m|=1),m<<=1,this.readModule(2,h-1,o,h)&&(m|=1),m<<=1,this.readModule(3,h-1,o,h)&&(m|=1),m}readCorner2(o,h){let m=0;return this.readModule(o-3,0,o,h)&&(m|=1),m<<=1,this.readModule(o-2,0,o,h)&&(m|=1),m<<=1,this.readModule(o-1,0,o,h)&&(m|=1),m<<=1,this.readModule(0,h-4,o,h)&&(m|=1),m<<=1,this.readModule(0,h-3,o,h)&&(m|=1),m<<=1,this.readModule(0,h-2,o,h)&&(m|=1),m<<=1,this.readModule(0,h-1,o,h)&&(m|=1),m<<=1,this.readModule(1,h-1,o,h)&&(m|=1),m}readCorner3(o,h){let m=0;return this.readModule(o-1,0,o,h)&&(m|=1),m<<=1,this.readModule(o-1,h-1,o,h)&&(m|=1),m<<=1,this.readModule(0,h-3,o,h)&&(m|=1),m<<=1,this.readModule(0,h-2,o,h)&&(m|=1),m<<=1,this.readModule(0,h-1,o,h)&&(m|=1),m<<=1,this.readModule(1,h-3,o,h)&&(m|=1),m<<=1,this.readModule(1,h-2,o,h)&&(m|=1),m<<=1,this.readModule(1,h-1,o,h)&&(m|=1),m}readCorner4(o,h){let m=0;return this.readModule(o-3,0,o,h)&&(m|=1),m<<=1,this.readModule(o-2,0,o,h)&&(m|=1),m<<=1,this.readModule(o-1,0,o,h)&&(m|=1),m<<=1,this.readModule(0,h-2,o,h)&&(m|=1),m<<=1,this.readModule(0,h-1,o,h)&&(m|=1),m<<=1,this.readModule(1,h-1,o,h)&&(m|=1),m<<=1,this.readModule(2,h-1,o,h)&&(m|=1),m<<=1,this.readModule(3,h-1,o,h)&&(m|=1),m}extractDataRegion(o){const h=this.version.getSymbolSizeRows(),m=this.version.getSymbolSizeColumns();if(o.getHeight()!==h)throw new v("Dimension of bitMatrix must match the version size");const b=this.version.getDataRegionSizeRows(),y=this.version.getDataRegionSizeColumns(),k=h/b|0,A=m/y|0,O=k*b,F=A*y,K=new q(F,O);for(let ne=0;ne<k;++ne){const ce=ne*b;for(let ke=0;ke<A;++ke){const je=ke*y;for(let Fe=0;Fe<b;++Fe){const qe=ne*(b+2)+1+Fe,nt=ce+Fe;for(let At=0;At<y;++At){const St=ke*(y+2)+1+At;if(o.get(St,qe)){const vt=je+At;K.set(vt,nt)}}}}}return K}}class Dl{constructor(o,h){this.numDataCodewords=o,this.codewords=h}static getDataBlocks(o,h){const m=h.getECBlocks();let b=0;const y=m.getECBlocks();for(let Fe of y)b+=Fe.getCount();const k=new Array(b);let A=0;for(let Fe of y)for(let qe=0;qe<Fe.getCount();qe++){const nt=Fe.getDataCodewords(),At=m.getECCodewords()+nt;k[A++]=new Dl(nt,new Uint8Array(At))}const F=k[0].codewords.length-m.getECCodewords(),K=F-1;let ne=0;for(let Fe=0;Fe<K;Fe++)for(let qe=0;qe<A;qe++)k[qe].codewords[Fe]=o[ne++];const ce=h.getVersionNumber()===24,ke=ce?8:A;for(let Fe=0;Fe<ke;Fe++)k[Fe].codewords[F-1]=o[ne++];const je=k[0].codewords.length;for(let Fe=F;Fe<je;Fe++)for(let qe=0;qe<A;qe++){const nt=ce?(qe+8)%A:qe,At=ce&&nt>7?Fe-1:Fe;k[nt].codewords[At]=o[ne++]}if(ne!==o.length)throw new v;return k}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class fs{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new v(""+o);let h=0,m=this.bitOffset,b=this.byteOffset;const y=this.bytes;if(m>0){const k=8-m,A=o<k?o:k,O=k-A,F=255>>8-A<<O;h=(y[b]&F)>>O,o-=A,m+=A,m===8&&(m=0,b++)}if(o>0){for(;o>=8;)h=h<<8|y[b]&255,b++,o-=8;if(o>0){const k=8-o,A=255>>k<<k;h=h<<o|(y[b]&A)>>k,m+=o}}return this.bitOffset=m,this.byteOffset=b,h}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Gr;(function(re){re[re.PAD_ENCODE=0]="PAD_ENCODE",re[re.ASCII_ENCODE=1]="ASCII_ENCODE",re[re.C40_ENCODE=2]="C40_ENCODE",re[re.TEXT_ENCODE=3]="TEXT_ENCODE",re[re.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",re[re.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",re[re.BASE256_ENCODE=6]="BASE256_ENCODE"})(Gr||(Gr={}));class ii{static decode(o){const h=new fs(o),m=new he,b=new he,y=new Array;let k=Gr.ASCII_ENCODE;do if(k===Gr.ASCII_ENCODE)k=this.decodeAsciiSegment(h,m,b);else{switch(k){case Gr.C40_ENCODE:this.decodeC40Segment(h,m);break;case Gr.TEXT_ENCODE:this.decodeTextSegment(h,m);break;case Gr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(h,m);break;case Gr.EDIFACT_ENCODE:this.decodeEdifactSegment(h,m);break;case Gr.BASE256_ENCODE:this.decodeBase256Segment(h,m,y);break;default:throw new M}k=Gr.ASCII_ENCODE}while(k!==Gr.PAD_ENCODE&&h.available()>0);return b.length()>0&&m.append(b.toString()),new Ne(o,m.toString(),y.length===0?null:y,null)}static decodeAsciiSegment(o,h,m){let b=!1;do{let y=o.readBits(8);if(y===0)throw new M;if(y<=128)return b&&(y+=128),h.append(String.fromCharCode(y-1)),Gr.ASCII_ENCODE;if(y===129)return Gr.PAD_ENCODE;if(y<=229){const k=y-130;k<10&&h.append("0"),h.append(""+k)}else switch(y){case 230:return Gr.C40_ENCODE;case 231:return Gr.BASE256_ENCODE;case 232:h.append("");break;case 233:case 234:break;case 235:b=!0;break;case 236:h.append("[)>05"),m.insert(0,"");break;case 237:h.append("[)>06"),m.insert(0,"");break;case 238:return Gr.ANSIX12_ENCODE;case 239:return Gr.TEXT_ENCODE;case 240:return Gr.EDIFACT_ENCODE;case 241:break;default:if(y!==254||o.available()!==0)throw new M;break}}while(o.available()>0);return Gr.ASCII_ENCODE}static decodeC40Segment(o,h){let m=!1;const b=[];let y=0;do{if(o.available()===8)return;const k=o.readBits(8);if(k===254)return;this.parseTwoBytes(k,o.readBits(8),b);for(let A=0;A<3;A++){const O=b[A];switch(y){case 0:if(O<3)y=O+1;else if(O<this.C40_BASIC_SET_CHARS.length){const F=this.C40_BASIC_SET_CHARS[O];m?(h.append(String.fromCharCode(F.charCodeAt(0)+128)),m=!1):h.append(F)}else throw new M;break;case 1:m?(h.append(String.fromCharCode(O+128)),m=!1):h.append(String.fromCharCode(O)),y=0;break;case 2:if(O<this.C40_SHIFT2_SET_CHARS.length){const F=this.C40_SHIFT2_SET_CHARS[O];m?(h.append(String.fromCharCode(F.charCodeAt(0)+128)),m=!1):h.append(F)}else switch(O){case 27:h.append("");break;case 30:m=!0;break;default:throw new M}y=0;break;case 3:m?(h.append(String.fromCharCode(O+224)),m=!1):h.append(String.fromCharCode(O+96)),y=0;break;default:throw new M}}}while(o.available()>0)}static decodeTextSegment(o,h){let m=!1,b=[],y=0;do{if(o.available()===8)return;const k=o.readBits(8);if(k===254)return;this.parseTwoBytes(k,o.readBits(8),b);for(let A=0;A<3;A++){const O=b[A];switch(y){case 0:if(O<3)y=O+1;else if(O<this.TEXT_BASIC_SET_CHARS.length){const F=this.TEXT_BASIC_SET_CHARS[O];m?(h.append(String.fromCharCode(F.charCodeAt(0)+128)),m=!1):h.append(F)}else throw new M;break;case 1:m?(h.append(String.fromCharCode(O+128)),m=!1):h.append(String.fromCharCode(O)),y=0;break;case 2:if(O<this.TEXT_SHIFT2_SET_CHARS.length){const F=this.TEXT_SHIFT2_SET_CHARS[O];m?(h.append(String.fromCharCode(F.charCodeAt(0)+128)),m=!1):h.append(F)}else switch(O){case 27:h.append("");break;case 30:m=!0;break;default:throw new M}y=0;break;case 3:if(O<this.TEXT_SHIFT3_SET_CHARS.length){const F=this.TEXT_SHIFT3_SET_CHARS[O];m?(h.append(String.fromCharCode(F.charCodeAt(0)+128)),m=!1):h.append(F),y=0}else throw new M;break;default:throw new M}}}while(o.available()>0)}static decodeAnsiX12Segment(o,h){const m=[];do{if(o.available()===8)return;const b=o.readBits(8);if(b===254)return;this.parseTwoBytes(b,o.readBits(8),m);for(let y=0;y<3;y++){const k=m[y];switch(k){case 0:h.append("\r");break;case 1:h.append("*");break;case 2:h.append(">");break;case 3:h.append(" ");break;default:if(k<14)h.append(String.fromCharCode(k+44));else if(k<40)h.append(String.fromCharCode(k+51));else throw new M;break}}}while(o.available()>0)}static parseTwoBytes(o,h,m){let b=(o<<8)+h-1,y=Math.floor(b/1600);m[0]=y,b-=y*1600,y=Math.floor(b/40),m[1]=y,m[2]=b-y*40}static decodeEdifactSegment(o,h){do{if(o.available()<=16)return;for(let m=0;m<4;m++){let b=o.readBits(6);if(b===31){const y=8-o.getBitOffset();y!==8&&o.readBits(y);return}(b&32)===0&&(b|=64),h.append(String.fromCharCode(b))}}while(o.available()>0)}static decodeBase256Segment(o,h,m){let b=1+o.getByteOffset();const y=this.unrandomize255State(o.readBits(8),b++);let k;if(y===0?k=o.available()/8|0:y<250?k=y:k=250*(y-249)+this.unrandomize255State(o.readBits(8),b++),k<0)throw new M;const A=new Uint8Array(k);for(let O=0;O<k;O++){if(o.available()<8)throw new M;A[O]=this.unrandomize255State(o.readBits(8),b++)}m.push(A);try{h.append(Z.decode(A,H.ISO88591))}catch(O){throw new Me("Platform does not support required encoding: "+O.message)}}static unrandomize255State(o,h){const m=149*h%255+1,b=o-m;return b>=0?b:b+256}}ii.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ii.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ii.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ii.TEXT_SHIFT2_SET_CHARS=ii.C40_SHIFT2_SET_CHARS,ii.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class em{constructor(){this.rsDecoder=new Ae(Ce.DATA_MATRIX_FIELD_256)}decode(o){const h=new ma(o),m=h.getVersion(),b=h.readCodewords(),y=Dl.getDataBlocks(b,m);let k=0;for(let F of y)k+=F.getNumDataCodewords();const A=new Uint8Array(k),O=y.length;for(let F=0;F<O;F++){const K=y[F],ne=K.getCodewords(),ce=K.getNumDataCodewords();this.correctErrors(ne,ce);for(let ke=0;ke<ce;ke++)A[ke*O+F]=ne[ke]}return ii.decode(A)}correctErrors(o,h){const m=new Int32Array(o);try{this.rsDecoder.decode(m,o.length-h)}catch{throw new E}for(let b=0;b<h;b++)o[b]=m[b]}}class bn{constructor(o){this.image=o,this.rectangleDetector=new We(this.image)}detect(){const o=this.rectangleDetector.detect();let h=this.detectSolid1(o);if(h=this.detectSolid2(h),h[3]=this.correctTopRight(h),!h[3])throw new se;h=this.shiftToModuleCenter(h);const m=h[0],b=h[1],y=h[2],k=h[3];let A=this.transitionsBetween(m,k)+1,O=this.transitionsBetween(y,k)+1;(A&1)===1&&(A+=1),(O&1)===1&&(O+=1),4*A<7*O&&4*O<7*A&&(A=O=Math.max(A,O));let F=bn.sampleGrid(this.image,m,b,y,k,A,O);return new He(F,[m,b,y,k])}static shiftPoint(o,h,m){let b=(h.getX()-o.getX())/(m+1),y=(h.getY()-o.getY())/(m+1);return new Ue(o.getX()+b,o.getY()+y)}static moveAway(o,h,m){let b=o.getX(),y=o.getY();return b<h?b-=1:b+=1,y<m?y-=1:y+=1,new Ue(b,y)}detectSolid1(o){let h=o[0],m=o[1],b=o[3],y=o[2],k=this.transitionsBetween(h,m),A=this.transitionsBetween(m,b),O=this.transitionsBetween(b,y),F=this.transitionsBetween(y,h),K=k,ne=[y,h,m,b];return K>A&&(K=A,ne[0]=h,ne[1]=m,ne[2]=b,ne[3]=y),K>O&&(K=O,ne[0]=m,ne[1]=b,ne[2]=y,ne[3]=h),K>F&&(ne[0]=b,ne[1]=y,ne[2]=h,ne[3]=m),ne}detectSolid2(o){let h=o[0],m=o[1],b=o[2],y=o[3],k=this.transitionsBetween(h,y),A=bn.shiftPoint(m,b,(k+1)*4),O=bn.shiftPoint(b,m,(k+1)*4),F=this.transitionsBetween(A,h),K=this.transitionsBetween(O,y);return F<K?(o[0]=h,o[1]=m,o[2]=b,o[3]=y):(o[0]=m,o[1]=b,o[2]=y,o[3]=h),o}correctTopRight(o){let h=o[0],m=o[1],b=o[2],y=o[3],k=this.transitionsBetween(h,y),A=this.transitionsBetween(m,y),O=bn.shiftPoint(h,m,(A+1)*4),F=bn.shiftPoint(b,m,(k+1)*4);k=this.transitionsBetween(O,y),A=this.transitionsBetween(F,y);let K=new Ue(y.getX()+(b.getX()-m.getX())/(k+1),y.getY()+(b.getY()-m.getY())/(k+1)),ne=new Ue(y.getX()+(h.getX()-m.getX())/(A+1),y.getY()+(h.getY()-m.getY())/(A+1));if(!this.isValid(K))return this.isValid(ne)?ne:null;if(!this.isValid(ne))return K;let ce=this.transitionsBetween(O,K)+this.transitionsBetween(F,K),ke=this.transitionsBetween(O,ne)+this.transitionsBetween(F,ne);return ce>ke?K:ne}shiftToModuleCenter(o){let h=o[0],m=o[1],b=o[2],y=o[3],k=this.transitionsBetween(h,y)+1,A=this.transitionsBetween(b,y)+1,O=bn.shiftPoint(h,m,A*4),F=bn.shiftPoint(b,m,k*4);k=this.transitionsBetween(O,y)+1,A=this.transitionsBetween(F,y)+1,(k&1)===1&&(k+=1),(A&1)===1&&(A+=1);let K=(h.getX()+m.getX()+b.getX()+y.getX())/4,ne=(h.getY()+m.getY()+b.getY()+y.getY())/4;h=bn.moveAway(h,K,ne),m=bn.moveAway(m,K,ne),b=bn.moveAway(b,K,ne),y=bn.moveAway(y,K,ne);let ce,ke;return O=bn.shiftPoint(h,m,A*4),O=bn.shiftPoint(O,y,k*4),ce=bn.shiftPoint(m,h,A*4),ce=bn.shiftPoint(ce,b,k*4),F=bn.shiftPoint(b,y,A*4),F=bn.shiftPoint(F,m,k*4),ke=bn.shiftPoint(y,b,A*4),ke=bn.shiftPoint(ke,h,k*4),[O,ce,F,ke]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,h,m,b,y,k,A){return Ye.getInstance().sampleGrid(o,k,A,.5,.5,k-.5,.5,k-.5,A-.5,.5,A-.5,h.getX(),h.getY(),y.getX(),y.getY(),b.getX(),b.getY(),m.getX(),m.getY())}transitionsBetween(o,h){let m=Math.trunc(o.getX()),b=Math.trunc(o.getY()),y=Math.trunc(h.getX()),k=Math.trunc(h.getY()),A=Math.abs(k-b)>Math.abs(y-m);if(A){let Fe=m;m=b,b=Fe,Fe=y,y=k,k=Fe}let O=Math.abs(y-m),F=Math.abs(k-b),K=-O/2,ne=b<k?1:-1,ce=m<y?1:-1,ke=0,je=this.image.get(A?b:m,A?m:b);for(let Fe=m,qe=b;Fe!==y;Fe+=ce){let nt=this.image.get(A?qe:Fe,A?Fe:qe);if(nt!==je&&(ke++,je=nt),K+=F,K>0){if(qe===k)break;qe+=ne,K-=O}}return ke}}class li{constructor(){this.decoder=new em}decode(o,h=null){let m,b;if(h!=null&&h.has(X.PURE_BARCODE)){const F=li.extractPureBits(o.getBlackMatrix());m=this.decoder.decode(F),b=li.NO_POINTS}else{const F=new bn(o.getBlackMatrix()).detect();m=this.decoder.decode(F.getBits()),b=F.getPoints()}const y=m.getRawBytes(),k=new U(m.getText(),y,8*y.length,b,ue.DATA_MATRIX,S.currentTimeMillis()),A=m.getByteSegments();A!=null&&k.putMetadata(De.BYTE_SEGMENTS,A);const O=m.getECLevel();return O!=null&&k.putMetadata(De.ERROR_CORRECTION_LEVEL,O),k}reset(){}static extractPureBits(o){const h=o.getTopLeftOnBit(),m=o.getBottomRightOnBit();if(h==null||m==null)throw new se;const b=this.moduleSize(h,o);let y=h[1];const k=m[1];let A=h[0];const F=(m[0]-A+1)/b,K=(k-y+1)/b;if(F<=0||K<=0)throw new se;const ne=b/2;y+=ne,A+=ne;const ce=new q(F,K);for(let ke=0;ke<K;ke++){const je=y+ke*b;for(let Fe=0;Fe<F;Fe++)o.get(A+Fe*b,je)&&ce.set(Fe,ke)}return ce}static moduleSize(o,h){const m=h.getWidth();let b=o[0];const y=o[1];for(;b<m&&h.get(b,y);)b++;if(b===m)throw new se;const k=b-o[0];if(k===0)throw new se;return k}}li.NO_POINTS=[];class Bc extends te{constructor(o=500){super(new li,o)}}var Ml;(function(re){re[re.L=0]="L",re[re.M=1]="M",re[re.Q=2]="Q",re[re.H=3]="H"})(Ml||(Ml={}));class Nr{constructor(o,h,m){this.value=o,this.stringValue=h,this.bits=m,Nr.FOR_BITS.set(m,this),Nr.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return Nr.L;case"M":return Nr.M;case"Q":return Nr.Q;case"H":return Nr.H;default:throw new g(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof Nr))return!1;const h=o;return this.value===h.value}static forBits(o){if(o<0||o>=Nr.FOR_BITS.size)throw new v;return Nr.FOR_BITS.get(o)}}Nr.FOR_BITS=new Map,Nr.FOR_VALUE=new Map,Nr.L=new Nr(Ml.L,"L",1),Nr.M=new Nr(Ml.M,"M",0),Nr.Q=new Nr(Ml.Q,"Q",3),Nr.H=new Nr(Ml.H,"H",2);class Jn{constructor(o){this.errorCorrectionLevel=Nr.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,h){return I.bitCount(o^h)}static decodeFormatInformation(o,h){const m=Jn.doDecodeFormatInformation(o,h);return m!==null?m:Jn.doDecodeFormatInformation(o^Jn.FORMAT_INFO_MASK_QR,h^Jn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,h){let m=Number.MAX_SAFE_INTEGER,b=0;for(const y of Jn.FORMAT_INFO_DECODE_LOOKUP){const k=y[0];if(k===o||k===h)return new Jn(y[1]);let A=Jn.numBitsDiffering(o,k);A<m&&(b=y[1],m=A),o!==h&&(A=Jn.numBitsDiffering(h,k),A<m&&(b=y[1],m=A))}return m<=3?new Jn(b):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof Jn))return!1;const h=o;return this.errorCorrectionLevel===h.errorCorrectionLevel&&this.dataMask===h.dataMask}}Jn.FORMAT_INFO_MASK_QR=21522,Jn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class $e{constructor(o,...h){this.ecCodewordsPerBlock=o,this.ecBlocks=h}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const h=this.ecBlocks;for(const m of h)o+=m.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class _e{constructor(o,h){this.count=o,this.dataCodewords=h}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Gt{constructor(o,h,...m){this.versionNumber=o,this.alignmentPatternCenters=h,this.ecBlocks=m;let b=0;const y=m[0].getECCodewordsPerBlock(),k=m[0].getECBlocks();for(const A of k)b+=A.getCount()*(A.getDataCodewords()+y);this.totalCodewords=b}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new M;try{return this.getVersionForNumber((o-17)/4)}catch{throw new M}}static getVersionForNumber(o){if(o<1||o>40)throw new v;return Gt.VERSIONS[o-1]}static decodeVersionInformation(o){let h=Number.MAX_SAFE_INTEGER,m=0;for(let b=0;b<Gt.VERSION_DECODE_INFO.length;b++){const y=Gt.VERSION_DECODE_INFO[b];if(y===o)return Gt.getVersionForNumber(b+7);const k=Jn.numBitsDiffering(o,y);k<h&&(m=b+7,h=k)}return h<=3?Gt.getVersionForNumber(m):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),h=new q(o);h.setRegion(0,0,9,9),h.setRegion(o-8,0,8,9),h.setRegion(0,o-8,9,8);const m=this.alignmentPatternCenters.length;for(let b=0;b<m;b++){const y=this.alignmentPatternCenters[b]-2;for(let k=0;k<m;k++)b===0&&(k===0||k===m-1)||b===m-1&&k===0||h.setRegion(this.alignmentPatternCenters[k]-2,y,5,5)}return h.setRegion(6,9,1,o-17),h.setRegion(9,6,o-17,1),this.versionNumber>6&&(h.setRegion(o-11,0,3,6),h.setRegion(0,o-11,6,3)),h}toString(){return""+this.versionNumber}}Gt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Gt.VERSIONS=[new Gt(1,new Int32Array(0),new $e(7,new _e(1,19)),new $e(10,new _e(1,16)),new $e(13,new _e(1,13)),new $e(17,new _e(1,9))),new Gt(2,Int32Array.from([6,18]),new $e(10,new _e(1,34)),new $e(16,new _e(1,28)),new $e(22,new _e(1,22)),new $e(28,new _e(1,16))),new Gt(3,Int32Array.from([6,22]),new $e(15,new _e(1,55)),new $e(26,new _e(1,44)),new $e(18,new _e(2,17)),new $e(22,new _e(2,13))),new Gt(4,Int32Array.from([6,26]),new $e(20,new _e(1,80)),new $e(18,new _e(2,32)),new $e(26,new _e(2,24)),new $e(16,new _e(4,9))),new Gt(5,Int32Array.from([6,30]),new $e(26,new _e(1,108)),new $e(24,new _e(2,43)),new $e(18,new _e(2,15),new _e(2,16)),new $e(22,new _e(2,11),new _e(2,12))),new Gt(6,Int32Array.from([6,34]),new $e(18,new _e(2,68)),new $e(16,new _e(4,27)),new $e(24,new _e(4,19)),new $e(28,new _e(4,15))),new Gt(7,Int32Array.from([6,22,38]),new $e(20,new _e(2,78)),new $e(18,new _e(4,31)),new $e(18,new _e(2,14),new _e(4,15)),new $e(26,new _e(4,13),new _e(1,14))),new Gt(8,Int32Array.from([6,24,42]),new $e(24,new _e(2,97)),new $e(22,new _e(2,38),new _e(2,39)),new $e(22,new _e(4,18),new _e(2,19)),new $e(26,new _e(4,14),new _e(2,15))),new Gt(9,Int32Array.from([6,26,46]),new $e(30,new _e(2,116)),new $e(22,new _e(3,36),new _e(2,37)),new $e(20,new _e(4,16),new _e(4,17)),new $e(24,new _e(4,12),new _e(4,13))),new Gt(10,Int32Array.from([6,28,50]),new $e(18,new _e(2,68),new _e(2,69)),new $e(26,new _e(4,43),new _e(1,44)),new $e(24,new _e(6,19),new _e(2,20)),new $e(28,new _e(6,15),new _e(2,16))),new Gt(11,Int32Array.from([6,30,54]),new $e(20,new _e(4,81)),new $e(30,new _e(1,50),new _e(4,51)),new $e(28,new _e(4,22),new _e(4,23)),new $e(24,new _e(3,12),new _e(8,13))),new Gt(12,Int32Array.from([6,32,58]),new $e(24,new _e(2,92),new _e(2,93)),new $e(22,new _e(6,36),new _e(2,37)),new $e(26,new _e(4,20),new _e(6,21)),new $e(28,new _e(7,14),new _e(4,15))),new Gt(13,Int32Array.from([6,34,62]),new $e(26,new _e(4,107)),new $e(22,new _e(8,37),new _e(1,38)),new $e(24,new _e(8,20),new _e(4,21)),new $e(22,new _e(12,11),new _e(4,12))),new Gt(14,Int32Array.from([6,26,46,66]),new $e(30,new _e(3,115),new _e(1,116)),new $e(24,new _e(4,40),new _e(5,41)),new $e(20,new _e(11,16),new _e(5,17)),new $e(24,new _e(11,12),new _e(5,13))),new Gt(15,Int32Array.from([6,26,48,70]),new $e(22,new _e(5,87),new _e(1,88)),new $e(24,new _e(5,41),new _e(5,42)),new $e(30,new _e(5,24),new _e(7,25)),new $e(24,new _e(11,12),new _e(7,13))),new Gt(16,Int32Array.from([6,26,50,74]),new $e(24,new _e(5,98),new _e(1,99)),new $e(28,new _e(7,45),new _e(3,46)),new $e(24,new _e(15,19),new _e(2,20)),new $e(30,new _e(3,15),new _e(13,16))),new Gt(17,Int32Array.from([6,30,54,78]),new $e(28,new _e(1,107),new _e(5,108)),new $e(28,new _e(10,46),new _e(1,47)),new $e(28,new _e(1,22),new _e(15,23)),new $e(28,new _e(2,14),new _e(17,15))),new Gt(18,Int32Array.from([6,30,56,82]),new $e(30,new _e(5,120),new _e(1,121)),new $e(26,new _e(9,43),new _e(4,44)),new $e(28,new _e(17,22),new _e(1,23)),new $e(28,new _e(2,14),new _e(19,15))),new Gt(19,Int32Array.from([6,30,58,86]),new $e(28,new _e(3,113),new _e(4,114)),new $e(26,new _e(3,44),new _e(11,45)),new $e(26,new _e(17,21),new _e(4,22)),new $e(26,new _e(9,13),new _e(16,14))),new Gt(20,Int32Array.from([6,34,62,90]),new $e(28,new _e(3,107),new _e(5,108)),new $e(26,new _e(3,41),new _e(13,42)),new $e(30,new _e(15,24),new _e(5,25)),new $e(28,new _e(15,15),new _e(10,16))),new Gt(21,Int32Array.from([6,28,50,72,94]),new $e(28,new _e(4,116),new _e(4,117)),new $e(26,new _e(17,42)),new $e(28,new _e(17,22),new _e(6,23)),new $e(30,new _e(19,16),new _e(6,17))),new Gt(22,Int32Array.from([6,26,50,74,98]),new $e(28,new _e(2,111),new _e(7,112)),new $e(28,new _e(17,46)),new $e(30,new _e(7,24),new _e(16,25)),new $e(24,new _e(34,13))),new Gt(23,Int32Array.from([6,30,54,78,102]),new $e(30,new _e(4,121),new _e(5,122)),new $e(28,new _e(4,47),new _e(14,48)),new $e(30,new _e(11,24),new _e(14,25)),new $e(30,new _e(16,15),new _e(14,16))),new Gt(24,Int32Array.from([6,28,54,80,106]),new $e(30,new _e(6,117),new _e(4,118)),new $e(28,new _e(6,45),new _e(14,46)),new $e(30,new _e(11,24),new _e(16,25)),new $e(30,new _e(30,16),new _e(2,17))),new Gt(25,Int32Array.from([6,32,58,84,110]),new $e(26,new _e(8,106),new _e(4,107)),new $e(28,new _e(8,47),new _e(13,48)),new $e(30,new _e(7,24),new _e(22,25)),new $e(30,new _e(22,15),new _e(13,16))),new Gt(26,Int32Array.from([6,30,58,86,114]),new $e(28,new _e(10,114),new _e(2,115)),new $e(28,new _e(19,46),new _e(4,47)),new $e(28,new _e(28,22),new _e(6,23)),new $e(30,new _e(33,16),new _e(4,17))),new Gt(27,Int32Array.from([6,34,62,90,118]),new $e(30,new _e(8,122),new _e(4,123)),new $e(28,new _e(22,45),new _e(3,46)),new $e(30,new _e(8,23),new _e(26,24)),new $e(30,new _e(12,15),new _e(28,16))),new Gt(28,Int32Array.from([6,26,50,74,98,122]),new $e(30,new _e(3,117),new _e(10,118)),new $e(28,new _e(3,45),new _e(23,46)),new $e(30,new _e(4,24),new _e(31,25)),new $e(30,new _e(11,15),new _e(31,16))),new Gt(29,Int32Array.from([6,30,54,78,102,126]),new $e(30,new _e(7,116),new _e(7,117)),new $e(28,new _e(21,45),new _e(7,46)),new $e(30,new _e(1,23),new _e(37,24)),new $e(30,new _e(19,15),new _e(26,16))),new Gt(30,Int32Array.from([6,26,52,78,104,130]),new $e(30,new _e(5,115),new _e(10,116)),new $e(28,new _e(19,47),new _e(10,48)),new $e(30,new _e(15,24),new _e(25,25)),new $e(30,new _e(23,15),new _e(25,16))),new Gt(31,Int32Array.from([6,30,56,82,108,134]),new $e(30,new _e(13,115),new _e(3,116)),new $e(28,new _e(2,46),new _e(29,47)),new $e(30,new _e(42,24),new _e(1,25)),new $e(30,new _e(23,15),new _e(28,16))),new Gt(32,Int32Array.from([6,34,60,86,112,138]),new $e(30,new _e(17,115)),new $e(28,new _e(10,46),new _e(23,47)),new $e(30,new _e(10,24),new _e(35,25)),new $e(30,new _e(19,15),new _e(35,16))),new Gt(33,Int32Array.from([6,30,58,86,114,142]),new $e(30,new _e(17,115),new _e(1,116)),new $e(28,new _e(14,46),new _e(21,47)),new $e(30,new _e(29,24),new _e(19,25)),new $e(30,new _e(11,15),new _e(46,16))),new Gt(34,Int32Array.from([6,34,62,90,118,146]),new $e(30,new _e(13,115),new _e(6,116)),new $e(28,new _e(14,46),new _e(23,47)),new $e(30,new _e(44,24),new _e(7,25)),new $e(30,new _e(59,16),new _e(1,17))),new Gt(35,Int32Array.from([6,30,54,78,102,126,150]),new $e(30,new _e(12,121),new _e(7,122)),new $e(28,new _e(12,47),new _e(26,48)),new $e(30,new _e(39,24),new _e(14,25)),new $e(30,new _e(22,15),new _e(41,16))),new Gt(36,Int32Array.from([6,24,50,76,102,128,154]),new $e(30,new _e(6,121),new _e(14,122)),new $e(28,new _e(6,47),new _e(34,48)),new $e(30,new _e(46,24),new _e(10,25)),new $e(30,new _e(2,15),new _e(64,16))),new Gt(37,Int32Array.from([6,28,54,80,106,132,158]),new $e(30,new _e(17,122),new _e(4,123)),new $e(28,new _e(29,46),new _e(14,47)),new $e(30,new _e(49,24),new _e(10,25)),new $e(30,new _e(24,15),new _e(46,16))),new Gt(38,Int32Array.from([6,32,58,84,110,136,162]),new $e(30,new _e(4,122),new _e(18,123)),new $e(28,new _e(13,46),new _e(32,47)),new $e(30,new _e(48,24),new _e(14,25)),new $e(30,new _e(42,15),new _e(32,16))),new Gt(39,Int32Array.from([6,26,54,82,110,138,166]),new $e(30,new _e(20,117),new _e(4,118)),new $e(28,new _e(40,47),new _e(7,48)),new $e(30,new _e(43,24),new _e(22,25)),new $e(30,new _e(10,15),new _e(67,16))),new Gt(40,Int32Array.from([6,30,58,86,114,142,170]),new $e(30,new _e(19,118),new _e(6,119)),new $e(28,new _e(18,47),new _e(31,48)),new $e(30,new _e(34,24),new _e(34,25)),new $e(30,new _e(20,15),new _e(61,16)))];var Wn;(function(re){re[re.DATA_MASK_000=0]="DATA_MASK_000",re[re.DATA_MASK_001=1]="DATA_MASK_001",re[re.DATA_MASK_010=2]="DATA_MASK_010",re[re.DATA_MASK_011=3]="DATA_MASK_011",re[re.DATA_MASK_100=4]="DATA_MASK_100",re[re.DATA_MASK_101=5]="DATA_MASK_101",re[re.DATA_MASK_110=6]="DATA_MASK_110",re[re.DATA_MASK_111=7]="DATA_MASK_111"})(Wn||(Wn={}));class Ga{constructor(o,h){this.value=o,this.isMasked=h}unmaskBitMatrix(o,h){for(let m=0;m<h;m++)for(let b=0;b<h;b++)this.isMasked(m,b)&&o.flip(b,m)}}Ga.values=new Map([[Wn.DATA_MASK_000,new Ga(Wn.DATA_MASK_000,(re,o)=>(re+o&1)===0)],[Wn.DATA_MASK_001,new Ga(Wn.DATA_MASK_001,(re,o)=>(re&1)===0)],[Wn.DATA_MASK_010,new Ga(Wn.DATA_MASK_010,(re,o)=>o%3===0)],[Wn.DATA_MASK_011,new Ga(Wn.DATA_MASK_011,(re,o)=>(re+o)%3===0)],[Wn.DATA_MASK_100,new Ga(Wn.DATA_MASK_100,(re,o)=>(Math.floor(re/2)+Math.floor(o/3)&1)===0)],[Wn.DATA_MASK_101,new Ga(Wn.DATA_MASK_101,(re,o)=>re*o%6===0)],[Wn.DATA_MASK_110,new Ga(Wn.DATA_MASK_110,(re,o)=>re*o%6<3)],[Wn.DATA_MASK_111,new Ga(Wn.DATA_MASK_111,(re,o)=>(re+o+re*o%3&1)===0)]]);class Fl{constructor(o){const h=o.getHeight();if(h<21||(h&3)!==1)throw new M;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let y=0;y<6;y++)o=this.copyBit(y,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let y=5;y>=0;y--)o=this.copyBit(8,y,o);const h=this.bitMatrix.getHeight();let m=0;const b=h-7;for(let y=h-1;y>=b;y--)m=this.copyBit(8,y,m);for(let y=h-8;y<h;y++)m=this.copyBit(y,8,m);if(this.parsedFormatInfo=Jn.decodeFormatInformation(o,m),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new M}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),h=Math.floor((o-17)/4);if(h<=6)return Gt.getVersionForNumber(h);let m=0;const b=o-11;for(let k=5;k>=0;k--)for(let A=o-9;A>=b;A--)m=this.copyBit(A,k,m);let y=Gt.decodeVersionInformation(m);if(y!==null&&y.getDimensionForVersion()===o)return this.parsedVersion=y,y;m=0;for(let k=5;k>=0;k--)for(let A=o-9;A>=b;A--)m=this.copyBit(k,A,m);if(y=Gt.decodeVersionInformation(m),y!==null&&y.getDimensionForVersion()===o)return this.parsedVersion=y,y;throw new M}copyBit(o,h,m){return(this.isMirror?this.bitMatrix.get(h,o):this.bitMatrix.get(o,h))?m<<1|1:m<<1}readCodewords(){const o=this.readFormatInformation(),h=this.readVersion(),m=Ga.values.get(o.getDataMask()),b=this.bitMatrix.getHeight();m.unmaskBitMatrix(this.bitMatrix,b);const y=h.buildFunctionPattern();let k=!0;const A=new Uint8Array(h.getTotalCodewords());let O=0,F=0,K=0;for(let ne=b-1;ne>0;ne-=2){ne===6&&ne--;for(let ce=0;ce<b;ce++){const ke=k?b-1-ce:ce;for(let je=0;je<2;je++)y.get(ne-je,ke)||(K++,F<<=1,this.bitMatrix.get(ne-je,ke)&&(F|=1),K===8&&(A[O++]=F,K=0,F=0))}k=!k}if(O!==h.getTotalCodewords())throw new M;return A}remask(){if(this.parsedFormatInfo===null)return;const o=Ga.values[this.parsedFormatInfo.getDataMask()],h=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,h)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let h=0,m=o.getWidth();h<m;h++)for(let b=h+1,y=o.getHeight();b<y;b++)o.get(h,b)!==o.get(b,h)&&(o.flip(b,h),o.flip(h,b))}}class du{constructor(o,h){this.numDataCodewords=o,this.codewords=h}static getDataBlocks(o,h,m){if(o.length!==h.getTotalCodewords())throw new v;const b=h.getECBlocksForLevel(m);let y=0;const k=b.getECBlocks();for(const je of k)y+=je.getCount();const A=new Array(y);let O=0;for(const je of k)for(let Fe=0;Fe<je.getCount();Fe++){const qe=je.getDataCodewords(),nt=b.getECCodewordsPerBlock()+qe;A[O++]=new du(qe,new Uint8Array(nt))}const F=A[0].codewords.length;let K=A.length-1;for(;K>=0&&A[K].codewords.length!==F;)K--;K++;const ne=F-b.getECCodewordsPerBlock();let ce=0;for(let je=0;je<ne;je++)for(let Fe=0;Fe<O;Fe++)A[Fe].codewords[je]=o[ce++];for(let je=K;je<O;je++)A[je].codewords[ne]=o[ce++];const ke=A[0].codewords.length;for(let je=ne;je<ke;je++)for(let Fe=0;Fe<O;Fe++){const qe=Fe<K?je:je+1;A[Fe].codewords[qe]=o[ce++]}return A}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Va;(function(re){re[re.TERMINATOR=0]="TERMINATOR",re[re.NUMERIC=1]="NUMERIC",re[re.ALPHANUMERIC=2]="ALPHANUMERIC",re[re.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",re[re.BYTE=4]="BYTE",re[re.ECI=5]="ECI",re[re.KANJI=6]="KANJI",re[re.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",re[re.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",re[re.HANZI=9]="HANZI"})(Va||(Va={}));class Xt{constructor(o,h,m,b){this.value=o,this.stringValue=h,this.characterCountBitsForVersions=m,this.bits=b,Xt.FOR_BITS.set(b,this),Xt.FOR_VALUE.set(o,this)}static forBits(o){const h=Xt.FOR_BITS.get(o);if(h===void 0)throw new v;return h}getCharacterCountBits(o){const h=o.getVersionNumber();let m;return h<=9?m=0:h<=26?m=1:m=2,this.characterCountBitsForVersions[m]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof Xt))return!1;const h=o;return this.value===h.value}toString(){return this.stringValue}}Xt.FOR_BITS=new Map,Xt.FOR_VALUE=new Map,Xt.TERMINATOR=new Xt(Va.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Xt.NUMERIC=new Xt(Va.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Xt.ALPHANUMERIC=new Xt(Va.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Xt.STRUCTURED_APPEND=new Xt(Va.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Xt.BYTE=new Xt(Va.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Xt.ECI=new Xt(Va.ECI,"ECI",Int32Array.from([0,0,0]),7),Xt.KANJI=new Xt(Va.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Xt.FNC1_FIRST_POSITION=new Xt(Va.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Xt.FNC1_SECOND_POSITION=new Xt(Va.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Xt.HANZI=new Xt(Va.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class un{static decode(o,h,m,b){const y=new fs(o);let k=new he;const A=new Array;let O=-1,F=-1;try{let K=null,ne=!1,ce;do{if(y.available()<4)ce=Xt.TERMINATOR;else{const ke=y.readBits(4);ce=Xt.forBits(ke)}switch(ce){case Xt.TERMINATOR:break;case Xt.FNC1_FIRST_POSITION:case Xt.FNC1_SECOND_POSITION:ne=!0;break;case Xt.STRUCTURED_APPEND:if(y.available()<16)throw new M;O=y.readBits(8),F=y.readBits(8);break;case Xt.ECI:const ke=un.parseECIValue(y);if(K=z.getCharacterSetECIByValue(ke),K===null)throw new M;break;case Xt.HANZI:const je=y.readBits(4),Fe=y.readBits(ce.getCharacterCountBits(h));je===un.GB2312_SUBSET&&un.decodeHanziSegment(y,k,Fe);break;default:const qe=y.readBits(ce.getCharacterCountBits(h));switch(ce){case Xt.NUMERIC:un.decodeNumericSegment(y,k,qe);break;case Xt.ALPHANUMERIC:un.decodeAlphanumericSegment(y,k,qe,ne);break;case Xt.BYTE:un.decodeByteSegment(y,k,qe,K,A,b);break;case Xt.KANJI:un.decodeKanjiSegment(y,k,qe);break;default:throw new M}break}}while(ce!==Xt.TERMINATOR)}catch{throw new M}return new Ne(o,k.toString(),A.length===0?null:A,m===null?null:m.toString(),O,F)}static decodeHanziSegment(o,h,m){if(m*13>o.available())throw new M;const b=new Uint8Array(2*m);let y=0;for(;m>0;){const k=o.readBits(13);let A=k/96<<8&4294967295|k%96;A<959?A+=41377:A+=42657,b[y]=A>>8&255,b[y+1]=A&255,y+=2,m--}try{h.append(Z.decode(b,H.GB2312))}catch(k){throw new M(k)}}static decodeKanjiSegment(o,h,m){if(m*13>o.available())throw new M;const b=new Uint8Array(2*m);let y=0;for(;m>0;){const k=o.readBits(13);let A=k/192<<8&4294967295|k%192;A<7936?A+=33088:A+=49472,b[y]=A>>8,b[y+1]=A,y+=2,m--}try{h.append(Z.decode(b,H.SHIFT_JIS))}catch(k){throw new M(k)}}static decodeByteSegment(o,h,m,b,y,k){if(8*m>o.available())throw new M;const A=new Uint8Array(m);for(let F=0;F<m;F++)A[F]=o.readBits(8);let O;b===null?O=H.guessEncoding(A,k):O=b.getName();try{h.append(Z.decode(A,O))}catch(F){throw new M(F)}y.push(A)}static toAlphaNumericChar(o){if(o>=un.ALPHANUMERIC_CHARS.length)throw new M;return un.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,h,m,b){const y=h.length();for(;m>1;){if(o.available()<11)throw new M;const k=o.readBits(11);h.append(un.toAlphaNumericChar(Math.floor(k/45))),h.append(un.toAlphaNumericChar(k%45)),m-=2}if(m===1){if(o.available()<6)throw new M;h.append(un.toAlphaNumericChar(o.readBits(6)))}if(b)for(let k=y;k<h.length();k++)h.charAt(k)==="%"&&(k<h.length()-1&&h.charAt(k+1)==="%"?h.deleteCharAt(k+1):h.setCharAt(k,""))}static decodeNumericSegment(o,h,m){for(;m>=3;){if(o.available()<10)throw new M;const b=o.readBits(10);if(b>=1e3)throw new M;h.append(un.toAlphaNumericChar(Math.floor(b/100))),h.append(un.toAlphaNumericChar(Math.floor(b/10)%10)),h.append(un.toAlphaNumericChar(b%10)),m-=3}if(m===2){if(o.available()<7)throw new M;const b=o.readBits(7);if(b>=100)throw new M;h.append(un.toAlphaNumericChar(Math.floor(b/10))),h.append(un.toAlphaNumericChar(b%10))}else if(m===1){if(o.available()<4)throw new M;const b=o.readBits(4);if(b>=10)throw new M;h.append(un.toAlphaNumericChar(b))}}static parseECIValue(o){const h=o.readBits(8);if((h&128)===0)return h&127;if((h&192)===128){const m=o.readBits(8);return(h&63)<<8&4294967295|m}if((h&224)===192){const m=o.readBits(16);return(h&31)<<16&4294967295|m}throw new M}}un.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",un.GB2312_SUBSET=1;class Of{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const h=o[0];o[0]=o[2],o[2]=h}}class tm{constructor(){this.rsDecoder=new Ae(Ce.QR_CODE_FIELD_256)}decodeBooleanArray(o,h){return this.decodeBitMatrix(q.parseFromBooleanArray(o),h)}decodeBitMatrix(o,h){const m=new Fl(o);let b=null;try{return this.decodeBitMatrixParser(m,h)}catch(y){b=y}try{m.remask(),m.setMirror(!0),m.readVersion(),m.readFormatInformation(),m.mirror();const y=this.decodeBitMatrixParser(m,h);return y.setOther(new Of(!0)),y}catch(y){throw b!==null?b:y}}decodeBitMatrixParser(o,h){const m=o.readVersion(),b=o.readFormatInformation().getErrorCorrectionLevel(),y=o.readCodewords(),k=du.getDataBlocks(y,m,b);let A=0;for(const K of k)A+=K.getNumDataCodewords();const O=new Uint8Array(A);let F=0;for(const K of k){const ne=K.getCodewords(),ce=K.getNumDataCodewords();this.correctErrors(ne,ce);for(let ke=0;ke<ce;ke++)O[F++]=ne[ke]}return un.decode(O,m,b,h)}correctErrors(o,h){const m=new Int32Array(o);try{this.rsDecoder.decode(m,o.length-h)}catch{throw new E}for(let b=0;b<h;b++)o[b]=m[b]}}class Ll extends Ue{constructor(o,h,m){super(o,h),this.estimatedModuleSize=m}aboutEquals(o,h,m){if(Math.abs(h-this.getY())<=o&&Math.abs(m-this.getX())<=o){const b=Math.abs(o-this.estimatedModuleSize);return b<=1||b<=this.estimatedModuleSize}return!1}combineEstimate(o,h,m){const b=(this.getX()+h)/2,y=(this.getY()+o)/2,k=(this.estimatedModuleSize+m)/2;return new Ll(b,y,k)}}class Ja{constructor(o,h,m,b,y,k,A){this.image=o,this.startX=h,this.startY=m,this.width=b,this.height=y,this.moduleSize=k,this.resultPointCallback=A,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,h=this.height,m=this.width,b=o+m,y=this.startY+h/2,k=new Int32Array(3),A=this.image;for(let O=0;O<h;O++){const F=y+((O&1)===0?Math.floor((O+1)/2):-Math.floor((O+1)/2));k[0]=0,k[1]=0,k[2]=0;let K=o;for(;K<b&&!A.get(K,F);)K++;let ne=0;for(;K<b;){if(A.get(K,F))if(ne===1)k[1]++;else if(ne===2){if(this.foundPatternCross(k)){const ce=this.handlePossibleCenter(k,F,K);if(ce!==null)return ce}k[0]=k[2],k[1]=1,k[2]=0,ne=1}else k[++ne]++;else ne===1&&ne++,k[ne]++;K++}if(this.foundPatternCross(k)){const ce=this.handlePossibleCenter(k,F,b);if(ce!==null)return ce}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se}static centerFromEnd(o,h){return h-o[2]-o[1]/2}foundPatternCross(o){const h=this.moduleSize,m=h/2;for(let b=0;b<3;b++)if(Math.abs(h-o[b])>=m)return!1;return!0}crossCheckVertical(o,h,m,b){const y=this.image,k=y.getHeight(),A=this.crossCheckStateCount;A[0]=0,A[1]=0,A[2]=0;let O=o;for(;O>=0&&y.get(h,O)&&A[1]<=m;)A[1]++,O--;if(O<0||A[1]>m)return NaN;for(;O>=0&&!y.get(h,O)&&A[0]<=m;)A[0]++,O--;if(A[0]>m)return NaN;for(O=o+1;O<k&&y.get(h,O)&&A[1]<=m;)A[1]++,O++;if(O===k||A[1]>m)return NaN;for(;O<k&&!y.get(h,O)&&A[2]<=m;)A[2]++,O++;if(A[2]>m)return NaN;const F=A[0]+A[1]+A[2];return 5*Math.abs(F-b)>=2*b?NaN:this.foundPatternCross(A)?Ja.centerFromEnd(A,O):NaN}handlePossibleCenter(o,h,m){const b=o[0]+o[1]+o[2],y=Ja.centerFromEnd(o,m),k=this.crossCheckVertical(h,y,2*o[1],b);if(!isNaN(k)){const A=(o[0]+o[1]+o[2])/3;for(const F of this.possibleCenters)if(F.aboutEquals(A,k,y))return F.combineEstimate(k,y,A);const O=new Ll(y,k,A);this.possibleCenters.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return null}}class Do extends Ue{constructor(o,h,m,b){super(o,h),this.estimatedModuleSize=m,this.count=b,b===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,h,m){if(Math.abs(h-this.getY())<=o&&Math.abs(m-this.getX())<=o){const b=Math.abs(o-this.estimatedModuleSize);return b<=1||b<=this.estimatedModuleSize}return!1}combineEstimate(o,h,m){const b=this.count+1,y=(this.count*this.getX()+h)/b,k=(this.count*this.getY()+o)/b,A=(this.count*this.estimatedModuleSize+m)/b;return new Do(y,k,A,b)}}class fu{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class vn{constructor(o,h){this.image=o,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=h}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const h=o!=null&&o.get(X.TRY_HARDER)!==void 0,m=o!=null&&o.get(X.PURE_BARCODE)!==void 0,b=this.image,y=b.getHeight(),k=b.getWidth();let A=Math.floor(3*y/(4*vn.MAX_MODULES));(A<vn.MIN_SKIP||h)&&(A=vn.MIN_SKIP);let O=!1;const F=new Int32Array(5);for(let ne=A-1;ne<y&&!O;ne+=A){F[0]=0,F[1]=0,F[2]=0,F[3]=0,F[4]=0;let ce=0;for(let ke=0;ke<k;ke++)if(b.get(ke,ne))(ce&1)===1&&ce++,F[ce]++;else if((ce&1)===0)if(ce===4)if(vn.foundPatternCross(F)){if(this.handlePossibleCenter(F,ne,ke,m)===!0)if(A=2,this.hasSkipped===!0)O=this.haveMultiplyConfirmedCenters();else{const Fe=this.findRowSkip();Fe>F[2]&&(ne+=Fe-F[2]-A,ke=k-1)}else{F[0]=F[2],F[1]=F[3],F[2]=F[4],F[3]=1,F[4]=0,ce=3;continue}ce=0,F[0]=0,F[1]=0,F[2]=0,F[3]=0,F[4]=0}else F[0]=F[2],F[1]=F[3],F[2]=F[4],F[3]=1,F[4]=0,ce=3;else F[++ce]++;else F[ce]++;vn.foundPatternCross(F)&&this.handlePossibleCenter(F,ne,k,m)===!0&&(A=F[0],this.hasSkipped&&(O=this.haveMultiplyConfirmedCenters()))}const K=this.selectBestPatterns();return Ue.orderBestPatterns(K),new fu(K)}static centerFromEnd(o,h){return h-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let h=0;for(let y=0;y<5;y++){const k=o[y];if(k===0)return!1;h+=k}if(h<7)return!1;const m=h/7,b=m/2;return Math.abs(m-o[0])<b&&Math.abs(m-o[1])<b&&Math.abs(3*m-o[2])<3*b&&Math.abs(m-o[3])<b&&Math.abs(m-o[4])<b}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,h,m,b){const y=this.getCrossCheckStateCount();let k=0;const A=this.image;for(;o>=k&&h>=k&&A.get(h-k,o-k);)y[2]++,k++;if(o<k||h<k)return!1;for(;o>=k&&h>=k&&!A.get(h-k,o-k)&&y[1]<=m;)y[1]++,k++;if(o<k||h<k||y[1]>m)return!1;for(;o>=k&&h>=k&&A.get(h-k,o-k)&&y[0]<=m;)y[0]++,k++;if(y[0]>m)return!1;const O=A.getHeight(),F=A.getWidth();for(k=1;o+k<O&&h+k<F&&A.get(h+k,o+k);)y[2]++,k++;if(o+k>=O||h+k>=F)return!1;for(;o+k<O&&h+k<F&&!A.get(h+k,o+k)&&y[3]<m;)y[3]++,k++;if(o+k>=O||h+k>=F||y[3]>=m)return!1;for(;o+k<O&&h+k<F&&A.get(h+k,o+k)&&y[4]<m;)y[4]++,k++;if(y[4]>=m)return!1;const K=y[0]+y[1]+y[2]+y[3]+y[4];return Math.abs(K-b)<2*b&&vn.foundPatternCross(y)}crossCheckVertical(o,h,m,b){const y=this.image,k=y.getHeight(),A=this.getCrossCheckStateCount();let O=o;for(;O>=0&&y.get(h,O);)A[2]++,O--;if(O<0)return NaN;for(;O>=0&&!y.get(h,O)&&A[1]<=m;)A[1]++,O--;if(O<0||A[1]>m)return NaN;for(;O>=0&&y.get(h,O)&&A[0]<=m;)A[0]++,O--;if(A[0]>m)return NaN;for(O=o+1;O<k&&y.get(h,O);)A[2]++,O++;if(O===k)return NaN;for(;O<k&&!y.get(h,O)&&A[3]<m;)A[3]++,O++;if(O===k||A[3]>=m)return NaN;for(;O<k&&y.get(h,O)&&A[4]<m;)A[4]++,O++;if(A[4]>=m)return NaN;const F=A[0]+A[1]+A[2]+A[3]+A[4];return 5*Math.abs(F-b)>=2*b?NaN:vn.foundPatternCross(A)?vn.centerFromEnd(A,O):NaN}crossCheckHorizontal(o,h,m,b){const y=this.image,k=y.getWidth(),A=this.getCrossCheckStateCount();let O=o;for(;O>=0&&y.get(O,h);)A[2]++,O--;if(O<0)return NaN;for(;O>=0&&!y.get(O,h)&&A[1]<=m;)A[1]++,O--;if(O<0||A[1]>m)return NaN;for(;O>=0&&y.get(O,h)&&A[0]<=m;)A[0]++,O--;if(A[0]>m)return NaN;for(O=o+1;O<k&&y.get(O,h);)A[2]++,O++;if(O===k)return NaN;for(;O<k&&!y.get(O,h)&&A[3]<m;)A[3]++,O++;if(O===k||A[3]>=m)return NaN;for(;O<k&&y.get(O,h)&&A[4]<m;)A[4]++,O++;if(A[4]>=m)return NaN;const F=A[0]+A[1]+A[2]+A[3]+A[4];return 5*Math.abs(F-b)>=b?NaN:vn.foundPatternCross(A)?vn.centerFromEnd(A,O):NaN}handlePossibleCenter(o,h,m,b){const y=o[0]+o[1]+o[2]+o[3]+o[4];let k=vn.centerFromEnd(o,m),A=this.crossCheckVertical(h,Math.floor(k),o[2],y);if(!isNaN(A)&&(k=this.crossCheckHorizontal(Math.floor(k),Math.floor(A),o[2],y),!isNaN(k)&&(!b||this.crossCheckDiagonal(Math.floor(A),Math.floor(k),o[2],y)))){const O=y/7;let F=!1;const K=this.possibleCenters;for(let ne=0,ce=K.length;ne<ce;ne++){const ke=K[ne];if(ke.aboutEquals(O,A,k)){K[ne]=ke.combineEstimate(A,k,O),F=!0;break}}if(!F){const ne=new Do(k,A,O);K.push(ne),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(ne)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let h=null;for(const m of this.possibleCenters)if(m.getCount()>=vn.CENTER_QUORUM)if(h==null)h=m;else return this.hasSkipped=!0,Math.floor((Math.abs(h.getX()-m.getX())-Math.abs(h.getY()-m.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,h=0;const m=this.possibleCenters.length;for(const k of this.possibleCenters)k.getCount()>=vn.CENTER_QUORUM&&(o++,h+=k.getEstimatedModuleSize());if(o<3)return!1;const b=h/m;let y=0;for(const k of this.possibleCenters)y+=Math.abs(k.getEstimatedModuleSize()-b);return y<=.05*h}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new se;const h=this.possibleCenters;let m;if(o>3){let b=0,y=0;for(const O of this.possibleCenters){const F=O.getEstimatedModuleSize();b+=F,y+=F*F}m=b/o;let k=Math.sqrt(y/o-m*m);h.sort((O,F)=>{const K=Math.abs(F.getEstimatedModuleSize()-m),ne=Math.abs(O.getEstimatedModuleSize()-m);return K<ne?-1:K>ne?1:0});const A=Math.max(.2*m,k);for(let O=0;O<h.length&&h.length>3;O++){const F=h[O];Math.abs(F.getEstimatedModuleSize()-m)>A&&(h.splice(O,1),O--)}}if(h.length>3){let b=0;for(const y of h)b+=y.getEstimatedModuleSize();m=b/h.length,h.sort((y,k)=>{if(k.getCount()===y.getCount()){const A=Math.abs(k.getEstimatedModuleSize()-m),O=Math.abs(y.getEstimatedModuleSize()-m);return A<O?1:A>O?-1:0}else return k.getCount()-y.getCount()}),h.splice(3)}return[h[0],h[1],h[2]]}}vn.CENTER_QUORUM=2,vn.MIN_SKIP=3,vn.MAX_MODULES=57;class Bs{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(X.NEED_RESULT_POINT_CALLBACK);const m=new vn(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(m)}processFinderPatternInfo(o){const h=o.getTopLeft(),m=o.getTopRight(),b=o.getBottomLeft(),y=this.calculateModuleSize(h,m,b);if(y<1)throw new se("No pattern found in proccess finder.");const k=Bs.computeDimension(h,m,b,y),A=Gt.getProvisionalVersionForDimension(k),O=A.getDimensionForVersion()-7;let F=null;if(A.getAlignmentPatternCenters().length>0){const ke=m.getX()-h.getX()+b.getX(),je=m.getY()-h.getY()+b.getY(),Fe=1-3/O,qe=Math.floor(h.getX()+Fe*(ke-h.getX())),nt=Math.floor(h.getY()+Fe*(je-h.getY()));for(let At=4;At<=16;At<<=1)try{F=this.findAlignmentInRegion(y,qe,nt,At);break}catch(St){if(!(St instanceof se))throw St}}const K=Bs.createTransform(h,m,b,F,k),ne=Bs.sampleGrid(this.image,K,k);let ce;return F===null?ce=[b,h,m]:ce=[b,h,m,F],new He(ne,ce)}static createTransform(o,h,m,b,y){const k=y-3.5;let A,O,F,K;return b!==null?(A=b.getX(),O=b.getY(),F=k-3,K=F):(A=h.getX()-o.getX()+m.getX(),O=h.getY()-o.getY()+m.getY(),F=k,K=k),ht.quadrilateralToQuadrilateral(3.5,3.5,k,3.5,F,K,3.5,k,o.getX(),o.getY(),h.getX(),h.getY(),A,O,m.getX(),m.getY())}static sampleGrid(o,h,m){return Ye.getInstance().sampleGridWithTransform(o,m,m,h)}static computeDimension(o,h,m,b){const y=Se.round(Ue.distance(o,h)/b),k=Se.round(Ue.distance(o,m)/b);let A=Math.floor((y+k)/2)+7;switch(A&3){case 0:A++;break;case 2:A--;break;case 3:throw new se("Dimensions could be not found.")}return A}calculateModuleSize(o,h,m){return(this.calculateModuleSizeOneWay(o,h)+this.calculateModuleSizeOneWay(o,m))/2}calculateModuleSizeOneWay(o,h){const m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(h.getX()),Math.floor(h.getY())),b=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(h.getX()),Math.floor(h.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(m)?b/7:isNaN(b)?m/7:(m+b)/14}sizeOfBlackWhiteBlackRunBothWays(o,h,m,b){let y=this.sizeOfBlackWhiteBlackRun(o,h,m,b),k=1,A=o-(m-o);A<0?(k=o/(o-A),A=0):A>=this.image.getWidth()&&(k=(this.image.getWidth()-1-o)/(A-o),A=this.image.getWidth()-1);let O=Math.floor(h-(b-h)*k);return k=1,O<0?(k=h/(h-O),O=0):O>=this.image.getHeight()&&(k=(this.image.getHeight()-1-h)/(O-h),O=this.image.getHeight()-1),A=Math.floor(o+(A-o)*k),y+=this.sizeOfBlackWhiteBlackRun(o,h,A,O),y-1}sizeOfBlackWhiteBlackRun(o,h,m,b){const y=Math.abs(b-h)>Math.abs(m-o);if(y){let ke=o;o=h,h=ke,ke=m,m=b,b=ke}const k=Math.abs(m-o),A=Math.abs(b-h);let O=-k/2;const F=o<m?1:-1,K=h<b?1:-1;let ne=0;const ce=m+F;for(let ke=o,je=h;ke!==ce;ke+=F){const Fe=y?je:ke,qe=y?ke:je;if(ne===1===this.image.get(Fe,qe)){if(ne===2)return Se.distance(ke,je,o,h);ne++}if(O+=A,O>0){if(je===b)break;je+=K,O-=k}}return ne===2?Se.distance(m+F,b,o,h):NaN}findAlignmentInRegion(o,h,m,b){const y=Math.floor(b*o),k=Math.max(0,h-y),A=Math.min(this.image.getWidth()-1,h+y);if(A-k<o*3)throw new se("Alignment top exceeds estimated module size.");const O=Math.max(0,m-y),F=Math.min(this.image.getHeight()-1,m+y);if(F-O<o*3)throw new se("Alignment bottom exceeds estimated module size.");return new Ja(this.image,k,O,A-k,F-O,o,this.resultPointCallback).find()}}class oi{constructor(){this.decoder=new tm}getDecoder(){return this.decoder}decode(o,h){let m,b;if(h!=null&&h.get(X.PURE_BARCODE)!==void 0){const O=oi.extractPureBits(o.getBlackMatrix());m=this.decoder.decodeBitMatrix(O,h),b=oi.NO_POINTS}else{const O=new Bs(o.getBlackMatrix()).detect(h);m=this.decoder.decodeBitMatrix(O.getBits(),h),b=O.getPoints()}m.getOther()instanceof Of&&m.getOther().applyMirroredCorrection(b);const y=new U(m.getText(),m.getRawBytes(),void 0,b,ue.QR_CODE,void 0),k=m.getByteSegments();k!==null&&y.putMetadata(De.BYTE_SEGMENTS,k);const A=m.getECLevel();return A!==null&&y.putMetadata(De.ERROR_CORRECTION_LEVEL,A),m.hasStructuredAppend()&&(y.putMetadata(De.STRUCTURED_APPEND_SEQUENCE,m.getStructuredAppendSequenceNumber()),y.putMetadata(De.STRUCTURED_APPEND_PARITY,m.getStructuredAppendParity())),y}reset(){}static extractPureBits(o){const h=o.getTopLeftOnBit(),m=o.getBottomRightOnBit();if(h===null||m===null)throw new se;const b=this.moduleSize(h,o);let y=h[1],k=m[1],A=h[0],O=m[0];if(A>=O||y>=k)throw new se;if(k-y!==O-A&&(O=A+(k-y),O>=o.getWidth()))throw new se;const F=Math.round((O-A+1)/b),K=Math.round((k-y+1)/b);if(F<=0||K<=0)throw new se;if(K!==F)throw new se;const ne=Math.floor(b/2);y+=ne,A+=ne;const ce=A+Math.floor((F-1)*b)-O;if(ce>0){if(ce>ne)throw new se;A-=ce}const ke=y+Math.floor((K-1)*b)-k;if(ke>0){if(ke>ne)throw new se;y-=ke}const je=new q(F,K);for(let Fe=0;Fe<K;Fe++){const qe=y+Math.floor(Fe*b);for(let nt=0;nt<F;nt++)o.get(A+Math.floor(nt*b),qe)&&je.set(nt,Fe)}return je}static moduleSize(o,h){const m=h.getHeight(),b=h.getWidth();let y=o[0],k=o[1],A=!0,O=0;for(;y<b&&k<m;){if(A!==h.get(y,k)){if(++O===5)break;A=!A}y++,k++}if(y===b||k===m)throw new se;return(y-o[0])/7}}oi.NO_POINTS=new Array;class Zt{PDF417Common(){}static getBitCountSum(o){return Se.sum(o)}static toIntArray(o){if(o==null||!o.length)return Zt.EMPTY_INT_ARRAY;const h=new Int32Array(o.length);let m=0;for(const b of o)h[m++]=b;return h}static getCodeword(o){const h=D.binarySearch(Zt.SYMBOL_TABLE,o&262143);return h<0?-1:(Zt.CODEWORD_TABLE[h]-1)%Zt.NUMBER_OF_CODEWORDS}}Zt.NUMBER_OF_CODEWORDS=929,Zt.MAX_CODEWORDS_IN_BARCODE=Zt.NUMBER_OF_CODEWORDS-1,Zt.MIN_ROWS_IN_BARCODE=3,Zt.MAX_ROWS_IN_BARCODE=90,Zt.MODULES_IN_CODEWORD=17,Zt.MODULES_IN_STOP_PATTERN=18,Zt.BARS_IN_MODULE=8,Zt.EMPTY_INT_ARRAY=new Int32Array([]),Zt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Zt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Rf{constructor(o,h){this.bits=o,this.points=h}getBits(){return this.bits}getPoints(){return this.points}}class cr{static detectMultiple(o,h,m){let b=o.getBlackMatrix(),y=cr.detect(m,b);return y.length||(b=b.clone(),b.rotate180(),y=cr.detect(m,b)),new Rf(b,y)}static detect(o,h){const m=new Array;let b=0,y=0,k=!1;for(;b<h.getHeight();){const A=cr.findVertices(h,b,y);if(A[0]==null&&A[3]==null){if(!k)break;k=!1,y=0;for(const O of m)O[1]!=null&&(b=Math.trunc(Math.max(b,O[1].getY()))),O[3]!=null&&(b=Math.max(b,Math.trunc(O[3].getY())));b+=cr.ROW_STEP;continue}if(k=!0,m.push(A),!o)break;A[2]!=null?(y=Math.trunc(A[2].getX()),b=Math.trunc(A[2].getY())):(y=Math.trunc(A[4].getX()),b=Math.trunc(A[4].getY()))}return m}static findVertices(o,h,m){const b=o.getHeight(),y=o.getWidth(),k=new Array(8);return cr.copyToResult(k,cr.findRowsWithPattern(o,b,y,h,m,cr.START_PATTERN),cr.INDEXES_START_PATTERN),k[4]!=null&&(m=Math.trunc(k[4].getX()),h=Math.trunc(k[4].getY())),cr.copyToResult(k,cr.findRowsWithPattern(o,b,y,h,m,cr.STOP_PATTERN),cr.INDEXES_STOP_PATTERN),k}static copyToResult(o,h,m){for(let b=0;b<m.length;b++)o[m[b]]=h[b]}static findRowsWithPattern(o,h,m,b,y,k){const A=new Array(4);let O=!1;const F=new Int32Array(k.length);for(;b<h;b+=cr.ROW_STEP){let ne=cr.findGuardPattern(o,y,b,m,!1,k,F);if(ne!=null){for(;b>0;){const ce=cr.findGuardPattern(o,y,--b,m,!1,k,F);if(ce!=null)ne=ce;else{b++;break}}A[0]=new Ue(ne[0],b),A[1]=new Ue(ne[1],b),O=!0;break}}let K=b+1;if(O){let ne=0,ce=Int32Array.from([Math.trunc(A[0].getX()),Math.trunc(A[1].getX())]);for(;K<h;K++){const ke=cr.findGuardPattern(o,ce[0],K,m,!1,k,F);if(ke!=null&&Math.abs(ce[0]-ke[0])<cr.MAX_PATTERN_DRIFT&&Math.abs(ce[1]-ke[1])<cr.MAX_PATTERN_DRIFT)ce=ke,ne=0;else{if(ne>cr.SKIPPED_ROW_COUNT_MAX)break;ne++}}K-=ne+1,A[2]=new Ue(ce[0],K),A[3]=new Ue(ce[1],K)}return K-b<cr.BARCODE_MIN_HEIGHT&&D.fill(A,null),A}static findGuardPattern(o,h,m,b,y,k,A){D.fillWithin(A,0,A.length,0);let O=h,F=0;for(;o.get(O,m)&&O>0&&F++<cr.MAX_PIXEL_DRIFT;)O--;let K=O,ne=0,ce=k.length;for(let ke=y;K<b;K++)if(o.get(K,m)!==ke)A[ne]++;else{if(ne===ce-1){if(cr.patternMatchVariance(A,k,cr.MAX_INDIVIDUAL_VARIANCE)<cr.MAX_AVG_VARIANCE)return new Int32Array([O,K]);O+=A[0]+A[1],S.arraycopy(A,2,A,0,ne-1),A[ne-1]=0,A[ne]=0,ne--}else ne++;A[ne]=1,ke=!ke}return ne===ce-1&&cr.patternMatchVariance(A,k,cr.MAX_INDIVIDUAL_VARIANCE)<cr.MAX_AVG_VARIANCE?new Int32Array([O,K-1]):null}static patternMatchVariance(o,h,m){let b=o.length,y=0,k=0;for(let F=0;F<b;F++)y+=o[F],k+=h[F];if(y<k)return 1/0;let A=y/k;m*=A;let O=0;for(let F=0;F<b;F++){let K=o[F],ne=h[F]*A,ce=K>ne?K-ne:ne-K;if(ce>m)return 1/0;O+=ce}return O/y}}cr.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),cr.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),cr.MAX_AVG_VARIANCE=.42,cr.MAX_INDIVIDUAL_VARIANCE=.8,cr.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),cr.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),cr.MAX_PIXEL_DRIFT=3,cr.MAX_PATTERN_DRIFT=5,cr.SKIPPED_ROW_COUNT_MAX=25,cr.ROW_STEP=5,cr.BARCODE_MIN_HEIGHT=10;class dn{constructor(o,h){if(h.length===0)throw new v;this.field=o;let m=h.length;if(m>1&&h[0]===0){let b=1;for(;b<m&&h[b]===0;)b++;b===m?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(m-b),S.arraycopy(h,b,this.coefficients,0,this.coefficients.length))}else this.coefficients=h}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let b=0;for(let y of this.coefficients)b=this.field.add(b,y);return b}let h=this.coefficients[0],m=this.coefficients.length;for(let b=1;b<m;b++)h=this.field.add(this.field.multiply(o,h),this.coefficients[b]);return h}add(o){if(!this.field.equals(o.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let h=this.coefficients,m=o.coefficients;if(h.length>m.length){let k=h;h=m,m=k}let b=new Int32Array(m.length),y=m.length-h.length;S.arraycopy(m,0,b,0,y);for(let k=y;k<m.length;k++)b[k]=this.field.add(h[k-y],m[k]);return new dn(this.field,b)}subtract(o){if(!this.field.equals(o.field))throw new v("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof dn?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new dn(this.field,new Int32Array([0]));let h=this.coefficients,m=h.length,b=o.coefficients,y=b.length,k=new Int32Array(m+y-1);for(let A=0;A<m;A++){let O=h[A];for(let F=0;F<y;F++)k[A+F]=this.field.add(k[A+F],this.field.multiply(O,b[F]))}return new dn(this.field,k)}negative(){let o=this.coefficients.length,h=new Int32Array(o);for(let m=0;m<o;m++)h[m]=this.field.subtract(0,this.coefficients[m]);return new dn(this.field,h)}multiplyScalar(o){if(o===0)return new dn(this.field,new Int32Array([0]));if(o===1)return this;let h=this.coefficients.length,m=new Int32Array(h);for(let b=0;b<h;b++)m[b]=this.field.multiply(this.coefficients[b],o);return new dn(this.field,m)}multiplyByMonomial(o,h){if(o<0)throw new v;if(h===0)return new dn(this.field,new Int32Array([0]));let m=this.coefficients.length,b=new Int32Array(m+o);for(let y=0;y<m;y++)b[y]=this.field.multiply(this.coefficients[y],h);return new dn(this.field,b)}toString(){let o=new he;for(let h=this.getDegree();h>=0;h--){let m=this.getCoefficient(h);m!==0&&(m<0?(o.append(" - "),m=-m):o.length()>0&&o.append(" + "),(h===0||m!==1)&&o.append(m),h!==0&&(h===1?o.append("x"):(o.append("x^"),o.append(h))))}return o.toString()}}class hu{add(o,h){return(o+h)%this.modulus}subtract(o,h){return(this.modulus+o-h)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new v;return this.logTable[o]}inverse(o){if(o===0)throw new me;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,h){return o===0||h===0?0:this.expTable[(this.logTable[o]+this.logTable[h])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class Ki extends hu{constructor(o,h){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let m=1;for(let b=0;b<o;b++)this.expTable[b]=m,m=m*h%o;for(let b=0;b<o-1;b++)this.logTable[this.expTable[b]]=b;this.zero=new dn(this,new Int32Array([0])),this.one=new dn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,h){if(o<0)throw new v;if(h===0)return this.zero;let m=new Int32Array(o+1);return m[0]=h,new dn(this,m)}}Ki.PDF417_GF=new Ki(Zt.NUMBER_OF_CODEWORDS,3);class ci{constructor(){this.field=Ki.PDF417_GF}decode(o,h,m){let b=new dn(this.field,o),y=new Int32Array(h),k=!1;for(let je=h;je>0;je--){let Fe=b.evaluateAt(this.field.exp(je));y[h-je]=Fe,Fe!==0&&(k=!0)}if(!k)return 0;let A=this.field.getOne();if(m!=null)for(const je of m){let Fe=this.field.exp(o.length-1-je),qe=new dn(this.field,new Int32Array([this.field.subtract(0,Fe),1]));A=A.multiply(qe)}let O=new dn(this.field,y),F=this.runEuclideanAlgorithm(this.field.buildMonomial(h,1),O,h),K=F[0],ne=F[1],ce=this.findErrorLocations(K),ke=this.findErrorMagnitudes(ne,K,ce);for(let je=0;je<ce.length;je++){let Fe=o.length-1-this.field.log(ce[je]);if(Fe<0)throw E.getChecksumInstance();o[Fe]=this.field.subtract(o[Fe],ke[je])}return ce.length}runEuclideanAlgorithm(o,h,m){if(o.getDegree()<h.getDegree()){let ce=o;o=h,h=ce}let b=o,y=h,k=this.field.getZero(),A=this.field.getOne();for(;y.getDegree()>=Math.round(m/2);){let ce=b,ke=k;if(b=y,k=A,b.isZero())throw E.getChecksumInstance();y=ce;let je=this.field.getZero(),Fe=b.getCoefficient(b.getDegree()),qe=this.field.inverse(Fe);for(;y.getDegree()>=b.getDegree()&&!y.isZero();){let nt=y.getDegree()-b.getDegree(),At=this.field.multiply(y.getCoefficient(y.getDegree()),qe);je=je.add(this.field.buildMonomial(nt,At)),y=y.subtract(b.multiplyByMonomial(nt,At))}A=je.multiply(k).subtract(ke).negative()}let O=A.getCoefficient(0);if(O===0)throw E.getChecksumInstance();let F=this.field.inverse(O),K=A.multiply(F),ne=y.multiply(F);return[K,ne]}findErrorLocations(o){let h=o.getDegree(),m=new Int32Array(h),b=0;for(let y=1;y<this.field.getSize()&&b<h;y++)o.evaluateAt(y)===0&&(m[b]=this.field.inverse(y),b++);if(b!==h)throw E.getChecksumInstance();return m}findErrorMagnitudes(o,h,m){let b=h.getDegree(),y=new Int32Array(b);for(let F=1;F<=b;F++)y[b-F]=this.field.multiply(F,h.getCoefficient(F));let k=new dn(this.field,y),A=m.length,O=new Int32Array(A);for(let F=0;F<A;F++){let K=this.field.inverse(m[F]),ne=this.field.subtract(0,o.evaluateAt(K)),ce=this.field.inverse(k.evaluateAt(K));O[F]=this.field.multiply(ne,ce)}return O}}class ui{constructor(o,h,m,b,y){o instanceof ui?this.constructor_2(o):this.constructor_1(o,h,m,b,y)}constructor_1(o,h,m,b,y){const k=h==null||m==null,A=b==null||y==null;if(k&&A)throw new se;k?(h=new Ue(0,b.getY()),m=new Ue(0,y.getY())):A&&(b=new Ue(o.getWidth()-1,h.getY()),y=new Ue(o.getWidth()-1,m.getY())),this.image=o,this.topLeft=h,this.bottomLeft=m,this.topRight=b,this.bottomRight=y,this.minX=Math.trunc(Math.min(h.getX(),m.getX())),this.maxX=Math.trunc(Math.max(b.getX(),y.getX())),this.minY=Math.trunc(Math.min(h.getY(),b.getY())),this.maxY=Math.trunc(Math.max(m.getY(),y.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,h){return o==null?h:h==null?o:new ui(o.image,o.topLeft,o.bottomLeft,h.topRight,h.bottomRight)}addMissingRows(o,h,m){let b=this.topLeft,y=this.bottomLeft,k=this.topRight,A=this.bottomRight;if(o>0){let O=m?this.topLeft:this.topRight,F=Math.trunc(O.getY()-o);F<0&&(F=0);let K=new Ue(O.getX(),F);m?b=K:k=K}if(h>0){let O=m?this.bottomLeft:this.bottomRight,F=Math.trunc(O.getY()+h);F>=this.image.getHeight()&&(F=this.image.getHeight()-1);let K=new Ue(O.getX(),F);m?y=K:A=K}return new ui(this.image,b,y,k,A)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Pc{constructor(o,h,m,b){this.columnCount=o,this.errorCorrectionLevel=b,this.rowCountUpperPart=h,this.rowCountLowerPart=m,this.rowCount=h+m}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Bl{constructor(){this.buffer=""}static form(o,h){let m=-1;function b(k,A,O,F,K,ne){if(k==="%%")return"%";if(h[++m]===void 0)return;k=F?parseInt(F.substr(1)):void 0;let ce=K?parseInt(K.substr(1)):void 0,ke;switch(ne){case"s":ke=h[m];break;case"c":ke=h[m][0];break;case"f":ke=parseFloat(h[m]).toFixed(k);break;case"p":ke=parseFloat(h[m]).toPrecision(k);break;case"e":ke=parseFloat(h[m]).toExponential(k);break;case"x":ke=parseInt(h[m]).toString(ce||16);break;case"d":ke=parseFloat(parseInt(h[m],ce||10).toPrecision(k)).toFixed(0);break}ke=typeof ke=="object"?JSON.stringify(ke):(+ke).toString(ce);let je=parseInt(O),Fe=O&&O[0]+""=="0"?"0":" ";for(;ke.length<je;)ke=A!==void 0?ke+Fe:Fe+ke;return ke}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(y,b)}format(o,...h){this.buffer+=Bl.form(o,h)}toString(){return this.buffer}}class Ni{constructor(o){this.boundingBox=new ui(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let h=this.getCodeword(o);if(h!=null)return h;for(let m=1;m<Ni.MAX_NEARBY_DISTANCE;m++){let b=this.imageRowToCodewordIndex(o)-m;if(b>=0&&(h=this.codewords[b],h!=null)||(b=this.imageRowToCodewordIndex(o)+m,b<this.codewords.length&&(h=this.codewords[b],h!=null)))return h}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,h){this.codewords[this.imageRowToCodewordIndex(o)]=h}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new Bl;let h=0;for(const m of this.codewords){if(m==null){o.format("%3d:    |   %n",h++);continue}o.format("%3d: %3d|%3d%n",h++,m.getRowNumber(),m.getValue())}return o.toString()}}Ni.MAX_NEARBY_DISTANCE=5;class Ai{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let h=this.values.get(o);h==null&&(h=0),h++,this.values.set(o,h)}getValue(){let o=-1,h=new Array;for(const[m,b]of this.values.entries()){const y={getKey:()=>m,getValue:()=>b};y.getValue()>o?(o=y.getValue(),h=[],h.push(y.getKey())):y.getValue()===o&&h.push(y.getKey())}return Zt.toIntArray(h)}getConfidence(o){return this.values.get(o)}}class xu extends Ni{constructor(o,h){super(o),this._isLeft=h}setRowNumbers(){for(let o of this.getCodewords())o?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let h=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(h,o);let m=this.getBoundingBox(),b=this._isLeft?m.getTopLeft():m.getTopRight(),y=this._isLeft?m.getBottomLeft():m.getBottomRight(),k=this.imageRowToCodewordIndex(Math.trunc(b.getY())),A=this.imageRowToCodewordIndex(Math.trunc(y.getY())),O=-1,F=1,K=0;for(let ne=k;ne<A;ne++){if(h[ne]==null)continue;let ce=h[ne],ke=ce.getRowNumber()-O;if(ke===0)K++;else if(ke===1)F=Math.max(F,K),K=1,O=ce.getRowNumber();else if(ke<0||ce.getRowNumber()>=o.getRowCount()||ke>ne)h[ne]=null;else{let je;F>2?je=(F-2)*ke:je=ke;let Fe=je>=ne;for(let qe=1;qe<=je&&!Fe;qe++)Fe=h[ne-qe]!=null;Fe?h[ne]=null:(O=ce.getRowNumber(),K=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let h=new Int32Array(o.getRowCount());for(let m of this.getCodewords())if(m!=null){let b=m.getRowNumber();if(b>=h.length)continue;h[b]++}return h}adjustIncompleteIndicatorColumnRowNumbers(o){let h=this.getBoundingBox(),m=this._isLeft?h.getTopLeft():h.getTopRight(),b=this._isLeft?h.getBottomLeft():h.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(m.getY())),k=this.imageRowToCodewordIndex(Math.trunc(b.getY())),A=this.getCodewords(),O=-1;for(let F=y;F<k;F++){if(A[F]==null)continue;let K=A[F];K.setRowNumberAsRowIndicatorColumn();let ne=K.getRowNumber()-O;ne===0||(ne===1?O=K.getRowNumber():K.getRowNumber()>=o.getRowCount()?A[F]=null:O=K.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),h=new Ai,m=new Ai,b=new Ai,y=new Ai;for(let A of o){if(A==null)continue;A.setRowNumberAsRowIndicatorColumn();let O=A.getValue()%30,F=A.getRowNumber();switch(this._isLeft||(F+=2),F%3){case 0:m.setValue(O*3+1);break;case 1:y.setValue(O/3),b.setValue(O%3);break;case 2:h.setValue(O+1);break}}if(h.getValue().length===0||m.getValue().length===0||b.getValue().length===0||y.getValue().length===0||h.getValue()[0]<1||m.getValue()[0]+b.getValue()[0]<Zt.MIN_ROWS_IN_BARCODE||m.getValue()[0]+b.getValue()[0]>Zt.MAX_ROWS_IN_BARCODE)return null;let k=new Pc(h.getValue()[0],m.getValue()[0],b.getValue()[0],y.getValue()[0]);return this.removeIncorrectCodewords(o,k),k}removeIncorrectCodewords(o,h){for(let m=0;m<o.length;m++){let b=o[m];if(o[m]==null)continue;let y=b.getValue()%30,k=b.getRowNumber();if(k>h.getRowCount()){o[m]=null;continue}switch(this._isLeft||(k+=2),k%3){case 0:y*3+1!==h.getRowCountUpperPart()&&(o[m]=null);break;case 1:(Math.trunc(y/3)!==h.getErrorCorrectionLevel()||y%3!==h.getRowCountLowerPart())&&(o[m]=null);break;case 2:y+1!==h.getColumnCount()&&(o[m]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Qn{constructor(o,h){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=h,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=Zt.MAX_CODEWORDS_IN_BARCODE,h;do h=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<h);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let h=1;h<this.barcodeColumnCount+1;h++){let m=this.detectionResultColumns[h].getCodewords();for(let b=0;b<m.length;b++)m[b]!=null&&(m[b].hasValidRowNumber()||this.adjustRowNumbers(h,b,m))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),h=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<o.length;m++)if(o[m]!=null&&h[m]!=null&&o[m].getRowNumber()===h[m].getRowNumber())for(let b=1;b<=this.barcodeColumnCount;b++){let y=this.detectionResultColumns[b].getCodewords()[m];y!=null&&(y.setRowNumber(o[m].getRowNumber()),y.hasValidRowNumber()||(this.detectionResultColumns[b].getCodewords()[m]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,h=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<h.length;m++){if(h[m]==null)continue;let b=h[m].getRowNumber(),y=0;for(let k=this.barcodeColumnCount+1;k>0&&y<this.ADJUST_ROW_NUMBER_SKIP;k--){let A=this.detectionResultColumns[k].getCodewords()[m];A!=null&&(y=Qn.adjustRowNumberIfValid(b,y,A),A.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,h=this.detectionResultColumns[0].getCodewords();for(let m=0;m<h.length;m++){if(h[m]==null)continue;let b=h[m].getRowNumber(),y=0;for(let k=1;k<this.barcodeColumnCount+1&&y<this.ADJUST_ROW_NUMBER_SKIP;k++){let A=this.detectionResultColumns[k].getCodewords()[m];A!=null&&(y=Qn.adjustRowNumberIfValid(b,y,A),A.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,h,m){return m==null||m.hasValidRowNumber()||(m.isValidRowNumber(o)?(m.setRowNumber(o),h=0):++h),h}adjustRowNumbers(o,h,m){if(!this.detectionResultColumns[o-1])return;let b=m[h],y=this.detectionResultColumns[o-1].getCodewords(),k=y;this.detectionResultColumns[o+1]!=null&&(k=this.detectionResultColumns[o+1].getCodewords());let A=new Array(14);A[2]=y[h],A[3]=k[h],h>0&&(A[0]=m[h-1],A[4]=y[h-1],A[5]=k[h-1]),h>1&&(A[8]=m[h-2],A[10]=y[h-2],A[11]=k[h-2]),h<m.length-1&&(A[1]=m[h+1],A[6]=y[h+1],A[7]=k[h+1]),h<m.length-2&&(A[9]=m[h+2],A[12]=y[h+2],A[13]=k[h+2]);for(let O of A)if(Qn.adjustRowNumber(b,O))return}static adjustRowNumber(o,h){return h==null?!1:h.hasValidRowNumber()&&h.getBucket()===o.getBucket()?(o.setRowNumber(h.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,h){this.detectionResultColumns[o]=h}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let h=new Bl;for(let m=0;m<o.getCodewords().length;m++){h.format("CW %3d:",m);for(let b=0;b<this.barcodeColumnCount+2;b++){if(this.detectionResultColumns[b]==null){h.format("    |   ");continue}let y=this.detectionResultColumns[b].getCodewords()[m];if(y==null){h.format("    |   ");continue}h.format(" %3d|%3d",y.getRowNumber(),y.getValue())}h.format("%n")}return h.toString()}}class hs{constructor(o,h,m,b){this.rowNumber=hs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(h),this.bucket=Math.trunc(m),this.value=Math.trunc(b)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==hs.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}hs.BARCODE_ROW_UNKNOWN=-1;class oa{static initialize(){for(let o=0;o<Zt.SYMBOL_TABLE.length;o++){let h=Zt.SYMBOL_TABLE[o],m=h&1;for(let b=0;b<Zt.BARS_IN_MODULE;b++){let y=0;for(;(h&1)===m;)y+=1,h>>=1;m=h&1,oa.RATIOS_TABLE[o]||(oa.RATIOS_TABLE[o]=new Array(Zt.BARS_IN_MODULE)),oa.RATIOS_TABLE[o][Zt.BARS_IN_MODULE-b-1]=Math.fround(y/Zt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let h=oa.getDecodedCodewordValue(oa.sampleBitCounts(o));return h!==-1?h:oa.getClosestDecodedValue(o)}static sampleBitCounts(o){let h=Se.sum(o),m=new Int32Array(Zt.BARS_IN_MODULE),b=0,y=0;for(let k=0;k<Zt.MODULES_IN_CODEWORD;k++){let A=h/(2*Zt.MODULES_IN_CODEWORD)+k*h/Zt.MODULES_IN_CODEWORD;y+o[b]<=A&&(y+=o[b],b++),m[b]++}return m}static getDecodedCodewordValue(o){let h=oa.getBitValue(o);return Zt.getCodeword(h)===-1?-1:h}static getBitValue(o){let h=0;for(let m=0;m<o.length;m++)for(let b=0;b<o[m];b++)h=h<<1|(m%2===0?1:0);return Math.trunc(h)}static getClosestDecodedValue(o){let h=Se.sum(o),m=new Array(Zt.BARS_IN_MODULE);if(h>1)for(let k=0;k<m.length;k++)m[k]=Math.fround(o[k]/h);let b=lt.MAX_VALUE,y=-1;this.bSymbolTableReady||oa.initialize();for(let k=0;k<oa.RATIOS_TABLE.length;k++){let A=0,O=oa.RATIOS_TABLE[k];for(let F=0;F<Zt.BARS_IN_MODULE;F++){let K=Math.fround(O[F]-m[F]);if(A+=Math.fround(K*K),A>=b)break}A<b&&(b=A,y=Zt.SYMBOL_TABLE[k])}return y}}oa.bSymbolTableReady=!1,oa.RATIOS_TABLE=new Array(Zt.SYMBOL_TABLE.length).map(re=>new Array(Zt.BARS_IN_MODULE));class Pl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class If{static parseLong(o,h=void 0){return parseInt(o,h)}}class Uc extends f{}Uc.kind="NullPointerException";class mu{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,h,m){if(o==null)throw new Uc;if(h<0||h>o.length||m<0||h+m>o.length||h+m<0)throw new T;if(m===0)return;for(let b=0;b<m;b++)this.write(o[h+b])}flush(){}close(){}}class Mo extends f{}class zc extends mu{constructor(o=32){if(super(),this.count=0,o<0)throw new v("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let m=this.buf.length<<1;if(m-o<0&&(m=o),m<0){if(o<0)throw new Mo;m=I.MAX_VALUE}this.buf=D.copyOfUint8Array(this.buf,m)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,h,m){if(h<0||h>o.length||m<0||h+m-o.length>0)throw new T;this.ensureCapacity(this.count+m),S.arraycopy(o,h,this.buf,this.count,m),this.count+=m}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return D.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var Yr;(function(re){re[re.ALPHA=0]="ALPHA",re[re.LOWER=1]="LOWER",re[re.MIXED=2]="MIXED",re[re.PUNCT=3]="PUNCT",re[re.ALPHA_SHIFT=4]="ALPHA_SHIFT",re[re.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Yr||(Yr={}));function Df(){if(typeof window<"u")return window.BigInt||null;if(typeof vo<"u")return vo.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Hc;function Ti(re){if(typeof Hc>"u"&&(Hc=Df()),Hc===null)throw new Error("BigInt is not supported!");return Hc(re)}function gu(){let re=[];re[0]=Ti(1);let o=Ti(900);re[1]=o;for(let h=2;h<16;h++)re[h]=re[h-1]*o;return re}class at{static decode(o,h){let m=new he(""),b=z.ISO8859_1;m.enableDecoding(b);let y=1,k=o[y++],A=new Pl;for(;y<o[0];){switch(k){case at.TEXT_COMPACTION_MODE_LATCH:y=at.textCompaction(o,y,m);break;case at.BYTE_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH_6:y=at.byteCompaction(k,o,b,y,m);break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(o[y++]);break;case at.NUMERIC_COMPACTION_MODE_LATCH:y=at.numericCompaction(o,y,m);break;case at.ECI_CHARSET:z.getCharacterSetECIByValue(o[y++]);break;case at.ECI_GENERAL_PURPOSE:y+=2;break;case at.ECI_USER_DEFINED:y++;break;case at.BEGIN_MACRO_PDF417_CONTROL_BLOCK:y=at.decodeMacroBlock(o,y,A);break;case at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case at.MACRO_PDF417_TERMINATOR:throw new M;default:y--,y=at.textCompaction(o,y,m);break}if(y<o.length)k=o[y++];else throw M.getFormatInstance()}if(m.length()===0)throw M.getFormatInstance();let O=new Ne(null,m.toString(),null,h);return O.setOther(A),O}static decodeMacroBlock(o,h,m){if(h+at.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw M.getFormatInstance();let b=new Int32Array(at.NUMBER_OF_SEQUENCE_CODEWORDS);for(let A=0;A<at.NUMBER_OF_SEQUENCE_CODEWORDS;A++,h++)b[A]=o[h];m.setSegmentIndex(I.parseInt(at.decodeBase900toBase10(b,at.NUMBER_OF_SEQUENCE_CODEWORDS)));let y=new he;h=at.textCompaction(o,h,y),m.setFileId(y.toString());let k=-1;for(o[h]===at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(k=h+1);h<o[0];)switch(o[h]){case at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(h++,o[h]){case at.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let A=new he;h=at.textCompaction(o,h+1,A),m.setFileName(A.toString());break;case at.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let O=new he;h=at.textCompaction(o,h+1,O),m.setSender(O.toString());break;case at.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let F=new he;h=at.textCompaction(o,h+1,F),m.setAddressee(F.toString());break;case at.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let K=new he;h=at.numericCompaction(o,h+1,K),m.setSegmentCount(I.parseInt(K.toString()));break;case at.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let ne=new he;h=at.numericCompaction(o,h+1,ne),m.setTimestamp(If.parseLong(ne.toString()));break;case at.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let ce=new he;h=at.numericCompaction(o,h+1,ce),m.setChecksum(I.parseInt(ce.toString()));break;case at.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ke=new he;h=at.numericCompaction(o,h+1,ke),m.setFileSize(If.parseLong(ke.toString()));break;default:throw M.getFormatInstance()}break;case at.MACRO_PDF417_TERMINATOR:h++,m.setLastSegment(!0);break;default:throw M.getFormatInstance()}if(k!==-1){let A=h-k;m.isLastSegment()&&A--,m.setOptionalData(D.copyOfRange(o,k,k+A))}return h}static textCompaction(o,h,m){let b=new Int32Array((o[0]-h)*2),y=new Int32Array((o[0]-h)*2),k=0,A=!1;for(;h<o[0]&&!A;){let O=o[h++];if(O<at.TEXT_COMPACTION_MODE_LATCH)b[k]=O/30,b[k+1]=O%30,k+=2;else switch(O){case at.TEXT_COMPACTION_MODE_LATCH:b[k++]=at.TEXT_COMPACTION_MODE_LATCH;break;case at.BYTE_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH_6:case at.NUMERIC_COMPACTION_MODE_LATCH:case at.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case at.MACRO_PDF417_TERMINATOR:h--,A=!0;break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b[k]=at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,O=o[h++],y[k]=O,k++;break}}return at.decodeTextCompaction(b,y,k,m),h}static decodeTextCompaction(o,h,m,b){let y=Yr.ALPHA,k=Yr.ALPHA,A=0;for(;A<m;){let O=o[A],F="";switch(y){case Yr.ALPHA:if(O<26)F=String.fromCharCode(65+O);else switch(O){case 26:F=" ";break;case at.LL:y=Yr.LOWER;break;case at.ML:y=Yr.MIXED;break;case at.PS:k=y,y=Yr.PUNCT_SHIFT;break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(h[A]);break;case at.TEXT_COMPACTION_MODE_LATCH:y=Yr.ALPHA;break}break;case Yr.LOWER:if(O<26)F=String.fromCharCode(97+O);else switch(O){case 26:F=" ";break;case at.AS:k=y,y=Yr.ALPHA_SHIFT;break;case at.ML:y=Yr.MIXED;break;case at.PS:k=y,y=Yr.PUNCT_SHIFT;break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(h[A]);break;case at.TEXT_COMPACTION_MODE_LATCH:y=Yr.ALPHA;break}break;case Yr.MIXED:if(O<at.PL)F=at.MIXED_CHARS[O];else switch(O){case at.PL:y=Yr.PUNCT;break;case 26:F=" ";break;case at.LL:y=Yr.LOWER;break;case at.AL:y=Yr.ALPHA;break;case at.PS:k=y,y=Yr.PUNCT_SHIFT;break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(h[A]);break;case at.TEXT_COMPACTION_MODE_LATCH:y=Yr.ALPHA;break}break;case Yr.PUNCT:if(O<at.PAL)F=at.PUNCT_CHARS[O];else switch(O){case at.PAL:y=Yr.ALPHA;break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(h[A]);break;case at.TEXT_COMPACTION_MODE_LATCH:y=Yr.ALPHA;break}break;case Yr.ALPHA_SHIFT:if(y=k,O<26)F=String.fromCharCode(65+O);else switch(O){case 26:F=" ";break;case at.TEXT_COMPACTION_MODE_LATCH:y=Yr.ALPHA;break}break;case Yr.PUNCT_SHIFT:if(y=k,O<at.PAL)F=at.PUNCT_CHARS[O];else switch(O){case at.PAL:y=Yr.ALPHA;break;case at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(h[A]);break;case at.TEXT_COMPACTION_MODE_LATCH:y=Yr.ALPHA;break}break}F!==""&&b.append(F),A++}}static byteCompaction(o,h,m,b,y){let k=new zc,A=0,O=0,F=!1;switch(o){case at.BYTE_COMPACTION_MODE_LATCH:let K=new Int32Array(6),ne=h[b++];for(;b<h[0]&&!F;)switch(K[A++]=ne,O=900*O+ne,ne=h[b++],ne){case at.TEXT_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH:case at.NUMERIC_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH_6:case at.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case at.MACRO_PDF417_TERMINATOR:b--,F=!0;break;default:if(A%5===0&&A>0){for(let ce=0;ce<6;++ce)k.write(Number(Ti(O)>>Ti(8*(5-ce))));O=0,A=0}break}b===h[0]&&ne<at.TEXT_COMPACTION_MODE_LATCH&&(K[A++]=ne);for(let ce=0;ce<A;ce++)k.write(K[ce]);break;case at.BYTE_COMPACTION_MODE_LATCH_6:for(;b<h[0]&&!F;){let ce=h[b++];if(ce<at.TEXT_COMPACTION_MODE_LATCH)A++,O=900*O+ce;else switch(ce){case at.TEXT_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH:case at.NUMERIC_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH_6:case at.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case at.MACRO_PDF417_TERMINATOR:b--,F=!0;break}if(A%5===0&&A>0){for(let ke=0;ke<6;++ke)k.write(Number(Ti(O)>>Ti(8*(5-ke))));O=0,A=0}}break}return y.append(Z.decode(k.toByteArray(),m)),b}static numericCompaction(o,h,m){let b=0,y=!1,k=new Int32Array(at.MAX_NUMERIC_CODEWORDS);for(;h<o[0]&&!y;){let A=o[h++];if(h===o[0]&&(y=!0),A<at.TEXT_COMPACTION_MODE_LATCH)k[b]=A,b++;else switch(A){case at.TEXT_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH:case at.BYTE_COMPACTION_MODE_LATCH_6:case at.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case at.MACRO_PDF417_TERMINATOR:h--,y=!0;break}(b%at.MAX_NUMERIC_CODEWORDS===0||A===at.NUMERIC_COMPACTION_MODE_LATCH||y)&&b>0&&(m.append(at.decodeBase900toBase10(k,b)),b=0)}return h}static decodeBase900toBase10(o,h){let m=Ti(0);for(let y=0;y<h;y++)m+=at.EXP900[h-y-1]*Ti(o[y]);let b=m.toString();if(b.charAt(0)!=="1")throw new M;return b.substring(1)}}at.TEXT_COMPACTION_MODE_LATCH=900,at.BYTE_COMPACTION_MODE_LATCH=901,at.NUMERIC_COMPACTION_MODE_LATCH=902,at.BYTE_COMPACTION_MODE_LATCH_6=924,at.ECI_USER_DEFINED=925,at.ECI_GENERAL_PURPOSE=926,at.ECI_CHARSET=927,at.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,at.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,at.MACRO_PDF417_TERMINATOR=922,at.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,at.MAX_NUMERIC_CODEWORDS=15,at.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,at.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,at.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,at.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,at.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,at.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,at.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,at.PL=25,at.LL=27,at.AS=27,at.ML=28,at.AL=28,at.PS=29,at.PAL=29,at.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,at.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",at.EXP900=Df()?gu():[],at.NUMBER_OF_SEQUENCE_CODEWORDS=2;class vr{constructor(){}static decode(o,h,m,b,y,k,A){let O=new ui(o,h,m,b,y),F=null,K=null,ne;for(let je=!0;;je=!1){if(h!=null&&(F=vr.getRowIndicatorColumn(o,O,h,!0,k,A)),b!=null&&(K=vr.getRowIndicatorColumn(o,O,b,!1,k,A)),ne=vr.merge(F,K),ne==null)throw se.getNotFoundInstance();let Fe=ne.getBoundingBox();if(je&&Fe!=null&&(Fe.getMinY()<O.getMinY()||Fe.getMaxY()>O.getMaxY()))O=Fe;else break}ne.setBoundingBox(O);let ce=ne.getBarcodeColumnCount()+1;ne.setDetectionResultColumn(0,F),ne.setDetectionResultColumn(ce,K);let ke=F!=null;for(let je=1;je<=ce;je++){let Fe=ke?je:ce-je;if(ne.getDetectionResultColumn(Fe)!==void 0)continue;let qe;Fe===0||Fe===ce?qe=new xu(O,Fe===0):qe=new Ni(O),ne.setDetectionResultColumn(Fe,qe);let nt=-1,At=nt;for(let St=O.getMinY();St<=O.getMaxY();St++){if(nt=vr.getStartColumn(ne,Fe,St,ke),nt<0||nt>O.getMaxX()){if(At===-1)continue;nt=At}let vt=vr.detectCodeword(o,O.getMinX(),O.getMaxX(),ke,nt,St,k,A);vt!=null&&(qe.setCodeword(St,vt),At=nt,k=Math.min(k,vt.getWidth()),A=Math.max(A,vt.getWidth()))}}return vr.createDecoderResult(ne)}static merge(o,h){if(o==null&&h==null)return null;let m=vr.getBarcodeMetadata(o,h);if(m==null)return null;let b=ui.merge(vr.adjustBoundingBox(o),vr.adjustBoundingBox(h));return new Qn(m,b)}static adjustBoundingBox(o){if(o==null)return null;let h=o.getRowHeights();if(h==null)return null;let m=vr.getMax(h),b=0;for(let A of h)if(b+=m-A,A>0)break;let y=o.getCodewords();for(let A=0;b>0&&y[A]==null;A++)b--;let k=0;for(let A=h.length-1;A>=0&&(k+=m-h[A],!(h[A]>0));A--);for(let A=y.length-1;k>0&&y[A]==null;A--)k--;return o.getBoundingBox().addMissingRows(b,k,o.isLeft())}static getMax(o){let h=-1;for(let m of o)h=Math.max(h,m);return h}static getBarcodeMetadata(o,h){let m;if(o==null||(m=o.getBarcodeMetadata())==null)return h==null?null:h.getBarcodeMetadata();let b;return h==null||(b=h.getBarcodeMetadata())==null?m:m.getColumnCount()!==b.getColumnCount()&&m.getErrorCorrectionLevel()!==b.getErrorCorrectionLevel()&&m.getRowCount()!==b.getRowCount()?null:m}static getRowIndicatorColumn(o,h,m,b,y,k){let A=new xu(h,b);for(let O=0;O<2;O++){let F=O===0?1:-1,K=Math.trunc(Math.trunc(m.getX()));for(let ne=Math.trunc(Math.trunc(m.getY()));ne<=h.getMaxY()&&ne>=h.getMinY();ne+=F){let ce=vr.detectCodeword(o,0,o.getWidth(),b,K,ne,y,k);ce!=null&&(A.setCodeword(ne,ce),b?K=ce.getStartX():K=ce.getEndX())}}return A}static adjustCodewordCount(o,h){let m=h[0][1],b=m.getValue(),y=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-vr.getNumberOfECCodeWords(o.getBarcodeECLevel());if(b.length===0){if(y<1||y>Zt.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();m.setValue(y)}else b[0]!==y&&m.setValue(y)}static createDecoderResult(o){let h=vr.createBarcodeMatrix(o);vr.adjustCodewordCount(o,h);let m=new Array,b=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),y=[],k=new Array;for(let O=0;O<o.getBarcodeRowCount();O++)for(let F=0;F<o.getBarcodeColumnCount();F++){let K=h[O][F+1].getValue(),ne=O*o.getBarcodeColumnCount()+F;K.length===0?m.push(ne):K.length===1?b[ne]=K[0]:(k.push(ne),y.push(K))}let A=new Array(y.length);for(let O=0;O<A.length;O++)A[O]=y[O];return vr.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),b,Zt.toIntArray(m),Zt.toIntArray(k),A)}static createDecoderResultFromAmbiguousValues(o,h,m,b,y){let k=new Int32Array(b.length),A=100;for(;A-- >0;){for(let O=0;O<k.length;O++)h[b[O]]=y[O][k[O]];try{return vr.decodeCodewords(h,o,m)}catch(O){if(!(O instanceof E))throw O}if(k.length===0)throw E.getChecksumInstance();for(let O=0;O<k.length;O++)if(k[O]<y[O].length-1){k[O]++;break}else if(k[O]=0,O===k.length-1)throw E.getChecksumInstance()}throw E.getChecksumInstance()}static createBarcodeMatrix(o){let h=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let b=0;b<h.length;b++)for(let y=0;y<h[b].length;y++)h[b][y]=new Ai;let m=0;for(let b of o.getDetectionResultColumns()){if(b!=null){for(let y of b.getCodewords())if(y!=null){let k=y.getRowNumber();if(k>=0){if(k>=h.length)continue;h[k][m].setValue(y.getValue())}}}m++}return h}static isValidBarcodeColumn(o,h){return h>=0&&h<=o.getBarcodeColumnCount()+1}static getStartColumn(o,h,m,b){let y=b?1:-1,k=null;if(vr.isValidBarcodeColumn(o,h-y)&&(k=o.getDetectionResultColumn(h-y).getCodeword(m)),k!=null)return b?k.getEndX():k.getStartX();if(k=o.getDetectionResultColumn(h).getCodewordNearby(m),k!=null)return b?k.getStartX():k.getEndX();if(vr.isValidBarcodeColumn(o,h-y)&&(k=o.getDetectionResultColumn(h-y).getCodewordNearby(m)),k!=null)return b?k.getEndX():k.getStartX();let A=0;for(;vr.isValidBarcodeColumn(o,h-y);){h-=y;for(let O of o.getDetectionResultColumn(h).getCodewords())if(O!=null)return(b?O.getEndX():O.getStartX())+y*A*(O.getEndX()-O.getStartX());A++}return b?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,h,m,b,y,k,A,O){y=vr.adjustCodewordStartColumn(o,h,m,b,y,k);let F=vr.getModuleBitCount(o,h,m,b,y,k);if(F==null)return null;let K,ne=Se.sum(F);if(b)K=y+ne;else{for(let je=0;je<F.length/2;je++){let Fe=F[je];F[je]=F[F.length-1-je],F[F.length-1-je]=Fe}K=y,y=K-ne}if(!vr.checkCodewordSkew(ne,A,O))return null;let ce=oa.getDecodedValue(F),ke=Zt.getCodeword(ce);return ke===-1?null:new hs(y,K,vr.getCodewordBucketNumber(ce),ke)}static getModuleBitCount(o,h,m,b,y,k){let A=y,O=new Int32Array(8),F=0,K=b?1:-1,ne=b;for(;(b?A<m:A>=h)&&F<O.length;)o.get(A,k)===ne?(O[F]++,A+=K):(F++,ne=!ne);return F===O.length||A===(b?m:h)&&F===O.length-1?O:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,h,m,b,y,k){let A=y,O=b?-1:1;for(let F=0;F<2;F++){for(;(b?A>=h:A<m)&&b===o.get(A,k);){if(Math.abs(y-A)>vr.CODEWORD_SKEW_SIZE)return y;A+=O}O=-O,b=!b}return A}static checkCodewordSkew(o,h,m){return h-vr.CODEWORD_SKEW_SIZE<=o&&o<=m+vr.CODEWORD_SKEW_SIZE}static decodeCodewords(o,h,m){if(o.length===0)throw M.getFormatInstance();let b=1<<h+1,y=vr.correctErrors(o,m,b);vr.verifyCodewordCount(o,b);let k=at.decode(o,""+h);return k.setErrorsCorrected(y),k.setErasures(m.length),k}static correctErrors(o,h,m){if(h!=null&&h.length>m/2+vr.MAX_ERRORS||m<0||m>vr.MAX_EC_CODEWORDS)throw E.getChecksumInstance();return vr.errorCorrection.decode(o,m,h)}static verifyCodewordCount(o,h){if(o.length<4)throw M.getFormatInstance();let m=o[0];if(m>o.length)throw M.getFormatInstance();if(m===0)if(h<o.length)o[0]=o.length-h;else throw M.getFormatInstance()}static getBitCountForCodeword(o){let h=new Int32Array(8),m=0,b=h.length-1;for(;!((o&1)!==m&&(m=o&1,b--,b<0));)h[b]++,o>>=1;return h}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return vr.getCodewordBucketNumber(vr.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let h=new Bl;for(let m=0;m<o.length;m++){h.format("Row %2d: ",m);for(let b=0;b<o[m].length;b++){let y=o[m][b];y.getValue().length===0?h.format("        ",null):h.format("%4d(%2d)",y.getValue()[0],y.getConfidence(y.getValue()[0]))}h.format("%n")}return h.toString()}}vr.CODEWORD_SKEW_SIZE=2,vr.MAX_ERRORS=3,vr.MAX_EC_CODEWORDS=512,vr.errorCorrection=new ci;class ca{decode(o,h=null){let m=ca.decode(o,h,!1);if(m==null||m.length===0||m[0]==null)throw se.getNotFoundInstance();return m[0]}decodeMultiple(o,h=null){try{return ca.decode(o,h,!0)}catch(m){throw m instanceof M||m instanceof E?se.getNotFoundInstance():m}}static decode(o,h,m){const b=new Array,y=cr.detectMultiple(o,h,m);for(const k of y.getPoints()){const A=vr.decode(y.getBits(),k[4],k[5],k[6],k[7],ca.getMinCodewordWidth(k),ca.getMaxCodewordWidth(k)),O=new U(A.getText(),A.getRawBytes(),void 0,k,ue.PDF_417);O.putMetadata(De.ERROR_CORRECTION_LEVEL,A.getECLevel());const F=A.getOther();F!=null&&O.putMetadata(De.PDF417_EXTRA_METADATA,F),b.push(O)}return b.map(k=>k)}static getMaxWidth(o,h){return o==null||h==null?0:Math.trunc(Math.abs(o.getX()-h.getX()))}static getMinWidth(o,h){return o==null||h==null?I.MAX_VALUE:Math.trunc(Math.abs(o.getX()-h.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(ca.getMaxWidth(o[0],o[4]),ca.getMaxWidth(o[6],o[2])*Zt.MODULES_IN_CODEWORD/Zt.MODULES_IN_STOP_PATTERN),Math.max(ca.getMaxWidth(o[1],o[5]),ca.getMaxWidth(o[7],o[3])*Zt.MODULES_IN_CODEWORD/Zt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(ca.getMinWidth(o[0],o[4]),ca.getMinWidth(o[6],o[2])*Zt.MODULES_IN_CODEWORD/Zt.MODULES_IN_STOP_PATTERN),Math.min(ca.getMinWidth(o[1],o[5]),ca.getMinWidth(o[7],o[3])*Zt.MODULES_IN_CODEWORD/Zt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Gc extends f{}Gc.kind="ReaderException";class Mf{constructor(o,h){this.verbose=o===!0,h&&this.setHints(h)}decode(o,h){return h&&this.setHints(h),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const h=!n(o)&&o.get(X.TRY_HARDER)===!0,m=n(o)?null:o.get(X.POSSIBLE_FORMATS),b=new Array;if(!n(m)){const y=m.some(k=>k===ue.UPC_A||k===ue.UPC_E||k===ue.EAN_13||k===ue.EAN_8||k===ue.CODABAR||k===ue.CODE_39||k===ue.CODE_93||k===ue.CODE_128||k===ue.ITF||k===ue.RSS_14||k===ue.RSS_EXPANDED);y&&!h&&b.push(new Sr(o,this.verbose)),m.includes(ue.QR_CODE)&&b.push(new oi),m.includes(ue.DATA_MATRIX)&&b.push(new li),m.includes(ue.AZTEC)&&b.push(new Mt),m.includes(ue.PDF_417)&&b.push(new ca),y&&h&&b.push(new Sr(o,this.verbose))}b.length===0&&(h||b.push(new Sr(o,this.verbose)),b.push(new oi),b.push(new li),b.push(new Mt),b.push(new ca),h&&b.push(new Sr(o,this.verbose))),this.readers=b}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new Gc("No readers where selected, nothing can be read.");for(const h of this.readers)try{return h.decode(o,this.hints)}catch(m){if(m instanceof Gc)continue}throw new se("No MultiFormat Readers were able to detect the code.")}}class Ff extends te{constructor(o=null,h=500){const m=new Mf;m.setHints(o),super(m,h)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class rm extends te{constructor(o=500){super(new ca,o)}}class nm extends te{constructor(o=500){super(new oi,o)}}var pu;(function(re){re[re.ERROR_CORRECTION=0]="ERROR_CORRECTION",re[re.CHARACTER_SET=1]="CHARACTER_SET",re[re.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",re[re.MIN_SIZE=3]="MIN_SIZE",re[re.MAX_SIZE=4]="MAX_SIZE",re[re.MARGIN=5]="MARGIN",re[re.PDF417_COMPACT=6]="PDF417_COMPACT",re[re.PDF417_COMPACTION=7]="PDF417_COMPACTION",re[re.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",re[re.AZTEC_LAYERS=9]="AZTEC_LAYERS",re[re.QR_VERSION=10]="QR_VERSION"})(pu||(pu={}));var qn=pu;class Fo{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new ye(o,Int32Array.from([1])))}buildGenerator(o){const h=this.cachedGenerators;if(o>=h.length){let m=h[h.length-1];const b=this.field;for(let y=h.length;y<=o;y++){const k=m.multiply(new ye(b,Int32Array.from([1,b.exp(y-1+b.getGeneratorBase())])));h.push(k),m=k}}return h[o]}encode(o,h){if(h===0)throw new v("No error correction bytes");const m=o.length-h;if(m<=0)throw new v("No data bytes provided");const b=this.buildGenerator(h),y=new Int32Array(m);S.arraycopy(o,0,y,0,m);let k=new ye(this.field,y);k=k.multiplyByMonomial(h,1);const O=k.divide(b)[1].getCoefficients(),F=h-O.length;for(let K=0;K<F;K++)o[m+K]=0;S.arraycopy(O,0,o,m+F,O.length)}}class Cn{constructor(){}static applyMaskPenaltyRule1(o){return Cn.applyMaskPenaltyRule1Internal(o,!0)+Cn.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let h=0;const m=o.getArray(),b=o.getWidth(),y=o.getHeight();for(let k=0;k<y-1;k++){const A=m[k];for(let O=0;O<b-1;O++){const F=A[O];F===A[O+1]&&F===m[k+1][O]&&F===m[k+1][O+1]&&h++}}return Cn.N2*h}static applyMaskPenaltyRule3(o){let h=0;const m=o.getArray(),b=o.getWidth(),y=o.getHeight();for(let k=0;k<y;k++)for(let A=0;A<b;A++){const O=m[k];A+6<b&&O[A]===1&&O[A+1]===0&&O[A+2]===1&&O[A+3]===1&&O[A+4]===1&&O[A+5]===0&&O[A+6]===1&&(Cn.isWhiteHorizontal(O,A-4,A)||Cn.isWhiteHorizontal(O,A+7,A+11))&&h++,k+6<y&&m[k][A]===1&&m[k+1][A]===0&&m[k+2][A]===1&&m[k+3][A]===1&&m[k+4][A]===1&&m[k+5][A]===0&&m[k+6][A]===1&&(Cn.isWhiteVertical(m,A,k-4,k)||Cn.isWhiteVertical(m,A,k+7,k+11))&&h++}return h*Cn.N3}static isWhiteHorizontal(o,h,m){h=Math.max(h,0),m=Math.min(m,o.length);for(let b=h;b<m;b++)if(o[b]===1)return!1;return!0}static isWhiteVertical(o,h,m,b){m=Math.max(m,0),b=Math.min(b,o.length);for(let y=m;y<b;y++)if(o[y][h]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let h=0;const m=o.getArray(),b=o.getWidth(),y=o.getHeight();for(let O=0;O<y;O++){const F=m[O];for(let K=0;K<b;K++)F[K]===1&&h++}const k=o.getHeight()*o.getWidth();return Math.floor(Math.abs(h*2-k)*10/k)*Cn.N4}static getDataMaskBit(o,h,m){let b,y;switch(o){case 0:b=m+h&1;break;case 1:b=m&1;break;case 2:b=h%3;break;case 3:b=(m+h)%3;break;case 4:b=Math.floor(m/2)+Math.floor(h/3)&1;break;case 5:y=m*h,b=(y&1)+y%3;break;case 6:y=m*h,b=(y&1)+y%3&1;break;case 7:y=m*h,b=y%3+(m+h&1)&1;break;default:throw new v("Invalid mask pattern: "+o)}return b===0}static applyMaskPenaltyRule1Internal(o,h){let m=0;const b=h?o.getHeight():o.getWidth(),y=h?o.getWidth():o.getHeight(),k=o.getArray();for(let A=0;A<b;A++){let O=0,F=-1;for(let K=0;K<y;K++){const ne=h?k[A][K]:k[K][A];ne===F?O++:(O>=5&&(m+=Cn.N1+(O-5)),O=1,F=ne)}O>=5&&(m+=Cn.N1+(O-5))}return m}}Cn.N1=3,Cn.N2=3,Cn.N3=40,Cn.N4=10;class Vc{constructor(o,h){this.width=o,this.height=h;const m=new Array(h);for(let b=0;b!==h;b++)m[b]=new Uint8Array(o);this.bytes=m}getHeight(){return this.height}getWidth(){return this.width}get(o,h){return this.bytes[h][o]}getArray(){return this.bytes}setNumber(o,h,m){this.bytes[h][o]=m}setBoolean(o,h,m){this.bytes[h][o]=m?1:0}clear(o){for(const h of this.bytes)D.fill(h,o)}equals(o){if(!(o instanceof Vc))return!1;const h=o;if(this.width!==h.width||this.height!==h.height)return!1;for(let m=0,b=this.height;m<b;++m){const y=this.bytes[m],k=h.bytes[m];for(let A=0,O=this.width;A<O;++A)if(y[A]!==k[A])return!1}return!0}toString(){const o=new he;for(let h=0,m=this.height;h<m;++h){const b=this.bytes[h];for(let y=0,k=this.width;y<k;++y)switch(b[y]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class Yi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new he;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<Yi.NUM_MASK_PATTERNS}}Yi.NUM_MASK_PATTERNS=8;class Jr extends f{}Jr.kind="WriterException";class Jt{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,h,m,b,y){Jt.clearMatrix(y),Jt.embedBasicPatterns(m,y),Jt.embedTypeInfo(h,b,y),Jt.maybeEmbedVersionInfo(m,y),Jt.embedDataBits(o,b,y)}static embedBasicPatterns(o,h){Jt.embedPositionDetectionPatternsAndSeparators(h),Jt.embedDarkDotAtLeftBottomCorner(h),Jt.maybeEmbedPositionAdjustmentPatterns(o,h),Jt.embedTimingPatterns(h)}static embedTypeInfo(o,h,m){const b=new L;Jt.makeTypeInfoBits(o,h,b);for(let y=0,k=b.getSize();y<k;++y){const A=b.get(b.getSize()-1-y),O=Jt.TYPE_INFO_COORDINATES[y],F=O[0],K=O[1];if(m.setBoolean(F,K,A),y<8){const ne=m.getWidth()-y-1;m.setBoolean(ne,8,A)}else{const ce=m.getHeight()-7+(y-8);m.setBoolean(8,ce,A)}}}static maybeEmbedVersionInfo(o,h){if(o.getVersionNumber()<7)return;const m=new L;Jt.makeVersionInfoBits(o,m);let b=17;for(let y=0;y<6;++y)for(let k=0;k<3;++k){const A=m.get(b);b--,h.setBoolean(y,h.getHeight()-11+k,A),h.setBoolean(h.getHeight()-11+k,y,A)}}static embedDataBits(o,h,m){let b=0,y=-1,k=m.getWidth()-1,A=m.getHeight()-1;for(;k>0;){for(k===6&&(k-=1);A>=0&&A<m.getHeight();){for(let O=0;O<2;++O){const F=k-O;if(!Jt.isEmpty(m.get(F,A)))continue;let K;b<o.getSize()?(K=o.get(b),++b):K=!1,h!==255&&Cn.getDataMaskBit(h,F,A)&&(K=!K),m.setBoolean(F,A,K)}A+=y}y=-y,A+=y,k-=2}if(b!==o.getSize())throw new Jr("Not all bits consumed: "+b+"/"+o.getSize())}static findMSBSet(o){return 32-I.numberOfLeadingZeros(o)}static calculateBCHCode(o,h){if(h===0)throw new v("0 polynomial");const m=Jt.findMSBSet(h);for(o<<=m-1;Jt.findMSBSet(o)>=m;)o^=h<<Jt.findMSBSet(o)-m;return o}static makeTypeInfoBits(o,h,m){if(!Yi.isValidMaskPattern(h))throw new Jr("Invalid mask pattern");const b=o.getBits()<<3|h;m.appendBits(b,5);const y=Jt.calculateBCHCode(b,Jt.TYPE_INFO_POLY);m.appendBits(y,10);const k=new L;if(k.appendBits(Jt.TYPE_INFO_MASK_PATTERN,15),m.xor(k),m.getSize()!==15)throw new Jr("should not happen but we got: "+m.getSize())}static makeVersionInfoBits(o,h){h.appendBits(o.getVersionNumber(),6);const m=Jt.calculateBCHCode(o.getVersionNumber(),Jt.VERSION_INFO_POLY);if(h.appendBits(m,12),h.getSize()!==18)throw new Jr("should not happen but we got: "+h.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let h=8;h<o.getWidth()-8;++h){const m=(h+1)%2;Jt.isEmpty(o.get(h,6))&&o.setNumber(h,6,m),Jt.isEmpty(o.get(6,h))&&o.setNumber(6,h,m)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new Jr;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,h,m){for(let b=0;b<8;++b){if(!Jt.isEmpty(m.get(o+b,h)))throw new Jr;m.setNumber(o+b,h,0)}}static embedVerticalSeparationPattern(o,h,m){for(let b=0;b<7;++b){if(!Jt.isEmpty(m.get(o,h+b)))throw new Jr;m.setNumber(o,h+b,0)}}static embedPositionAdjustmentPattern(o,h,m){for(let b=0;b<5;++b){const y=Jt.POSITION_ADJUSTMENT_PATTERN[b];for(let k=0;k<5;++k)m.setNumber(o+k,h+b,y[k])}}static embedPositionDetectionPattern(o,h,m){for(let b=0;b<7;++b){const y=Jt.POSITION_DETECTION_PATTERN[b];for(let k=0;k<7;++k)m.setNumber(o+k,h+b,y[k])}}static embedPositionDetectionPatternsAndSeparators(o){const h=Jt.POSITION_DETECTION_PATTERN[0].length;Jt.embedPositionDetectionPattern(0,0,o),Jt.embedPositionDetectionPattern(o.getWidth()-h,0,o),Jt.embedPositionDetectionPattern(0,o.getWidth()-h,o);const m=8;Jt.embedHorizontalSeparationPattern(0,m-1,o),Jt.embedHorizontalSeparationPattern(o.getWidth()-m,m-1,o),Jt.embedHorizontalSeparationPattern(0,o.getWidth()-m,o);const b=7;Jt.embedVerticalSeparationPattern(b,0,o),Jt.embedVerticalSeparationPattern(o.getHeight()-b-1,0,o),Jt.embedVerticalSeparationPattern(b,o.getHeight()-b,o)}static maybeEmbedPositionAdjustmentPatterns(o,h){if(o.getVersionNumber()<2)return;const m=o.getVersionNumber()-1,b=Jt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[m];for(let y=0,k=b.length;y!==k;y++){const A=b[y];if(A>=0)for(let O=0;O!==k;O++){const F=b[O];F>=0&&Jt.isEmpty(h.get(F,A))&&Jt.embedPositionAdjustmentPattern(F-2,A-2,h)}}}}Jt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Jt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Jt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Jt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Jt.VERSION_INFO_POLY=7973,Jt.TYPE_INFO_POLY=1335,Jt.TYPE_INFO_MASK_PATTERN=21522;class am{constructor(o,h){this.dataBytes=o,this.errorCorrectionBytes=h}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class fn{constructor(){}static calculateMaskPenalty(o){return Cn.applyMaskPenaltyRule1(o)+Cn.applyMaskPenaltyRule2(o)+Cn.applyMaskPenaltyRule3(o)+Cn.applyMaskPenaltyRule4(o)}static encode(o,h,m=null){let b=fn.DEFAULT_BYTE_MODE_ENCODING;const y=m!==null&&m.get(qn.CHARACTER_SET)!==void 0;y&&(b=m.get(qn.CHARACTER_SET).toString());const k=this.chooseMode(o,b),A=new L;if(k===Xt.BYTE&&(y||fn.DEFAULT_BYTE_MODE_ENCODING!==b)){const St=z.getCharacterSetECIByName(b);St!==void 0&&this.appendECI(St,A)}this.appendModeInfo(k,A);const O=new L;this.appendBytes(o,k,O,b);let F;if(m!==null&&m.get(qn.QR_VERSION)!==void 0){const St=Number.parseInt(m.get(qn.QR_VERSION).toString(),10);F=Gt.getVersionForNumber(St);const vt=this.calculateBitsNeeded(k,A,O,F);if(!this.willFit(vt,F,h))throw new Jr("Data too big for requested version")}else F=this.recommendVersion(h,k,A,O);const K=new L;K.appendBitArray(A);const ne=k===Xt.BYTE?O.getSizeInBytes():o.length;this.appendLengthInfo(ne,F,k,K),K.appendBitArray(O);const ce=F.getECBlocksForLevel(h),ke=F.getTotalCodewords()-ce.getTotalECCodewords();this.terminateBits(ke,K);const je=this.interleaveWithECBytes(K,F.getTotalCodewords(),ke,ce.getNumBlocks()),Fe=new Yi;Fe.setECLevel(h),Fe.setMode(k),Fe.setVersion(F);const qe=F.getDimensionForVersion(),nt=new Vc(qe,qe),At=this.chooseMaskPattern(je,h,F,nt);return Fe.setMaskPattern(At),Jt.buildMatrix(je,h,F,At,nt),Fe.setMatrix(nt),Fe}static recommendVersion(o,h,m,b){const y=this.calculateBitsNeeded(h,m,b,Gt.getVersionForNumber(1)),k=this.chooseVersion(y,o),A=this.calculateBitsNeeded(h,m,b,k);return this.chooseVersion(A,o)}static calculateBitsNeeded(o,h,m,b){return h.getSize()+o.getCharacterCountBits(b)+m.getSize()}static getAlphanumericCode(o){return o<fn.ALPHANUMERIC_TABLE.length?fn.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,h=null){if(z.SJIS.getName()===h&&this.isOnlyDoubleByteKanji(o))return Xt.KANJI;let m=!1,b=!1;for(let y=0,k=o.length;y<k;++y){const A=o.charAt(y);if(fn.isDigit(A))m=!0;else if(this.getAlphanumericCode(A.charCodeAt(0))!==-1)b=!0;else return Xt.BYTE}return b?Xt.ALPHANUMERIC:m?Xt.NUMERIC:Xt.BYTE}static isOnlyDoubleByteKanji(o){let h;try{h=Z.encode(o,z.SJIS)}catch{return!1}const m=h.length;if(m%2!==0)return!1;for(let b=0;b<m;b+=2){const y=h[b]&255;if((y<129||y>159)&&(y<224||y>235))return!1}return!0}static chooseMaskPattern(o,h,m,b){let y=Number.MAX_SAFE_INTEGER,k=-1;for(let A=0;A<Yi.NUM_MASK_PATTERNS;A++){Jt.buildMatrix(o,h,m,A,b);let O=this.calculateMaskPenalty(b);O<y&&(y=O,k=A)}return k}static chooseVersion(o,h){for(let m=1;m<=40;m++){const b=Gt.getVersionForNumber(m);if(fn.willFit(o,b,h))return b}throw new Jr("Data too big")}static willFit(o,h,m){const b=h.getTotalCodewords(),k=h.getECBlocksForLevel(m).getTotalECCodewords(),A=b-k,O=(o+7)/8;return A>=O}static terminateBits(o,h){const m=o*8;if(h.getSize()>m)throw new Jr("data bits cannot fit in the QR Code"+h.getSize()+" > "+m);for(let k=0;k<4&&h.getSize()<m;++k)h.appendBit(!1);const b=h.getSize()&7;if(b>0)for(let k=b;k<8;k++)h.appendBit(!1);const y=o-h.getSizeInBytes();for(let k=0;k<y;++k)h.appendBits((k&1)===0?236:17,8);if(h.getSize()!==m)throw new Jr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,h,m,b,y,k){if(b>=m)throw new Jr("Block ID too large");const A=o%m,O=m-A,F=Math.floor(o/m),K=F+1,ne=Math.floor(h/m),ce=ne+1,ke=F-ne,je=K-ce;if(ke!==je)throw new Jr("EC bytes mismatch");if(m!==O+A)throw new Jr("RS blocks mismatch");if(o!==(ne+ke)*O+(ce+je)*A)throw new Jr("Total bytes mismatch");b<O?(y[0]=ne,k[0]=ke):(y[0]=ce,k[0]=je)}static interleaveWithECBytes(o,h,m,b){if(o.getSizeInBytes()!==m)throw new Jr("Number of bits and data bytes does not match");let y=0,k=0,A=0;const O=new Array;for(let K=0;K<b;++K){const ne=new Int32Array(1),ce=new Int32Array(1);fn.getNumDataBytesAndNumECBytesForBlockID(h,m,b,K,ne,ce);const ke=ne[0],je=new Uint8Array(ke);o.toBytes(8*y,je,0,ke);const Fe=fn.generateECBytes(je,ce[0]);O.push(new am(je,Fe)),k=Math.max(k,ke),A=Math.max(A,Fe.length),y+=ne[0]}if(m!==y)throw new Jr("Data bytes does not match offset");const F=new L;for(let K=0;K<k;++K)for(const ne of O){const ce=ne.getDataBytes();K<ce.length&&F.appendBits(ce[K],8)}for(let K=0;K<A;++K)for(const ne of O){const ce=ne.getErrorCorrectionBytes();K<ce.length&&F.appendBits(ce[K],8)}if(h!==F.getSizeInBytes())throw new Jr("Interleaving error: "+h+" and "+F.getSizeInBytes()+" differ.");return F}static generateECBytes(o,h){const m=o.length,b=new Int32Array(m+h);for(let k=0;k<m;k++)b[k]=o[k]&255;new Fo(Ce.QR_CODE_FIELD_256).encode(b,h);const y=new Uint8Array(h);for(let k=0;k<h;k++)y[k]=b[m+k];return y}static appendModeInfo(o,h){h.appendBits(o.getBits(),4)}static appendLengthInfo(o,h,m,b){const y=m.getCharacterCountBits(h);if(o>=1<<y)throw new Jr(o+" is bigger than "+((1<<y)-1));b.appendBits(o,y)}static appendBytes(o,h,m,b){switch(h){case Xt.NUMERIC:fn.appendNumericBytes(o,m);break;case Xt.ALPHANUMERIC:fn.appendAlphanumericBytes(o,m);break;case Xt.BYTE:fn.append8BitBytes(o,m,b);break;case Xt.KANJI:fn.appendKanjiBytes(o,m);break;default:throw new Jr("Invalid mode: "+h)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const h=fn.getDigit(o);return h>=0&&h<=9}static appendNumericBytes(o,h){const m=o.length;let b=0;for(;b<m;){const y=fn.getDigit(o.charAt(b));if(b+2<m){const k=fn.getDigit(o.charAt(b+1)),A=fn.getDigit(o.charAt(b+2));h.appendBits(y*100+k*10+A,10),b+=3}else if(b+1<m){const k=fn.getDigit(o.charAt(b+1));h.appendBits(y*10+k,7),b+=2}else h.appendBits(y,4),b++}}static appendAlphanumericBytes(o,h){const m=o.length;let b=0;for(;b<m;){const y=fn.getAlphanumericCode(o.charCodeAt(b));if(y===-1)throw new Jr;if(b+1<m){const k=fn.getAlphanumericCode(o.charCodeAt(b+1));if(k===-1)throw new Jr;h.appendBits(y*45+k,11),b+=2}else h.appendBits(y,6),b++}}static append8BitBytes(o,h,m){let b;try{b=Z.encode(o,m)}catch(y){throw new Jr(y)}for(let y=0,k=b.length;y!==k;y++){const A=b[y];h.appendBits(A,8)}}static appendKanjiBytes(o,h){let m;try{m=Z.encode(o,z.SJIS)}catch(y){throw new Jr(y)}const b=m.length;for(let y=0;y<b;y+=2){const k=m[y]&255,A=m[y+1]&255,O=k<<8&4294967295|A;let F=-1;if(O>=33088&&O<=40956?F=O-33088:O>=57408&&O<=60351&&(F=O-49472),F===-1)throw new Jr("Invalid byte sequence");const K=(F>>8)*192+(F&255);h.appendBits(K,13)}}static appendECI(o,h){h.appendBits(Xt.ECI.getBits(),4),h.appendBits(o.getValue(),8)}}fn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),fn.DEFAULT_BYTE_MODE_ENCODING=z.UTF8.getName();class $i{write(o,h,m,b=null){if(o.length===0)throw new v("Found empty contents");if(h<0||m<0)throw new v("Requested dimensions are too small: "+h+"x"+m);let y=Nr.L,k=$i.QUIET_ZONE_SIZE;b!==null&&(b.get(qn.ERROR_CORRECTION)!==void 0&&(y=Nr.fromString(b.get(qn.ERROR_CORRECTION).toString())),b.get(qn.MARGIN)!==void 0&&(k=Number.parseInt(b.get(qn.MARGIN).toString(),10)));const A=fn.encode(o,y,b);return this.renderResult(A,h,m,k)}writeToDom(o,h,m,b,y=null){typeof o=="string"&&(o=document.querySelector(o));const k=this.write(h,m,b,y);o&&o.appendChild(k)}renderResult(o,h,m,b){const y=o.getMatrix();if(y===null)throw new Me;const k=y.getWidth(),A=y.getHeight(),O=k+b*2,F=A+b*2,K=Math.max(h,O),ne=Math.max(m,F),ce=Math.min(Math.floor(K/O),Math.floor(ne/F)),ke=Math.floor((K-k*ce)/2),je=Math.floor((ne-A*ce)/2),Fe=this.createSVGElement(K,ne);for(let qe=0,nt=je;qe<A;qe++,nt+=ce)for(let At=0,St=ke;At<k;At++,St+=ce)if(y.get(At,qe)===1){const vt=this.createSvgRectElement(St,nt,ce,ce);Fe.appendChild(vt)}return Fe}createSVGElement(o,h){const m=document.createElementNS($i.SVG_NS,"svg");return m.setAttributeNS(null,"height",o.toString()),m.setAttributeNS(null,"width",h.toString()),m}createSvgRectElement(o,h,m,b){const y=document.createElementNS($i.SVG_NS,"rect");return y.setAttributeNS(null,"x",o.toString()),y.setAttributeNS(null,"y",h.toString()),y.setAttributeNS(null,"height",m.toString()),y.setAttributeNS(null,"width",b.toString()),y.setAttributeNS(null,"fill","#000000"),y}}$i.QUIET_ZONE_SIZE=4,$i.SVG_NS="http://www.w3.org/2000/svg";class Ul{encode(o,h,m,b,y){if(o.length===0)throw new v("Found empty contents");if(h!==ue.QR_CODE)throw new v("Can only encode QR_CODE, but got "+h);if(m<0||b<0)throw new v(`Requested dimensions are too small: ${m}x${b}`);let k=Nr.L,A=Ul.QUIET_ZONE_SIZE;y!==null&&(y.get(qn.ERROR_CORRECTION)!==void 0&&(k=Nr.fromString(y.get(qn.ERROR_CORRECTION).toString())),y.get(qn.MARGIN)!==void 0&&(A=Number.parseInt(y.get(qn.MARGIN).toString(),10)));const O=fn.encode(o,k,y);return Ul.renderResult(O,m,b,A)}static renderResult(o,h,m,b){const y=o.getMatrix();if(y===null)throw new Me;const k=y.getWidth(),A=y.getHeight(),O=k+b*2,F=A+b*2,K=Math.max(h,O),ne=Math.max(m,F),ce=Math.min(Math.floor(K/O),Math.floor(ne/F)),ke=Math.floor((K-k*ce)/2),je=Math.floor((ne-A*ce)/2),Fe=new q(K,ne);for(let qe=0,nt=je;qe<A;qe++,nt+=ce)for(let At=0,St=ke;At<k;At++,St+=ce)y.get(At,qe)===1&&Fe.setRegion(St,nt,ce,ce);return Fe}}Ul.QUIET_ZONE_SIZE=4;class sm{encode(o,h,m,b,y){let k;if(h===ue.QR_CODE)k=new Ul;else throw new v("No encoder available for format "+h);return k.encode(o,h,m,b,y)}}class Ps extends ge{constructor(o,h,m,b,y,k,A,O){if(super(k,A),this.yuvData=o,this.dataWidth=h,this.dataHeight=m,this.left=b,this.top=y,b+k>h||y+A>m)throw new v("Crop rectangle does not fit within image data.");O&&this.reverseHorizontal(k,A)}getRow(o,h){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);const m=this.getWidth();(h==null||h.length<m)&&(h=new Uint8ClampedArray(m));const b=(o+this.top)*this.dataWidth+this.left;return S.arraycopy(this.yuvData,b,h,0,m),h}getMatrix(){const o=this.getWidth(),h=this.getHeight();if(o===this.dataWidth&&h===this.dataHeight)return this.yuvData;const m=o*h,b=new Uint8ClampedArray(m);let y=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return S.arraycopy(this.yuvData,y,b,0,m),b;for(let k=0;k<h;k++){const A=k*o;S.arraycopy(this.yuvData,y,b,A,o),y+=this.dataWidth}return b}isCropSupported(){return!0}crop(o,h,m,b){return new Ps(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+h,m,b,!1)}renderThumbnail(){const o=this.getWidth()/Ps.THUMBNAIL_SCALE_FACTOR,h=this.getHeight()/Ps.THUMBNAIL_SCALE_FACTOR,m=new Int32Array(o*h),b=this.yuvData;let y=this.top*this.dataWidth+this.left;for(let k=0;k<h;k++){const A=k*o;for(let O=0;O<o;O++){const F=b[y+O*Ps.THUMBNAIL_SCALE_FACTOR]&255;m[A+O]=4278190080|F*65793}y+=this.dataWidth*Ps.THUMBNAIL_SCALE_FACTOR}return m}getThumbnailWidth(){return this.getWidth()/Ps.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ps.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,h){const m=this.yuvData;for(let b=0,y=this.top*this.dataWidth+this.left;b<h;b++,y+=this.dataWidth){const k=y+o/2;for(let A=y,O=y+o-1;A<k;A++,O--){const F=m[A];m[A]=m[O],m[O]=F}}}invert(){return new ie(this)}}Ps.THUMBNAIL_SCALE_FACTOR=2;class bu extends ge{constructor(o,h,m,b,y,k,A){if(super(h,m),this.dataWidth=b,this.dataHeight=y,this.left=k,this.top=A,o.BYTES_PER_ELEMENT===4){const O=h*m,F=new Uint8ClampedArray(O);for(let K=0;K<O;K++){const ne=o[K],ce=ne>>16&255,ke=ne>>7&510,je=ne&255;F[K]=(ce+ke+je)/4&255}this.luminances=F}else this.luminances=o;if(b===void 0&&(this.dataWidth=h),y===void 0&&(this.dataHeight=m),k===void 0&&(this.left=0),A===void 0&&(this.top=0),this.left+h>this.dataWidth||this.top+m>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(o,h){if(o<0||o>=this.getHeight())throw new v("Requested row is outside the image: "+o);const m=this.getWidth();(h==null||h.length<m)&&(h=new Uint8ClampedArray(m));const b=(o+this.top)*this.dataWidth+this.left;return S.arraycopy(this.luminances,b,h,0,m),h}getMatrix(){const o=this.getWidth(),h=this.getHeight();if(o===this.dataWidth&&h===this.dataHeight)return this.luminances;const m=o*h,b=new Uint8ClampedArray(m);let y=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return S.arraycopy(this.luminances,y,b,0,m),b;for(let k=0;k<h;k++){const A=k*o;S.arraycopy(this.luminances,y,b,A,o),y+=this.dataWidth}return b}isCropSupported(){return!0}crop(o,h,m,b){return new bu(this.luminances,m,b,this.dataWidth,this.dataHeight,this.left+o,this.top+h)}invert(){return new ie(this)}}class Lf extends z{static forName(o){return this.getCharacterSetECIByName(o)}}class Lo{}Lo.ISO_8859_1=z.ISO8859_1;class zl{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class Bf{static singletonList(o){return[o]}static min(o,h){return o.sort(h)[0]}}class Pf{constructor(o){this.previous=o}getPrevious(){return this.previous}}class Zi extends Pf{constructor(o,h,m){super(o),this.value=h,this.bitCount=m}appendTo(o,h){o.appendBits(this.value,this.bitCount)}add(o,h){return new Zi(this,o,h)}addBinaryShift(o,h){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Zi(this,o,h)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+I.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class Wc extends Zi{constructor(o,h,m){super(o,0,0),this.binaryShiftStart=h,this.binaryShiftByteCount=m}appendTo(o,h){for(let m=0;m<this.binaryShiftByteCount;m++)(m===0||m===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):m===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(h[this.binaryShiftStart+m],8)}addBinaryShift(o,h){return new Wc(this,o,h)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Uf(re,o,h){return new Wc(re,o,h)}function Hl(re,o,h){return new Zi(re,o,h)}const Gl=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ci=0,qc=1,Qa=2,vu=3,xs=4,Bo=new Zi(null,0,0),Ji=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function im(re){for(let o of re)D.fill(o,-1);return re[Ci][xs]=0,re[qc][xs]=0,re[qc][Ci]=28,re[vu][xs]=0,re[Qa][xs]=0,re[Qa][Ci]=15,re}const Po=im(D.createInt32Array(6,6));class ms{constructor(o,h,m,b){this.token=o,this.mode=h,this.binaryShiftByteCount=m,this.bitCount=b}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,h){let m=this.bitCount,b=this.token;if(o!==this.mode){let k=Ji[this.mode][o];b=Hl(b,k&65535,k>>16),m+=k>>16}let y=o===Qa?4:5;return b=Hl(b,h,y),new ms(b,o,0,m+y)}shiftAndAppend(o,h){let m=this.token,b=this.mode===Qa?4:5;return m=Hl(m,Po[this.mode][o],b),m=Hl(m,h,5),new ms(m,this.mode,0,this.bitCount+b+5)}addBinaryShiftChar(o){let h=this.token,m=this.mode,b=this.bitCount;if(this.mode===xs||this.mode===Qa){let A=Ji[m][Ci];h=Hl(h,A&65535,A>>16),b+=A>>16,m=Ci}let y=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,k=new ms(h,m,this.binaryShiftByteCount+1,b+y);return k.binaryShiftByteCount===2078&&(k=k.endBinaryShift(o+1)),k}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let h=this.token;return h=Uf(h,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new ms(h,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let h=this.bitCount+(Ji[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?h+=ms.calculateBinaryShiftCost(o)-ms.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(h+=10),h<=o.bitCount}toBitArray(o){let h=[];for(let b=this.endBinaryShift(o.length).token;b!==null;b=b.getPrevious())h.unshift(b);let m=new L;for(const b of h)b.appendTo(m,o);return m}toString(){return H.format("%s bits=%d bytes=%d",Gl[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}ms.INITIAL_STATE=new ms(Bo,Ci,0,0);function zf(re){const o=H.getCharCode(" "),h=H.getCharCode("."),m=H.getCharCode(",");re[Ci][o]=1;const b=H.getCharCode("Z"),y=H.getCharCode("A");for(let ce=y;ce<=b;ce++)re[Ci][ce]=ce-y+2;re[qc][o]=1;const k=H.getCharCode("z"),A=H.getCharCode("a");for(let ce=A;ce<=k;ce++)re[qc][ce]=ce-A+2;re[Qa][o]=1;const O=H.getCharCode("9"),F=H.getCharCode("0");for(let ce=F;ce<=O;ce++)re[Qa][ce]=ce-F+2;re[Qa][m]=12,re[Qa][h]=13;const K=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let ce=0;ce<K.length;ce++)re[vu][H.getCharCode(K[ce])]=ce;const ne=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let ce=0;ce<ne.length;ce++)H.getCharCode(ne[ce])>0&&(re[xs][H.getCharCode(ne[ce])]=ce);return re}const Uo=zf(D.createInt32Array(5,256));class Qi{constructor(o){this.text=o}encode(){const o=H.getCharCode(" "),h=H.getCharCode(`
`);let m=Bf.singletonList(ms.INITIAL_STATE);for(let y=0;y<this.text.length;y++){let k,A=y+1<this.text.length?this.text[y+1]:0;switch(this.text[y]){case H.getCharCode("\r"):k=A===h?2:0;break;case H.getCharCode("."):k=A===o?3:0;break;case H.getCharCode(","):k=A===o?4:0;break;case H.getCharCode(":"):k=A===o?5:0;break;default:k=0}k>0?(m=Qi.updateStateListForPair(m,y,k),y++):m=this.updateStateListForChar(m,y)}return Bf.min(m,(y,k)=>y.getBitCount()-k.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,h){const m=[];for(let b of o)this.updateStateForChar(b,h,m);return Qi.simplifyStates(m)}updateStateForChar(o,h,m){let b=this.text[h]&255,y=Uo[o.getMode()][b]>0,k=null;for(let A=0;A<=xs;A++){let O=Uo[A][b];if(O>0){if(k==null&&(k=o.endBinaryShift(h)),!y||A===o.getMode()||A===Qa){const F=k.latchAndAppend(A,O);m.push(F)}if(!y&&Po[o.getMode()][A]>=0){const F=k.shiftAndAppend(A,O);m.push(F)}}}if(o.getBinaryShiftByteCount()>0||Uo[o.getMode()][b]===0){let A=o.addBinaryShiftChar(h);m.push(A)}}static updateStateListForPair(o,h,m){const b=[];for(let y of o)this.updateStateForPair(y,h,m,b);return this.simplifyStates(b)}static updateStateForPair(o,h,m,b){let y=o.endBinaryShift(h);if(b.push(y.latchAndAppend(xs,m)),o.getMode()!==xs&&b.push(y.shiftAndAppend(xs,m)),m===3||m===4){let k=y.latchAndAppend(Qa,16-m).latchAndAppend(Qa,1);b.push(k)}if(o.getBinaryShiftByteCount()>0){let k=o.addBinaryShiftChar(h).addBinaryShiftChar(h+1);b.push(k)}}static simplifyStates(o){let h=[];for(const m of o){let b=!0;for(const y of h){if(y.isBetterThanOrEqualTo(m)){b=!1;break}m.isBetterThanOrEqualTo(y)&&(h=h.filter(k=>k!==y))}b&&h.push(m)}return h}}class Rr{constructor(){}static encodeBytes(o){return Rr.encode(o,Rr.DEFAULT_EC_PERCENT,Rr.DEFAULT_AZTEC_LAYERS)}static encode(o,h,m){let b=new Qi(o).encode(),y=I.truncDivision(b.getSize()*h,100)+11,k=b.getSize()+y,A,O,F,K,ne;if(m!==Rr.DEFAULT_AZTEC_LAYERS){if(A=m<0,O=Math.abs(m),O>(A?Rr.MAX_NB_BITS_COMPACT:Rr.MAX_NB_BITS))throw new v(H.format("Illegal value %s for layers",m));F=Rr.totalBitsInLayer(O,A),K=Rr.WORD_SIZE[O];let vt=F-F%K;if(ne=Rr.stuffBits(b,K),ne.getSize()+y>vt)throw new v("Data to large for user specified layer");if(A&&ne.getSize()>K*64)throw new v("Data to large for user specified layer")}else{K=0,ne=null;for(let vt=0;;vt++){if(vt>Rr.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(A=vt<=3,O=A?vt+1:vt,F=Rr.totalBitsInLayer(O,A),k>F)continue;(ne==null||K!==Rr.WORD_SIZE[O])&&(K=Rr.WORD_SIZE[O],ne=Rr.stuffBits(b,K));let Er=F-F%K;if(!(A&&ne.getSize()>K*64)&&ne.getSize()+y<=Er)break}}let ce=Rr.generateCheckWords(ne,F,K),ke=ne.getSize()/K,je=Rr.generateModeMessage(A,O,ke),Fe=(A?11:14)+O*4,qe=new Int32Array(Fe),nt;if(A){nt=Fe;for(let vt=0;vt<qe.length;vt++)qe[vt]=vt}else{nt=Fe+1+2*I.truncDivision(I.truncDivision(Fe,2)-1,15);let vt=I.truncDivision(Fe,2),Er=I.truncDivision(nt,2);for(let ur=0;ur<vt;ur++){let Fn=ur+I.truncDivision(ur,15);qe[vt-ur-1]=Er-Fn-1,qe[vt+ur]=Er+Fn+1}}let At=new q(nt);for(let vt=0,Er=0;vt<O;vt++){let ur=(O-vt)*4+(A?9:12);for(let Fn=0;Fn<ur;Fn++){let es=Fn*2;for(let _a=0;_a<2;_a++)ce.get(Er+es+_a)&&At.set(qe[vt*2+_a],qe[vt*2+Fn]),ce.get(Er+ur*2+es+_a)&&At.set(qe[vt*2+Fn],qe[Fe-1-vt*2-_a]),ce.get(Er+ur*4+es+_a)&&At.set(qe[Fe-1-vt*2-_a],qe[Fe-1-vt*2-Fn]),ce.get(Er+ur*6+es+_a)&&At.set(qe[Fe-1-vt*2-Fn],qe[vt*2+_a])}Er+=ur*8}if(Rr.drawModeMessage(At,A,nt,je),A)Rr.drawBullsEye(At,I.truncDivision(nt,2),5);else{Rr.drawBullsEye(At,I.truncDivision(nt,2),7);for(let vt=0,Er=0;vt<I.truncDivision(Fe,2)-1;vt+=15,Er+=16)for(let ur=I.truncDivision(nt,2)&1;ur<nt;ur+=2)At.set(I.truncDivision(nt,2)-Er,ur),At.set(I.truncDivision(nt,2)+Er,ur),At.set(ur,I.truncDivision(nt,2)-Er),At.set(ur,I.truncDivision(nt,2)+Er)}let St=new zl;return St.setCompact(A),St.setSize(nt),St.setLayers(O),St.setCodeWords(ke),St.setMatrix(At),St}static drawBullsEye(o,h,m){for(let b=0;b<m;b+=2)for(let y=h-b;y<=h+b;y++)o.set(y,h-b),o.set(y,h+b),o.set(h-b,y),o.set(h+b,y);o.set(h-m,h-m),o.set(h-m+1,h-m),o.set(h-m,h-m+1),o.set(h+m,h-m),o.set(h+m,h-m+1),o.set(h+m,h+m-1)}static generateModeMessage(o,h,m){let b=new L;return o?(b.appendBits(h-1,2),b.appendBits(m-1,6),b=Rr.generateCheckWords(b,28,4)):(b.appendBits(h-1,5),b.appendBits(m-1,11),b=Rr.generateCheckWords(b,40,4)),b}static drawModeMessage(o,h,m,b){let y=I.truncDivision(m,2);if(h)for(let k=0;k<7;k++){let A=y-3+k;b.get(k)&&o.set(A,y-5),b.get(k+7)&&o.set(y+5,A),b.get(20-k)&&o.set(A,y+5),b.get(27-k)&&o.set(y-5,A)}else for(let k=0;k<10;k++){let A=y-5+k+I.truncDivision(k,5);b.get(k)&&o.set(A,y-7),b.get(k+10)&&o.set(y+7,A),b.get(29-k)&&o.set(A,y+7),b.get(39-k)&&o.set(y-7,A)}}static generateCheckWords(o,h,m){let b=o.getSize()/m,y=new Fo(Rr.getGF(m)),k=I.truncDivision(h,m),A=Rr.bitsToWords(o,m,k);y.encode(A,k-b);let O=h%m,F=new L;F.appendBits(0,O);for(const K of Array.from(A))F.appendBits(K,m);return F}static bitsToWords(o,h,m){let b=new Int32Array(m),y,k;for(y=0,k=o.getSize()/h;y<k;y++){let A=0;for(let O=0;O<h;O++)A|=o.get(y*h+O)?1<<h-O-1:0;b[y]=A}return b}static getGF(o){switch(o){case 4:return Ce.AZTEC_PARAM;case 6:return Ce.AZTEC_DATA_6;case 8:return Ce.AZTEC_DATA_8;case 10:return Ce.AZTEC_DATA_10;case 12:return Ce.AZTEC_DATA_12;default:throw new v("Unsupported word size "+o)}}static stuffBits(o,h){let m=new L,b=o.getSize(),y=(1<<h)-2;for(let k=0;k<b;k+=h){let A=0;for(let O=0;O<h;O++)(k+O>=b||o.get(k+O))&&(A|=1<<h-1-O);(A&y)===y?(m.appendBits(A&y,h),k--):(A&y)===0?(m.appendBits(A|1,h),k--):m.appendBits(A,h)}return m}static totalBitsInLayer(o,h){return((h?88:112)+16*o)*o}}Rr.DEFAULT_EC_PERCENT=33,Rr.DEFAULT_AZTEC_LAYERS=0,Rr.MAX_NB_BITS=32,Rr.MAX_NB_BITS_COMPACT=4,Rr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class zo{encode(o,h,m,b){return this.encodeWithHints(o,h,m,b,null)}encodeWithHints(o,h,m,b,y){let k=Lo.ISO_8859_1,A=Rr.DEFAULT_EC_PERCENT,O=Rr.DEFAULT_AZTEC_LAYERS;return y!=null&&(y.has(qn.CHARACTER_SET)&&(k=Lf.forName(y.get(qn.CHARACTER_SET).toString())),y.has(qn.ERROR_CORRECTION)&&(A=I.parseInt(y.get(qn.ERROR_CORRECTION).toString())),y.has(qn.AZTEC_LAYERS)&&(O=I.parseInt(y.get(qn.AZTEC_LAYERS).toString()))),zo.encodeLayers(o,h,m,b,k,A,O)}static encodeLayers(o,h,m,b,y,k,A){if(h!==ue.AZTEC)throw new v("Can only encode AZTEC, but got "+h);let O=Rr.encode(H.getBytes(o,y),k,A);return zo.renderResult(O,m,b)}static renderResult(o,h,m){let b=o.getMatrix();if(b==null)throw new Me;let y=b.getWidth(),k=b.getHeight(),A=Math.max(h,y),O=Math.max(m,k),F=Math.min(A/y,O/k),K=(A-y*F)/2,ne=(O-k*F)/2,ce=new q(A,O);for(let ke=0,je=ne;ke<k;ke++,je+=F)for(let Fe=0,qe=K;Fe<y;Fe++,qe+=F)b.get(Fe,ke)&&ce.setRegion(qe,je,F,F);return ce}}t.AbstractExpandedDecoder=be,t.ArgumentException=g,t.ArithmeticException=me,t.AztecCode=zl,t.AztecCodeReader=Mt,t.AztecCodeWriter=zo,t.AztecDecoder=de,t.AztecDetector=Ct,t.AztecDetectorResult=Oe,t.AztecEncoder=Rr,t.AztecHighLevelEncoder=Qi,t.AztecPoint=Tt,t.BarcodeFormat=ue,t.Binarizer=N,t.BinaryBitmap=w,t.BitArray=L,t.BitMatrix=q,t.BitSource=fs,t.BrowserAztecCodeReader=lr,t.BrowserBarcodeReader=ar,t.BrowserCodeReader=te,t.BrowserDatamatrixCodeReader=Bc,t.BrowserMultiFormatReader=Ff,t.BrowserPDF417Reader=rm,t.BrowserQRCodeReader=nm,t.BrowserQRCodeSvgWriter=$i,t.CharacterSetECI=z,t.ChecksumException=E,t.Code128Reader=ft,t.Code39Reader=qt,t.DataMatrixDecodedBitStreamParser=ii,t.DataMatrixReader=li,t.DecodeHintType=X,t.DecoderResult=Ne,t.DefaultGridSampler=Pe,t.DetectorResult=He,t.EAN13Reader=Cr,t.EncodeHintType=qn,t.Exception=f,t.FormatException=M,t.GenericGF=Ce,t.GenericGFPoly=ye,t.GlobalHistogramBinarizer=ve,t.GridSampler=rt,t.GridSamplerInstance=Ye,t.HTMLCanvasElementLuminanceSource=Le,t.HybridBinarizer=le,t.ITFReader=Bt,t.IllegalArgumentException=v,t.IllegalStateException=Me,t.InvertedLuminanceSource=ie,t.LuminanceSource=ge,t.MathUtils=Se,t.MultiFormatOneDReader=Sr,t.MultiFormatReader=Mf,t.MultiFormatWriter=sm,t.NotFoundException=se,t.OneDReader=jt,t.PDF417DecodedBitStreamParser=at,t.PDF417DecoderErrorCorrection=ci,t.PDF417Reader=ca,t.PDF417ResultMetadata=Pl,t.PerspectiveTransform=ht,t.PlanarYUVLuminanceSource=Ps,t.QRCodeByteMatrix=Vc,t.QRCodeDataMask=Ga,t.QRCodeDecodedBitStreamParser=un,t.QRCodeDecoderErrorCorrectionLevel=Nr,t.QRCodeDecoderFormatInformation=Jn,t.QRCodeEncoder=fn,t.QRCodeEncoderQRCode=Yi,t.QRCodeMaskUtil=Cn,t.QRCodeMatrixUtil=Jt,t.QRCodeMode=Xt,t.QRCodeReader=oi,t.QRCodeVersion=Gt,t.QRCodeWriter=Ul,t.RGBLuminanceSource=bu,t.RSS14Reader=pt,t.RSSExpandedReader=ct,t.ReaderException=Gc,t.ReedSolomonDecoder=Ae,t.ReedSolomonEncoder=Fo,t.ReedSolomonException=G,t.Result=U,t.ResultMetadataType=De,t.ResultPoint=Ue,t.StringUtils=H,t.UnsupportedOperationException=ae,t.VideoInputDevice=Q,t.WhiteRectangleDetector=We,t.WriterException=Jr,t.ZXingArrays=D,t.ZXingCharset=Lf,t.ZXingInteger=I,t.ZXingStandardCharsets=Lo,t.ZXingStringBuilder=he,t.ZXingStringEncoding=Z,t.ZXingSystem=S,t.createAbstractExpandedDecoder=kt,Object.defineProperty(t,"__esModule",{value:!0})}))})(fd,fd.exports)),fd.exports}var _n=ZR();const JR=O2(_n),QR=R6({__proto__:null,default:JR},[_n]);var Z_=(function(){function e(r,t,n){if(this.formatMap=new Map([[zt.QR_CODE,_n.BarcodeFormat.QR_CODE],[zt.AZTEC,_n.BarcodeFormat.AZTEC],[zt.CODABAR,_n.BarcodeFormat.CODABAR],[zt.CODE_39,_n.BarcodeFormat.CODE_39],[zt.CODE_93,_n.BarcodeFormat.CODE_93],[zt.CODE_128,_n.BarcodeFormat.CODE_128],[zt.DATA_MATRIX,_n.BarcodeFormat.DATA_MATRIX],[zt.MAXICODE,_n.BarcodeFormat.MAXICODE],[zt.ITF,_n.BarcodeFormat.ITF],[zt.EAN_13,_n.BarcodeFormat.EAN_13],[zt.EAN_8,_n.BarcodeFormat.EAN_8],[zt.PDF_417,_n.BarcodeFormat.PDF_417],[zt.RSS_14,_n.BarcodeFormat.RSS_14],[zt.RSS_EXPANDED,_n.BarcodeFormat.RSS_EXPANDED],[zt.UPC_A,_n.BarcodeFormat.UPC_A],[zt.UPC_E,_n.BarcodeFormat.UPC_E],[zt.UPC_EAN_EXTENSION,_n.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!QR)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var a=this.createZXingFormats(r),s=new Map;s.set(_n.DecodeHintType.POSSIBLE_FORMATS,a),s.set(_n.DecodeHintType.TRY_HARDER,!1),this.hints=s}return e.prototype.decodeAsync=function(r){var t=this;return new Promise(function(n,a){try{n(t.decode(r))}catch(s){a(s)}})},e.prototype.decode=function(r){var t=new _n.MultiFormatReader(this.verbose,this.hints),n=new _n.HTMLCanvasElementLuminanceSource(r),a=new _n.BinaryBitmap(new _n.HybridBinarizer(n)),s=t.decode(a);return{text:s.text,format:hS.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(t,n,a){r.set(t,n)}),r},e.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},e.prototype.createZXingFormats=function(r){for(var t=[],n=0,a=r;n<a.length;n++){var s=a[n];this.formatMap.has(s)?t.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),eI=function(e,r,t,n){function a(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function d(g){try{f(n.next(g))}catch(v){c(v)}}function x(g){try{f(n.throw(g))}catch(v){c(v)}}function f(g){g.done?s(g.value):a(g.value).then(d,x)}f((n=n.apply(e,r||[])).next())})},tI=function(e,r){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(f){return function(g){return x([f,g])}}function x(f){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(t=0)),t;)try{if(n=1,a&&(s=f[0]&2?a.return:f[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,f[1])).done)return s;switch(a=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=r.call(e,t)}catch(g){f=[6,g],a=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},J_=(function(){function e(r,t,n){if(this.formatMap=new Map([[zt.QR_CODE,"qr_code"],[zt.AZTEC,"aztec"],[zt.CODABAR,"codabar"],[zt.CODE_39,"code_39"],[zt.CODE_93,"code_93"],[zt.CODE_128,"code_128"],[zt.DATA_MATRIX,"data_matrix"],[zt.ITF,"itf"],[zt.EAN_13,"ean_13"],[zt.EAN_8,"ean_8"],[zt.PDF_417,"pdf417"],[zt.UPC_A,"upc_a"],[zt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=n;var a=this.createBarcodeDetectorFormats(r);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var r=new BarcodeDetector({formats:["qr_code"]});return typeof r<"u"},e.prototype.decodeAsync=function(r){return eI(this,void 0,void 0,function(){var t,n;return tI(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(r)];case 1:if(t=a.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(t),[2,{text:n.rawValue,format:hS.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(r){for(var t=null,n=0,a=0,s=r;a<s.length;a++){var c=s[a],d=c.boundingBox.width*c.boundingBox.height;d>n&&(n=d,t=c)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(r){for(var t=[],n=0,a=r;n<a.length;n++){var s=a[n];this.formatMap.has(s)?t.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},e.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(t,n,a){r.set(t,n)}),r},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),Q_=function(e,r,t,n){function a(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function d(g){try{f(n.next(g))}catch(v){c(v)}}function x(g){try{f(n.throw(g))}catch(v){c(v)}}function f(g){g.done?s(g.value):a(g.value).then(d,x)}f((n=n.apply(e,r||[])).next())})},e4=function(e,r){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(f){return function(g){return x([f,g])}}function x(f){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(t=0)),t;)try{if(n=1,a&&(s=f[0]&2?a.return:f[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,f[1])).done)return s;switch(a=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=r.call(e,t)}catch(g){f=[6,g],a=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},rI=(function(){function e(r,t,n,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&J_.isSupported()?(this.primaryDecoder=new J_(r,n,a),this.secondaryDecoder=new Z_(r,n,a)):this.primaryDecoder=new Z_(r,n,a)}return e.prototype.decodeAsync=function(r){return Q_(this,void 0,void 0,function(){var t;return e4(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(r)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(r){return Q_(this,void 0,void 0,function(){var t,n;return e4(this,function(a){switch(a.label){case 0:t=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(r)];case 2:return[2,a.sent()];case 3:if(n=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(r)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(r){if(this.verbose){var t=performance.now()-r;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var r=0,t=0,n=this.executionResults;t<n.length;t++){var a=n[t];r+=a}var s=r/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),Y2=(function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),dx=function(e,r,t,n){function a(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function d(g){try{f(n.next(g))}catch(v){c(v)}}function x(g){try{f(n.throw(g))}catch(v){c(v)}}function f(g){g.done?s(g.value):a(g.value).then(d,x)}f((n=n.apply(e,r||[])).next())})},fx=function(e,r){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(f){return function(g){return x([f,g])}}function x(f){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(t=0)),t;)try{if(n=1,a&&(s=f[0]&2?a.return:f[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,f[1])).done)return s;switch(a=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=r.call(e,t)}catch(g){f=[6,g],a=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},mS=(function(){function e(r,t){this.name=r,this.track=t}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(r){var t={};t[this.name]=r;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var r=this.track.getSettings();if(this.name in r){var t=r[this.name];return t}return null},e})(),nI=(function(e){Y2(r,e);function r(t,n){return e.call(this,t,n)||this}return r.prototype.min=function(){return this.getCapabilities().min},r.prototype.max=function(){return this.getCapabilities().max},r.prototype.step=function(){return this.getCapabilities().step},r.prototype.apply=function(t){var n={};n[this.name]=t;var a={advanced:[n]};return this.track.applyConstraints(a)},r.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),n=t[this.name];return{min:n.min,max:n.max,step:n.step}},r.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},r})(mS),aI=(function(e){Y2(r,e);function r(t){return e.call(this,"zoom",t)||this}return r})(nI),sI=(function(e){Y2(r,e);function r(t){return e.call(this,"torch",t)||this}return r})(mS),iI=(function(){function e(r){this.track=r}return e.prototype.zoomFeature=function(){return new aI(this.track)},e.prototype.torchFeature=function(){return new sI(this.track)},e})(),lI=(function(){function e(r,t,n){this.isClosed=!1,this.parentElement=r,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),r.append(this.surface)}return e.prototype.createVideoElement=function(r){var t=document.createElement("video");return t.style.width="".concat(r,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var r=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=r.surface.clientWidth,a=r.surface.clientHeight;r.callbacks.onRenderSurfaceReady(n,a),r.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(r,t,n,a){return dx(this,void 0,void 0,function(){var s,c;return fx(this,function(d){switch(d.label){case 0:return s=new e(r,t,a),n.aspectRatio?(c={aspectRatio:n.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:d.sent(),d.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(r){this.failIfClosed();var t=this,n=function(){setTimeout(r,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(r){return dx(this,void 0,void 0,function(){return fx(this,function(t){if("aspectRatio"in r)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(r)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var r=this;return new Promise(function(t,n){var a=r.mediaStream.getVideoTracks(),s=a.length,c=0;r.mediaStream.getVideoTracks().forEach(function(d){r.mediaStream.removeTrack(d),d.stop(),++c,c>=s&&(r.isClosed=!0,r.parentElement.removeChild(r.surface),t())})})},e.prototype.getCapabilities=function(){return new iI(this.getFirstTrackOrFail())},e})(),oI=(function(){function e(r){this.mediaStream=r}return e.prototype.render=function(r,t,n){return dx(this,void 0,void 0,function(){return fx(this,function(a){return[2,lI.create(r,this.mediaStream,t,n)]})})},e.create=function(r){return dx(this,void 0,void 0,function(){var t,n;return fx(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:r},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=a.sent(),[2,new e(n)]}})})},e})(),t4=function(e,r,t,n){function a(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function d(g){try{f(n.next(g))}catch(v){c(v)}}function x(g){try{f(n.throw(g))}catch(v){c(v)}}function f(g){g.done?s(g.value):a(g.value).then(d,x)}f((n=n.apply(e,r||[])).next())})},r4=function(e,r){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(f){return function(g){return x([f,g])}}function x(f){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(t=0)),t;)try{if(n=1,a&&(s=f[0]&2?a.return:f[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,f[1])).done)return s;switch(a=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=r.call(e,t)}catch(g){f=[6,g],a=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},cI=(function(){function e(){}return e.failIfNotSupported=function(){return t4(this,void 0,void 0,function(){return r4(this,function(r){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(r){return t4(this,void 0,void 0,function(){return r4(this,function(t){return[2,oI.create(r)]})})},e})(),uI=function(e,r,t,n){function a(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function d(g){try{f(n.next(g))}catch(v){c(v)}}function x(g){try{f(n.throw(g))}catch(v){c(v)}}function f(g){g.done?s(g.value):a(g.value).then(d,x)}f((n=n.apply(e,r||[])).next())})},dI=function(e,r){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(f){return function(g){return x([f,g])}}function x(f){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(t=0)),t;)try{if(n=1,a&&(s=f[0]&2?a.return:f[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,f[1])).done)return s;switch(a=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=r.call(e,t)}catch(g){f=[6,g],a=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},fI=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var r=MediaStreamTrack;return MediaStreamTrack&&r.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var r=B0.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(r=B0.insecureContextCameraQueryError()),Promise.reject(r)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var r=location.host.split(":")[0];return r==="127.0.0.1"||r==="localhost"},e.getCamerasFromMediaDevices=function(){return uI(this,void 0,void 0,function(){var r,t,n,a,s,c,d;return dI(this,function(x){switch(x.label){case 0:return r=function(f){for(var g=f.getVideoTracks(),v=0,w=g;v<w.length;v++){var E=w[v];E.enabled=!1,E.stop(),f.removeTrack(E)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=x.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=x.sent(),a=[],s=0,c=n;s<c.length;s++)d=c[s],d.kind==="videoinput"&&a.push({id:d.deviceId,label:d.label});return r(t),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(r,t){var n=function(s){for(var c=[],d=0,x=s;d<x.length;d++){var f=x[d];f.kind==="video"&&c.push({id:f.id,label:f.label})}r(c)},a=MediaStreamTrack;a.getSources(n)})},e})(),Un;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Un||(Un={}));var hI=(function(){function e(){this.state=Un.NOT_STARTED,this.onGoingTransactionNewState=Un.UNKNOWN}return e.prototype.directTransition=function(r){this.failIfTransitionOngoing(),this.validateTransition(r),this.state=r},e.prototype.startTransition=function(r){return this.failIfTransitionOngoing(),this.validateTransition(r),this.onGoingTransactionNewState=r,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Un.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var r=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Un.UNKNOWN,this.directTransition(r)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Un.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Un.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Un.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(r){switch(this.state){case Un.UNKNOWN:throw"Transition from unknown is not allowed";case Un.NOT_STARTED:this.failIfNewStateIs(r,[Un.PAUSED]);break;case Un.SCANNING:break;case Un.PAUSED:break}},e.prototype.failIfNewStateIs=function(r,t){for(var n=0,a=t;n<a.length;n++){var s=a[n];if(r===s)throw"Cannot transition from ".concat(this.state," to ").concat(r)}},e})(),xI=(function(){function e(r){this.stateManager=r}return e.prototype.startTransition=function(r){return this.stateManager.startTransition(r)},e.prototype.directTransition=function(r){this.stateManager.directTransition(r)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Un.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Un.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Un.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Un.PAUSED},e})(),mI=(function(){function e(){}return e.create=function(){return new xI(new hI)},e})(),gI=(function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ns=(function(e){gI(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.DEFAULT_WIDTH=300,r.DEFAULT_WIDTH_OFFSET=2,r.FILE_SCAN_MIN_HEIGHT=300,r.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,r.MIN_QR_BOX_SIZE=50,r.SHADED_LEFT=1,r.SHADED_RIGHT=2,r.SHADED_TOP=3,r.SHADED_BOTTOM=4,r.SHADED_REGION_ELEMENT_ID="qr-shaded-region",r.VERBOSE=!1,r.BORDER_SHADER_DEFAULT_COLOR="#ffffff",r.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",r})(XR),pI=(function(){function e(r,t){this.logger=t,this.fps=Ns.SCAN_DEFAULT_FPS,r?(r.fps&&(this.fps=r.fps),this.disableFlip=r.disableFlip===!0,this.qrbox=r.qrbox,this.aspectRatio=r.aspectRatio,this.videoConstraints=r.videoConstraints):this.disableFlip=Ns.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?xS.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!bl(this.qrbox)},e.create=function(r,t){return new e(r,t)},e})(),wc=(function(){function e(r,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.elementId=r,this.verbose=!1;var n;typeof t=="boolean"?this.verbose=t===!0:t&&(n=t,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new YR(this.verbose),this.qrcode=new rI(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=mI.create()}return e.prototype.start=function(r,t,n,a){var s=this;if(!r)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;a?c=a:c=this.verbose?this.logger.log:function(){};var d=pI.create(t,this.logger);this.clearElement();var x=!1;d.videoConstraints&&(d.isMediaStreamConstraintsValid()?x=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var f=x,g=document.getElementById(this.elementId);g.clientWidth?g.clientWidth:Ns.DEFAULT_WIDTH,g.style.position="relative",this.shouldScan=!0,this.element=g;var v=this,w=this.stateManagerProxy.startTransition(Un.SCANNING);return new Promise(function(E,N){var S=f?d.videoConstraints:v.createVideoConstraints(r);if(!S){w.cancel(),N("videoConstraints should be defined");return}var T={};(!f||d.aspectRatio)&&(T.aspectRatio=d.aspectRatio);var j={onRenderSurfaceReady:function(D,I){v.setupUi(D,I,d),v.isScanning=!0,v.foreverScan(d,n,c)}};cI.failIfNotSupported().then(function(D){D.create(S).then(function(I){return I.render(s.element,T,j).then(function(L){v.renderedCamera=L,w.execute(),E(null)}).catch(function(L){w.cancel(),N(L)})}).catch(function(I){w.cancel(),N(B0.errorGettingUserMedia(I))})}).catch(function(D){w.cancel(),N(B0.cameraStreamingNotSupported())})})},e.prototype.pause=function(r){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Un.PAUSED),this.showPausedState(),(bl(r)||r!==!0)&&(r=!1),r&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var r=this,t=function(){r.stateManagerProxy.directTransition(Un.SCANNING),r.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var r=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Un.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(r.element){var s=document.getElementById(Ns.SHADED_REGION_ELEMENT_ID);s&&r.element.removeChild(s)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),n(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),t.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(r,t){return this.scanFileV2(r,t).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(r,t){var n=this;if(!r||!(r instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(bl(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,s){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(r);var c=new Image;c.onload=function(){var d=c.width,x=c.height,f=document.getElementById(n.elementId),g=f.clientWidth?f.clientWidth:Ns.DEFAULT_WIDTH,v=Math.max(f.clientHeight?f.clientHeight:x,Ns.FILE_SCAN_MIN_HEIGHT),w=n.computeCanvasDrawConfig(d,x,g,v);if(t){var E=n.createCanvasElement(g,v,"qr-canvas-visible");E.style.display="inline-block",f.appendChild(E);var N=E.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=g,N.canvas.height=v,N.drawImage(c,0,0,d,x,w.x,w.y,w.width,w.height)}var S=Ns.FILE_SCAN_HIDDEN_CANVAS_PADDING,T=Math.max(c.width,w.width),j=Math.max(c.height,w.height),D=T+2*S,I=j+2*S,L=n.createCanvasElement(D,I);f.appendChild(L);var V=L.getContext("2d");if(!V)throw"Unable to get 2d context from canvas";V.canvas.width=D,V.canvas.height=I,V.drawImage(c,0,0,d,x,S,S,T,j);try{n.qrcode.decodeRobustlyAsync(L).then(function(X){a(Y_.createFromQrcodeResult(X))}).catch(s)}catch(X){s("QR code parse error, error = ".concat(X))}},c.onerror=s,c.onabort=s,c.onstalled=s,c.onsuspend=s,c.src=URL.createObjectURL(r)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return fI.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(r){if(r){if(!xS.isMediaStreamConstraintsValid(r,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(r)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(r){var t=[zt.QR_CODE,zt.AZTEC,zt.CODABAR,zt.CODE_39,zt.CODE_93,zt.CODE_128,zt.DATA_MATRIX,zt.MAXICODE,zt.ITF,zt.EAN_13,zt.EAN_8,zt.PDF_417,zt.RSS_14,zt.RSS_EXPANDED,zt.UPC_A,zt.UPC_E,zt.UPC_EAN_EXTENSION];if(!r||typeof r=="boolean"||!r.formatsToSupport)return t;if(!Array.isArray(r.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(r.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],a=0,s=r.formatsToSupport;a<s.length;a++){var c=s[a];qR(c)?n.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(r){if(bl(r))return!0;if(!bl(r.useBarCodeDetectorIfSupported))return r.useBarCodeDetectorIfSupported!==!1;if(bl(r.experimentalFeatures))return!0;var t=r.experimentalFeatures;return bl(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(r,t,n){var a=this,s=n.qrbox;this.validateQrboxConfig(s);var c=this.toQrdimensions(r,t,s),d=function(f){if(f<Ns.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ns.MIN_QR_BOX_SIZE,"px.")},x=function(f){return f>r&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),f=r),f};d(c.width),d(c.height),c.width=x(c.width)},e.prototype.validateQrboxConfig=function(r){if(typeof r!="number"&&typeof r!="function"&&(r.width===void 0||r.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(r,t,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(r,t)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return n},e.prototype.setupUi=function(r,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(r,t,n);var a=bl(n.qrbox)?{width:r,height:t}:n.qrbox;this.validateQrboxConfig(a);var s=this.toQrdimensions(r,t,a);s.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=n.isShadedBoxEnabled()&&s.height<=t,d={x:0,y:0,width:r,height:t},x=c?this.getShadedRegionBounds(r,t,s):d,f=this.createCanvasElement(x.width,x.height),g={willReadFrequently:!0},v=f.getContext("2d",g);v.canvas.width=x.width,v.canvas.height=x.height,this.element.append(f),c&&this.possiblyInsertShadingElement(this.element,r,t,s),this.createScannerPausedUiElement(this.element),this.qrRegion=x,this.context=v,this.canvasElement=f},e.prototype.createScannerPausedUiElement=function(r){var t=document.createElement("div");t.innerText=B0.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",r.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(r,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return r(a.text,Y_.createFromQrcodeResult(a)),n.possiblyUpdateShaders(!0),!0}).catch(function(a){n.possiblyUpdateShaders(!1);var s=B0.codeParseError(a);return t(s,KR.createFrom(s)),!1})},e.prototype.foreverScan=function(r,t,n){var a=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),c=s.videoWidth/s.clientWidth,d=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var x=this.qrRegion.width*c,f=this.qrRegion.height*d,g=this.qrRegion.x*c,v=this.qrRegion.y*d;this.context.drawImage(s,g,v,x,f,0,0,this.qrRegion.width,this.qrRegion.height);var w=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(r,t,n)},a.getTimeoutFps(r.fps))};this.scanContext(t,n).then(function(E){!E&&r.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(t,n).finally(function(){w()})):w()}).catch(function(E){a.logger.logError("Error happend while scanning context",E),w()})}},e.prototype.createVideoConstraints=function(r){if(typeof r=="string")return{deviceId:{exact:r}};if(typeof r=="object"){var t="facingMode",n="deviceId",a={user:!0,environment:!0},s="exact",c=function(N){if(N in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},d=Object.keys(r);if(d.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(d.length," keys");var x=Object.keys(r)[0];if(x!==t&&x!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(x===t){var f=r.facingMode;if(typeof f=="string"){if(c(f))return{facingMode:f}}else if(typeof f=="object")if(s in f){if(c(f["".concat(s)]))return{facingMode:{exact:f["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var g=typeof f;throw"Invalid type of 'facingMode' = ".concat(g)}}else{var v=r.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(s in v)return{deviceId:{exact:v["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var w=typeof v;throw"Invalid type of 'deviceId' = ".concat(w)}}}var E=typeof r;throw"Invalid type of 'cameraIdOrConfig' = ".concat(E)},e.prototype.computeCanvasDrawConfig=function(r,t,n,a){if(r<=n&&t<=a){var s=(n-r)/2,c=(a-t)/2;return{x:s,y:c,width:r,height:t}}else{var d=r,x=t;return r>n&&(t=n/r*t,r=n),t>a&&(r=a/t*r,t=a),this.logger.log("Image downsampled from "+"".concat(d,"X").concat(x)+" to ".concat(r,"X").concat(t,".")),this.computeCanvasDrawConfig(r,t,n,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var r=document.getElementById(this.elementId);r&&(r.innerHTML="")},e.prototype.possiblyUpdateShaders=function(r){this.qrMatch!==r&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=r?Ns.BORDER_SHADER_MATCH_COLOR:Ns.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=r)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(r,t,n){var a=r,s=t,c=document.createElement("canvas");return c.style.width="".concat(a,"px"),c.style.height="".concat(s,"px"),c.style.display="none",c.id=bl(n)?"qr-canvas":n,c},e.prototype.getShadedRegionBounds=function(r,t,n){if(n.width>r||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(r-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(r,t,n,a){if(!(t-a.width<1||n-a.height<1)){var s=document.createElement("div");s.style.position="absolute";var c=(t-a.width)/2,d=(n-a.height)/2;if(s.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(Ns.SHADED_REGION_ELEMENT_ID),t-a.width<11||n-a.height<11)this.hasBorderShaders=!1;else{var x=5,f=40;this.insertShaderBorders(s,f,x,-x,null,0,!0),this.insertShaderBorders(s,f,x,-x,null,0,!1),this.insertShaderBorders(s,f,x,null,-x,0,!0),this.insertShaderBorders(s,f,x,null,-x,0,!1),this.insertShaderBorders(s,x,f+x,-x,null,-x,!0),this.insertShaderBorders(s,x,f+x,null,-x,-x,!0),this.insertShaderBorders(s,x,f+x,-x,null,-x,!1),this.insertShaderBorders(s,x,f+x,null,-x,-x,!1),this.hasBorderShaders=!0}r.append(s)}},e.prototype.insertShaderBorders=function(r,t,n,a,s,c,d){var x=document.createElement("div");x.style.position="absolute",x.style.backgroundColor=Ns.BORDER_SHADER_DEFAULT_COLOR,x.style.width="".concat(t,"px"),x.style.height="".concat(n,"px"),a!==null&&(x.style.top="".concat(a,"px")),s!==null&&(x.style.bottom="".concat(s,"px")),d?x.style.left="".concat(c,"px"):x.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(x),r.appendChild(x)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(r){return 1e3/r},e})(),n4;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(n4||(n4={}));function bI(){const{user:e,logout:r}=Wi(),[t,n]=J.useState([]),[a,s]=J.useState([]),[c,d]=J.useState([]),[x,f]=J.useState(["Tm"]),[g,v]=J.useState("Tm"),[w,E]=J.useState(""),[N,S]=J.useState([]),[T,j]=J.useState(null),[D,I]=J.useState("Toptan Sat"),[L,V]=J.useState(!1),[X,M]=J.useState(!1),[W,z]=J.useState(!1),[ae,Z]=J.useState(!1),[H,he]=J.useState(!1),[q,se]=J.useState(!1),[ve,le]=J.useState(!1),[ge,ie]=J.useState(!1),[Le,Q]=J.useState(!1),[B,te]=J.useState(null),[U,P]=J.useState(""),[ue,Re]=J.useState(!1),De=J.useRef(null),[Ne,Ke]=J.useState(!1),[ye,me]=J.useState(""),[Ce,G]=J.useState(""),[Me,Ae]=J.useState(1),[oe,de]=J.useState(1),[Se,lt]=J.useState(""),[Ue,He]=J.useState(null),[Oe,We]=J.useState(1),[rt,ht]=J.useState(""),[Pe,Ye]=J.useState(""),Tt=J.useRef(null);J.useRef(null);const[Ct,Mt]=J.useState(""),lr=J.useRef("");J.useEffect(()=>{jt(),ft(),qt()},[]);const jt=async()=>{try{const Nt=(await Sn.getAll()).data||{};n(Nt.products||[])}catch(Ge){console.error("rnler yklenirken hata:",Ge)}},ft=async()=>{try{const Ge=await kn.getAll();s(Ge.data?.customers||[])}catch(Ge){console.error("Mteriler yklenirken hata:",Ge)}},qt=async()=>{try{const Nt=(await yo.getAll()).data?.shortcuts||[];d(Nt),f(["Tm",...Nt.map(Dt=>Dt.name)])}catch(Ge){console.error("Ksayollar yklenirken hata:",Ge)}},Bt=(()=>{const Nt=(g!=="Tm"?c.find(Pt=>Pt.name===g):null)?.items||[];let Dt=t.filter(Pt=>{let _r=!0;g!=="Tm"&&(_r=Nt.includes(Pt.stock_code));const Ie=w.toLowerCase(),wt=!w||Pt.name?.toLowerCase().includes(Ie)||Pt.barcode?.toLowerCase().includes(Ie)||Pt.stock_code?.toLowerCase().includes(Ie);return _r&&wt});return g!=="Tm"&&Nt.length>0&&Dt.sort((Pt,_r)=>{const Ie=Nt.indexOf(Pt.stock_code),wt=Nt.indexOf(_r.stock_code);return Ie-wt}),Dt})(),Qt=a.filter(Ge=>Ge.name?.toLowerCase().includes(Ct.toLowerCase())||Ge.phone?.includes(Ct)),mr=Ge=>{He(Ge),We(1),he(!0)},Pr=()=>{if(!Ue)return;const Ge=parseFloat(Oe)||1,Nt=N.findIndex(Dt=>Dt.stock_code===Ue.stock_code);if(Nt>=0){const Dt=[...N];Dt[Nt].quantity+=Ge,S(Dt)}else S([...N,{...Ue,quantity:Ge,discount_rate:0,final_price:Ue.price}]);he(!1),He(null)},Xr=(Ge,Nt,Dt)=>{const Pt=[...N];Pt[Ge][Nt]=Dt,Nt==="discount_rate"?Pt[Ge].final_price=Pt[Ge].price*(1-Dt/100):Nt==="price"&&(Pt[Ge].final_price=Dt*(1-(Pt[Ge].discount_rate||0)/100)),S(Pt),Z(!1),se(!1),le(!1)},$t=Ge=>{S(N.filter((Nt,Dt)=>Dt!==Ge)),j(null)},Cr=()=>N.reduce((Ge,Nt)=>Ge+Nt.final_price*Nt.quantity,0),Kr=async Ge=>{if(N.length===0){alert("Sepet bo!");return}if(Ge==="Ak Hesap"&&D==="Toptan Sat"){alert("Ak hesap iin bir mteri semelisiniz.");return}try{const Nt="SLS-"+Date.now(),Dt=a.find(Pt=>Pt.name===D);await kl.complete({sale_code:Nt,customer:Dt||null,customer_name:Dt?void 0:D,payment_method:Ge,items:N.map(Pt=>({id:Pt.id,stock_code:Pt.stock_code,name:Pt.name,quantity:Pt.quantity,price:Pt.final_price,discount_rate:Pt.discount_rate||0,amount:Pt.quantity})),total:Cr()}),ht("Sat lemi Baarl"),setTimeout(()=>ht(""),2e3),S([]),I("Toptan Sat"),M(!1),jt()}catch(Nt){alert("Sat hatas: "+(Nt.response?.data?.message||Nt.message))}},Tn=J.useCallback(Ge=>{const Nt=t.find(Dt=>Dt.barcode===Ge||Dt.stock_code===Ge||Dt.stock_code?.toLowerCase()===Ge.toLowerCase());if(Nt){const Dt=N.findIndex(Pt=>Pt.stock_code===Nt.stock_code);if(Dt>=0){const Pt=[...N];Pt[Dt].quantity+=1,S(Pt)}else S(Pt=>[...Pt,{...Nt,quantity:1,discount_rate:0,final_price:Nt.price}]);return ht(`${Nt.name} eklendi!`),setTimeout(()=>ht(""),1500),!0}else return Ye(`Barkod bulunamad: ${Ge}`),setTimeout(()=>Ye(""),3e3),!1},[t,N]),Mr=async()=>{Ye(""),ie(!0),lr.current="",setTimeout(async()=>{try{const Ge=new wc("barcode-scanner-container");Tt.current=Ge,await Ge.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150},aspectRatio:1},Nt=>{Nt!==lr.current&&(lr.current=Nt,console.log("Barkod bulundu:",Nt),Tn(Nt),setTimeout(()=>{lr.current=""},2e3))},Nt=>{})}catch(Ge){console.error("Kamera balatma hatas:",Ge),Ye("Kamera alamad. Ltfen kamera izni verin.")}},100)},Hr=async()=>{if(Tt.current){try{await Tt.current.stop(),Tt.current.clear()}catch(Ge){console.error("Scanner stop error:",Ge)}Tt.current=null}ie(!1),Ye("")};return l.jsxs("div",{className:"flex flex-col w-screen h-screen bg-gray-100 overflow-hidden select-none",children:[rt&&l.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] pointer-events-none",children:l.jsx("div",{className:"bg-green-500 text-white px-16 py-8 rounded-xl shadow-2xl text-3xl font-bold animate-pulse",children:rt})}),l.jsxs("div",{className:`fixed top-0 left-0 h-full bg-slate-800 z-[1001] transition-all duration-500 overflow-hidden flex flex-col gap-2 pt-16 shadow-xl ${L?"w-64":"w-0"}`,children:[l.jsx("button",{onClick:()=>V(!1),className:"absolute top-2 right-4 text-4xl text-white bg-transparent border-none cursor-pointer",children:""}),l.jsx(hr,{to:"/",className:"px-8 py-3 text-lg text-gray-400 hover:text-white transition-colors no-underline",children:" Ana Sayfa"}),l.jsx(hr,{to:"/customers",className:"px-8 py-3 text-lg text-gray-400 hover:text-white transition-colors no-underline",children:" Mterileri Gr"}),l.jsx(hr,{to:"/sales",className:"px-8 py-3 text-lg text-gray-400 hover:text-white transition-colors no-underline",children:" Satlar Gr"}),l.jsx(hr,{to:"/products",className:"px-8 py-3 text-lg text-gray-400 hover:text-white transition-colors no-underline",children:" rnleri Gr"}),l.jsx("button",{onClick:()=>{r(),V(!1)},className:"mt-4 px-8 py-4 text-lg text-red-400 hover:text-red-300 hover:bg-red-900/20 transition-colors border-t border-slate-700 text-left",children:" k"})]}),l.jsxs("header",{className:"flex justify-between items-center p-2 bg-white shadow-md gap-2",children:[l.jsx("input",{type:"text",value:w,onChange:Ge=>E(Ge.target.value),placeholder:"Ara...",className:"flex-1 min-w-0 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-blue-500"}),l.jsx("button",{onClick:()=>Ke(!0),className:"bg-orange-500 text-white border-none rounded-lg px-3 py-2 text-xs font-bold cursor-pointer hover:bg-orange-600 transition-colors whitespace-nowrap",children:"Tanmsz"}),l.jsx("button",{onClick:Mr,className:"bg-blue-50 text-blue-600 border-none rounded-lg p-2 text-2xl cursor-pointer hover:bg-blue-600 hover:text-white transition-colors",children:""})]}),l.jsxs("div",{className:"flex-1 flex flex-col p-3 overflow-hidden",children:[l.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 mb-2",style:{WebkitOverflowScrolling:"touch"},children:x.map(Ge=>l.jsx("button",{onClick:()=>v(Ge),className:`flex-shrink-0 bg-white border-2 rounded-xl px-4 py-3 text-sm font-bold cursor-pointer transition-all
                                ${g===Ge?"bg-blue-50 border-blue-500 text-blue-600":"border-gray-300 hover:border-blue-500 hover:text-blue-500"}`,children:Ge},Ge))}),l.jsx("div",{className:"flex-1 overflow-y-auto grid grid-cols-[repeat(auto-fill,minmax(120px,1fr))] gap-3 content-start pb-36",children:Bt.map(Ge=>l.jsxs("div",{onClick:()=>mr(Ge),className:"bg-white border border-gray-200 rounded-xl p-3 text-center cursor-pointer transition-all hover:shadow-lg hover:-translate-y-1 flex flex-col justify-center min-h-[120px]",children:[Ge.image_url?l.jsx("img",{src:Ge.image_url,alt:Ge.name,className:"w-20 h-20 object-cover rounded-md mx-auto mb-2"}):l.jsx("div",{className:"w-20 h-20 flex items-center justify-center text-4xl text-gray-300 mx-auto mb-2",children:""}),l.jsx("div",{className:"text-xs font-semibold mb-1 line-clamp-2",children:Ge.name}),l.jsxs("div",{className:"text-green-600 text-base font-bold",children:[Ge.price?.toFixed(2)," TL"]})]},Ge.id||Ge.stock_code))})]}),l.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white z-[500]",children:[l.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-gray-100",children:[l.jsxs("span",{className:"text-xl font-bold text-green-600",children:[Cr().toFixed(2)," TL"]}),l.jsxs("button",{onClick:()=>M(!0),className:"bg-gradient-to-r from-green-500 to-green-600 text-white border-none rounded-xl px-5 py-2 text-base font-bold cursor-pointer hover:shadow-lg transition-all flex items-center gap-2",children:[" ",l.jsx("span",{children:N.length})," Sepete Git"]})]}),l.jsxs("div",{className:"border-t border-gray-200 flex justify-around py-2 px-1",children:[l.jsxs(hr,{to:"/mobile-pos",className:"flex flex-col items-center text-blue-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px] font-bold",children:"Sat"})]}),l.jsxs("button",{onClick:()=>{Q(!0),te(null),P("")},className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Fiyat Gr"})]}),l.jsxs(hr,{to:"/mobile-products",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"rnler"})]}),l.jsxs(hr,{to:"/mobile-customers",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Bakiyeler"})]}),l.jsxs(hr,{to:"/mobile-sales",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Satlar"})]}),l.jsxs(hr,{to:"/mobile-invoices",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Faturalar"})]}),l.jsxs("button",{onClick:()=>r(),className:"flex flex-col items-center text-red-500 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"k"})]})]})]}),X&&l.jsxs("div",{className:"fixed inset-0 bg-white z-[1000] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 bg-white border-b border-gray-200 shrink-0",children:[l.jsx("h3",{className:"text-2xl font-bold text-slate-800 m-0",children:"Sepetim"}),l.jsx("div",{className:"flex-1 text-center font-bold text-blue-600 truncate mx-4",children:D}),l.jsx("button",{onClick:()=>M(!1),className:"bg-gray-100 text-gray-700 border border-gray-200 px-4 py-2 rounded-lg cursor-pointer hover:bg-gray-200",children:"Geri Dn"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:N.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500",children:"Sepetinizde rn bulunmamaktadr."}):N.map((Ge,Nt)=>l.jsxs("div",{onClick:()=>j(Nt),className:`flex justify-between items-center py-3 px-3 cursor-pointer rounded-lg mb-2 transition-colors shadow-sm
                                        ${T===Nt?"bg-green-200 border-2 border-green-400":"bg-yellow-50 border border-gray-200"}`,children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"m-0 mb-1 text-base font-semibold",children:Ge.name}),l.jsxs("p",{className:"m-0 text-sm text-gray-600 flex items-center gap-1",children:[l.jsx("span",{className:"text-blue-600 font-bold",children:Ge.quantity}),l.jsx("span",{className:"font-black",children:"Adet x"}),l.jsxs("span",{className:"text-blue-600 font-bold",children:[Ge.final_price?.toFixed(2)," TL"]})]})]}),l.jsxs("div",{className:"font-bold text-green-600 text-lg w-24 text-right",children:[(Ge.final_price*Ge.quantity).toFixed(2)," TL"]}),l.jsx("button",{onClick:Dt=>{Dt.stopPropagation(),$t(Nt)},className:"ml-3 bg-red-500 text-white border-none rounded-full w-9 h-9 text-lg cursor-pointer flex items-center justify-center hover:bg-red-600",children:""})]},Nt))}),l.jsxs("div",{className:"shrink-0 bg-white border-t-2 border-gray-300 p-4",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[l.jsx("button",{onClick:()=>{T!==null&&N[T]&&(lt(N[T].quantity),Z(!0))},disabled:T===null,className:"py-3 rounded-lg font-semibold cursor-pointer transition-colors disabled:bg-gray-200 disabled:cursor-not-allowed bg-green-500 text-white hover:bg-green-600 disabled:hover:bg-gray-200",children:"Miktar Dzenle"}),l.jsx("button",{onClick:()=>{T!==null&&N[T]&&(lt(N[T].discount_rate||0),se(!0))},disabled:T===null,className:"py-3 rounded-lg font-semibold cursor-pointer transition-colors disabled:bg-gray-200 disabled:cursor-not-allowed bg-yellow-500 text-white hover:bg-yellow-600 disabled:hover:bg-gray-200",children:"skonto Ekle"}),l.jsx("button",{onClick:()=>{T!==null&&N[T]&&(lt(N[T].price),le(!0))},disabled:T===null,className:"py-3 rounded-lg font-semibold cursor-pointer transition-colors disabled:bg-gray-200 disabled:cursor-not-allowed bg-cyan-500 text-white hover:bg-cyan-600 disabled:hover:bg-gray-200",children:"Fiyat Dzenle"})]}),l.jsxs("div",{className:"flex justify-between items-center bg-yellow-300 rounded-lg p-4 mb-3",children:[l.jsx("span",{className:"text-lg",children:"Genel Toplam"}),l.jsxs("span",{className:"text-2xl font-bold",children:[Cr().toFixed(2)," TL"]})]}),l.jsx("button",{onClick:()=>z(!0),className:"w-full py-3 bg-cyan-400 text-white rounded-lg font-semibold cursor-pointer hover:bg-cyan-500 transition-colors mb-3",children:"Mteri Se"}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsx("button",{onClick:()=>Kr("Nakit"),disabled:N.length===0,className:"py-4 rounded-lg font-semibold text-white cursor-pointer transition-colors bg-green-500 hover:bg-green-600 disabled:opacity-50",children:"Nakit"}),l.jsx("button",{onClick:()=>Kr("POS"),disabled:N.length===0,className:"py-4 rounded-lg font-semibold text-white cursor-pointer transition-colors bg-blue-500 hover:bg-blue-600 disabled:opacity-50",children:"POS"}),l.jsx("button",{onClick:()=>Kr("Ak Hesap"),disabled:N.length===0,className:"py-4 rounded-lg font-semibold text-white cursor-pointer transition-colors bg-orange-500 hover:bg-orange-600 disabled:opacity-50",children:"Ak Hesap"})]})]})]}),H&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[1000]",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-80 shadow-2xl",children:[l.jsx("span",{onClick:()=>he(!1),className:"float-right text-3xl text-gray-400 cursor-pointer hover:text-gray-600",children:""}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Miktar Girin"}),l.jsx("p",{className:"text-gray-600 mb-4",children:Ue?.name}),l.jsx("input",{type:"number",value:Oe,onChange:Ge=>We(Ge.target.value),className:"w-full p-4 text-2xl text-center border-2 border-blue-500 rounded-lg mb-4 focus:outline-none",min:"1",autoFocus:!0,onFocus:Ge=>Ge.target.select()}),l.jsx("button",{onClick:Pr,className:"w-full py-4 bg-green-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-green-600 transition-colors",children:"Sepete Ekle"})]})}),ae&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[1000]",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-80 shadow-2xl",children:[l.jsx("span",{onClick:()=>Z(!1),className:"float-right text-3xl text-gray-400 cursor-pointer hover:text-gray-600",children:""}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Miktar Dzenle"}),l.jsx("p",{className:"text-gray-600 mb-4",children:N[T]?.name}),l.jsx("input",{type:"number",value:Se,onChange:Ge=>lt(Ge.target.value),className:"w-full p-4 text-2xl text-center border-2 border-blue-500 rounded-lg mb-4 focus:outline-none",min:"1",autoFocus:!0,onFocus:Ge=>Ge.target.select()}),l.jsx("button",{onClick:()=>Xr(T,"quantity",parseInt(Se)||1),className:"w-full py-4 bg-blue-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-blue-600 transition-colors",children:"Kaydet"})]})}),q&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[1000]",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-80 shadow-2xl",children:[l.jsx("span",{onClick:()=>se(!1),className:"float-right text-3xl text-gray-400 cursor-pointer hover:text-gray-600",children:""}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"skonto Ekle (%)"}),l.jsx("p",{className:"text-gray-600 mb-4",children:N[T]?.name}),l.jsx("input",{type:"number",value:Se,onChange:Ge=>lt(Ge.target.value),className:"w-full p-4 text-2xl text-center border-2 border-blue-500 rounded-lg mb-4 focus:outline-none",min:"0",max:"100",autoFocus:!0,onFocus:Ge=>Ge.target.select()}),l.jsx("button",{onClick:()=>Xr(T,"discount_rate",parseFloat(Se)||0),className:"w-full py-4 bg-blue-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-blue-600 transition-colors",children:"Kaydet"})]})}),ve&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[1000]",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-80 shadow-2xl",children:[l.jsx("span",{onClick:()=>le(!1),className:"float-right text-3xl text-gray-400 cursor-pointer hover:text-gray-600",children:""}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Fiyat Dzenle"}),l.jsx("p",{className:"text-gray-600 mb-4",children:N[T]?.name}),l.jsx("input",{type:"number",step:"0.01",value:Se,onChange:Ge=>lt(Ge.target.value),className:"w-full p-4 text-2xl text-center border-2 border-blue-500 rounded-lg mb-4 focus:outline-none",min:"0",autoFocus:!0,onFocus:Ge=>Ge.target.select()}),l.jsx("button",{onClick:()=>Xr(T,"price",parseFloat(Se)||0),className:"w-full py-4 bg-blue-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-blue-600 transition-colors",children:"Kaydet"})]})}),W&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[1000] p-4",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-lg shadow-2xl max-h-[90vh] flex flex-col",children:[l.jsx("span",{onClick:()=>z(!1),className:"float-right text-3xl text-gray-400 cursor-pointer hover:text-gray-600",children:""}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Mteri Ara ve Se"}),l.jsx("input",{type:"text",value:Ct,onChange:Ge=>Mt(Ge.target.value),placeholder:"Mteri ad veya numaras",className:"w-full p-3 border border-gray-300 rounded-lg text-base focus:outline-none focus:border-blue-500 mb-4",autoFocus:!0}),l.jsx("div",{className:"flex-1 overflow-y-auto border border-gray-200 rounded-lg mb-4 max-h-72",children:Qt.length===0?l.jsx("p",{className:"text-center text-gray-500 py-8",children:"Mteri bulunamad."}):Qt.map(Ge=>l.jsxs("div",{onClick:()=>{I(Ge.name),z(!1)},className:"flex flex-col p-4 border-b border-gray-100 cursor-pointer hover:bg-blue-50 transition-colors",children:[l.jsx("h4",{className:"m-0 text-lg text-slate-800 font-semibold",children:Ge.name}),l.jsx("p",{className:"m-0 text-sm text-gray-500",children:Ge.phone||"Telefon Yok"})]},Ge.id))}),l.jsx("button",{onClick:()=>{I("Toptan Sat"),z(!1)},className:"w-full py-4 bg-blue-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-blue-600 transition-colors",children:"Misafir Mteri Olarak Devam Et"})]})}),ge&&l.jsxs("div",{className:"fixed inset-0 bg-black z-[2000] flex flex-col items-center justify-center",children:[l.jsx("button",{onClick:Hr,className:"absolute top-5 right-5 text-4xl text-white bg-transparent border-none cursor-pointer z-10",children:""}),l.jsx("div",{id:"barcode-scanner-container",className:"w-[90%] max-w-[400px] rounded-xl overflow-hidden"}),l.jsx("p",{className:"text-white text-lg mt-4",children:"Barkodu kameraya gsterin..."}),Pe&&l.jsx("div",{className:"mt-4 px-6 py-3 bg-red-500 text-white rounded-lg text-center",children:Pe}),l.jsxs("div",{className:"mt-6 flex gap-2 w-[90%] max-w-[400px]",children:[l.jsx("input",{type:"text",placeholder:"Barkodu manuel girin...",className:"flex-1 px-4 py-3 rounded-lg text-lg",onKeyDown:Ge=>{Ge.key==="Enter"&&Ge.target.value&&(Tn(Ge.target.value),Ge.target.value="")}}),l.jsx("button",{onClick:Ge=>{const Nt=Ge.target.previousSibling;Nt.value&&(Tn(Nt.value),Nt.value="")},className:"px-6 py-3 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600",children:"Ekle"})]})]}),Le&&l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[2000] flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-slide-up",children:[l.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 p-5 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:" Fiyat Sorgula"}),l.jsx("button",{onClick:()=>{Q(!1),te(null),De.current&&(De.current.stop().catch(()=>{}),De.current=null),Re(!1)},className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl hover:bg-white/30 transition-colors",children:""})]}),l.jsxs("div",{className:"p-5 space-y-4",children:[ue?l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{id:"price-check-scanner",className:"w-full rounded-2xl overflow-hidden"}),l.jsx("button",{onClick:()=>{De.current&&(De.current.stop().catch(()=>{}),De.current=null),Re(!1)},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"ptal"})]}):l.jsx("button",{onClick:async()=>{Re(!0),te(null),setTimeout(async()=>{try{const Ge=new wc("price-check-scanner");De.current=Ge,await Ge.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},Nt=>{const Dt=t.find(Pt=>Pt.barcode===Nt||Pt.stock_code===Nt||Pt.stock_code?.toLowerCase()===Nt.toLowerCase());te(Dt||{notFound:!0,searchTerm:Nt}),Ge.stop().catch(()=>{}),De.current=null,Re(!1)},()=>{})}catch(Ge){console.error("Kamera hatas:",Ge),Re(!1)}},100)},className:"w-full py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-2xl font-bold text-lg flex items-center justify-center gap-3 shadow-lg shadow-blue-500/30 hover:shadow-xl hover:scale-[1.02] transition-all",children:" Barkod Okut"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:U,onChange:Ge=>P(Ge.target.value),placeholder:"Stok Kodu veya Barkod girin...",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-violet-500 text-lg",onKeyDown:Ge=>{if(Ge.key==="Enter"&&U.trim()){const Nt=t.find(Dt=>Dt.barcode===U.trim()||Dt.stock_code===U.trim()||Dt.stock_code?.toLowerCase()===U.trim().toLowerCase());te(Nt||{notFound:!0,searchTerm:U.trim()})}}}),l.jsx("button",{onClick:()=>{if(U.trim()){const Ge=t.find(Nt=>Nt.barcode===U.trim()||Nt.stock_code===U.trim()||Nt.stock_code?.toLowerCase()===U.trim().toLowerCase());te(Ge||{notFound:!0,searchTerm:U.trim()})}},className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg transition-all",children:"Ara"})]}),B&&l.jsx("div",{className:"mt-4 animate-slide-up",children:B.notFound?l.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-5 text-center",children:[l.jsx("span",{className:"text-4xl",children:""}),l.jsx("p",{className:"text-lg font-semibold text-red-600 mt-2",children:"rn Bulunamad"}),l.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:['"',B.searchTerm,'"']})]}):l.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-2xl p-5 space-y-3",children:[B.image_url&&l.jsx("div",{className:"flex justify-center",children:l.jsx("img",{src:B.image_url,alt:B.name,className:"w-24 h-24 object-cover rounded-xl shadow-md"})}),l.jsxs("div",{className:"space-y-2 text-center",children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"rn Ad"}),l.jsx("p",{className:"text-lg font-bold text-gray-800",children:B.name})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[l.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Stok Kodu"}),l.jsx("p",{className:"font-semibold text-gray-700",children:B.stock_code})]}),l.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Barkod"}),l.jsx("p",{className:"font-semibold text-gray-700 font-mono text-sm",children:B.barcode||"-"})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl p-5 text-center shadow-lg shadow-emerald-500/30",children:[l.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Sat Fiyat"}),l.jsxs("p",{className:"text-4xl font-black text-white",children:[B.price?.toFixed(2)," TL"]})]}),l.jsx("button",{onClick:()=>{te(null),P("")},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:" Yeni Arama"})]})})]})]})}),Ne&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[1000]",children:l.jsxs("div",{className:"bg-white rounded-xl p-6 w-80 shadow-2xl",children:[l.jsx("span",{onClick:()=>{Ke(!1),me(""),G(""),Ae(1),de(1)},className:"float-right text-3xl text-gray-400 cursor-pointer hover:text-gray-600",children:""}),oe===1&&l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"rn Ad Girin"}),l.jsx("input",{type:"text",value:ye,onChange:Ge=>me(Ge.target.value),placeholder:"rn Ad",className:"w-full p-4 text-lg border-2 border-blue-500 rounded-lg focus:outline-none mb-4",autoFocus:!0,onKeyDown:Ge=>{Ge.key==="Enter"&&ye.trim()&&de(2)}}),l.jsx("button",{onClick:()=>{if(!ye.trim()){alert("Ltfen rn ad girin.");return}de(2)},className:"w-full py-4 bg-blue-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-blue-600 transition-colors",children:"leri "})]}),oe===2&&l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Miktar Girin"}),l.jsx("p",{className:"text-gray-600 mb-4",children:ye}),l.jsx("input",{type:"number",value:Me,onChange:Ge=>Ae(Ge.target.value),placeholder:"Miktar",className:"w-full p-4 text-2xl text-center border-2 border-blue-500 rounded-lg focus:outline-none mb-4",min:"1",autoFocus:!0,onFocus:Ge=>Ge.target.select(),onKeyDown:Ge=>{Ge.key==="Enter"&&de(3)}}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>de(1),className:"flex-1 py-4 bg-gray-300 text-gray-700 text-lg font-bold rounded-lg cursor-pointer hover:bg-gray-400 transition-colors",children:" Geri"}),l.jsx("button",{onClick:()=>de(3),className:"flex-1 py-4 bg-blue-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-blue-600 transition-colors",children:"leri "})]})]}),oe===3&&l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Fiyat Girin (TL)"}),l.jsxs("p",{className:"text-gray-600 mb-4",children:[ye," - ",Me," Adet"]}),l.jsx("input",{type:"number",step:"0.01",value:Ce,onChange:Ge=>G(Ge.target.value),placeholder:"Fiyat",className:"w-full p-4 text-2xl text-center border-2 border-blue-500 rounded-lg focus:outline-none mb-4",autoFocus:!0,onFocus:Ge=>Ge.target.select(),onKeyDown:Ge=>{if(Ge.key==="Enter"&&Ce){const Nt=parseFloat(Ce)||0,Dt=parseFloat(Me)||1,Pt={id:"UNDEFINED-"+Date.now(),stock_code:"TANIMSIZ-"+Date.now(),name:ye,price:Nt,quantity:Dt,discount_rate:0,final_price:Nt};S(_r=>[..._r,Pt]),ht(`${ye} eklendi!`),setTimeout(()=>ht(""),1500),Ke(!1),me(""),G(""),Ae(1),de(1)}}}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>de(2),className:"flex-1 py-4 bg-gray-300 text-gray-700 text-lg font-bold rounded-lg cursor-pointer hover:bg-gray-400 transition-colors",children:" Geri"}),l.jsx("button",{onClick:()=>{if(!Ce){alert("Ltfen fiyat girin.");return}const Ge=parseFloat(Ce)||0,Nt=parseFloat(Me)||1,Dt={id:"UNDEFINED-"+Date.now(),stock_code:"TANIMSIZ-"+Date.now(),name:ye,price:Ge,quantity:Nt,discount_rate:0,final_price:Ge};S(Pt=>[...Pt,Dt]),ht(`${ye} eklendi!`),setTimeout(()=>ht(""),1500),Ke(!1),me(""),G(""),Ae(1),de(1)},className:"flex-1 py-4 bg-orange-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-orange-600 transition-colors",children:"Sepete Ekle"})]})]})]})}),l.jsx("style",{children:`
                @keyframes slide-up {
                    from { transform: translateY(100%); }
                    to { transform: translateY(0); }
                }
                .animate-slide-up {
                    animation: slide-up 0.3s ease-out;
                }
                @keyframes slide-down {
                    from { transform: translateY(-100%); }
                    to { transform: translateY(0); }
                }
                .animate-slide-down {
                    animation: slide-down 0.3s ease-out;
                }
            `})]})}function vI(){const{logout:e}=Wi(),[r,t]=J.useState([]),[n,a]=J.useState(!0),[s,c]=J.useState(""),[d,x]=J.useState(!1),[f,g]=J.useState(null),[v,w]=J.useState({name:"",stock_code:"",barcode:"",price:"",stock:"",image_url:""}),[E,N]=J.useState(!1),[S,T]=J.useState(!1),j=J.useRef(null),D=J.useRef(""),I=J.useRef(null),[L,V]=J.useState(!1),[X,M]=J.useState(null),[W,z]=J.useState(""),[ae,Z]=J.useState(!1),H=J.useRef(null);J.useEffect(()=>{he()},[]);const he=async()=>{try{const B=await Sn.getAll();t(B.data?.products||[])}catch(B){console.error("rnler yklenirken hata:",B)}finally{a(!1)}},q=r.filter(B=>{const te=s.toLowerCase();return!s||B.name?.toLowerCase().includes(te)||B.barcode?.toLowerCase().includes(te)||B.stock_code?.toLowerCase().includes(te)}),se=B=>{g(B),w({name:B.name||"",stock_code:B.stock_code||"",barcode:B.barcode||"",price:B.price?.toString()||"",stock:B.stock?.toString()||"0",image_url:B.image_url||""}),x(!0)},ve=async()=>{if(f){N(!0);try{const B={name:v.name,barcode:v.barcode,price:parseFloat(v.price)||0,stock:parseInt(v.stock)||0,image_url:v.image_url};(await Sn.update(f.stock_code,B)).data?(alert("rn gncellendi!"),x(!1),he()):alert("Hata: Gncelleme baarsz")}catch(B){console.error("Update error:",B),alert("Gncelleme hatas: "+(B.response?.data?.message||B.message||"Bilinmeyen hata"))}finally{N(!1)}}},le=async()=>{T(!0),D.current="",setTimeout(async()=>{try{const B=new wc("product-barcode-scanner");j.current=B,await B.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},te=>{te!==D.current&&(D.current=te,w(U=>({...U,barcode:te})),ge())},()=>{})}catch(B){console.error("Kamera hatas:",B),alert("Kamera alamad"),T(!1)}},100)},ge=async()=>{if(j.current){try{await j.current.stop(),j.current.clear()}catch{}j.current=null}T(!1)},ie=async B=>{const te=B.target.files[0];if(te)try{const U=await Le(te,300,.6);w(P=>({...P,image_url:U}))}catch(U){console.error("Resim sktrma hatas:",U),alert("Resim yklenirken hata olutu")}},Le=(B,te,U)=>new Promise((P,ue)=>{const Re=new FileReader;Re.onload=De=>{const Ne=new Image;Ne.onload=()=>{const Ke=document.createElement("canvas");let ye=Ne.width,me=Ne.height;ye>me?ye>te&&(me=Math.round(me*te/ye),ye=te):me>te&&(ye=Math.round(ye*te/me),me=te),Ke.width=ye,Ke.height=me,Ke.getContext("2d").drawImage(Ne,0,0,ye,me);const G=Ke.toDataURL("image/jpeg",U);P(G)},Ne.onerror=ue,Ne.src=De.target.result},Re.onerror=ue,Re.readAsDataURL(B)}),Q=()=>{w(B=>({...B,image_url:""}))};return n?l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:l.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("div",{className:"min-h-screen bg-gray-100 pb-20",children:[l.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-10 px-4 py-3",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx(hr,{to:"/mobile-pos",className:"text-2xl",children:""}),l.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"rn Listesi"}),l.jsx("span",{className:"ml-auto bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-sm font-semibold",children:r.length})]}),l.jsx("input",{type:"text",value:s,onChange:B=>c(B.target.value),placeholder:"rn ara (ad, barkod, stok kodu)...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"})]}),l.jsx("div",{className:"p-4 space-y-3",children:q.length===0?l.jsx("div",{className:"text-center py-10 text-gray-500",children:"rn bulunamad."}):q.map(B=>l.jsxs("div",{onClick:()=>se(B),className:"bg-white rounded-xl p-4 shadow-sm flex items-center gap-4 cursor-pointer active:bg-gray-50",children:[B.image_url?l.jsx("img",{src:B.image_url,alt:B.name,className:"w-16 h-16 object-cover rounded-lg"}):l.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-2xl text-gray-400",children:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:B.name}),l.jsx("p",{className:"text-sm text-gray-500",children:B.stock_code}),l.jsx("p",{className:"text-xs text-gray-400",children:B.barcode||"-"})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"text-lg font-bold text-green-600",children:[B.price?.toFixed(2)," TL"]}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Stok: ",B.stock||0]})]})]},B.id||B.stock_code))}),d&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end justify-center",children:l.jsxs("div",{className:"bg-white w-full max-w-lg rounded-t-3xl p-6 animate-slide-up max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"rn Dzenle"}),l.jsx("button",{onClick:()=>x(!1),className:"text-3xl text-gray-400 hover:text-gray-600",children:""})]}),l.jsxs("div",{className:"flex flex-col items-center mb-4",children:[v.image_url?l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:v.image_url,alt:"rn",className:"w-32 h-32 object-cover rounded-xl border-2 border-gray-200"}),l.jsx("button",{onClick:Q,className:"absolute -top-2 -right-2 w-7 h-7 bg-red-500 text-white rounded-full text-lg flex items-center justify-center",children:""})]}):l.jsx("div",{className:"w-32 h-32 bg-gray-100 rounded-xl flex items-center justify-center text-5xl text-gray-300",children:""}),l.jsx("input",{type:"file",accept:"image/*",ref:I,onChange:ie,className:"hidden"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsxs("button",{onClick:()=>I.current?.click(),className:"px-4 py-2 bg-blue-100 text-blue-600 rounded-lg text-sm font-semibold",children:[" Resim ",v.image_url?"Deitir":"Ekle"]}),l.jsx("button",{onClick:le,className:"px-4 py-2 bg-green-100 text-green-600 rounded-lg text-sm font-semibold",children:" Barkod Okut"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"rn Ad"}),l.jsx("input",{type:"text",value:v.name,onChange:B=>w({...v,name:B.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"Stok Kodu"}),l.jsx("input",{type:"text",value:v.stock_code,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none bg-gray-50 text-gray-500",readOnly:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"Barkod"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:v.barcode,onChange:B=>w({...v,barcode:B.target.value}),placeholder:"Barkod girin",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"}),l.jsx("button",{onClick:le,className:"px-3 py-3 bg-blue-500 text-white rounded-xl text-xl",children:""})]})]})]}),v.barcode&&l.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-center",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Mevcut Barkod"}),l.jsx("p",{className:"text-lg font-mono font-bold text-gray-800",children:v.barcode})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"Fiyat (TL)"}),l.jsx("input",{type:"number",step:"0.01",value:v.price,onChange:B=>w({...v,price:B.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 text-lg font-bold text-green-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"Stok Adedi"}),l.jsx("input",{type:"number",value:v.stock,onChange:B=>w({...v,stock:B.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"})]})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>x(!1),className:"flex-1 py-4 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"ptal"}),l.jsx("button",{onClick:ve,disabled:E,className:"flex-1 py-4 bg-blue-500 text-white rounded-xl font-bold disabled:opacity-50",children:E?"Kaydediliyor...":"Kaydet"})]})]})}),S&&l.jsxs("div",{className:"fixed inset-0 bg-black z-[100] flex flex-col items-center justify-center",children:[l.jsx("button",{onClick:ge,className:"absolute top-5 right-5 text-4xl text-white",children:""}),l.jsx("div",{id:"product-barcode-scanner",className:"w-[90%] max-w-[400px] rounded-xl overflow-hidden"}),l.jsx("p",{className:"text-white text-lg mt-4",children:"Barkodu okutun..."})]}),l.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 flex justify-around py-2 px-1",children:[l.jsxs(hr,{to:"/mobile-pos",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Sat"})]}),l.jsxs("button",{onClick:()=>{V(!0),M(null),z("")},className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Fiyat Gr"})]}),l.jsxs(hr,{to:"/mobile-products",className:"flex flex-col items-center text-blue-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px] font-bold",children:"rnler"})]}),l.jsxs(hr,{to:"/mobile-customers",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Bakiyeler"})]}),l.jsxs(hr,{to:"/mobile-sales",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Satlar"})]}),l.jsxs(hr,{to:"/mobile-invoices",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Faturalar"})]}),l.jsxs("button",{onClick:()=>e(),className:"flex flex-col items-center text-red-500 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"k"})]})]}),L&&l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[2000] flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-slide-up",children:[l.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 p-5 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:" Fiyat Sorgula"}),l.jsx("button",{onClick:()=>{V(!1),M(null),H.current&&(H.current.stop().catch(()=>{}),H.current=null),Z(!1)},className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl",children:""})]}),l.jsxs("div",{className:"p-5 space-y-4",children:[ae?l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{id:"products-price-scanner",className:"w-full rounded-2xl overflow-hidden"}),l.jsx("button",{onClick:()=>{H.current&&(H.current.stop().catch(()=>{}),H.current=null),Z(!1)},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"ptal"})]}):l.jsx("button",{onClick:async()=>{Z(!0),M(null),setTimeout(async()=>{try{const B=new wc("products-price-scanner");H.current=B,await B.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},te=>{const U=r.find(P=>P.barcode===te||P.stock_code===te);M(U||{notFound:!0,searchTerm:te}),B.stop().catch(()=>{}),H.current=null,Z(!1)},()=>{})}catch{Z(!1)}},100)},className:"w-full py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-2xl font-bold text-lg",children:" Barkod Okut"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:W,onChange:B=>z(B.target.value),placeholder:"Stok Kodu veya Barkod...",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl",onKeyDown:B=>{if(B.key==="Enter"&&W.trim()){const te=r.find(U=>U.barcode===W.trim()||U.stock_code===W.trim());M(te||{notFound:!0,searchTerm:W.trim()})}}}),l.jsx("button",{onClick:()=>{if(W.trim()){const B=r.find(te=>te.barcode===W.trim()||te.stock_code===W.trim());M(B||{notFound:!0,searchTerm:W.trim()})}},className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-bold",children:"Ara"})]}),X&&l.jsx("div",{className:"mt-4",children:X.notFound?l.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-5 text-center",children:[l.jsx("span",{className:"text-4xl",children:""}),l.jsx("p",{className:"text-lg font-semibold text-red-600 mt-2",children:"rn Bulunamad"})]}):l.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-2xl p-5 space-y-3",children:[l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-lg font-bold text-gray-800",children:X.name})}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[l.jsxs("div",{className:"bg-white rounded-xl p-3",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Stok Kodu"}),l.jsx("p",{className:"font-semibold",children:X.stock_code})]}),l.jsxs("div",{className:"bg-white rounded-xl p-3",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Barkod"}),l.jsx("p",{className:"font-semibold font-mono text-sm",children:X.barcode||"-"})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl p-5 text-center",children:[l.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Sat Fiyat"}),l.jsxs("p",{className:"text-4xl font-black text-white",children:[X.price?.toFixed(2)," TL"]})]}),l.jsx("button",{onClick:()=>{M(null),z("")},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:" Yeni Arama"})]})})]})]})}),l.jsx("style",{children:`
                @keyframes slide-up {
                    from { transform: translateY(100%); }
                    to { transform: translateY(0); }
                }
                .animate-slide-up {
                    animation: slide-up 0.3s ease-out;
                }
            `})]})}function yI(){const{logout:e}=Wi(),[r,t]=J.useState([]),[n,a]=J.useState([]),[s,c]=J.useState(!0),[d,x]=J.useState(""),[f,g]=J.useState(!1),[v,w]=J.useState(null),[E,N]=J.useState(""),[S,T]=J.useState(!1),j=J.useRef(null);J.useEffect(()=>{D()},[]);const D=async()=>{try{const[X,M]=await Promise.all([kn.getAll(),Sn.getAll()]);t(X.data?.customers||[]),a(M.data?.products||[])}catch(X){console.error("Veri yklenirken hata:",X)}finally{c(!1)}},I=r.filter(X=>{const M=d.toLowerCase();return!d||X.name?.toLowerCase().includes(M)||X.customer_code?.toLowerCase().includes(M)||X.phone?.includes(d)}),L=r.reduce((X,M)=>{const W=parseFloat(M.balance)||0;return W>0?X+W:X},0),V=r.reduce((X,M)=>{const W=parseFloat(M.balance)||0;return W<0?X+Math.abs(W):X},0);return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:l.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("div",{className:"min-h-screen bg-gray-100 pb-20",children:[l.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-10 px-4 py-3",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx(hr,{to:"/mobile-pos",className:"text-2xl",children:""}),l.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Bakiyeler"}),l.jsx("span",{className:"ml-auto bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-sm font-semibold",children:r.length})]}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsxs("div",{className:"flex-1 bg-red-50 border border-red-200 rounded-xl p-3",children:[l.jsx("p",{className:"text-xs text-red-600",children:"Toplam Bor"}),l.jsxs("p",{className:"text-lg font-bold text-red-600",children:[L.toFixed(2)," TL"]})]}),l.jsxs("div",{className:"flex-1 bg-green-50 border border-green-200 rounded-xl p-3",children:[l.jsx("p",{className:"text-xs text-green-600",children:"Toplam Alacak"}),l.jsxs("p",{className:"text-lg font-bold text-green-600",children:[V.toFixed(2)," TL"]})]})]}),l.jsx("input",{type:"text",value:d,onChange:X=>x(X.target.value),placeholder:"Mteri ara...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"})]}),l.jsx("div",{className:"p-4 space-y-3",children:I.length===0?l.jsx("div",{className:"text-center py-10 text-gray-500",children:"Mteri bulunamad."}):I.map(X=>{const M=parseFloat(X.balance)||0;return l.jsxs(hr,{to:`/customer/${encodeURIComponent(X.name)}`,className:"bg-white rounded-xl p-4 shadow-sm flex items-center gap-4 no-underline",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:X.name?.charAt(0)?.toUpperCase()}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:X.name}),l.jsx("p",{className:"text-sm text-gray-500",children:X.customer_code||"-"})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:`text-lg font-bold ${M>0?"text-red-600":M<0?"text-green-600":"text-gray-600"}`,children:[Math.abs(M).toFixed(2)," TL"]}),l.jsx("p",{className:`text-xs ${M>0?"text-red-500":M<0?"text-green-500":"text-gray-500"}`,children:M>0?"Borlu":M<0?"Alacakl":"Ntr"})]})]},X.id)})}),l.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 flex justify-around py-2 px-1",children:[l.jsxs(hr,{to:"/mobile-pos",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Sat"})]}),l.jsxs("button",{onClick:()=>{g(!0),w(null),N("")},className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Fiyat Gr"})]}),l.jsxs(hr,{to:"/mobile-products",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"rnler"})]}),l.jsxs(hr,{to:"/mobile-customers",className:"flex flex-col items-center text-blue-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px] font-bold",children:"Bakiyeler"})]}),l.jsxs(hr,{to:"/mobile-sales",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Satlar"})]}),l.jsxs(hr,{to:"/mobile-invoices",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Faturalar"})]}),l.jsxs("button",{onClick:()=>e(),className:"flex flex-col items-center text-red-500 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"k"})]})]}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[2000] flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 p-5 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:" Fiyat Sorgula"}),l.jsx("button",{onClick:()=>{g(!1),w(null),j.current&&(j.current.stop().catch(()=>{}),j.current=null),T(!1)},className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl",children:""})]}),l.jsxs("div",{className:"p-5 space-y-4",children:[S?l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{id:"customers-price-scanner",className:"w-full rounded-2xl overflow-hidden"}),l.jsx("button",{onClick:()=>{j.current&&(j.current.stop().catch(()=>{}),j.current=null),T(!1)},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"ptal"})]}):l.jsx("button",{onClick:async()=>{T(!0),w(null),setTimeout(async()=>{try{const X=new wc("customers-price-scanner");j.current=X,await X.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},M=>{const W=n.find(z=>z.barcode===M||z.stock_code===M);w(W||{notFound:!0,searchTerm:M}),X.stop().catch(()=>{}),j.current=null,T(!1)},()=>{})}catch{T(!1)}},100)},className:"w-full py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-2xl font-bold text-lg",children:" Barkod Okut"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:E,onChange:X=>N(X.target.value),placeholder:"Stok Kodu veya Barkod...",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl",onKeyDown:X=>{if(X.key==="Enter"&&E.trim()){const M=n.find(W=>W.barcode===E.trim()||W.stock_code===E.trim());w(M||{notFound:!0,searchTerm:E.trim()})}}}),l.jsx("button",{onClick:()=>{if(E.trim()){const X=n.find(M=>M.barcode===E.trim()||M.stock_code===E.trim());w(X||{notFound:!0,searchTerm:E.trim()})}},className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-bold",children:"Ara"})]}),v&&l.jsx("div",{className:"mt-4",children:v.notFound?l.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-5 text-center",children:[l.jsx("span",{className:"text-4xl",children:""}),l.jsx("p",{className:"text-lg font-semibold text-red-600 mt-2",children:"rn Bulunamad"})]}):l.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-2xl p-5 space-y-3",children:[l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-lg font-bold text-gray-800",children:v.name})}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[l.jsxs("div",{className:"bg-white rounded-xl p-3",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Stok Kodu"}),l.jsx("p",{className:"font-semibold",children:v.stock_code})]}),l.jsxs("div",{className:"bg-white rounded-xl p-3",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Barkod"}),l.jsx("p",{className:"font-semibold font-mono text-sm",children:v.barcode||"-"})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl p-5 text-center",children:[l.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Sat Fiyat"}),l.jsxs("p",{className:"text-4xl font-black text-white",children:[v.price?.toFixed(2)," TL"]})]}),l.jsx("button",{onClick:()=>{w(null),N("")},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:" Yeni Arama"})]})})]})]})})]})}function wI(){const{logout:e}=Wi(),[r,t]=J.useState([]),[n,a]=J.useState([]),[s,c]=J.useState(!0),[d,x]=J.useState(""),[f,g]=J.useState(!1),[v,w]=J.useState(null),[E,N]=J.useState(""),[S,T]=J.useState(!1),j=J.useRef(null);J.useEffect(()=>{D()},[]);const D=async()=>{try{const[W,z]=await Promise.all([kl.getAll(),Sn.getAll()]);t(W.data?.sales||[]),a(z.data?.products||[])}catch(W){console.error("Veri yklenirken hata:",W)}finally{c(!1)}},I=r.filter(W=>{const z=d.toLowerCase();return!d||W.sale_code?.toLowerCase().includes(z)||W.customer_name?.toLowerCase().includes(z)}),L=new Date().toDateString(),V=r.filter(W=>new Date(W.created_at).toDateString()===L),X=V.reduce((W,z)=>W+(parseFloat(z.total)||0),0),M=W=>W?new Date(W).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"-";return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:l.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("div",{className:"min-h-screen bg-gray-100 pb-20",children:[l.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-10 px-4 py-3",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx(hr,{to:"/mobile-pos",className:"text-2xl",children:""}),l.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Sat Gemii"}),l.jsx("span",{className:"ml-auto bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-sm font-semibold",children:r.length})]}),l.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-4 mb-3 text-white",children:[l.jsx("p",{className:"text-sm opacity-80",children:"Bugnk Satlar"}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsxs("p",{className:"text-2xl font-bold",children:[X.toFixed(2)," TL"]}),l.jsxs("p",{className:"text-sm",children:[V.length," sat"]})]})]}),l.jsx("input",{type:"text",value:d,onChange:W=>x(W.target.value),placeholder:"Sat kodu veya mteri ara...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"})]}),l.jsx("div",{className:"p-4 space-y-3",children:I.length===0?l.jsx("div",{className:"text-center py-10 text-gray-500",children:"Sat bulunamad."}):I.map(W=>l.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:W.sale_code}),l.jsx("p",{className:"text-sm text-gray-500",children:W.customer_name||"Toptan Sat"})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"text-lg font-bold text-green-600",children:[parseFloat(W.total||0).toFixed(2)," TL"]}),l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${W.payment_method==="Nakit"?"bg-green-100 text-green-700":W.payment_method==="POS"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}`,children:W.payment_method||"Nakit"})]})]}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[l.jsx("span",{children:M(W.created_at)}),l.jsxs("span",{children:[W.items?.length||0," rn"]})]})]},W.id||W.sale_code))}),l.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 flex justify-around py-2 px-1",children:[l.jsxs(hr,{to:"/mobile-pos",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Sat"})]}),l.jsxs("button",{onClick:()=>{g(!0),w(null),N("")},className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Fiyat Gr"})]}),l.jsxs(hr,{to:"/mobile-products",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"rnler"})]}),l.jsxs(hr,{to:"/mobile-customers",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Bakiyeler"})]}),l.jsxs(hr,{to:"/mobile-sales",className:"flex flex-col items-center text-blue-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px] font-bold",children:"Satlar"})]}),l.jsxs(hr,{to:"/mobile-invoices",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Faturalar"})]}),l.jsxs("button",{onClick:()=>e(),className:"flex flex-col items-center text-red-500 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"k"})]})]}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[2000] flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 p-5 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:" Fiyat Sorgula"}),l.jsx("button",{onClick:()=>{g(!1),w(null),j.current&&(j.current.stop().catch(()=>{}),j.current=null),T(!1)},className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl",children:""})]}),l.jsxs("div",{className:"p-5 space-y-4",children:[S?l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{id:"sales-price-scanner",className:"w-full rounded-2xl overflow-hidden"}),l.jsx("button",{onClick:()=>{j.current&&(j.current.stop().catch(()=>{}),j.current=null),T(!1)},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"ptal"})]}):l.jsx("button",{onClick:async()=>{T(!0),w(null),setTimeout(async()=>{try{const W=new wc("sales-price-scanner");j.current=W,await W.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},z=>{const ae=n.find(Z=>Z.barcode===z||Z.stock_code===z);w(ae||{notFound:!0,searchTerm:z}),W.stop().catch(()=>{}),j.current=null,T(!1)},()=>{})}catch{T(!1)}},100)},className:"w-full py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-2xl font-bold text-lg",children:" Barkod Okut"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:E,onChange:W=>N(W.target.value),placeholder:"Stok Kodu veya Barkod...",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl",onKeyDown:W=>{if(W.key==="Enter"&&E.trim()){const z=n.find(ae=>ae.barcode===E.trim()||ae.stock_code===E.trim());w(z||{notFound:!0,searchTerm:E.trim()})}}}),l.jsx("button",{onClick:()=>{if(E.trim()){const W=n.find(z=>z.barcode===E.trim()||z.stock_code===E.trim());w(W||{notFound:!0,searchTerm:E.trim()})}},className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-bold",children:"Ara"})]}),v&&l.jsx("div",{className:"mt-4",children:v.notFound?l.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-5 text-center",children:[l.jsx("span",{className:"text-4xl",children:""}),l.jsx("p",{className:"text-lg font-semibold text-red-600 mt-2",children:"rn Bulunamad"})]}):l.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-2xl p-5 space-y-3",children:[l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-lg font-bold text-gray-800",children:v.name})}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[l.jsxs("div",{className:"bg-white rounded-xl p-3",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Stok Kodu"}),l.jsx("p",{className:"font-semibold",children:v.stock_code})]}),l.jsxs("div",{className:"bg-white rounded-xl p-3",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Barkod"}),l.jsx("p",{className:"font-semibold font-mono text-sm",children:v.barcode||"-"})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl p-5 text-center",children:[l.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Sat Fiyat"}),l.jsxs("p",{className:"text-4xl font-black text-white",children:[v.price?.toFixed(2)," TL"]})]}),l.jsx("button",{onClick:()=>{w(null),N("")},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:" Yeni Arama"})]})})]})]})})]})}function Jh(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xp={exports:{}};var a4;function _I(){return a4||(a4=1,(function(e,r){(function(t){e.exports=t()})(function(){return(function t(n,a,s){function c(f,g){if(!a[f]){if(!n[f]){var v=typeof Jh=="function"&&Jh;if(!g&&v)return v(f,!0);if(d)return d(f,!0);var w=new Error("Cannot find module '"+f+"'");throw w.code="MODULE_NOT_FOUND",w}var E=a[f]={exports:{}};n[f][0].call(E.exports,function(N){var S=n[f][1][N];return c(S||N)},E,E.exports,t,n,a,s)}return a[f].exports}for(var d=typeof Jh=="function"&&Jh,x=0;x<s.length;x++)c(s[x]);return c})({1:[function(t,n,a){var s=t("./utils"),c=t("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(x){for(var f,g,v,w,E,N,S,T=[],j=0,D=x.length,I=D,L=s.getTypeOf(x)!=="string";j<x.length;)I=D-j,v=L?(f=x[j++],g=j<D?x[j++]:0,j<D?x[j++]:0):(f=x.charCodeAt(j++),g=j<D?x.charCodeAt(j++):0,j<D?x.charCodeAt(j++):0),w=f>>2,E=(3&f)<<4|g>>4,N=1<I?(15&g)<<2|v>>6:64,S=2<I?63&v:64,T.push(d.charAt(w)+d.charAt(E)+d.charAt(N)+d.charAt(S));return T.join("")},a.decode=function(x){var f,g,v,w,E,N,S=0,T=0,j="data:";if(x.substr(0,j.length)===j)throw new Error("Invalid base64 input, it looks like a data url.");var D,I=3*(x=x.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(x.charAt(x.length-1)===d.charAt(64)&&I--,x.charAt(x.length-2)===d.charAt(64)&&I--,I%1!=0)throw new Error("Invalid base64 input, bad content length.");for(D=c.uint8array?new Uint8Array(0|I):new Array(0|I);S<x.length;)f=d.indexOf(x.charAt(S++))<<2|(w=d.indexOf(x.charAt(S++)))>>4,g=(15&w)<<4|(E=d.indexOf(x.charAt(S++)))>>2,v=(3&E)<<6|(N=d.indexOf(x.charAt(S++))),D[T++]=f,E!==64&&(D[T++]=g),N!==64&&(D[T++]=v);return D}},{"./support":30,"./utils":32}],2:[function(t,n,a){var s=t("./external"),c=t("./stream/DataWorker"),d=t("./stream/Crc32Probe"),x=t("./stream/DataLengthProbe");function f(g,v,w,E,N){this.compressedSize=g,this.uncompressedSize=v,this.crc32=w,this.compression=E,this.compressedContent=N}f.prototype={getContentWorker:function(){var g=new c(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new x("data_length")),v=this;return g.on("end",function(){if(this.streamInfo.data_length!==v.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new c(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(g,v,w){return g.pipe(new d).pipe(new x("uncompressedSize")).pipe(v.compressWorker(w)).pipe(new x("compressedSize")).withStreamInfo("compression",v)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,a){var s=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,a){var s=t("./utils"),c=(function(){for(var d,x=[],f=0;f<256;f++){d=f;for(var g=0;g<8;g++)d=1&d?3988292384^d>>>1:d>>>1;x[f]=d}return x})();n.exports=function(d,x){return d!==void 0&&d.length?s.getTypeOf(d)!=="string"?(function(f,g,v,w){var E=c,N=w+v;f^=-1;for(var S=w;S<N;S++)f=f>>>8^E[255&(f^g[S])];return-1^f})(0|x,d,d.length,0):(function(f,g,v,w){var E=c,N=w+v;f^=-1;for(var S=w;S<N;S++)f=f>>>8^E[255&(f^g.charCodeAt(S))];return-1^f})(0|x,d,d.length,0):0}},{"./utils":32}],5:[function(t,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,n,a){var s=null;s=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:s}},{lie:37}],7:[function(t,n,a){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=t("pako"),d=t("./utils"),x=t("./stream/GenericWorker"),f=s?"uint8array":"array";function g(v,w){x.call(this,"FlateWorker/"+v),this._pako=null,this._pakoAction=v,this._pakoOptions=w,this.meta={}}a.magic="\b\0",d.inherits(g,x),g.prototype.processChunk=function(v){this.meta=v.meta,this._pako===null&&this._createPako(),this._pako.push(d.transformTo(f,v.data),!1)},g.prototype.flush=function(){x.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){x.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var v=this;this._pako.onData=function(w){v.push({data:w,meta:v.meta})}},a.compressWorker=function(v){return new g("Deflate",v)},a.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,a){function s(E,N){var S,T="";for(S=0;S<N;S++)T+=String.fromCharCode(255&E),E>>>=8;return T}function c(E,N,S,T,j,D){var I,L,V=E.file,X=E.compression,M=D!==f.utf8encode,W=d.transformTo("string",D(V.name)),z=d.transformTo("string",f.utf8encode(V.name)),ae=V.comment,Z=d.transformTo("string",D(ae)),H=d.transformTo("string",f.utf8encode(ae)),he=z.length!==V.name.length,q=H.length!==ae.length,se="",ve="",le="",ge=V.dir,ie=V.date,Le={crc32:0,compressedSize:0,uncompressedSize:0};N&&!S||(Le.crc32=E.crc32,Le.compressedSize=E.compressedSize,Le.uncompressedSize=E.uncompressedSize);var Q=0;N&&(Q|=8),M||!he&&!q||(Q|=2048);var B=0,te=0;ge&&(B|=16),j==="UNIX"?(te=798,B|=(function(P,ue){var Re=P;return P||(Re=ue?16893:33204),(65535&Re)<<16})(V.unixPermissions,ge)):(te=20,B|=(function(P){return 63&(P||0)})(V.dosPermissions)),I=ie.getUTCHours(),I<<=6,I|=ie.getUTCMinutes(),I<<=5,I|=ie.getUTCSeconds()/2,L=ie.getUTCFullYear()-1980,L<<=4,L|=ie.getUTCMonth()+1,L<<=5,L|=ie.getUTCDate(),he&&(ve=s(1,1)+s(g(W),4)+z,se+="up"+s(ve.length,2)+ve),q&&(le=s(1,1)+s(g(Z),4)+H,se+="uc"+s(le.length,2)+le);var U="";return U+=`
\0`,U+=s(Q,2),U+=X.magic,U+=s(I,2),U+=s(L,2),U+=s(Le.crc32,4),U+=s(Le.compressedSize,4),U+=s(Le.uncompressedSize,4),U+=s(W.length,2),U+=s(se.length,2),{fileRecord:v.LOCAL_FILE_HEADER+U+W+se,dirRecord:v.CENTRAL_FILE_HEADER+s(te,2)+U+s(Z.length,2)+"\0\0\0\0"+s(B,4)+s(T,4)+W+se+Z}}var d=t("../utils"),x=t("../stream/GenericWorker"),f=t("../utf8"),g=t("../crc32"),v=t("../signature");function w(E,N,S,T){x.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=N,this.zipPlatform=S,this.encodeFileName=T,this.streamFiles=E,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}d.inherits(w,x),w.prototype.push=function(E){var N=E.meta.percent||0,S=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(E):(this.bytesWritten+=E.data.length,x.prototype.push.call(this,{data:E.data,meta:{currentFile:this.currentFile,percent:S?(N+100*(S-T-1))/S:100}}))},w.prototype.openedSource=function(E){this.currentSourceOffset=this.bytesWritten,this.currentFile=E.file.name;var N=this.streamFiles&&!E.file.dir;if(N){var S=c(E,N,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:S.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(E){this.accumulate=!1;var N=this.streamFiles&&!E.file.dir,S=c(E,N,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(S.dirRecord),N)this.push({data:(function(T){return v.DATA_DESCRIPTOR+s(T.crc32,4)+s(T.compressedSize,4)+s(T.uncompressedSize,4)})(E),meta:{percent:100}});else for(this.push({data:S.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var E=this.bytesWritten,N=0;N<this.dirRecords.length;N++)this.push({data:this.dirRecords[N],meta:{percent:100}});var S=this.bytesWritten-E,T=(function(j,D,I,L,V){var X=d.transformTo("string",V(L));return v.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(j,2)+s(j,2)+s(D,4)+s(I,4)+s(X.length,2)+X})(this.dirRecords.length,S,E,this.zipComment,this.encodeFileName);this.push({data:T,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(E){this._sources.push(E);var N=this;return E.on("data",function(S){N.processChunk(S)}),E.on("end",function(){N.closedSource(N.previous.streamInfo),N._sources.length?N.prepareNextSource():N.end()}),E.on("error",function(S){N.error(S)}),this},w.prototype.resume=function(){return!!x.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(E){var N=this._sources;if(!x.prototype.error.call(this,E))return!1;for(var S=0;S<N.length;S++)try{N[S].error(E)}catch{}return!0},w.prototype.lock=function(){x.prototype.lock.call(this);for(var E=this._sources,N=0;N<E.length;N++)E[N].lock()},n.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,a){var s=t("../compressions"),c=t("./ZipFileWorker");a.generateWorker=function(d,x,f){var g=new c(x.streamFiles,f,x.platform,x.encodeFileName),v=0;try{d.forEach(function(w,E){v++;var N=(function(D,I){var L=D||I,V=s[L];if(!V)throw new Error(L+" is not a valid compression method !");return V})(E.options.compression,x.compression),S=E.options.compressionOptions||x.compressionOptions||{},T=E.dir,j=E.date;E._compressWorker(N,S).withStreamInfo("file",{name:w,dir:T,date:j,comment:E.comment||"",unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions}).pipe(g)}),g.entriesCount=v}catch(w){g.error(w)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,a){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new s;for(var d in this)typeof this[d]!="function"&&(c[d]=this[d]);return c}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(c,d){return new s().loadAsync(c,d)},s.external=t("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,a){var s=t("./utils"),c=t("./external"),d=t("./utf8"),x=t("./zipEntries"),f=t("./stream/Crc32Probe"),g=t("./nodejsUtils");function v(w){return new c.Promise(function(E,N){var S=w.decompressed.getContentWorker().pipe(new f);S.on("error",function(T){N(T)}).on("end",function(){S.streamInfo.crc32!==w.decompressed.crc32?N(new Error("Corrupted zip : CRC32 mismatch")):E()}).resume()})}n.exports=function(w,E){var N=this;return E=s.extend(E||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:d.utf8decode}),g.isNode&&g.isStream(w)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",w,!0,E.optimizedBinaryString,E.base64).then(function(S){var T=new x(E);return T.load(S),T}).then(function(S){var T=[c.Promise.resolve(S)],j=S.files;if(E.checkCRC32)for(var D=0;D<j.length;D++)T.push(v(j[D]));return c.Promise.all(T)}).then(function(S){for(var T=S.shift(),j=T.files,D=0;D<j.length;D++){var I=j[D],L=I.fileNameStr,V=s.resolve(I.fileNameStr);N.file(V,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:E.createFolders}),I.dir||(N.file(V).unsafeOriginalName=L)}return T.zipComment.length&&(N.comment=T.zipComment),N})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,a){var s=t("../utils"),c=t("../stream/GenericWorker");function d(x,f){c.call(this,"Nodejs stream input adapter for "+x),this._upstreamEnded=!1,this._bindStream(f)}s.inherits(d,c),d.prototype._bindStream=function(x){var f=this;(this._stream=x).pause(),x.on("data",function(g){f.push({data:g,meta:{percent:0}})}).on("error",function(g){f.isPaused?this.generatedError=g:f.error(g)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},d.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=d},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,a){var s=t("readable-stream").Readable;function c(d,x,f){s.call(this,x),this._helper=d;var g=this;d.on("data",function(v,w){g.push(v)||g._helper.pause(),f&&f(w)}).on("error",function(v){g.emit("error",v)}).on("end",function(){g.push(null)})}t("../utils").inherits(c,s),c.prototype._read=function(){this._helper.resume()},n.exports=c},{"../utils":32,"readable-stream":16}],14:[function(t,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,c);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,c)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var c=new Buffer(s);return c.fill(0),c},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,n,a){function s(V,X,M){var W,z=d.getTypeOf(X),ae=d.extend(M||{},g);ae.date=ae.date||new Date,ae.compression!==null&&(ae.compression=ae.compression.toUpperCase()),typeof ae.unixPermissions=="string"&&(ae.unixPermissions=parseInt(ae.unixPermissions,8)),ae.unixPermissions&&16384&ae.unixPermissions&&(ae.dir=!0),ae.dosPermissions&&16&ae.dosPermissions&&(ae.dir=!0),ae.dir&&(V=j(V)),ae.createFolders&&(W=T(V))&&D.call(this,W,!0);var Z=z==="string"&&ae.binary===!1&&ae.base64===!1;M&&M.binary!==void 0||(ae.binary=!Z),(X instanceof v&&X.uncompressedSize===0||ae.dir||!X||X.length===0)&&(ae.base64=!1,ae.binary=!0,X="",ae.compression="STORE",z="string");var H=null;H=X instanceof v||X instanceof x?X:N.isNode&&N.isStream(X)?new S(V,X):d.prepareContent(V,X,ae.binary,ae.optimizedBinaryString,ae.base64);var he=new w(V,H,ae);this.files[V]=he}var c=t("./utf8"),d=t("./utils"),x=t("./stream/GenericWorker"),f=t("./stream/StreamHelper"),g=t("./defaults"),v=t("./compressedObject"),w=t("./zipObject"),E=t("./generate"),N=t("./nodejsUtils"),S=t("./nodejs/NodejsStreamInputAdapter"),T=function(V){V.slice(-1)==="/"&&(V=V.substring(0,V.length-1));var X=V.lastIndexOf("/");return 0<X?V.substring(0,X):""},j=function(V){return V.slice(-1)!=="/"&&(V+="/"),V},D=function(V,X){return X=X!==void 0?X:g.createFolders,V=j(V),this.files[V]||s.call(this,V,null,{dir:!0,createFolders:X}),this.files[V]};function I(V){return Object.prototype.toString.call(V)==="[object RegExp]"}var L={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(V){var X,M,W;for(X in this.files)W=this.files[X],(M=X.slice(this.root.length,X.length))&&X.slice(0,this.root.length)===this.root&&V(M,W)},filter:function(V){var X=[];return this.forEach(function(M,W){V(M,W)&&X.push(W)}),X},file:function(V,X,M){if(arguments.length!==1)return V=this.root+V,s.call(this,V,X,M),this;if(I(V)){var W=V;return this.filter(function(ae,Z){return!Z.dir&&W.test(ae)})}var z=this.files[this.root+V];return z&&!z.dir?z:null},folder:function(V){if(!V)return this;if(I(V))return this.filter(function(z,ae){return ae.dir&&V.test(z)});var X=this.root+V,M=D.call(this,X),W=this.clone();return W.root=M.name,W},remove:function(V){V=this.root+V;var X=this.files[V];if(X||(V.slice(-1)!=="/"&&(V+="/"),X=this.files[V]),X&&!X.dir)delete this.files[V];else for(var M=this.filter(function(z,ae){return ae.name.slice(0,V.length)===V}),W=0;W<M.length;W++)delete this.files[M[W].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(V){var X,M={};try{if((M=d.extend(V||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");d.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var W=M.comment||this.comment||"";X=E.generateWorker(this,M,W)}catch(z){(X=new x("error")).error(z)}return new f(X,M.type||"string",M.mimeType)},generateAsync:function(V,X){return this.generateInternalStream(V).accumulate(X)},generateNodeStream:function(V,X){return(V=V||{}).type||(V.type="nodebuffer"),this.generateInternalStream(V).toNodejsStream(X)}};n.exports=L},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,a){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,a){var s=t("./DataReader");function c(d){s.call(this,d);for(var x=0;x<this.data.length;x++)d[x]=255&d[x]}t("../utils").inherits(c,s),c.prototype.byteAt=function(d){return this.data[this.zero+d]},c.prototype.lastIndexOfSignature=function(d){for(var x=d.charCodeAt(0),f=d.charCodeAt(1),g=d.charCodeAt(2),v=d.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===x&&this.data[w+1]===f&&this.data[w+2]===g&&this.data[w+3]===v)return w-this.zero;return-1},c.prototype.readAndCheckSignature=function(d){var x=d.charCodeAt(0),f=d.charCodeAt(1),g=d.charCodeAt(2),v=d.charCodeAt(3),w=this.readData(4);return x===w[0]&&f===w[1]&&g===w[2]&&v===w[3]},c.prototype.readData=function(d){if(this.checkOffset(d),d===0)return[];var x=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,x},n.exports=c},{"../utils":32,"./DataReader":18}],18:[function(t,n,a){var s=t("../utils");function c(d){this.data=d,this.length=d.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(d){this.checkIndex(this.index+d)},checkIndex:function(d){if(this.length<this.zero+d||d<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+d+"). Corrupted zip ?")},setIndex:function(d){this.checkIndex(d),this.index=d},skip:function(d){this.setIndex(this.index+d)},byteAt:function(){},readInt:function(d){var x,f=0;for(this.checkOffset(d),x=this.index+d-1;x>=this.index;x--)f=(f<<8)+this.byteAt(x);return this.index+=d,f},readString:function(d){return s.transformTo("string",this.readData(d))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var d=this.readInt(4);return new Date(Date.UTC(1980+(d>>25&127),(d>>21&15)-1,d>>16&31,d>>11&31,d>>5&63,(31&d)<<1))}},n.exports=c},{"../utils":32}],19:[function(t,n,a){var s=t("./Uint8ArrayReader");function c(d){s.call(this,d)}t("../utils").inherits(c,s),c.prototype.readData=function(d){this.checkOffset(d);var x=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,x},n.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,a){var s=t("./DataReader");function c(d){s.call(this,d)}t("../utils").inherits(c,s),c.prototype.byteAt=function(d){return this.data.charCodeAt(this.zero+d)},c.prototype.lastIndexOfSignature=function(d){return this.data.lastIndexOf(d)-this.zero},c.prototype.readAndCheckSignature=function(d){return d===this.readData(4)},c.prototype.readData=function(d){this.checkOffset(d);var x=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,x},n.exports=c},{"../utils":32,"./DataReader":18}],21:[function(t,n,a){var s=t("./ArrayReader");function c(d){s.call(this,d)}t("../utils").inherits(c,s),c.prototype.readData=function(d){if(this.checkOffset(d),d===0)return new Uint8Array(0);var x=this.data.subarray(this.zero+this.index,this.zero+this.index+d);return this.index+=d,x},n.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,a){var s=t("../utils"),c=t("../support"),d=t("./ArrayReader"),x=t("./StringReader"),f=t("./NodeBufferReader"),g=t("./Uint8ArrayReader");n.exports=function(v){var w=s.getTypeOf(v);return s.checkSupport(w),w!=="string"||c.uint8array?w==="nodebuffer"?new f(v):c.uint8array?new g(s.transformTo("uint8array",v)):new d(s.transformTo("array",v)):new x(v)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,a){var s=t("./GenericWorker"),c=t("../utils");function d(x){s.call(this,"ConvertWorker to "+x),this.destType=x}c.inherits(d,s),d.prototype.processChunk=function(x){this.push({data:c.transformTo(this.destType,x.data),meta:x.meta})},n.exports=d},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,a){var s=t("./GenericWorker"),c=t("../crc32");function d(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(d,s),d.prototype.processChunk=function(x){this.streamInfo.crc32=c(x.data,this.streamInfo.crc32||0),this.push(x)},n.exports=d},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,a){var s=t("../utils"),c=t("./GenericWorker");function d(x){c.call(this,"DataLengthProbe for "+x),this.propName=x,this.withStreamInfo(x,0)}s.inherits(d,c),d.prototype.processChunk=function(x){if(x){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+x.data.length}c.prototype.processChunk.call(this,x)},n.exports=d},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,a){var s=t("../utils"),c=t("./GenericWorker");function d(x){c.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,x.then(function(g){f.dataIsReady=!0,f.data=g,f.max=g&&g.length||0,f.type=s.getTypeOf(g),f.isPaused||f._tickAndRepeat()},function(g){f.error(g)})}s.inherits(d,c),d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var x=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":x=this.data.substring(this.index,f);break;case"uint8array":x=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":x=this.data.slice(this.index,f)}return this.index=f,this.push({data:x,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=d},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,a){function s(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,d){return this._listeners[c].push(d),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,d){if(this._listeners[c])for(var x=0;x<this._listeners[c].length;x++)this._listeners[c][x].call(this,d)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var d=this;return c.on("data",function(x){d.processChunk(x)}),c.on("end",function(){d.end()}),c.on("error",function(x){d.error(x)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,d){return this.extraStreamInfo[c]=d,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},n.exports=s},{}],29:[function(t,n,a){var s=t("../utils"),c=t("./ConvertWorker"),d=t("./GenericWorker"),x=t("../base64"),f=t("../support"),g=t("../external"),v=null;if(f.nodestream)try{v=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(N,S){return new g.Promise(function(T,j){var D=[],I=N._internalType,L=N._outputType,V=N._mimeType;N.on("data",function(X,M){D.push(X),S&&S(M)}).on("error",function(X){D=[],j(X)}).on("end",function(){try{var X=(function(M,W,z){switch(M){case"blob":return s.newBlob(s.transformTo("arraybuffer",W),z);case"base64":return x.encode(W);default:return s.transformTo(M,W)}})(L,(function(M,W){var z,ae=0,Z=null,H=0;for(z=0;z<W.length;z++)H+=W[z].length;switch(M){case"string":return W.join("");case"array":return Array.prototype.concat.apply([],W);case"uint8array":for(Z=new Uint8Array(H),z=0;z<W.length;z++)Z.set(W[z],ae),ae+=W[z].length;return Z;case"nodebuffer":return Buffer.concat(W);default:throw new Error("concat : unsupported type '"+M+"'")}})(I,D),V);T(X)}catch(M){j(M)}D=[]}).resume()})}function E(N,S,T){var j=S;switch(S){case"blob":case"arraybuffer":j="uint8array";break;case"base64":j="string"}try{this._internalType=j,this._outputType=S,this._mimeType=T,s.checkSupport(j),this._worker=N.pipe(new c(j)),N.lock()}catch(D){this._worker=new d("error"),this._worker.error(D)}}E.prototype={accumulate:function(N){return w(this,N)},on:function(N,S){var T=this;return N==="data"?this._worker.on(N,function(j){S.call(T,j.data,j.meta)}):this._worker.on(N,function(){s.delay(S,arguments,T)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(N){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new v(this,{objectMode:this._outputType!=="nodebuffer"},N)}},n.exports=E},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var s=new ArrayBuffer(0);try{a.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(s),a.blob=c.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,a){for(var s=t("./utils"),c=t("./support"),d=t("./nodejsUtils"),x=t("./stream/GenericWorker"),f=new Array(256),g=0;g<256;g++)f[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;f[254]=f[254]=1;function v(){x.call(this,"utf-8 decode"),this.leftOver=null}function w(){x.call(this,"utf-8 encode")}a.utf8encode=function(E){return c.nodebuffer?d.newBufferFrom(E,"utf-8"):(function(N){var S,T,j,D,I,L=N.length,V=0;for(D=0;D<L;D++)(64512&(T=N.charCodeAt(D)))==55296&&D+1<L&&(64512&(j=N.charCodeAt(D+1)))==56320&&(T=65536+(T-55296<<10)+(j-56320),D++),V+=T<128?1:T<2048?2:T<65536?3:4;for(S=c.uint8array?new Uint8Array(V):new Array(V),D=I=0;I<V;D++)(64512&(T=N.charCodeAt(D)))==55296&&D+1<L&&(64512&(j=N.charCodeAt(D+1)))==56320&&(T=65536+(T-55296<<10)+(j-56320),D++),T<128?S[I++]=T:(T<2048?S[I++]=192|T>>>6:(T<65536?S[I++]=224|T>>>12:(S[I++]=240|T>>>18,S[I++]=128|T>>>12&63),S[I++]=128|T>>>6&63),S[I++]=128|63&T);return S})(E)},a.utf8decode=function(E){return c.nodebuffer?s.transformTo("nodebuffer",E).toString("utf-8"):(function(N){var S,T,j,D,I=N.length,L=new Array(2*I);for(S=T=0;S<I;)if((j=N[S++])<128)L[T++]=j;else if(4<(D=f[j]))L[T++]=65533,S+=D-1;else{for(j&=D===2?31:D===3?15:7;1<D&&S<I;)j=j<<6|63&N[S++],D--;1<D?L[T++]=65533:j<65536?L[T++]=j:(j-=65536,L[T++]=55296|j>>10&1023,L[T++]=56320|1023&j)}return L.length!==T&&(L.subarray?L=L.subarray(0,T):L.length=T),s.applyFromCharCode(L)})(E=s.transformTo(c.uint8array?"uint8array":"array",E))},s.inherits(v,x),v.prototype.processChunk=function(E){var N=s.transformTo(c.uint8array?"uint8array":"array",E.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var S=N;(N=new Uint8Array(S.length+this.leftOver.length)).set(this.leftOver,0),N.set(S,this.leftOver.length)}else N=this.leftOver.concat(N);this.leftOver=null}var T=(function(D,I){var L;for((I=I||D.length)>D.length&&(I=D.length),L=I-1;0<=L&&(192&D[L])==128;)L--;return L<0||L===0?I:L+f[D[L]]>I?L:I})(N),j=N;T!==N.length&&(c.uint8array?(j=N.subarray(0,T),this.leftOver=N.subarray(T,N.length)):(j=N.slice(0,T),this.leftOver=N.slice(T,N.length))),this.push({data:a.utf8decode(j),meta:E.meta})},v.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=v,s.inherits(w,x),w.prototype.processChunk=function(E){this.push({data:a.utf8encode(E.data),meta:E.meta})},a.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,a){var s=t("./support"),c=t("./base64"),d=t("./nodejsUtils"),x=t("./external");function f(S){return S}function g(S,T){for(var j=0;j<S.length;++j)T[j]=255&S.charCodeAt(j);return T}t("setimmediate"),a.newBlob=function(S,T){a.checkSupport("blob");try{return new Blob([S],{type:T})}catch{try{var j=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return j.append(S),j.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var v={stringifyByChunk:function(S,T,j){var D=[],I=0,L=S.length;if(L<=j)return String.fromCharCode.apply(null,S);for(;I<L;)T==="array"||T==="nodebuffer"?D.push(String.fromCharCode.apply(null,S.slice(I,Math.min(I+j,L)))):D.push(String.fromCharCode.apply(null,S.subarray(I,Math.min(I+j,L)))),I+=j;return D.join("")},stringifyByChar:function(S){for(var T="",j=0;j<S.length;j++)T+=String.fromCharCode(S[j]);return T},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,d.allocBuffer(1)).length===1}catch{return!1}})()}};function w(S){var T=65536,j=a.getTypeOf(S),D=!0;if(j==="uint8array"?D=v.applyCanBeUsed.uint8array:j==="nodebuffer"&&(D=v.applyCanBeUsed.nodebuffer),D)for(;1<T;)try{return v.stringifyByChunk(S,j,T)}catch{T=Math.floor(T/2)}return v.stringifyByChar(S)}function E(S,T){for(var j=0;j<S.length;j++)T[j]=S[j];return T}a.applyFromCharCode=w;var N={};N.string={string:f,array:function(S){return g(S,new Array(S.length))},arraybuffer:function(S){return N.string.uint8array(S).buffer},uint8array:function(S){return g(S,new Uint8Array(S.length))},nodebuffer:function(S){return g(S,d.allocBuffer(S.length))}},N.array={string:w,array:f,arraybuffer:function(S){return new Uint8Array(S).buffer},uint8array:function(S){return new Uint8Array(S)},nodebuffer:function(S){return d.newBufferFrom(S)}},N.arraybuffer={string:function(S){return w(new Uint8Array(S))},array:function(S){return E(new Uint8Array(S),new Array(S.byteLength))},arraybuffer:f,uint8array:function(S){return new Uint8Array(S)},nodebuffer:function(S){return d.newBufferFrom(new Uint8Array(S))}},N.uint8array={string:w,array:function(S){return E(S,new Array(S.length))},arraybuffer:function(S){return S.buffer},uint8array:f,nodebuffer:function(S){return d.newBufferFrom(S)}},N.nodebuffer={string:w,array:function(S){return E(S,new Array(S.length))},arraybuffer:function(S){return N.nodebuffer.uint8array(S).buffer},uint8array:function(S){return E(S,new Uint8Array(S.length))},nodebuffer:f},a.transformTo=function(S,T){if(T=T||"",!S)return T;a.checkSupport(S);var j=a.getTypeOf(T);return N[j][S](T)},a.resolve=function(S){for(var T=S.split("/"),j=[],D=0;D<T.length;D++){var I=T[D];I==="."||I===""&&D!==0&&D!==T.length-1||(I===".."?j.pop():j.push(I))}return j.join("/")},a.getTypeOf=function(S){return typeof S=="string"?"string":Object.prototype.toString.call(S)==="[object Array]"?"array":s.nodebuffer&&d.isBuffer(S)?"nodebuffer":s.uint8array&&S instanceof Uint8Array?"uint8array":s.arraybuffer&&S instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(S){if(!s[S.toLowerCase()])throw new Error(S+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(S){var T,j,D="";for(j=0;j<(S||"").length;j++)D+="\\x"+((T=S.charCodeAt(j))<16?"0":"")+T.toString(16).toUpperCase();return D},a.delay=function(S,T,j){setImmediate(function(){S.apply(j||null,T||[])})},a.inherits=function(S,T){function j(){}j.prototype=T.prototype,S.prototype=new j},a.extend=function(){var S,T,j={};for(S=0;S<arguments.length;S++)for(T in arguments[S])Object.prototype.hasOwnProperty.call(arguments[S],T)&&j[T]===void 0&&(j[T]=arguments[S][T]);return j},a.prepareContent=function(S,T,j,D,I){return x.Promise.resolve(T).then(function(L){return s.blob&&(L instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(L))!==-1)&&typeof FileReader<"u"?new x.Promise(function(V,X){var M=new FileReader;M.onload=function(W){V(W.target.result)},M.onerror=function(W){X(W.target.error)},M.readAsArrayBuffer(L)}):L}).then(function(L){var V=a.getTypeOf(L);return V?(V==="arraybuffer"?L=a.transformTo("uint8array",L):V==="string"&&(I?L=c.decode(L):j&&D!==!0&&(L=(function(X){return g(X,s.uint8array?new Uint8Array(X.length):new Array(X.length))})(L))),L):x.Promise.reject(new Error("Can't read the data of '"+S+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,a){var s=t("./reader/readerFor"),c=t("./utils"),d=t("./signature"),x=t("./zipEntry"),f=t("./support");function g(v){this.files=[],this.loadOptions=v}g.prototype={checkSignature:function(v){if(!this.reader.readAndCheckSignature(v)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(w)+", expected "+c.pretty(v)+")")}},isSignature:function(v,w){var E=this.reader.index;this.reader.setIndex(v);var N=this.reader.readString(4)===w;return this.reader.setIndex(E),N},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var v=this.reader.readData(this.zipCommentLength),w=f.uint8array?"uint8array":"array",E=c.transformTo(w,v);this.zipComment=this.loadOptions.decodeFileName(E)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var v,w,E,N=this.zip64EndOfCentralSize-44;0<N;)v=this.reader.readInt(2),w=this.reader.readInt(4),E=this.reader.readData(w),this.zip64ExtensibleData[v]={id:v,length:w,value:E}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var v,w;for(v=0;v<this.files.length;v++)w=this.files[v],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var v;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(d.CENTRAL_FILE_HEADER);)(v=new x({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(v);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var v=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(v<0)throw this.isSignature(0,d.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(v);var w=v;if(this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(v=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(v),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,d.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var E=this.centralDirOffset+this.centralDirSize;this.zip64&&(E+=20,E+=12+this.zip64EndOfCentralSize);var N=w-E;if(0<N)this.isSignature(w,d.CENTRAL_FILE_HEADER)||(this.reader.zero=N);else if(N<0)throw new Error("Corrupted zip: missing "+Math.abs(N)+" bytes.")},prepareReader:function(v){this.reader=s(v)},load:function(v){this.prepareReader(v),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,a){var s=t("./reader/readerFor"),c=t("./utils"),d=t("./compressedObject"),x=t("./crc32"),f=t("./utf8"),g=t("./compressions"),v=t("./support");function w(E,N){this.options=E,this.loadOptions=N}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(E){var N,S;if(E.skip(22),this.fileNameLength=E.readInt(2),S=E.readInt(2),this.fileName=E.readData(this.fileNameLength),E.skip(S),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((N=(function(T){for(var j in g)if(Object.prototype.hasOwnProperty.call(g,j)&&g[j].magic===T)return g[j];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new d(this.compressedSize,this.uncompressedSize,this.crc32,N,E.readData(this.compressedSize))},readCentralPart:function(E){this.versionMadeBy=E.readInt(2),E.skip(2),this.bitFlag=E.readInt(2),this.compressionMethod=E.readString(2),this.date=E.readDate(),this.crc32=E.readInt(4),this.compressedSize=E.readInt(4),this.uncompressedSize=E.readInt(4);var N=E.readInt(2);if(this.extraFieldsLength=E.readInt(2),this.fileCommentLength=E.readInt(2),this.diskNumberStart=E.readInt(2),this.internalFileAttributes=E.readInt(2),this.externalFileAttributes=E.readInt(4),this.localHeaderOffset=E.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");E.skip(N),this.readExtraFields(E),this.parseZIP64ExtraField(E),this.fileComment=E.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var E=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),E==0&&(this.dosPermissions=63&this.externalFileAttributes),E==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var E=s(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=E.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=E.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=E.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=E.readInt(4))}},readExtraFields:function(E){var N,S,T,j=E.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});E.index+4<j;)N=E.readInt(2),S=E.readInt(2),T=E.readData(S),this.extraFields[N]={id:N,length:S,value:T};E.setIndex(j)},handleUTF8:function(){var E=v.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var N=this.findExtraFieldUnicodePath();if(N!==null)this.fileNameStr=N;else{var S=c.transformTo(E,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(S)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var j=c.transformTo(E,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(j)}}},findExtraFieldUnicodePath:function(){var E=this.extraFields[28789];if(E){var N=s(E.value);return N.readInt(1)!==1||x(this.fileName)!==N.readInt(4)?null:f.utf8decode(N.readData(E.length-5))}return null},findExtraFieldUnicodeComment:function(){var E=this.extraFields[25461];if(E){var N=s(E.value);return N.readInt(1)!==1||x(this.fileComment)!==N.readInt(4)?null:f.utf8decode(N.readData(E.length-5))}return null}},n.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,a){function s(N,S,T){this.name=N,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=S,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var c=t("./stream/StreamHelper"),d=t("./stream/DataWorker"),x=t("./utf8"),f=t("./compressedObject"),g=t("./stream/GenericWorker");s.prototype={internalStream:function(N){var S=null,T="string";try{if(!N)throw new Error("No output type specified.");var j=(T=N.toLowerCase())==="string"||T==="text";T!=="binarystring"&&T!=="text"||(T="string"),S=this._decompressWorker();var D=!this._dataBinary;D&&!j&&(S=S.pipe(new x.Utf8EncodeWorker)),!D&&j&&(S=S.pipe(new x.Utf8DecodeWorker))}catch(I){(S=new g("error")).error(I)}return new c(S,T,"")},async:function(N,S){return this.internalStream(N).accumulate(S)},nodeStream:function(N,S){return this.internalStream(N||"nodebuffer").toNodejsStream(S)},_compressWorker:function(N,S){if(this._data instanceof f&&this._data.compression.magic===N.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new x.Utf8EncodeWorker)),f.createWorkerFrom(T,N,S)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof g?this._data:new d(this._data)}};for(var v=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},E=0;E<v.length;E++)s.prototype[v[E]]=w;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,a){(function(s){var c,d,x=s.MutationObserver||s.WebKitMutationObserver;if(x){var f=0,g=new x(N),v=s.document.createTextNode("");g.observe(v,{characterData:!0}),c=function(){v.data=f=++f%2}}else if(s.setImmediate||s.MessageChannel===void 0)c="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var S=s.document.createElement("script");S.onreadystatechange=function(){N(),S.onreadystatechange=null,S.parentNode.removeChild(S),S=null},s.document.documentElement.appendChild(S)}:function(){setTimeout(N,0)};else{var w=new s.MessageChannel;w.port1.onmessage=N,c=function(){w.port2.postMessage(0)}}var E=[];function N(){var S,T;d=!0;for(var j=E.length;j;){for(T=E,E=[],S=-1;++S<j;)T[S]();j=E.length}d=!1}n.exports=function(S){E.push(S)!==1||d||c()}}).call(this,typeof vo<"u"?vo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,a){var s=t("immediate");function c(){}var d={},x=["REJECTED"],f=["FULFILLED"],g=["PENDING"];function v(j){if(typeof j!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,j!==c&&S(this,j)}function w(j,D,I){this.promise=j,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}function E(j,D,I){s(function(){var L;try{L=D(I)}catch(V){return d.reject(j,V)}L===j?d.reject(j,new TypeError("Cannot resolve promise with itself")):d.resolve(j,L)})}function N(j){var D=j&&j.then;if(j&&(typeof j=="object"||typeof j=="function")&&typeof D=="function")return function(){D.apply(j,arguments)}}function S(j,D){var I=!1;function L(M){I||(I=!0,d.reject(j,M))}function V(M){I||(I=!0,d.resolve(j,M))}var X=T(function(){D(V,L)});X.status==="error"&&L(X.value)}function T(j,D){var I={};try{I.value=j(D),I.status="success"}catch(L){I.status="error",I.value=L}return I}(n.exports=v).prototype.finally=function(j){if(typeof j!="function")return this;var D=this.constructor;return this.then(function(I){return D.resolve(j()).then(function(){return I})},function(I){return D.resolve(j()).then(function(){throw I})})},v.prototype.catch=function(j){return this.then(null,j)},v.prototype.then=function(j,D){if(typeof j!="function"&&this.state===f||typeof D!="function"&&this.state===x)return this;var I=new this.constructor(c);return this.state!==g?E(I,this.state===f?j:D,this.outcome):this.queue.push(new w(I,j,D)),I},w.prototype.callFulfilled=function(j){d.resolve(this.promise,j)},w.prototype.otherCallFulfilled=function(j){E(this.promise,this.onFulfilled,j)},w.prototype.callRejected=function(j){d.reject(this.promise,j)},w.prototype.otherCallRejected=function(j){E(this.promise,this.onRejected,j)},d.resolve=function(j,D){var I=T(N,D);if(I.status==="error")return d.reject(j,I.value);var L=I.value;if(L)S(j,L);else{j.state=f,j.outcome=D;for(var V=-1,X=j.queue.length;++V<X;)j.queue[V].callFulfilled(D)}return j},d.reject=function(j,D){j.state=x,j.outcome=D;for(var I=-1,L=j.queue.length;++I<L;)j.queue[I].callRejected(D);return j},v.resolve=function(j){return j instanceof this?j:d.resolve(new this(c),j)},v.reject=function(j){var D=new this(c);return d.reject(D,j)},v.all=function(j){var D=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=j.length,L=!1;if(!I)return this.resolve([]);for(var V=new Array(I),X=0,M=-1,W=new this(c);++M<I;)z(j[M],M);return W;function z(ae,Z){D.resolve(ae).then(function(H){V[Z]=H,++X!==I||L||(L=!0,d.resolve(W,V))},function(H){L||(L=!0,d.reject(W,H))})}},v.race=function(j){var D=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=j.length,L=!1;if(!I)return this.resolve([]);for(var V=-1,X=new this(c);++V<I;)M=j[V],D.resolve(M).then(function(W){L||(L=!0,d.resolve(X,W))},function(W){L||(L=!0,d.reject(X,W))});var M;return X}},{immediate:36}],38:[function(t,n,a){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,a){var s=t("./zlib/deflate"),c=t("./utils/common"),d=t("./utils/strings"),x=t("./zlib/messages"),f=t("./zlib/zstream"),g=Object.prototype.toString,v=0,w=-1,E=0,N=8;function S(j){if(!(this instanceof S))return new S(j);this.options=c.assign({level:w,method:N,chunkSize:16384,windowBits:15,memLevel:8,strategy:E,to:""},j||{});var D=this.options;D.raw&&0<D.windowBits?D.windowBits=-D.windowBits:D.gzip&&0<D.windowBits&&D.windowBits<16&&(D.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var I=s.deflateInit2(this.strm,D.level,D.method,D.windowBits,D.memLevel,D.strategy);if(I!==v)throw new Error(x[I]);if(D.header&&s.deflateSetHeader(this.strm,D.header),D.dictionary){var L;if(L=typeof D.dictionary=="string"?d.string2buf(D.dictionary):g.call(D.dictionary)==="[object ArrayBuffer]"?new Uint8Array(D.dictionary):D.dictionary,(I=s.deflateSetDictionary(this.strm,L))!==v)throw new Error(x[I]);this._dict_set=!0}}function T(j,D){var I=new S(D);if(I.push(j,!0),I.err)throw I.msg||x[I.err];return I.result}S.prototype.push=function(j,D){var I,L,V=this.strm,X=this.options.chunkSize;if(this.ended)return!1;L=D===~~D?D:D===!0?4:0,typeof j=="string"?V.input=d.string2buf(j):g.call(j)==="[object ArrayBuffer]"?V.input=new Uint8Array(j):V.input=j,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new c.Buf8(X),V.next_out=0,V.avail_out=X),(I=s.deflate(V,L))!==1&&I!==v)return this.onEnd(I),!(this.ended=!0);V.avail_out!==0&&(V.avail_in!==0||L!==4&&L!==2)||(this.options.to==="string"?this.onData(d.buf2binstring(c.shrinkBuf(V.output,V.next_out))):this.onData(c.shrinkBuf(V.output,V.next_out)))}while((0<V.avail_in||V.avail_out===0)&&I!==1);return L===4?(I=s.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===v):L!==2||(this.onEnd(v),!(V.avail_out=0))},S.prototype.onData=function(j){this.chunks.push(j)},S.prototype.onEnd=function(j){j===v&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=j,this.msg=this.strm.msg},a.Deflate=S,a.deflate=T,a.deflateRaw=function(j,D){return(D=D||{}).raw=!0,T(j,D)},a.gzip=function(j,D){return(D=D||{}).gzip=!0,T(j,D)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,a){var s=t("./zlib/inflate"),c=t("./utils/common"),d=t("./utils/strings"),x=t("./zlib/constants"),f=t("./zlib/messages"),g=t("./zlib/zstream"),v=t("./zlib/gzheader"),w=Object.prototype.toString;function E(S){if(!(this instanceof E))return new E(S);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},S||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||S&&S.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&(15&T.windowBits)==0&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var j=s.inflateInit2(this.strm,T.windowBits);if(j!==x.Z_OK)throw new Error(f[j]);this.header=new v,s.inflateGetHeader(this.strm,this.header)}function N(S,T){var j=new E(T);if(j.push(S,!0),j.err)throw j.msg||f[j.err];return j.result}E.prototype.push=function(S,T){var j,D,I,L,V,X,M=this.strm,W=this.options.chunkSize,z=this.options.dictionary,ae=!1;if(this.ended)return!1;D=T===~~T?T:T===!0?x.Z_FINISH:x.Z_NO_FLUSH,typeof S=="string"?M.input=d.binstring2buf(S):w.call(S)==="[object ArrayBuffer]"?M.input=new Uint8Array(S):M.input=S,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new c.Buf8(W),M.next_out=0,M.avail_out=W),(j=s.inflate(M,x.Z_NO_FLUSH))===x.Z_NEED_DICT&&z&&(X=typeof z=="string"?d.string2buf(z):w.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,j=s.inflateSetDictionary(this.strm,X)),j===x.Z_BUF_ERROR&&ae===!0&&(j=x.Z_OK,ae=!1),j!==x.Z_STREAM_END&&j!==x.Z_OK)return this.onEnd(j),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&j!==x.Z_STREAM_END&&(M.avail_in!==0||D!==x.Z_FINISH&&D!==x.Z_SYNC_FLUSH)||(this.options.to==="string"?(I=d.utf8border(M.output,M.next_out),L=M.next_out-I,V=d.buf2string(M.output,I),M.next_out=L,M.avail_out=W-L,L&&c.arraySet(M.output,M.output,I,L,0),this.onData(V)):this.onData(c.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(ae=!0)}while((0<M.avail_in||M.avail_out===0)&&j!==x.Z_STREAM_END);return j===x.Z_STREAM_END&&(D=x.Z_FINISH),D===x.Z_FINISH?(j=s.inflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===x.Z_OK):D!==x.Z_SYNC_FLUSH||(this.onEnd(x.Z_OK),!(M.avail_out=0))},E.prototype.onData=function(S){this.chunks.push(S)},E.prototype.onEnd=function(S){S===x.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},a.Inflate=E,a.inflate=N,a.inflateRaw=function(S,T){return(T=T||{}).raw=!0,N(S,T)},a.ungzip=N},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,a){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(x){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var g=f.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var v in g)g.hasOwnProperty(v)&&(x[v]=g[v])}}return x},a.shrinkBuf=function(x,f){return x.length===f?x:x.subarray?x.subarray(0,f):(x.length=f,x)};var c={arraySet:function(x,f,g,v,w){if(f.subarray&&x.subarray)x.set(f.subarray(g,g+v),w);else for(var E=0;E<v;E++)x[w+E]=f[g+E]},flattenChunks:function(x){var f,g,v,w,E,N;for(f=v=0,g=x.length;f<g;f++)v+=x[f].length;for(N=new Uint8Array(v),f=w=0,g=x.length;f<g;f++)E=x[f],N.set(E,w),w+=E.length;return N}},d={arraySet:function(x,f,g,v,w){for(var E=0;E<v;E++)x[w+E]=f[g+E]},flattenChunks:function(x){return[].concat.apply([],x)}};a.setTyped=function(x){x?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,c)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,d))},a.setTyped(s)},{}],42:[function(t,n,a){var s=t("./common"),c=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d=!1}for(var x=new s.Buf8(256),f=0;f<256;f++)x[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function g(v,w){if(w<65537&&(v.subarray&&d||!v.subarray&&c))return String.fromCharCode.apply(null,s.shrinkBuf(v,w));for(var E="",N=0;N<w;N++)E+=String.fromCharCode(v[N]);return E}x[254]=x[254]=1,a.string2buf=function(v){var w,E,N,S,T,j=v.length,D=0;for(S=0;S<j;S++)(64512&(E=v.charCodeAt(S)))==55296&&S+1<j&&(64512&(N=v.charCodeAt(S+1)))==56320&&(E=65536+(E-55296<<10)+(N-56320),S++),D+=E<128?1:E<2048?2:E<65536?3:4;for(w=new s.Buf8(D),S=T=0;T<D;S++)(64512&(E=v.charCodeAt(S)))==55296&&S+1<j&&(64512&(N=v.charCodeAt(S+1)))==56320&&(E=65536+(E-55296<<10)+(N-56320),S++),E<128?w[T++]=E:(E<2048?w[T++]=192|E>>>6:(E<65536?w[T++]=224|E>>>12:(w[T++]=240|E>>>18,w[T++]=128|E>>>12&63),w[T++]=128|E>>>6&63),w[T++]=128|63&E);return w},a.buf2binstring=function(v){return g(v,v.length)},a.binstring2buf=function(v){for(var w=new s.Buf8(v.length),E=0,N=w.length;E<N;E++)w[E]=v.charCodeAt(E);return w},a.buf2string=function(v,w){var E,N,S,T,j=w||v.length,D=new Array(2*j);for(E=N=0;E<j;)if((S=v[E++])<128)D[N++]=S;else if(4<(T=x[S]))D[N++]=65533,E+=T-1;else{for(S&=T===2?31:T===3?15:7;1<T&&E<j;)S=S<<6|63&v[E++],T--;1<T?D[N++]=65533:S<65536?D[N++]=S:(S-=65536,D[N++]=55296|S>>10&1023,D[N++]=56320|1023&S)}return g(D,N)},a.utf8border=function(v,w){var E;for((w=w||v.length)>v.length&&(w=v.length),E=w-1;0<=E&&(192&v[E])==128;)E--;return E<0||E===0?w:E+x[v[E]]>w?E:w}},{"./common":41}],43:[function(t,n,a){n.exports=function(s,c,d,x){for(var f=65535&s|0,g=s>>>16&65535|0,v=0;d!==0;){for(d-=v=2e3<d?2e3:d;g=g+(f=f+c[x++]|0)|0,--v;);f%=65521,g%=65521}return f|g<<16|0}},{}],44:[function(t,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,a){var s=(function(){for(var c,d=[],x=0;x<256;x++){c=x;for(var f=0;f<8;f++)c=1&c?3988292384^c>>>1:c>>>1;d[x]=c}return d})();n.exports=function(c,d,x,f){var g=s,v=f+x;c^=-1;for(var w=f;w<v;w++)c=c>>>8^g[255&(c^d[w])];return-1^c}},{}],46:[function(t,n,a){var s,c=t("../utils/common"),d=t("./trees"),x=t("./adler32"),f=t("./crc32"),g=t("./messages"),v=0,w=4,E=0,N=-2,S=-1,T=4,j=2,D=8,I=9,L=286,V=30,X=19,M=2*L+1,W=15,z=3,ae=258,Z=ae+z+1,H=42,he=113,q=1,se=2,ve=3,le=4;function ge(G,Me){return G.msg=g[Me],Me}function ie(G){return(G<<1)-(4<G?9:0)}function Le(G){for(var Me=G.length;0<=--Me;)G[Me]=0}function Q(G){var Me=G.state,Ae=Me.pending;Ae>G.avail_out&&(Ae=G.avail_out),Ae!==0&&(c.arraySet(G.output,Me.pending_buf,Me.pending_out,Ae,G.next_out),G.next_out+=Ae,Me.pending_out+=Ae,G.total_out+=Ae,G.avail_out-=Ae,Me.pending-=Ae,Me.pending===0&&(Me.pending_out=0))}function B(G,Me){d._tr_flush_block(G,0<=G.block_start?G.block_start:-1,G.strstart-G.block_start,Me),G.block_start=G.strstart,Q(G.strm)}function te(G,Me){G.pending_buf[G.pending++]=Me}function U(G,Me){G.pending_buf[G.pending++]=Me>>>8&255,G.pending_buf[G.pending++]=255&Me}function P(G,Me){var Ae,oe,de=G.max_chain_length,Se=G.strstart,lt=G.prev_length,Ue=G.nice_match,He=G.strstart>G.w_size-Z?G.strstart-(G.w_size-Z):0,Oe=G.window,We=G.w_mask,rt=G.prev,ht=G.strstart+ae,Pe=Oe[Se+lt-1],Ye=Oe[Se+lt];G.prev_length>=G.good_match&&(de>>=2),Ue>G.lookahead&&(Ue=G.lookahead);do if(Oe[(Ae=Me)+lt]===Ye&&Oe[Ae+lt-1]===Pe&&Oe[Ae]===Oe[Se]&&Oe[++Ae]===Oe[Se+1]){Se+=2,Ae++;do;while(Oe[++Se]===Oe[++Ae]&&Oe[++Se]===Oe[++Ae]&&Oe[++Se]===Oe[++Ae]&&Oe[++Se]===Oe[++Ae]&&Oe[++Se]===Oe[++Ae]&&Oe[++Se]===Oe[++Ae]&&Oe[++Se]===Oe[++Ae]&&Oe[++Se]===Oe[++Ae]&&Se<ht);if(oe=ae-(ht-Se),Se=ht-ae,lt<oe){if(G.match_start=Me,Ue<=(lt=oe))break;Pe=Oe[Se+lt-1],Ye=Oe[Se+lt]}}while((Me=rt[Me&We])>He&&--de!=0);return lt<=G.lookahead?lt:G.lookahead}function ue(G){var Me,Ae,oe,de,Se,lt,Ue,He,Oe,We,rt=G.w_size;do{if(de=G.window_size-G.lookahead-G.strstart,G.strstart>=rt+(rt-Z)){for(c.arraySet(G.window,G.window,rt,rt,0),G.match_start-=rt,G.strstart-=rt,G.block_start-=rt,Me=Ae=G.hash_size;oe=G.head[--Me],G.head[Me]=rt<=oe?oe-rt:0,--Ae;);for(Me=Ae=rt;oe=G.prev[--Me],G.prev[Me]=rt<=oe?oe-rt:0,--Ae;);de+=rt}if(G.strm.avail_in===0)break;if(lt=G.strm,Ue=G.window,He=G.strstart+G.lookahead,Oe=de,We=void 0,We=lt.avail_in,Oe<We&&(We=Oe),Ae=We===0?0:(lt.avail_in-=We,c.arraySet(Ue,lt.input,lt.next_in,We,He),lt.state.wrap===1?lt.adler=x(lt.adler,Ue,We,He):lt.state.wrap===2&&(lt.adler=f(lt.adler,Ue,We,He)),lt.next_in+=We,lt.total_in+=We,We),G.lookahead+=Ae,G.lookahead+G.insert>=z)for(Se=G.strstart-G.insert,G.ins_h=G.window[Se],G.ins_h=(G.ins_h<<G.hash_shift^G.window[Se+1])&G.hash_mask;G.insert&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[Se+z-1])&G.hash_mask,G.prev[Se&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=Se,Se++,G.insert--,!(G.lookahead+G.insert<z)););}while(G.lookahead<Z&&G.strm.avail_in!==0)}function Re(G,Me){for(var Ae,oe;;){if(G.lookahead<Z){if(ue(G),G.lookahead<Z&&Me===v)return q;if(G.lookahead===0)break}if(Ae=0,G.lookahead>=z&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+z-1])&G.hash_mask,Ae=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),Ae!==0&&G.strstart-Ae<=G.w_size-Z&&(G.match_length=P(G,Ae)),G.match_length>=z)if(oe=d._tr_tally(G,G.strstart-G.match_start,G.match_length-z),G.lookahead-=G.match_length,G.match_length<=G.max_lazy_match&&G.lookahead>=z){for(G.match_length--;G.strstart++,G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+z-1])&G.hash_mask,Ae=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart,--G.match_length!=0;);G.strstart++}else G.strstart+=G.match_length,G.match_length=0,G.ins_h=G.window[G.strstart],G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+1])&G.hash_mask;else oe=d._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++;if(oe&&(B(G,!1),G.strm.avail_out===0))return q}return G.insert=G.strstart<z-1?G.strstart:z-1,Me===w?(B(G,!0),G.strm.avail_out===0?ve:le):G.last_lit&&(B(G,!1),G.strm.avail_out===0)?q:se}function De(G,Me){for(var Ae,oe,de;;){if(G.lookahead<Z){if(ue(G),G.lookahead<Z&&Me===v)return q;if(G.lookahead===0)break}if(Ae=0,G.lookahead>=z&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+z-1])&G.hash_mask,Ae=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),G.prev_length=G.match_length,G.prev_match=G.match_start,G.match_length=z-1,Ae!==0&&G.prev_length<G.max_lazy_match&&G.strstart-Ae<=G.w_size-Z&&(G.match_length=P(G,Ae),G.match_length<=5&&(G.strategy===1||G.match_length===z&&4096<G.strstart-G.match_start)&&(G.match_length=z-1)),G.prev_length>=z&&G.match_length<=G.prev_length){for(de=G.strstart+G.lookahead-z,oe=d._tr_tally(G,G.strstart-1-G.prev_match,G.prev_length-z),G.lookahead-=G.prev_length-1,G.prev_length-=2;++G.strstart<=de&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+z-1])&G.hash_mask,Ae=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),--G.prev_length!=0;);if(G.match_available=0,G.match_length=z-1,G.strstart++,oe&&(B(G,!1),G.strm.avail_out===0))return q}else if(G.match_available){if((oe=d._tr_tally(G,0,G.window[G.strstart-1]))&&B(G,!1),G.strstart++,G.lookahead--,G.strm.avail_out===0)return q}else G.match_available=1,G.strstart++,G.lookahead--}return G.match_available&&(oe=d._tr_tally(G,0,G.window[G.strstart-1]),G.match_available=0),G.insert=G.strstart<z-1?G.strstart:z-1,Me===w?(B(G,!0),G.strm.avail_out===0?ve:le):G.last_lit&&(B(G,!1),G.strm.avail_out===0)?q:se}function Ne(G,Me,Ae,oe,de){this.good_length=G,this.max_lazy=Me,this.nice_length=Ae,this.max_chain=oe,this.func=de}function Ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=D,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*M),this.dyn_dtree=new c.Buf16(2*(2*V+1)),this.bl_tree=new c.Buf16(2*(2*X+1)),Le(this.dyn_ltree),Le(this.dyn_dtree),Le(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(W+1),this.heap=new c.Buf16(2*L+1),Le(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*L+1),Le(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ye(G){var Me;return G&&G.state?(G.total_in=G.total_out=0,G.data_type=j,(Me=G.state).pending=0,Me.pending_out=0,Me.wrap<0&&(Me.wrap=-Me.wrap),Me.status=Me.wrap?H:he,G.adler=Me.wrap===2?0:1,Me.last_flush=v,d._tr_init(Me),E):ge(G,N)}function me(G){var Me=ye(G);return Me===E&&(function(Ae){Ae.window_size=2*Ae.w_size,Le(Ae.head),Ae.max_lazy_match=s[Ae.level].max_lazy,Ae.good_match=s[Ae.level].good_length,Ae.nice_match=s[Ae.level].nice_length,Ae.max_chain_length=s[Ae.level].max_chain,Ae.strstart=0,Ae.block_start=0,Ae.lookahead=0,Ae.insert=0,Ae.match_length=Ae.prev_length=z-1,Ae.match_available=0,Ae.ins_h=0})(G.state),Me}function Ce(G,Me,Ae,oe,de,Se){if(!G)return N;var lt=1;if(Me===S&&(Me=6),oe<0?(lt=0,oe=-oe):15<oe&&(lt=2,oe-=16),de<1||I<de||Ae!==D||oe<8||15<oe||Me<0||9<Me||Se<0||T<Se)return ge(G,N);oe===8&&(oe=9);var Ue=new Ke;return(G.state=Ue).strm=G,Ue.wrap=lt,Ue.gzhead=null,Ue.w_bits=oe,Ue.w_size=1<<Ue.w_bits,Ue.w_mask=Ue.w_size-1,Ue.hash_bits=de+7,Ue.hash_size=1<<Ue.hash_bits,Ue.hash_mask=Ue.hash_size-1,Ue.hash_shift=~~((Ue.hash_bits+z-1)/z),Ue.window=new c.Buf8(2*Ue.w_size),Ue.head=new c.Buf16(Ue.hash_size),Ue.prev=new c.Buf16(Ue.w_size),Ue.lit_bufsize=1<<de+6,Ue.pending_buf_size=4*Ue.lit_bufsize,Ue.pending_buf=new c.Buf8(Ue.pending_buf_size),Ue.d_buf=1*Ue.lit_bufsize,Ue.l_buf=3*Ue.lit_bufsize,Ue.level=Me,Ue.strategy=Se,Ue.method=Ae,me(G)}s=[new Ne(0,0,0,0,function(G,Me){var Ae=65535;for(Ae>G.pending_buf_size-5&&(Ae=G.pending_buf_size-5);;){if(G.lookahead<=1){if(ue(G),G.lookahead===0&&Me===v)return q;if(G.lookahead===0)break}G.strstart+=G.lookahead,G.lookahead=0;var oe=G.block_start+Ae;if((G.strstart===0||G.strstart>=oe)&&(G.lookahead=G.strstart-oe,G.strstart=oe,B(G,!1),G.strm.avail_out===0)||G.strstart-G.block_start>=G.w_size-Z&&(B(G,!1),G.strm.avail_out===0))return q}return G.insert=0,Me===w?(B(G,!0),G.strm.avail_out===0?ve:le):(G.strstart>G.block_start&&(B(G,!1),G.strm.avail_out),q)}),new Ne(4,4,8,4,Re),new Ne(4,5,16,8,Re),new Ne(4,6,32,32,Re),new Ne(4,4,16,16,De),new Ne(8,16,32,32,De),new Ne(8,16,128,128,De),new Ne(8,32,128,256,De),new Ne(32,128,258,1024,De),new Ne(32,258,258,4096,De)],a.deflateInit=function(G,Me){return Ce(G,Me,D,15,8,0)},a.deflateInit2=Ce,a.deflateReset=me,a.deflateResetKeep=ye,a.deflateSetHeader=function(G,Me){return G&&G.state?G.state.wrap!==2?N:(G.state.gzhead=Me,E):N},a.deflate=function(G,Me){var Ae,oe,de,Se;if(!G||!G.state||5<Me||Me<0)return G?ge(G,N):N;if(oe=G.state,!G.output||!G.input&&G.avail_in!==0||oe.status===666&&Me!==w)return ge(G,G.avail_out===0?-5:N);if(oe.strm=G,Ae=oe.last_flush,oe.last_flush=Me,oe.status===H)if(oe.wrap===2)G.adler=0,te(oe,31),te(oe,139),te(oe,8),oe.gzhead?(te(oe,(oe.gzhead.text?1:0)+(oe.gzhead.hcrc?2:0)+(oe.gzhead.extra?4:0)+(oe.gzhead.name?8:0)+(oe.gzhead.comment?16:0)),te(oe,255&oe.gzhead.time),te(oe,oe.gzhead.time>>8&255),te(oe,oe.gzhead.time>>16&255),te(oe,oe.gzhead.time>>24&255),te(oe,oe.level===9?2:2<=oe.strategy||oe.level<2?4:0),te(oe,255&oe.gzhead.os),oe.gzhead.extra&&oe.gzhead.extra.length&&(te(oe,255&oe.gzhead.extra.length),te(oe,oe.gzhead.extra.length>>8&255)),oe.gzhead.hcrc&&(G.adler=f(G.adler,oe.pending_buf,oe.pending,0)),oe.gzindex=0,oe.status=69):(te(oe,0),te(oe,0),te(oe,0),te(oe,0),te(oe,0),te(oe,oe.level===9?2:2<=oe.strategy||oe.level<2?4:0),te(oe,3),oe.status=he);else{var lt=D+(oe.w_bits-8<<4)<<8;lt|=(2<=oe.strategy||oe.level<2?0:oe.level<6?1:oe.level===6?2:3)<<6,oe.strstart!==0&&(lt|=32),lt+=31-lt%31,oe.status=he,U(oe,lt),oe.strstart!==0&&(U(oe,G.adler>>>16),U(oe,65535&G.adler)),G.adler=1}if(oe.status===69)if(oe.gzhead.extra){for(de=oe.pending;oe.gzindex<(65535&oe.gzhead.extra.length)&&(oe.pending!==oe.pending_buf_size||(oe.gzhead.hcrc&&oe.pending>de&&(G.adler=f(G.adler,oe.pending_buf,oe.pending-de,de)),Q(G),de=oe.pending,oe.pending!==oe.pending_buf_size));)te(oe,255&oe.gzhead.extra[oe.gzindex]),oe.gzindex++;oe.gzhead.hcrc&&oe.pending>de&&(G.adler=f(G.adler,oe.pending_buf,oe.pending-de,de)),oe.gzindex===oe.gzhead.extra.length&&(oe.gzindex=0,oe.status=73)}else oe.status=73;if(oe.status===73)if(oe.gzhead.name){de=oe.pending;do{if(oe.pending===oe.pending_buf_size&&(oe.gzhead.hcrc&&oe.pending>de&&(G.adler=f(G.adler,oe.pending_buf,oe.pending-de,de)),Q(G),de=oe.pending,oe.pending===oe.pending_buf_size)){Se=1;break}Se=oe.gzindex<oe.gzhead.name.length?255&oe.gzhead.name.charCodeAt(oe.gzindex++):0,te(oe,Se)}while(Se!==0);oe.gzhead.hcrc&&oe.pending>de&&(G.adler=f(G.adler,oe.pending_buf,oe.pending-de,de)),Se===0&&(oe.gzindex=0,oe.status=91)}else oe.status=91;if(oe.status===91)if(oe.gzhead.comment){de=oe.pending;do{if(oe.pending===oe.pending_buf_size&&(oe.gzhead.hcrc&&oe.pending>de&&(G.adler=f(G.adler,oe.pending_buf,oe.pending-de,de)),Q(G),de=oe.pending,oe.pending===oe.pending_buf_size)){Se=1;break}Se=oe.gzindex<oe.gzhead.comment.length?255&oe.gzhead.comment.charCodeAt(oe.gzindex++):0,te(oe,Se)}while(Se!==0);oe.gzhead.hcrc&&oe.pending>de&&(G.adler=f(G.adler,oe.pending_buf,oe.pending-de,de)),Se===0&&(oe.status=103)}else oe.status=103;if(oe.status===103&&(oe.gzhead.hcrc?(oe.pending+2>oe.pending_buf_size&&Q(G),oe.pending+2<=oe.pending_buf_size&&(te(oe,255&G.adler),te(oe,G.adler>>8&255),G.adler=0,oe.status=he)):oe.status=he),oe.pending!==0){if(Q(G),G.avail_out===0)return oe.last_flush=-1,E}else if(G.avail_in===0&&ie(Me)<=ie(Ae)&&Me!==w)return ge(G,-5);if(oe.status===666&&G.avail_in!==0)return ge(G,-5);if(G.avail_in!==0||oe.lookahead!==0||Me!==v&&oe.status!==666){var Ue=oe.strategy===2?(function(He,Oe){for(var We;;){if(He.lookahead===0&&(ue(He),He.lookahead===0)){if(Oe===v)return q;break}if(He.match_length=0,We=d._tr_tally(He,0,He.window[He.strstart]),He.lookahead--,He.strstart++,We&&(B(He,!1),He.strm.avail_out===0))return q}return He.insert=0,Oe===w?(B(He,!0),He.strm.avail_out===0?ve:le):He.last_lit&&(B(He,!1),He.strm.avail_out===0)?q:se})(oe,Me):oe.strategy===3?(function(He,Oe){for(var We,rt,ht,Pe,Ye=He.window;;){if(He.lookahead<=ae){if(ue(He),He.lookahead<=ae&&Oe===v)return q;if(He.lookahead===0)break}if(He.match_length=0,He.lookahead>=z&&0<He.strstart&&(rt=Ye[ht=He.strstart-1])===Ye[++ht]&&rt===Ye[++ht]&&rt===Ye[++ht]){Pe=He.strstart+ae;do;while(rt===Ye[++ht]&&rt===Ye[++ht]&&rt===Ye[++ht]&&rt===Ye[++ht]&&rt===Ye[++ht]&&rt===Ye[++ht]&&rt===Ye[++ht]&&rt===Ye[++ht]&&ht<Pe);He.match_length=ae-(Pe-ht),He.match_length>He.lookahead&&(He.match_length=He.lookahead)}if(He.match_length>=z?(We=d._tr_tally(He,1,He.match_length-z),He.lookahead-=He.match_length,He.strstart+=He.match_length,He.match_length=0):(We=d._tr_tally(He,0,He.window[He.strstart]),He.lookahead--,He.strstart++),We&&(B(He,!1),He.strm.avail_out===0))return q}return He.insert=0,Oe===w?(B(He,!0),He.strm.avail_out===0?ve:le):He.last_lit&&(B(He,!1),He.strm.avail_out===0)?q:se})(oe,Me):s[oe.level].func(oe,Me);if(Ue!==ve&&Ue!==le||(oe.status=666),Ue===q||Ue===ve)return G.avail_out===0&&(oe.last_flush=-1),E;if(Ue===se&&(Me===1?d._tr_align(oe):Me!==5&&(d._tr_stored_block(oe,0,0,!1),Me===3&&(Le(oe.head),oe.lookahead===0&&(oe.strstart=0,oe.block_start=0,oe.insert=0))),Q(G),G.avail_out===0))return oe.last_flush=-1,E}return Me!==w?E:oe.wrap<=0?1:(oe.wrap===2?(te(oe,255&G.adler),te(oe,G.adler>>8&255),te(oe,G.adler>>16&255),te(oe,G.adler>>24&255),te(oe,255&G.total_in),te(oe,G.total_in>>8&255),te(oe,G.total_in>>16&255),te(oe,G.total_in>>24&255)):(U(oe,G.adler>>>16),U(oe,65535&G.adler)),Q(G),0<oe.wrap&&(oe.wrap=-oe.wrap),oe.pending!==0?E:1)},a.deflateEnd=function(G){var Me;return G&&G.state?(Me=G.state.status)!==H&&Me!==69&&Me!==73&&Me!==91&&Me!==103&&Me!==he&&Me!==666?ge(G,N):(G.state=null,Me===he?ge(G,-3):E):N},a.deflateSetDictionary=function(G,Me){var Ae,oe,de,Se,lt,Ue,He,Oe,We=Me.length;if(!G||!G.state||(Se=(Ae=G.state).wrap)===2||Se===1&&Ae.status!==H||Ae.lookahead)return N;for(Se===1&&(G.adler=x(G.adler,Me,We,0)),Ae.wrap=0,We>=Ae.w_size&&(Se===0&&(Le(Ae.head),Ae.strstart=0,Ae.block_start=0,Ae.insert=0),Oe=new c.Buf8(Ae.w_size),c.arraySet(Oe,Me,We-Ae.w_size,Ae.w_size,0),Me=Oe,We=Ae.w_size),lt=G.avail_in,Ue=G.next_in,He=G.input,G.avail_in=We,G.next_in=0,G.input=Me,ue(Ae);Ae.lookahead>=z;){for(oe=Ae.strstart,de=Ae.lookahead-(z-1);Ae.ins_h=(Ae.ins_h<<Ae.hash_shift^Ae.window[oe+z-1])&Ae.hash_mask,Ae.prev[oe&Ae.w_mask]=Ae.head[Ae.ins_h],Ae.head[Ae.ins_h]=oe,oe++,--de;);Ae.strstart=oe,Ae.lookahead=z-1,ue(Ae)}return Ae.strstart+=Ae.lookahead,Ae.block_start=Ae.strstart,Ae.insert=Ae.lookahead,Ae.lookahead=0,Ae.match_length=Ae.prev_length=z-1,Ae.match_available=0,G.next_in=Ue,G.input=He,G.avail_in=lt,Ae.wrap=Se,E},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,a){n.exports=function(s,c){var d,x,f,g,v,w,E,N,S,T,j,D,I,L,V,X,M,W,z,ae,Z,H,he,q,se;d=s.state,x=s.next_in,q=s.input,f=x+(s.avail_in-5),g=s.next_out,se=s.output,v=g-(c-s.avail_out),w=g+(s.avail_out-257),E=d.dmax,N=d.wsize,S=d.whave,T=d.wnext,j=d.window,D=d.hold,I=d.bits,L=d.lencode,V=d.distcode,X=(1<<d.lenbits)-1,M=(1<<d.distbits)-1;e:do{I<15&&(D+=q[x++]<<I,I+=8,D+=q[x++]<<I,I+=8),W=L[D&X];t:for(;;){if(D>>>=z=W>>>24,I-=z,(z=W>>>16&255)===0)se[g++]=65535&W;else{if(!(16&z)){if((64&z)==0){W=L[(65535&W)+(D&(1<<z)-1)];continue t}if(32&z){d.mode=12;break e}s.msg="invalid literal/length code",d.mode=30;break e}ae=65535&W,(z&=15)&&(I<z&&(D+=q[x++]<<I,I+=8),ae+=D&(1<<z)-1,D>>>=z,I-=z),I<15&&(D+=q[x++]<<I,I+=8,D+=q[x++]<<I,I+=8),W=V[D&M];r:for(;;){if(D>>>=z=W>>>24,I-=z,!(16&(z=W>>>16&255))){if((64&z)==0){W=V[(65535&W)+(D&(1<<z)-1)];continue r}s.msg="invalid distance code",d.mode=30;break e}if(Z=65535&W,I<(z&=15)&&(D+=q[x++]<<I,(I+=8)<z&&(D+=q[x++]<<I,I+=8)),E<(Z+=D&(1<<z)-1)){s.msg="invalid distance too far back",d.mode=30;break e}if(D>>>=z,I-=z,(z=g-v)<Z){if(S<(z=Z-z)&&d.sane){s.msg="invalid distance too far back",d.mode=30;break e}if(he=j,(H=0)===T){if(H+=N-z,z<ae){for(ae-=z;se[g++]=j[H++],--z;);H=g-Z,he=se}}else if(T<z){if(H+=N+T-z,(z-=T)<ae){for(ae-=z;se[g++]=j[H++],--z;);if(H=0,T<ae){for(ae-=z=T;se[g++]=j[H++],--z;);H=g-Z,he=se}}}else if(H+=T-z,z<ae){for(ae-=z;se[g++]=j[H++],--z;);H=g-Z,he=se}for(;2<ae;)se[g++]=he[H++],se[g++]=he[H++],se[g++]=he[H++],ae-=3;ae&&(se[g++]=he[H++],1<ae&&(se[g++]=he[H++]))}else{for(H=g-Z;se[g++]=se[H++],se[g++]=se[H++],se[g++]=se[H++],2<(ae-=3););ae&&(se[g++]=se[H++],1<ae&&(se[g++]=se[H++]))}break}}break}}while(x<f&&g<w);x-=ae=I>>3,D&=(1<<(I-=ae<<3))-1,s.next_in=x,s.next_out=g,s.avail_in=x<f?f-x+5:5-(x-f),s.avail_out=g<w?w-g+257:257-(g-w),d.hold=D,d.bits=I}},{}],49:[function(t,n,a){var s=t("../utils/common"),c=t("./adler32"),d=t("./crc32"),x=t("./inffast"),f=t("./inftrees"),g=1,v=2,w=0,E=-2,N=1,S=852,T=592;function j(H){return(H>>>24&255)+(H>>>8&65280)+((65280&H)<<8)+((255&H)<<24)}function D(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I(H){var he;return H&&H.state?(he=H.state,H.total_in=H.total_out=he.total=0,H.msg="",he.wrap&&(H.adler=1&he.wrap),he.mode=N,he.last=0,he.havedict=0,he.dmax=32768,he.head=null,he.hold=0,he.bits=0,he.lencode=he.lendyn=new s.Buf32(S),he.distcode=he.distdyn=new s.Buf32(T),he.sane=1,he.back=-1,w):E}function L(H){var he;return H&&H.state?((he=H.state).wsize=0,he.whave=0,he.wnext=0,I(H)):E}function V(H,he){var q,se;return H&&H.state?(se=H.state,he<0?(q=0,he=-he):(q=1+(he>>4),he<48&&(he&=15)),he&&(he<8||15<he)?E:(se.window!==null&&se.wbits!==he&&(se.window=null),se.wrap=q,se.wbits=he,L(H))):E}function X(H,he){var q,se;return H?(se=new D,(H.state=se).window=null,(q=V(H,he))!==w&&(H.state=null),q):E}var M,W,z=!0;function ae(H){if(z){var he;for(M=new s.Buf32(512),W=new s.Buf32(32),he=0;he<144;)H.lens[he++]=8;for(;he<256;)H.lens[he++]=9;for(;he<280;)H.lens[he++]=7;for(;he<288;)H.lens[he++]=8;for(f(g,H.lens,0,288,M,0,H.work,{bits:9}),he=0;he<32;)H.lens[he++]=5;f(v,H.lens,0,32,W,0,H.work,{bits:5}),z=!1}H.lencode=M,H.lenbits=9,H.distcode=W,H.distbits=5}function Z(H,he,q,se){var ve,le=H.state;return le.window===null&&(le.wsize=1<<le.wbits,le.wnext=0,le.whave=0,le.window=new s.Buf8(le.wsize)),se>=le.wsize?(s.arraySet(le.window,he,q-le.wsize,le.wsize,0),le.wnext=0,le.whave=le.wsize):(se<(ve=le.wsize-le.wnext)&&(ve=se),s.arraySet(le.window,he,q-se,ve,le.wnext),(se-=ve)?(s.arraySet(le.window,he,q-se,se,0),le.wnext=se,le.whave=le.wsize):(le.wnext+=ve,le.wnext===le.wsize&&(le.wnext=0),le.whave<le.wsize&&(le.whave+=ve))),0}a.inflateReset=L,a.inflateReset2=V,a.inflateResetKeep=I,a.inflateInit=function(H){return X(H,15)},a.inflateInit2=X,a.inflate=function(H,he){var q,se,ve,le,ge,ie,Le,Q,B,te,U,P,ue,Re,De,Ne,Ke,ye,me,Ce,G,Me,Ae,oe,de=0,Se=new s.Buf8(4),lt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!H||!H.state||!H.output||!H.input&&H.avail_in!==0)return E;(q=H.state).mode===12&&(q.mode=13),ge=H.next_out,ve=H.output,Le=H.avail_out,le=H.next_in,se=H.input,ie=H.avail_in,Q=q.hold,B=q.bits,te=ie,U=Le,Me=w;e:for(;;)switch(q.mode){case N:if(q.wrap===0){q.mode=13;break}for(;B<16;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}if(2&q.wrap&&Q===35615){Se[q.check=0]=255&Q,Se[1]=Q>>>8&255,q.check=d(q.check,Se,2,0),B=Q=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&Q)<<8)+(Q>>8))%31){H.msg="incorrect header check",q.mode=30;break}if((15&Q)!=8){H.msg="unknown compression method",q.mode=30;break}if(B-=4,G=8+(15&(Q>>>=4)),q.wbits===0)q.wbits=G;else if(G>q.wbits){H.msg="invalid window size",q.mode=30;break}q.dmax=1<<G,H.adler=q.check=1,q.mode=512&Q?10:12,B=Q=0;break;case 2:for(;B<16;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}if(q.flags=Q,(255&q.flags)!=8){H.msg="unknown compression method",q.mode=30;break}if(57344&q.flags){H.msg="unknown header flags set",q.mode=30;break}q.head&&(q.head.text=Q>>8&1),512&q.flags&&(Se[0]=255&Q,Se[1]=Q>>>8&255,q.check=d(q.check,Se,2,0)),B=Q=0,q.mode=3;case 3:for(;B<32;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}q.head&&(q.head.time=Q),512&q.flags&&(Se[0]=255&Q,Se[1]=Q>>>8&255,Se[2]=Q>>>16&255,Se[3]=Q>>>24&255,q.check=d(q.check,Se,4,0)),B=Q=0,q.mode=4;case 4:for(;B<16;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}q.head&&(q.head.xflags=255&Q,q.head.os=Q>>8),512&q.flags&&(Se[0]=255&Q,Se[1]=Q>>>8&255,q.check=d(q.check,Se,2,0)),B=Q=0,q.mode=5;case 5:if(1024&q.flags){for(;B<16;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}q.length=Q,q.head&&(q.head.extra_len=Q),512&q.flags&&(Se[0]=255&Q,Se[1]=Q>>>8&255,q.check=d(q.check,Se,2,0)),B=Q=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&(ie<(P=q.length)&&(P=ie),P&&(q.head&&(G=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),s.arraySet(q.head.extra,se,le,P,G)),512&q.flags&&(q.check=d(q.check,se,P,le)),ie-=P,le+=P,q.length-=P),q.length))break e;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(ie===0)break e;for(P=0;G=se[le+P++],q.head&&G&&q.length<65536&&(q.head.name+=String.fromCharCode(G)),G&&P<ie;);if(512&q.flags&&(q.check=d(q.check,se,P,le)),ie-=P,le+=P,G)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(ie===0)break e;for(P=0;G=se[le+P++],q.head&&G&&q.length<65536&&(q.head.comment+=String.fromCharCode(G)),G&&P<ie;);if(512&q.flags&&(q.check=d(q.check,se,P,le)),ie-=P,le+=P,G)break e}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;B<16;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}if(Q!==(65535&q.check)){H.msg="header crc mismatch",q.mode=30;break}B=Q=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),H.adler=q.check=0,q.mode=12;break;case 10:for(;B<32;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}H.adler=q.check=j(Q),B=Q=0,q.mode=11;case 11:if(q.havedict===0)return H.next_out=ge,H.avail_out=Le,H.next_in=le,H.avail_in=ie,q.hold=Q,q.bits=B,2;H.adler=q.check=1,q.mode=12;case 12:if(he===5||he===6)break e;case 13:if(q.last){Q>>>=7&B,B-=7&B,q.mode=27;break}for(;B<3;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}switch(q.last=1&Q,B-=1,3&(Q>>>=1)){case 0:q.mode=14;break;case 1:if(ae(q),q.mode=20,he!==6)break;Q>>>=2,B-=2;break e;case 2:q.mode=17;break;case 3:H.msg="invalid block type",q.mode=30}Q>>>=2,B-=2;break;case 14:for(Q>>>=7&B,B-=7&B;B<32;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}if((65535&Q)!=(Q>>>16^65535)){H.msg="invalid stored block lengths",q.mode=30;break}if(q.length=65535&Q,B=Q=0,q.mode=15,he===6)break e;case 15:q.mode=16;case 16:if(P=q.length){if(ie<P&&(P=ie),Le<P&&(P=Le),P===0)break e;s.arraySet(ve,se,le,P,ge),ie-=P,le+=P,Le-=P,ge+=P,q.length-=P;break}q.mode=12;break;case 17:for(;B<14;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}if(q.nlen=257+(31&Q),Q>>>=5,B-=5,q.ndist=1+(31&Q),Q>>>=5,B-=5,q.ncode=4+(15&Q),Q>>>=4,B-=4,286<q.nlen||30<q.ndist){H.msg="too many length or distance symbols",q.mode=30;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;B<3;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}q.lens[lt[q.have++]]=7&Q,Q>>>=3,B-=3}for(;q.have<19;)q.lens[lt[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,Ae={bits:q.lenbits},Me=f(0,q.lens,0,19,q.lencode,0,q.work,Ae),q.lenbits=Ae.bits,Me){H.msg="invalid code lengths set",q.mode=30;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;Ne=(de=q.lencode[Q&(1<<q.lenbits)-1])>>>16&255,Ke=65535&de,!((De=de>>>24)<=B);){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}if(Ke<16)Q>>>=De,B-=De,q.lens[q.have++]=Ke;else{if(Ke===16){for(oe=De+2;B<oe;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}if(Q>>>=De,B-=De,q.have===0){H.msg="invalid bit length repeat",q.mode=30;break}G=q.lens[q.have-1],P=3+(3&Q),Q>>>=2,B-=2}else if(Ke===17){for(oe=De+3;B<oe;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}B-=De,G=0,P=3+(7&(Q>>>=De)),Q>>>=3,B-=3}else{for(oe=De+7;B<oe;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}B-=De,G=0,P=11+(127&(Q>>>=De)),Q>>>=7,B-=7}if(q.have+P>q.nlen+q.ndist){H.msg="invalid bit length repeat",q.mode=30;break}for(;P--;)q.lens[q.have++]=G}}if(q.mode===30)break;if(q.lens[256]===0){H.msg="invalid code -- missing end-of-block",q.mode=30;break}if(q.lenbits=9,Ae={bits:q.lenbits},Me=f(g,q.lens,0,q.nlen,q.lencode,0,q.work,Ae),q.lenbits=Ae.bits,Me){H.msg="invalid literal/lengths set",q.mode=30;break}if(q.distbits=6,q.distcode=q.distdyn,Ae={bits:q.distbits},Me=f(v,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,Ae),q.distbits=Ae.bits,Me){H.msg="invalid distances set",q.mode=30;break}if(q.mode=20,he===6)break e;case 20:q.mode=21;case 21:if(6<=ie&&258<=Le){H.next_out=ge,H.avail_out=Le,H.next_in=le,H.avail_in=ie,q.hold=Q,q.bits=B,x(H,U),ge=H.next_out,ve=H.output,Le=H.avail_out,le=H.next_in,se=H.input,ie=H.avail_in,Q=q.hold,B=q.bits,q.mode===12&&(q.back=-1);break}for(q.back=0;Ne=(de=q.lencode[Q&(1<<q.lenbits)-1])>>>16&255,Ke=65535&de,!((De=de>>>24)<=B);){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}if(Ne&&(240&Ne)==0){for(ye=De,me=Ne,Ce=Ke;Ne=(de=q.lencode[Ce+((Q&(1<<ye+me)-1)>>ye)])>>>16&255,Ke=65535&de,!(ye+(De=de>>>24)<=B);){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}Q>>>=ye,B-=ye,q.back+=ye}if(Q>>>=De,B-=De,q.back+=De,q.length=Ke,Ne===0){q.mode=26;break}if(32&Ne){q.back=-1,q.mode=12;break}if(64&Ne){H.msg="invalid literal/length code",q.mode=30;break}q.extra=15&Ne,q.mode=22;case 22:if(q.extra){for(oe=q.extra;B<oe;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}q.length+=Q&(1<<q.extra)-1,Q>>>=q.extra,B-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;Ne=(de=q.distcode[Q&(1<<q.distbits)-1])>>>16&255,Ke=65535&de,!((De=de>>>24)<=B);){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}if((240&Ne)==0){for(ye=De,me=Ne,Ce=Ke;Ne=(de=q.distcode[Ce+((Q&(1<<ye+me)-1)>>ye)])>>>16&255,Ke=65535&de,!(ye+(De=de>>>24)<=B);){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}Q>>>=ye,B-=ye,q.back+=ye}if(Q>>>=De,B-=De,q.back+=De,64&Ne){H.msg="invalid distance code",q.mode=30;break}q.offset=Ke,q.extra=15&Ne,q.mode=24;case 24:if(q.extra){for(oe=q.extra;B<oe;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}q.offset+=Q&(1<<q.extra)-1,Q>>>=q.extra,B-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){H.msg="invalid distance too far back",q.mode=30;break}q.mode=25;case 25:if(Le===0)break e;if(P=U-Le,q.offset>P){if((P=q.offset-P)>q.whave&&q.sane){H.msg="invalid distance too far back",q.mode=30;break}ue=P>q.wnext?(P-=q.wnext,q.wsize-P):q.wnext-P,P>q.length&&(P=q.length),Re=q.window}else Re=ve,ue=ge-q.offset,P=q.length;for(Le<P&&(P=Le),Le-=P,q.length-=P;ve[ge++]=Re[ue++],--P;);q.length===0&&(q.mode=21);break;case 26:if(Le===0)break e;ve[ge++]=q.length,Le--,q.mode=21;break;case 27:if(q.wrap){for(;B<32;){if(ie===0)break e;ie--,Q|=se[le++]<<B,B+=8}if(U-=Le,H.total_out+=U,q.total+=U,U&&(H.adler=q.check=q.flags?d(q.check,ve,U,ge-U):c(q.check,ve,U,ge-U)),U=Le,(q.flags?Q:j(Q))!==q.check){H.msg="incorrect data check",q.mode=30;break}B=Q=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;B<32;){if(ie===0)break e;ie--,Q+=se[le++]<<B,B+=8}if(Q!==(4294967295&q.total)){H.msg="incorrect length check",q.mode=30;break}B=Q=0}q.mode=29;case 29:Me=1;break e;case 30:Me=-3;break e;case 31:return-4;default:return E}return H.next_out=ge,H.avail_out=Le,H.next_in=le,H.avail_in=ie,q.hold=Q,q.bits=B,(q.wsize||U!==H.avail_out&&q.mode<30&&(q.mode<27||he!==4))&&Z(H,H.output,H.next_out,U-H.avail_out)?(q.mode=31,-4):(te-=H.avail_in,U-=H.avail_out,H.total_in+=te,H.total_out+=U,q.total+=U,q.wrap&&U&&(H.adler=q.check=q.flags?d(q.check,ve,U,H.next_out-U):c(q.check,ve,U,H.next_out-U)),H.data_type=q.bits+(q.last?64:0)+(q.mode===12?128:0)+(q.mode===20||q.mode===15?256:0),(te==0&&U===0||he===4)&&Me===w&&(Me=-5),Me)},a.inflateEnd=function(H){if(!H||!H.state)return E;var he=H.state;return he.window&&(he.window=null),H.state=null,w},a.inflateGetHeader=function(H,he){var q;return H&&H.state?(2&(q=H.state).wrap)==0?E:((q.head=he).done=!1,w):E},a.inflateSetDictionary=function(H,he){var q,se=he.length;return H&&H.state?(q=H.state).wrap!==0&&q.mode!==11?E:q.mode===11&&c(1,he,se,0)!==q.check?-3:Z(H,he,se,se)?(q.mode=31,-4):(q.havedict=1,w):E},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,a){var s=t("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(g,v,w,E,N,S,T,j){var D,I,L,V,X,M,W,z,ae,Z=j.bits,H=0,he=0,q=0,se=0,ve=0,le=0,ge=0,ie=0,Le=0,Q=0,B=null,te=0,U=new s.Buf16(16),P=new s.Buf16(16),ue=null,Re=0;for(H=0;H<=15;H++)U[H]=0;for(he=0;he<E;he++)U[v[w+he]]++;for(ve=Z,se=15;1<=se&&U[se]===0;se--);if(se<ve&&(ve=se),se===0)return N[S++]=20971520,N[S++]=20971520,j.bits=1,0;for(q=1;q<se&&U[q]===0;q++);for(ve<q&&(ve=q),H=ie=1;H<=15;H++)if(ie<<=1,(ie-=U[H])<0)return-1;if(0<ie&&(g===0||se!==1))return-1;for(P[1]=0,H=1;H<15;H++)P[H+1]=P[H]+U[H];for(he=0;he<E;he++)v[w+he]!==0&&(T[P[v[w+he]]++]=he);if(M=g===0?(B=ue=T,19):g===1?(B=c,te-=257,ue=d,Re-=257,256):(B=x,ue=f,-1),H=q,X=S,ge=he=Q=0,L=-1,V=(Le=1<<(le=ve))-1,g===1&&852<Le||g===2&&592<Le)return 1;for(;;){for(W=H-ge,ae=T[he]<M?(z=0,T[he]):T[he]>M?(z=ue[Re+T[he]],B[te+T[he]]):(z=96,0),D=1<<H-ge,q=I=1<<le;N[X+(Q>>ge)+(I-=D)]=W<<24|z<<16|ae|0,I!==0;);for(D=1<<H-1;Q&D;)D>>=1;if(D!==0?(Q&=D-1,Q+=D):Q=0,he++,--U[H]==0){if(H===se)break;H=v[w+T[he]]}if(ve<H&&(Q&V)!==L){for(ge===0&&(ge=ve),X+=q,ie=1<<(le=H-ge);le+ge<se&&!((ie-=U[le+ge])<=0);)le++,ie<<=1;if(Le+=1<<le,g===1&&852<Le||g===2&&592<Le)return 1;N[L=Q&V]=ve<<24|le<<16|X-S|0}}return Q!==0&&(N[X+Q]=H-ge<<24|64<<16|0),j.bits=ve,0}},{"../utils/common":41}],51:[function(t,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,a){var s=t("../utils/common"),c=0,d=1;function x(de){for(var Se=de.length;0<=--Se;)de[Se]=0}var f=0,g=29,v=256,w=v+1+g,E=30,N=19,S=2*w+1,T=15,j=16,D=7,I=256,L=16,V=17,X=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=new Array(2*(w+2));x(Z);var H=new Array(2*E);x(H);var he=new Array(512);x(he);var q=new Array(256);x(q);var se=new Array(g);x(se);var ve,le,ge,ie=new Array(E);function Le(de,Se,lt,Ue,He){this.static_tree=de,this.extra_bits=Se,this.extra_base=lt,this.elems=Ue,this.max_length=He,this.has_stree=de&&de.length}function Q(de,Se){this.dyn_tree=de,this.max_code=0,this.stat_desc=Se}function B(de){return de<256?he[de]:he[256+(de>>>7)]}function te(de,Se){de.pending_buf[de.pending++]=255&Se,de.pending_buf[de.pending++]=Se>>>8&255}function U(de,Se,lt){de.bi_valid>j-lt?(de.bi_buf|=Se<<de.bi_valid&65535,te(de,de.bi_buf),de.bi_buf=Se>>j-de.bi_valid,de.bi_valid+=lt-j):(de.bi_buf|=Se<<de.bi_valid&65535,de.bi_valid+=lt)}function P(de,Se,lt){U(de,lt[2*Se],lt[2*Se+1])}function ue(de,Se){for(var lt=0;lt|=1&de,de>>>=1,lt<<=1,0<--Se;);return lt>>>1}function Re(de,Se,lt){var Ue,He,Oe=new Array(T+1),We=0;for(Ue=1;Ue<=T;Ue++)Oe[Ue]=We=We+lt[Ue-1]<<1;for(He=0;He<=Se;He++){var rt=de[2*He+1];rt!==0&&(de[2*He]=ue(Oe[rt]++,rt))}}function De(de){var Se;for(Se=0;Se<w;Se++)de.dyn_ltree[2*Se]=0;for(Se=0;Se<E;Se++)de.dyn_dtree[2*Se]=0;for(Se=0;Se<N;Se++)de.bl_tree[2*Se]=0;de.dyn_ltree[2*I]=1,de.opt_len=de.static_len=0,de.last_lit=de.matches=0}function Ne(de){8<de.bi_valid?te(de,de.bi_buf):0<de.bi_valid&&(de.pending_buf[de.pending++]=de.bi_buf),de.bi_buf=0,de.bi_valid=0}function Ke(de,Se,lt,Ue){var He=2*Se,Oe=2*lt;return de[He]<de[Oe]||de[He]===de[Oe]&&Ue[Se]<=Ue[lt]}function ye(de,Se,lt){for(var Ue=de.heap[lt],He=lt<<1;He<=de.heap_len&&(He<de.heap_len&&Ke(Se,de.heap[He+1],de.heap[He],de.depth)&&He++,!Ke(Se,Ue,de.heap[He],de.depth));)de.heap[lt]=de.heap[He],lt=He,He<<=1;de.heap[lt]=Ue}function me(de,Se,lt){var Ue,He,Oe,We,rt=0;if(de.last_lit!==0)for(;Ue=de.pending_buf[de.d_buf+2*rt]<<8|de.pending_buf[de.d_buf+2*rt+1],He=de.pending_buf[de.l_buf+rt],rt++,Ue===0?P(de,He,Se):(P(de,(Oe=q[He])+v+1,Se),(We=M[Oe])!==0&&U(de,He-=se[Oe],We),P(de,Oe=B(--Ue),lt),(We=W[Oe])!==0&&U(de,Ue-=ie[Oe],We)),rt<de.last_lit;);P(de,I,Se)}function Ce(de,Se){var lt,Ue,He,Oe=Se.dyn_tree,We=Se.stat_desc.static_tree,rt=Se.stat_desc.has_stree,ht=Se.stat_desc.elems,Pe=-1;for(de.heap_len=0,de.heap_max=S,lt=0;lt<ht;lt++)Oe[2*lt]!==0?(de.heap[++de.heap_len]=Pe=lt,de.depth[lt]=0):Oe[2*lt+1]=0;for(;de.heap_len<2;)Oe[2*(He=de.heap[++de.heap_len]=Pe<2?++Pe:0)]=1,de.depth[He]=0,de.opt_len--,rt&&(de.static_len-=We[2*He+1]);for(Se.max_code=Pe,lt=de.heap_len>>1;1<=lt;lt--)ye(de,Oe,lt);for(He=ht;lt=de.heap[1],de.heap[1]=de.heap[de.heap_len--],ye(de,Oe,1),Ue=de.heap[1],de.heap[--de.heap_max]=lt,de.heap[--de.heap_max]=Ue,Oe[2*He]=Oe[2*lt]+Oe[2*Ue],de.depth[He]=(de.depth[lt]>=de.depth[Ue]?de.depth[lt]:de.depth[Ue])+1,Oe[2*lt+1]=Oe[2*Ue+1]=He,de.heap[1]=He++,ye(de,Oe,1),2<=de.heap_len;);de.heap[--de.heap_max]=de.heap[1],(function(Ye,Tt){var Ct,Mt,lr,jt,ft,qt,Bt=Tt.dyn_tree,Qt=Tt.max_code,mr=Tt.stat_desc.static_tree,Pr=Tt.stat_desc.has_stree,Xr=Tt.stat_desc.extra_bits,$t=Tt.stat_desc.extra_base,Cr=Tt.stat_desc.max_length,Kr=0;for(jt=0;jt<=T;jt++)Ye.bl_count[jt]=0;for(Bt[2*Ye.heap[Ye.heap_max]+1]=0,Ct=Ye.heap_max+1;Ct<S;Ct++)Cr<(jt=Bt[2*Bt[2*(Mt=Ye.heap[Ct])+1]+1]+1)&&(jt=Cr,Kr++),Bt[2*Mt+1]=jt,Qt<Mt||(Ye.bl_count[jt]++,ft=0,$t<=Mt&&(ft=Xr[Mt-$t]),qt=Bt[2*Mt],Ye.opt_len+=qt*(jt+ft),Pr&&(Ye.static_len+=qt*(mr[2*Mt+1]+ft)));if(Kr!==0){do{for(jt=Cr-1;Ye.bl_count[jt]===0;)jt--;Ye.bl_count[jt]--,Ye.bl_count[jt+1]+=2,Ye.bl_count[Cr]--,Kr-=2}while(0<Kr);for(jt=Cr;jt!==0;jt--)for(Mt=Ye.bl_count[jt];Mt!==0;)Qt<(lr=Ye.heap[--Ct])||(Bt[2*lr+1]!==jt&&(Ye.opt_len+=(jt-Bt[2*lr+1])*Bt[2*lr],Bt[2*lr+1]=jt),Mt--)}})(de,Se),Re(Oe,Pe,de.bl_count)}function G(de,Se,lt){var Ue,He,Oe=-1,We=Se[1],rt=0,ht=7,Pe=4;for(We===0&&(ht=138,Pe=3),Se[2*(lt+1)+1]=65535,Ue=0;Ue<=lt;Ue++)He=We,We=Se[2*(Ue+1)+1],++rt<ht&&He===We||(rt<Pe?de.bl_tree[2*He]+=rt:He!==0?(He!==Oe&&de.bl_tree[2*He]++,de.bl_tree[2*L]++):rt<=10?de.bl_tree[2*V]++:de.bl_tree[2*X]++,Oe=He,Pe=(rt=0)===We?(ht=138,3):He===We?(ht=6,3):(ht=7,4))}function Me(de,Se,lt){var Ue,He,Oe=-1,We=Se[1],rt=0,ht=7,Pe=4;for(We===0&&(ht=138,Pe=3),Ue=0;Ue<=lt;Ue++)if(He=We,We=Se[2*(Ue+1)+1],!(++rt<ht&&He===We)){if(rt<Pe)for(;P(de,He,de.bl_tree),--rt!=0;);else He!==0?(He!==Oe&&(P(de,He,de.bl_tree),rt--),P(de,L,de.bl_tree),U(de,rt-3,2)):rt<=10?(P(de,V,de.bl_tree),U(de,rt-3,3)):(P(de,X,de.bl_tree),U(de,rt-11,7));Oe=He,Pe=(rt=0)===We?(ht=138,3):He===We?(ht=6,3):(ht=7,4)}}x(ie);var Ae=!1;function oe(de,Se,lt,Ue){U(de,(f<<1)+(Ue?1:0),3),(function(He,Oe,We,rt){Ne(He),te(He,We),te(He,~We),s.arraySet(He.pending_buf,He.window,Oe,We,He.pending),He.pending+=We})(de,Se,lt)}a._tr_init=function(de){Ae||((function(){var Se,lt,Ue,He,Oe,We=new Array(T+1);for(He=Ue=0;He<g-1;He++)for(se[He]=Ue,Se=0;Se<1<<M[He];Se++)q[Ue++]=He;for(q[Ue-1]=He,He=Oe=0;He<16;He++)for(ie[He]=Oe,Se=0;Se<1<<W[He];Se++)he[Oe++]=He;for(Oe>>=7;He<E;He++)for(ie[He]=Oe<<7,Se=0;Se<1<<W[He]-7;Se++)he[256+Oe++]=He;for(lt=0;lt<=T;lt++)We[lt]=0;for(Se=0;Se<=143;)Z[2*Se+1]=8,Se++,We[8]++;for(;Se<=255;)Z[2*Se+1]=9,Se++,We[9]++;for(;Se<=279;)Z[2*Se+1]=7,Se++,We[7]++;for(;Se<=287;)Z[2*Se+1]=8,Se++,We[8]++;for(Re(Z,w+1,We),Se=0;Se<E;Se++)H[2*Se+1]=5,H[2*Se]=ue(Se,5);ve=new Le(Z,M,v+1,w,T),le=new Le(H,W,0,E,T),ge=new Le(new Array(0),z,0,N,D)})(),Ae=!0),de.l_desc=new Q(de.dyn_ltree,ve),de.d_desc=new Q(de.dyn_dtree,le),de.bl_desc=new Q(de.bl_tree,ge),de.bi_buf=0,de.bi_valid=0,De(de)},a._tr_stored_block=oe,a._tr_flush_block=function(de,Se,lt,Ue){var He,Oe,We=0;0<de.level?(de.strm.data_type===2&&(de.strm.data_type=(function(rt){var ht,Pe=4093624447;for(ht=0;ht<=31;ht++,Pe>>>=1)if(1&Pe&&rt.dyn_ltree[2*ht]!==0)return c;if(rt.dyn_ltree[18]!==0||rt.dyn_ltree[20]!==0||rt.dyn_ltree[26]!==0)return d;for(ht=32;ht<v;ht++)if(rt.dyn_ltree[2*ht]!==0)return d;return c})(de)),Ce(de,de.l_desc),Ce(de,de.d_desc),We=(function(rt){var ht;for(G(rt,rt.dyn_ltree,rt.l_desc.max_code),G(rt,rt.dyn_dtree,rt.d_desc.max_code),Ce(rt,rt.bl_desc),ht=N-1;3<=ht&&rt.bl_tree[2*ae[ht]+1]===0;ht--);return rt.opt_len+=3*(ht+1)+5+5+4,ht})(de),He=de.opt_len+3+7>>>3,(Oe=de.static_len+3+7>>>3)<=He&&(He=Oe)):He=Oe=lt+5,lt+4<=He&&Se!==-1?oe(de,Se,lt,Ue):de.strategy===4||Oe===He?(U(de,2+(Ue?1:0),3),me(de,Z,H)):(U(de,4+(Ue?1:0),3),(function(rt,ht,Pe,Ye){var Tt;for(U(rt,ht-257,5),U(rt,Pe-1,5),U(rt,Ye-4,4),Tt=0;Tt<Ye;Tt++)U(rt,rt.bl_tree[2*ae[Tt]+1],3);Me(rt,rt.dyn_ltree,ht-1),Me(rt,rt.dyn_dtree,Pe-1)})(de,de.l_desc.max_code+1,de.d_desc.max_code+1,We+1),me(de,de.dyn_ltree,de.dyn_dtree)),De(de),Ue&&Ne(de)},a._tr_tally=function(de,Se,lt){return de.pending_buf[de.d_buf+2*de.last_lit]=Se>>>8&255,de.pending_buf[de.d_buf+2*de.last_lit+1]=255&Se,de.pending_buf[de.l_buf+de.last_lit]=255&lt,de.last_lit++,Se===0?de.dyn_ltree[2*lt]++:(de.matches++,Se--,de.dyn_ltree[2*(q[lt]+v+1)]++,de.dyn_dtree[2*B(Se)]++),de.last_lit===de.lit_bufsize-1},a._tr_align=function(de){U(de,2,3),P(de,I,Z),(function(Se){Se.bi_valid===16?(te(Se,Se.bi_buf),Se.bi_buf=0,Se.bi_valid=0):8<=Se.bi_valid&&(Se.pending_buf[Se.pending++]=255&Se.bi_buf,Se.bi_buf>>=8,Se.bi_valid-=8)})(de)}},{"../utils/common":41}],53:[function(t,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,a){(function(s){(function(c,d){if(!c.setImmediate){var x,f,g,v,w=1,E={},N=!1,S=c.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(c);T=T&&T.setTimeout?T:c,x={}.toString.call(c.process)==="[object process]"?function(L){process.nextTick(function(){D(L)})}:(function(){if(c.postMessage&&!c.importScripts){var L=!0,V=c.onmessage;return c.onmessage=function(){L=!1},c.postMessage("","*"),c.onmessage=V,L}})()?(v="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",I,!1):c.attachEvent("onmessage",I),function(L){c.postMessage(v+L,"*")}):c.MessageChannel?((g=new MessageChannel).port1.onmessage=function(L){D(L.data)},function(L){g.port2.postMessage(L)}):S&&"onreadystatechange"in S.createElement("script")?(f=S.documentElement,function(L){var V=S.createElement("script");V.onreadystatechange=function(){D(L),V.onreadystatechange=null,f.removeChild(V),V=null},f.appendChild(V)}):function(L){setTimeout(D,0,L)},T.setImmediate=function(L){typeof L!="function"&&(L=new Function(""+L));for(var V=new Array(arguments.length-1),X=0;X<V.length;X++)V[X]=arguments[X+1];var M={callback:L,args:V};return E[w]=M,x(w),w++},T.clearImmediate=j}function j(L){delete E[L]}function D(L){if(N)setTimeout(D,0,L);else{var V=E[L];if(V){N=!0;try{(function(X){var M=X.callback,W=X.args;switch(W.length){case 0:M();break;case 1:M(W[0]);break;case 2:M(W[0],W[1]);break;case 3:M(W[0],W[1],W[2]);break;default:M.apply(d,W)}})(V)}finally{j(L),N=!1}}}}function I(L){L.source===c&&typeof L.data=="string"&&L.data.indexOf(v)===0&&D(+L.data.slice(v.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof vo<"u"?vo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(xp)),xp.exports}var EI=_I();const c2=O2(EI);function kI(){const{logout:e}=Wi(),[r,t]=J.useState([]),[n,a]=J.useState([]),[s,c]=J.useState([]),[d,x]=J.useState(!0),[f,g]=J.useState(!1),[v,w]=J.useState(""),[E,N]=J.useState("Tm"),[S,T]=J.useState(null),[j,D]=J.useState(!1),[I,L]=J.useState(!1),[V,X]=J.useState(!1),[M,W]=J.useState(null),[z,ae]=J.useState({}),[Z,H]=J.useState(null),[he,q]=J.useState(!1),[se,ve]=J.useState(!1),[le,ge]=J.useState(null),[ie,Le]=J.useState(""),[Q,B]=J.useState(!1),[te,U]=J.useState(null),[P,ue]=J.useState(""),[Re,De]=J.useState(!1),Ne=J.useRef(null);J.useEffect(()=>{Ke()},[]);const Ke=async()=>{try{const[Oe,We,rt]=await Promise.all([vi.getAll(),Sn.getAll(),kn.getAll()]);t(Oe.data?.invoices||[]),a(We.data?.products||[]),c(rt.data?.customers||[])}catch(Oe){console.error("Veri yklenirken hata:",Oe)}finally{x(!1)}},ye=async()=>{g(!0);try{if(!localStorage.getItem("birfatura_config")){alert("API ayarlar eksik. Ltfen ayarlardan BirFatura entegrasyonunu kontrol edin."),g(!1);return}alert("Senkronizasyon kontrol ediliyor..."),await Ke()}catch(Oe){alert("Senkronizasyon hatas: "+Oe.message)}finally{g(!1)}},me=["Tm","Bekliyor","lendi","lenmeyecek"],Ce=r.filter(Oe=>{const We=!v||Oe.invoice_number?.toLowerCase().includes(v.toLowerCase())||Oe.supplier_name?.toLowerCase().includes(v.toLowerCase()),rt=E==="Tm"||Oe.status===E;return We&&rt}),G=Oe=>Oe?new Date(Oe).toLocaleDateString("tr-TR"):"-",Me=Oe=>{switch(Oe){case"Bekliyor":return"bg-amber-100 text-amber-700";case"lendi":return"bg-green-100 text-green-700";case"lenmeyecek":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-600"}},Ae={total:r.length,pending:r.filter(Oe=>Oe.status==="Bekliyor").length,processed:r.filter(Oe=>Oe.status==="lendi").length,totalAmount:r.reduce((Oe,We)=>Oe+(parseFloat(We.total)||0),0)},oe=(Oe,We)=>{if(!Oe)return"";const rt=Oe.getElementsByTagName("*");for(let ht=0;ht<rt.length;ht++)if(rt[ht].localName===We)return rt[ht].textContent;return""},de=(Oe,We)=>{if(!Oe)return null;const rt=Oe.getElementsByTagName("*");for(let ht=0;ht<rt.length;ht++)if(rt[ht].localName===We)return rt[ht];return null},Se=async Oe=>{T(Oe),D(!1),L(!0),X(!0),W(null),ae({}),H(null);try{const[We,rt,ht]=await Promise.all([xn.get("birfatura_api_key"),xn.get("birfatura_secret_key"),xn.get("birfatura_integration_key")]);if(!We.data||!rt.data||!ht.data)throw new Error("API ayarlar veritabannda bulunamad. Ltfen Ayarlar > Entegrasyon Ayarlar blmnden bilgileri girin.");const Pe={api_key:We.data,secret_key:rt.data,integration_key:ht.data},Ye={documentUUID:Oe.uuid,inOutCode:"IN",systemTypeCodes:"EFATURA"},Tt=await mn.post("/api/birfatura-proxy",{endpoint:"OutEBelgeV2/DocumentDownloadByUUID",payload:Ye,apiKey:Pe.api_key,secretKey:Pe.secret_key,integrationKey:Pe.integration_key});if(!Tt.data.Success)throw new Error(Tt.data.Message||"Fatura detay alnamad");const Ct=Tt.data.Result?.content;if(!Ct)throw new Error("Dosya ierii bo");const lr=await new c2().loadAsync(Ct,{base64:!0}),jt=Object.keys(lr.files).find(Hr=>Hr.toLowerCase().endsWith(".xml"));if(!jt)throw new Error("XML bulunamad");const ft=await lr.files[jt].async("string"),Bt=new DOMParser().parseFromString(ft,"text/xml"),Qt=de(Bt,"AccountingSupplierParty"),mr=de(Qt,"PartyIdentification"),Pr=oe(mr,"ID"),Xr=de(Qt,"PartyName"),$t=oe(Xr,"Name"),Cr=s.find(Hr=>Hr.name.toLowerCase().includes($t.toLowerCase())||$t.toLowerCase().includes(Hr.name.toLowerCase()));Cr&&H(Cr.id);const Tn=Array.from(Bt.getElementsByTagName("*")).filter(Hr=>Hr.localName==="InvoiceLine").map(Hr=>{const Ge=de(Hr,"Item"),Nt=de(Hr,"Price"),Dt=de(Hr,"TaxTotal"),Pt=de(Dt,"TaxSubtotal"),_r=de(Pt,"TaxCategory"),Ie=parseFloat(oe(Hr,"InvoicedQuantity")||0),wt=parseFloat(oe(Nt,"PriceAmount")||0),_t=parseFloat(oe(Hr,"LineExtensionAmount")||0),Ft=parseFloat(oe(_r,"Percent")||0),ee=de(Hr,"AllowanceCharge");let fe=0;ee&&oe(ee,"ChargeIndicator")==="false"&&(fe=parseFloat(oe(ee,"Amount")||0));const pe=_t*(Ft/100),be=_t+pe;return{name:oe(Ge,"Name"),quantity:Ie,unit_price:wt*(1+Ft/100),raw_unit_price:wt,line_net:be,vat_rate:Ft,discount:fe}});W({lines:Tn,total_amount:parseFloat(Oe.total||0),supplier_name:$t,supplier_tax:Pr});const Mr={};Tn.forEach((Hr,Ge)=>{const Nt=n.find(Dt=>Dt.name.toLowerCase()===Hr.name.toLowerCase()||Dt.barcode&&Hr.name.includes(Dt.barcode));Nt&&(Mr[Ge]=Nt.id)}),ae(Mr)}catch(We){console.error("Detay hatas:",We),alert("Fatura detaylar alnamad: "+We.message),L(!1)}finally{X(!1)}},lt=Oe=>{le&&(ae(We=>({...We,[le.index]:Oe.id})),ve(!1),ge(null))},Ue=async()=>{if(!M||!Z){alert("Ltfen bir cari sein.");return}if(!M.lines.every((We,rt)=>z[rt])){alert("Ltfen tm rnleri eletirin.");return}if(confirm("Faturay ilemek istediinize emin misiniz?")){q(!0);try{for(let We=0;We<M.lines.length;We++){const rt=M.lines[We],ht=z[We],Pe=n.find(Ye=>Ye.id==ht);if(Pe){const Ye=(Pe.stock||0)+rt.quantity;await Sn.updateStock(Pe.stock_code,{stock:Ye})}}await kn.addPurchaseTransaction({customer_id:Z,amount:M.total_amount,description:`Fatura leme (${S.invoice_number})`}),await vi.updateStatus(S.id,"lendi"),alert("Fatura baaryla ilendi!"),L(!1),Ke()}catch(We){console.error(We);const rt=We.response?.data?.message||We.message||"lem baarsz";alert("Hata: "+rt)}finally{q(!1)}}},He=async()=>{if(M?.supplier_name&&confirm(`"${M.supplier_name}" sisteme yeni cari olarak eklensin mi?`))try{const Oe={name:M.supplier_name,tax_number:M.supplier_tax||"",phone:"-",email:"",address:"-",balance:0};if((await kn.add(Oe)).data?.success){const ht=(await kn.getAll()).data?.customers||[];c(ht);const Pe=ht.find(Ye=>Ye.name===Oe.name);Pe?(H(Pe.id),alert("Cari eklendi ve seildi.")):alert("Cari eklendi ancak listede bulunamad.")}else alert("Ekleme baarsz.")}catch(Oe){console.error(Oe);const We=Oe.response?.data?.message||Oe.message||"Ekleme baarsz";alert("Hata: "+We)}};return d?l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:l.jsx("div",{className:"w-10 h-10 border-4 border-violet-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("div",{className:"min-h-screen bg-gray-100 pb-24",children:[l.jsxs("header",{className:"bg-gradient-to-r from-violet-600 to-purple-600 text-white sticky top-0 z-20 px-4 py-4 shadow-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(hr,{to:"/mobile-pos",className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold",children:" Gelen Faturalar"}),l.jsxs("p",{className:"text-violet-200 text-xs",children:[Ae.total," fatura"]})]})]}),l.jsxs("button",{onClick:ye,disabled:f,className:"px-3 py-2 bg-white/20 rounded-xl text-sm font-semibold hover:bg-white/30 transition-colors disabled:opacity-50 flex items-center gap-1",children:[f?l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"",f?"":"Senkronize"]})]}),l.jsx("input",{type:"text",value:v,onChange:Oe=>w(Oe.target.value),placeholder:"Fatura no veya tedariki ara...",className:"w-full px-4 py-2.5 bg-white/20 placeholder-violet-200 text-white rounded-xl focus:outline-none focus:bg-white/30"})]}),l.jsxs("div",{className:"px-4 py-3 grid grid-cols-3 gap-2",children:[l.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 text-center",children:[l.jsx("p",{className:"text-xs text-amber-600",children:"Bekleyen"}),l.jsx("p",{className:"text-xl font-bold text-amber-700",children:Ae.pending})]}),l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 text-center",children:[l.jsx("p",{className:"text-xs text-green-600",children:"lendi"}),l.jsx("p",{className:"text-xl font-bold text-green-700",children:Ae.processed})]}),l.jsxs("div",{className:"bg-violet-50 border border-violet-200 rounded-xl p-3 text-center",children:[l.jsx("p",{className:"text-xs text-violet-600",children:"Toplam"}),l.jsxs("p",{className:"text-lg font-bold text-violet-700",children:["",Ae.totalAmount.toLocaleString("tr-TR")]})]})]}),l.jsx("div",{className:"px-4 pb-2 flex gap-2 overflow-x-auto",style:{WebkitOverflowScrolling:"touch"},children:me.map(Oe=>l.jsx("button",{onClick:()=>N(Oe),className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-semibold transition-colors
                            ${E===Oe?"bg-violet-600 text-white":"bg-white text-gray-600 border border-gray-200"}`,children:Oe},Oe))}),l.jsx("div",{className:"px-4 py-2 space-y-3",children:Ce.length===0?l.jsx("div",{className:"text-center py-10 text-gray-500",children:r.length===0?"Fatura bulunamad.":"Arama sonucu bulunamad."}):Ce.map((Oe,We)=>l.jsxs("div",{onClick:()=>{T(Oe),D(!0)},className:"bg-white rounded-2xl p-4 shadow-sm active:bg-gray-50 cursor-pointer",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:Oe.supplier_name||"Bilinmeyen Tedariki"}),l.jsx("p",{className:"text-sm text-violet-600 font-mono",children:Oe.invoice_number||"-"})]}),l.jsx("div",{className:"text-right ml-3",children:l.jsxs("p",{className:"text-lg font-bold text-emerald-600",children:["",parseFloat(Oe.total||0).toLocaleString("tr-TR")]})})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs text-gray-400",children:G(Oe.date)}),l.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${Me(Oe.status)}`,children:Oe.status||"Bekliyor"})]})]},Oe.id||We))}),j&&S&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:()=>D(!1),children:l.jsxs("div",{className:"absolute bottom-0 w-full bg-white rounded-t-3xl p-5 shadow-2xl max-h-[85vh] overflow-y-auto animate-slide-up",onClick:Oe=>Oe.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Fatura Detay"}),l.jsx("p",{className:"text-sm text-violet-600 font-mono",children:S.invoice_number})]}),l.jsx("button",{onClick:()=>D(!1),className:"p-2 bg-gray-100 rounded-full text-gray-600",children:""})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tedariki"}),l.jsx("p",{className:"font-semibold text-gray-800",children:S.supplier_name||"-"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tarih"}),l.jsx("p",{className:"font-semibold text-gray-800",children:G(S.date)})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[l.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Durum"}),l.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${Me(S.status)}`,children:S.status||"Bekliyor"})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl p-5 text-center",children:[l.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Toplam Tutar"}),l.jsxs("p",{className:"text-3xl font-black text-white",children:["",parseFloat(S.total||0).toLocaleString("tr-TR")]})]}),(!S.status||S.status==="Bekliyor")&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{onClick:async()=>{try{await vi.updateStatus(S.id,"lenmeyecek"),D(!1),Ke()}catch(Oe){alert("Hata: "+Oe.message)}},className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"lenmeyecek"}),l.jsx("button",{onClick:async()=>{try{await vi.updateStatus(S.id,"lendi"),D(!1),Ke()}catch(Oe){alert("Hata: "+Oe.message)}},className:"flex-1 py-3 bg-gradient-to-r from-emerald-500 to-green-500 text-white rounded-xl font-bold",children:" lendi"})]}),l.jsx("button",{onClick:()=>Se(S),className:"w-full mt-3 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-blue-500/30",children:" Cariye ve Stoklara le"})]})]})]})}),I&&l.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[1000] flex flex-col animate-slide-up bg-gray-50",children:[l.jsxs("div",{className:"bg-gradient-to-r from-violet-900 to-indigo-900 text-white p-4 shadow-lg flex-none z-10",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("h2",{className:"text-lg font-bold flex items-center gap-2",children:" Fatura le"}),l.jsx("button",{onClick:()=>L(!1),className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-lg",children:""})]}),M&&l.jsxs("div",{children:[l.jsx("p",{className:"text-indigo-200 text-xs",children:S?.invoice_number}),l.jsx("h3",{className:"font-semibold text-sm truncate",children:M.supplier_name})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:V?l.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[l.jsx("div",{className:"w-10 h-10 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),l.jsx("p",{className:"mt-3 text-gray-500 text-sm",children:"Fatura Analiz Ediliyor..."})]}):M?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-indigo-100",children:[l.jsx("h4",{className:"text-xs font-bold text-indigo-600 uppercase mb-2",children:"1. Cari Eletirme"}),l.jsxs("select",{value:Z||"",onChange:Oe=>H(Oe.target.value),className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-lg text-sm font-semibold text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[l.jsx("option",{value:"",children:"-- Cari Seiniz --"}),s.map(Oe=>l.jsx("option",{value:Oe.id,children:Oe.name},Oe.id))]}),l.jsxs("button",{onClick:He,className:"mt-2 w-full py-2 bg-indigo-100 text-indigo-700 rounded-lg text-sm font-bold hover:bg-indigo-200 transition-colors flex items-center justify-center gap-2",children:[l.jsx("span",{children:""})," Yeni Cari Olarak Ekle"]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h4",{className:"text-xs font-bold text-indigo-600 uppercase px-1",children:"2. rn Eletirme"}),M.lines.map((Oe,We)=>{const rt=z[We],ht=rt?n.find(Pe=>Pe.id==rt):null;return l.jsxs("div",{className:`bg-white rounded-xl p-3 shadow-sm border ${ht?"border-emerald-200":"border-red-200"}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-bold text-gray-800 text-sm",children:Oe.name}),l.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-gray-700 font-bold",children:[Oe.quantity," Adet"]}),l.jsxs("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:["KDV %",Oe.vat_rate]})]}),l.jsxs("div",{className:"flex justify-between text-gray-500",children:[l.jsx("span",{children:"KDV Hari Fiyat:"}),l.jsxs("span",{className:"font-mono",children:[Oe.raw_unit_price.toFixed(2)," TL"]})]}),l.jsxs("div",{className:"flex justify-between text-gray-800 font-bold",children:[l.jsx("span",{children:"KDV Dahil Fiyat:"}),l.jsxs("span",{className:"font-mono",children:[Oe.unit_price.toFixed(2)," TL"]})]})]})]}),l.jsx("div",{className:"text-right",children:l.jsxs("p",{className:"font-bold text-gray-900 text-sm",children:[Oe.line_net.toFixed(2)," TL"]})})]}),ht?l.jsxs("div",{className:"flex justify-between items-center bg-emerald-50 rounded-lg p-2 border border-emerald-100",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 text-xs",children:""}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-bold text-emerald-700",children:ht.name}),l.jsx("p",{className:"text-[10px] text-emerald-600",children:ht.stock_code})]})]}),l.jsx("button",{onClick:()=>{ge({index:We,line:Oe}),ve(!0),Le("")},className:"text-xs text-emerald-600 underline px-2",children:"Deitir"})]}):l.jsx("button",{onClick:()=>{ge({index:We,line:Oe}),ve(!0),Le(Oe.name)},className:"w-full py-2 bg-red-50 text-red-600 rounded-lg text-sm font-bold border border-red-100 flex items-center justify-center gap-1",children:" Eletir"})]},We)})]})]}):l.jsx("div",{className:"text-center py-10 text-gray-500",children:"Fatura verisi yklenemedi."})}),M&&l.jsxs("div",{className:"bg-white border-t border-gray-200 p-4 shadow-[0_-4px_20px_rgba(0,0,0,0.1)] z-20",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("span",{className:"text-gray-500 text-sm",children:"Genel Toplam"}),l.jsxs("span",{className:"text-xl font-black text-gray-800",children:["",M.total_amount.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),l.jsx("button",{onClick:Ue,disabled:he,className:"w-full py-4 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl font-bold text-lg shadow-lg shadow-emerald-500/30 flex items-center justify-center gap-2 disabled:opacity-70",children:he?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"leniyor..."]}):l.jsx(l.Fragment,{children:" Kaydet ve Stoklara le"})})]})]}),se&&l.jsxs("div",{className:"fixed inset-0 bg-white z-[1100] flex flex-col animate-slide-up",children:[l.jsxs("div",{className:"bg-white border-b border-gray-200 p-3 flex gap-2 items-center shadow-sm",children:[l.jsx("button",{onClick:()=>ve(!1),className:"w-10 h-10 flex items-center justify-center text-2xl text-gray-500",children:""}),l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("input",{autoFocus:!0,type:"text",className:"w-full bg-gray-100 rounded-xl px-4 py-3 pl-10 focus:outline-none focus:ring-2 focus:ring-violet-500",placeholder:"rn ara...",value:ie,onChange:Oe=>Le(Oe.target.value)}),l.jsx("span",{className:"absolute left-3 top-3.5 text-gray-400",children:""})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[le&&l.jsxs("div",{className:"bg-violet-50 p-3 rounded-lg mb-2 text-sm text-violet-800 border border-violet-100",children:[l.jsx("span",{className:"font-bold",children:"Aranan:"})," ",le.line.name]}),l.jsx("div",{className:"space-y-2",children:n.filter(Oe=>{const We=ie.toLowerCase();return!We||Oe.name.toLowerCase().includes(We)||Oe.stock_code?.toLowerCase().includes(We)||Oe.barcode?.includes(We)}).slice(0,50).map(Oe=>l.jsxs("button",{onClick:()=>lt(Oe),className:"w-full text-left bg-white p-3 rounded-xl border border-gray-100 shadow-sm active:bg-gray-50 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-gray-800 text-sm",children:Oe.name}),l.jsx("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:Oe.stock_code})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"font-bold text-violet-600 text-sm",children:["",Oe.price]}),l.jsxs("p",{className:"text-[10px] text-gray-400",children:["Stok: ",Oe.stock]})]})]},Oe.id))})]})]}),Q&&l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[2000] flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-slide-up",children:[l.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 p-5 flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:" Fiyat Sorgula"}),l.jsx("button",{onClick:()=>{B(!1),U(null),Ne.current&&(Ne.current.stop().catch(()=>{}),Ne.current=null),De(!1)},className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl hover:bg-white/30 transition-colors",children:""})]}),l.jsxs("div",{className:"p-5 space-y-4",children:[Re?l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{id:"invoice-price-check-scanner",className:"w-full rounded-2xl overflow-hidden"}),l.jsx("button",{onClick:()=>{Ne.current&&(Ne.current.stop().catch(()=>{}),Ne.current=null),De(!1)},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"ptal"})]}):l.jsx("button",{onClick:async()=>{De(!0),U(null),setTimeout(async()=>{try{const Oe=new wc("invoice-price-check-scanner");Ne.current=Oe,await Oe.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},We=>{const rt=n.find(ht=>ht.barcode===We||ht.stock_code===We||ht.stock_code?.toLowerCase()===We.toLowerCase());U(rt||{notFound:!0,searchTerm:We}),Oe.stop().catch(()=>{}),Ne.current=null,De(!1)},()=>{})}catch(Oe){console.error("Kamera hatas:",Oe),De(!1)}},100)},className:"w-full py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-2xl font-bold text-lg flex items-center justify-center gap-3 shadow-lg shadow-blue-500/30 hover:shadow-xl hover:scale-[1.02] transition-all",children:" Barkod Okut"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:P,onChange:Oe=>ue(Oe.target.value),placeholder:"Stok Kodu veya Barkod girin...",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-violet-500 text-lg",onKeyDown:Oe=>{if(Oe.key==="Enter"&&P.trim()){const We=n.find(rt=>rt.barcode===P.trim()||rt.stock_code===P.trim()||rt.stock_code?.toLowerCase()===P.trim().toLowerCase());U(We||{notFound:!0,searchTerm:P.trim()})}}}),l.jsx("button",{onClick:()=>{if(P.trim()){const Oe=n.find(We=>We.barcode===P.trim()||We.stock_code===P.trim()||We.stock_code?.toLowerCase()===P.trim().toLowerCase());U(Oe||{notFound:!0,searchTerm:P.trim()})}},className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg transition-all",children:"Ara"})]}),te&&l.jsx("div",{className:"mt-4 animate-slide-up",children:te.notFound?l.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-5 text-center",children:[l.jsx("span",{className:"text-4xl",children:""}),l.jsx("p",{className:"text-lg font-semibold text-red-600 mt-2",children:"rn Bulunamad"}),l.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:['"',te.searchTerm,'"']})]}):l.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-2xl p-5 space-y-3",children:[te.image_url&&l.jsx("div",{className:"flex justify-center",children:l.jsx("img",{src:te.image_url,alt:te.name,className:"w-24 h-24 object-cover rounded-xl shadow-md"})}),l.jsxs("div",{className:"space-y-2 text-center",children:[l.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"rn Ad"}),l.jsx("p",{className:"text-lg font-bold text-gray-800",children:te.name})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[l.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Stok Kodu"}),l.jsx("p",{className:"font-semibold text-gray-700",children:te.stock_code})]}),l.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Barkod"}),l.jsx("p",{className:"font-semibold text-gray-700 font-mono text-sm",children:te.barcode||"-"})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl p-5 text-center shadow-lg shadow-emerald-500/30",children:[l.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Sat Fiyat"}),l.jsxs("p",{className:"text-4xl font-black text-white",children:[te.price?.toFixed(2)," TL"]})]}),l.jsx("button",{onClick:()=>{U(null),ue("")},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:" Yeni Arama"})]})})]})]})}),l.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 flex justify-around py-2 px-1 z-30",children:[l.jsxs(hr,{to:"/mobile-pos",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Sat"})]}),l.jsxs("button",{onClick:()=>{B(!0),U(null),ue("")},className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Fiyat Gr"})]}),l.jsxs(hr,{to:"/mobile-products",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"rnler"})]}),l.jsxs(hr,{to:"/mobile-customers",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Bakiyeler"})]}),l.jsxs(hr,{to:"/mobile-sales",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"Satlar"})]}),l.jsxs(hr,{to:"/mobile-invoices",className:"flex flex-col items-center text-blue-600 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px] font-bold",children:"Faturalar"})]}),l.jsxs("button",{onClick:()=>e(),className:"flex flex-col items-center text-red-500 min-w-[40px]",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-[10px]",children:"k"})]})]}),l.jsx("style",{children:`
                @keyframes slide-up {
                    from { transform: translateY(100%); }
                    to { transform: translateY(0); }
                }
                .animate-slide-up {
                    animation: slide-up 0.3s ease-out;
                }
            `})]})}var hx={};hx.version="0.18.5";var gS=1252,SI=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],$2={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Z2=function(e){SI.indexOf(e)!=-1&&(gS=$2[0]=e)};function NI(){Z2(1252)}var yi=function(e){Z2(e)};function J2(){yi(1200),NI()}function s4(e){for(var r=[],t=0,n=e.length;t<n;++t)r[t]=e.charCodeAt(t);return r}function AI(e){for(var r=[],t=0;t<e.length>>1;++t)r[t]=String.fromCharCode(e.charCodeAt(2*t)+(e.charCodeAt(2*t+1)<<8));return r.join("")}function pS(e){for(var r=[],t=0;t<e.length>>1;++t)r[t]=String.fromCharCode(e.charCodeAt(2*t+1)+(e.charCodeAt(2*t)<<8));return r.join("")}var hd=function(e){var r=e.charCodeAt(0),t=e.charCodeAt(1);return r==255&&t==254?AI(e.slice(2)):r==254&&t==255?pS(e.slice(2)):r==65279?e.slice(1):e},Qh=function(r){return String.fromCharCode(r)},i4=function(r){return String.fromCharCode(r)},Bd,wo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Pd(e){for(var r="",t=0,n=0,a=0,s=0,c=0,d=0,x=0,f=0;f<e.length;)t=e.charCodeAt(f++),s=t>>2,n=e.charCodeAt(f++),c=(t&3)<<4|n>>4,a=e.charCodeAt(f++),d=(n&15)<<2|a>>6,x=a&63,isNaN(n)?d=x=64:isNaN(a)&&(x=64),r+=wo.charAt(s)+wo.charAt(c)+wo.charAt(d)+wo.charAt(x);return r}function Ms(e){var r="",t=0,n=0,a=0,s=0,c=0,d=0,x=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var f=0;f<e.length;)s=wo.indexOf(e.charAt(f++)),c=wo.indexOf(e.charAt(f++)),t=s<<2|c>>4,r+=String.fromCharCode(t),d=wo.indexOf(e.charAt(f++)),n=(c&15)<<4|d>>2,d!==64&&(r+=String.fromCharCode(n)),x=wo.indexOf(e.charAt(f++)),a=(d&3)<<6|x,x!==64&&(r+=String.fromCharCode(a));return r}var Ar=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Ol=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(r,t){return t?new Buffer(r,t):new Buffer(r)}:Buffer.from.bind(Buffer)}return function(){}})();function Ao(e){return Ar?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function l4(e){return Ar?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Rs=function(r){return Ar?Ol(r,"binary"):r.split("").map(function(t){return t.charCodeAt(0)&255})};function Px(e){if(typeof ArrayBuffer>"u")return Rs(e);for(var r=new ArrayBuffer(e.length),t=new Uint8Array(r),n=0;n!=e.length;++n)t[n]=e.charCodeAt(n)&255;return r}function Oo(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var r=[],t=0;t<e.length;++t)r[t]=String.fromCharCode(e[t]);return r.join("")}function TI(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function Q2(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return Q2(new Uint8Array(e));for(var r=new Array(e.length),t=0;t<e.length;++t)r[t]=e[t];return r}var ya=Ar?function(e){return Buffer.concat(e.map(function(r){return Buffer.isBuffer(r)?r:Ol(r)}))}:function(e){if(typeof Uint8Array<"u"){var r=0,t=0;for(r=0;r<e.length;++r)t+=e[r].length;var n=new Uint8Array(t),a=0;for(r=0,t=0;r<e.length;t+=a,++r)if(a=e[r].length,e[r]instanceof Uint8Array)n.set(e[r],t);else{if(typeof e[r]=="string")throw"wtf";n.set(new Uint8Array(e[r]),t)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function CI(e){for(var r=[],t=0,n=e.length+250,a=Ao(e.length+255),s=0;s<e.length;++s){var c=e.charCodeAt(s);if(c<128)a[t++]=c;else if(c<2048)a[t++]=192|c>>6&31,a[t++]=128|c&63;else if(c>=55296&&c<57344){c=(c&1023)+64;var d=e.charCodeAt(++s)&1023;a[t++]=240|c>>8&7,a[t++]=128|c>>2&63,a[t++]=128|d>>6&15|(c&3)<<4,a[t++]=128|d&63}else a[t++]=224|c>>12&15,a[t++]=128|c>>6&63,a[t++]=128|c&63;t>n&&(r.push(a.slice(0,t)),t=0,a=Ao(65535),n=65530)}return r.push(a.slice(0,t)),ya(r)}var Za=/\u0000/g,xd=/[\u0001-\u0006]/g;function z0(e){for(var r="",t=e.length-1;t>=0;)r+=e.charAt(t--);return r}function wi(e,r){var t=""+e;return t.length>=r?t:Hn("0",r-t.length)+t}function eb(e,r){var t=""+e;return t.length>=r?t:Hn(" ",r-t.length)+t}function xx(e,r){var t=""+e;return t.length>=r?t:t+Hn(" ",r-t.length)}function jI(e,r){var t=""+Math.round(e);return t.length>=r?t:Hn("0",r-t.length)+t}function OI(e,r){var t=""+e;return t.length>=r?t:Hn("0",r-t.length)+t}var o4=Math.pow(2,32);function S0(e,r){if(e>o4||e<-o4)return jI(e,r);var t=Math.round(e);return OI(t,r)}function mx(e,r){return r=r||0,e.length>=7+r&&(e.charCodeAt(r)|32)===103&&(e.charCodeAt(r+1)|32)===101&&(e.charCodeAt(r+2)|32)===110&&(e.charCodeAt(r+3)|32)===101&&(e.charCodeAt(r+4)|32)===114&&(e.charCodeAt(r+5)|32)===97&&(e.charCodeAt(r+6)|32)===108}var c4=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],mp=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function RI(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var nr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},u4={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},II={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function gx(e,r,t){for(var n=e<0?-1:1,a=e*n,s=0,c=1,d=0,x=1,f=0,g=0,v=Math.floor(a);f<r&&(v=Math.floor(a),d=v*c+s,g=v*f+x,!(a-v<5e-8));)a=1/(a-v),s=c,c=d,x=f,f=g;if(g>r&&(f>r?(g=x,d=s):(g=f,d=c)),!t)return[0,n*d,g];var w=Math.floor(n*d/g);return[w,n*d-w*g,g]}function dc(e,r,t){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,c=[],d={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(d.u)<1e-6&&(d.u=0),r&&r.date1904&&(n+=1462),d.u>.9999&&(d.u=0,++a==86400&&(d.T=a=0,++n,++d.D)),n===60)c=t?[1317,10,29]:[1900,2,29],s=3;else if(n===0)c=t?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var x=new Date(1900,0,1);x.setDate(x.getDate()+n-1),c=[x.getFullYear(),x.getMonth()+1,x.getDate()],s=x.getDay(),n<60&&(s=(s+6)%7),t&&(s=PI(x,c))}return d.y=c[0],d.m=c[1],d.d=c[2],d.S=a%60,a=Math.floor(a/60),d.M=a%60,a=Math.floor(a/60),d.H=a,d.q=s,d}var bS=new Date(1899,11,31,0,0,0),DI=bS.getTime(),MI=new Date(1900,2,1,0,0,0);function vS(e,r){var t=e.getTime();return r?t-=1461*24*60*60*1e3:e>=MI&&(t+=1440*60*1e3),(t-(DI+(e.getTimezoneOffset()-bS.getTimezoneOffset())*6e4))/(1440*60*1e3)}function tb(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function FI(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function LI(e){var r=e<0?12:11,t=tb(e.toFixed(12));return t.length<=r||(t=e.toPrecision(10),t.length<=r)?t:e.toExponential(5)}function BI(e){var r=tb(e.toFixed(11));return r.length>(e<0?12:11)||r==="0"||r==="-0"?e.toPrecision(6):r}function Ud(e){var r=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),t;return r>=-4&&r<=-1?t=e.toPrecision(10+r):Math.abs(r)<=9?t=LI(e):r===10?t=e.toFixed(10).substr(0,12):t=BI(e),tb(FI(t.toUpperCase()))}function _c(e,r){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Ud(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ni(14,vS(e,r&&r.date1904),r)}throw new Error("unsupported value in General format: "+e)}function PI(e,r){r[0]-=581;var t=e.getDay();return e<60&&(t=(t+6)%7),t}function UI(e,r,t,n){var a="",s=0,c=0,d=t.y,x,f=0;switch(e){case 98:d=t.y+543;case 121:switch(r.length){case 1:case 2:x=d%100,f=2;break;default:x=d%1e4,f=4;break}break;case 109:switch(r.length){case 1:case 2:x=t.m,f=r.length;break;case 3:return mp[t.m-1][1];case 5:return mp[t.m-1][0];default:return mp[t.m-1][2]}break;case 100:switch(r.length){case 1:case 2:x=t.d,f=r.length;break;case 3:return c4[t.q][0];default:return c4[t.q][1]}break;case 104:switch(r.length){case 1:case 2:x=1+(t.H+11)%12,f=r.length;break;default:throw"bad hour format: "+r}break;case 72:switch(r.length){case 1:case 2:x=t.H,f=r.length;break;default:throw"bad hour format: "+r}break;case 77:switch(r.length){case 1:case 2:x=t.M,f=r.length;break;default:throw"bad minute format: "+r}break;case 115:if(r!="s"&&r!="ss"&&r!=".0"&&r!=".00"&&r!=".000")throw"bad second format: "+r;return t.u===0&&(r=="s"||r=="ss")?wi(t.S,r.length):(n>=2?c=n===3?1e3:100:c=n===1?10:1,s=Math.round(c*(t.S+t.u)),s>=60*c&&(s=0),r==="s"?s===0?"0":""+s/c:(a=wi(s,2+n),r==="ss"?a.substr(0,2):"."+a.substr(2,r.length-1)));case 90:switch(r){case"[h]":case"[hh]":x=t.D*24+t.H;break;case"[m]":case"[mm]":x=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":x=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+r}f=r.length===3?1:2;break;case 101:x=d,f=1;break}var g=f>0?wi(x,f):"";return g}function _o(e){var r=3;if(e.length<=r)return e;for(var t=e.length%r,n=e.substr(0,t);t!=e.length;t+=r)n+=(n.length>0?",":"")+e.substr(t,r);return n}var yS=/%/g;function zI(e,r,t){var n=r.replace(yS,""),a=r.length-n.length;return Sl(e,n,t*Math.pow(10,2*a))+Hn("%",a)}function HI(e,r,t){for(var n=r.length-1;r.charCodeAt(n-1)===44;)--n;return Sl(e,r.substr(0,n),t/Math.pow(10,3*(r.length-n)))}function wS(e,r){var t,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(r==0)return"0.0E+0";if(r<0)return"-"+wS(e,-r);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(r)*Math.LOG10E)%a;if(s<0&&(s+=a),t=(r/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),t.indexOf("e")===-1){var c=Math.floor(Math.log(r)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(c-t.length+s):t+="E+"+(c-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,a)+"."+t.substr(2+a),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,x,f,g){return x+f+g.substr(0,(a+s)%a)+"."+g.substr(s)+"E"})}else t=r.toExponential(n);return e.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),e.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var _S=/# (\?+)( ?)\/( ?)(\d+)/;function GI(e,r,t){var n=parseInt(e[4],10),a=Math.round(r*n),s=Math.floor(a/n),c=a-s*n,d=n;return t+(s===0?"":""+s)+" "+(c===0?Hn(" ",e[1].length+1+e[4].length):eb(c,e[1].length)+e[2]+"/"+e[3]+wi(d,e[4].length))}function VI(e,r,t){return t+(r===0?"":""+r)+Hn(" ",e[1].length+2+e[4].length)}var ES=/^#*0*\.([0#]+)/,kS=/\).*[0#]/,SS=/\(###\) ###\\?-####/;function Ka(e){for(var r="",t,n=0;n!=e.length;++n)switch(t=e.charCodeAt(n)){case 35:break;case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(t)}return r}function d4(e,r){var t=Math.pow(10,r);return""+Math.round(e*t)/t}function f4(e,r){var t=e-Math.floor(e),n=Math.pow(10,r);return r<(""+Math.round(t*n)).length?0:Math.round(t*n)}function WI(e,r){return r<(""+Math.round((e-Math.floor(e))*Math.pow(10,r))).length?1:0}function qI(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Ys(e,r,t){if(e.charCodeAt(0)===40&&!r.match(kS)){var n=r.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Ys("n",n,t):"("+Ys("n",n,-t)+")"}if(r.charCodeAt(r.length-1)===44)return HI(e,r,t);if(r.indexOf("%")!==-1)return zI(e,r,t);if(r.indexOf("E")!==-1)return wS(r,t);if(r.charCodeAt(0)===36)return"$"+Ys(e,r.substr(r.charAt(1)==" "?2:1),t);var a,s,c,d,x=Math.abs(t),f=t<0?"-":"";if(r.match(/^00+$/))return f+S0(x,r.length);if(r.match(/^[#?]+$/))return a=S0(t,0),a==="0"&&(a=""),a.length>r.length?a:Ka(r.substr(0,r.length-a.length))+a;if(s=r.match(_S))return GI(s,x,f);if(r.match(/^#+0+$/))return f+S0(x,r.length-r.indexOf("0"));if(s=r.match(ES))return a=d4(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Ka(s[1])).replace(/\.$/,"."+Ka(s[1])).replace(/\.(\d*)$/,function(N,S){return"."+S+Hn("0",Ka(s[1]).length-S.length)}),r.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(r=r.replace(/^#+([0.])/,"$1"),s=r.match(/^(0*)\.(#*)$/))return f+d4(x,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=r.match(/^#{1,3},##0(\.?)$/))return f+_o(S0(x,0));if(s=r.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Ys(e,r,-t):_o(""+(Math.floor(t)+WI(t,s[1].length)))+"."+wi(f4(t,s[1].length),s[1].length);if(s=r.match(/^#,#*,#0/))return Ys(e,r.replace(/^#,#*,/,""),t);if(s=r.match(/^([0#]+)(\\?-([0#]+))+$/))return a=z0(Ys(e,r.replace(/[\\-]/g,""),t)),c=0,z0(z0(r.replace(/\\/g,"")).replace(/[0#]/g,function(N){return c<a.length?a.charAt(c++):N==="0"?"0":""}));if(r.match(SS))return a=Ys(e,"##########",t),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var g="";if(s=r.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(s[4].length,7),d=gx(x,Math.pow(10,c)-1,!1),a=""+f,g=Sl("n",s[1],d[1]),g.charAt(g.length-1)==" "&&(g=g.substr(0,g.length-1)+"0"),a+=g+s[2]+"/"+s[3],g=xx(d[2],c),g.length<s[4].length&&(g=Ka(s[4].substr(s[4].length-g.length))+g),a+=g,a;if(s=r.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(s[1].length,s[4].length),7),d=gx(x,Math.pow(10,c)-1,!0),f+(d[0]||(d[1]?"":"0"))+" "+(d[1]?eb(d[1],c)+s[2]+"/"+s[3]+xx(d[2],c):Hn(" ",2*c+1+s[2].length+s[3].length));if(s=r.match(/^[#0?]+$/))return a=S0(t,0),r.length<=a.length?a:Ka(r.substr(0,r.length-a.length))+a;if(s=r.match(/^([#0?]+)\.([#0]+)$/)){a=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),c=a.indexOf(".");var v=r.indexOf(".")-c,w=r.length-a.length-v;return Ka(r.substr(0,v)+a+r.substr(r.length-w))}if(s=r.match(/^00,000\.([#0]*0)$/))return c=f4(t,s[1].length),t<0?"-"+Ys(e,r,-t):_o(qI(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?wi(0,3-N.length):"")+N})+"."+wi(c,s[1].length);switch(r){case"###,##0.00":return Ys(e,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var E=_o(S0(x,0));return E!=="0"?f+E:"";case"###,###.00":return Ys(e,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return Ys(e,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+r+"|")}function XI(e,r,t){for(var n=r.length-1;r.charCodeAt(n-1)===44;)--n;return Sl(e,r.substr(0,n),t/Math.pow(10,3*(r.length-n)))}function KI(e,r,t){var n=r.replace(yS,""),a=r.length-n.length;return Sl(e,n,t*Math.pow(10,2*a))+Hn("%",a)}function NS(e,r){var t,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(r==0)return"0.0E+0";if(r<0)return"-"+NS(e,-r);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(r)*Math.LOG10E)%a;if(s<0&&(s+=a),t=(r/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!t.match(/[Ee]/)){var c=Math.floor(Math.log(r)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(c-t.length+s):t+="E+"+(c-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,x,f,g){return x+f+g.substr(0,(a+s)%a)+"."+g.substr(s)+"E"})}else t=r.toExponential(n);return e.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),e.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function Bi(e,r,t){if(e.charCodeAt(0)===40&&!r.match(kS)){var n=r.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Bi("n",n,t):"("+Bi("n",n,-t)+")"}if(r.charCodeAt(r.length-1)===44)return XI(e,r,t);if(r.indexOf("%")!==-1)return KI(e,r,t);if(r.indexOf("E")!==-1)return NS(r,t);if(r.charCodeAt(0)===36)return"$"+Bi(e,r.substr(r.charAt(1)==" "?2:1),t);var a,s,c,d,x=Math.abs(t),f=t<0?"-":"";if(r.match(/^00+$/))return f+wi(x,r.length);if(r.match(/^[#?]+$/))return a=""+t,t===0&&(a=""),a.length>r.length?a:Ka(r.substr(0,r.length-a.length))+a;if(s=r.match(_S))return VI(s,x,f);if(r.match(/^#+0+$/))return f+wi(x,r.length-r.indexOf("0"));if(s=r.match(ES))return a=(""+t).replace(/^([^\.]+)$/,"$1."+Ka(s[1])).replace(/\.$/,"."+Ka(s[1])),a=a.replace(/\.(\d*)$/,function(N,S){return"."+S+Hn("0",Ka(s[1]).length-S.length)}),r.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(r=r.replace(/^#+([0.])/,"$1"),s=r.match(/^(0*)\.(#*)$/))return f+(""+x).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=r.match(/^#{1,3},##0(\.?)$/))return f+_o(""+x);if(s=r.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Bi(e,r,-t):_o(""+t)+"."+Hn("0",s[1].length);if(s=r.match(/^#,#*,#0/))return Bi(e,r.replace(/^#,#*,/,""),t);if(s=r.match(/^([0#]+)(\\?-([0#]+))+$/))return a=z0(Bi(e,r.replace(/[\\-]/g,""),t)),c=0,z0(z0(r.replace(/\\/g,"")).replace(/[0#]/g,function(N){return c<a.length?a.charAt(c++):N==="0"?"0":""}));if(r.match(SS))return a=Bi(e,"##########",t),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var g="";if(s=r.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(s[4].length,7),d=gx(x,Math.pow(10,c)-1,!1),a=""+f,g=Sl("n",s[1],d[1]),g.charAt(g.length-1)==" "&&(g=g.substr(0,g.length-1)+"0"),a+=g+s[2]+"/"+s[3],g=xx(d[2],c),g.length<s[4].length&&(g=Ka(s[4].substr(s[4].length-g.length))+g),a+=g,a;if(s=r.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(s[1].length,s[4].length),7),d=gx(x,Math.pow(10,c)-1,!0),f+(d[0]||(d[1]?"":"0"))+" "+(d[1]?eb(d[1],c)+s[2]+"/"+s[3]+xx(d[2],c):Hn(" ",2*c+1+s[2].length+s[3].length));if(s=r.match(/^[#0?]+$/))return a=""+t,r.length<=a.length?a:Ka(r.substr(0,r.length-a.length))+a;if(s=r.match(/^([#0]+)\.([#0]+)$/)){a=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),c=a.indexOf(".");var v=r.indexOf(".")-c,w=r.length-a.length-v;return Ka(r.substr(0,v)+a+r.substr(r.length-w))}if(s=r.match(/^00,000\.([#0]*0)$/))return t<0?"-"+Bi(e,r,-t):_o(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?wi(0,3-N.length):"")+N})+"."+wi(0,s[1].length);switch(r){case"###,###":case"##,###":case"#,###":var E=_o(""+x);return E!=="0"?f+E:"";default:if(r.match(/\.[0#?]*$/))return Bi(e,r.slice(0,r.lastIndexOf(".")),t)+Ka(r.slice(r.lastIndexOf(".")))}throw new Error("unsupported format |"+r+"|")}function Sl(e,r,t){return(t|0)===t?Bi(e,r,t):Ys(e,r,t)}function YI(e){for(var r=[],t=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:t=!t;break;case 95:case 42:case 92:++n;break;case 59:r[r.length]=e.substr(a,n-a),a=n+1}if(r[r.length]=e.substr(a),t===!0)throw new Error("Format |"+e+"| unterminated string ");return r}var AS=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function au(e){for(var r=0,t="",n="";r<e.length;)switch(t=e.charAt(r)){case"G":mx(e,r)&&(r+=6),r++;break;case'"':for(;e.charCodeAt(++r)!==34&&r<e.length;);++r;break;case"\\":r+=2;break;case"_":r+=2;break;case"@":++r;break;case"B":case"b":if(e.charAt(r+1)==="1"||e.charAt(r+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(r,3).toUpperCase()==="A/P"||e.substr(r,5).toUpperCase()==="AM/PM"||e.substr(r,5).toUpperCase()==="/")return!0;++r;break;case"[":for(n=t;e.charAt(r++)!=="]"&&r<e.length;)n+=e.charAt(r);if(n.match(AS))return!0;break;case".":case"0":case"#":for(;r<e.length&&("0#?.,E+-%".indexOf(t=e.charAt(++r))>-1||t=="\\"&&e.charAt(r+1)=="-"&&"0#".indexOf(e.charAt(r+2))>-1););break;case"?":for(;e.charAt(++r)===t;);break;case"*":++r,(e.charAt(r)==" "||e.charAt(r)=="*")&&++r;break;case"(":case")":++r;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;r<e.length&&"0123456789".indexOf(e.charAt(++r))>-1;);break;case" ":++r;break;default:++r;break}return!1}function $I(e,r,t,n){for(var a=[],s="",c=0,d="",x="t",f,g,v,w="H";c<e.length;)switch(d=e.charAt(c)){case"G":if(!mx(e,c))throw new Error("unrecognized character "+d+" in "+e);a[a.length]={t:"G",v:"General"},c+=7;break;case'"':for(s="";(v=e.charCodeAt(++c))!==34&&c<e.length;)s+=String.fromCharCode(v);a[a.length]={t:"t",v:s},++c;break;case"\\":var E=e.charAt(++c),N=E==="("||E===")"?E:"t";a[a.length]={t:N,v:E},++c;break;case"_":a[a.length]={t:"t",v:" "},c+=2;break;case"@":a[a.length]={t:"T",v:r},++c;break;case"B":case"b":if(e.charAt(c+1)==="1"||e.charAt(c+1)==="2"){if(f==null&&(f=dc(r,t,e.charAt(c+1)==="2"),f==null))return"";a[a.length]={t:"X",v:e.substr(c,2)},x=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(r<0||f==null&&(f=dc(r,t),f==null))return"";for(s=d;++c<e.length&&e.charAt(c).toLowerCase()===d;)s+=d;d==="m"&&x.toLowerCase()==="h"&&(d="M"),d==="h"&&(d=w),a[a.length]={t:d,v:s},x=d;break;case"A":case"a":case"":var S={t:d,v:d};if(f==null&&(f=dc(r,t)),e.substr(c,3).toUpperCase()==="A/P"?(f!=null&&(S.v=f.H>=12?"P":"A"),S.t="T",w="h",c+=3):e.substr(c,5).toUpperCase()==="AM/PM"?(f!=null&&(S.v=f.H>=12?"PM":"AM"),S.t="T",c+=5,w="h"):e.substr(c,5).toUpperCase()==="/"?(f!=null&&(S.v=f.H>=12?"":""),S.t="T",c+=5,w="h"):(S.t="t",++c),f==null&&S.t==="T")return"";a[a.length]=S,x=d;break;case"[":for(s=d;e.charAt(c++)!=="]"&&c<e.length;)s+=e.charAt(c);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(AS)){if(f==null&&(f=dc(r,t),f==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},x=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",au(e)||(a[a.length]={t:"t",v:s}));break;case".":if(f!=null){for(s=d;++c<e.length&&(d=e.charAt(c))==="0";)s+=d;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=d;++c<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(c))>-1;)s+=d;a[a.length]={t:"n",v:s};break;case"?":for(s=d;e.charAt(++c)===d;)s+=d;a[a.length]={t:d,v:s},x=d;break;case"*":++c,(e.charAt(c)==" "||e.charAt(c)=="*")&&++c;break;case"(":case")":a[a.length]={t:n===1?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=d;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)s+=e.charAt(c);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:d,v:d},++c;break;case"$":a[a.length]={t:"t",v:"$"},++c;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(d)===-1)throw new Error("unrecognized character "+d+" in "+e);a[a.length]={t:"t",v:d},++c;break}var T=0,j=0,D;for(c=a.length-1,x="t";c>=0;--c)switch(a[c].t){case"h":case"H":a[c].t=w,x="h",T<1&&(T=1);break;case"s":(D=a[c].v.match(/\.0+$/))&&(j=Math.max(j,D[0].length-1)),T<3&&(T=3);case"d":case"y":case"M":case"e":x=a[c].t;break;case"m":x==="s"&&(a[c].t="M",T<2&&(T=2));break;case"X":break;case"Z":T<1&&a[c].v.match(/[Hh]/)&&(T=1),T<2&&a[c].v.match(/[Mm]/)&&(T=2),T<3&&a[c].v.match(/[Ss]/)&&(T=3)}switch(T){case 0:break;case 1:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M),f.M>=60&&(f.M=0,++f.H);break;case 2:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M);break}var I="",L;for(c=0;c<a.length;++c)switch(a[c].t){case"t":case"T":case" ":case"D":break;case"X":a[c].v="",a[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[c].v=UI(a[c].t.charCodeAt(0),a[c].v,f,j),a[c].t="t";break;case"n":case"?":for(L=c+1;a[L]!=null&&((d=a[L].t)==="?"||d==="D"||(d===" "||d==="t")&&a[L+1]!=null&&(a[L+1].t==="?"||a[L+1].t==="t"&&a[L+1].v==="/")||a[c].t==="("&&(d===" "||d==="n"||d===")")||d==="t"&&(a[L].v==="/"||a[L].v===" "&&a[L+1]!=null&&a[L+1].t=="?"));)a[c].v+=a[L].v,a[L]={v:"",t:";"},++L;I+=a[c].v,c=L-1;break;case"G":a[c].t="t",a[c].v=_c(r,t);break}var V="",X,M;if(I.length>0){I.charCodeAt(0)==40?(X=r<0&&I.charCodeAt(0)===45?-r:r,M=Sl("n",I,X)):(X=r<0&&n>1?-r:r,M=Sl("n",I,X),X<0&&a[0]&&a[0].t=="t"&&(M=M.substr(1),a[0].v="-"+a[0].v)),L=M.length-1;var W=a.length;for(c=0;c<a.length;++c)if(a[c]!=null&&a[c].t!="t"&&a[c].v.indexOf(".")>-1){W=c;break}var z=a.length;if(W===a.length&&M.indexOf("E")===-1){for(c=a.length-1;c>=0;--c)a[c]==null||"n?".indexOf(a[c].t)===-1||(L>=a[c].v.length-1?(L-=a[c].v.length,a[c].v=M.substr(L+1,a[c].v.length)):L<0?a[c].v="":(a[c].v=M.substr(0,L+1),L=-1),a[c].t="t",z=c);L>=0&&z<a.length&&(a[z].v=M.substr(0,L+1)+a[z].v)}else if(W!==a.length&&M.indexOf("E")===-1){for(L=M.indexOf(".")-1,c=W;c>=0;--c)if(!(a[c]==null||"n?".indexOf(a[c].t)===-1)){for(g=a[c].v.indexOf(".")>-1&&c===W?a[c].v.indexOf(".")-1:a[c].v.length-1,V=a[c].v.substr(g+1);g>=0;--g)L>=0&&(a[c].v.charAt(g)==="0"||a[c].v.charAt(g)==="#")&&(V=M.charAt(L--)+V);a[c].v=V,a[c].t="t",z=c}for(L>=0&&z<a.length&&(a[z].v=M.substr(0,L+1)+a[z].v),L=M.indexOf(".")+1,c=W;c<a.length;++c)if(!(a[c]==null||"n?(".indexOf(a[c].t)===-1&&c!==W)){for(g=a[c].v.indexOf(".")>-1&&c===W?a[c].v.indexOf(".")+1:0,V=a[c].v.substr(0,g);g<a[c].v.length;++g)L<M.length&&(V+=M.charAt(L++));a[c].v=V,a[c].t="t",z=c}}}for(c=0;c<a.length;++c)a[c]!=null&&"n?".indexOf(a[c].t)>-1&&(X=n>1&&r<0&&c>0&&a[c-1].v==="-"?-r:r,a[c].v=Sl(a[c].t,a[c].v,X),a[c].t="t");var ae="";for(c=0;c!==a.length;++c)a[c]!=null&&(ae+=a[c].v);return ae}var h4=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function x4(e,r){if(r==null)return!1;var t=parseFloat(r[2]);switch(r[1]){case"=":if(e==t)return!0;break;case">":if(e>t)return!0;break;case"<":if(e<t)return!0;break;case"<>":if(e!=t)return!0;break;case">=":if(e>=t)return!0;break;case"<=":if(e<=t)return!0;break}return!1}function ZI(e,r){var t=YI(e),n=t.length,a=t[n-1].indexOf("@");if(n<4&&a>-1&&--n,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof r!="number")return[4,t.length===4||a>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=a>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=a>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=a>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=r>0?t[0]:r<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[n,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var c=t[0].match(h4),d=t[1].match(h4);return x4(r,c)?[n,t[0]]:x4(r,d)?[n,t[1]]:[n,t[c!=null&&d!=null?2:1]]}return[n,s]}function ni(e,r,t){t==null&&(t={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&t.dateNF?n=t.dateNF:n=e;break;case"number":e==14&&t.dateNF?n=t.dateNF:n=(t.table!=null?t.table:nr)[e],n==null&&(n=t.table&&t.table[u4[e]]||nr[u4[e]]),n==null&&(n=II[e]||"General");break}if(mx(n,0))return _c(r,t);r instanceof Date&&(r=vS(r,t.date1904));var a=ZI(n,r);if(mx(a[1]))return _c(r,t);if(r===!0)r="TRUE";else if(r===!1)r="FALSE";else if(r===""||r==null)return"";return $I(a[1],r,t,a[0])}function Nl(e,r){if(typeof r!="number"){r=+r||-1;for(var t=0;t<392;++t){if(nr[t]==null){r<0&&(r=t);continue}if(nr[t]==e){r=t;break}}r<0&&(r=391)}return nr[r]=e,r}function Ux(e){for(var r=0;r!=392;++r)e[r]!==void 0&&Nl(e[r],r)}function su(){nr=RI()}var JI={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},TS=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function QI(e){var r=typeof e=="number"?nr[e]:e;return r=r.replace(TS,"(\\d+)"),new RegExp("^"+r+"$")}function e7(e,r,t){var n=-1,a=-1,s=-1,c=-1,d=-1,x=-1;(r.match(TS)||[]).forEach(function(v,w){var E=parseInt(t[w+1],10);switch(v.toLowerCase().charAt(0)){case"y":n=E;break;case"d":s=E;break;case"h":c=E;break;case"s":x=E;break;case"m":c>=0?d=E:a=E;break}}),x>=0&&d==-1&&a>=0&&(d=a,a=-1);var f=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);f.length==7&&(f="0"+f),f.length==8&&(f="20"+f);var g=("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(x>=0?x:0)).slice(-2);return c==-1&&d==-1&&x==-1?f:n==-1&&a==-1&&s==-1?g:f+"T"+g}var t7=(function(){var e={};e.version="1.2.0";function r(){for(var M=0,W=new Array(256),z=0;z!=256;++z)M=z,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,W[z]=M;return typeof Int32Array<"u"?new Int32Array(W):W}var t=r();function n(M){var W=0,z=0,ae=0,Z=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ae=0;ae!=256;++ae)Z[ae]=M[ae];for(ae=0;ae!=256;++ae)for(z=M[ae],W=256+ae;W<4096;W+=256)z=Z[W]=z>>>8^M[z&255];var H=[];for(ae=1;ae!=16;++ae)H[ae-1]=typeof Int32Array<"u"?Z.subarray(ae*256,ae*256+256):Z.slice(ae*256,ae*256+256);return H}var a=n(t),s=a[0],c=a[1],d=a[2],x=a[3],f=a[4],g=a[5],v=a[6],w=a[7],E=a[8],N=a[9],S=a[10],T=a[11],j=a[12],D=a[13],I=a[14];function L(M,W){for(var z=W^-1,ae=0,Z=M.length;ae<Z;)z=z>>>8^t[(z^M.charCodeAt(ae++))&255];return~z}function V(M,W){for(var z=W^-1,ae=M.length-15,Z=0;Z<ae;)z=I[M[Z++]^z&255]^D[M[Z++]^z>>8&255]^j[M[Z++]^z>>16&255]^T[M[Z++]^z>>>24]^S[M[Z++]]^N[M[Z++]]^E[M[Z++]]^w[M[Z++]]^v[M[Z++]]^g[M[Z++]]^f[M[Z++]]^x[M[Z++]]^d[M[Z++]]^c[M[Z++]]^s[M[Z++]]^t[M[Z++]];for(ae+=15;Z<ae;)z=z>>>8^t[(z^M[Z++])&255];return~z}function X(M,W){for(var z=W^-1,ae=0,Z=M.length,H=0,he=0;ae<Z;)H=M.charCodeAt(ae++),H<128?z=z>>>8^t[(z^H)&255]:H<2048?(z=z>>>8^t[(z^(192|H>>6&31))&255],z=z>>>8^t[(z^(128|H&63))&255]):H>=55296&&H<57344?(H=(H&1023)+64,he=M.charCodeAt(ae++)&1023,z=z>>>8^t[(z^(240|H>>8&7))&255],z=z>>>8^t[(z^(128|H>>2&63))&255],z=z>>>8^t[(z^(128|he>>6&15|(H&3)<<4))&255],z=z>>>8^t[(z^(128|he&63))&255]):(z=z>>>8^t[(z^(224|H>>12&15))&255],z=z>>>8^t[(z^(128|H>>6&63))&255],z=z>>>8^t[(z^(128|H&63))&255]);return~z}return e.table=t,e.bstr=L,e.buf=V,e.str=X,e})(),Yt=(function(){var r={};r.version="1.2.1";function t(ee,fe){for(var pe=ee.split("/"),be=fe.split("/"),we=0,Ee=0,Xe=Math.min(pe.length,be.length);we<Xe;++we){if(Ee=pe[we].length-be[we].length)return Ee;if(pe[we]!=be[we])return pe[we]<be[we]?-1:1}return pe.length-be.length}function n(ee){if(ee.charAt(ee.length-1)=="/")return ee.slice(0,-1).indexOf("/")===-1?ee:n(ee.slice(0,-1));var fe=ee.lastIndexOf("/");return fe===-1?ee:ee.slice(0,fe+1)}function a(ee){if(ee.charAt(ee.length-1)=="/")return a(ee.slice(0,-1));var fe=ee.lastIndexOf("/");return fe===-1?ee:ee.slice(fe+1)}function s(ee,fe){typeof fe=="string"&&(fe=new Date(fe));var pe=fe.getHours();pe=pe<<6|fe.getMinutes(),pe=pe<<5|fe.getSeconds()>>>1,ee.write_shift(2,pe);var be=fe.getFullYear()-1980;be=be<<4|fe.getMonth()+1,be=be<<5|fe.getDate(),ee.write_shift(2,be)}function c(ee){var fe=ee.read_shift(2)&65535,pe=ee.read_shift(2)&65535,be=new Date,we=pe&31;pe>>>=5;var Ee=pe&15;pe>>>=4,be.setMilliseconds(0),be.setFullYear(pe+1980),be.setMonth(Ee-1),be.setDate(we);var Xe=fe&31;fe>>>=5;var ot=fe&63;return fe>>>=6,be.setHours(fe),be.setMinutes(ot),be.setSeconds(Xe<<1),be}function d(ee){Oa(ee,0);for(var fe={},pe=0;ee.l<=ee.length-4;){var be=ee.read_shift(2),we=ee.read_shift(2),Ee=ee.l+we,Xe={};be===21589&&(pe=ee.read_shift(1),pe&1&&(Xe.mtime=ee.read_shift(4)),we>5&&(pe&2&&(Xe.atime=ee.read_shift(4)),pe&4&&(Xe.ctime=ee.read_shift(4))),Xe.mtime&&(Xe.mt=new Date(Xe.mtime*1e3))),ee.l=Ee,fe[be]=Xe}return fe}var x;function f(){return x||(x={})}function g(ee,fe){if(ee[0]==80&&ee[1]==75)return Xr(ee,fe);if((ee[0]|32)==109&&(ee[1]|32)==105)return Dt(ee,fe);if(ee.length<512)throw new Error("CFB file size "+ee.length+" < 512");var pe=3,be=512,we=0,Ee=0,Xe=0,ot=0,Ve=0,et=[],Je=ee.slice(0,512);Oa(Je,0);var gt=v(Je);switch(pe=gt[0],pe){case 3:be=512;break;case 4:be=4096;break;case 0:if(gt[1]==0)return Xr(ee,fe);default:throw new Error("Major Version: Expected 3 or 4 saw "+pe)}be!==512&&(Je=ee.slice(0,be),Oa(Je,28));var yt=ee.slice(0,be);w(Je,pe);var Et=Je.read_shift(4,"i");if(pe===3&&Et!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Et);Je.l+=4,Xe=Je.read_shift(4,"i"),Je.l+=4,Je.chk("00100000","Mini Stream Cutoff Size: "),ot=Je.read_shift(4,"i"),we=Je.read_shift(4,"i"),Ve=Je.read_shift(4,"i"),Ee=Je.read_shift(4,"i");for(var kt=-1,Ot=0;Ot<109&&(kt=Je.read_shift(4,"i"),!(kt<0));++Ot)et[Ot]=kt;var Ut=E(ee,be);T(Ve,Ee,Ut,be,et);var ct=D(Ut,Xe,et,be);ct[Xe].name="!Directory",we>0&&ot!==he&&(ct[ot].name="!MiniFAT"),ct[et[0]].name="!FAT",ct.fat_addrs=et,ct.ssz=be;var Fr={},pt=[],Sr=[],ar=[];I(Xe,ct,Ut,pt,we,Fr,Sr,ot),N(Sr,ar,pt),pt.shift();var dr={FileIndex:Sr,FullPaths:ar};return fe&&fe.raw&&(dr.raw={header:yt,sectors:Ut}),dr}function v(ee){if(ee[ee.l]==80&&ee[ee.l+1]==75)return[0,0];ee.chk(q,"Header Signature: "),ee.l+=16;var fe=ee.read_shift(2,"u");return[ee.read_shift(2,"u"),fe]}function w(ee,fe){var pe=9;switch(ee.l+=2,pe=ee.read_shift(2)){case 9:if(fe!=3)throw new Error("Sector Shift: Expected 9 saw "+pe);break;case 12:if(fe!=4)throw new Error("Sector Shift: Expected 12 saw "+pe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+pe)}ee.chk("0600","Mini Sector Shift: "),ee.chk("000000000000","Reserved: ")}function E(ee,fe){for(var pe=Math.ceil(ee.length/fe)-1,be=[],we=1;we<pe;++we)be[we-1]=ee.slice(we*fe,(we+1)*fe);return be[pe-1]=ee.slice(pe*fe),be}function N(ee,fe,pe){for(var be=0,we=0,Ee=0,Xe=0,ot=0,Ve=pe.length,et=[],Je=[];be<Ve;++be)et[be]=Je[be]=be,fe[be]=pe[be];for(;ot<Je.length;++ot)be=Je[ot],we=ee[be].L,Ee=ee[be].R,Xe=ee[be].C,et[be]===be&&(we!==-1&&et[we]!==we&&(et[be]=et[we]),Ee!==-1&&et[Ee]!==Ee&&(et[be]=et[Ee])),Xe!==-1&&(et[Xe]=be),we!==-1&&be!=et[be]&&(et[we]=et[be],Je.lastIndexOf(we)<ot&&Je.push(we)),Ee!==-1&&be!=et[be]&&(et[Ee]=et[be],Je.lastIndexOf(Ee)<ot&&Je.push(Ee));for(be=1;be<Ve;++be)et[be]===be&&(Ee!==-1&&et[Ee]!==Ee?et[be]=et[Ee]:we!==-1&&et[we]!==we&&(et[be]=et[we]));for(be=1;be<Ve;++be)if(ee[be].type!==0){if(ot=be,ot!=et[ot])do ot=et[ot],fe[be]=fe[ot]+"/"+fe[be];while(ot!==0&&et[ot]!==-1&&ot!=et[ot]);et[be]=-1}for(fe[0]+="/",be=1;be<Ve;++be)ee[be].type!==2&&(fe[be]+="/")}function S(ee,fe,pe){for(var be=ee.start,we=ee.size,Ee=[],Xe=be;pe&&we>0&&Xe>=0;)Ee.push(fe.slice(Xe*H,Xe*H+H)),we-=H,Xe=oc(pe,Xe*4);return Ee.length===0?ut(0):ya(Ee).slice(0,ee.size)}function T(ee,fe,pe,be,we){var Ee=he;if(ee===he){if(fe!==0)throw new Error("DIFAT chain shorter than expected")}else if(ee!==-1){var Xe=pe[ee],ot=(be>>>2)-1;if(!Xe)return;for(var Ve=0;Ve<ot&&(Ee=oc(Xe,Ve*4))!==he;++Ve)we.push(Ee);T(oc(Xe,be-4),fe-1,pe,be,we)}}function j(ee,fe,pe,be,we){var Ee=[],Xe=[];we||(we=[]);var ot=be-1,Ve=0,et=0;for(Ve=fe;Ve>=0;){we[Ve]=!0,Ee[Ee.length]=Ve,Xe.push(ee[Ve]);var Je=pe[Math.floor(Ve*4/be)];if(et=Ve*4&ot,be<4+et)throw new Error("FAT boundary crossed: "+Ve+" 4 "+be);if(!ee[Je])break;Ve=oc(ee[Je],et)}return{nodes:Ee,data:N4([Xe])}}function D(ee,fe,pe,be){var we=ee.length,Ee=[],Xe=[],ot=[],Ve=[],et=be-1,Je=0,gt=0,yt=0,Et=0;for(Je=0;Je<we;++Je)if(ot=[],yt=Je+fe,yt>=we&&(yt-=we),!Xe[yt]){Ve=[];var kt=[];for(gt=yt;gt>=0;){kt[gt]=!0,Xe[gt]=!0,ot[ot.length]=gt,Ve.push(ee[gt]);var Ot=pe[Math.floor(gt*4/be)];if(Et=gt*4&et,be<4+Et)throw new Error("FAT boundary crossed: "+gt+" 4 "+be);if(!ee[Ot]||(gt=oc(ee[Ot],Et),kt[gt]))break}Ee[yt]={nodes:ot,data:N4([Ve])}}return Ee}function I(ee,fe,pe,be,we,Ee,Xe,ot){for(var Ve=0,et=be.length?2:0,Je=fe[ee].data,gt=0,yt=0,Et;gt<Je.length;gt+=128){var kt=Je.slice(gt,gt+128);Oa(kt,64),yt=kt.read_shift(2),Et=ob(kt,0,yt-et),be.push(Et);var Ot={name:Et,type:kt.read_shift(1),color:kt.read_shift(1),L:kt.read_shift(4,"i"),R:kt.read_shift(4,"i"),C:kt.read_shift(4,"i"),clsid:kt.read_shift(16),state:kt.read_shift(4,"i"),start:0,size:0},Ut=kt.read_shift(2)+kt.read_shift(2)+kt.read_shift(2)+kt.read_shift(2);Ut!==0&&(Ot.ct=L(kt,kt.l-8));var ct=kt.read_shift(2)+kt.read_shift(2)+kt.read_shift(2)+kt.read_shift(2);ct!==0&&(Ot.mt=L(kt,kt.l-8)),Ot.start=kt.read_shift(4,"i"),Ot.size=kt.read_shift(4,"i"),Ot.size<0&&Ot.start<0&&(Ot.size=Ot.type=0,Ot.start=he,Ot.name=""),Ot.type===5?(Ve=Ot.start,we>0&&Ve!==he&&(fe[Ve].name="!StreamData")):Ot.size>=4096?(Ot.storage="fat",fe[Ot.start]===void 0&&(fe[Ot.start]=j(pe,Ot.start,fe.fat_addrs,fe.ssz)),fe[Ot.start].name=Ot.name,Ot.content=fe[Ot.start].data.slice(0,Ot.size)):(Ot.storage="minifat",Ot.size<0?Ot.size=0:Ve!==he&&Ot.start!==he&&fe[Ve]&&(Ot.content=S(Ot,fe[Ve].data,(fe[ot]||{}).data))),Ot.content&&Oa(Ot.content,0),Ee[Et]=Ot,Xe.push(Ot)}}function L(ee,fe){return new Date((Cs(ee,fe+4)/1e7*Math.pow(2,32)+Cs(ee,fe)/1e7-11644473600)*1e3)}function V(ee,fe){return f(),g(x.readFileSync(ee),fe)}function X(ee,fe){var pe=fe&&fe.type;switch(pe||Ar&&Buffer.isBuffer(ee)&&(pe="buffer"),pe||"base64"){case"file":return V(ee,fe);case"base64":return g(Rs(Ms(ee)),fe);case"binary":return g(Rs(ee),fe)}return g(ee,fe)}function M(ee,fe){var pe=fe||{},be=pe.root||"Root Entry";if(ee.FullPaths||(ee.FullPaths=[]),ee.FileIndex||(ee.FileIndex=[]),ee.FullPaths.length!==ee.FileIndex.length)throw new Error("inconsistent CFB structure");ee.FullPaths.length===0&&(ee.FullPaths[0]=be+"/",ee.FileIndex[0]={name:be,type:5}),pe.CLSID&&(ee.FileIndex[0].clsid=pe.CLSID),W(ee)}function W(ee){var fe="Sh33tJ5";if(!Yt.find(ee,"/"+fe)){var pe=ut(4);pe[0]=55,pe[1]=pe[3]=50,pe[2]=54,ee.FileIndex.push({name:fe,type:2,content:pe,size:4,L:69,R:69,C:69}),ee.FullPaths.push(ee.FullPaths[0]+fe),z(ee)}}function z(ee,fe){M(ee);for(var pe=!1,be=!1,we=ee.FullPaths.length-1;we>=0;--we){var Ee=ee.FileIndex[we];switch(Ee.type){case 0:be?pe=!0:(ee.FileIndex.pop(),ee.FullPaths.pop());break;case 1:case 2:case 5:be=!0,isNaN(Ee.R*Ee.L*Ee.C)&&(pe=!0),Ee.R>-1&&Ee.L>-1&&Ee.R==Ee.L&&(pe=!0);break;default:pe=!0;break}}if(!(!pe&&!fe)){var Xe=new Date(1987,1,19),ot=0,Ve=Object.create?Object.create(null):{},et=[];for(we=0;we<ee.FullPaths.length;++we)Ve[ee.FullPaths[we]]=!0,ee.FileIndex[we].type!==0&&et.push([ee.FullPaths[we],ee.FileIndex[we]]);for(we=0;we<et.length;++we){var Je=n(et[we][0]);be=Ve[Je],be||(et.push([Je,{name:a(Je).replace("/",""),type:1,clsid:ve,ct:Xe,mt:Xe,content:null}]),Ve[Je]=!0)}for(et.sort(function(Et,kt){return t(Et[0],kt[0])}),ee.FullPaths=[],ee.FileIndex=[],we=0;we<et.length;++we)ee.FullPaths[we]=et[we][0],ee.FileIndex[we]=et[we][1];for(we=0;we<et.length;++we){var gt=ee.FileIndex[we],yt=ee.FullPaths[we];if(gt.name=a(yt).replace("/",""),gt.L=gt.R=gt.C=-(gt.color=1),gt.size=gt.content?gt.content.length:0,gt.start=0,gt.clsid=gt.clsid||ve,we===0)gt.C=et.length>1?1:-1,gt.size=0,gt.type=5;else if(yt.slice(-1)=="/"){for(ot=we+1;ot<et.length&&n(ee.FullPaths[ot])!=yt;++ot);for(gt.C=ot>=et.length?-1:ot,ot=we+1;ot<et.length&&n(ee.FullPaths[ot])!=n(yt);++ot);gt.R=ot>=et.length?-1:ot,gt.type=1}else n(ee.FullPaths[we+1]||"")==n(yt)&&(gt.R=we+1),gt.type=2}}}function ae(ee,fe){var pe=fe||{};if(pe.fileType=="mad")return Pt(ee,pe);if(z(ee),pe.fileType==="zip")return Cr(ee,pe);var be=(function(Et){for(var kt=0,Ot=0,Ut=0;Ut<Et.FileIndex.length;++Ut){var ct=Et.FileIndex[Ut];if(ct.content){var Fr=ct.content.length;Fr>0&&(Fr<4096?kt+=Fr+63>>6:Ot+=Fr+511>>9)}}for(var pt=Et.FullPaths.length+3>>2,Sr=kt+7>>3,ar=kt+127>>7,dr=Sr+Ot+pt+ar,or=dr+127>>7,xr=or<=109?0:Math.ceil((or-109)/127);dr+or+xr+127>>7>or;)xr=++or<=109?0:Math.ceil((or-109)/127);var ma=[1,xr,or,ar,pt,Ot,kt,0];return Et.FileIndex[0].size=kt<<6,ma[7]=(Et.FileIndex[0].start=ma[0]+ma[1]+ma[2]+ma[3]+ma[4]+ma[5])+(ma[6]+7>>3),ma})(ee),we=ut(be[7]<<9),Ee=0,Xe=0;{for(Ee=0;Ee<8;++Ee)we.write_shift(1,se[Ee]);for(Ee=0;Ee<8;++Ee)we.write_shift(2,0);for(we.write_shift(2,62),we.write_shift(2,3),we.write_shift(2,65534),we.write_shift(2,9),we.write_shift(2,6),Ee=0;Ee<3;++Ee)we.write_shift(2,0);for(we.write_shift(4,0),we.write_shift(4,be[2]),we.write_shift(4,be[0]+be[1]+be[2]+be[3]-1),we.write_shift(4,0),we.write_shift(4,4096),we.write_shift(4,be[3]?be[0]+be[1]+be[2]-1:he),we.write_shift(4,be[3]),we.write_shift(-4,be[1]?be[0]-1:he),we.write_shift(4,be[1]),Ee=0;Ee<109;++Ee)we.write_shift(-4,Ee<be[2]?be[1]+Ee:-1)}if(be[1])for(Xe=0;Xe<be[1];++Xe){for(;Ee<236+Xe*127;++Ee)we.write_shift(-4,Ee<be[2]?be[1]+Ee:-1);we.write_shift(-4,Xe===be[1]-1?he:Xe+1)}var ot=function(Et){for(Xe+=Et;Ee<Xe-1;++Ee)we.write_shift(-4,Ee+1);Et&&(++Ee,we.write_shift(-4,he))};for(Xe=Ee=0,Xe+=be[1];Ee<Xe;++Ee)we.write_shift(-4,le.DIFSECT);for(Xe+=be[2];Ee<Xe;++Ee)we.write_shift(-4,le.FATSECT);ot(be[3]),ot(be[4]);for(var Ve=0,et=0,Je=ee.FileIndex[0];Ve<ee.FileIndex.length;++Ve)Je=ee.FileIndex[Ve],Je.content&&(et=Je.content.length,!(et<4096)&&(Je.start=Xe,ot(et+511>>9)));for(ot(be[6]+7>>3);we.l&511;)we.write_shift(-4,le.ENDOFCHAIN);for(Xe=Ee=0,Ve=0;Ve<ee.FileIndex.length;++Ve)Je=ee.FileIndex[Ve],Je.content&&(et=Je.content.length,!(!et||et>=4096)&&(Je.start=Xe,ot(et+63>>6)));for(;we.l&511;)we.write_shift(-4,le.ENDOFCHAIN);for(Ee=0;Ee<be[4]<<2;++Ee){var gt=ee.FullPaths[Ee];if(!gt||gt.length===0){for(Ve=0;Ve<17;++Ve)we.write_shift(4,0);for(Ve=0;Ve<3;++Ve)we.write_shift(4,-1);for(Ve=0;Ve<12;++Ve)we.write_shift(4,0);continue}Je=ee.FileIndex[Ee],Ee===0&&(Je.start=Je.size?Je.start-1:he);var yt=Ee===0&&pe.root||Je.name;if(et=2*(yt.length+1),we.write_shift(64,yt,"utf16le"),we.write_shift(2,et),we.write_shift(1,Je.type),we.write_shift(1,Je.color),we.write_shift(-4,Je.L),we.write_shift(-4,Je.R),we.write_shift(-4,Je.C),Je.clsid)we.write_shift(16,Je.clsid,"hex");else for(Ve=0;Ve<4;++Ve)we.write_shift(4,0);we.write_shift(4,Je.state||0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,Je.start),we.write_shift(4,Je.size),we.write_shift(4,0)}for(Ee=1;Ee<ee.FileIndex.length;++Ee)if(Je=ee.FileIndex[Ee],Je.size>=4096)if(we.l=Je.start+1<<9,Ar&&Buffer.isBuffer(Je.content))Je.content.copy(we,we.l,0,Je.size),we.l+=Je.size+511&-512;else{for(Ve=0;Ve<Je.size;++Ve)we.write_shift(1,Je.content[Ve]);for(;Ve&511;++Ve)we.write_shift(1,0)}for(Ee=1;Ee<ee.FileIndex.length;++Ee)if(Je=ee.FileIndex[Ee],Je.size>0&&Je.size<4096)if(Ar&&Buffer.isBuffer(Je.content))Je.content.copy(we,we.l,0,Je.size),we.l+=Je.size+63&-64;else{for(Ve=0;Ve<Je.size;++Ve)we.write_shift(1,Je.content[Ve]);for(;Ve&63;++Ve)we.write_shift(1,0)}if(Ar)we.l=we.length;else for(;we.l<we.length;)we.write_shift(1,0);return we}function Z(ee,fe){var pe=ee.FullPaths.map(function(Ve){return Ve.toUpperCase()}),be=pe.map(function(Ve){var et=Ve.split("/");return et[et.length-(Ve.slice(-1)=="/"?2:1)]}),we=!1;fe.charCodeAt(0)===47?(we=!0,fe=pe[0].slice(0,-1)+fe):we=fe.indexOf("/")!==-1;var Ee=fe.toUpperCase(),Xe=we===!0?pe.indexOf(Ee):be.indexOf(Ee);if(Xe!==-1)return ee.FileIndex[Xe];var ot=!Ee.match(xd);for(Ee=Ee.replace(Za,""),ot&&(Ee=Ee.replace(xd,"!")),Xe=0;Xe<pe.length;++Xe)if((ot?pe[Xe].replace(xd,"!"):pe[Xe]).replace(Za,"")==Ee||(ot?be[Xe].replace(xd,"!"):be[Xe]).replace(Za,"")==Ee)return ee.FileIndex[Xe];return null}var H=64,he=-2,q="d0cf11e0a1b11ae1",se=[208,207,17,224,161,177,26,225],ve="00000000000000000000000000000000",le={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:he,FREESECT:-1,HEADER_SIGNATURE:q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ve,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ge(ee,fe,pe){f();var be=ae(ee,pe);x.writeFileSync(fe,be)}function ie(ee){for(var fe=new Array(ee.length),pe=0;pe<ee.length;++pe)fe[pe]=String.fromCharCode(ee[pe]);return fe.join("")}function Le(ee,fe){var pe=ae(ee,fe);switch(fe&&fe.type||"buffer"){case"file":return f(),x.writeFileSync(fe.filename,pe),pe;case"binary":return typeof pe=="string"?pe:ie(pe);case"base64":return Pd(typeof pe=="string"?pe:ie(pe));case"buffer":if(Ar)return Buffer.isBuffer(pe)?pe:Ol(pe);case"array":return typeof pe=="string"?Rs(pe):pe}return pe}var Q;function B(ee){try{var fe=ee.InflateRaw,pe=new fe;if(pe._processChunk(new Uint8Array([3,0]),pe._finishFlushFlag),pe.bytesRead)Q=ee;else throw new Error("zlib does not expose bytesRead")}catch(be){console.error("cannot use native zlib: "+(be.message||be))}}function te(ee,fe){if(!Q)return mr(ee,fe);var pe=Q.InflateRaw,be=new pe,we=be._processChunk(ee.slice(ee.l),be._finishFlushFlag);return ee.l+=be.bytesRead,we}function U(ee){return Q?Q.deflateRawSync(ee):Ct(ee)}var P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ue=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Re=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function De(ee){var fe=(ee<<1|ee<<11)&139536|(ee<<5|ee<<15)&558144;return(fe>>16|fe>>8|fe)&255}for(var Ne=typeof Uint8Array<"u",Ke=Ne?new Uint8Array(256):[],ye=0;ye<256;++ye)Ke[ye]=De(ye);function me(ee,fe){var pe=Ke[ee&255];return fe<=8?pe>>>8-fe:(pe=pe<<8|Ke[ee>>8&255],fe<=16?pe>>>16-fe:(pe=pe<<8|Ke[ee>>16&255],pe>>>24-fe))}function Ce(ee,fe){var pe=fe&7,be=fe>>>3;return(ee[be]|(pe<=6?0:ee[be+1]<<8))>>>pe&3}function G(ee,fe){var pe=fe&7,be=fe>>>3;return(ee[be]|(pe<=5?0:ee[be+1]<<8))>>>pe&7}function Me(ee,fe){var pe=fe&7,be=fe>>>3;return(ee[be]|(pe<=4?0:ee[be+1]<<8))>>>pe&15}function Ae(ee,fe){var pe=fe&7,be=fe>>>3;return(ee[be]|(pe<=3?0:ee[be+1]<<8))>>>pe&31}function oe(ee,fe){var pe=fe&7,be=fe>>>3;return(ee[be]|(pe<=1?0:ee[be+1]<<8))>>>pe&127}function de(ee,fe,pe){var be=fe&7,we=fe>>>3,Ee=(1<<pe)-1,Xe=ee[we]>>>be;return pe<8-be||(Xe|=ee[we+1]<<8-be,pe<16-be)||(Xe|=ee[we+2]<<16-be,pe<24-be)||(Xe|=ee[we+3]<<24-be),Xe&Ee}function Se(ee,fe,pe){var be=fe&7,we=fe>>>3;return be<=5?ee[we]|=(pe&7)<<be:(ee[we]|=pe<<be&255,ee[we+1]=(pe&7)>>8-be),fe+3}function lt(ee,fe,pe){var be=fe&7,we=fe>>>3;return pe=(pe&1)<<be,ee[we]|=pe,fe+1}function Ue(ee,fe,pe){var be=fe&7,we=fe>>>3;return pe<<=be,ee[we]|=pe&255,pe>>>=8,ee[we+1]=pe,fe+8}function He(ee,fe,pe){var be=fe&7,we=fe>>>3;return pe<<=be,ee[we]|=pe&255,pe>>>=8,ee[we+1]=pe&255,ee[we+2]=pe>>>8,fe+16}function Oe(ee,fe){var pe=ee.length,be=2*pe>fe?2*pe:fe+5,we=0;if(pe>=fe)return ee;if(Ar){var Ee=l4(be);if(ee.copy)ee.copy(Ee);else for(;we<ee.length;++we)Ee[we]=ee[we];return Ee}else if(Ne){var Xe=new Uint8Array(be);if(Xe.set)Xe.set(ee);else for(;we<pe;++we)Xe[we]=ee[we];return Xe}return ee.length=be,ee}function We(ee){for(var fe=new Array(ee),pe=0;pe<ee;++pe)fe[pe]=0;return fe}function rt(ee,fe,pe){var be=1,we=0,Ee=0,Xe=0,ot=0,Ve=ee.length,et=Ne?new Uint16Array(32):We(32);for(Ee=0;Ee<32;++Ee)et[Ee]=0;for(Ee=Ve;Ee<pe;++Ee)ee[Ee]=0;Ve=ee.length;var Je=Ne?new Uint16Array(Ve):We(Ve);for(Ee=0;Ee<Ve;++Ee)et[we=ee[Ee]]++,be<we&&(be=we),Je[Ee]=0;for(et[0]=0,Ee=1;Ee<=be;++Ee)et[Ee+16]=ot=ot+et[Ee-1]<<1;for(Ee=0;Ee<Ve;++Ee)ot=ee[Ee],ot!=0&&(Je[Ee]=et[ot+16]++);var gt=0;for(Ee=0;Ee<Ve;++Ee)if(gt=ee[Ee],gt!=0)for(ot=me(Je[Ee],be)>>be-gt,Xe=(1<<be+4-gt)-1;Xe>=0;--Xe)fe[ot|Xe<<gt]=gt&15|Ee<<4;return be}var ht=Ne?new Uint16Array(512):We(512),Pe=Ne?new Uint16Array(32):We(32);if(!Ne){for(var Ye=0;Ye<512;++Ye)ht[Ye]=0;for(Ye=0;Ye<32;++Ye)Pe[Ye]=0}(function(){for(var ee=[],fe=0;fe<32;fe++)ee.push(5);rt(ee,Pe,32);var pe=[];for(fe=0;fe<=143;fe++)pe.push(8);for(;fe<=255;fe++)pe.push(9);for(;fe<=279;fe++)pe.push(7);for(;fe<=287;fe++)pe.push(8);rt(pe,ht,288)})();var Tt=(function(){for(var fe=Ne?new Uint8Array(32768):[],pe=0,be=0;pe<Re.length-1;++pe)for(;be<Re[pe+1];++be)fe[be]=pe;for(;be<32768;++be)fe[be]=29;var we=Ne?new Uint8Array(259):[];for(pe=0,be=0;pe<ue.length-1;++pe)for(;be<ue[pe+1];++be)we[be]=pe;function Ee(ot,Ve){for(var et=0;et<ot.length;){var Je=Math.min(65535,ot.length-et),gt=et+Je==ot.length;for(Ve.write_shift(1,+gt),Ve.write_shift(2,Je),Ve.write_shift(2,~Je&65535);Je-- >0;)Ve[Ve.l++]=ot[et++]}return Ve.l}function Xe(ot,Ve){for(var et=0,Je=0,gt=Ne?new Uint16Array(32768):[];Je<ot.length;){var yt=Math.min(65535,ot.length-Je);if(yt<10){for(et=Se(Ve,et,+(Je+yt==ot.length)),et&7&&(et+=8-(et&7)),Ve.l=et/8|0,Ve.write_shift(2,yt),Ve.write_shift(2,~yt&65535);yt-- >0;)Ve[Ve.l++]=ot[Je++];et=Ve.l*8;continue}et=Se(Ve,et,+(Je+yt==ot.length)+2);for(var Et=0;yt-- >0;){var kt=ot[Je];Et=(Et<<5^kt)&32767;var Ot=-1,Ut=0;if((Ot=gt[Et])&&(Ot|=Je&-32768,Ot>Je&&(Ot-=32768),Ot<Je))for(;ot[Ot+Ut]==ot[Je+Ut]&&Ut<250;)++Ut;if(Ut>2){kt=we[Ut],kt<=22?et=Ue(Ve,et,Ke[kt+1]>>1)-1:(Ue(Ve,et,3),et+=5,Ue(Ve,et,Ke[kt-23]>>5),et+=3);var ct=kt<8?0:kt-4>>2;ct>0&&(He(Ve,et,Ut-ue[kt]),et+=ct),kt=fe[Je-Ot],et=Ue(Ve,et,Ke[kt]>>3),et-=3;var Fr=kt<4?0:kt-2>>1;Fr>0&&(He(Ve,et,Je-Ot-Re[kt]),et+=Fr);for(var pt=0;pt<Ut;++pt)gt[Et]=Je&32767,Et=(Et<<5^ot[Je])&32767,++Je;yt-=Ut-1}else kt<=143?kt=kt+48:et=lt(Ve,et,1),et=Ue(Ve,et,Ke[kt]),gt[Et]=Je&32767,++Je}et=Ue(Ve,et,0)-1}return Ve.l=(et+7)/8|0,Ve.l}return function(Ve,et){return Ve.length<8?Ee(Ve,et):Xe(Ve,et)}})();function Ct(ee){var fe=ut(50+Math.floor(ee.length*1.1)),pe=Tt(ee,fe);return fe.slice(0,pe)}var Mt=Ne?new Uint16Array(32768):We(32768),lr=Ne?new Uint16Array(32768):We(32768),jt=Ne?new Uint16Array(128):We(128),ft=1,qt=1;function Bt(ee,fe){var pe=Ae(ee,fe)+257;fe+=5;var be=Ae(ee,fe)+1;fe+=5;var we=Me(ee,fe)+4;fe+=4;for(var Ee=0,Xe=Ne?new Uint8Array(19):We(19),ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ve=1,et=Ne?new Uint8Array(8):We(8),Je=Ne?new Uint8Array(8):We(8),gt=Xe.length,yt=0;yt<we;++yt)Xe[P[yt]]=Ee=G(ee,fe),Ve<Ee&&(Ve=Ee),et[Ee]++,fe+=3;var Et=0;for(et[0]=0,yt=1;yt<=Ve;++yt)Je[yt]=Et=Et+et[yt-1]<<1;for(yt=0;yt<gt;++yt)(Et=Xe[yt])!=0&&(ot[yt]=Je[Et]++);var kt=0;for(yt=0;yt<gt;++yt)if(kt=Xe[yt],kt!=0){Et=Ke[ot[yt]]>>8-kt;for(var Ot=(1<<7-kt)-1;Ot>=0;--Ot)jt[Et|Ot<<kt]=kt&7|yt<<3}var Ut=[];for(Ve=1;Ut.length<pe+be;)switch(Et=jt[oe(ee,fe)],fe+=Et&7,Et>>>=3){case 16:for(Ee=3+Ce(ee,fe),fe+=2,Et=Ut[Ut.length-1];Ee-- >0;)Ut.push(Et);break;case 17:for(Ee=3+G(ee,fe),fe+=3;Ee-- >0;)Ut.push(0);break;case 18:for(Ee=11+oe(ee,fe),fe+=7;Ee-- >0;)Ut.push(0);break;default:Ut.push(Et),Ve<Et&&(Ve=Et);break}var ct=Ut.slice(0,pe),Fr=Ut.slice(pe);for(yt=pe;yt<286;++yt)ct[yt]=0;for(yt=be;yt<30;++yt)Fr[yt]=0;return ft=rt(ct,Mt,286),qt=rt(Fr,lr,30),fe}function Qt(ee,fe){if(ee[0]==3&&!(ee[1]&3))return[Ao(fe),2];for(var pe=0,be=0,we=l4(fe||1<<18),Ee=0,Xe=we.length>>>0,ot=0,Ve=0;(be&1)==0;){if(be=G(ee,pe),pe+=3,be>>>1)be>>1==1?(ot=9,Ve=5):(pe=Bt(ee,pe),ot=ft,Ve=qt);else{pe&7&&(pe+=8-(pe&7));var et=ee[pe>>>3]|ee[(pe>>>3)+1]<<8;if(pe+=32,et>0)for(!fe&&Xe<Ee+et&&(we=Oe(we,Ee+et),Xe=we.length);et-- >0;)we[Ee++]=ee[pe>>>3],pe+=8;continue}for(;;){!fe&&Xe<Ee+32767&&(we=Oe(we,Ee+32767),Xe=we.length);var Je=de(ee,pe,ot),gt=be>>>1==1?ht[Je]:Mt[Je];if(pe+=gt&15,gt>>>=4,(gt>>>8&255)===0)we[Ee++]=gt;else{if(gt==256)break;gt-=257;var yt=gt<8?0:gt-4>>2;yt>5&&(yt=0);var Et=Ee+ue[gt];yt>0&&(Et+=de(ee,pe,yt),pe+=yt),Je=de(ee,pe,Ve),gt=be>>>1==1?Pe[Je]:lr[Je],pe+=gt&15,gt>>>=4;var kt=gt<4?0:gt-2>>1,Ot=Re[gt];for(kt>0&&(Ot+=de(ee,pe,kt),pe+=kt),!fe&&Xe<Et&&(we=Oe(we,Et+100),Xe=we.length);Ee<Et;)we[Ee]=we[Ee-Ot],++Ee}}}return fe?[we,pe+7>>>3]:[we.slice(0,Ee),pe+7>>>3]}function mr(ee,fe){var pe=ee.slice(ee.l||0),be=Qt(pe,fe);return ee.l+=be[1],be[0]}function Pr(ee,fe){if(ee)typeof console<"u"&&console.error(fe);else throw new Error(fe)}function Xr(ee,fe){var pe=ee;Oa(pe,0);var be=[],we=[],Ee={FileIndex:be,FullPaths:we};M(Ee,{root:fe.root});for(var Xe=pe.length-4;(pe[Xe]!=80||pe[Xe+1]!=75||pe[Xe+2]!=5||pe[Xe+3]!=6)&&Xe>=0;)--Xe;pe.l=Xe+4,pe.l+=4;var ot=pe.read_shift(2);pe.l+=6;var Ve=pe.read_shift(4);for(pe.l=Ve,Xe=0;Xe<ot;++Xe){pe.l+=20;var et=pe.read_shift(4),Je=pe.read_shift(4),gt=pe.read_shift(2),yt=pe.read_shift(2),Et=pe.read_shift(2);pe.l+=8;var kt=pe.read_shift(4),Ot=d(pe.slice(pe.l+gt,pe.l+gt+yt));pe.l+=gt+yt+Et;var Ut=pe.l;pe.l=kt+4,$t(pe,et,Je,Ee,Ot),pe.l=Ut}return Ee}function $t(ee,fe,pe,be,we){ee.l+=2;var Ee=ee.read_shift(2),Xe=ee.read_shift(2),ot=c(ee);if(Ee&8257)throw new Error("Unsupported ZIP encryption");for(var Ve=ee.read_shift(4),et=ee.read_shift(4),Je=ee.read_shift(4),gt=ee.read_shift(2),yt=ee.read_shift(2),Et="",kt=0;kt<gt;++kt)Et+=String.fromCharCode(ee[ee.l++]);if(yt){var Ot=d(ee.slice(ee.l,ee.l+yt));(Ot[21589]||{}).mt&&(ot=Ot[21589].mt),((we||{})[21589]||{}).mt&&(ot=we[21589].mt)}ee.l+=yt;var Ut=ee.slice(ee.l,ee.l+et);switch(Xe){case 8:Ut=te(ee,Je);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Xe)}var ct=!1;Ee&8&&(Ve=ee.read_shift(4),Ve==134695760&&(Ve=ee.read_shift(4),ct=!0),et=ee.read_shift(4),Je=ee.read_shift(4)),et!=fe&&Pr(ct,"Bad compressed size: "+fe+" != "+et),Je!=pe&&Pr(ct,"Bad uncompressed size: "+pe+" != "+Je),Ie(be,Et,Ut,{unsafe:!0,mt:ot})}function Cr(ee,fe){var pe=fe||{},be=[],we=[],Ee=ut(1),Xe=pe.compression?8:0,ot=0,Ve=0,et=0,Je=0,gt=0,yt=ee.FullPaths[0],Et=yt,kt=ee.FileIndex[0],Ot=[],Ut=0;for(Ve=1;Ve<ee.FullPaths.length;++Ve)if(Et=ee.FullPaths[Ve].slice(yt.length),kt=ee.FileIndex[Ve],!(!kt.size||!kt.content||Et=="Sh33tJ5")){var ct=Je,Fr=ut(Et.length);for(et=0;et<Et.length;++et)Fr.write_shift(1,Et.charCodeAt(et)&127);Fr=Fr.slice(0,Fr.l),Ot[gt]=t7.buf(kt.content,0);var pt=kt.content;Xe==8&&(pt=U(pt)),Ee=ut(30),Ee.write_shift(4,67324752),Ee.write_shift(2,20),Ee.write_shift(2,ot),Ee.write_shift(2,Xe),kt.mt?s(Ee,kt.mt):Ee.write_shift(4,0),Ee.write_shift(-4,Ot[gt]),Ee.write_shift(4,pt.length),Ee.write_shift(4,kt.content.length),Ee.write_shift(2,Fr.length),Ee.write_shift(2,0),Je+=Ee.length,be.push(Ee),Je+=Fr.length,be.push(Fr),Je+=pt.length,be.push(pt),Ee=ut(46),Ee.write_shift(4,33639248),Ee.write_shift(2,0),Ee.write_shift(2,20),Ee.write_shift(2,ot),Ee.write_shift(2,Xe),Ee.write_shift(4,0),Ee.write_shift(-4,Ot[gt]),Ee.write_shift(4,pt.length),Ee.write_shift(4,kt.content.length),Ee.write_shift(2,Fr.length),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(4,0),Ee.write_shift(4,ct),Ut+=Ee.l,we.push(Ee),Ut+=Fr.length,we.push(Fr),++gt}return Ee=ut(22),Ee.write_shift(4,101010256),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,gt),Ee.write_shift(2,gt),Ee.write_shift(4,Ut),Ee.write_shift(4,Je),Ee.write_shift(2,0),ya([ya(be),ya(we),Ee])}var Kr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Tn(ee,fe){if(ee.ctype)return ee.ctype;var pe=ee.name||"",be=pe.match(/\.([^\.]+)$/);return be&&Kr[be[1]]||fe&&(be=(pe=fe).match(/[\.\\]([^\.\\])+$/),be&&Kr[be[1]])?Kr[be[1]]:"application/octet-stream"}function Mr(ee){for(var fe=Pd(ee),pe=[],be=0;be<fe.length;be+=76)pe.push(fe.slice(be,be+76));return pe.join(`\r
`)+`\r
`}function Hr(ee){var fe=ee.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(et){var Je=et.charCodeAt(0).toString(16).toUpperCase();return"="+(Je.length==1?"0"+Je:Je)});fe=fe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),fe.charAt(0)==`
`&&(fe="=0D"+fe.slice(1)),fe=fe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var pe=[],be=fe.split(`\r
`),we=0;we<be.length;++we){var Ee=be[we];if(Ee.length==0){pe.push("");continue}for(var Xe=0;Xe<Ee.length;){var ot=76,Ve=Ee.slice(Xe,Xe+ot);Ve.charAt(ot-1)=="="?ot--:Ve.charAt(ot-2)=="="?ot-=2:Ve.charAt(ot-3)=="="&&(ot-=3),Ve=Ee.slice(Xe,Xe+ot),Xe+=ot,Xe<Ee.length&&(Ve+="="),pe.push(Ve)}}return pe.join(`\r
`)}function Ge(ee){for(var fe=[],pe=0;pe<ee.length;++pe){for(var be=ee[pe];pe<=ee.length&&be.charAt(be.length-1)=="=";)be=be.slice(0,be.length-1)+ee[++pe];fe.push(be)}for(var we=0;we<fe.length;++we)fe[we]=fe[we].replace(/[=][0-9A-Fa-f]{2}/g,function(Ee){return String.fromCharCode(parseInt(Ee.slice(1),16))});return Rs(fe.join(`\r
`))}function Nt(ee,fe,pe){for(var be="",we="",Ee="",Xe,ot=0;ot<10;++ot){var Ve=fe[ot];if(!Ve||Ve.match(/^\s*$/))break;var et=Ve.match(/^(.*?):\s*([^\s].*)$/);if(et)switch(et[1].toLowerCase()){case"content-location":be=et[2].trim();break;case"content-type":Ee=et[2].trim();break;case"content-transfer-encoding":we=et[2].trim();break}}switch(++ot,we.toLowerCase()){case"base64":Xe=Rs(Ms(fe.slice(ot).join("")));break;case"quoted-printable":Xe=Ge(fe.slice(ot));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+we)}var Je=Ie(ee,be.slice(pe.length),Xe,{unsafe:!0});Ee&&(Je.ctype=Ee)}function Dt(ee,fe){if(ie(ee.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var pe=fe&&fe.root||"",be=(Ar&&Buffer.isBuffer(ee)?ee.toString("binary"):ie(ee)).split(`\r
`),we=0,Ee="";for(we=0;we<be.length;++we)if(Ee=be[we],!!/^Content-Location:/i.test(Ee)&&(Ee=Ee.slice(Ee.indexOf("file")),pe||(pe=Ee.slice(0,Ee.lastIndexOf("/")+1)),Ee.slice(0,pe.length)!=pe))for(;pe.length>0&&(pe=pe.slice(0,pe.length-1),pe=pe.slice(0,pe.lastIndexOf("/")+1),Ee.slice(0,pe.length)!=pe););var Xe=(be[1]||"").match(/boundary="(.*?)"/);if(!Xe)throw new Error("MAD cannot find boundary");var ot="--"+(Xe[1]||""),Ve=[],et=[],Je={FileIndex:Ve,FullPaths:et};M(Je);var gt,yt=0;for(we=0;we<be.length;++we){var Et=be[we];Et!==ot&&Et!==ot+"--"||(yt++&&Nt(Je,be.slice(gt,we),pe),gt=we)}return Je}function Pt(ee,fe){var pe=fe||{},be=pe.boundary||"SheetJS";be="------="+be;for(var we=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+be.slice(2)+'"',"","",""],Ee=ee.FullPaths[0],Xe=Ee,ot=ee.FileIndex[0],Ve=1;Ve<ee.FullPaths.length;++Ve)if(Xe=ee.FullPaths[Ve].slice(Ee.length),ot=ee.FileIndex[Ve],!(!ot.size||!ot.content||Xe=="Sh33tJ5")){Xe=Xe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ut){return"_x"+Ut.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ut){return"_u"+Ut.charCodeAt(0).toString(16)+"_"});for(var et=ot.content,Je=Ar&&Buffer.isBuffer(et)?et.toString("binary"):ie(et),gt=0,yt=Math.min(1024,Je.length),Et=0,kt=0;kt<=yt;++kt)(Et=Je.charCodeAt(kt))>=32&&Et<128&&++gt;var Ot=gt>=yt*4/5;we.push(be),we.push("Content-Location: "+(pe.root||"file:///C:/SheetJS/")+Xe),we.push("Content-Transfer-Encoding: "+(Ot?"quoted-printable":"base64")),we.push("Content-Type: "+Tn(ot,Xe)),we.push(""),we.push(Ot?Hr(Je):Mr(Je))}return we.push(be+`--\r
`),we.join(`\r
`)}function _r(ee){var fe={};return M(fe,ee),fe}function Ie(ee,fe,pe,be){var we=be&&be.unsafe;we||M(ee);var Ee=!we&&Yt.find(ee,fe);if(!Ee){var Xe=ee.FullPaths[0];fe.slice(0,Xe.length)==Xe?Xe=fe:(Xe.slice(-1)!="/"&&(Xe+="/"),Xe=(Xe+fe).replace("//","/")),Ee={name:a(fe),type:2},ee.FileIndex.push(Ee),ee.FullPaths.push(Xe),we||Yt.utils.cfb_gc(ee)}return Ee.content=pe,Ee.size=pe?pe.length:0,be&&(be.CLSID&&(Ee.clsid=be.CLSID),be.mt&&(Ee.mt=be.mt),be.ct&&(Ee.ct=be.ct)),Ee}function wt(ee,fe){M(ee);var pe=Yt.find(ee,fe);if(pe){for(var be=0;be<ee.FileIndex.length;++be)if(ee.FileIndex[be]==pe)return ee.FileIndex.splice(be,1),ee.FullPaths.splice(be,1),!0}return!1}function _t(ee,fe,pe){M(ee);var be=Yt.find(ee,fe);if(be){for(var we=0;we<ee.FileIndex.length;++we)if(ee.FileIndex[we]==be)return ee.FileIndex[we].name=a(pe),ee.FullPaths[we]=pe,!0}return!1}function Ft(ee){z(ee,!0)}return r.find=Z,r.read=X,r.parse=g,r.write=Le,r.writeFile=ge,r.utils={cfb_new:_r,cfb_add:Ie,cfb_del:wt,cfb_mov:_t,cfb_gc:Ft,ReadShift:yd,CheckField:$S,prep_blob:Oa,bconcat:ya,use_zlib:B,_deflateRaw:Ct,_inflateRaw:mr,consts:le},r})();function r7(e){return typeof e=="string"?Px(e):Array.isArray(e)?TI(e):e}function xf(e,r,t){if(typeof Deno<"u"){if(t&&typeof r=="string")switch(t){case"utf8":r=new TextEncoder(t).encode(r);break;case"binary":r=Px(r);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(e,r)}var n=t=="utf8"?zi(r):r;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([r7(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var c=document.createElement("a");if(c.download!=null)return c.download=e,c.href=s,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var d=File(e);return d.open("w"),d.encoding="binary",Array.isArray(r)&&(r=Oo(r)),d.write(r),d.close(),r}catch(x){if(!x.message||!x.message.match(/onstruct/))throw x}throw new Error("cannot save file "+e)}function n7(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var r=File(e);r.open("r"),r.encoding="binary";var t=r.read();return r.close(),t}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Vn(e){for(var r=Object.keys(e),t=[],n=0;n<r.length;++n)Object.prototype.hasOwnProperty.call(e,r[n])&&t.push(r[n]);return t}function m4(e,r){for(var t=[],n=Vn(e),a=0;a!==n.length;++a)t[e[n[a]][r]]==null&&(t[e[n[a]][r]]=n[a]);return t}function zx(e){for(var r=[],t=Vn(e),n=0;n!==t.length;++n)r[e[t[n]]]=t[n];return r}function Hx(e){for(var r=[],t=Vn(e),n=0;n!==t.length;++n)r[e[t[n]]]=parseInt(t[n],10);return r}function a7(e){for(var r=[],t=Vn(e),n=0;n!==t.length;++n)r[e[t[n]]]==null&&(r[e[t[n]]]=[]),r[e[t[n]]].push(t[n]);return r}var px=new Date(1899,11,30,0,0,0);function xa(e,r){var t=e.getTime(),n=px.getTime()+(e.getTimezoneOffset()-px.getTimezoneOffset())*6e4;return(t-n)/(1440*60*1e3)}var CS=new Date,s7=px.getTime()+(CS.getTimezoneOffset()-px.getTimezoneOffset())*6e4,g4=CS.getTimezoneOffset();function Gx(e){var r=new Date;return r.setTime(e*24*60*60*1e3+s7),r.getTimezoneOffset()!==g4&&r.setTime(r.getTime()+(r.getTimezoneOffset()-g4)*6e4),r}function i7(e){var r=0,t=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(t=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":t*=24;case"H":t*=60;case"M":if(n)t*=60;else throw new Error("Unsupported ISO Duration Field: M")}r+=t*parseInt(a[s],10)}return r}var p4=new Date("2017-02-19T19:06:09.000Z"),jS=isNaN(p4.getFullYear())?new Date("2/19/17"):p4,l7=jS.getFullYear()==2017;function Nn(e,r){var t=new Date(e);if(l7)return r>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):r<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(e instanceof Date)return e;if(jS.getFullYear()==1917&&!isNaN(t.getFullYear())){var n=t.getFullYear();return e.indexOf(""+n)>-1||t.setFullYear(t.getFullYear()+100),t}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Ec(e,r){if(Ar&&Buffer.isBuffer(e)){if(r){if(e[0]==255&&e[1]==254)return zi(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return zi(pS(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(r){if(e[0]==255&&e[1]==254)return zi(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return zi(new TextDecoder("utf-16be").decode(e.slice(2)))}var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function An(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=An(e[t]));return r}function Hn(e,r){for(var t="";t.length<r;)t+=e;return t}function _i(e){var r=Number(e);if(!isNaN(r))return isFinite(r)?r:NaN;if(!/\d/.test(e))return r;var t=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(r=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return t=-t,s}),!isNaN(r=Number(n)))?r/t:r}var o7=["january","february","march","april","may","june","july","august","september","october","november","december"];function X0(e){var r=new Date(e),t=new Date(NaN),n=r.getYear(),a=r.getMonth(),s=r.getDate();if(isNaN(s))return t;var c=e.toLowerCase();if(c.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(c=c.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),c.length>3&&o7.indexOf(c)==-1)return t}else if(c.match(/[a-z]/))return t;return n<0||n>8099?t:(a>0||s>1)&&n!=101?r:e.match(/[^-0-9:,\/\\]/)?t:r}var c7=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(t,n,a){if(e||typeof n=="string")return t.split(n);for(var s=t.split(n),c=[s[0]],d=1;d<s.length;++d)c.push(a),c.push(s[d]);return c}})();function OS(e){return e?e.content&&e.type?Ec(e.content,!0):e.data?hd(e.data):e.asNodeBuffer&&Ar?hd(e.asNodeBuffer().toString("binary")):e.asBinary?hd(e.asBinary()):e._data&&e._data.getContent?hd(Ec(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function RS(e){if(!e)return null;if(e.data)return s4(e.data);if(e.asNodeBuffer&&Ar)return e.asNodeBuffer();if(e._data&&e._data.getContent){var r=e._data.getContent();return typeof r=="string"?s4(r):Array.prototype.slice.call(r)}return e.content&&e.type?e.content:null}function u7(e){return e&&e.name.slice(-4)===".bin"?RS(e):OS(e)}function Js(e,r){for(var t=e.FullPaths||Vn(e.files),n=r.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<t.length;++s){var c=t[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==c||a==c)return e.files?e.files[t[s]]:e.FileIndex[s]}return null}function rb(e,r){var t=Js(e,r);if(t==null)throw new Error("Cannot find file "+r+" in zip");return t}function sa(e,r,t){if(!t)return u7(rb(e,r));if(!r)return null;try{return sa(e,r)}catch{return null}}function Is(e,r,t){if(!t)return OS(rb(e,r));if(!r)return null;try{return Is(e,r)}catch{return null}}function d7(e,r,t){return RS(rb(e,r))}function b4(e){for(var r=e.FullPaths||Vn(e.files),t=[],n=0;n<r.length;++n)r[n].slice(-1)!="/"&&t.push(r[n].replace(/^Root Entry[\/]/,""));return t.sort()}function wr(e,r,t){if(e.FullPaths){if(typeof t=="string"){var n;return Ar?n=Ol(t):n=CI(t),Yt.utils.cfb_add(e,r,n)}Yt.utils.cfb_add(e,r,t)}else e.file(r,t)}function nb(){return Yt.utils.cfb_new()}function IS(e,r){switch(r.type){case"base64":return Yt.read(e,{type:"base64"});case"binary":return Yt.read(e,{type:"binary"});case"buffer":case"array":return Yt.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+r.type)}function md(e,r){if(e.charAt(0)=="/")return e.slice(1);var t=r.split("/");r.slice(-1)!="/"&&t.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?t.pop():a!=="."&&t.push(a)}return t.join("/")}var Zn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,f7=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,v4=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,h7=/<[^>]*>/g,Ha=Zn.match(v4)?v4:h7,x7=/<\w*:/,m7=/<(\/?)\w+:/;function ir(e,r,t){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(r||(n[0]=e.slice(0,a)),a===e.length)return n;var c=e.match(f7),d=0,x="",f=0,g="",v="",w=1;if(c)for(f=0;f!=c.length;++f){for(v=c[f],s=0;s!=v.length&&v.charCodeAt(s)!==61;++s);for(g=v.slice(0,s).trim();v.charCodeAt(s+1)==32;)++s;for(w=(a=v.charCodeAt(s+1))==34||a==39?1:0,x=v.slice(s+1+w,v.length-w),d=0;d!=g.length&&g.charCodeAt(d)!==58;++d);if(d===g.length)g.indexOf("_")>0&&(g=g.slice(0,g.indexOf("_"))),n[g]=x,n[g.toLowerCase()]=x;else{var E=(d===5&&g.slice(0,5)==="xmlns"?"xmlns":"")+g.slice(d+1);if(n[E]&&g.slice(d-3,d)=="ext")continue;n[E]=x,n[E.toLowerCase()]=x}}return n}function qi(e){return e.replace(m7,"<$1")}var DS={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},ab=zx(DS),Ur=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,r=/_x([\da-fA-F]{4})_/ig;return function t(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(d,x){return DS[d]||String.fromCharCode(parseInt(x,d.indexOf("x")>-1?16:10))||d}).replace(r,function(d,x){return String.fromCharCode(parseInt(x,16))});var c=a.indexOf("]]>");return t(a.slice(0,s))+a.slice(s+9,c)+t(a.slice(c+3))}})(),sb=/[&<>'"]/g,g7=/[\u0000-\u0008\u000b-\u001f]/g;function an(e){var r=e+"";return r.replace(sb,function(t){return ab[t]}).replace(g7,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function y4(e){return an(e).replace(/ /g,"_x0020_")}var MS=/[\u0000-\u001f]/g;function ib(e){var r=e+"";return r.replace(sb,function(t){return ab[t]}).replace(/\n/g,"<br/>").replace(MS,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function p7(e){var r=e+"";return r.replace(sb,function(t){return ab[t]}).replace(MS,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}var w4=(function(){var e=/&#(\d+);/g;function r(t,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,r)}})();function b7(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function En(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function gp(e){for(var r="",t=0,n=0,a=0,s=0,c=0,d=0;t<e.length;){if(n=e.charCodeAt(t++),n<128){r+=String.fromCharCode(n);continue}if(a=e.charCodeAt(t++),n>191&&n<224){c=(n&31)<<6,c|=a&63,r+=String.fromCharCode(c);continue}if(s=e.charCodeAt(t++),n<240){r+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}c=e.charCodeAt(t++),d=((n&7)<<18|(a&63)<<12|(s&63)<<6|c&63)-65536,r+=String.fromCharCode(55296+(d>>>10&1023)),r+=String.fromCharCode(56320+(d&1023))}return r}function _4(e){var r=Ao(2*e.length),t,n,a=1,s=0,c=0,d;for(n=0;n<e.length;n+=a)a=1,(d=e.charCodeAt(n))<128?t=d:d<224?(t=(d&31)*64+(e.charCodeAt(n+1)&63),a=2):d<240?(t=(d&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,t=(d&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),t-=65536,c=55296+(t>>>10&1023),t=56320+(t&1023)),c!==0&&(r[s++]=c&255,r[s++]=c>>>8,c=0),r[s++]=t%256,r[s++]=t>>>8;return r.slice(0,s).toString("ucs2")}function E4(e){return Ol(e,"binary").toString("utf8")}var e1="foo bar baz",cn=Ar&&(E4(e1)==gp(e1)&&E4||_4(e1)==gp(e1)&&_4)||gp,zi=Ar?function(e){return Ol(e,"utf8").toString("binary")}:function(e){for(var r=[],t=0,n=0,a=0;t<e.length;)switch(n=e.charCodeAt(t++),!0){case n<128:r.push(String.fromCharCode(n));break;case n<2048:r.push(String.fromCharCode(192+(n>>6))),r.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(t++)-56320+(n<<10),r.push(String.fromCharCode(240+(a>>18&7))),r.push(String.fromCharCode(144+(a>>12&63))),r.push(String.fromCharCode(128+(a>>6&63))),r.push(String.fromCharCode(128+(a&63)));break;default:r.push(String.fromCharCode(224+(n>>12))),r.push(String.fromCharCode(128+(n>>6&63))),r.push(String.fromCharCode(128+(n&63)))}return r.join("")},zd=(function(){var e={};return function(t,n){var a=t+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",n||"")}})(),FS=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(r){return[new RegExp("&"+r[0]+";","ig"),r[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}})(),v7=(function(){var e={};return function(t){return e[t]!==void 0?e[t]:e[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}})(),y7=/<\/?(?:vt:)?variant>/g,w7=/<(?:vt:)([^>]*)>([\s\S]*)</;function k4(e,r){var t=ir(e),n=e.match(v7(t.baseType))||[],a=[];if(n.length!=t.size){if(r.WTF)throw new Error("unexpected vector length "+n.length+" != "+t.size);return a}return n.forEach(function(s){var c=s.replace(y7,"").match(w7);c&&a.push({v:cn(c[2]),t:c[1]})}),a}var LS=/(^\s|\s$|\n)/;function Ra(e,r){return"<"+e+(r.match(LS)?' xml:space="preserve"':"")+">"+r+"</"+e+">"}function Hd(e){return Vn(e).map(function(r){return" "+r+'="'+e[r]+'"'}).join("")}function Rt(e,r,t){return"<"+e+(t!=null?Hd(t):"")+(r!=null?(r.match(LS)?' xml:space="preserve"':"")+">"+r+"</"+e:"/")+">"}function u2(e,r){try{return e.toISOString().replace(/\.\d*/,"")}catch(t){if(r)throw t}return""}function _7(e,r){switch(typeof e){case"string":var t=Rt("vt:lpwstr",an(e));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return Rt((e|0)==e?"vt:i4":"vt:r8",an(String(e)));case"boolean":return Rt("vt:bool",e?"true":"false")}if(e instanceof Date)return Rt("vt:filetime",u2(e));throw new Error("Unable to serialize "+e)}function lb(e){if(Ar&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return cn(Oo(Q2(e)));throw new Error("Bad input format: expected Buffer or string")}var Gd=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ha={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Oc=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ts={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function E7(e,r){for(var t=1-2*(e[r+7]>>>7),n=((e[r+7]&127)<<4)+(e[r+6]>>>4&15),a=e[r+6]&15,s=5;s>=0;--s)a=a*256+e[r+s];return n==2047?a==0?t*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),t*Math.pow(2,n-52)*a)}function k7(e,r,t){var n=(r<0||1/r==-1/0?1:0)<<7,a=0,s=0,c=n?-r:r;isFinite(c)?c==0?a=s=0:(a=Math.floor(Math.log(c)/Math.LN2),s=c*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(r)?26985:0);for(var d=0;d<=5;++d,s/=256)e[t+d]=s&255;e[t+6]=(a&15)<<4|s&15,e[t+7]=a>>4|n}var S4=function(e){for(var r=[],t=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=t)r.push.apply(r,e[0][n].slice(a,a+t));return r},N4=Ar?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(r){return Buffer.isBuffer(r)?r:Ol(r)})):S4(e)}:S4,A4=function(e,r,t){for(var n=[],a=r;a<t;a+=2)n.push(String.fromCharCode(_l(e,a)));return n.join("").replace(Za,"")},ob=Ar?function(e,r,t){return Buffer.isBuffer(e)?e.toString("utf16le",r,t).replace(Za,""):A4(e,r,t)}:A4,T4=function(e,r,t){for(var n=[],a=r;a<r+t;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},BS=Ar?function(e,r,t){return Buffer.isBuffer(e)?e.toString("hex",r,r+t):T4(e,r,t)}:T4,C4=function(e,r,t){for(var n=[],a=r;a<t;a++)n.push(String.fromCharCode(F0(e,a)));return n.join("")},mf=Ar?function(r,t,n){return Buffer.isBuffer(r)?r.toString("utf8",t,n):C4(r,t,n)}:C4,PS=function(e,r){var t=Cs(e,r);return t>0?mf(e,r+4,r+4+t-1):""},US=PS,zS=function(e,r){var t=Cs(e,r);return t>0?mf(e,r+4,r+4+t-1):""},HS=zS,GS=function(e,r){var t=2*Cs(e,r);return t>0?mf(e,r+4,r+4+t-1):""},VS=GS,WS=function(r,t){var n=Cs(r,t);return n>0?ob(r,t+4,t+4+n):""},qS=WS,XS=function(e,r){var t=Cs(e,r);return t>0?mf(e,r+4,r+4+t):""},KS=XS,YS=function(e,r){return E7(e,r)},bx=YS,cb=function(r){return Array.isArray(r)||typeof Uint8Array<"u"&&r instanceof Uint8Array};Ar&&(US=function(r,t){if(!Buffer.isBuffer(r))return PS(r,t);var n=r.readUInt32LE(t);return n>0?r.toString("utf8",t+4,t+4+n-1):""},HS=function(r,t){if(!Buffer.isBuffer(r))return zS(r,t);var n=r.readUInt32LE(t);return n>0?r.toString("utf8",t+4,t+4+n-1):""},VS=function(r,t){if(!Buffer.isBuffer(r))return GS(r,t);var n=2*r.readUInt32LE(t);return r.toString("utf16le",t+4,t+4+n-1)},qS=function(r,t){if(!Buffer.isBuffer(r))return WS(r,t);var n=r.readUInt32LE(t);return r.toString("utf16le",t+4,t+4+n)},KS=function(r,t){if(!Buffer.isBuffer(r))return XS(r,t);var n=r.readUInt32LE(t);return r.toString("utf8",t+4,t+4+n)},bx=function(r,t){return Buffer.isBuffer(r)?r.readDoubleLE(t):YS(r,t)},cb=function(r){return Buffer.isBuffer(r)||Array.isArray(r)||typeof Uint8Array<"u"&&r instanceof Uint8Array});var F0=function(e,r){return e[r]},_l=function(e,r){return e[r+1]*256+e[r]},S7=function(e,r){var t=e[r+1]*256+e[r];return t<32768?t:(65535-t+1)*-1},Cs=function(e,r){return e[r+3]*(1<<24)+(e[r+2]<<16)+(e[r+1]<<8)+e[r]},oc=function(e,r){return e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]},N7=function(e,r){return e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]};function yd(e,r){var t="",n,a,s=[],c,d,x,f;switch(r){case"dbcs":if(f=this.l,Ar&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*e).toString("utf16le");else for(x=0;x<e;++x)t+=String.fromCharCode(_l(this,f)),f+=2;e*=2;break;case"utf8":t=mf(this,this.l,this.l+e);break;case"utf16le":e*=2,t=ob(this,this.l,this.l+e);break;case"wstr":return yd.call(this,e,"dbcs");case"lpstr-ansi":t=US(this,this.l),e=4+Cs(this,this.l);break;case"lpstr-cp":t=HS(this,this.l),e=4+Cs(this,this.l);break;case"lpwstr":t=VS(this,this.l),e=4+2*Cs(this,this.l);break;case"lpp4":e=4+Cs(this,this.l),t=qS(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Cs(this,this.l),t=KS(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,t="";(c=F0(this,this.l+e++))!==0;)s.push(Qh(c));t=s.join("");break;case"_wstr":for(e=0,t="";(c=_l(this,this.l+e))!==0;)s.push(Qh(c)),e+=2;e+=2,t=s.join("");break;case"dbcs-cont":for(t="",f=this.l,x=0;x<e;++x){if(this.lens&&this.lens.indexOf(f)!==-1)return c=F0(this,f),this.l=f+1,d=yd.call(this,e-x,c?"dbcs-cont":"sbcs-cont"),s.join("")+d;s.push(Qh(_l(this,f))),f+=2}t=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(t="",f=this.l,x=0;x!=e;++x){if(this.lens&&this.lens.indexOf(f)!==-1)return c=F0(this,f),this.l=f+1,d=yd.call(this,e-x,c?"dbcs-cont":"sbcs-cont"),s.join("")+d;s.push(Qh(F0(this,f))),f+=1}t=s.join("");break;default:switch(e){case 1:return n=F0(this,this.l),this.l++,n;case 2:return n=(r==="i"?S7:_l)(this,this.l),this.l+=2,n;case 4:case-4:return r==="i"||(this[this.l+3]&128)===0?(n=(e>0?oc:N7)(this,this.l),this.l+=4,n):(a=Cs(this,this.l),this.l+=4,a);case 8:case-8:if(r==="f")return e==8?a=bx(this,this.l):a=bx([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:t=BS(this,this.l,e);break}}return this.l+=e,t}var A7=function(e,r,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24&255},T7=function(e,r,t){e[t]=r&255,e[t+1]=r>>8&255,e[t+2]=r>>16&255,e[t+3]=r>>24&255},C7=function(e,r,t){e[t]=r&255,e[t+1]=r>>>8&255};function j7(e,r,t){var n=0,a=0;if(t==="dbcs"){for(a=0;a!=r.length;++a)C7(this,r.charCodeAt(a),this.l+2*a);n=2*r.length}else if(t==="sbcs"){for(r=r.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=r.length;++a)this[this.l+a]=r.charCodeAt(a)&255;n=r.length}else if(t==="hex"){for(;a<e;++a)this[this.l++]=parseInt(r.slice(2*a,2*a+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(r.length,e);++a){var c=r.charCodeAt(a);this[this.l++]=c&255,this[this.l++]=c>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=r&255;break;case 2:n=2,this[this.l]=r&255,r>>>=8,this[this.l+1]=r&255;break;case 3:n=3,this[this.l]=r&255,r>>>=8,this[this.l+1]=r&255,r>>>=8,this[this.l+2]=r&255;break;case 4:n=4,A7(this,r,this.l);break;case 8:if(n=8,t==="f"){k7(this,r,this.l);break}case 16:break;case-4:n=4,T7(this,r,this.l);break}return this.l+=n,this}function $S(e,r){var t=BS(this,this.l,e.length>>1);if(t!==e)throw new Error(r+"Expected "+e+" saw "+t);this.l+=e.length>>1}function Oa(e,r){e.l=r,e.read_shift=yd,e.chk=$S,e.write_shift=j7}function za(e,r){e.l+=r}function ut(e){var r=Ao(e);return Oa(r,0),r}function Rl(e,r,t){if(e){var n,a,s;Oa(e,e.l||0);for(var c=e.length,d=0,x=0;e.l<c;){d=e.read_shift(1),d&128&&(d=(d&127)+((e.read_shift(1)&127)<<7));var f=Yd[d]||Yd[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;x=e.l+s;var g=f.f&&f.f(e,s,t);if(e.l=x,r(g,f,d))return}}}function us(){var e=[],r=Ar?256:2048,t=function(f){var g=ut(f);return Oa(g,0),g},n=t(r),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(f){return n&&f<n.length-n.l?n:(a(),n=t(Math.max(f+1,r)))},c=function(){return a(),ya(e)},d=function(f){a(),n=f,n.l==null&&(n.l=n.length),s(r)};return{next:s,push:d,end:c,_bufs:e}}function bt(e,r,t,n){var a=+r,s;if(!isNaN(a)){n||(n=Yd[a].p||(t||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var c=e.next(s);a<=127?c.write_shift(1,a):(c.write_shift(1,(a&127)+128),c.write_shift(1,a>>7));for(var d=0;d!=4;++d)if(n>=128)c.write_shift(1,(n&127)+128),n>>=7;else{c.write_shift(1,n);break}n>0&&cb(t)&&e.push(t)}}function wd(e,r,t){var n=An(e);if(r.s?(n.cRel&&(n.c+=r.s.c),n.rRel&&(n.r+=r.s.r)):(n.cRel&&(n.c+=r.c),n.rRel&&(n.r+=r.r)),!t||t.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function j4(e,r,t){var n=An(e);return n.s=wd(n.s,r.s,t),n.e=wd(n.e,r.s,t),n}function _d(e,r){if(e.cRel&&e.c<0)for(e=An(e);e.c<0;)e.c+=r>8?16384:256;if(e.rRel&&e.r<0)for(e=An(e);e.r<0;)e.r+=r>8?1048576:r>5?65536:16384;var t=sr(e);return!e.cRel&&e.cRel!=null&&(t=I7(t)),!e.rRel&&e.rRel!=null&&(t=O7(t)),t}function pp(e,r){return e.s.r==0&&!e.s.rRel&&e.e.r==(r.biff>=12?1048575:r.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Dn(e.s.c)+":"+(e.e.cRel?"":"$")+Dn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(r.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+$n(e.s.r)+":"+(e.e.rRel?"":"$")+$n(e.e.r):_d(e.s,r.biff)+":"+_d(e.e,r.biff)}function ub(e){return parseInt(R7(e),10)-1}function $n(e){return""+(e+1)}function O7(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function R7(e){return e.replace(/\$(\d+)$/,"$1")}function db(e){for(var r=D7(e),t=0,n=0;n!==r.length;++n)t=26*t+r.charCodeAt(n)-64;return t-1}function Dn(e){if(e<0)throw new Error("invalid column "+e);var r="";for(++e;e;e=Math.floor((e-1)/26))r=String.fromCharCode((e-1)%26+65)+r;return r}function I7(e){return e.replace(/^([A-Z])/,"$$$1")}function D7(e){return e.replace(/^\$([A-Z])/,"$1")}function M7(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Mn(e){for(var r=0,t=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?r=10*r+(a-48):a>=65&&a<=90&&(t=26*t+(a-64))}return{c:t-1,r:r-1}}function sr(e){for(var r=e.c+1,t="";r;r=(r-1)/26|0)t=String.fromCharCode((r-1)%26+65)+t;return t+(e.r+1)}function ds(e){var r=e.indexOf(":");return r==-1?{s:Mn(e),e:Mn(e)}:{s:Mn(e.slice(0,r)),e:Mn(e.slice(r+1))}}function br(e,r){return typeof r>"u"||typeof r=="number"?br(e.s,e.e):(typeof e!="string"&&(e=sr(e)),typeof r!="string"&&(r=sr(r)),e==r?e:e+":"+r)}function zr(e){var r={s:{c:0,r:0},e:{c:0,r:0}},t=0,n=0,a=0,s=e.length;for(t=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)t=26*t+a;for(r.s.c=--t,t=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)t=10*t+a;if(r.s.r=--t,n===s||a!=10)return r.e.c=r.s.c,r.e.r=r.s.r,r;for(++n,t=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)t=26*t+a;for(r.e.c=--t,t=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)t=10*t+a;return r.e.r=--t,r}function O4(e,r){var t=e.t=="d"&&r instanceof Date;if(e.z!=null)try{return e.w=ni(e.z,t?xa(r):r)}catch{}try{return e.w=ni((e.XF||{}).numFmtId||(t?14:0),t?xa(r):r)}catch{return""+r}}function Cl(e,r,t){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&t&&t.dateNF&&(e.z=t.dateNF),e.t=="e"?Il[e.v]||e.v:r==null?O4(e,e.v):O4(e,r))}function Ro(e,r){var t=r&&r.sheet?r.sheet:"Sheet1",n={};return n[t]=e,{SheetNames:[t],Sheets:n}}function ZS(e,r,t){var n=t||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),c=0,d=0;if(s&&n.origin!=null){if(typeof n.origin=="number")c=n.origin;else{var x=typeof n.origin=="string"?Mn(n.origin):n.origin;c=x.r,d=x.c}s["!ref"]||(s["!ref"]="A1:A1")}var f={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var g=zr(s["!ref"]);f.s.c=g.s.c,f.s.r=g.s.r,f.e.c=Math.max(f.e.c,g.e.c),f.e.r=Math.max(f.e.r,g.e.r),c==-1&&(f.e.r=c=g.e.r+1)}for(var v=0;v!=r.length;++v)if(r[v]){if(!Array.isArray(r[v]))throw new Error("aoa_to_sheet expects an array of arrays");for(var w=0;w!=r[v].length;++w)if(!(typeof r[v][w]>"u")){var E={v:r[v][w]},N=c+v,S=d+w;if(f.s.r>N&&(f.s.r=N),f.s.c>S&&(f.s.c=S),f.e.r<N&&(f.e.r=N),f.e.c<S&&(f.e.c=S),r[v][w]&&typeof r[v][w]=="object"&&!Array.isArray(r[v][w])&&!(r[v][w]instanceof Date))E=r[v][w];else if(Array.isArray(E.v)&&(E.f=r[v][w][1],E.v=E.v[0]),E.v===null)if(E.f)E.t="n";else if(n.nullError)E.t="e",E.v=0;else if(n.sheetStubs)E.t="z";else continue;else typeof E.v=="number"?E.t="n":typeof E.v=="boolean"?E.t="b":E.v instanceof Date?(E.z=n.dateNF||nr[14],n.cellDates?(E.t="d",E.w=ni(E.z,xa(E.v))):(E.t="n",E.v=xa(E.v),E.w=ni(E.z,E.v))):E.t="s";if(a)s[N]||(s[N]=[]),s[N][S]&&s[N][S].z&&(E.z=s[N][S].z),s[N][S]=E;else{var T=sr({c:S,r:N});s[T]&&s[T].z&&(E.z=s[T].z),s[T]=E}}}return f.s.c<1e7&&(s["!ref"]=br(f)),s}function iu(e,r){return ZS(null,e,r)}function F7(e){return e.read_shift(4,"i")}function Ei(e,r){return r||(r=ut(4)),r.write_shift(4,e),r}function Ua(e){var r=e.read_shift(4);return r===0?"":e.read_shift(r,"dbcs")}function wa(e,r){var t=!1;return r==null&&(t=!0,r=ut(4+2*e.length)),r.write_shift(4,e.length),e.length>0&&r.write_shift(0,e,"dbcs"),t?r.slice(0,r.l):r}function L7(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function B7(e,r){return r||(r=ut(4)),r.write_shift(2,0),r.write_shift(2,0),r}function fb(e,r){var t=e.l,n=e.read_shift(1),a=Ua(e),s=[],c={t:a,h:a};if((n&1)!==0){for(var d=e.read_shift(4),x=0;x!=d;++x)s.push(L7(e));c.r=s}else c.r=[{ich:0,ifnt:0}];return e.l=t+r,c}function P7(e,r){var t=!1;return r==null&&(t=!0,r=ut(15+4*e.t.length)),r.write_shift(1,0),wa(e.t,r),t?r.slice(0,r.l):r}var U7=fb;function z7(e,r){var t=!1;return r==null&&(t=!0,r=ut(23+4*e.t.length)),r.write_shift(1,1),wa(e.t,r),r.write_shift(4,1),B7({},r),t?r.slice(0,r.l):r}function si(e){var r=e.read_shift(4),t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:r,iStyleRef:t}}function Rc(e,r){return r==null&&(r=ut(8)),r.write_shift(-4,e.c),r.write_shift(3,e.iStyleRef||e.s),r.write_shift(1,0),r}function Ic(e){var r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:r}}function Dc(e,r){return r==null&&(r=ut(4)),r.write_shift(3,e.iStyleRef||e.s),r.write_shift(1,0),r}var H7=Ua,JS=wa;function hb(e){var r=e.read_shift(4);return r===0||r===4294967295?"":e.read_shift(r,"dbcs")}function vx(e,r){var t=!1;return r==null&&(t=!0,r=ut(127)),r.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&r.write_shift(0,e,"dbcs"),t?r.slice(0,r.l):r}var G7=Ua,d2=hb,xb=vx;function mb(e){var r=e.slice(e.l,e.l+4),t=r[0]&1,n=r[0]&2;e.l+=4;var a=n===0?bx([0,0,0,0,r[0]&252,r[1],r[2],r[3]],0):oc(r,0)>>2;return t?a/100:a}function QS(e,r){r==null&&(r=ut(4));var t=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,t=1),n)r.write_shift(-4,((t?a:e)<<2)+(t+2));else throw new Error("unsupported RkNumber "+e)}function eN(e){var r={s:{},e:{}};return r.s.r=e.read_shift(4),r.e.r=e.read_shift(4),r.s.c=e.read_shift(4),r.e.c=e.read_shift(4),r}function V7(e,r){return r||(r=ut(16)),r.write_shift(4,e.s.r),r.write_shift(4,e.e.r),r.write_shift(4,e.s.c),r.write_shift(4,e.e.c),r}var Mc=eN,lu=V7;function Pa(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function kc(e,r){return(r||ut(8)).write_shift(8,e,"f")}function W7(e){var r={},t=e.read_shift(1),n=t>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),c=e.read_shift(1),d=e.read_shift(1),x=e.read_shift(1);switch(e.l++,n){case 0:r.auto=1;break;case 1:r.index=a;var f=gc[a];f&&(r.rgb=Wd(f));break;case 2:r.rgb=Wd([c,d,x]);break;case 3:r.theme=a;break}return s!=0&&(r.tint=s>0?s/32767:s/32768),r}function yx(e,r){if(r||(r=ut(8)),!e||e.auto)return r.write_shift(4,0),r.write_shift(4,0),r;e.index!=null?(r.write_shift(1,2),r.write_shift(1,e.index)):e.theme!=null?(r.write_shift(1,6),r.write_shift(1,e.theme)):(r.write_shift(1,5),r.write_shift(1,0));var t=e.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),r.write_shift(2,t),!e.rgb||e.theme!=null)r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),r.write_shift(1,parseInt(n.slice(0,2),16)),r.write_shift(1,parseInt(n.slice(2,4),16)),r.write_shift(1,parseInt(n.slice(4,6),16)),r.write_shift(1,255)}return r}function q7(e){var r=e.read_shift(1);e.l++;var t={fBold:r&1,fItalic:r&2,fUnderline:r&4,fStrikeout:r&8,fOutline:r&16,fShadow:r&32,fCondense:r&64,fExtend:r&128};return t}function X7(e,r){r||(r=ut(2));var t=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return r.write_shift(1,t),r.write_shift(1,0),r}function tN(e,r){var t={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return t[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,r==1?"lpstr":"lpwstr")}function K7(e){return tN(e,1)}function Y7(e){return tN(e,2)}var gb=2,is=3,t1=11,R4=12,wx=19,r1=64,$7=65,Z7=71,J7=4108,Q7=4126,va=80,rN=81,eD=[va,rN],f2={1:{n:"CodePage",t:gb},2:{n:"Category",t:va},3:{n:"PresentationFormat",t:va},4:{n:"ByteCount",t:is},5:{n:"LineCount",t:is},6:{n:"ParagraphCount",t:is},7:{n:"SlideCount",t:is},8:{n:"NoteCount",t:is},9:{n:"HiddenCount",t:is},10:{n:"MultimediaClipCount",t:is},11:{n:"ScaleCrop",t:t1},12:{n:"HeadingPairs",t:J7},13:{n:"TitlesOfParts",t:Q7},14:{n:"Manager",t:va},15:{n:"Company",t:va},16:{n:"LinksUpToDate",t:t1},17:{n:"CharacterCount",t:is},19:{n:"SharedDoc",t:t1},22:{n:"HyperlinksChanged",t:t1},23:{n:"AppVersion",t:is,p:"version"},24:{n:"DigSig",t:$7},26:{n:"ContentType",t:va},27:{n:"ContentStatus",t:va},28:{n:"Language",t:va},29:{n:"Version",t:va},255:{},2147483648:{n:"Locale",t:wx},2147483651:{n:"Behavior",t:wx},1919054434:{}},h2={1:{n:"CodePage",t:gb},2:{n:"Title",t:va},3:{n:"Subject",t:va},4:{n:"Author",t:va},5:{n:"Keywords",t:va},6:{n:"Comments",t:va},7:{n:"Template",t:va},8:{n:"LastAuthor",t:va},9:{n:"RevNumber",t:va},10:{n:"EditTime",t:r1},11:{n:"LastPrinted",t:r1},12:{n:"CreatedDate",t:r1},13:{n:"ModifiedDate",t:r1},14:{n:"PageCount",t:is},15:{n:"WordCount",t:is},16:{n:"CharCount",t:is},17:{n:"Thumbnail",t:Z7},18:{n:"Application",t:va},19:{n:"DocSecurity",t:is},255:{},2147483648:{n:"Locale",t:wx},2147483651:{n:"Behavior",t:wx},1919054434:{}},I4={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},tD=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function rD(e){return e.map(function(r){return[r>>16&255,r>>8&255,r&255]})}var nD=rD([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),gc=An(nD),Il={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},nN={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},x2={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},n1={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function pb(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function aD(e){var r=pb();if(!e||!e.match)return r;var t={};if((e.match(Ha)||[]).forEach(function(n){var a=ir(n);switch(a[0].replace(x7,"<")){case"<?xml":break;case"<Types":r.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":t[a.Extension]=a.ContentType;break;case"<Override":r[x2[a.ContentType]]!==void 0&&r[x2[a.ContentType]].push(a.PartName);break}}),r.xmlns!==ha.CT)throw new Error("Unknown Namespace: "+r.xmlns);return r.calcchain=r.calcchains.length>0?r.calcchains[0]:"",r.sst=r.strs.length>0?r.strs[0]:"",r.style=r.styles.length>0?r.styles[0]:"",r.defaults=t,delete r.calcchains,r}function aN(e,r){var t=a7(x2),n=[],a;n[n.length]=Zn,n[n.length]=Rt("Types",null,{xmlns:ha.CT,"xmlns:xsd":ha.xsd,"xmlns:xsi":ha.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(x){return Rt("Default",null,{Extension:x[0],ContentType:x[1]})}));var s=function(x){e[x]&&e[x].length>0&&(a=e[x][0],n[n.length]=Rt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:n1[x][r.bookType]||n1[x].xlsx}))},c=function(x){(e[x]||[]).forEach(function(f){n[n.length]=Rt("Override",null,{PartName:(f[0]=="/"?"":"/")+f,ContentType:n1[x][r.bookType]||n1[x].xlsx})})},d=function(x){(e[x]||[]).forEach(function(f){n[n.length]=Rt("Override",null,{PartName:(f[0]=="/"?"":"/")+f,ContentType:t[x][0]})})};return s("workbooks"),c("sheets"),c("charts"),d("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(d),d("vba"),d("comments"),d("threadedcomments"),d("drawings"),c("metadata"),d("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Tr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Vd(e){var r=e.lastIndexOf("/");return e.slice(0,r+1)+"_rels/"+e.slice(r+1)+".rels"}function Ed(e,r){var t={"!id":{}};if(!e)return t;r.charAt(0)!=="/"&&(r="/"+r);var n={};return(e.match(Ha)||[]).forEach(function(a){var s=ir(a);if(s[0]==="<Relationship"){var c={};c.Type=s.Type,c.Target=s.Target,c.Id=s.Id,s.TargetMode&&(c.TargetMode=s.TargetMode);var d=s.TargetMode==="External"?s.Target:md(s.Target,r);t[d]=c,n[s.Id]=c}}),t["!id"]=n,t}function H0(e){var r=[Zn,Rt("Relationships",null,{xmlns:ha.RELS})];return Vn(e["!id"]).forEach(function(t){r[r.length]=Rt("Relationship",null,e["!id"][t])}),r.length>2&&(r[r.length]="</Relationships>",r[1]=r[1].replace("/>",">")),r.join("")}function nn(e,r,t,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),r<0)for(r=e["!idx"];e["!id"]["rId"+r];++r);if(e["!idx"]=r+1,a.Id="rId"+r,a.Type=n,a.Target=t,[Tr.HLINK,Tr.XPATH,Tr.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+r);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,r}var sD="application/vnd.oasis.opendocument.spreadsheet";function iD(e,r){for(var t=lb(e),n,a;n=Gd.exec(t);)switch(n[3]){case"manifest":break;case"file-entry":if(a=ir(n[0],!1),a.path=="/"&&a.type!==sD)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(r&&r.WTF)throw n}}function lD(e){var r=[Zn];r.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),r.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<e.length;++t)r.push('  <manifest:file-entry manifest:full-path="'+e[t][0]+'" manifest:media-type="'+e[t][1]+`"/>
`);return r.push("</manifest:manifest>"),r.join("")}function D4(e,r,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+r+`"/>
`,`  </rdf:Description>
`].join("")}function oD(e,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+r+`"/>
`,`  </rdf:Description>
`].join("")}function cD(e){var r=[Zn];r.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=e.length;++t)r.push(D4(e[t][0],e[t][1])),r.push(oD("",e[t][0]));return r.push(D4("","Document","pkg")),r.push("</rdf:RDF>"),r.join("")}function sN(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+hx.version+"</meta:generator></office:meta></office:document-meta>"}var ti=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],uD=(function(){for(var e=new Array(ti.length),r=0;r<ti.length;++r){var t=ti[r],n="(?:"+t[0].slice(0,t[0].indexOf(":"))+":)"+t[0].slice(t[0].indexOf(":")+1);e[r]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function iN(e){var r={};e=cn(e);for(var t=0;t<ti.length;++t){var n=ti[t],a=e.match(uD[t]);a!=null&&a.length>0&&(r[n[1]]=Ur(a[1])),n[2]==="date"&&r[n[1]]&&(r[n[1]]=Nn(r[n[1]]))}return r}function bp(e,r,t,n,a){a[e]!=null||r==null||r===""||(a[e]=r,r=an(r),n[n.length]=t?Rt(e,r,t):Ra(e,r))}function lN(e,r){var t=r||{},n=[Zn,Rt("cp:coreProperties",null,{"xmlns:cp":ha.CORE_PROPS,"xmlns:dc":ha.dc,"xmlns:dcterms":ha.dcterms,"xmlns:dcmitype":ha.dcmitype,"xmlns:xsi":ha.xsi})],a={};if(!e&&!t.Props)return n.join("");e&&(e.CreatedDate!=null&&bp("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:u2(e.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&bp("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:u2(e.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=ti.length;++s){var c=ti[s],d=t.Props&&t.Props[c[1]]!=null?t.Props[c[1]]:e?e[c[1]]:null;d===!0?d="1":d===!1?d="0":typeof d=="number"&&(d=String(d)),d!=null&&bp(c[0],d,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var pc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],oN=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function cN(e,r,t,n){var a=[];if(typeof e=="string")a=k4(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(g){return{v:g}}));var c=typeof r=="string"?k4(r,n).map(function(g){return g.v}):r,d=0,x=0;if(c.length>0)for(var f=0;f!==a.length;f+=2){switch(x=+a[f+1].v,a[f].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":t.Worksheets=x,t.SheetNames=c.slice(d,d+x);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":t.NamedRanges=x,t.DefinedNames=c.slice(d,d+x);break;case"Charts":case"Diagramme":t.Chartsheets=x,t.ChartNames=c.slice(d,d+x);break}d+=x}}function dD(e,r,t){var n={};return r||(r={}),e=cn(e),pc.forEach(function(a){var s=(e.match(zd(a[0]))||[])[1];switch(a[2]){case"string":s&&(r[a[1]]=Ur(s));break;case"bool":r[a[1]]=s==="true";break;case"raw":var c=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));c&&c.length>0&&(n[a[1]]=c[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&cN(n.HeadingPairs,n.TitlesOfParts,r,t),r}function uN(e){var r=[],t=Rt;return e||(e={}),e.Application="SheetJS",r[r.length]=Zn,r[r.length]=Rt("Properties",null,{xmlns:ha.EXT_PROPS,"xmlns:vt":ha.vt}),pc.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=an(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(r[r.length]=t(n[0],a))}}),r[r.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),r[r.length]=t("TitlesOfParts",t("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+an(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),r.length>2&&(r[r.length]="</Properties>",r[1]=r[1].replace("/>",">")),r.join("")}var fD=/<[^>]+>[^<]*/g;function hD(e,r){var t={},n="",a=e.match(fD);if(a)for(var s=0;s!=a.length;++s){var c=a[s],d=ir(c);switch(d[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Ur(d.name);break;case"</property>":n=null;break;default:if(c.indexOf("<vt:")===0){var x=c.split(">"),f=x[0].slice(4),g=x[1];switch(f){case"lpstr":case"bstr":case"lpwstr":t[n]=Ur(g);break;case"bool":t[n]=En(g);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":t[n]=parseInt(g,10);break;case"r4":case"r8":case"decimal":t[n]=parseFloat(g);break;case"filetime":case"date":t[n]=Nn(g);break;case"cy":case"error":t[n]=Ur(g);break;default:if(f.slice(-1)=="/")break;r.WTF&&typeof console<"u"&&console.warn("Unexpected",c,f,x)}}else if(c.slice(0,2)!=="</"){if(r.WTF)throw new Error(c)}}}return t}function dN(e){var r=[Zn,Rt("Properties",null,{xmlns:ha.CUST_PROPS,"xmlns:vt":ha.vt})];if(!e)return r.join("");var t=1;return Vn(e).forEach(function(a){++t,r[r.length]=Rt("property",_7(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:an(a)})}),r.length>2&&(r[r.length]="</Properties>",r[1]=r[1].replace("/>",">")),r.join("")}var m2={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},vp;function xD(e,r,t){vp||(vp=zx(m2)),r=vp[r]||r,e[r]=t}function mD(e,r){var t=[];return Vn(m2).map(function(n){for(var a=0;a<ti.length;++a)if(ti[a][1]==n)return ti[a];for(a=0;a<pc.length;++a)if(pc[a][1]==n)return pc[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=r&&r.Props&&r.Props[n[1]]!=null?r.Props[n[1]]:e[n[1]];n[2]==="date"&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"Z")),typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),t.push(Ra(m2[n[1]]||n[1],a))}}),Rt("DocumentProperties",t.join(""),{xmlns:Ts.o})}function gD(e,r){var t=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Vn(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var c=0;c<ti.length;++c)if(s==ti[c][1])return;for(c=0;c<pc.length;++c)if(s==pc[c][1])return;for(c=0;c<t.length;++c)if(s==t[c])return;var d=e[s],x="string";typeof d=="number"?(x="float",d=String(d)):d===!0||d===!1?(x="boolean",d=d?"1":"0"):d=String(d),a.push(Rt(y4(s),d,{"dt:dt":x}))}}),r&&Vn(r).forEach(function(s){if(Object.prototype.hasOwnProperty.call(r,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var c=r[s],d="string";typeof c=="number"?(d="float",c=String(c)):c===!0||c===!1?(d="boolean",c=c?"1":"0"):c instanceof Date?(d="dateTime.tz",c=c.toISOString()):c=String(c),a.push(Rt(y4(s),c,{"dt:dt":d}))}}),"<"+n+' xmlns="'+Ts.o+'">'+a.join("")+"</"+n+">"}function bb(e){var r=e.read_shift(4),t=e.read_shift(4);return new Date((t/1e7*Math.pow(2,32)+r/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function pD(e){var r=typeof e=="string"?new Date(Date.parse(e)):e,t=r.getTime()/1e3+11644473600,n=t%Math.pow(2,32),a=(t-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var c=ut(8);return c.write_shift(4,n),c.write_shift(4,a),c}function fN(e,r,t){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(t)for(;e.l-n&3;)++e.l;return a}function hN(e,r,t){var n=e.read_shift(0,"lpwstr");return n}function xN(e,r,t){return r===31?hN(e):fN(e,r,t)}function g2(e,r,t){return xN(e,r,t===!1?0:4)}function bD(e,r){if(!r)throw new Error("VtUnalignedString must have positive length");return xN(e,r,0)}function vD(e){for(var r=e.read_shift(4),t=[],n=0;n!=r;++n){var a=e.l;t[n]=e.read_shift(0,"lpwstr").replace(Za,""),e.l-a&2&&(e.l+=2)}return t}function yD(e){for(var r=e.read_shift(4),t=[],n=0;n!=r;++n)t[n]=e.read_shift(0,"lpstr-cp").replace(Za,"");return t}function wD(e){var r=e.l,t=_x(e,rN);e[e.l]==0&&e[e.l+1]==0&&e.l-r&2&&(e.l+=2);var n=_x(e,is);return[t,n]}function _D(e){for(var r=e.read_shift(4),t=[],n=0;n<r/2;++n)t.push(wD(e));return t}function M4(e,r){for(var t=e.read_shift(4),n={},a=0;a!=t;++a){var s=e.read_shift(4),c=e.read_shift(4);n[s]=e.read_shift(c,r===1200?"utf16le":"utf8").replace(Za,"").replace(xd,"!"),r===1200&&c%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function mN(e){var r=e.read_shift(4),t=e.slice(e.l,e.l+r);return e.l+=r,(r&3)>0&&(e.l+=4-(r&3)&3),t}function ED(e){var r={};return r.Size=e.read_shift(4),e.l+=r.Size+3-(r.Size-1)%4,r}function _x(e,r,t){var n=e.read_shift(2),a,s=t||{};if(e.l+=2,r!==R4&&n!==r&&eD.indexOf(r)===-1&&!((r&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+r+" saw "+n);switch(r===R4?n:r){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return fN(e,n,4).replace(Za,"");case 31:return hN(e);case 64:return bb(e);case 65:return mN(e);case 71:return ED(e);case 80:return g2(e,n,!s.raw).replace(Za,"");case 81:return bD(e,n).replace(Za,"");case 4108:return _D(e);case 4126:case 4127:return n==4127?vD(e):yD(e);default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+n)}}function F4(e,r){var t=ut(4),n=ut(4);switch(t.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,r);break;case 5:n=ut(8),n.write_shift(8,r,"f");break;case 11:n.write_shift(4,r?1:0);break;case 64:n=pD(r);break;case 31:case 80:for(n=ut(4+2*(r.length+1)+(r.length%2?0:2)),n.write_shift(4,r.length+1),n.write_shift(0,r,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+r)}return ya([t,n])}function L4(e,r){var t=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],c=0,d=0,x=-1,f={};for(c=0;c!=a;++c){var g=e.read_shift(4),v=e.read_shift(4);s[c]=[g,v+t]}s.sort(function(D,I){return D[1]-I[1]});var w={};for(c=0;c!=a;++c){if(e.l!==s[c][1]){var E=!0;if(c>0&&r)switch(r[s[c-1][0]].t){case 2:e.l+2===s[c][1]&&(e.l+=2,E=!1);break;case 80:e.l<=s[c][1]&&(e.l=s[c][1],E=!1);break;case 4108:e.l<=s[c][1]&&(e.l=s[c][1],E=!1);break}if((!r||c==0)&&e.l<=s[c][1]&&(E=!1,e.l=s[c][1]),E)throw new Error("Read Error: Expected address "+s[c][1]+" at "+e.l+" :"+c)}if(r){var N=r[s[c][0]];if(w[N.n]=_x(e,N.t,{raw:!0}),N.p==="version"&&(w[N.n]=String(w[N.n]>>16)+"."+("0000"+String(w[N.n]&65535)).slice(-4)),N.n=="CodePage")switch(w[N.n]){case 0:w[N.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:yi(d=w[N.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+w[N.n])}}else if(s[c][0]===1){if(d=w.CodePage=_x(e,gb),yi(d),x!==-1){var S=e.l;e.l=s[x][1],f=M4(e,d),e.l=S}}else if(s[c][0]===0){if(d===0){x=c,e.l=s[c+1][1];continue}f=M4(e,d)}else{var T=f[s[c][0]],j;switch(e[e.l]){case 65:e.l+=4,j=mN(e);break;case 30:e.l+=4,j=g2(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,j=g2(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,j=e.read_shift(4,"i");break;case 19:e.l+=4,j=e.read_shift(4);break;case 5:e.l+=4,j=e.read_shift(8,"f");break;case 11:e.l+=4,j=Yn(e,4);break;case 64:e.l+=4,j=Nn(bb(e));break;default:throw new Error("unparsed value: "+e[e.l])}w[T]=j}}return e.l=t+n,w}var gN=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function kD(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function B4(e,r,t){var n=ut(8),a=[],s=[],c=8,d=0,x=ut(8),f=ut(8);if(x.write_shift(4,2),x.write_shift(4,1200),f.write_shift(4,1),s.push(x),a.push(f),c+=8+x.length,!r){f=ut(8),f.write_shift(4,0),a.unshift(f);var g=[ut(4)];for(g[0].write_shift(4,e.length),d=0;d<e.length;++d){var v=e[d][0];for(x=ut(8+2*(v.length+1)+(v.length%2?0:2)),x.write_shift(4,d+2),x.write_shift(4,v.length+1),x.write_shift(0,v,"dbcs");x.l!=x.length;)x.write_shift(1,0);g.push(x)}x=ya(g),s.unshift(x),c+=8+x.length}for(d=0;d<e.length;++d)if(!(r&&!r[e[d][0]])&&!(gN.indexOf(e[d][0])>-1||oN.indexOf(e[d][0])>-1)&&e[d][1]!=null){var w=e[d][1],E=0;if(r){E=+r[e[d][0]];var N=t[E];if(N.p=="version"&&typeof w=="string"){var S=w.split(".");w=(+S[0]<<16)+(+S[1]||0)}x=F4(N.t,w)}else{var T=kD(w);T==-1&&(T=31,w=String(w)),x=F4(T,w)}s.push(x),f=ut(8),f.write_shift(4,r?E:2+d),a.push(f),c+=8+x.length}var j=8*(s.length+1);for(d=0;d<s.length;++d)a[d].write_shift(4,j),j+=s[d].length;return n.write_shift(4,c),n.write_shift(4,s.length),ya([n].concat(a).concat(s))}function P4(e,r,t){var n=e.content;if(!n)return{};Oa(n,0);var a,s,c,d,x=0;n.chk("feff","Byte Order: "),n.read_shift(2);var f=n.read_shift(4),g=n.read_shift(16);if(g!==Yt.utils.consts.HEADER_CLSID&&g!==t)throw new Error("Bad PropertySet CLSID "+g);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),d=n.read_shift(4),a===1&&d!==n.l)throw new Error("Length mismatch: "+d+" !== "+n.l);a===2&&(c=n.read_shift(16),x=n.read_shift(4));var v=L4(n,r),w={SystemIdentifier:f};for(var E in v)w[E]=v[E];if(w.FMTID=s,a===1)return w;if(x-n.l==2&&(n.l+=2),n.l!==x)throw new Error("Length mismatch 2: "+n.l+" !== "+x);var N;try{N=L4(n,null)}catch{}for(E in N)w[E]=N[E];return w.FMTID=[s,c],w}function U4(e,r,t,n,a,s){var c=ut(a?68:48),d=[c];c.write_shift(2,65534),c.write_shift(2,0),c.write_shift(4,842412599),c.write_shift(16,Yt.utils.consts.HEADER_CLSID,"hex"),c.write_shift(4,a?2:1),c.write_shift(16,r,"hex"),c.write_shift(4,a?68:48);var x=B4(e,t,n);if(d.push(x),a){var f=B4(a,null,null);c.write_shift(16,s,"hex"),c.write_shift(4,68+x.length),d.push(f)}return ya(d)}function mo(e,r){return e.read_shift(r),null}function SD(e,r){r||(r=ut(e));for(var t=0;t<e;++t)r.write_shift(1,0);return r}function ND(e,r,t){for(var n=[],a=e.l+r;e.l<a;)n.push(t(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Yn(e,r){return e.read_shift(r)===1}function Ya(e,r){return r||(r=ut(2)),r.write_shift(2,+!!e),r}function ia(e){return e.read_shift(2,"u")}function Qs(e,r){return r||(r=ut(2)),r.write_shift(2,e),r}function pN(e,r){return ND(e,r,ia)}function AD(e){var r=e.read_shift(1),t=e.read_shift(1);return t===1?r:r===1}function bN(e,r,t){return t||(t=ut(2)),t.write_shift(1,r=="e"?+e:+!!e),t.write_shift(1,r=="e"?1:0),t}function gf(e,r,t){var n=e.read_shift(t&&t.biff>=12?2:1),a="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else t.biff==12&&(a="wstr");t.biff>=2&&t.biff<=5&&(a="cpstr");var c=n?e.read_shift(n,a):"";return c}function TD(e){var r=e.read_shift(2),t=e.read_shift(1),n=t&4,a=t&8,s=1+(t&1),c=0,d,x={};a&&(c=e.read_shift(2)),n&&(d=e.read_shift(4));var f=s==2?"dbcs-cont":"sbcs-cont",g=r===0?"":e.read_shift(r,f);return a&&(e.l+=4*c),n&&(e.l+=d),x.t=g,a||(x.raw="<t>"+x.t+"</t>",x.r=x.t),x}function CD(e){var r=e.t||"",t=ut(3);t.write_shift(2,r.length),t.write_shift(1,1);var n=ut(2*r.length);n.write_shift(2*r.length,r,"utf16le");var a=[t,n];return ya(a)}function Sc(e,r,t){var n;if(t){if(t.biff>=2&&t.biff<=5)return e.read_shift(r,"cpstr");if(t.biff>=12)return e.read_shift(r,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(r,"sbcs-cont"):n=e.read_shift(r,"dbcs-cont"),n}function pf(e,r,t){var n=e.read_shift(t&&t.biff==2?1:2);return n===0?(e.l++,""):Sc(e,n,t)}function Fc(e,r,t){if(t.biff>5)return pf(e,r,t);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,t.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function vN(e,r,t){return t||(t=ut(3+2*e.length)),t.write_shift(2,e.length),t.write_shift(1,1),t.write_shift(31,e,"utf16le"),t}function jD(e){var r=e.read_shift(1);e.l++;var t=e.read_shift(2);return e.l+=2,[r,t]}function OD(e){var r=e.read_shift(4),t=e.l,n=!1;r>24&&(e.l+=r-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=t);var a=e.read_shift((n?r-24:r)>>1,"utf16le").replace(Za,"");return n&&(e.l+=24),a}function RD(e){for(var r=e.read_shift(2),t="";r-- >0;)t+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return t+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var c=e.read_shift(s>>1,"utf16le").replace(Za,"");return t+c}function ID(e,r){var t=e.read_shift(16);switch(t){case"e0c9ea79f9bace118c8200aa004ba90b":return OD(e);case"0303000000000000c000000000000046":return RD(e);default:throw new Error("Unsupported Moniker "+t)}}function a1(e){var r=e.read_shift(4),t=r>0?e.read_shift(r,"utf16le").replace(Za,""):"";return t}function z4(e,r){r||(r=ut(6+e.length*2)),r.write_shift(4,1+e.length);for(var t=0;t<e.length;++t)r.write_shift(2,e.charCodeAt(t));return r.write_shift(2,0),r}function DD(e,r){var t=e.l+r,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,c,d,x,f="",g,v;a&16&&(s=a1(e,t-e.l)),a&128&&(c=a1(e,t-e.l)),(a&257)===257&&(d=a1(e,t-e.l)),(a&257)===1&&(x=ID(e,t-e.l)),a&8&&(f=a1(e,t-e.l)),a&32&&(g=e.read_shift(16)),a&64&&(v=bb(e)),e.l=t;var w=c||d||x||"";w&&f&&(w+="#"+f),w||(w="#"+f),a&2&&w.charAt(0)=="/"&&w.charAt(1)!="/"&&(w="file://"+w);var E={Target:w};return g&&(E.guid=g),v&&(E.time=v),s&&(E.Tooltip=s),E}function MD(e){var r=ut(512),t=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}r.write_shift(4,2),r.write_shift(4,s);var c=[8,6815827,6619237,4849780,83];for(t=0;t<c.length;++t)r.write_shift(4,c[t]);if(s==28)n=n.slice(1),z4(n,r);else if(s&2){for(c="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<c.length;++t)r.write_shift(1,parseInt(c[t],16));var d=a>-1?n.slice(0,a):n;for(r.write_shift(4,2*(d.length+1)),t=0;t<d.length;++t)r.write_shift(2,d.charCodeAt(t));r.write_shift(2,0),s&8&&z4(a>-1?n.slice(a+1):"",r)}else{for(c="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<c.length;++t)r.write_shift(1,parseInt(c[t],16));for(var x=0;n.slice(x*3,x*3+3)=="../"||n.slice(x*3,x*3+3)=="..\\";)++x;for(r.write_shift(2,x),r.write_shift(4,n.length-3*x+1),t=0;t<n.length-3*x;++t)r.write_shift(1,n.charCodeAt(t+3*x)&255);for(r.write_shift(1,0),r.write_shift(2,65535),r.write_shift(2,57005),t=0;t<6;++t)r.write_shift(4,0)}return r.slice(0,r.l)}function yN(e){var r=e.read_shift(1),t=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[r,t,n,a]}function wN(e,r){var t=yN(e);return t[3]=0,t}function Xi(e){var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(2);return{r,c:t,ixfe:n}}function Nc(e,r,t,n){return n||(n=ut(6)),n.write_shift(2,e),n.write_shift(2,r),n.write_shift(2,t||0),n}function FD(e){var r=e.read_shift(2),t=e.read_shift(2);return e.l+=8,{type:r,flags:t}}function LD(e,r,t){return r===0?"":Fc(e,r,t)}function BD(e,r,t){var n=t.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),c=e.read_shift(n,"i");return[a,s,c]}function _N(e){var r=e.read_shift(2),t=mb(e);return[r,t]}function PD(e,r,t){e.l+=4,r-=4;var n=e.l+r,a=gf(e,r,t),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function Vx(e){var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r},e:{c:a,r:t}}}function EN(e,r){return r||(r=ut(8)),r.write_shift(2,e.s.r),r.write_shift(2,e.e.r),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c),r}function kN(e){var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r},e:{c:a,r:t}}}var UD=kN;function SN(e){e.l+=4;var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[t,r,n]}function zD(e){var r={};return e.l+=4,e.l+=16,r.fSharedNote=e.read_shift(2),e.l+=4,r}function HD(e){var r={};return e.l+=4,e.cf=e.read_shift(2),r}function Da(e){e.l+=2,e.l+=e.read_shift(2)}var GD={0:Da,4:Da,5:Da,6:Da,7:HD,8:Da,9:Da,10:Da,11:Da,12:Da,13:zD,14:Da,15:Da,16:Da,17:Da,18:Da,19:Da,20:Da,21:SN};function VD(e,r){for(var t=e.l+r,n=[];e.l<t;){var a=e.read_shift(2);e.l-=2;try{n.push(GD[a](e,t-e.l))}catch{return e.l=t,n}}return e.l!=t&&(e.l=t),n}function s1(e,r){var t={BIFFVer:0,dt:0};switch(t.BIFFVer=e.read_shift(2),r-=2,r>=2&&(t.dt=e.read_shift(2),e.l-=2),t.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(r>6)throw new Error("Unexpected BIFF Ver "+t.BIFFVer)}return e.read_shift(r),t}function vb(e,r,t){var n=1536,a=16;switch(t.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=ut(a);return s.write_shift(2,n),s.write_shift(2,r),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function WD(e,r){return r===0||e.read_shift(2),1200}function qD(e,r,t){if(t.enc)return e.l+=r,"";var n=e.l,a=Fc(e,0,t);return e.read_shift(r+n-e.l),a}function XD(e,r){var t=!r||r.biff==8,n=ut(t?112:54);for(n.write_shift(r.biff==8?2:1,7),t&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(t?0:536870912));n.l<n.length;)n.write_shift(1,t?0:32);return n}function KD(e,r,t){var n=t&&t.biff==8||r==2?e.read_shift(2):(e.l+=r,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function YD(e,r,t){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var c=gf(e,0,t);return c.length===0&&(c="Sheet1"),{pos:n,hs:a,dt:s,name:c}}function $D(e,r){var t=!r||r.biff>=8?2:1,n=ut(8+t*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),r.biff>=8&&n.write_shift(1,1),n.write_shift(t*e.name.length,e.name,r.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function ZD(e,r){for(var t=e.l+r,n=e.read_shift(4),a=e.read_shift(4),s=[],c=0;c!=a&&e.l<t;++c)s.push(TD(e));return s.Count=n,s.Unique=a,s}function JD(e,r){var t=ut(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=CD(e[a]);var s=ya([t].concat(n));return s.parts=[t.length].concat(n.map(function(c){return c.length})),s}function QD(e,r){var t={};return t.dsst=e.read_shift(2),e.l+=r-2,t}function e9(e){var r={};r.r=e.read_shift(2),r.c=e.read_shift(2),r.cnt=e.read_shift(2)-r.c;var t=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(r.level=n&7),n&32&&(r.hidden=!0),n&64&&(r.hpt=t/20),r}function t9(e){var r=FD(e);if(r.type!=2211)throw new Error("Invalid Future Record "+r.type);var t=e.read_shift(4);return t!==0}function r9(e){return e.read_shift(2),e.read_shift(4)}function H4(e,r,t){var n=0;t&&t.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);t&&t.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function n9(e){var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2),x=e.read_shift(2),f=e.read_shift(2);return{Pos:[r,t],Dim:[n,a],Flags:s,CurTab:c,FirstTab:d,Selected:x,TabRatio:f}}function a9(){var e=ut(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function s9(e,r,t){if(t&&t.biff>=2&&t.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function i9(e){var r=ut(18),t=1718;return e&&e.RTL&&(t|=64),r.write_shift(2,t),r.write_shift(4,0),r.write_shift(4,64),r.write_shift(4,0),r.write_shift(4,0),r}function l9(){}function o9(e,r,t){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(t&&t.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=gf(e,0,t),n}function c9(e,r){var t=e.name||"Arial",n=r&&r.biff==5,a=n?15+t.length:16+2*t.length,s=ut(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le"),s}function u9(e){var r=Xi(e);return r.isst=e.read_shift(4),r}function d9(e,r,t,n){var a=ut(10);return Nc(e,r,n,a),a.write_shift(4,t),a}function f9(e,r,t){t.biffguess&&t.biff==2&&(t.biff=5);var n=e.l+r,a=Xi(e);t.biff==2&&e.l++;var s=pf(e,n-e.l,t);return a.val=s,a}function h9(e,r,t,n,a){var s=!a||a.biff==8,c=ut(8+ +s+(1+s)*t.length);return Nc(e,r,n,c),c.write_shift(2,t.length),s&&c.write_shift(1,1),c.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),c}function x9(e,r,t){var n=e.read_shift(2),a=Fc(e,0,t);return[n,a]}function m9(e,r,t,n){var a=t&&t.biff==5;n||(n=ut(a?3+r.length:5+2*r.length)),n.write_shift(2,e),n.write_shift(a?1:2,r.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var g9=Fc;function G4(e,r,t){var n=e.l+r,a=t.biff==8||!t.biff?4:2,s=e.read_shift(a),c=e.read_shift(a),d=e.read_shift(2),x=e.read_shift(2);return e.l=n,{s:{r:s,c:d},e:{r:c,c:x}}}function p9(e,r){var t=r.biff==8||!r.biff?4:2,n=ut(2*t+6);return n.write_shift(t,e.s.r),n.write_shift(t,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function b9(e){var r=e.read_shift(2),t=e.read_shift(2),n=_N(e);return{r,c:t,ixfe:n[0],rknum:n[1]}}function v9(e,r){for(var t=e.l+r-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<t;)s.push(_N(e));if(e.l!==t)throw new Error("MulRK read error");var c=e.read_shift(2);if(s.length!=c-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:c,rkrec:s}}function y9(e,r){for(var t=e.l+r-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<t;)s.push(e.read_shift(2));if(e.l!==t)throw new Error("MulBlank read error");var c=e.read_shift(2);if(s.length!=c-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:c,ixfe:s}}function w9(e,r,t,n){var a={},s=e.read_shift(4),c=e.read_shift(4),d=e.read_shift(4),x=e.read_shift(2);return a.patternType=tD[d>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=c&15,a.dgRight=c>>4&15,a.dgTop=c>>8&15,a.dgBottom=c>>12&15,a.icvLeft=c>>16&127,a.icvRight=c>>23&127,a.grbitDiag=c>>30&3,a.icvTop=d&127,a.icvBottom=d>>7&127,a.icvDiag=d>>14&127,a.dgDiag=d>>21&15,a.icvFore=x&127,a.icvBack=x>>7&127,a.fsxButton=x>>14&1),a}function _9(e,r,t){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,r-=6,n.data=w9(e,r,n.fStyle,t),n}function V4(e,r,t,n){var a=t&&t.biff==5;n||(n=ut(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,r<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function E9(e){e.l+=4;var r=[e.read_shift(2),e.read_shift(2)];if(r[0]!==0&&r[0]--,r[1]!==0&&r[1]--,r[0]>7||r[1]>7)throw new Error("Bad Gutters: "+r.join("|"));return r}function k9(e){var r=ut(8);return r.write_shift(4,0),r.write_shift(2,0),r.write_shift(2,0),r}function W4(e,r,t){var n=Xi(e);(t.biff==2||r==9)&&++e.l;var a=AD(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function S9(e,r,t,n,a,s){var c=ut(8);return Nc(e,r,n,c),bN(t,s,c),c}function N9(e,r,t){t.biffguess&&t.biff==2&&(t.biff=5);var n=Xi(e),a=Pa(e);return n.val=a,n}function A9(e,r,t,n){var a=ut(14);return Nc(e,r,n,a),kc(t,a),a}var q4=LD;function T9(e,r,t){var n=e.l+r,a=e.read_shift(2),s=e.read_shift(2);if(t.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var c=Sc(e,s),d=[];n>e.l;)d.push(pf(e));return[s,a,c,d]}function X4(e,r,t){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return t.sbcch===14849&&(a=PD(e,r-2,t)),s.body=a||e.read_shift(r-2),typeof a=="string"&&(s.Name=a),s}var C9=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function K4(e,r,t){var n=e.l+r,a=e.read_shift(2),s=e.read_shift(1),c=e.read_shift(1),d=e.read_shift(t&&t.biff==2?1:2),x=0;(!t||t.biff>=5)&&(t.biff!=5&&(e.l+=2),x=e.read_shift(2),t.biff==5&&(e.l+=2),e.l+=4);var f=Sc(e,c,t);a&32&&(f=C9[f.charCodeAt(0)]);var g=n-e.l;t&&t.biff==2&&--g;var v=n==e.l||d===0||!(g>0)?[]:VB(e,g,t,d);return{chKey:s,Name:f,itab:x,rgce:v}}function NN(e,r,t){if(t.biff<8)return j9(e,r,t);for(var n=[],a=e.l+r,s=e.read_shift(t.biff>8?4:2);s--!==0;)n.push(BD(e,t.biff>8?12:6,t));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function j9(e,r,t){e[e.l+1]==3&&e[e.l]++;var n=gf(e,r,t);return n.charCodeAt(0)==3?n.slice(1):n}function O9(e,r,t){if(t.biff<8){e.l+=r;return}var n=e.read_shift(2),a=e.read_shift(2),s=Sc(e,n,t),c=Sc(e,a,t);return[s,c]}function R9(e,r,t){var n=kN(e);e.l++;var a=e.read_shift(1);return r-=8,[WB(e,r,t),a,n]}function Y4(e,r,t){var n=UD(e);switch(t.biff){case 2:e.l++,r-=7;break;case 3:case 4:e.l+=2,r-=8;break;default:e.l+=6,r-=12}return[n,HB(e,r,t)]}function I9(e){var r=e.read_shift(4)!==0,t=e.read_shift(4)!==0,n=e.read_shift(4);return[r,t,n]}function D9(e,r,t){if(!(t.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),c=e.read_shift(2),d=Fc(e,0,t);return t.biff<8&&e.read_shift(1),[{r:n,c:a},d,c,s]}}function M9(e,r,t){return D9(e,r,t)}function F9(e,r){for(var t=[],n=e.read_shift(2);n--;)t.push(Vx(e));return t}function L9(e){var r=ut(2+e.length*8);r.write_shift(2,e.length);for(var t=0;t<e.length;++t)EN(e[t],r);return r}function B9(e,r,t){if(t&&t.biff<8)return U9(e,r,t);var n=SN(e),a=VD(e,r-22,n[1]);return{cmo:n,ft:a}}var P9={8:function(e,r){var t=e.l+r;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=t,{fmt:n}}};function U9(e,r,t){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,r-=36;var c=[];return c.push((P9[n]||za)(e,r,t)),{cmo:[a,n,s],ft:c}}function z9(e,r,t){var n=e.l,a="";try{e.l+=4;var s=(t.lastobj||{cmo:[0,0]}).cmo[1],c;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:c=jD(e,6,t);var d=e.read_shift(2);e.read_shift(2),ia(e,2);var x=e.read_shift(2);e.l+=x;for(var f=1;f<e.lens.length-1;++f){if(e.l-n!=e.lens[f])throw new Error("TxO: bad continue record");var g=e[e.l],v=Sc(e,e.lens[f+1]-e.lens[f]-1);if(a+=v,a.length>=(g?d:2*d))break}if(a.length!==d&&a.length!==d*2)throw new Error("cchText: "+d+" != "+a.length);return e.l=n+r,{t:a}}catch{return e.l=n+r,{t:a}}}function H9(e,r){var t=Vx(e);e.l+=16;var n=DD(e,r-24);return[t,n]}function G9(e){var r=ut(24),t=Mn(e[0]);r.write_shift(2,t.r),r.write_shift(2,t.r),r.write_shift(2,t.c),r.write_shift(2,t.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)r.write_shift(1,parseInt(n[a],16));return ya([r,MD(e[1])])}function V9(e,r){e.read_shift(2);var t=Vx(e),n=e.read_shift((r-10)/2,"dbcs-cont");return n=n.replace(Za,""),[t,n]}function W9(e){var r=e[1].Tooltip,t=ut(10+2*(r.length+1));t.write_shift(2,2048);var n=Mn(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var a=0;a<r.length;++a)t.write_shift(2,r.charCodeAt(a));return t.write_shift(2,0),t}function q9(e){var r=[0,0],t;return t=e.read_shift(2),r[0]=I4[t]||t,t=e.read_shift(2),r[1]=I4[t]||t,r}function X9(e){return e||(e=ut(4)),e.write_shift(2,1),e.write_shift(2,1),e}function K9(e){for(var r=e.read_shift(2),t=[];r-- >0;)t.push(wN(e));return t}function Y9(e){for(var r=e.read_shift(2),t=[];r-- >0;)t.push(wN(e));return t}function $9(e){e.l+=2;var r={cxfs:0,crc:0};return r.cxfs=e.read_shift(2),r.crc=e.read_shift(4),r}function AN(e,r,t){if(!t.cellStyles)return za(e,r);var n=t&&t.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),c=e.read_shift(n),d=e.read_shift(n),x=e.read_shift(2);n==2&&(e.l+=2);var f={s:a,e:s,w:c,ixfe:d,flags:x};return(t.biff>=5||!t.biff)&&(f.level=x>>8&7),f}function Z9(e,r){var t=ut(12);t.write_shift(2,r),t.write_shift(2,r),t.write_shift(2,e.width*256),t.write_shift(2,0);var n=0;return e.hidden&&(n|=1),t.write_shift(1,n),n=e.level||0,t.write_shift(1,n),t.write_shift(2,0),t}function J9(e,r){var t={};return r<32||(e.l+=16,t.header=Pa(e),t.footer=Pa(e),e.l+=2),t}function Q9(e,r,t){var n={area:!1};if(t.biff!=5)return e.l+=r,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function eM(e){for(var r=ut(2*e),t=0;t<e;++t)r.write_shift(2,t+1);return r}var tM=Xi,rM=pN,nM=pf;function aM(e){var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(4),a={fmt:r,env:t,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function sM(e,r,t){t.biffguess&&t.biff==5&&(t.biff=2);var n=Xi(e);++e.l;var a=Fc(e,r-7,t);return n.t="str",n.val=a,n}function iM(e){var r=Xi(e);++e.l;var t=Pa(e);return r.t="n",r.val=t,r}function lM(e,r,t){var n=ut(15);return wf(n,e,r),n.write_shift(8,t,"f"),n}function oM(e){var r=Xi(e);++e.l;var t=e.read_shift(2);return r.t="n",r.val=t,r}function cM(e,r,t){var n=ut(9);return wf(n,e,r),n.write_shift(2,t),n}function uM(e){var r=e.read_shift(1);return r===0?(e.l++,""):e.read_shift(r,"sbcs-cont")}function dM(e,r){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=r-13}function fM(e,r,t){var n=e.l+r,a=Xi(e),s=e.read_shift(2),c=Sc(e,s,t);return e.l=n,a.t="str",a.val=c,a}var hM=[2,3,48,49,131,139,140,245],p2=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},r=zx({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(d,x){var f=[],g=Ao(1);switch(x.type){case"base64":g=Rs(Ms(d));break;case"binary":g=Rs(d);break;case"buffer":case"array":g=d;break}Oa(g,0);var v=g.read_shift(1),w=!!(v&136),E=!1,N=!1;switch(v){case 2:break;case 3:break;case 48:E=!0,w=!0;break;case 49:E=!0,w=!0;break;case 131:break;case 139:break;case 140:N=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+v.toString(16))}var S=0,T=521;v==2&&(S=g.read_shift(2)),g.l+=3,v!=2&&(S=g.read_shift(4)),S>1048576&&(S=1e6),v!=2&&(T=g.read_shift(2));var j=g.read_shift(2),D=x.codepage||1252;v!=2&&(g.l+=16,g.read_shift(1),g[g.l]!==0&&(D=e[g[g.l]]),g.l+=1,g.l+=2),N&&(g.l+=36);for(var I=[],L={},V=Math.min(g.length,v==2?521:T-10-(E?264:0)),X=N?32:11;g.l<V&&g[g.l]!=13;)switch(L={},L.name=Bd.utils.decode(D,g.slice(g.l,g.l+X)).replace(/[\u0000\r\n].*$/g,""),g.l+=X,L.type=String.fromCharCode(g.read_shift(1)),v!=2&&!N&&(L.offset=g.read_shift(4)),L.len=g.read_shift(1),v==2&&(L.offset=g.read_shift(2)),L.dec=g.read_shift(1),L.name.length&&I.push(L),v!=2&&(g.l+=N?13:14),L.type){case"B":(!E||L.len!=8)&&x.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"G":case"P":x.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+L.type)}if(g[g.l]!==13&&(g.l=T-1),g.read_shift(1)!==13)throw new Error("DBF Terminator not found "+g.l+" "+g[g.l]);g.l=T;var M=0,W=0;for(f[0]=[],W=0;W!=I.length;++W)f[0][W]=I[W].name;for(;S-- >0;){if(g[g.l]===42){g.l+=j;continue}for(++g.l,f[++M]=[],W=0,W=0;W!=I.length;++W){var z=g.slice(g.l,g.l+I[W].len);g.l+=I[W].len,Oa(z,0);var ae=Bd.utils.decode(D,z);switch(I[W].type){case"C":ae.trim().length&&(f[M][W]=ae.replace(/\s+$/,""));break;case"D":ae.length===8?f[M][W]=new Date(+ae.slice(0,4),+ae.slice(4,6)-1,+ae.slice(6,8)):f[M][W]=ae;break;case"F":f[M][W]=parseFloat(ae.trim());break;case"+":case"I":f[M][W]=N?z.read_shift(-4,"i")^2147483648:z.read_shift(4,"i");break;case"L":switch(ae.trim().toUpperCase()){case"Y":case"T":f[M][W]=!0;break;case"N":case"F":f[M][W]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+ae+"|")}break;case"M":if(!w)throw new Error("DBF Unexpected MEMO for type "+v.toString(16));f[M][W]="##MEMO##"+(N?parseInt(ae.trim(),10):z.read_shift(4));break;case"N":ae=ae.replace(/\u0000/g,"").trim(),ae&&ae!="."&&(f[M][W]=+ae||0);break;case"@":f[M][W]=new Date(z.read_shift(-8,"f")-621356832e5);break;case"T":f[M][W]=new Date((z.read_shift(4)-2440588)*864e5+z.read_shift(4));break;case"Y":f[M][W]=z.read_shift(4,"i")/1e4+z.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":f[M][W]=-z.read_shift(-8,"f");break;case"B":if(E&&I[W].len==8){f[M][W]=z.read_shift(8,"f");break}case"G":case"P":z.l+=I[W].len;break;case"0":if(I[W].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+I[W].type)}}}if(v!=2&&g.l<g.length&&g[g.l++]!=26)throw new Error("DBF EOF Marker missing "+(g.l-1)+" of "+g.length+" "+g[g.l-1].toString(16));return x&&x.sheetRows&&(f=f.slice(0,x.sheetRows)),x.DBF=I,f}function n(d,x){var f=x||{};f.dateNF||(f.dateNF="yyyymmdd");var g=iu(t(d,f),f);return g["!cols"]=f.DBF.map(function(v){return{wch:v.len,DBF:v}}),delete f.DBF,g}function a(d,x){try{return Ro(n(d,x),x)}catch(f){if(x&&x.WTF)throw f}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function c(d,x){var f=x||{};if(+f.codepage>=0&&yi(+f.codepage),f.type=="string")throw new Error("Cannot write DBF to JS string");var g=us(),v=Sx(d,{header:1,raw:!0,cellDates:!0}),w=v[0],E=v.slice(1),N=d["!cols"]||[],S=0,T=0,j=0,D=1;for(S=0;S<w.length;++S){if(((N[S]||{}).DBF||{}).name){w[S]=N[S].DBF.name,++j;continue}if(w[S]!=null){if(++j,typeof w[S]=="number"&&(w[S]=w[S].toString(10)),typeof w[S]!="string")throw new Error("DBF Invalid column name "+w[S]+" |"+typeof w[S]+"|");if(w.indexOf(w[S])!==S){for(T=0;T<1024;++T)if(w.indexOf(w[S]+"_"+T)==-1){w[S]+="_"+T;break}}}}var I=zr(d["!ref"]),L=[],V=[],X=[];for(S=0;S<=I.e.c-I.s.c;++S){var M="",W="",z=0,ae=[];for(T=0;T<E.length;++T)E[T][S]!=null&&ae.push(E[T][S]);if(ae.length==0||w[S]==null){L[S]="?";continue}for(T=0;T<ae.length;++T){switch(typeof ae[T]){case"number":W="B";break;case"string":W="C";break;case"boolean":W="L";break;case"object":W=ae[T]instanceof Date?"D":"C";break;default:W="C"}z=Math.max(z,String(ae[T]).length),M=M&&M!=W?"C":W}z>250&&(z=250),W=((N[S]||{}).DBF||{}).type,W=="C"&&N[S].DBF.len>z&&(z=N[S].DBF.len),M=="B"&&W=="N"&&(M="N",X[S]=N[S].DBF.dec,z=N[S].DBF.len),V[S]=M=="C"||W=="N"?z:s[M]||0,D+=V[S],L[S]=M}var Z=g.next(32);for(Z.write_shift(4,318902576),Z.write_shift(4,E.length),Z.write_shift(2,296+32*j),Z.write_shift(2,D),S=0;S<4;++S)Z.write_shift(4,0);for(Z.write_shift(4,0|(+r[gS]||3)<<8),S=0,T=0;S<w.length;++S)if(w[S]!=null){var H=g.next(32),he=(w[S].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);H.write_shift(1,he,"sbcs"),H.write_shift(1,L[S]=="?"?"C":L[S],"sbcs"),H.write_shift(4,T),H.write_shift(1,V[S]||s[L[S]]||0),H.write_shift(1,X[S]||0),H.write_shift(1,2),H.write_shift(4,0),H.write_shift(1,0),H.write_shift(4,0),H.write_shift(4,0),T+=V[S]||s[L[S]]||0}var q=g.next(264);for(q.write_shift(4,13),S=0;S<65;++S)q.write_shift(4,0);for(S=0;S<E.length;++S){var se=g.next(D);for(se.write_shift(1,0),T=0;T<w.length;++T)if(w[T]!=null)switch(L[T]){case"L":se.write_shift(1,E[S][T]==null?63:E[S][T]?84:70);break;case"B":se.write_shift(8,E[S][T]||0,"f");break;case"N":var ve="0";for(typeof E[S][T]=="number"&&(ve=E[S][T].toFixed(X[T]||0)),j=0;j<V[T]-ve.length;++j)se.write_shift(1,32);se.write_shift(1,ve,"sbcs");break;case"D":E[S][T]?(se.write_shift(4,("0000"+E[S][T].getFullYear()).slice(-4),"sbcs"),se.write_shift(2,("00"+(E[S][T].getMonth()+1)).slice(-2),"sbcs"),se.write_shift(2,("00"+E[S][T].getDate()).slice(-2),"sbcs")):se.write_shift(8,"00000000","sbcs");break;case"C":var le=String(E[S][T]!=null?E[S][T]:"").slice(0,V[T]);for(se.write_shift(1,le,"sbcs"),j=0;j<V[T]-le.length;++j)se.write_shift(1,32);break}}return g.next(1).write_shift(1,26),g.end()}return{to_workbook:a,to_sheet:n,from_sheet:c}})(),TN=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},r=new RegExp("\x1BN("+Vn(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(w,E){var N=e[E];return typeof N=="number"?i4(N):N},n=function(w,E,N){var S=E.charCodeAt(0)-32<<4|N.charCodeAt(0)-48;return S==59?w:i4(S)};e["|"]=254;function a(w,E){switch(E.type){case"base64":return s(Ms(w),E);case"binary":return s(w,E);case"buffer":return s(Ar&&Buffer.isBuffer(w)?w.toString("binary"):Oo(w),E);case"array":return s(Ec(w),E)}throw new Error("Unrecognized type "+E.type)}function s(w,E){var N=w.split(/[\n\r]+/),S=-1,T=-1,j=0,D=0,I=[],L=[],V=null,X={},M=[],W=[],z=[],ae=0,Z;for(+E.codepage>=0&&yi(+E.codepage);j!==N.length;++j){ae=0;var H=N[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(r,t),he=H.replace(/;;/g,"\0").split(";").map(function(P){return P.replace(/\u0000/g,";")}),q=he[0],se;if(H.length>0)switch(q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":he[1].charAt(0)=="P"&&L.push(H.slice(3).replace(/;;/g,";"));break;case"C":var ve=!1,le=!1,ge=!1,ie=!1,Le=-1,Q=-1;for(D=1;D<he.length;++D)switch(he[D].charAt(0)){case"A":break;case"X":T=parseInt(he[D].slice(1))-1,le=!0;break;case"Y":for(S=parseInt(he[D].slice(1))-1,le||(T=0),Z=I.length;Z<=S;++Z)I[Z]=[];break;case"K":se=he[D].slice(1),se.charAt(0)==='"'?se=se.slice(1,se.length-1):se==="TRUE"?se=!0:se==="FALSE"?se=!1:isNaN(_i(se))?isNaN(X0(se).getDate())||(se=Nn(se)):(se=_i(se),V!==null&&au(V)&&(se=Gx(se))),ve=!0;break;case"E":ie=!0;var B=G0(he[D].slice(1),{r:S,c:T});I[S][T]=[I[S][T],B];break;case"S":ge=!0,I[S][T]=[I[S][T],"S5S"];break;case"G":break;case"R":Le=parseInt(he[D].slice(1))-1;break;case"C":Q=parseInt(he[D].slice(1))-1;break;default:if(E&&E.WTF)throw new Error("SYLK bad record "+H)}if(ve&&(I[S][T]&&I[S][T].length==2?I[S][T][0]=se:I[S][T]=se,V=null),ge){if(ie)throw new Error("SYLK shared formula cannot have own formula");var te=Le>-1&&I[Le][Q];if(!te||!te[1])throw new Error("SYLK shared formula cannot find base");I[S][T][1]=qN(te[1],{r:S-Le,c:T-Q})}break;case"F":var U=0;for(D=1;D<he.length;++D)switch(he[D].charAt(0)){case"X":T=parseInt(he[D].slice(1))-1,++U;break;case"Y":for(S=parseInt(he[D].slice(1))-1,Z=I.length;Z<=S;++Z)I[Z]=[];break;case"M":ae=parseInt(he[D].slice(1))/20;break;case"F":break;case"G":break;case"P":V=L[parseInt(he[D].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(z=he[D].slice(1).split(" "),Z=parseInt(z[0],10);Z<=parseInt(z[1],10);++Z)ae=parseInt(z[2],10),W[Z-1]=ae===0?{hidden:!0}:{wch:ae},To(W[Z-1]);break;case"C":T=parseInt(he[D].slice(1))-1,W[T]||(W[T]={});break;case"R":S=parseInt(he[D].slice(1))-1,M[S]||(M[S]={}),ae>0?(M[S].hpt=ae,M[S].hpx=Y0(ae)):ae===0&&(M[S].hidden=!0);break;default:if(E&&E.WTF)throw new Error("SYLK bad record "+H)}U<1&&(V=null);break;default:if(E&&E.WTF)throw new Error("SYLK bad record "+H)}}return M.length>0&&(X["!rows"]=M),W.length>0&&(X["!cols"]=W),E&&E.sheetRows&&(I=I.slice(0,E.sheetRows)),[I,X]}function c(w,E){var N=a(w,E),S=N[0],T=N[1],j=iu(S,E);return Vn(T).forEach(function(D){j[D]=T[D]}),j}function d(w,E){return Ro(c(w,E),E)}function x(w,E,N,S){var T="C;Y"+(N+1)+";X"+(S+1)+";K";switch(w.t){case"n":T+=w.v||0,w.f&&!w.F&&(T+=";E"+Sb(w.f,{r:N,c:S}));break;case"b":T+=w.v?"TRUE":"FALSE";break;case"e":T+=w.w||w.v;break;case"d":T+='"'+(w.w||w.v)+'"';break;case"s":T+='"'+w.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return T}function f(w,E){E.forEach(function(N,S){var T="F;W"+(S+1)+" "+(S+1)+" ";N.hidden?T+="0":(typeof N.width=="number"&&!N.wpx&&(N.wpx=qd(N.width)),typeof N.wpx=="number"&&!N.wch&&(N.wch=Xd(N.wpx)),typeof N.wch=="number"&&(T+=Math.round(N.wch))),T.charAt(T.length-1)!=" "&&w.push(T)})}function g(w,E){E.forEach(function(N,S){var T="F;";N.hidden?T+="M0;":N.hpt?T+="M"+20*N.hpt+";":N.hpx&&(T+="M"+20*Kd(N.hpx)+";"),T.length>2&&w.push(T+"R"+(S+1))})}function v(w,E){var N=["ID;PWXL;N;E"],S=[],T=zr(w["!ref"]),j,D=Array.isArray(w),I=`\r
`;N.push("P;PGeneral"),N.push("F;P0;DG0G8;M255"),w["!cols"]&&f(N,w["!cols"]),w["!rows"]&&g(N,w["!rows"]),N.push("B;Y"+(T.e.r-T.s.r+1)+";X"+(T.e.c-T.s.c+1)+";D"+[T.s.c,T.s.r,T.e.c,T.e.r].join(" "));for(var L=T.s.r;L<=T.e.r;++L)for(var V=T.s.c;V<=T.e.c;++V){var X=sr({r:L,c:V});j=D?(w[L]||[])[V]:w[X],!(!j||j.v==null&&(!j.f||j.F))&&S.push(x(j,w,L,V))}return N.join(I)+I+S.join(I)+I+"E"+I}return{to_workbook:d,to_sheet:c,from_sheet:v}})(),CN=(function(){function e(s,c){switch(c.type){case"base64":return r(Ms(s),c);case"binary":return r(s,c);case"buffer":return r(Ar&&Buffer.isBuffer(s)?s.toString("binary"):Oo(s),c);case"array":return r(Ec(s),c)}throw new Error("Unrecognized type "+c.type)}function r(s,c){for(var d=s.split(`
`),x=-1,f=-1,g=0,v=[];g!==d.length;++g){if(d[g].trim()==="BOT"){v[++x]=[],f=0;continue}if(!(x<0)){var w=d[g].trim().split(","),E=w[0],N=w[1];++g;for(var S=d[g]||"";(S.match(/["]/g)||[]).length&1&&g<d.length-1;)S+=`
`+d[++g];switch(S=S.trim(),+E){case-1:if(S==="BOT"){v[++x]=[],f=0;continue}else if(S!=="EOD")throw new Error("Unrecognized DIF special command "+S);break;case 0:S==="TRUE"?v[x][f]=!0:S==="FALSE"?v[x][f]=!1:isNaN(_i(N))?isNaN(X0(N).getDate())?v[x][f]=N:v[x][f]=Nn(N):v[x][f]=_i(N),++f;break;case 1:S=S.slice(1,S.length-1),S=S.replace(/""/g,'"'),S&&S.match(/^=".*"$/)&&(S=S.slice(2,-1)),v[x][f++]=S!==""?S:null;break}if(S==="EOD")break}}return c&&c.sheetRows&&(v=v.slice(0,c.sheetRows)),v}function t(s,c){return iu(e(s,c),c)}function n(s,c){return Ro(t(s,c),c)}var a=(function(){var s=function(x,f,g,v,w){x.push(f),x.push(g+","+v),x.push('"'+w.replace(/"/g,'""')+'"')},c=function(x,f,g,v){x.push(f+","+g),x.push(f==1?'"'+v.replace(/"/g,'""')+'"':v)};return function(x){var f=[],g=zr(x["!ref"]),v,w=Array.isArray(x);s(f,"TABLE",0,1,"sheetjs"),s(f,"VECTORS",0,g.e.r-g.s.r+1,""),s(f,"TUPLES",0,g.e.c-g.s.c+1,""),s(f,"DATA",0,0,"");for(var E=g.s.r;E<=g.e.r;++E){c(f,-1,0,"BOT");for(var N=g.s.c;N<=g.e.c;++N){var S=sr({r:E,c:N});if(v=w?(x[E]||[])[N]:x[S],!v){c(f,1,0,"");continue}switch(v.t){case"n":var T=v.w;!T&&v.v!=null&&(T=v.v),T==null?v.f&&!v.F?c(f,1,0,"="+v.f):c(f,1,0,""):c(f,0,T,"V");break;case"b":c(f,0,v.v?1:0,v.v?"TRUE":"FALSE");break;case"s":c(f,1,0,isNaN(v.v)?v.v:'="'+v.v+'"');break;case"d":v.w||(v.w=ni(v.z||nr[14],xa(Nn(v.v)))),c(f,0,v.w,"V");break;default:c(f,1,0,"")}}}c(f,-1,0,"EOD");var j=`\r
`,D=f.join(j);return D}})();return{to_workbook:n,to_sheet:t,from_sheet:a}})(),jN=(function(){function e(v){return v.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function r(v){return v.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(v,w){for(var E=v.split(`
`),N=-1,S=-1,T=0,j=[];T!==E.length;++T){var D=E[T].trim().split(":");if(D[0]==="cell"){var I=Mn(D[1]);if(j.length<=I.r)for(N=j.length;N<=I.r;++N)j[N]||(j[N]=[]);switch(N=I.r,S=I.c,D[2]){case"t":j[N][S]=e(D[3]);break;case"v":j[N][S]=+D[3];break;case"vtf":var L=D[D.length-1];case"vtc":D[3]==="nl"?j[N][S]=!!+D[4]:j[N][S]=+D[4],D[2]=="vtf"&&(j[N][S]=[j[N][S],L])}}}return w&&w.sheetRows&&(j=j.slice(0,w.sheetRows)),j}function n(v,w){return iu(t(v,w),w)}function a(v,w){return Ro(n(v,w),w)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),c=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,d=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),x="--SocialCalcSpreadsheetControlSave--";function f(v){if(!v||!v["!ref"])return"";for(var w=[],E=[],N,S="",T=ds(v["!ref"]),j=Array.isArray(v),D=T.s.r;D<=T.e.r;++D)for(var I=T.s.c;I<=T.e.c;++I)if(S=sr({r:D,c:I}),N=j?(v[D]||[])[I]:v[S],!(!N||N.v==null||N.t==="z")){switch(E=["cell",S,"t"],N.t){case"s":case"str":E.push(r(N.v));break;case"n":N.f?(E[2]="vtf",E[3]="n",E[4]=N.v,E[5]=r(N.f)):(E[2]="v",E[3]=N.v);break;case"b":E[2]="vt"+(N.f?"f":"c"),E[3]="nl",E[4]=N.v?"1":"0",E[5]=r(N.f||(N.v?"TRUE":"FALSE"));break;case"d":var L=xa(Nn(N.v));E[2]="vtc",E[3]="nd",E[4]=""+L,E[5]=N.w||ni(N.z||nr[14],L);break;case"e":continue}w.push(E.join(":"))}return w.push("sheet:c:"+(T.e.c-T.s.c+1)+":r:"+(T.e.r-T.s.r+1)+":tvf:1"),w.push("valueformat:1:text-wiki"),w.join(`
`)}function g(v){return[s,c,d,c,f(v),x].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:g}})(),K0=(function(){function e(g,v,w,E,N){N.raw?v[w][E]=g:g===""||(g==="TRUE"?v[w][E]=!0:g==="FALSE"?v[w][E]=!1:isNaN(_i(g))?isNaN(X0(g).getDate())?v[w][E]=g:v[w][E]=Nn(g):v[w][E]=_i(g))}function r(g,v){var w=v||{},E=[];if(!g||g.length===0)return E;for(var N=g.split(/[\r\n]/),S=N.length-1;S>=0&&N[S].length===0;)--S;for(var T=10,j=0,D=0;D<=S;++D)j=N[D].indexOf(" "),j==-1?j=N[D].length:j++,T=Math.max(T,j);for(D=0;D<=S;++D){E[D]=[];var I=0;for(e(N[D].slice(0,T).trim(),E,D,I,w),I=1;I<=(N[D].length-T)/10+1;++I)e(N[D].slice(T+(I-1)*10,T+I*10).trim(),E,D,I,w)}return w.sheetRows&&(E=E.slice(0,w.sheetRows)),E}var t={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(g){for(var v={},w=!1,E=0,N=0;E<g.length;++E)(N=g.charCodeAt(E))==34?w=!w:!w&&N in t&&(v[N]=(v[N]||0)+1);N=[];for(E in v)Object.prototype.hasOwnProperty.call(v,E)&&N.push([v[E],E]);if(!N.length){v=n;for(E in v)Object.prototype.hasOwnProperty.call(v,E)&&N.push([v[E],E])}return N.sort(function(S,T){return S[0]-T[0]||n[S[1]]-n[T[1]]}),t[N.pop()[1]]||44}function s(g,v){var w=v||{},E="",N=w.dense?[]:{},S={s:{c:0,r:0},e:{c:0,r:0}};g.slice(0,4)=="sep="?g.charCodeAt(5)==13&&g.charCodeAt(6)==10?(E=g.charAt(4),g=g.slice(7)):g.charCodeAt(5)==13||g.charCodeAt(5)==10?(E=g.charAt(4),g=g.slice(6)):E=a(g.slice(0,1024)):w&&w.FS?E=w.FS:E=a(g.slice(0,1024));var T=0,j=0,D=0,I=0,L=0,V=E.charCodeAt(0),X=!1,M=0,W=g.charCodeAt(0);g=g.replace(/\r\n/mg,`
`);var z=w.dateNF!=null?QI(w.dateNF):null;function ae(){var Z=g.slice(I,L),H={};if(Z.charAt(0)=='"'&&Z.charAt(Z.length-1)=='"'&&(Z=Z.slice(1,-1).replace(/""/g,'"')),Z.length===0)H.t="z";else if(w.raw)H.t="s",H.v=Z;else if(Z.trim().length===0)H.t="s",H.v=Z;else if(Z.charCodeAt(0)==61)Z.charCodeAt(1)==34&&Z.charCodeAt(Z.length-1)==34?(H.t="s",H.v=Z.slice(2,-1).replace(/""/g,'"')):TL(Z)?(H.t="n",H.f=Z.slice(1)):(H.t="s",H.v=Z);else if(Z=="TRUE")H.t="b",H.v=!0;else if(Z=="FALSE")H.t="b",H.v=!1;else if(!isNaN(D=_i(Z)))H.t="n",w.cellText!==!1&&(H.w=Z),H.v=D;else if(!isNaN(X0(Z).getDate())||z&&Z.match(z)){H.z=w.dateNF||nr[14];var he=0;z&&Z.match(z)&&(Z=e7(Z,w.dateNF,Z.match(z)||[]),he=1),w.cellDates?(H.t="d",H.v=Nn(Z,he)):(H.t="n",H.v=xa(Nn(Z,he))),w.cellText!==!1&&(H.w=ni(H.z,H.v instanceof Date?xa(H.v):H.v)),w.cellNF||delete H.z}else H.t="s",H.v=Z;if(H.t=="z"||(w.dense?(N[T]||(N[T]=[]),N[T][j]=H):N[sr({c:j,r:T})]=H),I=L+1,W=g.charCodeAt(I),S.e.c<j&&(S.e.c=j),S.e.r<T&&(S.e.r=T),M==V)++j;else if(j=0,++T,w.sheetRows&&w.sheetRows<=T)return!0}e:for(;L<g.length;++L)switch(M=g.charCodeAt(L)){case 34:W===34&&(X=!X);break;case V:case 10:case 13:if(!X&&ae())break e;break}return L-I>0&&ae(),N["!ref"]=br(S),N}function c(g,v){return!(v&&v.PRN)||v.FS||g.slice(0,4)=="sep="||g.indexOf("	")>=0||g.indexOf(",")>=0||g.indexOf(";")>=0?s(g,v):iu(r(g,v),v)}function d(g,v){var w="",E=v.type=="string"?[0,0,0,0]:Ib(g,v);switch(v.type){case"base64":w=Ms(g);break;case"binary":w=g;break;case"buffer":v.codepage==65001?w=g.toString("utf8"):v.codepage&&typeof Bd<"u"||(w=Ar&&Buffer.isBuffer(g)?g.toString("binary"):Oo(g));break;case"array":w=Ec(g);break;case"string":w=g;break;default:throw new Error("Unrecognized type "+v.type)}return E[0]==239&&E[1]==187&&E[2]==191?w=cn(w.slice(3)):v.type!="string"&&v.type!="buffer"&&v.codepage==65001?w=cn(w):v.type=="binary"&&typeof Bd<"u",w.slice(0,19)=="socialcalc:version:"?jN.to_sheet(v.type=="string"?w:cn(w),v):c(w,v)}function x(g,v){return Ro(d(g,v),v)}function f(g){for(var v=[],w=zr(g["!ref"]),E,N=Array.isArray(g),S=w.s.r;S<=w.e.r;++S){for(var T=[],j=w.s.c;j<=w.e.c;++j){var D=sr({r:S,c:j});if(E=N?(g[S]||[])[j]:g[D],!E||E.v==null){T.push("          ");continue}for(var I=(E.w||(Cl(E),E.w)||"").slice(0,10);I.length<10;)I+=" ";T.push(I+(j===0?" ":""))}v.push(T.join(""))}return v.join(`
`)}return{to_workbook:x,to_sheet:d,from_sheet:f}})();function xM(e,r){var t=r||{},n=!!t.WTF;t.WTF=!0;try{var a=TN.to_workbook(e,t);return t.WTF=n,a}catch(s){if(t.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return K0.to_workbook(e,r)}}var bc=(function(){function e(B,te,U){if(B){Oa(B,B.l||0);for(var P=U.Enum||Le;B.l<B.length;){var ue=B.read_shift(2),Re=P[ue]||P[65535],De=B.read_shift(2),Ne=B.l+De,Ke=Re.f&&Re.f(B,De,U);if(B.l=Ne,te(Ke,Re,ue))return}}}function r(B,te){switch(te.type){case"base64":return t(Rs(Ms(B)),te);case"binary":return t(Rs(B),te);case"buffer":case"array":return t(B,te)}throw"Unsupported type "+te.type}function t(B,te){if(!B)return B;var U=te||{},P=U.dense?[]:{},ue="Sheet1",Re="",De=0,Ne={},Ke=[],ye=[],me={s:{r:0,c:0},e:{r:0,c:0}},Ce=U.sheetRows||0;if(B[2]==0&&(B[3]==8||B[3]==9)&&B.length>=16&&B[14]==5&&B[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(B[2]==2)U.Enum=Le,e(B,function(oe,de,Se){switch(Se){case 0:U.vers=oe,oe>=4096&&(U.qpro=!0);break;case 6:me=oe;break;case 204:oe&&(Re=oe);break;case 222:Re=oe;break;case 15:case 51:U.qpro||(oe[1].v=oe[1].v.slice(1));case 13:case 14:case 16:Se==14&&(oe[2]&112)==112&&(oe[2]&15)>1&&(oe[2]&15)<15&&(oe[1].z=U.dateNF||nr[14],U.cellDates&&(oe[1].t="d",oe[1].v=Gx(oe[1].v))),U.qpro&&oe[3]>De&&(P["!ref"]=br(me),Ne[ue]=P,Ke.push(ue),P=U.dense?[]:{},me={s:{r:0,c:0},e:{r:0,c:0}},De=oe[3],ue=Re||"Sheet"+(De+1),Re="");var lt=U.dense?(P[oe[0].r]||[])[oe[0].c]:P[sr(oe[0])];if(lt){lt.t=oe[1].t,lt.v=oe[1].v,oe[1].z!=null&&(lt.z=oe[1].z),oe[1].f!=null&&(lt.f=oe[1].f);break}U.dense?(P[oe[0].r]||(P[oe[0].r]=[]),P[oe[0].r][oe[0].c]=oe[1]):P[sr(oe[0])]=oe[1];break}},U);else if(B[2]==26||B[2]==14)U.Enum=Q,B[2]==14&&(U.qpro=!0,B.l=0),e(B,function(oe,de,Se){switch(Se){case 204:ue=oe;break;case 22:oe[1].v=oe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(oe[3]>De&&(P["!ref"]=br(me),Ne[ue]=P,Ke.push(ue),P=U.dense?[]:{},me={s:{r:0,c:0},e:{r:0,c:0}},De=oe[3],ue="Sheet"+(De+1)),Ce>0&&oe[0].r>=Ce)break;U.dense?(P[oe[0].r]||(P[oe[0].r]=[]),P[oe[0].r][oe[0].c]=oe[1]):P[sr(oe[0])]=oe[1],me.e.c<oe[0].c&&(me.e.c=oe[0].c),me.e.r<oe[0].r&&(me.e.r=oe[0].r);break;case 27:oe[14e3]&&(ye[oe[14e3][0]]=oe[14e3][1]);break;case 1537:ye[oe[0]]=oe[1],oe[0]==De&&(ue=oe[1]);break}},U);else throw new Error("Unrecognized LOTUS BOF "+B[2]);if(P["!ref"]=br(me),Ne[Re||ue]=P,Ke.push(Re||ue),!ye.length)return{SheetNames:Ke,Sheets:Ne};for(var G={},Me=[],Ae=0;Ae<ye.length;++Ae)Ne[Ke[Ae]]?(Me.push(ye[Ae]||Ke[Ae]),G[ye[Ae]]=Ne[ye[Ae]]||Ne[Ke[Ae]]):(Me.push(ye[Ae]),G[ye[Ae]]={"!ref":"A1"});return{SheetNames:Me,Sheets:G}}function n(B,te){var U=te||{};if(+U.codepage>=0&&yi(+U.codepage),U.type=="string")throw new Error("Cannot write WK1 to JS string");var P=us(),ue=zr(B["!ref"]),Re=Array.isArray(B),De=[];It(P,0,s(1030)),It(P,6,x(ue));for(var Ne=Math.min(ue.e.r,8191),Ke=ue.s.r;Ke<=Ne;++Ke)for(var ye=$n(Ke),me=ue.s.c;me<=ue.e.c;++me){Ke===ue.s.r&&(De[me]=Dn(me));var Ce=De[me]+ye,G=Re?(B[Ke]||[])[me]:B[Ce];if(!(!G||G.t=="z"))if(G.t=="n")(G.v|0)==G.v&&G.v>=-32768&&G.v<=32767?It(P,13,E(Ke,me,G.v)):It(P,14,S(Ke,me,G.v));else{var Me=Cl(G);It(P,15,v(Ke,me,Me.slice(0,239)))}}return It(P,1),P.end()}function a(B,te){var U=te||{};if(+U.codepage>=0&&yi(+U.codepage),U.type=="string")throw new Error("Cannot write WK3 to JS string");var P=us();It(P,0,c(B));for(var ue=0,Re=0;ue<B.SheetNames.length;++ue)(B.Sheets[B.SheetNames[ue]]||{})["!ref"]&&It(P,27,ie(B.SheetNames[ue],Re++));var De=0;for(ue=0;ue<B.SheetNames.length;++ue){var Ne=B.Sheets[B.SheetNames[ue]];if(!(!Ne||!Ne["!ref"])){for(var Ke=zr(Ne["!ref"]),ye=Array.isArray(Ne),me=[],Ce=Math.min(Ke.e.r,8191),G=Ke.s.r;G<=Ce;++G)for(var Me=$n(G),Ae=Ke.s.c;Ae<=Ke.e.c;++Ae){G===Ke.s.r&&(me[Ae]=Dn(Ae));var oe=me[Ae]+Me,de=ye?(Ne[G]||[])[Ae]:Ne[oe];if(!(!de||de.t=="z"))if(de.t=="n")It(P,23,ae(G,Ae,De,de.v));else{var Se=Cl(de);It(P,22,M(G,Ae,De,Se.slice(0,239)))}}++De}}return It(P,1),P.end()}function s(B){var te=ut(2);return te.write_shift(2,B),te}function c(B){var te=ut(26);te.write_shift(2,4096),te.write_shift(2,4),te.write_shift(4,0);for(var U=0,P=0,ue=0,Re=0;Re<B.SheetNames.length;++Re){var De=B.SheetNames[Re],Ne=B.Sheets[De];if(!(!Ne||!Ne["!ref"])){++ue;var Ke=ds(Ne["!ref"]);U<Ke.e.r&&(U=Ke.e.r),P<Ke.e.c&&(P=Ke.e.c)}}return U>8191&&(U=8191),te.write_shift(2,U),te.write_shift(1,ue),te.write_shift(1,P),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(1,1),te.write_shift(1,2),te.write_shift(4,0),te.write_shift(4,0),te}function d(B,te,U){var P={s:{c:0,r:0},e:{c:0,r:0}};return te==8&&U.qpro?(P.s.c=B.read_shift(1),B.l++,P.s.r=B.read_shift(2),P.e.c=B.read_shift(1),B.l++,P.e.r=B.read_shift(2),P):(P.s.c=B.read_shift(2),P.s.r=B.read_shift(2),te==12&&U.qpro&&(B.l+=2),P.e.c=B.read_shift(2),P.e.r=B.read_shift(2),te==12&&U.qpro&&(B.l+=2),P.s.c==65535&&(P.s.c=P.e.c=P.s.r=P.e.r=0),P)}function x(B){var te=ut(8);return te.write_shift(2,B.s.c),te.write_shift(2,B.s.r),te.write_shift(2,B.e.c),te.write_shift(2,B.e.r),te}function f(B,te,U){var P=[{c:0,r:0},{t:"n",v:0},0,0];return U.qpro&&U.vers!=20768?(P[0].c=B.read_shift(1),P[3]=B.read_shift(1),P[0].r=B.read_shift(2),B.l+=2):(P[2]=B.read_shift(1),P[0].c=B.read_shift(2),P[0].r=B.read_shift(2)),P}function g(B,te,U){var P=B.l+te,ue=f(B,te,U);if(ue[1].t="s",U.vers==20768){B.l++;var Re=B.read_shift(1);return ue[1].v=B.read_shift(Re,"utf8"),ue}return U.qpro&&B.l++,ue[1].v=B.read_shift(P-B.l,"cstr"),ue}function v(B,te,U){var P=ut(7+U.length);P.write_shift(1,255),P.write_shift(2,te),P.write_shift(2,B),P.write_shift(1,39);for(var ue=0;ue<P.length;++ue){var Re=U.charCodeAt(ue);P.write_shift(1,Re>=128?95:Re)}return P.write_shift(1,0),P}function w(B,te,U){var P=f(B,te,U);return P[1].v=B.read_shift(2,"i"),P}function E(B,te,U){var P=ut(7);return P.write_shift(1,255),P.write_shift(2,te),P.write_shift(2,B),P.write_shift(2,U,"i"),P}function N(B,te,U){var P=f(B,te,U);return P[1].v=B.read_shift(8,"f"),P}function S(B,te,U){var P=ut(13);return P.write_shift(1,255),P.write_shift(2,te),P.write_shift(2,B),P.write_shift(8,U,"f"),P}function T(B,te,U){var P=B.l+te,ue=f(B,te,U);if(ue[1].v=B.read_shift(8,"f"),U.qpro)B.l=P;else{var Re=B.read_shift(2);L(B.slice(B.l,B.l+Re),ue),B.l+=Re}return ue}function j(B,te,U){var P=te&32768;return te&=-32769,te=(P?B:0)+(te>=8192?te-16384:te),(P?"":"$")+(U?Dn(te):$n(te))}var D={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},I=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function L(B,te){Oa(B,0);for(var U=[],P=0,ue="",Re="",De="",Ne="";B.l<B.length;){var Ke=B[B.l++];switch(Ke){case 0:U.push(B.read_shift(8,"f"));break;case 1:Re=j(te[0].c,B.read_shift(2),!0),ue=j(te[0].r,B.read_shift(2),!1),U.push(Re+ue);break;case 2:{var ye=j(te[0].c,B.read_shift(2),!0),me=j(te[0].r,B.read_shift(2),!1);Re=j(te[0].c,B.read_shift(2),!0),ue=j(te[0].r,B.read_shift(2),!1),U.push(ye+me+":"+Re+ue)}break;case 3:if(B.l<B.length){console.error("WK1 premature formula end");return}break;case 4:U.push("("+U.pop()+")");break;case 5:U.push(B.read_shift(2));break;case 6:{for(var Ce="";Ke=B[B.l++];)Ce+=String.fromCharCode(Ke);U.push('"'+Ce.replace(/"/g,'""')+'"')}break;case 8:U.push("-"+U.pop());break;case 23:U.push("+"+U.pop());break;case 22:U.push("NOT("+U.pop()+")");break;case 20:case 21:Ne=U.pop(),De=U.pop(),U.push(["AND","OR"][Ke-20]+"("+De+","+Ne+")");break;default:if(Ke<32&&I[Ke])Ne=U.pop(),De=U.pop(),U.push(De+I[Ke]+Ne);else if(D[Ke]){if(P=D[Ke][1],P==69&&(P=B[B.l++]),P>U.length){console.error("WK1 bad formula parse 0x"+Ke.toString(16)+":|"+U.join("|")+"|");return}var G=U.slice(-P);U.length-=P,U.push(D[Ke][0]+"("+G.join(",")+")")}else return Ke<=7?console.error("WK1 invalid opcode "+Ke.toString(16)):Ke<=24?console.error("WK1 unsupported op "+Ke.toString(16)):Ke<=30?console.error("WK1 invalid opcode "+Ke.toString(16)):Ke<=115?console.error("WK1 unsupported function opcode "+Ke.toString(16)):console.error("WK1 unrecognized opcode "+Ke.toString(16))}}U.length==1?te[1].f=""+U[0]:console.error("WK1 bad formula parse |"+U.join("|")+"|")}function V(B){var te=[{c:0,r:0},{t:"n",v:0},0];return te[0].r=B.read_shift(2),te[3]=B[B.l++],te[0].c=B[B.l++],te}function X(B,te){var U=V(B);return U[1].t="s",U[1].v=B.read_shift(te-4,"cstr"),U}function M(B,te,U,P){var ue=ut(6+P.length);ue.write_shift(2,B),ue.write_shift(1,U),ue.write_shift(1,te),ue.write_shift(1,39);for(var Re=0;Re<P.length;++Re){var De=P.charCodeAt(Re);ue.write_shift(1,De>=128?95:De)}return ue.write_shift(1,0),ue}function W(B,te){var U=V(B);U[1].v=B.read_shift(2);var P=U[1].v>>1;if(U[1].v&1)switch(P&7){case 0:P=(P>>3)*5e3;break;case 1:P=(P>>3)*500;break;case 2:P=(P>>3)/20;break;case 3:P=(P>>3)/200;break;case 4:P=(P>>3)/2e3;break;case 5:P=(P>>3)/2e4;break;case 6:P=(P>>3)/16;break;case 7:P=(P>>3)/64;break}return U[1].v=P,U}function z(B,te){var U=V(B),P=B.read_shift(4),ue=B.read_shift(4),Re=B.read_shift(2);if(Re==65535)return P===0&&ue===3221225472?(U[1].t="e",U[1].v=15):P===0&&ue===3489660928?(U[1].t="e",U[1].v=42):U[1].v=0,U;var De=Re&32768;return Re=(Re&32767)-16446,U[1].v=(1-De*2)*(ue*Math.pow(2,Re+32)+P*Math.pow(2,Re)),U}function ae(B,te,U,P){var ue=ut(14);if(ue.write_shift(2,B),ue.write_shift(1,U),ue.write_shift(1,te),P==0)return ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(2,65535),ue;var Re=0,De=0,Ne=0,Ke=0;return P<0&&(Re=1,P=-P),De=Math.log2(P)|0,P/=Math.pow(2,De-31),Ke=P>>>0,(Ke&2147483648)==0&&(P/=2,++De,Ke=P>>>0),P-=Ke,Ke|=2147483648,Ke>>>=0,P*=Math.pow(2,32),Ne=P>>>0,ue.write_shift(4,Ne),ue.write_shift(4,Ke),De+=16383+(Re?32768:0),ue.write_shift(2,De),ue}function Z(B,te){var U=z(B);return B.l+=te-14,U}function H(B,te){var U=V(B),P=B.read_shift(4);return U[1].v=P>>6,U}function he(B,te){var U=V(B),P=B.read_shift(8,"f");return U[1].v=P,U}function q(B,te){var U=he(B);return B.l+=te-10,U}function se(B,te){return B[B.l+te-1]==0?B.read_shift(te,"cstr"):""}function ve(B,te){var U=B[B.l++];U>te-1&&(U=te-1);for(var P="";P.length<U;)P+=String.fromCharCode(B[B.l++]);return P}function le(B,te,U){if(!(!U.qpro||te<21)){var P=B.read_shift(1);B.l+=17,B.l+=1,B.l+=2;var ue=B.read_shift(te-21,"cstr");return[P,ue]}}function ge(B,te){for(var U={},P=B.l+te;B.l<P;){var ue=B.read_shift(2);if(ue==14e3){for(U[ue]=[0,""],U[ue][0]=B.read_shift(2);B[B.l];)U[ue][1]+=String.fromCharCode(B[B.l]),B.l++;B.l++}}return U}function ie(B,te){var U=ut(5+B.length);U.write_shift(2,14e3),U.write_shift(2,te);for(var P=0;P<B.length;++P){var ue=B.charCodeAt(P);U[U.l++]=ue>127?95:ue}return U[U.l++]=0,U}var Le={0:{n:"BOF",f:ia},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:d},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:w},14:{n:"NUMBER",f:N},15:{n:"LABEL",f:g},16:{n:"FORMULA",f:T},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:g},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:se},222:{n:"SHEETNAMELP",f:ve},65535:{n:""}},Q={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:X},23:{n:"NUMBER17",f:z},24:{n:"NUMBER18",f:W},25:{n:"FORMULA19",f:Z},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ge},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:H},38:{n:"??"},39:{n:"NUMBER27",f:he},40:{n:"FORMULA28",f:q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:se},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:le},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:r}})();function mM(e){var r={},t=e.match(Ha),n=0,a=!1;if(t)for(;n!=t.length;++n){var s=ir(t[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":r.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;r.cp=$2[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":r.outline=1;break;case"</outline>":break;case"<rFont":r.name=s.val;break;case"<sz":r.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":r.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":r.uval="double";break;case"singleAccounting":r.uval="single-accounting";break;case"doubleAccounting":r.uval="double-accounting";break}case"<u>":case"<u/>":r.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":r.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":r.i=1;break;case"</i>":break;case"<color":s.rgb&&(r.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":r.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":r.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return r}var gM=(function(){var e=zd("t"),r=zd("rPr");function t(s){var c=s.match(e);if(!c)return{t:"s",v:""};var d={t:"s",v:Ur(c[1])},x=s.match(r);return x&&(d.s=mM(x[1])),d}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(c){return c.replace(n,"").split(a).map(t).filter(function(d){return d.v})}})(),pM=(function(){var r=/(\r\n|\n)/g;function t(a,s,c){var d=[];a.u&&d.push("text-decoration: underline;"),a.uval&&d.push("text-underline-style:"+a.uval+";"),a.sz&&d.push("font-size:"+a.sz+"pt;"),a.outline&&d.push("text-effect: outline;"),a.shadow&&d.push("text-shadow: auto;"),s.push('<span style="'+d.join("")+'">'),a.b&&(s.push("<b>"),c.push("</b>")),a.i&&(s.push("<i>"),c.push("</i>")),a.strike&&(s.push("<s>"),c.push("</s>"));var x=a.valign||"";return x=="superscript"||x=="super"?x="sup":x=="subscript"&&(x="sub"),x!=""&&(s.push("<"+x+">"),c.push("</"+x+">")),c.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&t(a.s,s[0],s[2]),s[0].join("")+s[1].replace(r,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}})(),bM=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,vM=/<(?:\w+:)?r>/,yM=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function yb(e,r){var t=r?r.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Ur(cn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=cn(e),t&&(n.h=ib(n.t))):e.match(vM)&&(n.r=cn(e),n.t=Ur(cn((e.replace(yM,"").match(bM)||[]).join("").replace(Ha,""))),t&&(n.h=pM(gM(n.r)))),n):{t:""}}var wM=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,_M=/<(?:\w+:)?(?:si|sstItem)>/g,EM=/<\/(?:\w+:)?(?:si|sstItem)>/;function kM(e,r){var t=[],n="";if(!e)return t;var a=e.match(wM);if(a){n=a[2].replace(_M,"").split(EM);for(var s=0;s!=n.length;++s){var c=yb(n[s].trim(),r);c!=null&&(t[t.length]=c)}a=ir(a[1]),t.Count=a.count,t.Unique=a.uniqueCount}return t}var SM=/^\s|\s$|[\t\n\r]/;function ON(e,r){if(!r.bookSST)return"";var t=[Zn];t[t.length]=Rt("sst",null,{xmlns:Oc[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(SM)&&(s+=' xml:space="preserve"'),s+=">"+an(a.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function NM(e){return[e.read_shift(4),e.read_shift(4)]}function AM(e,r){var t=[],n=!1;return Rl(e,function(s,c,d){switch(d){case 159:t.Count=s[0],t.Unique=s[1];break;case 19:t.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(c.T,!n||r.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}),t}function TM(e,r){return r||(r=ut(8)),r.write_shift(4,e.Count),r.write_shift(4,e.Unique),r}var CM=P7;function jM(e){var r=us();bt(r,159,TM(e));for(var t=0;t<e.length;++t)bt(r,19,CM(e[t]));return bt(r,160),r.end()}function RN(e){for(var r=[],t=e.split(""),n=0;n<t.length;++n)r[n]=t[n].charCodeAt(0);return r}function Al(e,r){var t={};return t.Major=e.read_shift(2),t.Minor=e.read_shift(2),r>=4&&(e.l+=r-4),t}function OM(e){var r={};return r.id=e.read_shift(0,"lpp4"),r.R=Al(e,4),r.U=Al(e,4),r.W=Al(e,4),r}function RM(e){for(var r=e.read_shift(4),t=e.l+r-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=t)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+t);return n}function IM(e){var r=[];e.l+=4;for(var t=e.read_shift(4);t-- >0;)r.push(RM(e));return r}function DM(e){var r=[];e.l+=4;for(var t=e.read_shift(4);t-- >0;)r.push(e.read_shift(0,"lpp4"));return r}function MM(e){var r={};return e.read_shift(4),e.l+=4,r.id=e.read_shift(0,"lpp4"),r.name=e.read_shift(0,"lpp4"),r.R=Al(e,4),r.U=Al(e,4),r.W=Al(e,4),r}function FM(e){var r=MM(e);if(r.ename=e.read_shift(0,"8lpp4"),r.blksz=e.read_shift(4),r.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return r}function IN(e,r){var t=e.l+r,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(t-e.l>>1,"utf16le"),e.l=t,n}function DN(e,r){var t={},n=e.l+r;return e.l+=4,t.Salt=e.slice(e.l,e.l+16),e.l+=16,t.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),t.VerifierHash=e.slice(e.l,n),e.l=n,t}function LM(e){var r=Al(e);switch(r.Minor){case 2:return[r.Minor,BM(e)];case 3:return[r.Minor,PM()];case 4:return[r.Minor,UM(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+r.Minor)}function BM(e){var r=e.read_shift(4);if((r&63)!=36)throw new Error("EncryptionInfo mismatch");var t=e.read_shift(4),n=IN(e,t),a=DN(e,e.length-e.l);return{t:"Std",h:n,v:a}}function PM(){throw new Error("File is password-protected: ECMA-376 Extensible")}function UM(e){var r=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var t=e.read_shift(e.length-e.l,"utf8"),n={};return t.replace(Ha,function(s){var c=ir(s);switch(qi(c[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":r.forEach(function(d){n[d]=c[d]});break;case"<dataIntegrity":n.encryptedHmacKey=c.encryptedHmacKey,n.encryptedHmacValue=c.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=c.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(c);break;default:throw c[0]}}),n}function zM(e,r){var t={},n=t.EncryptionVersionInfo=Al(e,4);if(r-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);t.Flags=e.read_shift(4),r-=4;var a=e.read_shift(4);return r-=4,t.EncryptionHeader=IN(e,a),r-=a,t.EncryptionVerifier=DN(e,r),t}function HM(e){var r={},t=r.EncryptionVersionInfo=Al(e,4);if(t.Major!=1||t.Minor!=1)throw"unrecognized version code "+t.Major+" : "+t.Minor;return r.Salt=e.read_shift(16),r.EncryptedVerifier=e.read_shift(16),r.EncryptedVerifierHash=e.read_shift(16),r}function wb(e){var r=0,t,n=RN(e),a=n.length+1,s,c,d,x,f;for(t=Ao(a),t[0]=n.length,s=1;s!=a;++s)t[s]=n[s-1];for(s=a-1;s>=0;--s)c=t[s],d=(r&16384)===0?0:1,x=r<<1&32767,f=d|x,r=f^c;return r^52811}var MN=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],r=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],t=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(c){return(c/2|c*128)&255},a=function(c,d){return n(c^d)},s=function(c){for(var d=r[c.length-1],x=104,f=c.length-1;f>=0;--f)for(var g=c[f],v=0;v!=7;++v)g&64&&(d^=t[x]),g*=2,--x;return d};return function(c){for(var d=RN(c),x=s(d),f=d.length,g=Ao(16),v=0;v!=16;++v)g[v]=0;var w,E,N;for((f&1)===1&&(w=x>>8,g[f]=a(e[0],w),--f,w=x&255,E=d[d.length-1],g[f]=a(E,w));f>0;)--f,w=x>>8,g[f]=a(d[f],w),--f,w=x&255,g[f]=a(d[f],w);for(f=15,N=15-d.length;N>0;)w=x>>8,g[f]=a(e[N],w),--f,--N,w=x&255,g[f]=a(d[f],w),--f,--N;return g}})(),GM=function(e,r,t,n,a){a||(a=r),n||(n=MN(e));var s,c;for(s=0;s!=r.length;++s)c=r[s],c^=n[t],c=(c>>5|c<<3)&255,a[s]=c,++t;return[a,t,n]},VM=function(e){var r=0,t=MN(e);return function(n){var a=GM("",n,r,t);return r=a[1],a[0]}};function WM(e,r,t,n){var a={key:ia(e),verificationBytes:ia(e)};return t.password&&(a.verifier=wb(t.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=VM(t.password)),a}function qM(e,r,t){var n=t||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=HM(e):n.Data=zM(e,r),n}function XM(e,r,t){var n={Type:t.biff>=8?e.read_shift(2):0};return n.Type?qM(e,r-2,n):WM(e,t.biff>=8?r:r-2,t,n),n}var FN=(function(){function e(a,s){switch(s.type){case"base64":return r(Ms(a),s);case"binary":return r(a,s);case"buffer":return r(Ar&&Buffer.isBuffer(a)?a.toString("binary"):Oo(a),s);case"array":return r(Ec(a),s)}throw new Error("Unrecognized type "+s.type)}function r(a,s){var c=s||{},d=c.dense?[]:{},x=a.match(/\\trowd.*?\\row\b/g);if(!x.length)throw new Error("RTF missing table");var f={s:{c:0,r:0},e:{c:0,r:x.length-1}};return x.forEach(function(g,v){Array.isArray(d)&&(d[v]=[]);for(var w=/\\\w+\b/g,E=0,N,S=-1;N=w.exec(g);){switch(N[0]){case"\\cell":var T=g.slice(E,w.lastIndex-N[0].length);if(T[0]==" "&&(T=T.slice(1)),++S,T.length){var j={v:T,t:"s"};Array.isArray(d)?d[v][S]=j:d[sr({r:v,c:S})]=j}break}E=w.lastIndex}S>f.e.c&&(f.e.c=S)}),d["!ref"]=br(f),d}function t(a,s){return Ro(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],c=zr(a["!ref"]),d,x=Array.isArray(a),f=c.s.r;f<=c.e.r;++f){s.push("\\trowd\\trautofit1");for(var g=c.s.c;g<=c.e.c;++g)s.push("\\cellx"+(g+1));for(s.push("\\pard\\intbl"),g=c.s.c;g<=c.e.c;++g){var v=sr({r:f,c:g});d=x?(a[f]||[])[g]:a[v],!(!d||d.v==null&&(!d.f||d.F))&&(s.push(" "+(d.w||(Cl(d),d.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:e,from_sheet:n}})();function KM(e){var r=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(r.slice(0,2),16),parseInt(r.slice(2,4),16),parseInt(r.slice(4,6),16)]}function Wd(e){for(var r=0,t=1;r!=3;++r)t=t*256+(e[r]>255?255:e[r]<0?0:e[r]);return t.toString(16).toUpperCase().slice(1)}function YM(e){var r=e[0]/255,t=e[1]/255,n=e[2]/255,a=Math.max(r,t,n),s=Math.min(r,t,n),c=a-s;if(c===0)return[0,0,r];var d=0,x=0,f=a+s;switch(x=c/(f>1?2-f:f),a){case r:d=((t-n)/c+6)%6;break;case t:d=(n-r)/c+2;break;case n:d=(r-t)/c+4;break}return[d/6,x,f/2]}function $M(e){var r=e[0],t=e[1],n=e[2],a=t*2*(n<.5?n:1-n),s=n-a/2,c=[s,s,s],d=6*r,x;if(t!==0)switch(d|0){case 0:case 6:x=a*d,c[0]+=a,c[1]+=x;break;case 1:x=a*(2-d),c[0]+=x,c[1]+=a;break;case 2:x=a*(d-2),c[1]+=a,c[2]+=x;break;case 3:x=a*(4-d),c[1]+=x,c[2]+=a;break;case 4:x=a*(d-4),c[2]+=a,c[0]+=x;break;case 5:x=a*(6-d),c[2]+=x,c[0]+=a;break}for(var f=0;f!=3;++f)c[f]=Math.round(c[f]*255);return c}function Ex(e,r){if(r===0)return e;var t=YM(KM(e));return r<0?t[2]=t[2]*(1+r):t[2]=1-(1-t[2])*(1-r),Wd($M(t))}var LN=6,ZM=15,JM=1,La=LN;function qd(e){return Math.floor((e+Math.round(128/La)/256)*La)}function Xd(e){return Math.floor((e-5)/La*100+.5)/100}function kx(e){return Math.round((e*La+5)/La*256)/256}function yp(e){return kx(Xd(qd(e)))}function _b(e){var r=Math.abs(e-yp(e)),t=La;if(r>.005)for(La=JM;La<ZM;++La)Math.abs(e-yp(e))<=r&&(r=Math.abs(e-yp(e)),t=La);La=t}function To(e){e.width?(e.wpx=qd(e.width),e.wch=Xd(e.wpx),e.MDW=La):e.wpx?(e.wch=Xd(e.wpx),e.width=kx(e.wch),e.MDW=La):typeof e.wch=="number"&&(e.width=kx(e.wch),e.wpx=qd(e.width),e.MDW=La),e.customWidth&&delete e.customWidth}var QM=96,BN=QM;function Kd(e){return e*96/BN}function Y0(e){return e*BN/96}var eF={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function tF(e,r,t,n){r.Borders=[];var a={},s=!1;(e[0].match(Ha)||[]).forEach(function(c){var d=ir(c);switch(qi(d[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},d.diagonalUp&&(a.diagonalUp=En(d.diagonalUp)),d.diagonalDown&&(a.diagonalDown=En(d.diagonalDown)),r.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+d[0]+" in borders")}})}function rF(e,r,t,n){r.Fills=[];var a={},s=!1;(e[0].match(Ha)||[]).forEach(function(c){var d=ir(c);switch(qi(d[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},r.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":r.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":d.patternType&&(a.patternType=d.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),d.indexed&&(a.bgColor.indexed=parseInt(d.indexed,10)),d.theme&&(a.bgColor.theme=parseInt(d.theme,10)),d.tint&&(a.bgColor.tint=parseFloat(d.tint)),d.rgb&&(a.bgColor.rgb=d.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),d.theme&&(a.fgColor.theme=parseInt(d.theme,10)),d.tint&&(a.fgColor.tint=parseFloat(d.tint)),d.rgb!=null&&(a.fgColor.rgb=d.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+d[0]+" in fills")}})}function nF(e,r,t,n){r.Fonts=[];var a={},s=!1;(e[0].match(Ha)||[]).forEach(function(c){var d=ir(c);switch(qi(d[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":r.Fonts.push(a),a={};break;case"<name":d.val&&(a.name=cn(d.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=d.val?En(d.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=d.val?En(d.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(d.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=d.val?En(d.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=d.val?En(d.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=d.val?En(d.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=d.val?En(d.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=d.val?En(d.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":d.val&&(a.sz=+d.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":d.val&&(a.vertAlign=d.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":d.val&&(a.family=parseInt(d.val,10));break;case"<family/>":case"</family>":break;case"<scheme":d.val&&(a.scheme=d.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(d.val=="1")break;d.codepage=$2[parseInt(d.val,10)];break;case"<color":if(a.color||(a.color={}),d.auto&&(a.color.auto=En(d.auto)),d.rgb)a.color.rgb=d.rgb.slice(-6);else if(d.indexed){a.color.index=parseInt(d.indexed,10);var x=gc[a.color.index];a.color.index==81&&(x=gc[1]),x||(x=gc[1]),a.color.rgb=x[0].toString(16)+x[1].toString(16)+x[2].toString(16)}else d.theme&&(a.color.theme=parseInt(d.theme,10),d.tint&&(a.color.tint=parseFloat(d.tint)),d.theme&&t.themeElements&&t.themeElements.clrScheme&&(a.color.rgb=Ex(t.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+d[0]+" in fonts")}})}function aF(e,r,t){r.NumberFmt=[];for(var n=Vn(nr),a=0;a<n.length;++a)r.NumberFmt[n[a]]=nr[n[a]];var s=e[0].match(Ha);if(s)for(a=0;a<s.length;++a){var c=ir(s[a]);switch(qi(c[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var d=Ur(cn(c.formatCode)),x=parseInt(c.numFmtId,10);if(r.NumberFmt[x]=d,x>0){if(x>392){for(x=392;x>60&&r.NumberFmt[x]!=null;--x);r.NumberFmt[x]=d}Nl(d,x)}}break;case"</numFmt>":break;default:if(t.WTF)throw new Error("unrecognized "+c[0]+" in numFmts")}}}function sF(e){var r=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var n=t[0];n<=t[1];++n)e[n]!=null&&(r[r.length]=Rt("numFmt",null,{numFmtId:n,formatCode:an(e[n])}))}),r.length===1?"":(r[r.length]="</numFmts>",r[0]=Rt("numFmts",null,{count:r.length-2}).replace("/>",">"),r.join(""))}var i1=["numFmtId","fillId","fontId","borderId","xfId"],l1=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function iF(e,r,t){r.CellXf=[];var n,a=!1;(e[0].match(Ha)||[]).forEach(function(s){var c=ir(s),d=0;switch(qi(c[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=c,delete n[0],d=0;d<i1.length;++d)n[i1[d]]&&(n[i1[d]]=parseInt(n[i1[d]],10));for(d=0;d<l1.length;++d)n[l1[d]]&&(n[l1[d]]=En(n[l1[d]]));if(r.NumberFmt&&n.numFmtId>392){for(d=392;d>60;--d)if(r.NumberFmt[n.numFmtId]==r.NumberFmt[d]){n.numFmtId=d;break}}r.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var x={};c.vertical&&(x.vertical=c.vertical),c.horizontal&&(x.horizontal=c.horizontal),c.textRotation!=null&&(x.textRotation=c.textRotation),c.indent&&(x.indent=c.indent),c.wrapText&&(x.wrapText=En(c.wrapText)),n.alignment=x;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(t&&t.WTF&&!a)throw new Error("unrecognized "+c[0]+" in cellXfs")}})}function lF(e){var r=[];return r[r.length]=Rt("cellXfs",null),e.forEach(function(t){r[r.length]=Rt("xf",null,t)}),r[r.length]="</cellXfs>",r.length===2?"":(r[0]=Rt("cellXfs",null,{count:r.length-2}).replace("/>",">"),r.join(""))}var oF=(function(){var r=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(d,x,f){var g={};if(!d)return g;d=d.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var v;return(v=d.match(r))&&aF(v,g,f),(v=d.match(a))&&nF(v,g,x,f),(v=d.match(n))&&rF(v,g,x,f),(v=d.match(s))&&tF(v,g,x,f),(v=d.match(t))&&iF(v,g,f),g}})();function PN(e,r){var t=[Zn,Rt("styleSheet",null,{xmlns:Oc[0],"xmlns:vt":ha.vt})],n;return e.SSF&&(n=sF(e.SSF))!=null&&(t[t.length]=n),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=lF(r.cellXfs))&&(t[t.length]=n),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function cF(e,r){var t=e.read_shift(2),n=Ua(e);return[t,n]}function uF(e,r,t){t||(t=ut(6+4*r.length)),t.write_shift(2,e),wa(r,t);var n=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),n}function dF(e,r,t){var n={};n.sz=e.read_shift(2)/20;var a=q7(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var c=e.read_shift(1);c!=0&&(n.underline=c);var d=e.read_shift(1);d>0&&(n.family=d);var x=e.read_shift(1);switch(x>0&&(n.charset=x),e.l++,n.color=W7(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Ua(e),n}function fF(e,r){r||(r=ut(153)),r.write_shift(2,e.sz*20),X7(e,r),r.write_shift(2,e.bold?700:400);var t=0;e.vertAlign=="superscript"?t=1:e.vertAlign=="subscript"&&(t=2),r.write_shift(2,t),r.write_shift(1,e.underline||0),r.write_shift(1,e.family||0),r.write_shift(1,e.charset||0),r.write_shift(1,0),yx(e.color,r);var n=0;return n=2,r.write_shift(1,n),wa(e.name,r),r.length>r.l?r.slice(0,r.l):r}var hF=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],wp,xF=za;function $4(e,r){r||(r=ut(84)),wp||(wp=zx(hF));var t=wp[e.patternType];t==null&&(t=40),r.write_shift(4,t);var n=0;if(t!=40)for(yx({auto:1},r),yx({auto:1},r);n<12;++n)r.write_shift(4,0);else{for(;n<4;++n)r.write_shift(4,0);for(;n<12;++n)r.write_shift(4,0)}return r.length>r.l?r.slice(0,r.l):r}function mF(e,r){var t=e.l+r,n=e.read_shift(2),a=e.read_shift(2);return e.l=t,{ixfe:n,numFmtId:a}}function UN(e,r,t){t||(t=ut(16)),t.write_shift(2,r||0),t.write_shift(2,e.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var n=0;return t.write_shift(1,n),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function nd(e,r){return r||(r=ut(10)),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(4,0),r}var gF=za;function pF(e,r){return r||(r=ut(51)),r.write_shift(1,0),nd(null,r),nd(null,r),nd(null,r),nd(null,r),nd(null,r),r.length>r.l?r.slice(0,r.l):r}function bF(e,r){return r||(r=ut(52)),r.write_shift(4,e.xfId),r.write_shift(2,1),r.write_shift(1,0),r.write_shift(1,0),vx(e.name||"",r),r.length>r.l?r.slice(0,r.l):r}function vF(e,r,t){var n=ut(2052);return n.write_shift(4,e),vx(r,n),vx(t,n),n.length>n.l?n.slice(0,n.l):n}function yF(e,r,t){var n={};n.NumberFmt=[];for(var a in nr)n.NumberFmt[a]=nr[a];n.CellXf=[],n.Fonts=[];var s=[],c=!1;return Rl(e,function(x,f,g){switch(g){case 44:n.NumberFmt[x[0]]=x[1],Nl(x[1],x[0]);break;case 43:n.Fonts.push(x),x.color.theme!=null&&r&&r.themeElements&&r.themeElements.clrScheme&&(x.color.rgb=Ex(r.themeElements.clrScheme[x.color.theme].rgb,x.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(x);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:c=!0;break;case 36:c=!1;break;case 37:s.push(g),c=!0;break;case 38:s.pop(),c=!1;break;default:if(f.T>0)s.push(g);else if(f.T<0)s.pop();else if(!c||t.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+g.toString(16))}}),n}function wF(e,r){if(r){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)r[a]!=null&&++t}),t!=0&&(bt(e,615,Ei(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)r[a]!=null&&bt(e,44,uF(a,r[a]))}),bt(e,616))}}function _F(e){var r=1;bt(e,611,Ei(r)),bt(e,43,fF({sz:12,color:{theme:1},name:"Calibri",family:2})),bt(e,612)}function EF(e){var r=2;bt(e,603,Ei(r)),bt(e,45,$4({patternType:"none"})),bt(e,45,$4({patternType:"gray125"})),bt(e,604)}function kF(e){var r=1;bt(e,613,Ei(r)),bt(e,46,pF()),bt(e,614)}function SF(e){var r=1;bt(e,626,Ei(r)),bt(e,47,UN({numFmtId:0},65535)),bt(e,627)}function NF(e,r){bt(e,617,Ei(r.length)),r.forEach(function(t){bt(e,47,UN(t,0))}),bt(e,618)}function AF(e){var r=1;bt(e,619,Ei(r)),bt(e,48,bF({xfId:0,name:"Normal"})),bt(e,620)}function TF(e){var r=0;bt(e,505,Ei(r)),bt(e,506)}function CF(e){var r=0;bt(e,508,vF(r,"TableStyleMedium9","PivotStyleMedium4")),bt(e,509)}function jF(e,r){var t=us();return bt(t,278),wF(t,e.SSF),_F(t),EF(t),kF(t),SF(t),NF(t,r.cellXfs),AF(t),TF(t),CF(t),bt(t,279),t.end()}var OF=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function RF(e,r,t){r.themeElements.clrScheme=[];var n={};(e[0].match(Ha)||[]).forEach(function(a){var s=ir(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(r.themeElements.clrScheme[OF.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(t&&t.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function IF(){}function DF(){}var MF=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,FF=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,LF=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function BF(e,r,t){r.themeElements={};var n;[["clrScheme",MF,RF],["fontScheme",FF,IF],["fmtScheme",LF,DF]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,r,t)})}var PF=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function zN(e,r){(!e||e.length===0)&&(e=Eb());var t,n={};if(!(t=e.match(PF)))throw new Error("themeElements not found in theme");return BF(t[0],n,r),n.raw=e,n}function Eb(e,r){if(r&&r.themeXLSX)return r.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var t=[Zn];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function UF(e,r,t){var n=e.l+r,a=e.read_shift(4);if(a!==124226){if(!t.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var c;try{c=IS(s,{type:"array"})}catch{return}var d=Is(c,"theme/theme/theme1.xml",!0);if(d)return zN(d,t)}}function zF(e){return e.read_shift(4)}function HF(e){var r={};switch(r.xclrType=e.read_shift(2),r.nTintShade=e.read_shift(2),r.xclrType){case 0:e.l+=4;break;case 1:r.xclrValue=GF(e,4);break;case 2:r.xclrValue=yN(e);break;case 3:r.xclrValue=zF(e);break;case 4:e.l+=4;break}return e.l+=8,r}function GF(e,r){return za(e,r)}function VF(e,r){return za(e,r)}function WF(e){var r=e.read_shift(2),t=e.read_shift(2)-4,n=[r];switch(r){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=HF(e);break;case 6:n[1]=VF(e,t);break;case 14:case 15:n[1]=e.read_shift(t===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+r+" "+t)}return n}function qF(e,r){var t=e.l+r;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(WF(e,t-e.l));return{ixfe:n,ext:s}}function XF(e,r){r.forEach(function(t){t[0]})}function KF(e,r){return{flags:e.read_shift(4),version:e.read_shift(4),name:Ua(e)}}function YF(e){var r=ut(12+2*e.name.length);return r.write_shift(4,e.flags),r.write_shift(4,e.version),wa(e.name,r),r.slice(0,r.l)}function $F(e){for(var r=[],t=e.read_shift(4);t-- >0;)r.push([e.read_shift(4),e.read_shift(4)]);return r}function ZF(e){var r=ut(4+8*e.length);r.write_shift(4,e.length);for(var t=0;t<e.length;++t)r.write_shift(4,e[t][0]),r.write_shift(4,e[t][1]);return r}function JF(e,r){var t=ut(8+2*r.length);return t.write_shift(4,e),wa(r,t),t.slice(0,t.l)}function QF(e){return e.l+=4,e.read_shift(4)!=0}function eL(e,r){var t=ut(8);return t.write_shift(4,e),t.write_shift(4,1),t}function tL(e,r,t){var n={Types:[],Cell:[],Value:[]},a=t||{},s=[],c=!1,d=2;return Rl(e,function(x,f,g){switch(g){case 335:n.Types.push({name:x.name});break;case 51:x.forEach(function(v){d==1?n.Cell.push({type:n.Types[v[0]-1].name,index:v[1]}):d==0&&n.Value.push({type:n.Types[v[0]-1].name,index:v[1]})});break;case 337:d=x?1:0;break;case 338:d=2;break;case 35:s.push(g),c=!0;break;case 36:s.pop(),c=!1;break;default:if(!f.T){if(!c||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+g.toString(16))}}}),n}function rL(){var e=us();return bt(e,332),bt(e,334,Ei(1)),bt(e,335,YF({name:"XLDAPR",version:12e4,flags:3496657072})),bt(e,336),bt(e,339,JF(1,"XLDAPR")),bt(e,52),bt(e,35,Ei(514)),bt(e,4096,Ei(0)),bt(e,4097,Qs(1)),bt(e,36),bt(e,53),bt(e,340),bt(e,337,eL(1)),bt(e,51,ZF([[1,0]])),bt(e,338),bt(e,333),e.end()}function nL(e,r,t){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,c;return e.replace(Ha,function(d){var x=ir(d);switch(qi(x[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:x.name});break;case"</metadataType>":break;case"<futureMetadata":for(var f=0;f<n.Types.length;++f)n.Types[f].name==x.name&&(c=n.Types[f]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[x.t-1].name,index:+x.v}):s==0&&n.Value.push({type:n.Types[x.t-1].name,index:+x.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!c)break;c.offsets||(c.offsets=[]),c.offsets.push(+x.i);break;default:if(!a&&t.WTF)throw new Error("unrecognized "+x[0]+" in metadata")}return d}),n}function HN(){var e=[Zn];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function aL(e){var r=[];if(!e)return r;var t=1;return(e.match(Ha)||[]).forEach(function(n){var a=ir(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?t=a.i:a.i=t,r.push(a);break}}),r}function sL(e){var r={};r.i=e.read_shift(4);var t={};t.r=e.read_shift(4),t.c=e.read_shift(4),r.r=sr(t);var n=e.read_shift(1);return n&2&&(r.l="1"),n&8&&(r.a="1"),r}function iL(e,r,t){var n=[];return Rl(e,function(s,c,d){switch(d){case 63:n.push(s);break;default:if(!c.T)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function lL(e,r,t,n){if(!e)return e;var a=n||{},s=!1;Rl(e,function(d,x,f){switch(f){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!x.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}},a)}function oL(e,r){if(!e)return"??";var t=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return r["!id"][t].Target}var P0=1024;function GN(e,r){for(var t=[21600,21600],n=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),a=[Rt("xml",null,{"xmlns:v":Ts.v,"xmlns:o":Ts.o,"xmlns:x":Ts.x,"xmlns:mv":Ts.mv}).replace(/\/>/,">"),Rt("o:shapelayout",Rt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Rt("v:shapetype",[Rt("v:stroke",null,{joinstyle:"miter"}),Rt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:n})];P0<e*1e3;)P0+=1e3;return r.forEach(function(s){var c=Mn(s[0]),d={color2:"#BEFF82",type:"gradient"};d.type=="gradient"&&(d.angle="-180");var x=d.type=="gradient"?Rt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,f=Rt("v:fill",x,d),g={on:"t",obscured:"t"};++P0,a=a.concat(["<v:shape"+Hd({id:"_x0000_s"+P0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",f,Rt("v:shadow",null,g),Rt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ra("x:Anchor",[c.c+1,0,c.r+1,0,c.c+3,20,c.r+5,20].join(",")),Ra("x:AutoFill","False"),Ra("x:Row",String(c.r)),Ra("x:Column",String(c.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function Z4(e,r,t,n){var a=Array.isArray(e),s;r.forEach(function(c){var d=Mn(c.ref);if(a?(e[d.r]||(e[d.r]=[]),s=e[d.r][d.c]):s=e[c.ref],!s){s={t:"z"},a?e[d.r][d.c]=s:e[c.ref]=s;var x=zr(e["!ref"]||"BDWGO1000001:A1");x.s.r>d.r&&(x.s.r=d.r),x.e.r<d.r&&(x.e.r=d.r),x.s.c>d.c&&(x.s.c=d.c),x.e.c<d.c&&(x.e.c=d.c);var f=br(x);f!==e["!ref"]&&(e["!ref"]=f)}s.c||(s.c=[]);var g={a:c.author,t:c.t,r:c.r,T:t};c.h&&(g.h=c.h);for(var v=s.c.length-1;v>=0;--v){if(!t&&s.c[v].T)return;t&&!s.c[v].T&&s.c.splice(v,1)}if(t&&n){for(v=0;v<n.length;++v)if(g.a==n[v].id){g.a=n[v].name||g.a;break}}s.c.push(g)})}function cL(e,r){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var t=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(c){if(!(c===""||c.trim()==="")){var d=c.match(/<(?:\w+:)?author[^>]*>(.*)/);d&&t.push(d[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(c){if(!(c===""||c.trim()==="")){var d=c.match(/<(?:\w+:)?comment[^>]*>/);if(d){var x=ir(d[0]),f={author:x.authorId&&t[x.authorId]||"sheetjsghost",ref:x.ref,guid:x.guid},g=Mn(x.ref);if(!(r.sheetRows&&r.sheetRows<=g.r)){var v=c.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),w=!!v&&!!v[1]&&yb(v[1])||{r:"",t:"",h:""};f.r=w.r,w.r=="<t></t>"&&(w.t=w.h=""),f.t=(w.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),r.cellHTML&&(f.h=w.h),n.push(f)}}}}),n}function VN(e){var r=[Zn,Rt("comments",null,{xmlns:Oc[0]})],t=[];return r.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=an(a.a);t.indexOf(s)==-1&&(t.push(s),r.push("<author>"+s+"</author>")),a.T&&a.ID&&t.indexOf("tc="+a.ID)==-1&&(t.push("tc="+a.ID),r.push("<author>tc="+a.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),r.push("<author>SheetJ5</author>")),r.push("</authors>"),r.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=t.indexOf("tc="+n[1][0].ID):n[1].forEach(function(x){x.a&&(a=t.indexOf(an(x.a))),s.push(x.t||"")}),r.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)r.push(Ra("t",an(s[0]||"")));else{for(var c=`Comment:
    `+s[0]+`
`,d=1;d<s.length;++d)c+=`Reply:
    `+s[d]+`
`;r.push(Ra("t",an(c)))}r.push("</text></comment>")}),r.push("</commentList>"),r.length>2&&(r[r.length]="</comments>",r[1]=r[1].replace("/>",">")),r.join("")}function uL(e,r){var t=[],n=!1,a={},s=0;return e.replace(Ha,function(d,x){var f=ir(d);switch(qi(f[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:f.personId,guid:f.id,ref:f.ref,T:1};break;case"</threadedComment>":a.t!=null&&t.push(a);break;case"<text>":case"<text":s=x+d.length;break;case"</text>":a.t=e.slice(s,x).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&r.WTF)throw new Error("unrecognized "+f[0]+" in threaded comments")}return d}),t}function dL(e,r,t){var n=[Zn,Rt("ThreadedComments",null,{xmlns:ha.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(c,d){if(!c.T){delete c.ID;return}c.a&&r.indexOf(c.a)==-1&&r.push(c.a);var x={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};d==0?s=x.id:x.parentId=s,c.ID=x.id,c.a&&(x.personId="{54EE7950-7262-4200-6969-"+("000000000000"+r.indexOf(c.a)).slice(-12)+"}"),n.push(Rt("threadedComment",Ra("text",c.t||""),x))})}),n.push("</ThreadedComments>"),n.join("")}function fL(e,r){var t=[],n=!1;return e.replace(Ha,function(s){var c=ir(s);switch(qi(c[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":t.push({name:c.displayname,id:c.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&r.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return s}),t}function hL(e){var r=[Zn,Rt("personList",null,{xmlns:ha.TCMNT,"xmlns:x":Oc[0]}).replace(/[\/]>/,">")];return e.forEach(function(t,n){r.push(Rt("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:t,providerId:"None"}))}),r.push("</personList>"),r.join("")}function xL(e){var r={};r.iauthor=e.read_shift(4);var t=Mc(e);return r.rfx=t.s,r.ref=sr(t.s),e.l+=16,r}function mL(e,r){return r==null&&(r=ut(36)),r.write_shift(4,e[1].iauthor),lu(e[0],r),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r}var gL=Ua;function pL(e){return wa(e.slice(0,54))}function bL(e,r){var t=[],n=[],a={},s=!1;return Rl(e,function(d,x,f){switch(f){case 632:n.push(d);break;case 635:a=d;break;case 637:a.t=d.t,a.h=d.h,a.r=d.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,r.sheetRows&&a.rfx&&r.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,t.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!x.T){if(!s||r.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}),t}function vL(e){var r=us(),t=[];return bt(r,628),bt(r,630),e.forEach(function(n){n[1].forEach(function(a){t.indexOf(a.a)>-1||(t.push(a.a.slice(0,54)),bt(r,632,pL(a.a)))})}),bt(r,631),bt(r,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=t.indexOf(a.a);var s={s:Mn(n[0]),e:Mn(n[0])};bt(r,635,mL([s,a])),a.t&&a.t.length>0&&bt(r,637,z7(a)),bt(r,636),delete a.iauthor})}),bt(r,634),bt(r,629),r.end()}var yL="application/vnd.ms-office.vbaProject";function wL(e){var r=Yt.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(t,n){if(!(t.slice(-1)==="/"||!t.match(/_VBA_PROJECT_CUR/))){var a=t.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Yt.utils.cfb_add(r,a,e.FileIndex[n].content)}}),Yt.write(r)}function _L(e,r){r.FullPaths.forEach(function(t,n){if(n!=0){var a=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Yt.utils.cfb_add(e,a,r.FileIndex[n].content)}})}var WN=["xlsb","xlsm","xlam","biff8","xla"];function EL(){return{"!type":"dialog"}}function kL(){return{"!type":"dialog"}}function SL(){return{"!type":"macro"}}function NL(){return{"!type":"macro"}}var G0=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,r={r:0,c:0};function t(n,a,s,c){var d=!1,x=!1;s.length==0?x=!0:s.charAt(0)=="["&&(x=!0,s=s.slice(1,-1)),c.length==0?d=!0:c.charAt(0)=="["&&(d=!0,c=c.slice(1,-1));var f=s.length>0?parseInt(s,10)|0:0,g=c.length>0?parseInt(c,10)|0:0;return d?g+=r.c:--g,x?f+=r.r:--f,a+(d?"":"$")+Dn(g)+(x?"":"$")+$n(f)}return function(a,s){return r=s,a.replace(e,t)}})(),kb=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Sb=(function(){return function(r,t){return r.replace(kb,function(n,a,s,c,d,x){var f=db(c)-(s?0:t.c),g=ub(x)-(d?0:t.r),v=g==0?"":d?g+1:"["+g+"]",w=f==0?"":s?f+1:"["+f+"]";return a+"R"+v+"C"+w})}})();function qN(e,r){return e.replace(kb,function(t,n,a,s,c,d){return n+(a=="$"?a+s:Dn(db(s)+r.c))+(c=="$"?c+d:$n(ub(d)+r.r))})}function AL(e,r,t){var n=ds(r),a=n.s,s=Mn(t),c={r:s.r-a.r,c:s.c-a.c};return qN(e,c)}function TL(e){return e.length!=1}function J4(e){return e.replace(/_xlfn\./g,"")}function aa(e){e.l+=1}function Co(e,r){var t=e.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function XN(e,r,t){var n=2;if(t){if(t.biff>=2&&t.biff<=5)return KN(e);t.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),c=Co(e),d=Co(e);return{s:{r:a,c:c[0],cRel:c[1],rRel:c[2]},e:{r:s,c:d[0],cRel:d[1],rRel:d[2]}}}function KN(e){var r=Co(e),t=Co(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:r[0],c:n,cRel:r[1],rRel:r[2]},e:{r:t[0],c:a,cRel:t[1],rRel:t[2]}}}function CL(e,r,t){if(t.biff<8)return KN(e);var n=e.read_shift(t.biff==12?4:2),a=e.read_shift(t.biff==12?4:2),s=Co(e),c=Co(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:c[0],cRel:c[1],rRel:c[2]}}}function YN(e,r,t){if(t&&t.biff>=2&&t.biff<=5)return jL(e);var n=e.read_shift(t&&t.biff==12?4:2),a=Co(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function jL(e){var r=Co(e),t=e.read_shift(1);return{r:r[0],c:t,cRel:r[1],rRel:r[2]}}function OL(e){var r=e.read_shift(2),t=e.read_shift(2);return{r,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function RL(e,r,t){var n=t&&t.biff?t.biff:8;if(n>=2&&n<=5)return IL(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),c=(s&16384)>>14,d=(s&32768)>>15;if(s&=16383,d==1)for(;a>524287;)a-=1048576;if(c==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:c,rRel:d}}function IL(e){var r=e.read_shift(2),t=e.read_shift(1),n=(r&32768)>>15,a=(r&16384)>>14;return r&=16383,n==1&&r>=8192&&(r=r-16384),a==1&&t>=128&&(t=t-256),{r,c:t,cRel:a,rRel:n}}function DL(e,r,t){var n=(e[e.l++]&96)>>5,a=XN(e,t.biff>=2&&t.biff<=5?6:8,t);return[n,a]}function ML(e,r,t){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var c=XN(e,s,t);return[n,a,c]}function FL(e,r,t){var n=(e[e.l++]&96)>>5;return e.l+=t&&t.biff>8?12:t.biff<8?6:8,[n]}function LL(e,r,t){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(t)switch(t.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function BL(e,r,t){var n=(e[e.l++]&96)>>5,a=CL(e,r-1,t);return[n,a]}function PL(e,r,t){var n=(e[e.l++]&96)>>5;return e.l+=t.biff==2?6:t.biff==12?14:7,[n]}function Q4(e){var r=e[e.l+1]&1,t=1;return e.l+=4,[r,t]}function UL(e,r,t){e.l+=2;for(var n=e.read_shift(t&&t.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(t&&t.biff==2?1:2));return a}function zL(e,r,t){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(t&&t.biff==2?1:2)]}function HL(e,r,t){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(t&&t.biff==2?1:2)]}function GL(e){var r=e[e.l+1]&255?1:0;return e.l+=2,[r,e.read_shift(2)]}function VL(e,r,t){var n=e[e.l+1]&255?1:0;return e.l+=t&&t.biff==2?3:4,[n]}function $N(e){var r=e.read_shift(1),t=e.read_shift(1);return[r,t]}function WL(e){return e.read_shift(2),$N(e)}function qL(e){return e.read_shift(2),$N(e)}function XL(e,r,t){var n=(e[e.l]&96)>>5;e.l+=1;var a=YN(e,0,t);return[n,a]}function KL(e,r,t){var n=(e[e.l]&96)>>5;e.l+=1;var a=RL(e,0,t);return[n,a]}function YL(e,r,t){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);t&&t.biff==5&&(e.l+=12);var s=YN(e,0,t);return[n,a,s]}function $L(e,r,t){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(t&&t.biff<=3?1:2);return[QB[a],QN[a],n]}function ZL(e,r,t){var n=e[e.l++],a=e.read_shift(1),s=t&&t.biff<=3?[n==88?-1:0,e.read_shift(1)]:JL(e);return[a,(s[0]===0?QN:JB)[s[1]]]}function JL(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function QL(e,r,t){e.l+=t&&t.biff==2?3:4}function eB(e,r,t){if(e.l++,t&&t.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(t&&t.biff==2?1:2);return[n,a]}function tB(e){return e.l++,Il[e.read_shift(1)]}function rB(e){return e.l++,e.read_shift(2)}function nB(e){return e.l++,e.read_shift(1)!==0}function aB(e){return e.l++,Pa(e)}function sB(e,r,t){return e.l++,gf(e,r-1,t)}function iB(e,r){var t=[e.read_shift(1)];if(r==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=Yn(e,1)?"TRUE":"FALSE",r!=12&&(e.l+=7);break;case 37:case 16:t[1]=Il[e[e.l]],e.l+=r==12?4:8;break;case 0:e.l+=8;break;case 1:t[1]=Pa(e);break;case 2:t[1]=Fc(e,0,{biff:r>0&&r<8?2:r});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function lB(e,r,t){for(var n=e.read_shift(t.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((t.biff==12?Mc:Vx)(e));return a}function oB(e,r,t){var n=0,a=0;t.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),t.biff>=2&&t.biff<8&&(--n,--a==0&&(a=256));for(var s=0,c=[];s!=n&&(c[s]=[]);++s)for(var d=0;d!=a;++d)c[s][d]=iB(e,t.biff);return c}function cB(e,r,t){var n=e.read_shift(1)>>>5&3,a=!t||t.biff>=8?4:2,s=e.read_shift(a);switch(t.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function uB(e,r,t){if(t.biff==5)return dB(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function dB(e){var r=e.read_shift(1)>>>5&3,t=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[r,t,n]}function fB(e,r,t){var n=e.read_shift(1)>>>5&3;e.l+=t&&t.biff==2?3:4;var a=e.read_shift(t&&t.biff==2?1:2);return[n,a]}function hB(e,r,t){var n=e.read_shift(1)>>>5&3,a=e.read_shift(t&&t.biff==2?1:2);return[n,a]}function xB(e,r,t){var n=e.read_shift(1)>>>5&3;return e.l+=4,t.biff<8&&e.l--,t.biff==12&&(e.l+=2),[n]}function mB(e,r,t){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var gB=za,pB=za,bB=za;function bf(e,r,t){return e.l+=2,[OL(e)]}function Nb(e){return e.l+=6,[]}var vB=bf,yB=Nb,wB=Nb,_B=bf;function ZN(e){return e.l+=2,[ia(e),e.read_shift(2)&1]}var EB=bf,kB=ZN,SB=Nb,NB=bf,AB=bf,TB=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function CB(e){e.l+=2;var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),c=TB[t>>2&31];return{ixti:r,coltype:t&3,rt:c,idx:n,c:a,C:s}}function jB(e){return e.l+=2,[e.read_shift(4)]}function OB(e,r,t){return e.l+=5,e.l+=2,e.l+=t.biff==2?1:4,["PTGSHEET"]}function RB(e,r,t){return e.l+=t.biff==2?4:5,["PTGENDSHEET"]}function IB(e){var r=e.read_shift(1)>>>5&3,t=e.read_shift(2);return[r,t]}function DB(e){var r=e.read_shift(1)>>>5&3,t=e.read_shift(2);return[r,t]}function MB(e){return e.l+=4,[0,0]}var e3={1:{n:"PtgExp",f:eB},2:{n:"PtgTbl",f:bB},3:{n:"PtgAdd",f:aa},4:{n:"PtgSub",f:aa},5:{n:"PtgMul",f:aa},6:{n:"PtgDiv",f:aa},7:{n:"PtgPower",f:aa},8:{n:"PtgConcat",f:aa},9:{n:"PtgLt",f:aa},10:{n:"PtgLe",f:aa},11:{n:"PtgEq",f:aa},12:{n:"PtgGe",f:aa},13:{n:"PtgGt",f:aa},14:{n:"PtgNe",f:aa},15:{n:"PtgIsect",f:aa},16:{n:"PtgUnion",f:aa},17:{n:"PtgRange",f:aa},18:{n:"PtgUplus",f:aa},19:{n:"PtgUminus",f:aa},20:{n:"PtgPercent",f:aa},21:{n:"PtgParen",f:aa},22:{n:"PtgMissArg",f:aa},23:{n:"PtgStr",f:sB},26:{n:"PtgSheet",f:OB},27:{n:"PtgEndSheet",f:RB},28:{n:"PtgErr",f:tB},29:{n:"PtgBool",f:nB},30:{n:"PtgInt",f:rB},31:{n:"PtgNum",f:aB},32:{n:"PtgArray",f:PL},33:{n:"PtgFunc",f:$L},34:{n:"PtgFuncVar",f:ZL},35:{n:"PtgName",f:cB},36:{n:"PtgRef",f:XL},37:{n:"PtgArea",f:DL},38:{n:"PtgMemArea",f:fB},39:{n:"PtgMemErr",f:gB},40:{n:"PtgMemNoMem",f:pB},41:{n:"PtgMemFunc",f:hB},42:{n:"PtgRefErr",f:xB},43:{n:"PtgAreaErr",f:FL},44:{n:"PtgRefN",f:KL},45:{n:"PtgAreaN",f:BL},46:{n:"PtgMemAreaN",f:IB},47:{n:"PtgMemNoMemN",f:DB},57:{n:"PtgNameX",f:uB},58:{n:"PtgRef3d",f:YL},59:{n:"PtgArea3d",f:ML},60:{n:"PtgRefErr3d",f:mB},61:{n:"PtgAreaErr3d",f:LL},255:{}},FB={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},LB={1:{n:"PtgElfLel",f:ZN},2:{n:"PtgElfRw",f:NB},3:{n:"PtgElfCol",f:vB},6:{n:"PtgElfRwV",f:AB},7:{n:"PtgElfColV",f:_B},10:{n:"PtgElfRadical",f:EB},11:{n:"PtgElfRadicalS",f:SB},13:{n:"PtgElfColS",f:yB},15:{n:"PtgElfColSV",f:wB},16:{n:"PtgElfRadicalLel",f:kB},25:{n:"PtgList",f:CB},29:{n:"PtgSxName",f:jB},255:{}},BB={0:{n:"PtgAttrNoop",f:MB},1:{n:"PtgAttrSemi",f:VL},2:{n:"PtgAttrIf",f:HL},4:{n:"PtgAttrChoose",f:UL},8:{n:"PtgAttrGoto",f:zL},16:{n:"PtgAttrSum",f:QL},32:{n:"PtgAttrBaxcel",f:Q4},33:{n:"PtgAttrBaxcel",f:Q4},64:{n:"PtgAttrSpace",f:WL},65:{n:"PtgAttrSpaceSemi",f:qL},128:{n:"PtgAttrIfError",f:GL},255:{}};function vf(e,r,t,n){if(n.biff<8)return za(e,r);for(var a=e.l+r,s=[],c=0;c!==t.length;++c)switch(t[c][0]){case"PtgArray":t[c][1]=oB(e,0,n),s.push(t[c][1]);break;case"PtgMemArea":t[c][2]=lB(e,t[c][1],n),s.push(t[c][2]);break;case"PtgExp":n&&n.biff==12&&(t[c][1][1]=e.read_shift(4),s.push(t[c][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[c][0]}return r=a-e.l,r!==0&&s.push(za(e,r)),s}function yf(e,r,t){for(var n=e.l+r,a,s,c=[];n!=e.l;)r=n-e.l,s=e[e.l],a=e3[s]||e3[FB[s]],(s===24||s===25)&&(a=(s===24?LB:BB)[e[e.l+1]]),!a||!a.f?za(e,r):c.push([a.n,a.f(e,r,t)]);return c}function PB(e){for(var r=[],t=0;t<e.length;++t){for(var n=e[t],a=[],s=0;s<n.length;++s){var c=n[s];c?c[0]===2?a.push('"'+c[1].replace(/"/g,'""')+'"'):a.push(c[1]):a.push("")}r.push(a.join(","))}return r.join(";")}var UB={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function zB(e,r){if(!e&&!(r&&r.biff<=5&&r.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function JN(e,r,t){if(!e)return"SH33TJSERR0";if(t.biff>8&&(!e.XTI||!e.XTI[r]))return e.SheetNames[r];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[r];if(t.biff<8)return r>1e4&&(r-=65536),r<0&&(r=-r),r==0?"":e.XTI[r-1];if(!n)return"SH33TJSERR1";var a="";if(t.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return t.SID!=null?e.SheetNames[t.SID]:"SH33TJSSAME"+e[n[0]][0];default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function t3(e,r,t){var n=JN(e,r,t);return n=="#REF"?n:zB(n,t)}function Fa(e,r,t,n,a){var s=a&&a.biff||8,c={s:{c:0,r:0}},d=[],x,f,g,v=0,w=0,E,N="";if(!e[0]||!e[0][0])return"";for(var S=-1,T="",j=0,D=e[0].length;j<D;++j){var I=e[0][j];switch(I[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(x=d.pop(),f=d.pop(),S>=0){switch(e[0][S][1][0]){case 0:T=Hn(" ",e[0][S][1][1]);break;case 1:T=Hn("\r",e[0][S][1][1]);break;default:if(T="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][S][1][0])}f=f+T,S=-1}d.push(f+UB[I[0]]+x);break;case"PtgIsect":x=d.pop(),f=d.pop(),d.push(f+" "+x);break;case"PtgUnion":x=d.pop(),f=d.pop(),d.push(f+","+x);break;case"PtgRange":x=d.pop(),f=d.pop(),d.push(f+":"+x);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":g=wd(I[1][1],c,a),d.push(_d(g,s));break;case"PtgRefN":g=t?wd(I[1][1],t,a):I[1][1],d.push(_d(g,s));break;case"PtgRef3d":v=I[1][1],g=wd(I[1][2],c,a),N=t3(n,v,a),d.push(N+"!"+_d(g,s));break;case"PtgFunc":case"PtgFuncVar":var L=I[1][0],V=I[1][1];L||(L=0),L&=127;var X=L==0?[]:d.slice(-L);d.length-=L,V==="User"&&(V=X.shift()),d.push(V+"("+X.join(",")+")");break;case"PtgBool":d.push(I[1]?"TRUE":"FALSE");break;case"PtgInt":d.push(I[1]);break;case"PtgNum":d.push(String(I[1]));break;case"PtgStr":d.push('"'+I[1].replace(/"/g,'""')+'"');break;case"PtgErr":d.push(I[1]);break;case"PtgAreaN":E=j4(I[1][1],t?{s:t}:c,a),d.push(pp(E,a));break;case"PtgArea":E=j4(I[1][1],c,a),d.push(pp(E,a));break;case"PtgArea3d":v=I[1][1],E=I[1][2],N=t3(n,v,a),d.push(N+"!"+pp(E,a));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":w=I[1][2];var M=(n.names||[])[w-1]||(n[0]||[])[w],W=M?M.Name:"SH33TJSNAME"+String(w);W&&W.slice(0,6)=="_xlfn."&&!a.xlfn&&(W=W.slice(6)),d.push(W);break;case"PtgNameX":var z=I[1][1];w=I[1][2];var ae;if(a.biff<=5)z<0&&(z=-z),n[z]&&(ae=n[z][w]);else{var Z="";if(((n[z]||[])[0]||[])[0]==14849||(((n[z]||[])[0]||[])[0]==1025?n[z][w]&&n[z][w].itab>0&&(Z=n.SheetNames[n[z][w].itab-1]+"!"):Z=n.SheetNames[w-1]+"!"),n[z]&&n[z][w])Z+=n[z][w].Name;else if(n[0]&&n[0][w])Z+=n[0][w].Name;else{var H=(JN(n,z,a)||"").split(";;");H[w-1]?Z=H[w-1]:Z+="SH33TJSERRX"}d.push(Z);break}ae||(ae={Name:"SH33TJSERRY"}),d.push(ae.Name);break;case"PtgParen":var he="(",q=")";if(S>=0){switch(T="",e[0][S][1][0]){case 2:he=Hn(" ",e[0][S][1][1])+he;break;case 3:he=Hn("\r",e[0][S][1][1])+he;break;case 4:q=Hn(" ",e[0][S][1][1])+q;break;case 5:q=Hn("\r",e[0][S][1][1])+q;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][S][1][0])}S=-1}d.push(he+d.pop()+q);break;case"PtgRefErr":d.push("#REF!");break;case"PtgRefErr3d":d.push("#REF!");break;case"PtgExp":g={c:I[1][1],r:I[1][0]};var se={c:t.c,r:t.r};if(n.sharedf[sr(g)]){var ve=n.sharedf[sr(g)];d.push(Fa(ve,c,se,n,a))}else{var le=!1;for(x=0;x!=n.arrayf.length;++x)if(f=n.arrayf[x],!(g.c<f[0].s.c||g.c>f[0].e.c)&&!(g.r<f[0].s.r||g.r>f[0].e.r)){d.push(Fa(f[1],c,se,n,a)),le=!0;break}le||d.push(I[1])}break;case"PtgArray":d.push("{"+PB(I[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":S=j;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":d.push("");break;case"PtgAreaErr":d.push("#REF!");break;case"PtgAreaErr3d":d.push("#REF!");break;case"PtgList":d.push("Table"+I[1].idx+"[#"+I[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(I));default:throw new Error("Unrecognized Formula Token: "+String(I))}var ge=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&S>=0&&ge.indexOf(e[0][j][0])==-1){I=e[0][S];var ie=!0;switch(I[1][0]){case 4:ie=!1;case 0:T=Hn(" ",I[1][1]);break;case 5:ie=!1;case 1:T=Hn("\r",I[1][1]);break;default:if(T="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+I[1][0])}d.push((ie?T:"")+d.pop()+(ie?"":T)),S=-1}}if(d.length>1&&a.WTF)throw new Error("bad formula stack");return d[0]}function HB(e,r,t){var n=e.l+r,a=t.biff==2?1:2,s,c=e.read_shift(a);if(c==65535)return[[],za(e,r-2)];var d=yf(e,c,t);return r!==c+a&&(s=vf(e,r-c-a,d,t)),e.l=n,[d,s]}function GB(e,r,t){var n=e.l+r,a=t.biff==2?1:2,s,c=e.read_shift(a);if(c==65535)return[[],za(e,r-2)];var d=yf(e,c,t);return r!==c+a&&(s=vf(e,r-c-a,d,t)),e.l=n,[d,s]}function VB(e,r,t,n){var a=e.l+r,s=yf(e,n,t),c;return a!==e.l&&(c=vf(e,a-e.l,s,t)),[s,c]}function WB(e,r,t){var n=e.l+r,a,s=e.read_shift(2),c=yf(e,s,t);return s==65535?[[],za(e,r-2)]:(r!==s+2&&(a=vf(e,n-s-2,c,t)),[c,a])}function qB(e){var r;if(_l(e,e.l+6)!==65535)return[Pa(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return r=e[e.l+2]===1,e.l+=8,[r,"b"];case 2:return r=e[e.l+2],e.l+=8,[r,"e"];case 3:return e.l+=8,["","s"]}return[]}function XB(e){if(e==null){var r=ut(8);return r.write_shift(1,3),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,65535),r}else if(typeof e=="number")return kc(e);return kc(0)}function _p(e,r,t){var n=e.l+r,a=Xi(e);t.biff==2&&++e.l;var s=qB(e),c=e.read_shift(1);t.biff!=2&&(e.read_shift(1),t.biff>=5&&e.read_shift(4));var d=GB(e,n-e.l,t);return{cell:a,val:s[0],formula:d,shared:c>>3&1,tt:s[1]}}function KB(e,r,t,n,a){var s=Nc(r,t,a),c=XB(e.v),d=ut(6),x=33;d.write_shift(2,x),d.write_shift(4,0);for(var f=ut(e.bf.length),g=0;g<e.bf.length;++g)f[g]=e.bf[g];var v=ya([s,c,d,f]);return v}function Wx(e,r,t){var n=e.read_shift(4),a=yf(e,n,t),s=e.read_shift(4),c=s>0?vf(e,s,a,t):null;return[a,c]}var YB=Wx,qx=Wx,$B=Wx,ZB=Wx,JB={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},QN={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},QB={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function r3(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(r,t){return t.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function eP(e){var r="of:="+e.replace(kb,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return r.replace(/;/g,"|").replace(/,/g,";")}function Ep(e){var r=e.split(":"),t=r[0].split(".")[0];return[t,r[0].split(".")[1]+(r.length>1?":"+(r[1].split(".")[1]||r[1].split(".")[0]):"")]}function tP(e){return e.replace(/\./,"!")}var kd={},V0={},Sd=typeof Map<"u";function Ab(e,r,t){var n=0,a=e.length;if(t){if(Sd?t.has(r):Object.prototype.hasOwnProperty.call(t,r)){for(var s=Sd?t.get(r):t[r];n<s.length;++n)if(e[s[n]].t===r)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===r)return e.Count++,n;return e[a]={t:r},e.Count++,e.Unique++,t&&(Sd?(t.has(r)||t.set(r,[]),t.get(r).push(a)):(Object.prototype.hasOwnProperty.call(t,r)||(t[r]=[]),t[r].push(a))),a}function Xx(e,r){var t={min:e+1,max:e+1},n=-1;return r.MDW&&(La=r.MDW),r.width!=null?t.customWidth=1:r.wpx!=null?n=Xd(r.wpx):r.wch!=null&&(n=r.wch),n>-1?(t.width=kx(n),t.customWidth=1):r.width!=null&&(t.width=r.width),r.hidden&&(t.hidden=!0),r.level!=null&&(t.outlineLevel=t.level=r.level),t}function vc(e,r){if(e){var t=[.7,.7,.75,.75,.3,.3];r=="xlml"&&(t=[1,1,1,1,.5,.5]),e.left==null&&(e.left=t[0]),e.right==null&&(e.right=t[1]),e.top==null&&(e.top=t[2]),e.bottom==null&&(e.bottom=t[3]),e.header==null&&(e.header=t[4]),e.footer==null&&(e.footer=t[5])}}function Io(e,r,t){var n=t.revssf[r.z!=null?r.z:"General"],a=60,s=e.length;if(n==null&&t.ssf){for(;a<392;++a)if(t.ssf[a]==null){Nl(r.z,a),t.ssf[a]=r.z,t.revssf[r.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function e5(e,r,t,n,a,s){try{n.cellNF&&(e.z=nr[r])}catch(d){if(n.WTF)throw d}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Nn(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(nr[r]==null&&Nl(JI[r]||"General",r),e.t==="e")e.w=e.w||Il[e.v];else if(r===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ud(e.v);else if(e.t==="d"){var c=xa(e.v);(c|0)===c?e.w=c.toString(10):e.w=Ud(c)}else{if(e.v===void 0)return"";e.w=_c(e.v,V0)}else e.t==="d"?e.w=ni(r,xa(e.v),V0):e.w=ni(r,e.v,V0)}catch(d){if(n.WTF)throw d}if(n.cellStyles&&t!=null)try{e.s=s.Fills[t],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Ex(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Ex(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(d){if(n.WTF&&s.Fills)throw d}}}function rP(e,r,t){if(e&&e["!ref"]){var n=zr(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+t+"): "+e["!ref"])}}function nP(e,r){var t=zr(r);t.s.r<=t.e.r&&t.s.c<=t.e.c&&t.s.r>=0&&t.s.c>=0&&(e["!ref"]=br(t))}var aP=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,sP=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,iP=/<(?:\w:)?hyperlink [^>]*>/mg,lP=/"(\w*:\w*)"/,oP=/<(?:\w:)?col\b[^>]*[\/]?>/g,cP=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,uP=/<(?:\w:)?pageMargins[^>]*\/>/g,t5=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,dP=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,fP=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function hP(e,r,t,n,a,s,c){if(!e)return e;n||(n={"!id":{}});var d=r.dense?[]:{},x={s:{r:2e6,c:2e6},e:{r:0,c:0}},f="",g="",v=e.match(sP);v?(f=e.slice(0,v.index),g=e.slice(v.index+v[0].length)):f=g=e;var w=f.match(t5);w?Tb(w[0],d,a,t):(w=f.match(dP))&&mP(w[0],w[1]||"",d,a,t);var E=(f.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(E>0){var N=f.slice(E,E+50).match(lP);N&&nP(d,N[1])}var S=f.match(fP);S&&S[1]&&TP(S[1],a);var T=[];if(r.cellStyles){var j=f.match(oP);j&&EP(T,j)}v&&OP(v[1],d,r,x,s,c);var D=g.match(cP);D&&(d["!autofilter"]=SP(D[0]));var I=[],L=g.match(aP);if(L)for(E=0;E!=L.length;++E)I[E]=zr(L[E].slice(L[E].indexOf('"')+1));var V=g.match(iP);V&&yP(d,V,n);var X=g.match(uP);if(X&&(d["!margins"]=wP(ir(X[0]))),!d["!ref"]&&x.e.c>=x.s.c&&x.e.r>=x.s.r&&(d["!ref"]=br(x)),r.sheetRows>0&&d["!ref"]){var M=zr(d["!ref"]);r.sheetRows<=+M.e.r&&(M.e.r=r.sheetRows-1,M.e.r>x.e.r&&(M.e.r=x.e.r),M.e.r<M.s.r&&(M.s.r=M.e.r),M.e.c>x.e.c&&(M.e.c=x.e.c),M.e.c<M.s.c&&(M.s.c=M.e.c),d["!fullref"]=d["!ref"],d["!ref"]=br(M))}return T.length>0&&(d["!cols"]=T),I.length>0&&(d["!merges"]=I),d}function xP(e){if(e.length===0)return"";for(var r='<mergeCells count="'+e.length+'">',t=0;t!=e.length;++t)r+='<mergeCell ref="'+br(e[t])+'"/>';return r+"</mergeCells>"}function Tb(e,r,t,n){var a=ir(e);t.Sheets[n]||(t.Sheets[n]={}),a.codeName&&(t.Sheets[n].CodeName=Ur(cn(a.codeName)))}function mP(e,r,t,n,a){Tb(e.slice(0,e.indexOf(">")),t,n,a)}function gP(e,r,t,n,a){var s=!1,c={},d=null;if(n.bookType!=="xlsx"&&r.vbaraw){var x=r.SheetNames[t];try{r.Workbook&&(x=r.Workbook.Sheets[t].CodeName||x)}catch{}s=!0,c.codeName=zi(an(x))}if(e&&e["!outline"]){var f={summaryBelow:1,summaryRight:1};e["!outline"].above&&(f.summaryBelow=0),e["!outline"].left&&(f.summaryRight=0),d=(d||"")+Rt("outlinePr",null,f)}!s&&!d||(a[a.length]=Rt("sheetPr",d,c))}var pP=["objects","scenarios","selectLockedCells","selectUnlockedCells"],bP=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function vP(e){var r={sheet:1};return pP.forEach(function(t){e[t]!=null&&e[t]&&(r[t]="1")}),bP.forEach(function(t){e[t]!=null&&!e[t]&&(r[t]="0")}),e.password&&(r.password=wb(e.password).toString(16).toUpperCase()),Rt("sheetProtection",null,r)}function yP(e,r,t){for(var n=Array.isArray(e),a=0;a!=r.length;++a){var s=ir(cn(r[a]),!0);if(!s.ref)return;var c=((t||{})["!id"]||[])[s.id];c?(s.Target=c.Target,s.location&&(s.Target+="#"+Ur(s.location))):(s.Target="#"+Ur(s.location),c={Target:s.Target,TargetMode:"Internal"}),s.Rel=c,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var d=zr(s.ref),x=d.s.r;x<=d.e.r;++x)for(var f=d.s.c;f<=d.e.c;++f){var g=sr({c:f,r:x});n?(e[x]||(e[x]=[]),e[x][f]||(e[x][f]={t:"z",v:void 0}),e[x][f].l=s):(e[g]||(e[g]={t:"z",v:void 0}),e[g].l=s)}}}function wP(e){var r={};return["left","right","top","bottom","header","footer"].forEach(function(t){e[t]&&(r[t]=parseFloat(e[t]))}),r}function _P(e){return vc(e),Rt("pageMargins",null,e)}function EP(e,r){for(var t=!1,n=0;n!=r.length;++n){var a=ir(r[n],!0);a.hidden&&(a.hidden=En(a.hidden));var s=parseInt(a.min,10)-1,c=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!t&&a.width&&(t=!0,_b(a.width)),To(a);s<=c;)e[s++]=An(a)}}function kP(e,r){for(var t=["<cols>"],n,a=0;a!=r.length;++a)(n=r[a])&&(t[t.length]=Rt("col",null,Xx(a,n)));return t[t.length]="</cols>",t.join("")}function SP(e){var r={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return r}function NP(e,r,t,n){var a=typeof e.ref=="string"?e.ref:br(e.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,c=ds(a);c.s.r==c.e.r&&(c.e.r=ds(r["!ref"]).e.r,a=br(c));for(var d=0;d<s.length;++d){var x=s[d];if(x.Name=="_xlnm._FilterDatabase"&&x.Sheet==n){x.Ref="'"+t.SheetNames[n]+"'!"+a;break}}return d==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+a}),Rt("autoFilter",null,{ref:a})}var AP=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function TP(e,r){r.Views||(r.Views=[{}]),(e.match(AP)||[]).forEach(function(t,n){var a=ir(t);r.Views[n]||(r.Views[n]={}),+a.zoomScale&&(r.Views[n].zoom=+a.zoomScale),En(a.rightToLeft)&&(r.Views[n].RTL=!0)})}function CP(e,r,t,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Rt("sheetViews",Rt("sheetView",null,a),{})}function jP(e,r,t,n){if(e.c&&t["!comments"].push([r,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,c=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Il[e.v];break;case"d":n&&n.cellDates?a=Nn(e.v,-1).toISOString():(e=An(e),e.t="n",a=""+(e.v=xa(Nn(e.v)))),typeof e.z>"u"&&(e.z=nr[14]);break;default:a=e.v;break}var d=Ra("v",an(a)),x={r},f=Io(n.cellXfs,e,n);switch(f!==0&&(x.s=f),e.t){case"n":break;case"d":x.t="d";break;case"b":x.t="b";break;case"e":x.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){d=Ra("v",""+Ab(n.Strings,e.v,n.revStrings)),x.t="s";break}x.t="str";break}if(e.t!=s&&(e.t=s,e.v=c),typeof e.f=="string"&&e.f){var g=e.F&&e.F.slice(0,r.length)==r?{t:"array",ref:e.F}:null;d=Rt("f",an(e.f),g)+(e.v!=null?d:"")}return e.l&&t["!links"].push([r,e.l]),e.D&&(x.cm=1),Rt("c",d,x)}var OP=(function(){var e=/<(?:\w+:)?c[ \/>]/,r=/<\/(?:\w+:)?row>/,t=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=zd("v"),c=zd("f");return function(x,f,g,v,w,E){for(var N=0,S="",T=[],j=[],D=0,I=0,L=0,V="",X,M,W=0,z=0,ae,Z,H=0,he=0,q=Array.isArray(E.CellXf),se,ve=[],le=[],ge=Array.isArray(f),ie=[],Le={},Q=!1,B=!!g.sheetStubs,te=x.split(r),U=0,P=te.length;U!=P;++U){S=te[U].trim();var ue=S.length;if(ue!==0){var Re=0;e:for(N=0;N<ue;++N)switch(S[N]){case">":if(S[N-1]!="/"){++N;break e}if(g&&g.cellStyles){if(M=ir(S.slice(Re,N),!0),W=M.r!=null?parseInt(M.r,10):W+1,z=-1,g.sheetRows&&g.sheetRows<W)continue;Le={},Q=!1,M.ht&&(Q=!0,Le.hpt=parseFloat(M.ht),Le.hpx=Y0(Le.hpt)),M.hidden=="1"&&(Q=!0,Le.hidden=!0),M.outlineLevel!=null&&(Q=!0,Le.level=+M.outlineLevel),Q&&(ie[W-1]=Le)}break;case"<":Re=N;break}if(Re>=N)break;if(M=ir(S.slice(Re,N),!0),W=M.r!=null?parseInt(M.r,10):W+1,z=-1,!(g.sheetRows&&g.sheetRows<W)){v.s.r>W-1&&(v.s.r=W-1),v.e.r<W-1&&(v.e.r=W-1),g&&g.cellStyles&&(Le={},Q=!1,M.ht&&(Q=!0,Le.hpt=parseFloat(M.ht),Le.hpx=Y0(Le.hpt)),M.hidden=="1"&&(Q=!0,Le.hidden=!0),M.outlineLevel!=null&&(Q=!0,Le.level=+M.outlineLevel),Q&&(ie[W-1]=Le)),T=S.slice(N).split(e);for(var De=0;De!=T.length&&T[De].trim().charAt(0)=="<";++De);for(T=T.slice(De),N=0;N!=T.length;++N)if(S=T[N].trim(),S.length!==0){if(j=S.match(t),D=N,I=0,L=0,S="<c "+(S.slice(0,1)=="<"?">":"")+S,j!=null&&j.length===2){for(D=0,V=j[1],I=0;I!=V.length&&!((L=V.charCodeAt(I)-64)<1||L>26);++I)D=26*D+L;--D,z=D}else++z;for(I=0;I!=S.length&&S.charCodeAt(I)!==62;++I);if(++I,M=ir(S.slice(0,I),!0),M.r||(M.r=sr({r:W-1,c:z})),V=S.slice(I),X={t:""},(j=V.match(s))!=null&&j[1]!==""&&(X.v=Ur(j[1])),g.cellFormula){if((j=V.match(c))!=null&&j[1]!==""){if(X.f=Ur(cn(j[1])).replace(/\r\n/g,`
`),g.xlfn||(X.f=J4(X.f)),j[0].indexOf('t="array"')>-1)X.F=(V.match(a)||[])[1],X.F.indexOf(":")>-1&&ve.push([zr(X.F),X.F]);else if(j[0].indexOf('t="shared"')>-1){Z=ir(j[0]);var Ne=Ur(cn(j[1]));g.xlfn||(Ne=J4(Ne)),le[parseInt(Z.si,10)]=[Z,Ne,M.r]}}else(j=V.match(/<f[^>]*\/>/))&&(Z=ir(j[0]),le[Z.si]&&(X.f=AL(le[Z.si][1],le[Z.si][2],M.r)));var Ke=Mn(M.r);for(I=0;I<ve.length;++I)Ke.r>=ve[I][0].s.r&&Ke.r<=ve[I][0].e.r&&Ke.c>=ve[I][0].s.c&&Ke.c<=ve[I][0].e.c&&(X.F=ve[I][1])}if(M.t==null&&X.v===void 0)if(X.f||X.F)X.v=0,X.t="n";else if(B)X.t="z";else continue;else X.t=M.t||"n";switch(v.s.c>z&&(v.s.c=z),v.e.c<z&&(v.e.c=z),X.t){case"n":if(X.v==""||X.v==null){if(!B)continue;X.t="z"}else X.v=parseFloat(X.v);break;case"s":if(typeof X.v>"u"){if(!B)continue;X.t="z"}else ae=kd[parseInt(X.v,10)],X.v=ae.t,X.r=ae.r,g.cellHTML&&(X.h=ae.h);break;case"str":X.t="s",X.v=X.v!=null?cn(X.v):"",g.cellHTML&&(X.h=ib(X.v));break;case"inlineStr":j=V.match(n),X.t="s",j!=null&&(ae=yb(j[1]))?(X.v=ae.t,g.cellHTML&&(X.h=ae.h)):X.v="";break;case"b":X.v=En(X.v);break;case"d":g.cellDates?X.v=Nn(X.v,1):(X.v=xa(Nn(X.v,1)),X.t="n");break;case"e":(!g||g.cellText!==!1)&&(X.w=X.v),X.v=nN[X.v];break}if(H=he=0,se=null,q&&M.s!==void 0&&(se=E.CellXf[M.s],se!=null&&(se.numFmtId!=null&&(H=se.numFmtId),g.cellStyles&&se.fillId!=null&&(he=se.fillId))),e5(X,H,he,g,w,E),g.cellDates&&q&&X.t=="n"&&au(nr[H])&&(X.t="d",X.v=Gx(X.v)),M.cm&&g.xlmeta){var ye=(g.xlmeta.Cell||[])[+M.cm-1];ye&&ye.type=="XLDAPR"&&(X.D=!0)}if(ge){var me=Mn(M.r);f[me.r]||(f[me.r]=[]),f[me.r][me.c]=X}else f[M.r]=X}}}}ie.length>0&&(f["!rows"]=ie)}})();function RP(e,r,t,n){var a=[],s=[],c=zr(e["!ref"]),d="",x,f="",g=[],v=0,w=0,E=e["!rows"],N=Array.isArray(e),S={r:f},T,j=-1;for(w=c.s.c;w<=c.e.c;++w)g[w]=Dn(w);for(v=c.s.r;v<=c.e.r;++v){for(s=[],f=$n(v),w=c.s.c;w<=c.e.c;++w){x=g[w]+f;var D=N?(e[v]||[])[w]:e[x];D!==void 0&&(d=jP(D,x,e,r))!=null&&s.push(d)}(s.length>0||E&&E[v])&&(S={r:f},E&&E[v]&&(T=E[v],T.hidden&&(S.hidden=1),j=-1,T.hpx?j=Kd(T.hpx):T.hpt&&(j=T.hpt),j>-1&&(S.ht=j,S.customHeight=1),T.level&&(S.outlineLevel=T.level)),a[a.length]=Rt("row",s.join(""),S))}if(E)for(;v<E.length;++v)E&&E[v]&&(S={r:v+1},T=E[v],T.hidden&&(S.hidden=1),j=-1,T.hpx?j=Kd(T.hpx):T.hpt&&(j=T.hpt),j>-1&&(S.ht=j,S.customHeight=1),T.level&&(S.outlineLevel=T.level),a[a.length]=Rt("row","",S));return a.join("")}function r5(e,r,t,n){var a=[Zn,Rt("worksheet",null,{xmlns:Oc[0],"xmlns:r":ha.r})],s=t.SheetNames[e],c=0,d="",x=t.Sheets[s];x==null&&(x={});var f=x["!ref"]||"A1",g=zr(f);if(g.e.c>16383||g.e.r>1048575){if(r.WTF)throw new Error("Range "+f+" exceeds format limit A1:XFD1048576");g.e.c=Math.min(g.e.c,16383),g.e.r=Math.min(g.e.c,1048575),f=br(g)}n||(n={}),x["!comments"]=[];var v=[];gP(x,t,e,r,a),a[a.length]=Rt("dimension",null,{ref:f}),a[a.length]=CP(x,r,e,t),r.sheetFormat&&(a[a.length]=Rt("sheetFormatPr",null,{defaultRowHeight:r.sheetFormat.defaultRowHeight||"16",baseColWidth:r.sheetFormat.baseColWidth||"10",outlineLevelRow:r.sheetFormat.outlineLevelRow||"7"})),x["!cols"]!=null&&x["!cols"].length>0&&(a[a.length]=kP(x,x["!cols"])),a[c=a.length]="<sheetData/>",x["!links"]=[],x["!ref"]!=null&&(d=RP(x,r),d.length>0&&(a[a.length]=d)),a.length>c+1&&(a[a.length]="</sheetData>",a[c]=a[c].replace("/>",">")),x["!protect"]&&(a[a.length]=vP(x["!protect"])),x["!autofilter"]!=null&&(a[a.length]=NP(x["!autofilter"],x,t,e)),x["!merges"]!=null&&x["!merges"].length>0&&(a[a.length]=xP(x["!merges"]));var w=-1,E,N=-1;return x["!links"].length>0&&(a[a.length]="<hyperlinks>",x["!links"].forEach(function(S){S[1].Target&&(E={ref:S[0]},S[1].Target.charAt(0)!="#"&&(N=nn(n,-1,an(S[1].Target).replace(/#.*$/,""),Tr.HLINK),E["r:id"]="rId"+N),(w=S[1].Target.indexOf("#"))>-1&&(E.location=an(S[1].Target.slice(w+1))),S[1].Tooltip&&(E.tooltip=an(S[1].Tooltip)),a[a.length]=Rt("hyperlink",null,E))}),a[a.length]="</hyperlinks>"),delete x["!links"],x["!margins"]!=null&&(a[a.length]=_P(x["!margins"])),(!r||r.ignoreEC||r.ignoreEC==null)&&(a[a.length]=Ra("ignoredErrors",Rt("ignoredError",null,{numberStoredAsText:1,sqref:f}))),v.length>0&&(N=nn(n,-1,"../drawings/drawing"+(e+1)+".xml",Tr.DRAW),a[a.length]=Rt("drawing",null,{"r:id":"rId"+N}),x["!drawing"]=v),x["!comments"].length>0&&(N=nn(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Tr.VML),a[a.length]=Rt("legacyDrawing",null,{"r:id":"rId"+N}),x["!legacy"]=N),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function IP(e,r){var t={},n=e.l+r;t.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=a/20),t}function DP(e,r,t){var n=ut(145),a=(t["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=Kd(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var c=0;a.level&&(c|=a.level),a.hidden&&(c|=16),(a.hpx||a.hpt)&&(c|=32),n.write_shift(1,c),n.write_shift(1,0);var d=0,x=n.l;n.l+=4;for(var f={r:e,c:0},g=0;g<16;++g)if(!(r.s.c>g+1<<10||r.e.c<g<<10)){for(var v=-1,w=-1,E=g<<10;E<g+1<<10;++E){f.c=E;var N=Array.isArray(t)?(t[f.r]||[])[f.c]:t[sr(f)];N&&(v<0&&(v=E),w=E)}v<0||(++d,n.write_shift(4,v),n.write_shift(4,w))}var S=n.l;return n.l=x,n.write_shift(4,d),n.l=S,n.length>n.l?n.slice(0,n.l):n}function MP(e,r,t,n){var a=DP(n,t,r);(a.length>17||(r["!rows"]||[])[n])&&bt(e,0,a)}var FP=Mc,LP=lu;function BP(){}function PP(e,r){var t={},n=e[e.l];return++e.l,t.above=!(n&64),t.left=!(n&128),e.l+=18,t.name=H7(e),t}function UP(e,r,t){t==null&&(t=ut(84+4*e.length));var n=192;r&&(r.above&&(n&=-65),r.left&&(n&=-129)),t.write_shift(1,n);for(var a=1;a<3;++a)t.write_shift(1,0);return yx({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),JS(e,t),t.slice(0,t.l)}function zP(e){var r=si(e);return[r]}function HP(e,r,t){return t==null&&(t=ut(8)),Rc(r,t)}function GP(e){var r=Ic(e);return[r]}function VP(e,r,t){return t==null&&(t=ut(4)),Dc(r,t)}function WP(e){var r=si(e),t=e.read_shift(1);return[r,t,"b"]}function qP(e,r,t){return t==null&&(t=ut(9)),Rc(r,t),t.write_shift(1,e.v?1:0),t}function XP(e){var r=Ic(e),t=e.read_shift(1);return[r,t,"b"]}function KP(e,r,t){return t==null&&(t=ut(5)),Dc(r,t),t.write_shift(1,e.v?1:0),t}function YP(e){var r=si(e),t=e.read_shift(1);return[r,t,"e"]}function $P(e,r,t){return t==null&&(t=ut(9)),Rc(r,t),t.write_shift(1,e.v),t}function ZP(e){var r=Ic(e),t=e.read_shift(1);return[r,t,"e"]}function JP(e,r,t){return t==null&&(t=ut(8)),Dc(r,t),t.write_shift(1,e.v),t.write_shift(2,0),t.write_shift(1,0),t}function QP(e){var r=si(e),t=e.read_shift(4);return[r,t,"s"]}function eU(e,r,t){return t==null&&(t=ut(12)),Rc(r,t),t.write_shift(4,r.v),t}function tU(e){var r=Ic(e),t=e.read_shift(4);return[r,t,"s"]}function rU(e,r,t){return t==null&&(t=ut(8)),Dc(r,t),t.write_shift(4,r.v),t}function nU(e){var r=si(e),t=Pa(e);return[r,t,"n"]}function aU(e,r,t){return t==null&&(t=ut(16)),Rc(r,t),kc(e.v,t),t}function n5(e){var r=Ic(e),t=Pa(e);return[r,t,"n"]}function sU(e,r,t){return t==null&&(t=ut(12)),Dc(r,t),kc(e.v,t),t}function iU(e){var r=si(e),t=mb(e);return[r,t,"n"]}function lU(e,r,t){return t==null&&(t=ut(12)),Rc(r,t),QS(e.v,t),t}function oU(e){var r=Ic(e),t=mb(e);return[r,t,"n"]}function cU(e,r,t){return t==null&&(t=ut(8)),Dc(r,t),QS(e.v,t),t}function uU(e){var r=si(e),t=fb(e);return[r,t,"is"]}function dU(e){var r=si(e),t=Ua(e);return[r,t,"str"]}function fU(e,r,t){return t==null&&(t=ut(12+4*e.v.length)),Rc(r,t),wa(e.v,t),t.length>t.l?t.slice(0,t.l):t}function hU(e){var r=Ic(e),t=Ua(e);return[r,t,"str"]}function xU(e,r,t){return t==null&&(t=ut(8+4*e.v.length)),Dc(r,t),wa(e.v,t),t.length>t.l?t.slice(0,t.l):t}function mU(e,r,t){var n=e.l+r,a=si(e);a.r=t["!row"];var s=e.read_shift(1),c=[a,s,"b"];if(t.cellFormula){e.l+=2;var d=qx(e,n-e.l,t);c[3]=Fa(d,null,a,t.supbooks,t)}else e.l=n;return c}function gU(e,r,t){var n=e.l+r,a=si(e);a.r=t["!row"];var s=e.read_shift(1),c=[a,s,"e"];if(t.cellFormula){e.l+=2;var d=qx(e,n-e.l,t);c[3]=Fa(d,null,a,t.supbooks,t)}else e.l=n;return c}function pU(e,r,t){var n=e.l+r,a=si(e);a.r=t["!row"];var s=Pa(e),c=[a,s,"n"];if(t.cellFormula){e.l+=2;var d=qx(e,n-e.l,t);c[3]=Fa(d,null,a,t.supbooks,t)}else e.l=n;return c}function bU(e,r,t){var n=e.l+r,a=si(e);a.r=t["!row"];var s=Ua(e),c=[a,s,"str"];if(t.cellFormula){e.l+=2;var d=qx(e,n-e.l,t);c[3]=Fa(d,null,a,t.supbooks,t)}else e.l=n;return c}var vU=Mc,yU=lu;function wU(e,r){return r==null&&(r=ut(4)),r.write_shift(4,e),r}function _U(e,r){var t=e.l+r,n=Mc(e),a=hb(e),s=Ua(e),c=Ua(e),d=Ua(e);e.l=t;var x={rfx:n,relId:a,loc:s,display:d};return c&&(x.Tooltip=c),x}function EU(e,r){var t=ut(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));lu({s:Mn(e[0]),e:Mn(e[0])},t),xb("rId"+r,t);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return wa(a||"",t),wa(e[1].Tooltip||"",t),wa("",t),t.slice(0,t.l)}function kU(){}function SU(e,r,t){var n=e.l+r,a=eN(e),s=e.read_shift(1),c=[a];if(c[2]=s,t.cellFormula){var d=YB(e,n-e.l,t);c[1]=d}else e.l=n;return c}function NU(e,r,t){var n=e.l+r,a=Mc(e),s=[a];if(t.cellFormula){var c=ZB(e,n-e.l,t);s[1]=c,e.l=n}else e.l=n;return s}function AU(e,r,t){t==null&&(t=ut(18));var n=Xx(e,r);t.write_shift(-4,e),t.write_shift(-4,e),t.write_shift(4,(n.width||10)*256),t.write_shift(4,0);var a=0;return r.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),r.level&&(a|=r.level<<8),t.write_shift(2,a),t}var a5=["left","right","top","bottom","header","footer"];function TU(e){var r={};return a5.forEach(function(t){r[t]=Pa(e)}),r}function CU(e,r){return r==null&&(r=ut(48)),vc(e),a5.forEach(function(t){kc(e[t],r)}),r}function jU(e){var r=e.read_shift(2);return e.l+=28,{RTL:r&32}}function OU(e,r,t){t==null&&(t=ut(30));var n=924;return(((r||{}).Views||[])[0]||{}).RTL&&(n|=32),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function RU(e){var r=ut(24);return r.write_shift(4,4),r.write_shift(4,1),lu(e,r),r}function IU(e,r){return r==null&&(r=ut(66)),r.write_shift(2,e.password?wb(e.password):0),r.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?r.write_shift(4,e[t[0]]!=null&&!e[t[0]]?1:0):r.write_shift(4,e[t[0]]!=null&&e[t[0]]?0:1)}),r}function DU(){}function MU(){}function FU(e,r,t,n,a,s,c){if(!e)return e;var d=r||{};n||(n={"!id":{}});var x=d.dense?[]:{},f,g={s:{r:2e6,c:2e6},e:{r:0,c:0}},v=!1,w=!1,E,N,S,T,j,D,I,L,V,X=[];d.biff=12,d["!row"]=0;var M=0,W=!1,z=[],ae={},Z=d.supbooks||a.supbooks||[[]];if(Z.sharedf=ae,Z.arrayf=z,Z.SheetNames=a.SheetNames||a.Sheets.map(function(ge){return ge.name}),!d.supbooks&&(d.supbooks=Z,a.Names))for(var H=0;H<a.Names.length;++H)Z[0][H+1]=a.Names[H];var he=[],q=[],se=!1;Yd[16]={n:"BrtShortReal",f:n5};var ve;if(Rl(e,function(ie,Le,Q){if(!w)switch(Q){case 148:f=ie;break;case 0:E=ie,d.sheetRows&&d.sheetRows<=E.r&&(w=!0),L=$n(T=E.r),d["!row"]=E.r,(ie.hidden||ie.hpt||ie.level!=null)&&(ie.hpt&&(ie.hpx=Y0(ie.hpt)),q[ie.r]=ie);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(N={t:ie[2]},ie[2]){case"n":N.v=ie[1];break;case"s":I=kd[ie[1]],N.v=I.t,N.r=I.r;break;case"b":N.v=!!ie[1];break;case"e":N.v=ie[1],d.cellText!==!1&&(N.w=Il[N.v]);break;case"str":N.t="s",N.v=ie[1];break;case"is":N.t="s",N.v=ie[1].t;break}if((S=c.CellXf[ie[0].iStyleRef])&&e5(N,S.numFmtId,null,d,s,c),j=ie[0].c==-1?j+1:ie[0].c,d.dense?(x[T]||(x[T]=[]),x[T][j]=N):x[Dn(j)+L]=N,d.cellFormula){for(W=!1,M=0;M<z.length;++M){var B=z[M];E.r>=B[0].s.r&&E.r<=B[0].e.r&&j>=B[0].s.c&&j<=B[0].e.c&&(N.F=br(B[0]),W=!0)}!W&&ie.length>3&&(N.f=ie[3])}if(g.s.r>E.r&&(g.s.r=E.r),g.s.c>j&&(g.s.c=j),g.e.r<E.r&&(g.e.r=E.r),g.e.c<j&&(g.e.c=j),d.cellDates&&S&&N.t=="n"&&au(nr[S.numFmtId])){var te=dc(N.v);te&&(N.t="d",N.v=new Date(te.y,te.m-1,te.d,te.H,te.M,te.S,te.u))}ve&&(ve.type=="XLDAPR"&&(N.D=!0),ve=void 0);break;case 1:case 12:if(!d.sheetStubs||v)break;N={t:"z",v:void 0},j=ie[0].c==-1?j+1:ie[0].c,d.dense?(x[T]||(x[T]=[]),x[T][j]=N):x[Dn(j)+L]=N,g.s.r>E.r&&(g.s.r=E.r),g.s.c>j&&(g.s.c=j),g.e.r<E.r&&(g.e.r=E.r),g.e.c<j&&(g.e.c=j),ve&&(ve.type=="XLDAPR"&&(N.D=!0),ve=void 0);break;case 176:X.push(ie);break;case 49:ve=((d.xlmeta||{}).Cell||[])[ie-1];break;case 494:var U=n["!id"][ie.relId];for(U?(ie.Target=U.Target,ie.loc&&(ie.Target+="#"+ie.loc),ie.Rel=U):ie.relId==""&&(ie.Target="#"+ie.loc),T=ie.rfx.s.r;T<=ie.rfx.e.r;++T)for(j=ie.rfx.s.c;j<=ie.rfx.e.c;++j)d.dense?(x[T]||(x[T]=[]),x[T][j]||(x[T][j]={t:"z",v:void 0}),x[T][j].l=ie):(D=sr({c:j,r:T}),x[D]||(x[D]={t:"z",v:void 0}),x[D].l=ie);break;case 426:if(!d.cellFormula)break;z.push(ie),V=d.dense?x[T][j]:x[Dn(j)+L],V.f=Fa(ie[1],g,{r:E.r,c:j},Z,d),V.F=br(ie[0]);break;case 427:if(!d.cellFormula)break;ae[sr(ie[0].s)]=ie[1],V=d.dense?x[T][j]:x[Dn(j)+L],V.f=Fa(ie[1],g,{r:E.r,c:j},Z,d);break;case 60:if(!d.cellStyles)break;for(;ie.e>=ie.s;)he[ie.e--]={width:ie.w/256,hidden:!!(ie.flags&1),level:ie.level},se||(se=!0,_b(ie.w/256)),To(he[ie.e+1]);break;case 161:x["!autofilter"]={ref:br(ie)};break;case 476:x["!margins"]=ie;break;case 147:a.Sheets[t]||(a.Sheets[t]={}),ie.name&&(a.Sheets[t].CodeName=ie.name),(ie.above||ie.left)&&(x["!outline"]={above:ie.above,left:ie.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),ie.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:v=!0;break;case 36:v=!1;break;case 37:v=!0;break;case 38:v=!1;break;default:if(!Le.T){if(!v||d.WTF)throw new Error("Unexpected record 0x"+Q.toString(16))}}},d),delete d.supbooks,delete d["!row"],!x["!ref"]&&(g.s.r<2e6||f&&(f.e.r>0||f.e.c>0||f.s.r>0||f.s.c>0))&&(x["!ref"]=br(f||g)),d.sheetRows&&x["!ref"]){var le=zr(x["!ref"]);d.sheetRows<=+le.e.r&&(le.e.r=d.sheetRows-1,le.e.r>g.e.r&&(le.e.r=g.e.r),le.e.r<le.s.r&&(le.s.r=le.e.r),le.e.c>g.e.c&&(le.e.c=g.e.c),le.e.c<le.s.c&&(le.s.c=le.e.c),x["!fullref"]=x["!ref"],x["!ref"]=br(le))}return X.length>0&&(x["!merges"]=X),he.length>0&&(x["!cols"]=he),q.length>0&&(x["!rows"]=q),x}function LU(e,r,t,n,a,s,c){if(r.v===void 0)return!1;var d="";switch(r.t){case"b":d=r.v?"1":"0";break;case"d":r=An(r),r.z=r.z||nr[14],r.v=xa(Nn(r.v)),r.t="n";break;case"n":case"e":d=""+r.v;break;default:d=r.v;break}var x={r:t,c:n};switch(x.s=Io(a.cellXfs,r,a),r.l&&s["!links"].push([sr(x),r.l]),r.c&&s["!comments"].push([sr(x),r.c]),r.t){case"s":case"str":return a.bookSST?(d=Ab(a.Strings,r.v,a.revStrings),x.t="s",x.v=d,c?bt(e,18,rU(r,x)):bt(e,7,eU(r,x))):(x.t="str",c?bt(e,17,xU(r,x)):bt(e,6,fU(r,x))),!0;case"n":return r.v==(r.v|0)&&r.v>-1e3&&r.v<1e3?c?bt(e,13,cU(r,x)):bt(e,2,lU(r,x)):c?bt(e,16,sU(r,x)):bt(e,5,aU(r,x)),!0;case"b":return x.t="b",c?bt(e,15,KP(r,x)):bt(e,4,qP(r,x)),!0;case"e":return x.t="e",c?bt(e,14,JP(r,x)):bt(e,3,$P(r,x)),!0}return c?bt(e,12,VP(r,x)):bt(e,1,HP(r,x)),!0}function BU(e,r,t,n){var a=zr(r["!ref"]||"A1"),s,c="",d=[];bt(e,145);var x=Array.isArray(r),f=a.e.r;r["!rows"]&&(f=Math.max(a.e.r,r["!rows"].length-1));for(var g=a.s.r;g<=f;++g){c=$n(g),MP(e,r,a,g);var v=!1;if(g<=a.e.r)for(var w=a.s.c;w<=a.e.c;++w){g===a.s.r&&(d[w]=Dn(w)),s=d[w]+c;var E=x?(r[g]||[])[w]:r[s];if(!E){v=!1;continue}v=LU(e,E,g,w,n,r,v)}}bt(e,146)}function PU(e,r){!r||!r["!merges"]||(bt(e,177,wU(r["!merges"].length)),r["!merges"].forEach(function(t){bt(e,176,yU(t))}),bt(e,178))}function UU(e,r){!r||!r["!cols"]||(bt(e,390),r["!cols"].forEach(function(t,n){t&&bt(e,60,AU(n,t))}),bt(e,391))}function zU(e,r){!r||!r["!ref"]||(bt(e,648),bt(e,649,RU(zr(r["!ref"]))),bt(e,650))}function HU(e,r,t){r["!links"].forEach(function(n){if(n[1].Target){var a=nn(t,-1,n[1].Target.replace(/#.*$/,""),Tr.HLINK);bt(e,494,EU(n,a))}}),delete r["!links"]}function GU(e,r,t,n){if(r["!comments"].length>0){var a=nn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Tr.VML);bt(e,551,xb("rId"+a)),r["!legacy"]=a}}function VU(e,r,t,n){if(r["!autofilter"]){var a=r["!autofilter"],s=typeof a.ref=="string"?a.ref:br(a.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var c=t.Workbook.Names,d=ds(s);d.s.r==d.e.r&&(d.e.r=ds(r["!ref"]).e.r,s=br(d));for(var x=0;x<c.length;++x){var f=c[x];if(f.Name=="_xlnm._FilterDatabase"&&f.Sheet==n){f.Ref="'"+t.SheetNames[n]+"'!"+s;break}}x==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+s}),bt(e,161,lu(zr(s))),bt(e,162)}}function WU(e,r,t){bt(e,133),bt(e,137,OU(r,t)),bt(e,138),bt(e,134)}function qU(e,r){r["!protect"]&&bt(e,535,IU(r["!protect"]))}function XU(e,r,t,n){var a=us(),s=t.SheetNames[e],c=t.Sheets[s]||{},d=s;try{t&&t.Workbook&&(d=t.Workbook.Sheets[e].CodeName||d)}catch{}var x=zr(c["!ref"]||"A1");if(x.e.c>16383||x.e.r>1048575){if(r.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");x.e.c=Math.min(x.e.c,16383),x.e.r=Math.min(x.e.c,1048575)}return c["!links"]=[],c["!comments"]=[],bt(a,129),(t.vbaraw||c["!outline"])&&bt(a,147,UP(d,c["!outline"])),bt(a,148,LP(x)),WU(a,c,t.Workbook),UU(a,c),BU(a,c,e,r),qU(a,c),VU(a,c,t,e),PU(a,c),HU(a,c,n),c["!margins"]&&bt(a,476,CU(c["!margins"])),(!r||r.ignoreEC||r.ignoreEC==null)&&zU(a,c),GU(a,c,e,n),bt(a,130),a.end()}function KU(e){var r=[],t=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var c=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);c&&(r[+c[1]]=t?+c[2]:c[2])});var a=Ur((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[r,a,n]}function YU(e,r,t,n,a,s){var c=s||{"!type":"chart"};if(!e)return s;var d=0,x=0,f="A",g={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(v){var w=KU(v);g.s.r=g.s.c=0,g.e.c=d,f=Dn(d),w[0].forEach(function(E,N){c[f+$n(N)]={t:"n",v:E,z:w[1]},x=N}),g.e.r<x&&(g.e.r=x),++d}),d>0&&(c["!ref"]=br(g)),c}function $U(e,r,t,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},c,d=e.match(t5);return d&&Tb(d[0],s,a,t),(c=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=c[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function ZU(e,r){e.l+=10;var t=Ua(e);return{name:t}}function JU(e,r,t,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},c=!1;return Rl(e,function(x,f,g){switch(g){case 550:s["!rel"]=x;break;case 651:a.Sheets[t]||(a.Sheets[t]={}),x.name&&(a.Sheets[t].CodeName=x.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:c=!0;break;case 36:c=!1;break;case 37:break;case 38:break;default:if(!(f.T>0)){if(!(f.T<0)){if(!c||r.WTF)throw new Error("Unexpected record 0x"+g.toString(16))}}}},r),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var Cb=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],QU=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],ez=[],tz=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function n3(e,r){for(var t=0;t!=e.length;++t)for(var n=e[t],a=0;a!=r.length;++a){var s=r[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=En(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function a3(e,r){for(var t=0;t!=r.length;++t){var n=r[t];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=En(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function s5(e){a3(e.WBProps,Cb),a3(e.CalcPr,tz),n3(e.WBView,QU),n3(e.Sheets,ez),V0.date1904=En(e.WBProps.date1904)}function rz(e){return!e.Workbook||!e.Workbook.WBProps?"false":En(e.Workbook.WBProps.date1904)?"true":"false"}var nz="][*?/\\".split("");function i5(e,r){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return nz.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function az(e,r,t){e.forEach(function(n,a){i5(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(t){var c=r&&r[a]&&r[a].CodeName||n;if(c.charCodeAt(0)==95&&c.length>22)throw new Error("Bad Code Name: Worksheet"+c)}})}function sz(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var r=e.Workbook&&e.Workbook.Sheets||[];az(e.SheetNames,r,!!e.vbaraw);for(var t=0;t<e.SheetNames.length;++t)rP(e.Sheets[e.SheetNames[t]],e.SheetNames[t],t)}var iz=/<\w+:workbook/;function lz(e,r){if(!e)throw new Error("Could not find file");var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},c=0;if(e.replace(Ha,function(x,f){var g=ir(x);switch(qi(g[0])){case"<?xml":break;case"<workbook":x.match(iz)&&(a="xmlns"+x.match(/<(\w+):/)[1]),t.xmlns=g[a];break;case"</workbook>":break;case"<fileVersion":delete g[0],t.AppVersion=g;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":Cb.forEach(function(v){if(g[v[0]]!=null)switch(v[2]){case"bool":t.WBProps[v[0]]=En(g[v[0]]);break;case"int":t.WBProps[v[0]]=parseInt(g[v[0]],10);break;default:t.WBProps[v[0]]=g[v[0]]}}),g.codeName&&(t.WBProps.CodeName=cn(g.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete g[0],t.WBView.push(g);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(g.state){case"hidden":g.Hidden=1;break;case"veryHidden":g.Hidden=2;break;default:g.Hidden=0}delete g.state,g.name=Ur(cn(g.name)),delete g[0],t.Sheets.push(g);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=cn(g.name),g.comment&&(s.Comment=g.comment),g.localSheetId&&(s.Sheet=+g.localSheetId),En(g.hidden||"0")&&(s.Hidden=!0),c=f+x.length;break;case"</definedName>":s.Ref=Ur(cn(e.slice(c,f))),t.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete g[0],t.CalcPr=g;break;case"<calcPr/>":delete g[0],t.CalcPr=g;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&r.WTF)throw new Error("unrecognized "+g[0]+" in workbook")}return x}),Oc.indexOf(t.xmlns)===-1)throw new Error("Unknown Namespace: "+t.xmlns);return s5(t),t}function l5(e){var r=[Zn];r[r.length]=Rt("workbook",null,{xmlns:Oc[0],"xmlns:r":ha.r});var t=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Cb.forEach(function(d){e.Workbook.WBProps[d[0]]!=null&&e.Workbook.WBProps[d[0]]!=d[1]&&(n[d[0]]=e.Workbook.WBProps[d[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),r[r.length]=Rt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(r[r.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),r[r.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',r[r.length]="</bookViews>"}for(r[r.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var c={name:an(e.SheetNames[s].slice(0,31))};if(c.sheetId=""+(s+1),c["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:c.state="hidden";break;case 2:c.state="veryHidden";break}r[r.length]=Rt("sheet",null,c)}return r[r.length]="</sheets>",t&&(r[r.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(d){var x={name:d.Name};d.Comment&&(x.comment=d.Comment),d.Sheet!=null&&(x.localSheetId=""+d.Sheet),d.Hidden&&(x.hidden="1"),d.Ref&&(r[r.length]=Rt("definedName",an(d.Ref),x))}),r[r.length]="</definedNames>"),r.length>2&&(r[r.length]="</workbook>",r[1]=r[1].replace("/>",">")),r.join("")}function oz(e,r){var t={};return t.Hidden=e.read_shift(4),t.iTabID=e.read_shift(4),t.strRelID=d2(e),t.name=Ua(e),t}function cz(e,r){return r||(r=ut(127)),r.write_shift(4,e.Hidden),r.write_shift(4,e.iTabID),xb(e.strRelID,r),wa(e.name.slice(0,31),r),r.length>r.l?r.slice(0,r.l):r}function uz(e,r){var t={},n=e.read_shift(4);t.defaultThemeVersion=e.read_shift(4);var a=r>8?Ua(e):"";return a.length>0&&(t.CodeName=a),t.autoCompressPictures=!!(n&65536),t.backupFile=!!(n&64),t.checkCompatibility=!!(n&4096),t.date1904=!!(n&1),t.filterPrivacy=!!(n&8),t.hidePivotFieldList=!!(n&1024),t.promptedSolutions=!!(n&16),t.publishItems=!!(n&2048),t.refreshAllConnections=!!(n&262144),t.saveExternalLinkValues=!!(n&128),t.showBorderUnselectedTables=!!(n&4),t.showInkAnnotation=!!(n&32),t.showObjects=["all","placeholders","none"][n>>13&3],t.showPivotChartFilter=!!(n&32768),t.updateLinks=["userSet","never","always"][n>>8&3],t}function dz(e,r){r||(r=ut(72));var t=0;return e&&e.filterPrivacy&&(t|=8),r.write_shift(4,t),r.write_shift(4,0),JS(e&&e.CodeName||"ThisWorkbook",r),r.slice(0,r.l)}function fz(e,r){var t={};return e.read_shift(4),t.ArchID=e.read_shift(4),e.l+=r-8,t}function hz(e,r,t){var n=e.l+r;e.l+=4,e.l+=1;var a=e.read_shift(4),s=G7(e),c=$B(e,0,t),d=hb(e);e.l=n;var x={Name:s,Ptg:c};return a<268435455&&(x.Sheet=a),d&&(x.Comment=d),x}function xz(e,r){var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;r||(r={}),r.biff=12;var s=[],c=[[]];return c.SheetNames=[],c.XTI=[],Yd[16]={n:"BrtFRTArchID$",f:fz},Rl(e,function(x,f,g){switch(g){case 156:c.SheetNames.push(x.name),t.Sheets.push(x);break;case 153:t.WBProps=x;break;case 39:x.Sheet!=null&&(r.SID=x.Sheet),x.Ref=Fa(x.Ptg,null,null,c,r),delete r.SID,delete x.Ptg,s.push(x);break;case 1036:break;case 357:case 358:case 355:case 667:c[0].length?c.push([g,x]):c[0]=[g,x],c[c.length-1].XTI=[];break;case 362:c.length===0&&(c[0]=[],c[0].XTI=[]),c[c.length-1].XTI=c[c.length-1].XTI.concat(x),c.XTI=c.XTI.concat(x);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(g),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(g),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!f.T){if(!a||r.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+g.toString(16))}}},r),s5(t),t.Names=s,t.supbooks=c,t}function mz(e,r){bt(e,143);for(var t=0;t!=r.SheetNames.length;++t){var n=r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t]&&r.Workbook.Sheets[t].Hidden||0,a={Hidden:n,iTabID:t+1,strRelID:"rId"+(t+1),name:r.SheetNames[t]};bt(e,156,cz(a))}bt(e,144)}function gz(e,r){r||(r=ut(127));for(var t=0;t!=4;++t)r.write_shift(4,0);return wa("SheetJS",r),wa(hx.version,r),wa(hx.version,r),wa("7262",r),r.length>r.l?r.slice(0,r.l):r}function pz(e,r){r||(r=ut(29)),r.write_shift(-4,0),r.write_shift(-4,460),r.write_shift(4,28800),r.write_shift(4,17600),r.write_shift(4,500),r.write_shift(4,e),r.write_shift(4,e);var t=120;return r.write_shift(1,t),r.length>r.l?r.slice(0,r.l):r}function bz(e,r){if(!(!r.Workbook||!r.Workbook.Sheets)){for(var t=r.Workbook.Sheets,n=0,a=-1,s=-1;n<t.length;++n)!t[n]||!t[n].Hidden&&a==-1?a=n:t[n].Hidden==1&&s==-1&&(s=n);s>a||(bt(e,135),bt(e,158,pz(a)),bt(e,136))}}function vz(e,r){var t=us();return bt(t,131),bt(t,128,gz()),bt(t,153,dz(e.Workbook&&e.Workbook.WBProps||null)),bz(t,e),mz(t,e),bt(t,132),t.end()}function yz(e,r,t){return r.slice(-4)===".bin"?xz(e,t):lz(e,t)}function wz(e,r,t,n,a,s,c,d){return r.slice(-4)===".bin"?FU(e,n,t,a,s,c,d):hP(e,n,t,a,s,c,d)}function _z(e,r,t,n,a,s,c,d){return r.slice(-4)===".bin"?JU(e,n,t,a,s):$U(e,n,t,a,s)}function Ez(e,r,t,n,a,s,c,d){return r.slice(-4)===".bin"?SL():NL()}function kz(e,r,t,n,a,s,c,d){return r.slice(-4)===".bin"?EL():kL()}function Sz(e,r,t,n){return r.slice(-4)===".bin"?yF(e,t,n):oF(e,t,n)}function Nz(e,r,t){return zN(e,t)}function Az(e,r,t){return r.slice(-4)===".bin"?AM(e,t):kM(e,t)}function Tz(e,r,t){return r.slice(-4)===".bin"?bL(e,t):cL(e,t)}function Cz(e,r,t){return r.slice(-4)===".bin"?iL(e):aL(e)}function jz(e,r,t,n){return t.slice(-4)===".bin"?lL(e,r,t,n):void 0}function Oz(e,r,t){return r.slice(-4)===".bin"?tL(e,r,t):nL(e,r,t)}function Rz(e,r,t){return(r.slice(-4)===".bin"?vz:l5)(e)}function Iz(e,r,t,n,a){return(r.slice(-4)===".bin"?XU:r5)(e,t,n,a)}function Dz(e,r,t){return(r.slice(-4)===".bin"?jF:PN)(e,t)}function Mz(e,r,t){return(r.slice(-4)===".bin"?jM:ON)(e,t)}function Fz(e,r,t){return(r.slice(-4)===".bin"?vL:VN)(e)}function Lz(e){return(e.slice(-4)===".bin"?rL:HN)()}var o5=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,c5=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function xi(e,r){var t=e.split(/\s+/),n=[];if(n[0]=t[0],t.length===1)return n;var a=e.match(o5),s,c,d,x;if(a)for(x=0;x!=a.length;++x)s=a[x].match(c5),(c=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?d="xmlns"+s[1].slice(6):d=s[1].slice(c+1),n[d]=s[2].slice(1,s[2].length-1));return n}function Bz(e){var r=e.split(/\s+/),t={};if(r.length===1)return t;var n=e.match(o5),a,s,c,d;if(n)for(d=0;d!=n.length;++d)a=n[d].match(c5),(s=a[1].indexOf(":"))===-1?t[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?c="xmlns"+a[1].slice(6):c=a[1].slice(s+1),t[c]=a[2].slice(1,a[2].length-1));return t}var Nd;function Pz(e,r){var t=Nd[e]||Ur(e);return t==="General"?_c(r):ni(t,r)}function Uz(e,r,t,n){var a=n;switch((t[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=En(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Nn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+t[0])}e[Ur(r)]=a}function zz(e,r,t){if(e.t!=="z"){if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Il[e.v]:r==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ud(e.v):e.w=_c(e.v):e.w=Pz(r||"General",e.v)}catch(s){if(t.WTF)throw s}try{var n=Nd[r]||r||"General";if(t.cellNF&&(e.z=n),t.cellDates&&e.t=="n"&&au(n)){var a=dc(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(t.WTF)throw s}}}function Hz(e,r,t){if(t.cellStyles&&r.Interior){var n=r.Interior;n.Pattern&&(n.patternType=eF[n.Pattern]||n.Pattern)}e[r.ID]=r}function Gz(e,r,t,n,a,s,c,d,x,f){var g="General",v=n.StyleID,w={};f=f||{};var E=[],N=0;for(v===void 0&&d&&(v=d.StyleID),v===void 0&&c&&(v=c.StyleID);s[v]!==void 0&&(s[v].nf&&(g=s[v].nf),s[v].Interior&&E.push(s[v].Interior),!!s[v].Parent);)v=s[v].Parent;switch(t.Type){case"Boolean":n.t="b",n.v=En(e);break;case"String":n.t="s",n.r=w4(Ur(e)),n.v=e.indexOf("<")>-1?Ur(r||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Nn(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Ur(e):n.v<60&&(n.v=n.v-1),(!g||g=="General")&&(g="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=nN[e],f.cellText!==!1&&(n.w=e);break;default:e==""&&r==""?n.t="z":(n.t="s",n.v=w4(r||e));break}if(zz(n,g,f),f.cellFormula!==!1)if(n.Formula){var S=Ur(n.Formula);S.charCodeAt(0)==61&&(S=S.slice(1)),n.f=G0(S,a),delete n.Formula,n.ArrayRange=="RC"?n.F=G0("RC:RC",a):n.ArrayRange&&(n.F=G0(n.ArrayRange,a),x.push([zr(n.F),n.F]))}else for(N=0;N<x.length;++N)a.r>=x[N][0].s.r&&a.r<=x[N][0].e.r&&a.c>=x[N][0].s.c&&a.c<=x[N][0].e.c&&(n.F=x[N][1]);f.cellStyles&&(E.forEach(function(T){!w.patternType&&T.patternType&&(w.patternType=T.patternType)}),n.s=w),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Vz(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function kp(e,r){var t=r||{};su();var n=hd(lb(e));(t.type=="binary"||t.type=="array"||t.type=="base64")&&(n=cn(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var c=An(t);return c.type="string",K0.to_workbook(n,c)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(de){a.indexOf("<"+de)>=0&&(s=!0)}),s)return CH(n,t);Nd={"General Number":"General","General Date":nr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":nr[15],"Short Date":nr[14],"Long Time":nr[19],"Medium Time":nr[18],"Short Time":nr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:nr[2],Standard:nr[4],Percent:nr[10],Scientific:nr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var d,x=[],f,g={},v=[],w=t.dense?[]:{},E="",N={},S={},T=xi('<Data ss:Type="String">'),j=0,D=0,I=0,L={s:{r:2e6,c:2e6},e:{r:0,c:0}},V={},X={},M="",W=0,z=[],ae={},Z={},H=0,he=[],q=[],se={},ve=[],le,ge=!1,ie=[],Le=[],Q={},B=0,te=0,U={Sheets:[],WBProps:{date1904:!1}},P={};Gd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ue="";d=Gd.exec(n);)switch(d[3]=(ue=d[3]).toLowerCase()){case"data":if(ue=="data"){if(d[1]==="/"){if((f=x.pop())[0]!==d[3])throw new Error("Bad state: "+f.join("|"))}else d[0].charAt(d[0].length-2)!=="/"&&x.push([d[3],!0]);break}if(x[x.length-1][1])break;d[1]==="/"?Gz(n.slice(j,d.index),M,T,x[x.length-1][0]=="comment"?se:N,{c:D,r:I},V,ve[D],S,ie,t):(M="",T=xi(d[0]),j=d.index+d[0].length);break;case"cell":if(d[1]==="/")if(q.length>0&&(N.c=q),(!t.sheetRows||t.sheetRows>I)&&N.v!==void 0&&(t.dense?(w[I]||(w[I]=[]),w[I][D]=N):w[Dn(D)+$n(I)]=N),N.HRef&&(N.l={Target:Ur(N.HRef)},N.HRefScreenTip&&(N.l.Tooltip=N.HRefScreenTip),delete N.HRef,delete N.HRefScreenTip),(N.MergeAcross||N.MergeDown)&&(B=D+(parseInt(N.MergeAcross,10)|0),te=I+(parseInt(N.MergeDown,10)|0),z.push({s:{c:D,r:I},e:{c:B,r:te}})),!t.sheetStubs)N.MergeAcross?D=B+1:++D;else if(N.MergeAcross||N.MergeDown){for(var Re=D;Re<=B;++Re)for(var De=I;De<=te;++De)(Re>D||De>I)&&(t.dense?(w[De]||(w[De]=[]),w[De][Re]={t:"z"}):w[Dn(Re)+$n(De)]={t:"z"});D=B+1}else++D;else N=Bz(d[0]),N.Index&&(D=+N.Index-1),D<L.s.c&&(L.s.c=D),D>L.e.c&&(L.e.c=D),d[0].slice(-2)==="/>"&&++D,q=[];break;case"row":d[1]==="/"||d[0].slice(-2)==="/>"?(I<L.s.r&&(L.s.r=I),I>L.e.r&&(L.e.r=I),d[0].slice(-2)==="/>"&&(S=xi(d[0]),S.Index&&(I=+S.Index-1)),D=0,++I):(S=xi(d[0]),S.Index&&(I=+S.Index-1),Q={},(S.AutoFitHeight=="0"||S.Height)&&(Q.hpx=parseInt(S.Height,10),Q.hpt=Kd(Q.hpx),Le[I]=Q),S.Hidden=="1"&&(Q.hidden=!0,Le[I]=Q));break;case"worksheet":if(d[1]==="/"){if((f=x.pop())[0]!==d[3])throw new Error("Bad state: "+f.join("|"));v.push(E),L.s.r<=L.e.r&&L.s.c<=L.e.c&&(w["!ref"]=br(L),t.sheetRows&&t.sheetRows<=L.e.r&&(w["!fullref"]=w["!ref"],L.e.r=t.sheetRows-1,w["!ref"]=br(L))),z.length&&(w["!merges"]=z),ve.length>0&&(w["!cols"]=ve),Le.length>0&&(w["!rows"]=Le),g[E]=w}else L={s:{r:2e6,c:2e6},e:{r:0,c:0}},I=D=0,x.push([d[3],!1]),f=xi(d[0]),E=Ur(f.Name),w=t.dense?[]:{},z=[],ie=[],Le=[],P={name:E,Hidden:0},U.Sheets.push(P);break;case"table":if(d[1]==="/"){if((f=x.pop())[0]!==d[3])throw new Error("Bad state: "+f.join("|"))}else{if(d[0].slice(-2)=="/>")break;x.push([d[3],!1]),ve=[],ge=!1}break;case"style":d[1]==="/"?Hz(V,X,t):X=xi(d[0]);break;case"numberformat":X.nf=Ur(xi(d[0]).Format||"General"),Nd[X.nf]&&(X.nf=Nd[X.nf]);for(var Ne=0;Ne!=392&&nr[Ne]!=X.nf;++Ne);if(Ne==392){for(Ne=57;Ne!=392;++Ne)if(nr[Ne]==null){Nl(X.nf,Ne);break}}break;case"column":if(x[x.length-1][0]!=="table")break;if(le=xi(d[0]),le.Hidden&&(le.hidden=!0,delete le.Hidden),le.Width&&(le.wpx=parseInt(le.Width,10)),!ge&&le.wpx>10){ge=!0,La=LN;for(var Ke=0;Ke<ve.length;++Ke)ve[Ke]&&To(ve[Ke])}ge&&To(le),ve[le.Index-1||ve.length]=le;for(var ye=0;ye<+le.Span;++ye)ve[ve.length]=An(le);break;case"namedrange":if(d[1]==="/")break;U.Names||(U.Names=[]);var me=ir(d[0]),Ce={Name:me.Name,Ref:G0(me.RefersTo.slice(1),{r:0,c:0})};U.Sheets.length>0&&(Ce.Sheet=U.Sheets.length-1),U.Names.push(Ce);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(d[0].slice(-2)==="/>")break;d[1]==="/"?M+=n.slice(W,d.index):W=d.index+d[0].length;break;case"interior":if(!t.cellStyles)break;X.Interior=xi(d[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(d[0].slice(-2)==="/>")break;d[1]==="/"?xD(ae,ue,n.slice(H,d.index)):H=d.index+d[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(d[1]==="/"){if((f=x.pop())[0]!==d[3])throw new Error("Bad state: "+f.join("|"))}else x.push([d[3],!1]);break;case"comment":if(d[1]==="/"){if((f=x.pop())[0]!==d[3])throw new Error("Bad state: "+f.join("|"));Vz(se),q.push(se)}else x.push([d[3],!1]),f=xi(d[0]),se={a:f.Author};break;case"autofilter":if(d[1]==="/"){if((f=x.pop())[0]!==d[3])throw new Error("Bad state: "+f.join("|"))}else if(d[0].charAt(d[0].length-2)!=="/"){var G=xi(d[0]);w["!autofilter"]={ref:G0(G.Range).replace(/\$/g,"")},x.push([d[3],!0])}break;case"name":break;case"datavalidation":if(d[1]==="/"){if((f=x.pop())[0]!==d[3])throw new Error("Bad state: "+f.join("|"))}else d[0].charAt(d[0].length-2)!=="/"&&x.push([d[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(d[1]==="/"){if((f=x.pop())[0]!==d[3])throw new Error("Bad state: "+f.join("|"))}else d[0].charAt(d[0].length-2)!=="/"&&x.push([d[3],!0]);break;case"null":break;default:if(x.length==0&&d[3]=="document"||x.length==0&&d[3]=="uof")return c3(n,t);var Me=!0;switch(x[x.length-1][0]){case"officedocumentsettings":switch(d[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Me=!1}break;case"componentoptions":switch(d[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Me=!1}break;case"excelworkbook":switch(d[3]){case"date1904":U.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Me=!1}break;case"workbookoptions":switch(d[3]){case"owcversion":break;case"height":break;case"width":break;default:Me=!1}break;case"worksheetoptions":switch(d[3]){case"visible":if(d[0].slice(-2)!=="/>")if(d[1]==="/")switch(n.slice(H,d.index)){case"SheetHidden":P.Hidden=1;break;case"SheetVeryHidden":P.Hidden=2;break}else H=d.index+d[0].length;break;case"header":w["!margins"]||vc(w["!margins"]={},"xlml"),isNaN(+ir(d[0]).Margin)||(w["!margins"].header=+ir(d[0]).Margin);break;case"footer":w["!margins"]||vc(w["!margins"]={},"xlml"),isNaN(+ir(d[0]).Margin)||(w["!margins"].footer=+ir(d[0]).Margin);break;case"pagemargins":var Ae=ir(d[0]);w["!margins"]||vc(w["!margins"]={},"xlml"),isNaN(+Ae.Top)||(w["!margins"].top=+Ae.Top),isNaN(+Ae.Left)||(w["!margins"].left=+Ae.Left),isNaN(+Ae.Right)||(w["!margins"].right=+Ae.Right),isNaN(+Ae.Bottom)||(w["!margins"].bottom=+Ae.Bottom);break;case"displayrighttoleft":U.Views||(U.Views=[]),U.Views[0]||(U.Views[0]={}),U.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":w["!outline"]||(w["!outline"]={}),w["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":w["!outline"]||(w["!outline"]={}),w["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Me=!1}break;case"pivottable":case"pivotcache":switch(d[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Me=!1}break;case"pagebreaks":switch(d[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Me=!1}break;case"autofilter":switch(d[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Me=!1}break;case"querytable":switch(d[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Me=!1}break;case"datavalidation":switch(d[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Me=!1}break;case"sorting":case"conditionalformatting":switch(d[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Me=!1}break;case"mapinfo":case"schema":case"data":switch(d[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Me=!1}break;case"smarttags":break;default:Me=!1;break}if(Me||d[3].match(/!\[CDATA/))break;if(!x[x.length-1][1])throw"Unrecognized tag: "+d[3]+"|"+x.join("|");if(x[x.length-1][0]==="customdocumentproperties"){if(d[0].slice(-2)==="/>")break;d[1]==="/"?Uz(Z,ue,he,n.slice(H,d.index)):(he=d,H=d.index+d[0].length);break}if(t.WTF)throw"Unrecognized tag: "+d[3]+"|"+x.join("|")}var oe={};return!t.bookSheets&&!t.bookProps&&(oe.Sheets=g),oe.SheetNames=v,oe.Workbook=U,oe.SSF=An(nr),oe.Props=ae,oe.Custprops=Z,oe}function b2(e,r){switch(Ob(r=r||{}),r.type||"base64"){case"base64":return kp(Ms(e),r);case"binary":case"buffer":case"file":return kp(e,r);case"array":return kp(Oo(e),r)}}function Wz(e,r){var t=[];return e.Props&&t.push(mD(e.Props,r)),e.Custprops&&t.push(gD(e.Props,e.Custprops)),t.join("")}function qz(){return""}function Xz(e,r){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return r.cellXfs.forEach(function(n,a){var s=[];s.push(Rt("NumberFormat",null,{"ss:Format":an(nr[n.numFmtId])}));var c={"ss:ID":"s"+(21+a)};t.push(Rt("Style",s.join(""),c))}),Rt("Styles",t.join(""))}function u5(e){return Rt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+Sb(e.Ref,{r:0,c:0})})}function Kz(e){if(!((e||{}).Workbook||{}).Names)return"";for(var r=e.Workbook.Names,t=[],n=0;n<r.length;++n){var a=r[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||t.push(u5(a)))}return Rt("Names",t.join(""))}function Yz(e,r,t,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],c=0;c<a.length;++c){var d=a[c];d.Sheet==t&&(d.Name.match(/^_xlfn\./)||s.push(u5(d)))}return s.join("")}function $z(e,r,t,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Rt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Rt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Rt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[t])if(n.Workbook.Sheets[t].Hidden)a.push(Rt("Visible",n.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==t&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Ra("ProtectContents","True")),e["!protect"].objects&&a.push(Ra("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Ra("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Ra("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Ra("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(c){e["!protect"][c[0]]&&a.push("<"+c[1]+"/>")})),a.length==0?"":Rt("WorksheetOptions",a.join(""),{xmlns:Ts.x})}function Zz(e){return e.map(function(r){var t=b7(r.t||""),n=Rt("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return Rt("Comment",n,{"ss:Author":r.a})}).join("")}function Jz(e,r,t,n,a,s,c){if(!e||e.v==null&&e.f==null)return"";var d={};if(e.f&&(d["ss:Formula"]="="+an(Sb(e.f,c))),e.F&&e.F.slice(0,r.length)==r){var x=Mn(e.F.slice(r.length+1));d["ss:ArrayRange"]="RC:R"+(x.r==c.r?"":"["+(x.r-c.r)+"]")+"C"+(x.c==c.c?"":"["+(x.c-c.c)+"]")}if(e.l&&e.l.Target&&(d["ss:HRef"]=an(e.l.Target),e.l.Tooltip&&(d["x:HRefScreenTip"]=an(e.l.Tooltip))),t["!merges"])for(var f=t["!merges"],g=0;g!=f.length;++g)f[g].s.c!=c.c||f[g].s.r!=c.r||(f[g].e.c>f[g].s.c&&(d["ss:MergeAcross"]=f[g].e.c-f[g].s.c),f[g].e.r>f[g].s.r&&(d["ss:MergeDown"]=f[g].e.r-f[g].s.r));var v="",w="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":v="Number",w=String(e.v);break;case"b":v="Boolean",w=e.v?"1":"0";break;case"e":v="Error",w=Il[e.v];break;case"d":v="DateTime",w=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||nr[14]);break;case"s":v="String",w=p7(e.v||"");break}var E=Io(n.cellXfs,e,n);d["ss:StyleID"]="s"+(21+E),d["ss:Index"]=c.c+1;var N=e.v!=null?w:"",S=e.t=="z"?"":'<Data ss:Type="'+v+'">'+N+"</Data>";return(e.c||[]).length>0&&(S+=Zz(e.c)),Rt("Cell",S,d)}function Qz(e,r){var t='<Row ss:Index="'+(e+1)+'"';return r&&(r.hpt&&!r.hpx&&(r.hpx=Y0(r.hpt)),r.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+r.hpx+'"'),r.hidden&&(t+=' ss:Hidden="1"')),t+">"}function eH(e,r,t,n){if(!e["!ref"])return"";var a=zr(e["!ref"]),s=e["!merges"]||[],c=0,d=[];e["!cols"]&&e["!cols"].forEach(function(T,j){To(T);var D=!!T.width,I=Xx(j,T),L={"ss:Index":j+1};D&&(L["ss:Width"]=qd(I.width)),T.hidden&&(L["ss:Hidden"]="1"),d.push(Rt("Column",null,L))});for(var x=Array.isArray(e),f=a.s.r;f<=a.e.r;++f){for(var g=[Qz(f,(e["!rows"]||[])[f])],v=a.s.c;v<=a.e.c;++v){var w=!1;for(c=0;c!=s.length;++c)if(!(s[c].s.c>v)&&!(s[c].s.r>f)&&!(s[c].e.c<v)&&!(s[c].e.r<f)){(s[c].s.c!=v||s[c].s.r!=f)&&(w=!0);break}if(!w){var E={r:f,c:v},N=sr(E),S=x?(e[f]||[])[v]:e[N];g.push(Jz(S,N,e,r,t,n,E))}}g.push("</Row>"),g.length>2&&d.push(g.join(""))}return d.join("")}function tH(e,r,t){var n=[],a=t.SheetNames[e],s=t.Sheets[a],c=s?Yz(s,r,e,t):"";return c.length>0&&n.push("<Names>"+c+"</Names>"),c=s?eH(s,r,e,t):"",c.length>0&&n.push("<Table>"+c+"</Table>"),n.push($z(s,r,e,t)),n.join("")}function rH(e,r){r||(r={}),e.SSF||(e.SSF=An(nr)),e.SSF&&(su(),Ux(e.SSF),r.revssf=Hx(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF,r.cellXfs=[],Io(r.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(Wz(e,r)),t.push(qz()),t.push(""),t.push("");for(var n=0;n<e.SheetNames.length;++n)t.push(Rt("Worksheet",tH(n,r,e),{"ss:Name":an(e.SheetNames[n])}));return t[2]=Xz(e,r),t[3]=Kz(e),Zn+Rt("Workbook",t.join(""),{xmlns:Ts.ss,"xmlns:o":Ts.o,"xmlns:x":Ts.x,"xmlns:ss":Ts.ss,"xmlns:dt":Ts.dt,"xmlns:html":Ts.html})}function nH(e){var r={},t=e.content;if(t.l=28,r.AnsiUserType=t.read_shift(0,"lpstr-ansi"),r.AnsiClipboardFormat=K7(t),t.length-t.l<=4)return r;var n=t.read_shift(4);if(n==0||n>40||(t.l-=4,r.Reserved1=t.read_shift(0,"lpstr-ansi"),t.length-t.l<=4)||(n=t.read_shift(4),n!==1907505652)||(r.UnicodeClipboardFormat=Y7(t),n=t.read_shift(4),n==0||n>40))return r;t.l-=4,r.Reserved2=t.read_shift(0,"lpwstr")}var aH=[60,1084,2066,2165,2175];function sH(e,r,t,n,a){var s=n,c=[],d=t.slice(t.l,t.l+s);if(a&&a.enc&&a.enc.insitu&&d.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(d)}c.push(d),t.l+=s;for(var x=_l(t,t.l),f=v2[x],g=0;f!=null&&aH.indexOf(x)>-1;)s=_l(t,t.l+2),g=t.l+4,x==2066?g+=4:(x==2165||x==2175)&&(g+=12),d=t.slice(g,t.l+4+s),c.push(d),t.l+=4+s,f=v2[x=_l(t,t.l)];var v=ya(c);Oa(v,0);var w=0;v.lens=[];for(var E=0;E<c.length;++E)v.lens.push(w),w+=c[E].length;if(v.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+v.length+" < "+n;return r.f(v,v.length,a)}function Mi(e,r,t){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,r.cellNF&&(e.z=nr[n])}catch(s){if(r.WTF)throw s}if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Il[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ud(e.v):e.w=_c(e.v):e.w=ni(n,e.v,{date1904:!!t,dateNF:r&&r.dateNF})}catch(s){if(r.WTF)throw s}if(r.cellDates&&n&&e.t=="n"&&au(nr[n]||String(n))){var a=dc(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function o1(e,r,t){return{v:e,ixfe:r,t}}function iH(e,r){var t={opts:{}},n={},a=r.dense?[]:{},s={},c={},d=null,x=[],f="",g={},v,w="",E,N,S,T,j={},D=[],I,L,V=[],X=[],M={Sheets:[],WBProps:{date1904:!1},Views:[{}]},W={},z=function(Ct){return Ct<8?gc[Ct]:Ct<64&&X[Ct-8]||gc[Ct]},ae=function(Ct,Mt,lr){var jt=Mt.XF.data;if(!(!jt||!jt.patternType||!lr||!lr.cellStyles)){Mt.s={},Mt.s.patternType=jt.patternType;var ft;(ft=Wd(z(jt.icvFore)))&&(Mt.s.fgColor={rgb:ft}),(ft=Wd(z(jt.icvBack)))&&(Mt.s.bgColor={rgb:ft})}},Z=function(Ct,Mt,lr){if(!(Q>1)&&!(lr.sheetRows&&Ct.r>=lr.sheetRows)){if(lr.cellStyles&&Mt.XF&&Mt.XF.data&&ae(Ct,Mt,lr),delete Mt.ixfe,delete Mt.XF,v=Ct,w=sr(Ct),(!c||!c.s||!c.e)&&(c={s:{r:0,c:0},e:{r:0,c:0}}),Ct.r<c.s.r&&(c.s.r=Ct.r),Ct.c<c.s.c&&(c.s.c=Ct.c),Ct.r+1>c.e.r&&(c.e.r=Ct.r+1),Ct.c+1>c.e.c&&(c.e.c=Ct.c+1),lr.cellFormula&&Mt.f){for(var jt=0;jt<D.length;++jt)if(!(D[jt][0].s.c>Ct.c||D[jt][0].s.r>Ct.r)&&!(D[jt][0].e.c<Ct.c||D[jt][0].e.r<Ct.r)){Mt.F=br(D[jt][0]),(D[jt][0].s.c!=Ct.c||D[jt][0].s.r!=Ct.r)&&delete Mt.f,Mt.f&&(Mt.f=""+Fa(D[jt][1],c,Ct,ie,H));break}}lr.dense?(a[Ct.r]||(a[Ct.r]=[]),a[Ct.r][Ct.c]=Mt):a[w]=Mt}},H={enc:!1,sbcch:0,snames:[],sharedf:j,arrayf:D,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!r&&!!r.cellStyles,WTF:!!r&&!!r.wtf};r.password&&(H.password=r.password);var he,q=[],se=[],ve=[],le=[],ge=!1,ie=[];ie.SheetNames=H.snames,ie.sharedf=H.sharedf,ie.arrayf=H.arrayf,ie.names=[],ie.XTI=[];var Le=0,Q=0,B=0,te=[],U=[],P;H.codepage=1200,yi(1200);for(var ue=!1;e.l<e.length-1;){var Re=e.l,De=e.read_shift(2);if(De===0&&Le===10)break;var Ne=e.l===e.length?0:e.read_shift(2),Ke=v2[De];if(Ke&&Ke.f){if(r.bookSheets&&Le===133&&De!==133)break;if(Le=De,Ke.r===2||Ke.r==12){var ye=e.read_shift(2);if(Ne-=2,!H.enc&&ye!==De&&((ye&255)<<8|ye>>8)!==De)throw new Error("rt mismatch: "+ye+"!="+De);Ke.r==12&&(e.l+=10,Ne-=10)}var me={};if(De===10?me=Ke.f(e,Ne,H):me=sH(De,Ke,e,Ne,H),Q==0&&[9,521,1033,2057].indexOf(Le)===-1)continue;switch(De){case 34:t.opts.Date1904=M.WBProps.date1904=me;break;case 134:t.opts.WriteProtect=!0;break;case 47:if(H.enc||(e.l=0),H.enc=me,!r.password)throw new Error("File is password-protected");if(me.valid==null)throw new Error("Encryption scheme unsupported");if(!me.valid)throw new Error("Password is incorrect");break;case 92:H.lastuser=me;break;case 66:var Ce=Number(me);switch(Ce){case 21010:Ce=1200;break;case 32768:Ce=1e4;break;case 32769:Ce=1252;break}yi(H.codepage=Ce),ue=!0;break;case 317:H.rrtabid=me;break;case 25:H.winlocked=me;break;case 439:t.opts.RefreshAll=me;break;case 12:t.opts.CalcCount=me;break;case 16:t.opts.CalcDelta=me;break;case 17:t.opts.CalcIter=me;break;case 13:t.opts.CalcMode=me;break;case 14:t.opts.CalcPrecision=me;break;case 95:t.opts.CalcSaveRecalc=me;break;case 15:H.CalcRefMode=me;break;case 2211:t.opts.FullCalc=me;break;case 129:me.fDialog&&(a["!type"]="dialog"),me.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),me.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:V.push(me);break;case 430:ie.push([me]),ie[ie.length-1].XTI=[];break;case 35:case 547:ie[ie.length-1].push(me);break;case 24:case 536:P={Name:me.Name,Ref:Fa(me.rgce,c,null,ie,H)},me.itab>0&&(P.Sheet=me.itab-1),ie.names.push(P),ie[0]||(ie[0]=[],ie[0].XTI=[]),ie[ie.length-1].push(me),me.Name=="_xlnm._FilterDatabase"&&me.itab>0&&me.rgce&&me.rgce[0]&&me.rgce[0][0]&&me.rgce[0][0][0]=="PtgArea3d"&&(U[me.itab-1]={ref:br(me.rgce[0][0][1][2])});break;case 22:H.ExternCount=me;break;case 23:ie.length==0&&(ie[0]=[],ie[0].XTI=[]),ie[ie.length-1].XTI=ie[ie.length-1].XTI.concat(me),ie.XTI=ie.XTI.concat(me);break;case 2196:if(H.biff<8)break;P!=null&&(P.Comment=me[1]);break;case 18:a["!protect"]=me;break;case 19:me!==0&&H.WTF&&console.error("Password verifier: "+me);break;case 133:s[me.pos]=me,H.snames.push(me.name);break;case 10:{if(--Q)break;if(c.e){if(c.e.r>0&&c.e.c>0){if(c.e.r--,c.e.c--,a["!ref"]=br(c),r.sheetRows&&r.sheetRows<=c.e.r){var G=c.e.r;c.e.r=r.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=br(c),c.e.r=G}c.e.r++,c.e.c++}q.length>0&&(a["!merges"]=q),se.length>0&&(a["!objects"]=se),ve.length>0&&(a["!cols"]=ve),le.length>0&&(a["!rows"]=le),M.Sheets.push(W)}f===""?g=a:n[f]=a,a=r.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(H.biff===8&&(H.biff={9:2,521:3,1033:4}[De]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[me.BIFFVer]||8),H.biffguess=me.BIFFVer==0,me.BIFFVer==0&&me.dt==4096&&(H.biff=5,ue=!0,yi(H.codepage=28591)),H.biff==8&&me.BIFFVer==0&&me.dt==16&&(H.biff=2),Q++)break;if(a=r.dense?[]:{},H.biff<8&&!ue&&(ue=!0,yi(H.codepage=r.codepage||1252)),H.biff<5||me.BIFFVer==0&&me.dt==4096){f===""&&(f="Sheet1"),c={s:{r:0,c:0},e:{r:0,c:0}};var Me={pos:e.l-Ne,name:f};s[Me.pos]=Me,H.snames.push(f)}else f=(s[Re]||{name:""}).name;me.dt==32&&(a["!type"]="chart"),me.dt==64&&(a["!type"]="macro"),q=[],se=[],H.arrayf=D=[],ve=[],le=[],ge=!1,W={Hidden:(s[Re]||{hs:0}).hs,name:f}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(r.dense?(a[me.r]||[])[me.c]:a[sr({c:me.c,r:me.r})])&&++me.c,I={ixfe:me.ixfe,XF:V[me.ixfe]||{},v:me.val,t:"n"},B>0&&(I.z=te[I.ixfe>>8&63]),Mi(I,r,t.opts.Date1904),Z({c:me.c,r:me.r},I,r);break;case 5:case 517:I={ixfe:me.ixfe,XF:V[me.ixfe],v:me.val,t:me.t},B>0&&(I.z=te[I.ixfe>>8&63]),Mi(I,r,t.opts.Date1904),Z({c:me.c,r:me.r},I,r);break;case 638:I={ixfe:me.ixfe,XF:V[me.ixfe],v:me.rknum,t:"n"},B>0&&(I.z=te[I.ixfe>>8&63]),Mi(I,r,t.opts.Date1904),Z({c:me.c,r:me.r},I,r);break;case 189:for(var Ae=me.c;Ae<=me.C;++Ae){var oe=me.rkrec[Ae-me.c][0];I={ixfe:oe,XF:V[oe],v:me.rkrec[Ae-me.c][1],t:"n"},B>0&&(I.z=te[I.ixfe>>8&63]),Mi(I,r,t.opts.Date1904),Z({c:Ae,r:me.r},I,r)}break;case 6:case 518:case 1030:{if(me.val=="String"){d=me;break}if(I=o1(me.val,me.cell.ixfe,me.tt),I.XF=V[I.ixfe],r.cellFormula){var de=me.formula;if(de&&de[0]&&de[0][0]&&de[0][0][0]=="PtgExp"){var Se=de[0][0][1][0],lt=de[0][0][1][1],Ue=sr({r:Se,c:lt});j[Ue]?I.f=""+Fa(me.formula,c,me.cell,ie,H):I.F=((r.dense?(a[Se]||[])[lt]:a[Ue])||{}).F}else I.f=""+Fa(me.formula,c,me.cell,ie,H)}B>0&&(I.z=te[I.ixfe>>8&63]),Mi(I,r,t.opts.Date1904),Z(me.cell,I,r),d=me}break;case 7:case 519:if(d)d.val=me,I=o1(me,d.cell.ixfe,"s"),I.XF=V[I.ixfe],r.cellFormula&&(I.f=""+Fa(d.formula,c,d.cell,ie,H)),B>0&&(I.z=te[I.ixfe>>8&63]),Mi(I,r,t.opts.Date1904),Z(d.cell,I,r),d=null;else throw new Error("String record expects Formula");break;case 33:case 545:{D.push(me);var He=sr(me[0].s);if(E=r.dense?(a[me[0].s.r]||[])[me[0].s.c]:a[He],r.cellFormula&&E){if(!d||!He||!E)break;E.f=""+Fa(me[1],c,me[0],ie,H),E.F=br(me[0])}}break;case 1212:{if(!r.cellFormula)break;if(w){if(!d)break;j[sr(d.cell)]=me[0],E=r.dense?(a[d.cell.r]||[])[d.cell.c]:a[sr(d.cell)],(E||{}).f=""+Fa(me[0],c,v,ie,H)}}break;case 253:I=o1(x[me.isst].t,me.ixfe,"s"),x[me.isst].h&&(I.h=x[me.isst].h),I.XF=V[I.ixfe],B>0&&(I.z=te[I.ixfe>>8&63]),Mi(I,r,t.opts.Date1904),Z({c:me.c,r:me.r},I,r);break;case 513:r.sheetStubs&&(I={ixfe:me.ixfe,XF:V[me.ixfe],t:"z"},B>0&&(I.z=te[I.ixfe>>8&63]),Mi(I,r,t.opts.Date1904),Z({c:me.c,r:me.r},I,r));break;case 190:if(r.sheetStubs)for(var Oe=me.c;Oe<=me.C;++Oe){var We=me.ixfe[Oe-me.c];I={ixfe:We,XF:V[We],t:"z"},B>0&&(I.z=te[I.ixfe>>8&63]),Mi(I,r,t.opts.Date1904),Z({c:Oe,r:me.r},I,r)}break;case 214:case 516:case 4:I=o1(me.val,me.ixfe,"s"),I.XF=V[I.ixfe],B>0&&(I.z=te[I.ixfe>>8&63]),Mi(I,r,t.opts.Date1904),Z({c:me.c,r:me.r},I,r);break;case 0:case 512:Q===1&&(c=me);break;case 252:x=me;break;case 1054:if(H.biff==4){te[B++]=me[1];for(var rt=0;rt<B+163&&nr[rt]!=me[1];++rt);rt>=163&&Nl(me[1],B+163)}else Nl(me[1],me[0]);break;case 30:{te[B++]=me;for(var ht=0;ht<B+163&&nr[ht]!=me;++ht);ht>=163&&Nl(me,B+163)}break;case 229:q=q.concat(me);break;case 93:se[me.cmo[0]]=H.lastobj=me;break;case 438:H.lastobj.TxO=me;break;case 127:H.lastobj.ImData=me;break;case 440:for(T=me[0].s.r;T<=me[0].e.r;++T)for(S=me[0].s.c;S<=me[0].e.c;++S)E=r.dense?(a[T]||[])[S]:a[sr({c:S,r:T})],E&&(E.l=me[1]);break;case 2048:for(T=me[0].s.r;T<=me[0].e.r;++T)for(S=me[0].s.c;S<=me[0].e.c;++S)E=r.dense?(a[T]||[])[S]:a[sr({c:S,r:T})],E&&E.l&&(E.l.Tooltip=me[1]);break;case 28:{if(H.biff<=5&&H.biff>=2)break;E=r.dense?(a[me[0].r]||[])[me[0].c]:a[sr(me[0])];var Pe=se[me[2]];E||(r.dense?(a[me[0].r]||(a[me[0].r]=[]),E=a[me[0].r][me[0].c]={t:"z"}):E=a[sr(me[0])]={t:"z"},c.e.r=Math.max(c.e.r,me[0].r),c.s.r=Math.min(c.s.r,me[0].r),c.e.c=Math.max(c.e.c,me[0].c),c.s.c=Math.min(c.s.c,me[0].c)),E.c||(E.c=[]),N={a:me[1],t:Pe.TxO.t},E.c.push(N)}break;case 2173:XF(V[me.ixfe],me.ext);break;case 125:{if(!H.cellStyles)break;for(;me.e>=me.s;)ve[me.e--]={width:me.w/256,level:me.level||0,hidden:!!(me.flags&1)},ge||(ge=!0,_b(me.w/256)),To(ve[me.e+1])}break;case 520:{var Ye={};me.level!=null&&(le[me.r]=Ye,Ye.level=me.level),me.hidden&&(le[me.r]=Ye,Ye.hidden=!0),me.hpt&&(le[me.r]=Ye,Ye.hpt=me.hpt,Ye.hpx=Y0(me.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||vc(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[De]]=me;break;case 161:a["!margins"]||vc(a["!margins"]={}),a["!margins"].header=me.header,a["!margins"].footer=me.footer;break;case 574:me.RTL&&(M.Views[0].RTL=!0);break;case 146:X=me;break;case 2198:he=me;break;case 140:L=me;break;case 442:f?W.CodeName=me||W.name:M.WBProps.CodeName=me||"ThisWorkbook";break}}else Ke||console.error("Missing Info for XLS Record 0x"+De.toString(16)),e.l+=Ne}return t.SheetNames=Vn(s).sort(function(Tt,Ct){return Number(Tt)-Number(Ct)}).map(function(Tt){return s[Tt].name}),r.bookSheets||(t.Sheets=n),!t.SheetNames.length&&g["!ref"]?(t.SheetNames.push("Sheet1"),t.Sheets&&(t.Sheets.Sheet1=g)):t.Preamble=g,t.Sheets&&U.forEach(function(Tt,Ct){t.Sheets[t.SheetNames[Ct]]["!autofilter"]=Tt}),t.Strings=x,t.SSF=An(nr),H.enc&&(t.Encryption=H.enc),he&&(t.Themes=he),t.Metadata={},L!==void 0&&(t.Metadata.Country=L),ie.names.length>0&&(M.Names=ie.names),t.Workbook=M,t}var Ad={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function lH(e,r,t){var n=Yt.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=P4(n,f2,Ad.DSI);for(var s in a)r[s]=a[s]}catch(f){if(t.WTF)throw f}var c=Yt.find(e,"/!SummaryInformation");if(c&&c.size>0)try{var d=P4(c,h2,Ad.SI);for(var x in d)r[x]==null&&(r[x]=d[x])}catch(f){if(t.WTF)throw f}r.HeadingPairs&&r.TitlesOfParts&&(cN(r.HeadingPairs,r.TitlesOfParts,r,t),delete r.HeadingPairs,delete r.TitlesOfParts)}function oH(e,r){var t=[],n=[],a=[],s=0,c,d=m4(f2,"n"),x=m4(h2,"n");if(e.Props)for(c=Vn(e.Props),s=0;s<c.length;++s)(Object.prototype.hasOwnProperty.call(d,c[s])?t:Object.prototype.hasOwnProperty.call(x,c[s])?n:a).push([c[s],e.Props[c[s]]]);if(e.Custprops)for(c=Vn(e.Custprops),s=0;s<c.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},c[s])||(Object.prototype.hasOwnProperty.call(d,c[s])?t:Object.prototype.hasOwnProperty.call(x,c[s])?n:a).push([c[s],e.Custprops[c[s]]]);var f=[];for(s=0;s<a.length;++s)gN.indexOf(a[s][0])>-1||oN.indexOf(a[s][0])>-1||a[s][1]!=null&&f.push(a[s]);n.length&&Yt.utils.cfb_add(r,"/SummaryInformation",U4(n,Ad.SI,x,h2)),(t.length||f.length)&&Yt.utils.cfb_add(r,"/DocumentSummaryInformation",U4(t,Ad.DSI,d,f2,f.length?f:null,Ad.UDI))}function d5(e,r){r||(r={}),Ob(r),J2(),r.codepage&&Z2(r.codepage);var t,n;if(e.FullPaths){if(Yt.find(e,"/encryption"))throw new Error("File is password-protected");t=Yt.find(e,"!CompObj"),n=Yt.find(e,"/Workbook")||Yt.find(e,"/Book")}else{switch(r.type){case"base64":e=Rs(Ms(e));break;case"binary":e=Rs(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Oa(e,0),n={content:e}}var a,s;if(t&&nH(t),r.bookProps&&!r.bookSheets)a={};else{var c=Ar?"buffer":"array";if(n&&n.content)a=iH(n.content,r);else if((s=Yt.find(e,"PerfectOffice_MAIN"))&&s.content)a=bc.to_workbook(s.content,(r.type=c,r));else if((s=Yt.find(e,"NativeContent_MAIN"))&&s.content)a=bc.to_workbook(s.content,(r.type=c,r));else throw(s=Yt.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");r.bookVBA&&e.FullPaths&&Yt.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=wL(e))}var d={};return e.FullPaths&&lH(e,d,r),a.Props=a.Custprops=d,r.bookFiles&&(a.cfb=e),a}function cH(e,r){var t=r||{},n=Yt.utils.cfb_new({root:"R"}),a="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":a="/Workbook",t.biff=8;break;case"biff5":a="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Yt.utils.cfb_add(n,a,f5(e,t)),t.biff==8&&(e.Props||e.Custprops)&&oH(e,n),t.biff==8&&e.vbaraw&&_L(n,Yt.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Yd={0:{f:IP},1:{f:zP},2:{f:iU},3:{f:YP},4:{f:WP},5:{f:nU},6:{f:dU},7:{f:QP},8:{f:bU},9:{f:pU},10:{f:mU},11:{f:gU},12:{f:GP},13:{f:oU},14:{f:ZP},15:{f:XP},16:{f:n5},17:{f:hU},18:{f:tU},19:{f:fb},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:hz},40:{},42:{},43:{f:dF},44:{f:cF},45:{f:xF},46:{f:gF},47:{f:mF},48:{},49:{f:F7},50:{},51:{f:$F},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:AN},62:{f:uU},63:{f:sL},64:{f:DU},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:za,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:jU},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:PP},148:{f:FP,p:16},151:{f:kU},152:{},153:{f:uz},154:{},155:{},156:{f:oz},157:{},158:{},159:{T:1,f:NM},160:{T:-1},161:{T:1,f:Mc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:vU},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:KF},336:{T:-1},337:{f:QF,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:d2},357:{},358:{},359:{},360:{T:1},361:{},362:{f:NN},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:SU},427:{f:NU},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:TU},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:BP},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:_U},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:d2},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:gL},633:{T:1},634:{T:-1},635:{T:1,f:xL},636:{T:-1},637:{f:U7},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:ZU},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:MU},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},v2={6:{f:_p},10:{f:mo},12:{f:ia},13:{f:ia},14:{f:Yn},15:{f:Yn},16:{f:Pa},17:{f:Yn},18:{f:Yn},19:{f:ia},20:{f:q4},21:{f:q4},23:{f:NN},24:{f:K4},25:{f:Yn},26:{},27:{},28:{f:M9},29:{},34:{f:Yn},35:{f:X4},38:{f:Pa},39:{f:Pa},40:{f:Pa},41:{f:Pa},42:{f:Yn},43:{f:Yn},47:{f:XM},49:{f:o9},51:{f:ia},60:{},61:{f:n9},64:{f:Yn},65:{f:l9},66:{f:ia},77:{},80:{},81:{},82:{},85:{f:ia},89:{},90:{},91:{},92:{f:qD},93:{f:B9},94:{},95:{f:Yn},96:{},97:{},99:{f:Yn},125:{f:AN},128:{f:E9},129:{f:KD},130:{f:ia},131:{f:Yn},132:{f:Yn},133:{f:YD},134:{},140:{f:q9},141:{f:ia},144:{},146:{f:Y9},151:{},152:{},153:{},154:{},155:{},156:{f:ia},157:{},158:{},160:{f:rM},161:{f:J9},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:v9},190:{f:y9},193:{f:mo},197:{},198:{},199:{},200:{},201:{},202:{f:Yn},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ia},220:{},221:{f:Yn},222:{},224:{f:_9},225:{f:WD},226:{f:mo},227:{},229:{f:F9},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:ZD},253:{f:u9},255:{f:QD},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:pN},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Yn},353:{f:mo},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:T9},431:{f:Yn},432:{},433:{},434:{},437:{},438:{f:z9},439:{f:Yn},440:{f:H9},441:{},442:{f:pf},443:{},444:{f:ia},445:{},446:{},448:{f:mo},449:{f:r9,r:2},450:{f:mo},512:{f:G4},513:{f:tM},515:{f:N9},516:{f:f9},517:{f:W4},519:{f:nM},520:{f:e9},523:{},545:{f:Y4},549:{f:H4},566:{},574:{f:s9},638:{f:b9},659:{},1048:{},1054:{f:x9},1084:{},1212:{f:R9},2048:{f:V9},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:s1},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:mo},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:$9,r:12},2173:{f:qF,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Yn,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:O9,r:12},2197:{},2198:{f:UF,r:12},2199:{},2200:{},2201:{},2202:{f:I9,r:12},2203:{f:mo},2204:{},2205:{},2206:{},2207:{},2211:{f:t9},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ia},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Q9},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:K9},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:G4},1:{},2:{f:oM},3:{f:iM},4:{f:sM},5:{f:W4},7:{f:uM},8:{},9:{f:s1},11:{},22:{f:ia},30:{f:g9},31:{},32:{},33:{f:Y4},36:{},37:{f:H4},50:{f:dM},62:{},52:{},67:{},68:{f:ia},69:{},86:{},126:{},127:{f:aM},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:fM},223:{},234:{},354:{},421:{},518:{f:_p},521:{f:s1},536:{f:K4},547:{f:X4},561:{},579:{},1030:{f:_p},1033:{f:s1},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function It(e,r,t,n){var a=r;if(!isNaN(a)){var s=n||(t||[]).length||0,c=e.next(4);c.write_shift(2,a),c.write_shift(2,s),s>0&&cb(t)&&e.push(t)}}function uH(e,r,t,n){var a=(t||[]).length||0;if(a<=8224)return It(e,r,t,a);var s=r;if(!isNaN(s)){for(var c=t.parts||[],d=0,x=0,f=0;f+(c[d]||8224)<=8224;)f+=c[d]||8224,d++;var g=e.next(4);for(g.write_shift(2,s),g.write_shift(2,f),e.push(t.slice(x,x+f)),x+=f;x<a;){for(g=e.next(4),g.write_shift(2,60),f=0;f+(c[d]||8224)<=8224;)f+=c[d]||8224,d++;g.write_shift(2,f),e.push(t.slice(x,x+f)),x+=f}}}function wf(e,r,t){return e||(e=ut(7)),e.write_shift(2,r),e.write_shift(2,t),e.write_shift(2,0),e.write_shift(1,0),e}function dH(e,r,t,n){var a=ut(9);return wf(a,e,r),bN(t,n||"b",a),a}function fH(e,r,t){var n=ut(8+2*t.length);return wf(n,e,r),n.write_shift(1,t.length),n.write_shift(t.length,t,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function hH(e,r,t,n){if(r.v!=null)switch(r.t){case"d":case"n":var a=r.t=="d"?xa(Nn(r.v)):r.v;a==(a|0)&&a>=0&&a<65536?It(e,2,cM(t,n,a)):It(e,3,lM(t,n,a));return;case"b":case"e":It(e,5,dH(t,n,r.v,r.t));return;case"s":case"str":It(e,4,fH(t,n,(r.v||"").slice(0,255)));return}It(e,1,wf(null,t,n))}function xH(e,r,t,n){var a=Array.isArray(r),s=zr(r["!ref"]||"A1"),c,d="",x=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(r["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),c=br(s)}for(var f=s.s.r;f<=s.e.r;++f){d=$n(f);for(var g=s.s.c;g<=s.e.c;++g){f===s.s.r&&(x[g]=Dn(g)),c=x[g]+d;var v=a?(r[f]||[])[g]:r[c];v&&hH(e,v,f,g)}}}function mH(e,r){for(var t=r||{},n=us(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==t.sheet&&(a=s);if(a==0&&t.sheet&&e.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return It(n,t.biff==4?1033:t.biff==3?521:9,vb(e,16,t)),xH(n,e.Sheets[e.SheetNames[a]],a,t),It(n,10),n.end()}function gH(e,r,t){It(e,49,c9({sz:12,name:"Arial"},t))}function pH(e,r,t){r&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)r[a]!=null&&It(e,1054,m9(a,r[a],t))})}function bH(e,r){var t=ut(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),It(e,2151,t),t=ut(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),EN(zr(r["!ref"]||"A1"),t),t.write_shift(4,4),It(e,2152,t)}function vH(e,r){for(var t=0;t<16;++t)It(e,224,V4({numFmtId:0,style:!0},0,r));r.cellXfs.forEach(function(n){It(e,224,V4(n,0,r))})}function yH(e,r){for(var t=0;t<r["!links"].length;++t){var n=r["!links"][t];It(e,440,G9(n)),n[1].Tooltip&&It(e,2048,W9(n))}delete r["!links"]}function wH(e,r){if(r){var t=0;r.forEach(function(n,a){++t<=256&&n&&It(e,125,Z9(Xx(a,n),a))})}}function _H(e,r,t,n,a){var s=16+Io(a.cellXfs,r,a);if(r.v==null&&!r.bf){It(e,513,Nc(t,n,s));return}if(r.bf)It(e,6,KB(r,t,n,a,s));else switch(r.t){case"d":case"n":var c=r.t=="d"?xa(Nn(r.v)):r.v;It(e,515,A9(t,n,c,s));break;case"b":case"e":It(e,517,S9(t,n,r.v,s,a,r.t));break;case"s":case"str":if(a.bookSST){var d=Ab(a.Strings,r.v,a.revStrings);It(e,253,d9(t,n,d,s))}else It(e,516,h9(t,n,(r.v||"").slice(0,255),s,a));break;default:It(e,513,Nc(t,n,s))}}function EH(e,r,t){var n=us(),a=t.SheetNames[e],s=t.Sheets[a]||{},c=(t||{}).Workbook||{},d=(c.Sheets||[])[e]||{},x=Array.isArray(s),f=r.biff==8,g,v="",w=[],E=zr(s["!ref"]||"A1"),N=f?65536:16384;if(E.e.c>255||E.e.r>=N){if(r.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");E.e.c=Math.min(E.e.c,255),E.e.r=Math.min(E.e.c,N-1)}It(n,2057,vb(t,16,r)),It(n,13,Qs(1)),It(n,12,Qs(100)),It(n,15,Ya(!0)),It(n,17,Ya(!1)),It(n,16,kc(.001)),It(n,95,Ya(!0)),It(n,42,Ya(!1)),It(n,43,Ya(!1)),It(n,130,Qs(1)),It(n,128,k9()),It(n,131,Ya(!1)),It(n,132,Ya(!1)),f&&wH(n,s["!cols"]),It(n,512,p9(E,r)),f&&(s["!links"]=[]);for(var S=E.s.r;S<=E.e.r;++S){v=$n(S);for(var T=E.s.c;T<=E.e.c;++T){S===E.s.r&&(w[T]=Dn(T)),g=w[T]+v;var j=x?(s[S]||[])[T]:s[g];j&&(_H(n,j,S,T,r),f&&j.l&&s["!links"].push([g,j.l]))}}var D=d.CodeName||d.name||a;return f&&It(n,574,i9((c.Views||[])[0])),f&&(s["!merges"]||[]).length&&It(n,229,L9(s["!merges"])),f&&yH(n,s),It(n,442,vN(D)),f&&bH(n,s),It(n,10),n.end()}function kH(e,r,t){var n=us(),a=(e||{}).Workbook||{},s=a.Sheets||[],c=a.WBProps||{},d=t.biff==8,x=t.biff==5;if(It(n,2057,vb(e,5,t)),t.bookType=="xla"&&It(n,135),It(n,225,d?Qs(1200):null),It(n,193,SD(2)),x&&It(n,191),x&&It(n,192),It(n,226),It(n,92,XD("SheetJS",t)),It(n,66,Qs(d?1200:1252)),d&&It(n,353,Qs(0)),d&&It(n,448),It(n,317,eM(e.SheetNames.length)),d&&e.vbaraw&&It(n,211),d&&e.vbaraw){var f=c.CodeName||"ThisWorkbook";It(n,442,vN(f))}It(n,156,Qs(17)),It(n,25,Ya(!1)),It(n,18,Ya(!1)),It(n,19,Qs(0)),d&&It(n,431,Ya(!1)),d&&It(n,444,Qs(0)),It(n,61,a9()),It(n,64,Ya(!1)),It(n,141,Qs(0)),It(n,34,Ya(rz(e)=="true")),It(n,14,Ya(!0)),d&&It(n,439,Ya(!1)),It(n,218,Qs(0)),gH(n,e,t),pH(n,e.SSF,t),vH(n,t),d&&It(n,352,Ya(!1));var g=n.end(),v=us();d&&It(v,140,X9()),d&&t.Strings&&uH(v,252,JD(t.Strings)),It(v,10);var w=v.end(),E=us(),N=0,S=0;for(S=0;S<e.SheetNames.length;++S)N+=(d?12:11)+(d?2:1)*e.SheetNames[S].length;var T=g.length+N+w.length;for(S=0;S<e.SheetNames.length;++S){var j=s[S]||{};It(E,133,$D({pos:T,hs:j.Hidden||0,dt:0,name:e.SheetNames[S]},t)),T+=r[S].length}var D=E.end();if(N!=D.length)throw new Error("BS8 "+N+" != "+D.length);var I=[];return g.length&&I.push(g),D.length&&I.push(D),w.length&&I.push(w),ya(I)}function SH(e,r){var t=r||{},n=[];e&&!e.SSF&&(e.SSF=An(nr)),e&&e.SSF&&(su(),Ux(e.SSF),t.revssf=Hx(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Rb(t),t.cellXfs=[],Io(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=EH(a,t,e);return n.unshift(kH(e,n,t)),ya(n)}function f5(e,r){for(var t=0;t<=e.SheetNames.length;++t){var n=e.Sheets[e.SheetNames[t]];if(!(!n||!n["!ref"])){var a=ds(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=r||{};switch(s.biff||2){case 8:case 5:return SH(e,r);case 4:case 3:case 2:return mH(e,r)}throw new Error("invalid type "+s.bookType+" for BIFF")}function s3(e,r){var t=r||{},n=t.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),c=a.index,d=s&&s.index||e.length,x=c7(e.slice(c,d),/(:?<tr[^>]*>)/i,"<tr>"),f=-1,g=0,v=0,w=0,E={s:{r:1e7,c:1e7},e:{r:0,c:0}},N=[];for(c=0;c<x.length;++c){var S=x[c].trim(),T=S.slice(0,3).toLowerCase();if(T=="<tr"){if(++f,t.sheetRows&&t.sheetRows<=f){--f;break}g=0;continue}if(!(T!="<td"&&T!="<th")){var j=S.split(/<\/t[dh]>/i);for(d=0;d<j.length;++d){var D=j[d].trim();if(D.match(/<t[dh]/i)){for(var I=D,L=0;I.charAt(0)=="<"&&(L=I.indexOf(">"))>-1;)I=I.slice(L+1);for(var V=0;V<N.length;++V){var X=N[V];X.s.c==g&&X.s.r<f&&f<=X.e.r&&(g=X.e.c+1,V=-1)}var M=ir(D.slice(0,D.indexOf(">")));w=M.colspan?+M.colspan:1,((v=+M.rowspan)>1||w>1)&&N.push({s:{r:f,c:g},e:{r:f+(v||1)-1,c:g+w-1}});var W=M.t||M["data-t"]||"";if(!I.length){g+=w;continue}if(I=FS(I),E.s.r>f&&(E.s.r=f),E.e.r<f&&(E.e.r=f),E.s.c>g&&(E.s.c=g),E.e.c<g&&(E.e.c=g),!I.length){g+=w;continue}var z={t:"s",v:I};t.raw||!I.trim().length||W=="s"||(I==="TRUE"?z={t:"b",v:!0}:I==="FALSE"?z={t:"b",v:!1}:isNaN(_i(I))?isNaN(X0(I).getDate())||(z={t:"d",v:Nn(I)},t.cellDates||(z={t:"n",v:xa(z.v)}),z.z=t.dateNF||nr[14]):z={t:"n",v:_i(I)}),t.dense?(n[f]||(n[f]=[]),n[f][g]=z):n[sr({r:f,c:g})]=z,g+=w}}}}return n["!ref"]=br(E),N.length&&(n["!merges"]=N),n}function NH(e,r,t,n){for(var a=e["!merges"]||[],s=[],c=r.s.c;c<=r.e.c;++c){for(var d=0,x=0,f=0;f<a.length;++f)if(!(a[f].s.r>t||a[f].s.c>c)&&!(a[f].e.r<t||a[f].e.c<c)){if(a[f].s.r<t||a[f].s.c<c){d=-1;break}d=a[f].e.r-a[f].s.r+1,x=a[f].e.c-a[f].s.c+1;break}if(!(d<0)){var g=sr({r:t,c}),v=n.dense?(e[t]||[])[c]:e[g],w=v&&v.v!=null&&(v.h||ib(v.w||(Cl(v),v.w)||""))||"",E={};d>1&&(E.rowspan=d),x>1&&(E.colspan=x),n.editable?w='<span contenteditable="true">'+w+"</span>":v&&(E["data-t"]=v&&v.t||"z",v.v!=null&&(E["data-v"]=v.v),v.z!=null&&(E["data-z"]=v.z),v.l&&(v.l.Target||"#").charAt(0)!="#"&&(w='<a href="'+v.l.Target+'">'+w+"</a>")),E.id=(n.id||"sjs")+"-"+g,s.push(Rt("td",w,E))}}var N="<tr>";return N+s.join("")+"</tr>"}var AH='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',TH="</body></html>";function CH(e,r){var t=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!t||t.length==0)throw new Error("Invalid HTML: could not find <table>");if(t.length==1)return Ro(s3(t[0],r),r);var n=Mb();return t.forEach(function(a,s){Fb(n,s3(a,r),"Sheet"+(s+1))}),n}function jH(e,r,t){var n=[];return n.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function h5(e,r){var t=r||{},n=t.header!=null?t.header:AH,a=t.footer!=null?t.footer:TH,s=[n],c=ds(e["!ref"]);t.dense=Array.isArray(e),s.push(jH(e,c,t));for(var d=c.s.r;d<=c.e.r;++d)s.push(NH(e,c,d,t));return s.push("</table>"+a),s.join("")}function x5(e,r,t){var n=t||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var c=typeof n.origin=="string"?Mn(n.origin):n.origin;a=c.r,s=c.c}var d=r.getElementsByTagName("tr"),x=Math.min(n.sheetRows||1e7,d.length),f={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var g=ds(e["!ref"]);f.s.r=Math.min(f.s.r,g.s.r),f.s.c=Math.min(f.s.c,g.s.c),f.e.r=Math.max(f.e.r,g.e.r),f.e.c=Math.max(f.e.c,g.e.c),a==-1&&(f.e.r=a=g.e.r+1)}var v=[],w=0,E=e["!rows"]||(e["!rows"]=[]),N=0,S=0,T=0,j=0,D=0,I=0;for(e["!cols"]||(e["!cols"]=[]);N<d.length&&S<x;++N){var L=d[N];if(i3(L)){if(n.display)continue;E[S]={hidden:!0}}var V=L.children;for(T=j=0;T<V.length;++T){var X=V[T];if(!(n.display&&i3(X))){var M=X.hasAttribute("data-v")?X.getAttribute("data-v"):X.hasAttribute("v")?X.getAttribute("v"):FS(X.innerHTML),W=X.getAttribute("data-z")||X.getAttribute("z");for(w=0;w<v.length;++w){var z=v[w];z.s.c==j+s&&z.s.r<S+a&&S+a<=z.e.r&&(j=z.e.c+1-s,w=-1)}I=+X.getAttribute("colspan")||1,((D=+X.getAttribute("rowspan")||1)>1||I>1)&&v.push({s:{r:S+a,c:j+s},e:{r:S+a+(D||1)-1,c:j+s+(I||1)-1}});var ae={t:"s",v:M},Z=X.getAttribute("data-t")||X.getAttribute("t")||"";M!=null&&(M.length==0?ae.t=Z||"z":n.raw||M.trim().length==0||Z=="s"||(M==="TRUE"?ae={t:"b",v:!0}:M==="FALSE"?ae={t:"b",v:!1}:isNaN(_i(M))?isNaN(X0(M).getDate())||(ae={t:"d",v:Nn(M)},n.cellDates||(ae={t:"n",v:xa(ae.v)}),ae.z=n.dateNF||nr[14]):ae={t:"n",v:_i(M)})),ae.z===void 0&&W!=null&&(ae.z=W);var H="",he=X.getElementsByTagName("A");if(he&&he.length)for(var q=0;q<he.length&&!(he[q].hasAttribute("href")&&(H=he[q].getAttribute("href"),H.charAt(0)!="#"));++q);H&&H.charAt(0)!="#"&&(ae.l={Target:H}),n.dense?(e[S+a]||(e[S+a]=[]),e[S+a][j+s]=ae):e[sr({c:j+s,r:S+a})]=ae,f.e.c<j+s&&(f.e.c=j+s),j+=I}}++S}return v.length&&(e["!merges"]=(e["!merges"]||[]).concat(v)),f.e.r=Math.max(f.e.r,S-1+a),e["!ref"]=br(f),S>=x&&(e["!fullref"]=br((f.e.r=d.length-N+S-1+a,f))),e}function m5(e,r){var t=r||{},n=t.dense?[]:{};return x5(n,e,r)}function OH(e,r){return Ro(m5(e,r),r)}function i3(e){var r="",t=RH(e);return t&&(r=t(e).getPropertyValue("display")),r||(r=e.style&&e.style.display),r==="none"}function RH(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function IH(e){var r=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),t=Ur(r.replace(/<[^>]*>/g,""));return[t]}var l3={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function g5(e,r){var t=r||{},n=lb(e),a=[],s,c,d={name:""},x="",f=0,g,v,w={},E=[],N=t.dense?[]:{},S,T,j={value:""},D="",I=0,L=[],V=-1,X=-1,M={s:{r:1e6,c:1e7},e:{r:0,c:0}},W=0,z={},ae=[],Z={},H=0,he=0,q=[],se=1,ve=1,le=[],ge={Names:[]},ie={},Le=["",""],Q=[],B={},te="",U=0,P=!1,ue=!1,Re=0;for(Gd.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");S=Gd.exec(n);)switch(S[3]=S[3].replace(/_.*$/,"")){case"table":case"":S[1]==="/"?(M.e.c>=M.s.c&&M.e.r>=M.s.r?N["!ref"]=br(M):N["!ref"]="A1:A1",t.sheetRows>0&&t.sheetRows<=M.e.r&&(N["!fullref"]=N["!ref"],M.e.r=t.sheetRows-1,N["!ref"]=br(M)),ae.length&&(N["!merges"]=ae),q.length&&(N["!rows"]=q),g.name=g.||g.name,typeof JSON<"u"&&JSON.stringify(g),E.push(g.name),w[g.name]=N,ue=!1):S[0].charAt(S[0].length-2)!=="/"&&(g=ir(S[0],!1),V=X=-1,M.s.r=M.s.c=1e7,M.e.r=M.e.c=0,N=t.dense?[]:{},ae=[],q=[],ue=!0);break;case"table-row-group":S[1]==="/"?--W:++W;break;case"table-row":case"":if(S[1]==="/"){V+=se,se=1;break}if(v=ir(S[0],!1),v.?V=v.-1:V==-1&&(V=0),se=+v["number-rows-repeated"]||1,se<10)for(Re=0;Re<se;++Re)W>0&&(q[V+Re]={level:W});X=-1;break;case"covered-table-cell":S[1]!=="/"&&++X,t.sheetStubs&&(t.dense?(N[V]||(N[V]=[]),N[V][X]={t:"z"}):N[sr({r:V,c:X})]={t:"z"}),D="",L=[];break;case"table-cell":case"":if(S[0].charAt(S[0].length-2)==="/")++X,j=ir(S[0],!1),ve=parseInt(j["number-columns-repeated"]||"1",10),T={t:"z",v:null},j.formula&&t.cellFormula!=!1&&(T.f=r3(Ur(j.formula))),(j.||j["value-type"])=="string"&&(T.t="s",T.v=Ur(j["string-value"]||""),t.dense?(N[V]||(N[V]=[]),N[V][X]=T):N[sr({r:V,c:X})]=T),X+=ve-1;else if(S[1]!=="/"){++X,D="",I=0,L=[],ve=1;var De=se?V+se-1:V;if(X>M.e.c&&(M.e.c=X),X<M.s.c&&(M.s.c=X),V<M.s.r&&(M.s.r=V),De>M.e.r&&(M.e.r=De),j=ir(S[0],!1),Q=[],B={},T={t:j.||j["value-type"],v:null},t.cellFormula)if(j.formula&&(j.formula=Ur(j.formula)),j["number-matrix-columns-spanned"]&&j["number-matrix-rows-spanned"]&&(H=parseInt(j["number-matrix-rows-spanned"],10)||0,he=parseInt(j["number-matrix-columns-spanned"],10)||0,Z={s:{r:V,c:X},e:{r:V+H-1,c:X+he-1}},T.F=br(Z),le.push([Z,T.F])),j.formula)T.f=r3(j.formula);else for(Re=0;Re<le.length;++Re)V>=le[Re][0].s.r&&V<=le[Re][0].e.r&&X>=le[Re][0].s.c&&X<=le[Re][0].e.c&&(T.F=le[Re][1]);switch((j["number-columns-spanned"]||j["number-rows-spanned"])&&(H=parseInt(j["number-rows-spanned"],10)||0,he=parseInt(j["number-columns-spanned"],10)||0,Z={s:{r:V,c:X},e:{r:V+H-1,c:X+he-1}},ae.push(Z)),j["number-columns-repeated"]&&(ve=parseInt(j["number-columns-repeated"],10)),T.t){case"boolean":T.t="b",T.v=En(j["boolean-value"]);break;case"float":T.t="n",T.v=parseFloat(j.value);break;case"percentage":T.t="n",T.v=parseFloat(j.value);break;case"currency":T.t="n",T.v=parseFloat(j.value);break;case"date":T.t="d",T.v=Nn(j["date-value"]),t.cellDates||(T.t="n",T.v=xa(T.v)),T.z="m/d/yy";break;case"time":T.t="n",T.v=i7(j["time-value"])/86400,t.cellDates&&(T.t="d",T.v=Gx(T.v)),T.z="HH:MM:SS";break;case"number":T.t="n",T.v=parseFloat(j.);break;default:if(T.t==="string"||T.t==="text"||!T.t)T.t="s",j["string-value"]!=null&&(D=Ur(j["string-value"]),L=[]);else throw new Error("Unsupported value type "+T.t)}}else{if(P=!1,T.t==="s"&&(T.v=D||"",L.length&&(T.R=L),P=I==0),ie.Target&&(T.l=ie),Q.length>0&&(T.c=Q,Q=[]),D&&t.cellText!==!1&&(T.w=D),P&&(T.t="z",delete T.v),(!P||t.sheetStubs)&&!(t.sheetRows&&t.sheetRows<=V))for(var Ne=0;Ne<se;++Ne){if(ve=parseInt(j["number-columns-repeated"]||"1",10),t.dense)for(N[V+Ne]||(N[V+Ne]=[]),N[V+Ne][X]=Ne==0?T:An(T);--ve>0;)N[V+Ne][X+ve]=An(T);else for(N[sr({r:V+Ne,c:X})]=T;--ve>0;)N[sr({r:V+Ne,c:X+ve})]=An(T);M.e.c<=X&&(M.e.c=X)}ve=parseInt(j["number-columns-repeated"]||"1",10),X+=ve-1,ve=0,T={},D="",L=[]}ie={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(S[1]==="/"){if((s=a.pop())[0]!==S[3])throw"Bad state: "+s}else S[0].charAt(S[0].length-2)!=="/"&&a.push([S[3],!0]);break;case"annotation":if(S[1]==="/"){if((s=a.pop())[0]!==S[3])throw"Bad state: "+s;B.t=D,L.length&&(B.R=L),B.a=te,Q.push(B)}else S[0].charAt(S[0].length-2)!=="/"&&a.push([S[3],!1]);te="",U=0,D="",I=0,L=[];break;case"creator":S[1]==="/"?te=n.slice(U,S.index):U=S.index+S[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(S[1]==="/"){if((s=a.pop())[0]!==S[3])throw"Bad state: "+s}else S[0].charAt(S[0].length-2)!=="/"&&a.push([S[3],!1]);D="",I=0,L=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(S[1]==="/"){if(z[d.name]=x,(s=a.pop())[0]!==S[3])throw"Bad state: "+s}else S[0].charAt(S[0].length-2)!=="/"&&(x="",d=ir(S[0],!1),a.push([S[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":c=ir(S[0],!1),x+=l3[S[3]][c.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":c=ir(S[0],!1),x+=l3[S[3]][c.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(S[0].slice(-2)==="/>")break;if(S[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":x+=n.slice(f,S.index);break}else f=S.index+S[0].length;break;case"named-range":c=ir(S[0],!1),Le=Ep(c["cell-range-address"]);var Ke={Name:c.name,Ref:Le[0]+"!"+Le[1]};ue&&(Ke.Sheet=E.length),ge.Names.push(Ke);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(S[1]==="/"&&(!j||!j["string-value"])){var ye=IH(n.slice(I,S.index));D=(D.length>0?D+`
`:"")+ye[0]}else ir(S[0],!1),I=S.index+S[0].length;break;case"s":break;case"database-range":if(S[1]==="/")break;try{Le=Ep(ir(S[0])["target-range-address"]),w[Le[0]]["!autofilter"]={ref:Le[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(S[1]!=="/"){if(ie=ir(S[0],!1),!ie.href)break;ie.Target=Ur(ie.href),delete ie.href,ie.Target.charAt(0)=="#"&&ie.Target.indexOf(".")>-1?(Le=Ep(ie.Target.slice(1)),ie.Target="#"+Le[0]+"!"+Le[1]):ie.Target.match(/^\.\.[\\\/]/)&&(ie.Target=ie.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(S[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(t.WTF)throw new Error(S)}}var me={Sheets:w,SheetNames:E,Workbook:ge};return t.bookSheets&&delete me.Sheets,me}function o3(e,r){r=r||{},Js(e,"META-INF/manifest.xml")&&iD(sa(e,"META-INF/manifest.xml"),r);var t=Is(e,"content.xml");if(!t)throw new Error("Missing content.xml in ODS / UOF file");var n=g5(cn(t),r);return Js(e,"meta.xml")&&(n.Props=iN(sa(e,"meta.xml"))),n}function c3(e,r){return g5(e,r)}var DH=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),r="<office:document-styles "+Hd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Zn+r}})(),u3=(function(){var e=function(s){return an(s).replace(/  +/g,function(c){return'<text:s text:c="'+c.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},r=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,n=function(s,c,d){var x=[];x.push('      <table:table table:name="'+an(c.SheetNames[d])+`" table:style-name="ta1">
`);var f=0,g=0,v=ds(s["!ref"]||"A1"),w=s["!merges"]||[],E=0,N=Array.isArray(s);if(s["!cols"])for(g=0;g<=v.e.c;++g)x.push("        <table:table-column"+(s["!cols"][g]?' table:style-name="co'+s["!cols"][g].ods+'"':"")+`></table:table-column>
`);var S="",T=s["!rows"]||[];for(f=0;f<v.s.r;++f)S=T[f]?' table:style-name="ro'+T[f].ods+'"':"",x.push("        <table:table-row"+S+`></table:table-row>
`);for(;f<=v.e.r;++f){for(S=T[f]?' table:style-name="ro'+T[f].ods+'"':"",x.push("        <table:table-row"+S+`>
`),g=0;g<v.s.c;++g)x.push(r);for(;g<=v.e.c;++g){var j=!1,D={},I="";for(E=0;E!=w.length;++E)if(!(w[E].s.c>g)&&!(w[E].s.r>f)&&!(w[E].e.c<g)&&!(w[E].e.r<f)){(w[E].s.c!=g||w[E].s.r!=f)&&(j=!0),D["table:number-columns-spanned"]=w[E].e.c-w[E].s.c+1,D["table:number-rows-spanned"]=w[E].e.r-w[E].s.r+1;break}if(j){x.push(t);continue}var L=sr({r:f,c:g}),V=N?(s[f]||[])[g]:s[L];if(V&&V.f&&(D["table:formula"]=an(eP(V.f)),V.F&&V.F.slice(0,L.length)==L)){var X=ds(V.F);D["table:number-matrix-columns-spanned"]=X.e.c-X.s.c+1,D["table:number-matrix-rows-spanned"]=X.e.r-X.s.r+1}if(!V){x.push(r);continue}switch(V.t){case"b":I=V.v?"TRUE":"FALSE",D["office:value-type"]="boolean",D["office:boolean-value"]=V.v?"true":"false";break;case"n":I=V.w||String(V.v||0),D["office:value-type"]="float",D["office:value"]=V.v||0;break;case"s":case"str":I=V.v==null?"":V.v,D["office:value-type"]="string";break;case"d":I=V.w||Nn(V.v).toISOString(),D["office:value-type"]="date",D["office:date-value"]=Nn(V.v).toISOString(),D["table:style-name"]="ce1";break;default:x.push(r);continue}var M=e(I);if(V.l&&V.l.Target){var W=V.l.Target;W=W.charAt(0)=="#"?"#"+tP(W.slice(1)):W,W.charAt(0)!="#"&&!W.match(/^\w+:/)&&(W="../"+W),M=Rt("text:a",M,{"xlink:href":W.replace(/&/g,"&amp;")})}x.push("          "+Rt("table:table-cell",Rt("text:p",M,{}),D)+`
`)}x.push(`        </table:table-row>
`)}return x.push(`      </table:table>
`),x.join("")},a=function(s,c){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var d=0;c.SheetNames.map(function(f){return c.Sheets[f]}).forEach(function(f){if(f&&f["!cols"]){for(var g=0;g<f["!cols"].length;++g)if(f["!cols"][g]){var v=f["!cols"][g];if(v.width==null&&v.wpx==null&&v.wch==null)continue;To(v),v.ods=d;var w=f["!cols"][g].wpx+"px";s.push('  <style:style style:name="co'+d+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+w+`"/>
`),s.push(`  </style:style>
`),++d}}});var x=0;c.SheetNames.map(function(f){return c.Sheets[f]}).forEach(function(f){if(f&&f["!rows"]){for(var g=0;g<f["!rows"].length;++g)if(f["!rows"][g]){f["!rows"][g].ods=x;var v=f["!rows"][g].hpx+"px";s.push('  <style:style style:name="ro'+x+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+v+`"/>
`),s.push(`  </style:style>
`),++x}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(c,d){var x=[Zn],f=Hd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),g=Hd({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});d.bookType=="fods"?(x.push("<office:document"+f+g+`>
`),x.push(sN().replace(/office:document-meta/g,"office:meta"))):x.push("<office:document-content"+f+`>
`),a(x,c),x.push(`  <office:body>
`),x.push(`    <office:spreadsheet>
`);for(var v=0;v!=c.SheetNames.length;++v)x.push(n(c.Sheets[c.SheetNames[v]],c,v));return x.push(`    </office:spreadsheet>
`),x.push(`  </office:body>
`),d.bookType=="fods"?x.push("</office:document>"):x.push("</office:document-content>"),x.join("")}})();function p5(e,r){if(r.bookType=="fods")return u3(e,r);var t=nb(),n="",a=[],s=[];return n="mimetype",wr(t,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",wr(t,n,u3(e,r)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",wr(t,n,DH(e,r)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",wr(t,n,Zn+sN()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",wr(t,n,cD(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",wr(t,n,lD(a)),t}function Ac(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function y2(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):cn(Oo(e))}function MH(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Rs(zi(e))}function FH(e,r){e:for(var t=0;t<=e.length-r.length;++t){for(var n=0;n<r.length;++n)if(e[t+n]!=r[n])continue e;return!0}return!1}function jo(e){var r=e.reduce(function(a,s){return a+s.length},0),t=new Uint8Array(r),n=0;return e.forEach(function(a){t.set(a,n),n+=a.length}),t}function d3(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function LH(e,r){for(var t=(e[r+15]&127)<<7|e[r+14]>>1,n=e[r+14]&1,a=r+13;a>=r;--a)n=n*256+e[a];return(e[r+15]&128?-n:n)*Math.pow(10,t-6176)}function BH(e,r,t){var n=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,a=t/Math.pow(10,n-6176);e[r+15]|=n>>7,e[r+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[r+s]=a&255;e[r+15]|=t>=0?0:128}function $d(e,r){var t=r?r[0]:0,n=e[t]&127;e:if(e[t++]>=128&&(n|=(e[t]&127)<<7,e[t++]<128||(n|=(e[t]&127)<<14,e[t++]<128)||(n|=(e[t]&127)<<21,e[t++]<128)||(n+=(e[t]&127)*Math.pow(2,28),++t,e[t++]<128)||(n+=(e[t]&127)*Math.pow(2,35),++t,e[t++]<128)||(n+=(e[t]&127)*Math.pow(2,42),++t,e[t++]<128)))break e;return r&&(r[0]=t),n}function rn(e){var r=new Uint8Array(7);r[0]=e&127;var t=1;e:if(e>127){if(r[t-1]|=128,r[t]=e>>7&127,++t,e<=16383||(r[t-1]|=128,r[t]=e>>14&127,++t,e<=2097151)||(r[t-1]|=128,r[t]=e>>21&127,++t,e<=268435455)||(r[t-1]|=128,r[t]=e/256>>>21&127,++t,e<=34359738367)||(r[t-1]|=128,r[t]=e/65536>>>21&127,++t,e<=4398046511103))break e;r[t-1]|=128,r[t]=e/16777216>>>21&127,++t}return r.slice(0,t)}function Gn(e){var r=0,t=e[r]&127;e:if(e[r++]>=128){if(t|=(e[r]&127)<<7,e[r++]<128||(t|=(e[r]&127)<<14,e[r++]<128)||(t|=(e[r]&127)<<21,e[r++]<128))break e;t|=(e[r]&127)<<28}return t}function qr(e){for(var r=[],t=[0];t[0]<e.length;){var n=t[0],a=$d(e,t),s=a&7;a=Math.floor(a/8);var c=0,d;if(a==0)break;switch(s){case 0:{for(var x=t[0];e[t[0]++]>=128;);d=e.slice(x,t[0])}break;case 5:c=4,d=e.slice(t[0],t[0]+c),t[0]+=c;break;case 1:c=8,d=e.slice(t[0],t[0]+c),t[0]+=c;break;case 2:c=$d(e,t),d=e.slice(t[0],t[0]+c),t[0]+=c;break;default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var f={data:d,type:s};r[a]==null?r[a]=[f]:r[a].push(f)}return r}function Ca(e){var r=[];return e.forEach(function(t,n){t.forEach(function(a){a.data&&(r.push(rn(n*8+a.type)),a.type==2&&r.push(rn(a.data.length)),r.push(a.data))})}),jo(r)}function jb(e,r){return e?.map(function(t){return r(t.data)})||[]}function $s(e){for(var r,t=[],n=[0];n[0]<e.length;){var a=$d(e,n),s=qr(e.slice(n[0],n[0]+a));n[0]+=a;var c={id:Gn(s[1][0].data),messages:[]};s[2].forEach(function(d){var x=qr(d.data),f=Gn(x[3][0].data);c.messages.push({meta:x,data:e.slice(n[0],n[0]+f)}),n[0]+=f}),(r=s[3])!=null&&r[0]&&(c.merge=Gn(s[3][0].data)>>>0>0),t.push(c)}return t}function N0(e){var r=[];return e.forEach(function(t){var n=[];n[1]=[{data:rn(t.id),type:0}],n[2]=[],t.merge!=null&&(n[3]=[{data:rn(+!!t.merge),type:0}]);var a=[];t.messages.forEach(function(c){a.push(c.data),c.meta[3]=[{type:0,data:rn(c.data.length)}],n[2].push({data:Ca(c.meta),type:2})});var s=Ca(n);r.push(rn(s.length)),r.push(s),a.forEach(function(c){return r.push(c)})}),jo(r)}function PH(e,r){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var t=[0],n=$d(r,t),a=[];t[0]<r.length;){var s=r[t[0]]&3;if(s==0){var c=r[t[0]++]>>2;if(c<60)++c;else{var d=c-59;c=r[t[0]],d>1&&(c|=r[t[0]+1]<<8),d>2&&(c|=r[t[0]+2]<<16),d>3&&(c|=r[t[0]+3]<<24),c>>>=0,c++,t[0]+=d}a.push(r.slice(t[0],t[0]+c)),t[0]+=c;continue}else{var x=0,f=0;if(s==1?(f=(r[t[0]]>>2&7)+4,x=(r[t[0]++]&224)<<3,x|=r[t[0]++]):(f=(r[t[0]++]>>2)+1,s==2?(x=r[t[0]]|r[t[0]+1]<<8,t[0]+=2):(x=(r[t[0]]|r[t[0]+1]<<8|r[t[0]+2]<<16|r[t[0]+3]<<24)>>>0,t[0]+=4)),a=[jo(a)],x==0)throw new Error("Invalid offset 0");if(x>a[0].length)throw new Error("Invalid offset beyond length");if(f>=x)for(a.push(a[0].slice(-x)),f-=x;f>=a[a.length-1].length;)a.push(a[a.length-1]),f-=a[a.length-1].length;a.push(a[0].slice(-x,-x+f))}}var g=jo(a);if(g.length!=n)throw new Error("Unexpected length: ".concat(g.length," != ").concat(n));return g}function Zs(e){for(var r=[],t=0;t<e.length;){var n=e[t++],a=e[t]|e[t+1]<<8|e[t+2]<<16;t+=3,r.push(PH(n,e.slice(t,t+a))),t+=a}if(t!==e.length)throw new Error("data is not a valid framed stream!");return jo(r)}function A0(e){for(var r=[],t=0;t<e.length;){var n=Math.min(e.length-t,268435455),a=new Uint8Array(4);r.push(a);var s=rn(n),c=s.length;r.push(s),n<=60?(c++,r.push(new Uint8Array([n-1<<2]))):n<=256?(c+=2,r.push(new Uint8Array([240,n-1&255]))):n<=65536?(c+=3,r.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(c+=4,r.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(c+=5,r.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),r.push(e.slice(t,t+n)),c+=n,a[0]=0,a[1]=c&255,a[2]=c>>8&255,a[3]=c>>16&255,t+=n}return jo(r)}function UH(e,r,t,n){var a=Ac(e),s=a.getUint32(4,!0),c=(n>1?12:8)+d3(s&(n>1?3470:398))*4,d=-1,x=-1,f=NaN,g=new Date(2001,0,1);s&512&&(d=a.getUint32(c,!0),c+=4),c+=d3(s&(n>1?12288:4096))*4,s&16&&(x=a.getUint32(c,!0),c+=4),s&32&&(f=a.getFloat64(c,!0),c+=8),s&64&&(g.setTime(g.getTime()+a.getFloat64(c,!0)*1e3),c+=8);var v;switch(e[2]){case 0:break;case 2:v={t:"n",v:f};break;case 3:v={t:"s",v:r[x]};break;case 5:v={t:"d",v:g};break;case 6:v={t:"b",v:f>0};break;case 7:v={t:"n",v:f/86400};break;case 8:v={t:"e",v:0};break;case 9:if(d>-1)v={t:"s",v:t[d]};else if(x>-1)v={t:"s",v:r[x]};else if(!isNaN(f))v={t:"n",v:f};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return v}function zH(e,r,t){var n=Ac(e),a=n.getUint32(8,!0),s=12,c=-1,d=-1,x=NaN,f=NaN,g=new Date(2001,0,1);a&1&&(x=LH(e,s),s+=16),a&2&&(f=n.getFloat64(s,!0),s+=8),a&4&&(g.setTime(g.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(d=n.getUint32(s,!0),s+=4),a&16&&(c=n.getUint32(s,!0),s+=4);var v;switch(e[1]){case 0:break;case 2:v={t:"n",v:x};break;case 3:v={t:"s",v:r[d]};break;case 5:v={t:"d",v:g};break;case 6:v={t:"b",v:f>0};break;case 7:v={t:"n",v:f/86400};break;case 8:v={t:"e",v:0};break;case 9:if(c>-1)v={t:"s",v:t[c]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:v={t:"n",v:x};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return v}function Sp(e,r){var t=new Uint8Array(32),n=Ac(t),a=12,s=0;switch(t[0]=5,e.t){case"n":t[1]=2,BH(t,a,e.v),s|=1,a+=16;break;case"b":t[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(r.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));t[1]=3,n.setUint32(a,r.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),t.slice(0,a)}function Np(e,r){var t=new Uint8Array(32),n=Ac(t),a=12,s=0;switch(t[0]=3,e.t){case"n":t[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":t[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(r.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));t[2]=3,n.setUint32(a,r.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),t.slice(0,a)}function HH(e,r,t){switch(e[0]){case 0:case 1:case 2:case 3:return UH(e,r,t,e[0]);case 5:return zH(e,r,t);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Ma(e){var r=qr(e);return $d(r[1][0].data)}function f3(e,r){var t=qr(r.data),n=Gn(t[1][0].data),a=t[3],s=[];return(a||[]).forEach(function(c){var d=qr(c.data),x=Gn(d[1][0].data)>>>0;switch(n){case 1:s[x]=y2(d[3][0].data);break;case 8:{var f=e[Ma(d[9][0].data)][0],g=qr(f.data),v=e[Ma(g[1][0].data)][0],w=Gn(v.meta[1][0].data);if(w!=2001)throw new Error("2000 unexpected reference to ".concat(w));var E=qr(v.data);s[x]=E[3].map(function(N){return y2(N.data)}).join("")}break}}),s}function GH(e,r){var t,n,a,s,c,d,x,f,g,v,w,E,N,S,T=qr(e),j=Gn(T[1][0].data)>>>0,D=Gn(T[2][0].data)>>>0,I=((n=(t=T[8])==null?void 0:t[0])==null?void 0:n.data)&&Gn(T[8][0].data)>0||!1,L,V;if((s=(a=T[7])==null?void 0:a[0])!=null&&s.data&&r!=0)L=(d=(c=T[7])==null?void 0:c[0])==null?void 0:d.data,V=(f=(x=T[6])==null?void 0:x[0])==null?void 0:f.data;else if((v=(g=T[4])==null?void 0:g[0])!=null&&v.data&&r!=1)L=(E=(w=T[4])==null?void 0:w[0])==null?void 0:E.data,V=(S=(N=T[3])==null?void 0:N[0])==null?void 0:S.data;else throw"NUMBERS Tile missing ".concat(r," cell storage");for(var X=I?4:1,M=Ac(L),W=[],z=0;z<L.length/2;++z){var ae=M.getUint16(z*2,!0);ae<65535&&W.push([z,ae])}if(W.length!=D)throw"Expected ".concat(D," cells, found ").concat(W.length);var Z=[];for(z=0;z<W.length-1;++z)Z[W[z][0]]=V.subarray(W[z][1]*X,W[z+1][1]*X);return W.length>=1&&(Z[W[W.length-1][0]]=V.subarray(W[W.length-1][1]*X)),{R:j,cells:Z}}function VH(e,r){var t,n=qr(r.data),a=(t=n?.[7])!=null&&t[0]?Gn(n[7][0].data)>>>0>0?1:0:-1,s=jb(n[5],function(c){return GH(c,a)});return{nrows:Gn(n[4][0].data)>>>0,data:s.reduce(function(c,d){return c[d.R]||(c[d.R]=[]),d.cells.forEach(function(x,f){if(c[d.R][f])throw new Error("Duplicate cell r=".concat(d.R," c=").concat(f));c[d.R][f]=x}),c},[])}}function WH(e,r,t){var n,a=qr(r.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Gn(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Gn(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));t["!ref"]=br(s);var c=qr(a[4][0].data),d=f3(e,e[Ma(c[4][0].data)][0]),x=(n=c[17])!=null&&n[0]?f3(e,e[Ma(c[17][0].data)][0]):[],f=qr(c[3][0].data),g=0;f[1].forEach(function(v){var w=qr(v.data),E=e[Ma(w[2][0].data)][0],N=Gn(E.meta[1][0].data);if(N!=6002)throw new Error("6001 unexpected reference to ".concat(N));var S=VH(e,E);S.data.forEach(function(T,j){T.forEach(function(D,I){var L=sr({r:g+j,c:I}),V=HH(D,d,x);V&&(t[L]=V)})}),g+=S.nrows})}function qH(e,r){var t=qr(r.data),n={"!ref":"A1"},a=e[Ma(t[2][0].data)],s=Gn(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return WH(e,a[0],n),n}function XH(e,r){var t,n=qr(r.data),a={name:(t=n[1])!=null&&t[0]?y2(n[1][0].data):"",sheets:[]},s=jb(n[2],Ma);return s.forEach(function(c){e[c].forEach(function(d){var x=Gn(d.meta[1][0].data);x==6e3&&a.sheets.push(qH(e,d))})}),a}function KH(e,r){var t=Mb(),n=qr(r.data),a=jb(n[1],Ma);if(a.forEach(function(s){e[s].forEach(function(c){var d=Gn(c.meta[1][0].data);if(d==2){var x=XH(e,c);x.sheets.forEach(function(f,g){Fb(t,f,g==0?x.name:x.name+"_"+g,!0)})}})}),t.SheetNames.length==0)throw new Error("Empty NUMBERS file");return t}function Ap(e){var r,t,n,a,s={},c=[];if(e.FullPaths.forEach(function(x){if(x.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(x){if(x.name.match(/\.iwa$/)){var f;try{f=Zs(x.content)}catch(v){return console.log("?? "+x.content.length+" "+(v.message||v))}var g;try{g=$s(f)}catch(v){return console.log("## "+(v.message||v))}g.forEach(function(v){s[v.id]=v.messages,c.push(v.id)})}}),!c.length)throw new Error("File has no messages");var d=((a=(n=(t=(r=s?.[1])==null?void 0:r[0])==null?void 0:t.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Gn(s[1][0].meta[1][0].data)==1&&s[1][0];if(d||c.forEach(function(x){s[x].forEach(function(f){var g=Gn(f.meta[1][0].data)>>>0;if(g==1)if(!d)d=f;else throw new Error("Document has multiple roots")})}),!d)throw new Error("Cannot find Document root");return KH(s,d)}function YH(e,r,t){var n,a,s,c;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var d=((c=(s=e[8])==null?void 0:s[0])==null?void 0:c.data)&&Gn(e[8][0].data)>0||!1;if(d)throw"Math only works with normal offsets";for(var x=0,f=Ac(e[7][0].data),g=0,v=[],w=Ac(e[4][0].data),E=0,N=[],S=0;S<r.length;++S){if(r[S]==null){f.setUint16(S*2,65535,!0),w.setUint16(S*2,65535);continue}f.setUint16(S*2,g,!0),w.setUint16(S*2,E,!0);var T,j;switch(typeof r[S]){case"string":T=Sp({t:"s",v:r[S]},t),j=Np({t:"s",v:r[S]},t);break;case"number":T=Sp({t:"n",v:r[S]},t),j=Np({t:"n",v:r[S]},t);break;case"boolean":T=Sp({t:"b",v:r[S]},t),j=Np({t:"b",v:r[S]},t);break;default:throw new Error("Unsupported value "+r[S])}v.push(T),g+=T.length,N.push(j),E+=j.length,++x}for(e[2][0].data=rn(x);S<e[7][0].data.length/2;++S)f.setUint16(S*2,65535,!0),w.setUint16(S*2,65535,!0);return e[6][0].data=jo(v),e[3][0].data=jo(N),x}function $H(e,r){if(!r||!r.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ds(t["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(br(n)));var s=Sx(t,{range:n,header:1}),c=["~Sh33tJ5~"];s.forEach(function(te){return te.forEach(function(U){typeof U=="string"&&c.push(U)})});var d={},x=[],f=Yt.read(r.numbers,{type:"base64"});f.FileIndex.map(function(te,U){return[te,f.FullPaths[U]]}).forEach(function(te){var U=te[0],P=te[1];if(U.type==2&&U.name.match(/\.iwa/)){var ue=U.content,Re=Zs(ue),De=$s(Re);De.forEach(function(Ne){x.push(Ne.id),d[Ne.id]={deps:[],location:P,type:Gn(Ne.messages[0].meta[1][0].data)}})}}),x.sort(function(te,U){return te-U});var g=x.filter(function(te){return te>1}).map(function(te){return[te,rn(te)]});f.FileIndex.map(function(te,U){return[te,f.FullPaths[U]]}).forEach(function(te){var U=te[0];if(te[1],!!U.name.match(/\.iwa/)){var P=$s(Zs(U.content));P.forEach(function(ue){ue.messages.forEach(function(Re){g.forEach(function(De){ue.messages.some(function(Ne){return Gn(Ne.meta[1][0].data)!=11006&&FH(Ne.data,De[1])})&&d[De[0]].deps.push(ue.id)})})})}});for(var v=Yt.find(f,d[1].location),w=$s(Zs(v.content)),E,N=0;N<w.length;++N){var S=w[N];S.id==1&&(E=S)}var T=Ma(qr(E.messages[0].data)[1][0].data);for(v=Yt.find(f,d[T].location),w=$s(Zs(v.content)),N=0;N<w.length;++N)S=w[N],S.id==T&&(E=S);for(T=Ma(qr(E.messages[0].data)[2][0].data),v=Yt.find(f,d[T].location),w=$s(Zs(v.content)),N=0;N<w.length;++N)S=w[N],S.id==T&&(E=S);for(T=Ma(qr(E.messages[0].data)[2][0].data),v=Yt.find(f,d[T].location),w=$s(Zs(v.content)),N=0;N<w.length;++N)S=w[N],S.id==T&&(E=S);var j=qr(E.messages[0].data);{j[6][0].data=rn(n.e.r+1),j[7][0].data=rn(n.e.c+1);var D=Ma(j[46][0].data),I=Yt.find(f,d[D].location),L=$s(Zs(I.content));{for(var V=0;V<L.length&&L[V].id!=D;++V);if(L[V].id!=D)throw"Bad ColumnRowUIDMapArchive";var X=qr(L[V].messages[0].data);X[1]=[],X[2]=[],X[3]=[];for(var M=0;M<=n.e.c;++M){var W=[];W[1]=W[2]=[{type:0,data:rn(M+420690)}],X[1].push({type:2,data:Ca(W)}),X[2].push({type:0,data:rn(M)}),X[3].push({type:0,data:rn(M)})}X[4]=[],X[5]=[],X[6]=[];for(var z=0;z<=n.e.r;++z)W=[],W[1]=W[2]=[{type:0,data:rn(z+726270)}],X[4].push({type:2,data:Ca(W)}),X[5].push({type:0,data:rn(z)}),X[6].push({type:0,data:rn(z)});L[V].messages[0].data=Ca(X)}I.content=A0(N0(L)),I.size=I.content.length,delete j[46];var ae=qr(j[4][0].data);{ae[7][0].data=rn(n.e.r+1);var Z=qr(ae[1][0].data),H=Ma(Z[2][0].data);I=Yt.find(f,d[H].location),L=$s(Zs(I.content));{if(L[0].id!=H)throw"Bad HeaderStorageBucket";var he=qr(L[0].messages[0].data);for(z=0;z<s.length;++z){var q=qr(he[2][0].data);q[1][0].data=rn(z),q[4][0].data=rn(s[z].length),he[2][z]={type:he[2][0].type,data:Ca(q)}}L[0].messages[0].data=Ca(he)}I.content=A0(N0(L)),I.size=I.content.length;var se=Ma(ae[2][0].data);I=Yt.find(f,d[se].location),L=$s(Zs(I.content));{if(L[0].id!=se)throw"Bad HeaderStorageBucket";for(he=qr(L[0].messages[0].data),M=0;M<=n.e.c;++M)q=qr(he[2][0].data),q[1][0].data=rn(M),q[4][0].data=rn(n.e.r+1),he[2][M]={type:he[2][0].type,data:Ca(q)};L[0].messages[0].data=Ca(he)}I.content=A0(N0(L)),I.size=I.content.length;var ve=Ma(ae[4][0].data);(function(){for(var te=Yt.find(f,d[ve].location),U=$s(Zs(te.content)),P,ue=0;ue<U.length;++ue){var Re=U[ue];Re.id==ve&&(P=Re)}var De=qr(P.messages[0].data);{De[3]=[];var Ne=[];c.forEach(function(me,Ce){Ne[1]=[{type:0,data:rn(Ce)}],Ne[2]=[{type:0,data:rn(1)}],Ne[3]=[{type:2,data:MH(me)}],De[3].push({type:2,data:Ca(Ne)})})}P.messages[0].data=Ca(De);var Ke=N0(U),ye=A0(Ke);te.content=ye,te.size=te.content.length})();var le=qr(ae[3][0].data);{var ge=le[1][0];delete le[2];var ie=qr(ge.data);{var Le=Ma(ie[2][0].data);(function(){for(var te=Yt.find(f,d[Le].location),U=$s(Zs(te.content)),P,ue=0;ue<U.length;++ue){var Re=U[ue];Re.id==Le&&(P=Re)}var De=qr(P.messages[0].data);{delete De[6],delete le[7];var Ne=new Uint8Array(De[5][0].data);De[5]=[];for(var Ke=0,ye=0;ye<=n.e.r;++ye){var me=qr(Ne);Ke+=YH(me,s[ye],c),me[1][0].data=rn(ye),De[5].push({data:Ca(me),type:2})}De[1]=[{type:0,data:rn(n.e.c+1)}],De[2]=[{type:0,data:rn(n.e.r+1)}],De[3]=[{type:0,data:rn(Ke)}],De[4]=[{type:0,data:rn(n.e.r+1)}]}P.messages[0].data=Ca(De);var Ce=N0(U),G=A0(Ce);te.content=G,te.size=te.content.length})()}ge.data=Ca(ie)}ae[3][0].data=Ca(le)}j[4][0].data=Ca(ae)}E.messages[0].data=Ca(j);var Q=N0(w),B=A0(Q);return v.content=B,v.size=v.content.length,f}function b5(e){return function(t){for(var n=0;n!=e.length;++n){var a=e[n];t[a[0]]===void 0&&(t[a[0]]=a[1]),a[2]==="n"&&(t[a[0]]=Number(t[a[0]]))}}}function Ob(e){b5([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function Rb(e){b5([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function ZH(e){return Tr.WS.indexOf(e)>-1?"sheet":e==Tr.CS?"chart":e==Tr.DS?"dialog":e==Tr.MS?"macro":e&&e.length?e:"sheet"}function JH(e,r){if(!e)return 0;try{e=r.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,ZH(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function QH(e,r,t,n,a,s,c,d,x,f,g,v){try{s[n]=Ed(Is(e,t,!0),r);var w=sa(e,r),E;switch(d){case"sheet":E=wz(w,r,a,x,s[n],f,g,v);break;case"chart":if(E=_z(w,r,a,x,s[n],f,g,v),!E||!E["!drawel"])break;var N=md(E["!drawel"].Target,r),S=Vd(N),T=oL(Is(e,N,!0),Ed(Is(e,S,!0),N)),j=md(T,N),D=Vd(j);E=YU(Is(e,j,!0),j,x,Ed(Is(e,D,!0),j),f,E);break;case"macro":E=Ez(w,r,a,x,s[n],f,g,v);break;case"dialog":E=kz(w,r,a,x,s[n],f,g,v);break;default:throw new Error("Unrecognized sheet type "+d)}c[n]=E;var I=[];s&&s[n]&&Vn(s[n]).forEach(function(L){var V="";if(s[n][L].Type==Tr.CMNT){V=md(s[n][L].Target,r);var X=Tz(sa(e,V,!0),V,x);if(!X||!X.length)return;Z4(E,X,!1)}s[n][L].Type==Tr.TCMNT&&(V=md(s[n][L].Target,r),I=I.concat(uL(sa(e,V,!0),x)))}),I&&I.length&&Z4(E,I,!0,x.people||[])}catch(L){if(x.WTF)throw L}}function Ks(e){return e.charAt(0)=="/"?e.slice(1):e}function eG(e,r){if(su(),r=r||{},Ob(r),Js(e,"META-INF/manifest.xml")||Js(e,"objectdata.xml"))return o3(e,r);if(Js(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Ap<"u"){if(e.FileIndex)return Ap(e);var t=Yt.utils.cfb_new();return b4(e).forEach(function(q){wr(t,q,d7(e,q))}),Ap(t)}throw new Error("Unsupported NUMBERS file")}if(!Js(e,"[Content_Types].xml"))throw Js(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Js(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=b4(e),a=aD(Is(e,"[Content_Types].xml")),s=!1,c,d;if(a.workbooks.length===0&&(d="xl/workbook.xml",sa(e,d,!0)&&a.workbooks.push(d)),a.workbooks.length===0){if(d="xl/workbook.bin",!sa(e,d,!0))throw new Error("Could not find workbook");a.workbooks.push(d),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var x={},f={};if(!r.bookSheets&&!r.bookProps){if(kd=[],a.sst)try{kd=Az(sa(e,Ks(a.sst)),a.sst,r)}catch(q){if(r.WTF)throw q}r.cellStyles&&a.themes.length&&(x=Nz(Is(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],r)),a.style&&(f=Sz(sa(e,Ks(a.style)),a.style,x,r))}a.links.map(function(q){try{var se=Ed(Is(e,Vd(Ks(q))),q);return jz(sa(e,Ks(q)),se,q,r)}catch{}});var g=yz(sa(e,Ks(a.workbooks[0])),a.workbooks[0],r),v={},w="";a.coreprops.length&&(w=sa(e,Ks(a.coreprops[0]),!0),w&&(v=iN(w)),a.extprops.length!==0&&(w=sa(e,Ks(a.extprops[0]),!0),w&&dD(w,v,r)));var E={};(!r.bookSheets||r.bookProps)&&a.custprops.length!==0&&(w=Is(e,Ks(a.custprops[0]),!0),w&&(E=hD(w,r)));var N={};if((r.bookSheets||r.bookProps)&&(g.Sheets?c=g.Sheets.map(function(se){return se.name}):v.Worksheets&&v.SheetNames.length>0&&(c=v.SheetNames),r.bookProps&&(N.Props=v,N.Custprops=E),r.bookSheets&&typeof c<"u"&&(N.SheetNames=c),r.bookSheets?N.SheetNames:r.bookProps))return N;c={};var S={};r.bookDeps&&a.calcchain&&(S=Cz(sa(e,Ks(a.calcchain)),a.calcchain));var T=0,j={},D,I;{var L=g.Sheets;v.Worksheets=L.length,v.SheetNames=[];for(var V=0;V!=L.length;++V)v.SheetNames[V]=L[V].name}var X=s?"bin":"xml",M=a.workbooks[0].lastIndexOf("/"),W=(a.workbooks[0].slice(0,M+1)+"_rels/"+a.workbooks[0].slice(M+1)+".rels").replace(/^\//,"");Js(e,W)||(W="xl/_rels/workbook."+X+".rels");var z=Ed(Is(e,W,!0),W.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(r.xlmeta=Oz(sa(e,Ks(a.metadata[0])),a.metadata[0],r)),(a.people||[]).length>=1&&(r.people=fL(sa(e,Ks(a.people[0])),r)),z&&(z=JH(z,g.Sheets));var ae=sa(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(T=0;T!=v.Worksheets;++T){var Z="sheet";if(z&&z[T]?(D="xl/"+z[T][1].replace(/[\/]?xl\//,""),Js(e,D)||(D=z[T][1]),Js(e,D)||(D=W.replace(/_rels\/.*$/,"")+z[T][1]),Z=z[T][2]):(D="xl/worksheets/sheet"+(T+1-ae)+"."+X,D=D.replace(/sheet0\./,"sheet.")),I=D.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),r&&r.sheets!=null)switch(typeof r.sheets){case"number":if(T!=r.sheets)continue e;break;case"string":if(v.SheetNames[T].toLowerCase()!=r.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(r.sheets)){for(var H=!1,he=0;he!=r.sheets.length;++he)typeof r.sheets[he]=="number"&&r.sheets[he]==T&&(H=1),typeof r.sheets[he]=="string"&&r.sheets[he].toLowerCase()==v.SheetNames[T].toLowerCase()&&(H=1);if(!H)continue e}}QH(e,D,I,v.SheetNames[T],T,j,c,Z,r,g,x,f)}return N={Directory:a,Workbook:g,Props:v,Custprops:E,Deps:S,Sheets:c,SheetNames:v.SheetNames,Strings:kd,Styles:f,Themes:x,SSF:An(nr)},r&&r.bookFiles&&(e.files?(N.keys=n,N.files=e.files):(N.keys=[],N.files={},e.FullPaths.forEach(function(q,se){q=q.replace(/^Root Entry[\/]/,""),N.keys.push(q),N.files[q]=e.FileIndex[se]}))),r&&r.bookVBA&&(a.vba.length>0?N.vbaraw=sa(e,Ks(a.vba[0]),!0):a.defaults&&a.defaults.bin===yL&&(N.vbaraw=sa(e,"xl/vbaProject.bin",!0))),N}function tG(e,r){var t=r||{},n="Workbook",a=Yt.find(e,n);try{if(n="/!DataSpaces/Version",a=Yt.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(OM(a.content),n="/!DataSpaces/DataSpaceMap",a=Yt.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=IM(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Yt.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var c=DM(a.content);if(c.length!=1||c[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Yt.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);FM(a.content)}catch{}if(n="/EncryptionInfo",a=Yt.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var d=LM(a.content);if(n="/EncryptedPackage",a=Yt.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(d[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(d[1],a.content,t.password||"",t);if(d[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(d[1],a.content,t.password||"",t);throw new Error("File is password-protected")}function rG(e,r){return r.bookType=="ods"?p5(e,r):r.bookType=="numbers"?$H(e,r):r.bookType=="xlsb"?nG(e,r):aG(e,r)}function nG(e,r){P0=1024,e&&!e.SSF&&(e.SSF=An(nr)),e&&e.SSF&&(su(),Ux(e.SSF),r.revssf=Hx(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.rels={},r.wbrels={},r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Sd?r.revStrings=new Map:(r.revStrings={},r.revStrings.foo=[],delete r.revStrings.foo);var t=r.bookType=="xlsb"?"bin":"xml",n=WN.indexOf(r.bookType)>-1,a=pb();Rb(r=r||{});var s=nb(),c="",d=0;if(r.cellXfs=[],Io(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),c="docProps/core.xml",wr(s,c,lN(e.Props,r)),a.coreprops.push(c),nn(r.rels,2,c,Tr.CORE_PROPS),c="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var x=[],f=0;f<e.SheetNames.length;++f)(e.Workbook.Sheets[f]||{}).Hidden!=2&&x.push(e.SheetNames[f]);e.Props.SheetNames=x}for(e.Props.Worksheets=e.Props.SheetNames.length,wr(s,c,uN(e.Props)),a.extprops.push(c),nn(r.rels,3,c,Tr.EXT_PROPS),e.Custprops!==e.Props&&Vn(e.Custprops||{}).length>0&&(c="docProps/custom.xml",wr(s,c,dN(e.Custprops)),a.custprops.push(c),nn(r.rels,4,c,Tr.CUST_PROPS)),d=1;d<=e.SheetNames.length;++d){var g={"!id":{}},v=e.Sheets[e.SheetNames[d-1]],w=(v||{})["!type"]||"sheet";if(c="xl/worksheets/sheet"+d+"."+t,wr(s,c,Iz(d-1,c,r,e,g)),a.sheets.push(c),nn(r.wbrels,-1,"worksheets/sheet"+d+"."+t,Tr.WS[0]),v){var E=v["!comments"],N=!1,S="";E&&E.length>0&&(S="xl/comments"+d+"."+t,wr(s,S,Fz(E,S)),a.comments.push(S),nn(g,-1,"../comments"+d+"."+t,Tr.CMNT),N=!0),v["!legacy"]&&N&&wr(s,"xl/drawings/vmlDrawing"+d+".vml",GN(d,v["!comments"])),delete v["!comments"],delete v["!legacy"]}g["!id"].rId1&&wr(s,Vd(c),H0(g))}return r.Strings!=null&&r.Strings.length>0&&(c="xl/sharedStrings."+t,wr(s,c,Mz(r.Strings,c,r)),a.strs.push(c),nn(r.wbrels,-1,"sharedStrings."+t,Tr.SST)),c="xl/workbook."+t,wr(s,c,Rz(e,c)),a.workbooks.push(c),nn(r.rels,1,c,Tr.WB),c="xl/theme/theme1.xml",wr(s,c,Eb(e.Themes,r)),a.themes.push(c),nn(r.wbrels,-1,"theme/theme1.xml",Tr.THEME),c="xl/styles."+t,wr(s,c,Dz(e,c,r)),a.styles.push(c),nn(r.wbrels,-1,"styles."+t,Tr.STY),e.vbaraw&&n&&(c="xl/vbaProject.bin",wr(s,c,e.vbaraw),a.vba.push(c),nn(r.wbrels,-1,"vbaProject.bin",Tr.VBA)),c="xl/metadata."+t,wr(s,c,Lz(c)),a.metadata.push(c),nn(r.wbrels,-1,"metadata."+t,Tr.XLMETA),wr(s,"[Content_Types].xml",aN(a,r)),wr(s,"_rels/.rels",H0(r.rels)),wr(s,"xl/_rels/workbook."+t+".rels",H0(r.wbrels)),delete r.revssf,delete r.ssf,s}function aG(e,r){P0=1024,e&&!e.SSF&&(e.SSF=An(nr)),e&&e.SSF&&(su(),Ux(e.SSF),r.revssf=Hx(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.rels={},r.wbrels={},r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Sd?r.revStrings=new Map:(r.revStrings={},r.revStrings.foo=[],delete r.revStrings.foo);var t="xml",n=WN.indexOf(r.bookType)>-1,a=pb();Rb(r=r||{});var s=nb(),c="",d=0;if(r.cellXfs=[],Io(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),c="docProps/core.xml",wr(s,c,lN(e.Props,r)),a.coreprops.push(c),nn(r.rels,2,c,Tr.CORE_PROPS),c="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var x=[],f=0;f<e.SheetNames.length;++f)(e.Workbook.Sheets[f]||{}).Hidden!=2&&x.push(e.SheetNames[f]);e.Props.SheetNames=x}e.Props.Worksheets=e.Props.SheetNames.length,wr(s,c,uN(e.Props)),a.extprops.push(c),nn(r.rels,3,c,Tr.EXT_PROPS),e.Custprops!==e.Props&&Vn(e.Custprops||{}).length>0&&(c="docProps/custom.xml",wr(s,c,dN(e.Custprops)),a.custprops.push(c),nn(r.rels,4,c,Tr.CUST_PROPS));var g=["SheetJ5"];for(r.tcid=0,d=1;d<=e.SheetNames.length;++d){var v={"!id":{}},w=e.Sheets[e.SheetNames[d-1]],E=(w||{})["!type"]||"sheet";if(c="xl/worksheets/sheet"+d+"."+t,wr(s,c,r5(d-1,r,e,v)),a.sheets.push(c),nn(r.wbrels,-1,"worksheets/sheet"+d+"."+t,Tr.WS[0]),w){var N=w["!comments"],S=!1,T="";if(N&&N.length>0){var j=!1;N.forEach(function(D){D[1].forEach(function(I){I.T==!0&&(j=!0)})}),j&&(T="xl/threadedComments/threadedComment"+d+"."+t,wr(s,T,dL(N,g,r)),a.threadedcomments.push(T),nn(v,-1,"../threadedComments/threadedComment"+d+"."+t,Tr.TCMNT)),T="xl/comments"+d+"."+t,wr(s,T,VN(N)),a.comments.push(T),nn(v,-1,"../comments"+d+"."+t,Tr.CMNT),S=!0}w["!legacy"]&&S&&wr(s,"xl/drawings/vmlDrawing"+d+".vml",GN(d,w["!comments"])),delete w["!comments"],delete w["!legacy"]}v["!id"].rId1&&wr(s,Vd(c),H0(v))}return r.Strings!=null&&r.Strings.length>0&&(c="xl/sharedStrings."+t,wr(s,c,ON(r.Strings,r)),a.strs.push(c),nn(r.wbrels,-1,"sharedStrings."+t,Tr.SST)),c="xl/workbook."+t,wr(s,c,l5(e)),a.workbooks.push(c),nn(r.rels,1,c,Tr.WB),c="xl/theme/theme1.xml",wr(s,c,Eb(e.Themes,r)),a.themes.push(c),nn(r.wbrels,-1,"theme/theme1.xml",Tr.THEME),c="xl/styles."+t,wr(s,c,PN(e,r)),a.styles.push(c),nn(r.wbrels,-1,"styles."+t,Tr.STY),e.vbaraw&&n&&(c="xl/vbaProject.bin",wr(s,c,e.vbaraw),a.vba.push(c),nn(r.wbrels,-1,"vbaProject.bin",Tr.VBA)),c="xl/metadata."+t,wr(s,c,HN()),a.metadata.push(c),nn(r.wbrels,-1,"metadata."+t,Tr.XLMETA),g.length>1&&(c="xl/persons/person.xml",wr(s,c,hL(g)),a.people.push(c),nn(r.wbrels,-1,"persons/person.xml",Tr.PEOPLE)),wr(s,"[Content_Types].xml",aN(a,r)),wr(s,"_rels/.rels",H0(r.rels)),wr(s,"xl/_rels/workbook."+t+".rels",H0(r.wbrels)),delete r.revssf,delete r.ssf,s}function Ib(e,r){var t="";switch((r||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":t=Ms(e.slice(0,12));break;case"binary":t=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(r&&r.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function sG(e,r){return Yt.find(e,"EncryptedPackage")?tG(e,r):d5(e,r)}function iG(e,r){var t,n=e,a=r||{};return a.type||(a.type=Ar&&Buffer.isBuffer(e)?"buffer":"base64"),t=IS(n,a),eG(t,a)}function v5(e,r){var t=0;e:for(;t<e.length;)switch(e.charCodeAt(t)){case 10:case 13:case 32:++t;break;case 60:return b2(e.slice(t),r);default:break e}return K0.to_workbook(e,r)}function lG(e,r){var t="",n=Ib(e,r);switch(r.type){case"base64":t=Ms(e);break;case"binary":t=e;break;case"buffer":t=e.toString("binary");break;case"array":t=Ec(e);break;default:throw new Error("Unrecognized type "+r.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(t=cn(t)),r.type="binary",v5(t,r)}function oG(e,r){var t=e;return r.type=="base64"&&(t=Ms(t)),t=Bd.utils.decode(1200,t.slice(2),"str"),r.type="binary",v5(t,r)}function cG(e){return e.match(/[^\x00-\x7F]/)?zi(e):e}function Tp(e,r,t,n){return n?(t.type="string",K0.to_workbook(e,t)):K0.to_workbook(r,t)}function w2(e,r){J2();var t=r||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return w2(new Uint8Array(e),(t=An(t),t.type="array",t));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!t.type&&(t.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),V0={},t.dateNF&&(V0.dateNF=t.dateNF),t.type||(t.type=Ar&&Buffer.isBuffer(e)?"buffer":"base64"),t.type=="file"&&(t.type=Ar?"buffer":"binary",n=n7(e),typeof Uint8Array<"u"&&!Ar&&(t.type="array")),t.type=="string"&&(s=!0,t.type="binary",t.codepage=65001,n=cG(e)),t.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var c=new ArrayBuffer(3),d=new Uint8Array(c);if(d.foo="bar",!d.foo)return t=An(t),t.type="array",w2(Q2(n),t)}switch((a=Ib(n,t))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return sG(Yt.read(n,t),t);break;case 9:if(a[1]<=8)return d5(n,t);break;case 60:return b2(n,t);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return xM(n,t);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return CN.to_workbook(n,t);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?iG(n,t):Tp(e,n,t,s);case 239:return a[3]===60?b2(n,t):Tp(e,n,t,s);case 255:if(a[1]===254)return oG(n,t);if(a[1]===0&&a[2]===2&&a[3]===0)return bc.to_workbook(n,t);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return bc.to_workbook(n,t);break;case 3:case 131:case 139:case 140:return p2.to_workbook(n,t);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return FN.to_workbook(n,t);break;case 10:case 13:case 32:return lG(n,t);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return hM.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?p2.to_workbook(n,t):Tp(e,n,t,s)}function y5(e,r){switch(r.type){case"base64":case"binary":break;case"buffer":case"array":r.type="";break;case"file":return xf(r.file,Yt.write(e,{type:Ar?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+r.bookType+"' files");default:throw new Error("Unrecognized type "+r.type)}return Yt.write(e,r)}function uG(e,r){var t=An(r||{}),n=rG(e,t);return dG(n,t)}function dG(e,r){var t={},n=Ar?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(r.compression&&(t.compression="DEFLATE"),r.password)t.type=n;else switch(r.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+r.bookType+"' files");case"buffer":case"file":t.type=n;break;default:throw new Error("Unrecognized type "+r.type)}var a=e.FullPaths?Yt.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!r.compression}):e.generate(t);if(typeof Deno<"u"&&typeof a=="string"){if(r.type=="binary"||r.type=="base64")return a;a=new Uint8Array(Px(a))}return r.password&&typeof encrypt_agile<"u"?y5(encrypt_agile(a,r.password),r):r.type==="file"?xf(r.file,a):r.type=="string"?cn(a):a}function fG(e,r){var t=r||{},n=cH(e,t);return y5(n,t)}function Pi(e,r,t){t||(t="");var n=t+e;switch(r.type){case"base64":return Pd(zi(n));case"binary":return zi(n);case"string":return e;case"file":return xf(r.file,n,"utf8");case"buffer":return Ar?Ol(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Pi(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+r.type)}function hG(e,r){switch(r.type){case"base64":return Pd(e);case"binary":return e;case"string":return e;case"file":return xf(r.file,e,"binary");case"buffer":return Ar?Ol(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+r.type)}function c1(e,r){switch(r.type){case"string":case"base64":case"binary":for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return r.type=="base64"?Pd(t):r.type=="string"?cn(t):t;case"file":return xf(r.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+r.type)}}function w5(e,r){J2(),sz(e);var t=An(r||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var n=w5(e,t);return t.type="array",Px(n)}var a=0;if(t.sheet&&(typeof t.sheet=="number"?a=t.sheet:a=e.SheetNames.indexOf(t.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return Pi(rH(e,t),t);case"slk":case"sylk":return Pi(TN.from_sheet(e.Sheets[e.SheetNames[a]],t),t);case"htm":case"html":return Pi(h5(e.Sheets[e.SheetNames[a]],t),t);case"txt":return hG(_5(e.Sheets[e.SheetNames[a]],t),t);case"csv":return Pi(Db(e.Sheets[e.SheetNames[a]],t),t,"\uFEFF");case"dif":return Pi(CN.from_sheet(e.Sheets[e.SheetNames[a]],t),t);case"dbf":return c1(p2.from_sheet(e.Sheets[e.SheetNames[a]],t),t);case"prn":return Pi(K0.from_sheet(e.Sheets[e.SheetNames[a]],t),t);case"rtf":return Pi(FN.from_sheet(e.Sheets[e.SheetNames[a]],t),t);case"eth":return Pi(jN.from_sheet(e.Sheets[e.SheetNames[a]],t),t);case"fods":return Pi(p5(e,t),t);case"wk1":return c1(bc.sheet_to_wk1(e.Sheets[e.SheetNames[a]],t),t);case"wk3":return c1(bc.book_to_wk3(e,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),c1(f5(e,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),fG(e,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return uG(e,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function xG(e){if(!e.bookType){var r={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType=r[e.bookType]||e.bookType}}function mG(e,r,t){var n={};return n.type="file",n.file=r,xG(n),w5(e,n)}function gG(e,r,t,n,a,s,c,d){var x=$n(t),f=d.defval,g=d.raw||!Object.prototype.hasOwnProperty.call(d,"raw"),v=!0,w=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(w,"__rowNum__",{value:t,enumerable:!1})}catch{w.__rowNum__=t}else w.__rowNum__=t;if(!c||e[t])for(var E=r.s.c;E<=r.e.c;++E){var N=c?e[t][E]:e[n[E]+x];if(N===void 0||N.t===void 0){if(f===void 0)continue;s[E]!=null&&(w[s[E]]=f);continue}var S=N.v;switch(N.t){case"z":if(S==null)break;continue;case"e":S=S==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+N.t)}if(s[E]!=null){if(S==null)if(N.t=="e"&&S===null)w[s[E]]=null;else if(f!==void 0)w[s[E]]=f;else if(g&&S===null)w[s[E]]=null;else continue;else w[s[E]]=g&&(N.t!=="n"||N.t==="n"&&d.rawNumbers!==!1)?S:Cl(N,S,d);S!=null&&(v=!1)}}return{row:w,isempty:v}}function Sx(e,r){if(e==null||e["!ref"]==null)return[];var t={t:"n",v:0},n=0,a=1,s=[],c=0,d="",x={s:{r:0,c:0},e:{r:0,c:0}},f=r||{},g=f.range!=null?f.range:e["!ref"];switch(f.header===1?n=1:f.header==="A"?n=2:Array.isArray(f.header)?n=3:f.header==null&&(n=0),typeof g){case"string":x=zr(g);break;case"number":x=zr(e["!ref"]),x.s.r=g;break;default:x=g}n>0&&(a=0);var v=$n(x.s.r),w=[],E=[],N=0,S=0,T=Array.isArray(e),j=x.s.r,D=0,I={};T&&!e[j]&&(e[j]=[]);var L=f.skipHidden&&e["!cols"]||[],V=f.skipHidden&&e["!rows"]||[];for(D=x.s.c;D<=x.e.c;++D)if(!(L[D]||{}).hidden)switch(w[D]=Dn(D),t=T?e[j][D]:e[w[D]+v],n){case 1:s[D]=D-x.s.c;break;case 2:s[D]=w[D];break;case 3:s[D]=f.header[D-x.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),d=c=Cl(t,null,f),S=I[c]||0,!S)I[c]=1;else{do d=c+"_"+S++;while(I[d]);I[c]=S,I[d]=1}s[D]=d}for(j=x.s.r+a;j<=x.e.r;++j)if(!(V[j]||{}).hidden){var X=gG(e,x,j,w,n,s,T,f);(X.isempty===!1||(n===1?f.blankrows!==!1:f.blankrows))&&(E[N++]=X.row)}return E.length=N,E}var h3=/"/g;function pG(e,r,t,n,a,s,c,d){for(var x=!0,f=[],g="",v=$n(t),w=r.s.c;w<=r.e.c;++w)if(n[w]){var E=d.dense?(e[t]||[])[w]:e[n[w]+v];if(E==null)g="";else if(E.v!=null){x=!1,g=""+(d.rawNumbers&&E.t=="n"?E.v:Cl(E,null,d));for(var N=0,S=0;N!==g.length;++N)if((S=g.charCodeAt(N))===a||S===s||S===34||d.forceQuotes){g='"'+g.replace(h3,'""')+'"';break}g=="ID"&&(g='"ID"')}else E.f!=null&&!E.F?(x=!1,g="="+E.f,g.indexOf(",")>=0&&(g='"'+g.replace(h3,'""')+'"')):g="";f.push(g)}return d.blankrows===!1&&x?null:f.join(c)}function Db(e,r){var t=[],n=r??{};if(e==null||e["!ref"]==null)return"";var a=zr(e["!ref"]),s=n.FS!==void 0?n.FS:",",c=s.charCodeAt(0),d=n.RS!==void 0?n.RS:`
`,x=d.charCodeAt(0),f=new RegExp((s=="|"?"\\|":s)+"+$"),g="",v=[];n.dense=Array.isArray(e);for(var w=n.skipHidden&&e["!cols"]||[],E=n.skipHidden&&e["!rows"]||[],N=a.s.c;N<=a.e.c;++N)(w[N]||{}).hidden||(v[N]=Dn(N));for(var S=0,T=a.s.r;T<=a.e.r;++T)(E[T]||{}).hidden||(g=pG(e,a,T,v,c,x,s,n),g!=null&&(n.strip&&(g=g.replace(f,"")),(g||n.blankrows!==!1)&&t.push((S++?d:"")+g)));return delete n.dense,t.join("")}function _5(e,r){r||(r={}),r.FS="	",r.RS=`
`;var t=Db(e,r);return t}function bG(e){var r="",t,n="";if(e==null||e["!ref"]==null)return[];var a=zr(e["!ref"]),s="",c=[],d,x=[],f=Array.isArray(e);for(d=a.s.c;d<=a.e.c;++d)c[d]=Dn(d);for(var g=a.s.r;g<=a.e.r;++g)for(s=$n(g),d=a.s.c;d<=a.e.c;++d)if(r=c[d]+s,t=f?(e[g]||[])[d]:e[r],n="",t!==void 0){if(t.F!=null){if(r=t.F,!t.f)continue;n=t.f,r.indexOf(":")==-1&&(r=r+":"+r)}if(t.f!=null)n=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)n=""+t.v;else if(t.t=="b")n=t.v?"TRUE":"FALSE";else if(t.w!==void 0)n="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?n="'"+t.v:n=""+t.v}}x[x.length]=r+"="+n}return x}function E5(e,r,t){var n=t||{},a=+!n.skipHeader,s=e||{},c=0,d=0;if(s&&n.origin!=null)if(typeof n.origin=="number")c=n.origin;else{var x=typeof n.origin=="string"?Mn(n.origin):n.origin;c=x.r,d=x.c}var f,g={s:{c:0,r:0},e:{c:d,r:c+r.length-1+a}};if(s["!ref"]){var v=zr(s["!ref"]);g.e.c=Math.max(g.e.c,v.e.c),g.e.r=Math.max(g.e.r,v.e.r),c==-1&&(c=v.e.r+1,g.e.r=c+r.length-1+a)}else c==-1&&(c=0,g.e.r=r.length-1+a);var w=n.header||[],E=0;r.forEach(function(S,T){Vn(S).forEach(function(j){(E=w.indexOf(j))==-1&&(w[E=w.length]=j);var D=S[j],I="z",L="",V=sr({c:d+E,r:c+T+a});f=Zd(s,V),D&&typeof D=="object"&&!(D instanceof Date)?s[V]=D:(typeof D=="number"?I="n":typeof D=="boolean"?I="b":typeof D=="string"?I="s":D instanceof Date?(I="d",n.cellDates||(I="n",D=xa(D)),L=n.dateNF||nr[14]):D===null&&n.nullError&&(I="e",D=0),f?(f.t=I,f.v=D,delete f.w,delete f.R,L&&(f.z=L)):s[V]=f={t:I,v:D},L&&(f.z=L))})}),g.e.c=Math.max(g.e.c,d+w.length-1);var N=$n(c);if(a)for(E=0;E<w.length;++E)s[Dn(E+d)+N]={t:"s",v:w[E]};return s["!ref"]=br(g),s}function vG(e,r){return E5(null,e,r)}function Zd(e,r,t){if(typeof r=="string"){if(Array.isArray(e)){var n=Mn(r);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[r]||(e[r]={t:"z"})}return typeof r!="number"?Zd(e,sr(r)):Zd(e,sr({r,c:t||0}))}function yG(e,r){if(typeof r=="number"){if(r>=0&&e.SheetNames.length>r)return r;throw new Error("Cannot find sheet # "+r)}else if(typeof r=="string"){var t=e.SheetNames.indexOf(r);if(t>-1)return t;throw new Error("Cannot find sheet name |"+r+"|")}else throw new Error("Cannot find sheet |"+r+"|")}function Mb(){return{SheetNames:[],Sheets:{}}}function Fb(e,r,t,n){var a=1;if(!t)for(;a<=65535&&e.SheetNames.indexOf(t="Sheet"+a)!=-1;++a,t=void 0);if(!t||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var c=s&&s[1]||t;for(++a;a<=65535&&e.SheetNames.indexOf(t=c+a)!=-1;++a);}if(i5(t),e.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return e.SheetNames.push(t),e.Sheets[t]=r,t}function wG(e,r,t){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=yG(e,r);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}e.Workbook.Sheets[n].Hidden=t}function _G(e,r){return e.z=r,e}function k5(e,r,t){return r?(e.l={Target:r},t&&(e.l.Tooltip=t)):delete e.l,e}function EG(e,r,t){return k5(e,"#"+r,t)}function kG(e,r,t){e.c||(e.c=[]),e.c.push({t:r,a:t||"SheetJS"})}function SG(e,r,t,n){for(var a=typeof r!="string"?r:zr(r),s=typeof r=="string"?r:br(r),c=a.s.r;c<=a.e.r;++c)for(var d=a.s.c;d<=a.e.c;++d){var x=Zd(e,c,d);x.t="n",x.F=s,delete x.v,c==a.s.r&&d==a.s.c&&(x.f=t,n&&(x.D=!0))}return e}var rx={encode_col:Dn,encode_row:$n,encode_cell:sr,encode_range:br,decode_col:db,decode_row:ub,split_cell:M7,decode_cell:Mn,decode_range:ds,format_cell:Cl,sheet_add_aoa:ZS,sheet_add_json:E5,sheet_add_dom:x5,aoa_to_sheet:iu,json_to_sheet:vG,table_to_sheet:m5,table_to_book:OH,sheet_to_csv:Db,sheet_to_txt:_5,sheet_to_json:Sx,sheet_to_html:h5,sheet_to_formulae:bG,sheet_to_row_object_array:Sx,sheet_get_cell:Zd,book_new:Mb,book_append_sheet:Fb,book_set_sheet_visibility:wG,cell_set_number_format:_G,cell_set_hyperlink:k5,cell_set_internal_link:EG,cell_add_comment:kG,sheet_set_array_formula:SG,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function NG({isOpen:e,onClose:r,type:t="new",onSuccess:n}){const[a,s]=J.useState("stock_code"),[c,d]=J.useState(!1),[x,f]=J.useState(0),[g,v]=J.useState(""),[w,E]=J.useState(!1),[N,S]=J.useState({name:!0,price:!0,barcode:!0,group:!0,brand:!0}),T=J.useRef(null);if(!e)return null;const j=t==="new"?"Excel le Yeni rn Ykle":"Excel le rn Gncelle",D=t==="new"?"Excel dosyanzdan yeni rnler ekleyin":"Mevcut rnlerinizi Excel ile gncelleyin",I=async X=>{const M=X.target.files?.[0]||X.dataTransfer?.files?.[0];if(M){d(!0);try{const W=await M.arrayBuffer(),z=w2(W),ae=z.Sheets[z.SheetNames[0]],H=rx.sheet_to_json(ae,{header:1}).slice(1);let he=0,q=[],se=[];const{data:{products:ve}}=await Sn.getAll(),le=H.length;for(let ie=0;ie<le;ie++){const Le=H[ie],Q=Math.round((ie+1)/le*100);f(Q),v(`${ie+1} / ${le} rn leniyor...`),ie%5===0&&await new Promise(U=>setTimeout(U,10));const B=Le[0]?.toString().trim();if(!B)continue;const te={name:Le[1],price:Le[2],barcode:Le[3]?.toString().trim(),group:Le[4],brand:Le[5]};if(t==="new"){if(ve.find(ue=>ue.stock_code===B)){se.push(`Stok Kodu: ${B}`);continue}if(te.barcode&&ve.find(Re=>Re.barcode===te.barcode)){se.push(`Barkod: ${te.barcode} (${B})`);continue}const P={stock_code:B,name:te.name||"Adsz",price:parseFloat(te.price)||0,barcode:te.barcode,group:te.group,brand:te.brand,stock:0};try{await Sn.add(P),he++,ve.push(P)}catch(ue){q.push(ue.message)}}else{const U=ve.find(ue=>a==="stock_code"?ue.stock_code===B:ue.barcode===B);if(!U)continue;const P={};N.name&&te.name&&(P.name=te.name),N.price&&te.price&&(P.price=parseFloat(te.price)),N.group&&te.group&&(P.group=te.group),N.brand&&te.brand&&(P.brand=te.brand),N.barcode&&te.barcode&&(P.barcode=te.barcode);try{await Sn.update(U.stock_code,P),he++}catch(ue){q.push(ue.message)}}}let ge=`lem Tamamland.
Baarl: ${he}`;if(se.length>0){ge+=`

 ${se.length} rn kaydedilemedi (zaten kaytl):
`;const ie=se.slice(0,5);ge+=ie.map(Le=>` ${Le}`).join(`
`),se.length>5&&(ge+=`
... ve ${se.length-5} rn daha`)}alert(ge),n(),r()}catch(W){alert("Dosya okuma hatas: "+W.message)}finally{d(!1),X.target?.value&&(X.target.value=null)}}},L=X=>{X.preventDefault(),X.stopPropagation(),X.type==="dragenter"||X.type==="dragover"?E(!0):X.type==="dragleave"&&E(!1)},V=X=>{X.preventDefault(),X.stopPropagation(),E(!1),I(X)};return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[l.jsx("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 px-8 py-6",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),j]}),l.jsx("p",{className:"text-white/80 mt-2 text-sm",children:D})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsxs("div",{className:"p-8 space-y-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50/50 rounded-2xl p-6 border border-gray-100",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide mb-4 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Eletirme Anahtar (A Stunu)"]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:`flex-1 flex items-center gap-3 p-4 rounded-xl cursor-pointer transition-all ${a==="stock_code"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-white border-2 border-gray-200 hover:border-blue-300 text-gray-700"}`,children:[l.jsx("input",{type:"radio",name:"key",className:"sr-only",checked:a==="stock_code",onChange:()=>s("stock_code")}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${a==="stock_code"?"border-white":"border-gray-400"}`,children:a==="stock_code"&&l.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})}),l.jsx("span",{className:"font-semibold",children:"Stok Kodu"})]}),l.jsxs("label",{className:`flex-1 flex items-center gap-3 p-4 rounded-xl cursor-pointer transition-all ${a==="barcode"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-white border-2 border-gray-200 hover:border-blue-300 text-gray-700"}`,children:[l.jsx("input",{type:"radio",name:"key",className:"sr-only",checked:a==="barcode",onChange:()=>s("barcode")}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${a==="barcode"?"border-white":"border-gray-400"}`,children:a==="barcode"&&l.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})}),l.jsx("span",{className:"font-semibold",children:"Barkod"})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-purple-50/50 rounded-2xl p-6 border border-gray-100",children:[l.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide mb-4 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Excel Stunlar"]}),l.jsx("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:l.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[l.jsx("span",{className:"w-8 h-8 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center font-bold text-sm",children:"A"}),l.jsx("span",{className:"font-medium",children:a==="stock_code"?"Stok Kodu":"Barkod"}),l.jsx("span",{className:"ml-auto px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-semibold",children:"ZORUNLU"})]})}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:"name",letter:"B",label:"rn Ad"},{key:"price",letter:"C",label:"Fiyat"},{key:"barcode",letter:"D",label:"Barkod"},{key:"group",letter:"E",label:"Grup"},{key:"brand",letter:"F",label:"Marka"}].map(({key:X,letter:M,label:W})=>l.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all ${N[X]?"bg-purple-50 border-2 border-purple-200":"bg-gray-50 border-2 border-transparent hover:border-gray-200"}`,children:[l.jsx("input",{type:"checkbox",checked:N[X],onChange:z=>S({...N,[X]:z.target.checked}),className:"sr-only"}),l.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center transition-all ${N[X]?"bg-purple-500":"bg-gray-200"}`,children:N[X]&&l.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),l.jsx("span",{className:"w-7 h-7 bg-gray-200 text-gray-600 rounded-lg flex items-center justify-center font-bold text-xs",children:M}),l.jsx("span",{className:"font-medium text-gray-700",children:W})]},X))})]}),l.jsxs("div",{onDragEnter:L,onDragLeave:L,onDragOver:L,onDrop:V,onClick:()=>T.current.click(),className:`relative border-2 border-dashed rounded-2xl p-8 text-center cursor-pointer transition-all ${w?"border-emerald-500 bg-emerald-50":"border-gray-300 hover:border-emerald-400 hover:bg-gray-50"}`,children:[l.jsx("input",{type:"file",ref:T,onChange:I,className:"hidden",accept:".xlsx, .xls"}),c?l.jsxs("div",{className:"flex flex-col items-center gap-4 w-full max-w-md mx-6 animate-in fade-in zoom-in duration-300",children:[l.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-2xl flex items-center justify-center mb-2",children:l.jsx("div",{className:"w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"})}),l.jsxs("div",{className:"w-full space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm font-bold text-gray-700",children:[l.jsx("span",{children:"leniyor..."}),l.jsxs("span",{children:["%",x]})]}),l.jsx("div",{className:"w-full bg-gray-100 rounded-full h-3 overflow-hidden border border-gray-200",children:l.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-green-400 h-full rounded-full transition-all duration-300 ease-out shadow-[0_0_10px_rgba(16,185,129,0.5)]",style:{width:`${x}%`}})}),l.jsx("div",{className:"text-center text-xs font-medium text-gray-400",children:g})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-emerald-100 to-green-100 rounded-2xl flex items-center justify-center",children:l.jsx("svg",{className:"w-8 h-8 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),l.jsx("p",{className:"text-gray-700 font-semibold text-lg mb-1",children:"Excel dosyasn srkleyin veya tklayn"}),l.jsx("p",{className:"text-gray-500 text-sm",children:".xlsx veya .xls formatnda dosya sein"})]})]})]}),l.jsx("div",{className:"bg-gray-50 px-8 py-5 border-t border-gray-100 flex justify-end gap-3",children:l.jsx("button",{onClick:r,className:"px-6 py-3 bg-white hover:bg-gray-100 text-gray-700 border border-gray-200 rounded-xl font-semibold transition-all",children:"ptal"})})]})})}function AG({isOpen:e,onClose:r,products:t}){const[n,a]=J.useState(()=>Array(6).fill(null).map(()=>({product:null,status:null}))),s=(v,w)=>{const E=[...n];E[v]={...E[v],...w},a(E)},c=v=>{const w=n.filter((E,N)=>N!==v);a(w)},d=(v,w)=>{if(!w){s(v,{product:null,status:null});return}const E=t.find(N=>N.stock_code===w);E&&s(v,{product:E,status:"waiting"})},x=async(v,w)=>{if(!w||!n[v].product)return;const E=n[v];s(v,{status:"uploading"});const N=new FormData;N.append("product_image",w);try{await Sn.updateImage(E.product.stock_code,N),s(v,{status:"success"})}catch(S){console.error(S),s(v,{status:"error"})}};if(!e)return null;const f=n.filter(v=>v.status==="success").length,g=n.filter(v=>v.product).length;return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-5xl h-[85vh] flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 px-8 py-6 flex-shrink-0",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),"Toplu rn Resmi Gncelleme"]}),l.jsx("p",{className:"text-white/80 mt-2 text-sm",children:"Birden fazla rn resmini ayn anda gncelleyin"})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g>0&&l.jsxs("div",{className:"mt-4 flex gap-4",children:[l.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2",children:[l.jsx("span",{className:"text-white/70 text-sm",children:"Seilen:"}),l.jsx("span",{className:"text-white font-bold ml-2",children:g})]}),l.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2",children:[l.jsx("span",{className:"text-white/70 text-sm",children:"Yklenen:"}),l.jsx("span",{className:"text-white font-bold ml-2",children:f})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-100 px-8 py-3 flex items-center gap-3 flex-shrink-0",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsx("p",{className:"text-blue-800 text-sm",children:"Her satr iin bir rn sein ve resmi ykleyin. lemler annda sunucuya kaydedilir."})]}),l.jsx("div",{className:"flex-1 overflow-auto p-6 bg-gradient-to-br from-gray-50 to-emerald-50/30",children:l.jsxs("div",{className:"space-y-3",children:[n.map((v,w)=>l.jsx(TG,{index:w,row:v,products:t,onProductSelect:d,onFileSelect:x,onDelete:()=>c(w)},w)),l.jsxs("button",{onClick:()=>a([...n,{product:null,status:null}]),className:"w-full py-4 border-2 border-dashed border-emerald-300 text-emerald-600 rounded-2xl hover:bg-emerald-50 hover:border-emerald-400 transition-all flex items-center justify-center gap-2 font-semibold",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Yeni Satr Ekle"]})]})}),l.jsxs("div",{className:"bg-gray-50 px-8 py-5 border-t border-gray-100 flex justify-between items-center flex-shrink-0",children:[l.jsx("p",{className:"text-gray-500 text-sm",children:f>0&&`${f} resim baaryla yklendi`}),l.jsx("button",{onClick:r,className:"px-8 py-3 bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all",children:"Kapat"})]})]})})}function TG({index:e,row:r,products:t,onProductSelect:n,onFileSelect:a,onDelete:s}){const c=J.useRef(null),[d,x]=J.useState(""),[f,g]=J.useState(!1),v=d?t.filter(E=>E.name.toLowerCase().includes(d.toLowerCase())||E.stock_code.toLowerCase().includes(d.toLowerCase())).slice(0,8):[],w=()=>{if(!r.product)return null;switch(r.status){case"success":return l.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 bg-emerald-50 px-4 py-2 rounded-xl",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),l.jsx("span",{className:"font-semibold",children:"Yklendi!"})]});case"uploading":return l.jsxs("div",{className:"flex items-center gap-2 text-blue-600 bg-blue-50 px-4 py-2 rounded-xl",children:[l.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"font-semibold",children:"Ykleniyor..."})]});case"error":return l.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 px-4 py-2 rounded-xl",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),l.jsx("span",{className:"font-semibold",children:"Hata!"})]});default:return l.jsx("div",{className:"text-gray-400 text-sm",children:"Resim yklenmeye hazr"})}};return l.jsxs("div",{className:"flex items-center gap-4 bg-white p-4 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-all group",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-100 to-green-100 rounded-xl flex items-center justify-center text-emerald-600 font-bold",children:e+1}),l.jsx("div",{className:"flex-1 relative",children:r.product?l.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-emerald-50/50 px-4 py-3 rounded-xl border border-gray-200",children:[l.jsx("div",{className:"w-10 h-10 bg-white rounded-lg border border-gray-200 flex items-center justify-center overflow-hidden",children:r.product.image_url?l.jsx("img",{src:r.product.image_url,alt:"",className:"w-full h-full object-cover"}):l.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-semibold text-gray-900 truncate",children:r.product.name}),l.jsx("p",{className:"text-sm text-emerald-600 font-mono",children:r.product.stock_code})]}),l.jsx("button",{onClick:()=>n(e,null),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>g(!0),className:"w-full text-left px-5 py-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-xl font-semibold hover:from-emerald-600 hover:to-green-700 transition-all flex justify-between items-center shadow-lg shadow-green-500/25",children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"rn Se"]}),l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&l.jsxs("div",{className:"absolute top-full left-0 w-full bg-white border border-gray-200 shadow-2xl rounded-2xl mt-2 z-20 overflow-hidden",children:[l.jsx("div",{className:"p-3 border-b border-gray-100",children:l.jsx("input",{autoFocus:!0,placeholder:"rn ad veya stok kodu ara...",className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500",value:d,onChange:E=>x(E.target.value)})}),l.jsxs("div",{className:"max-h-48 overflow-y-auto",children:[v.map(E=>l.jsxs("div",{className:"px-4 py-3 hover:bg-emerald-50 cursor-pointer flex items-center gap-3 transition-colors",onClick:()=>{n(e,E.stock_code),g(!1),x("")},children:[l.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:E.image_url?l.jsx("img",{src:E.image_url,alt:"",className:"w-full h-full object-cover rounded-lg"}):l.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-semibold text-gray-900 truncate",children:E.name}),l.jsx("p",{className:"text-sm text-emerald-600 font-mono",children:E.stock_code})]})]},E.stock_code)),v.length===0&&d&&l.jsxs("div",{className:"px-4 py-8 text-center text-gray-400",children:[l.jsx("svg",{className:"w-10 h-10 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"rn bulunamad"]}),!d&&l.jsx("div",{className:"px-4 py-6 text-center text-gray-400 text-sm",children:"Aramak iin yazmaya balayn..."})]}),l.jsx("div",{className:"p-3 border-t border-gray-100 text-center text-sm text-gray-500 hover:text-red-500 cursor-pointer transition-colors",onClick:()=>{g(!1),x("")},children:"Kapat"})]})]})}),l.jsx("div",{className:"w-40 flex justify-center",children:r.product?w():l.jsx("span",{className:"text-gray-400 text-sm italic",children:"rn seilmedi"})}),l.jsxs("div",{className:"w-36",children:[l.jsx("input",{type:"file",ref:c,onChange:E=>a(e,E.target.files[0]),hidden:!0,accept:"image/*"}),l.jsxs("button",{onClick:()=>c.current.click(),disabled:!r.product||r.status==="uploading",className:`w-full py-3 px-4 font-semibold rounded-xl transition-all flex items-center justify-center gap-2 ${r.product?r.status==="uploading"?"bg-blue-100 text-blue-500 cursor-wait":"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg shadow-green-500/25 hover:shadow-xl hover:-translate-y-0.5":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Ykle"]})]}),l.jsx("button",{onClick:s,className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}var u1={},ad={},d1={},x3;function Ls(){if(x3)return d1;x3=1,Object.defineProperty(d1,"__esModule",{value:!0});function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function t(n,a){e(this,t),this.data=n,this.text=a.text||n,this.options=a};return d1.default=r,d1}var m3;function CG(){if(m3)return ad;m3=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.CODE39=void 0;var e=(function(){function S(T,j){for(var D=0;D<j.length;D++){var I=j[D];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(T,I.key,I)}}return function(T,j,D){return j&&S(T.prototype,j),D&&S(T,D),T}})(),r=Ls(),t=n(r);function n(S){return S&&S.__esModule?S:{default:S}}function a(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")}function s(S,T){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:S}function c(S,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);S.prototype=Object.create(T&&T.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(S,T):S.__proto__=T)}var d=(function(S){c(T,S);function T(j,D){return a(this,T),j=j.toUpperCase(),D.mod43&&(j+=w(N(j))),s(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,j,D))}return e(T,[{key:"encode",value:function(){for(var D=g("*"),I=0;I<this.data.length;I++)D+=g(this.data[I])+"0";return D+=g("*"),{data:D,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),T})(t.default),x=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],f=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function g(S){return v(E(S))}function v(S){return f[S].toString(2)}function w(S){return x[S]}function E(S){return x.indexOf(S)}function N(S){for(var T=0,j=0;j<S.length;j++)T+=E(S[j]);return T=T%43,T}return ad.CODE39=d,ad}var mi={},f1={},h1={},Pn={},g3;function _f(){if(g3)return Pn;g3=1,Object.defineProperty(Pn,"__esModule",{value:!0});var e;function r(x,f,g){return f in x?Object.defineProperty(x,f,{value:g,enumerable:!0,configurable:!0,writable:!0}):x[f]=g,x}var t=Pn.SET_A=0,n=Pn.SET_B=1,a=Pn.SET_C=2;Pn.SHIFT=98;var s=Pn.START_A=103,c=Pn.START_B=104,d=Pn.START_C=105;return Pn.MODULO=103,Pn.STOP=106,Pn.FNC1=207,Pn.SET_BY_CODE=(e={},r(e,s,t),r(e,c,n),r(e,d,a),e),Pn.SWAP={101:t,100:n,99:a},Pn.A_START_CHAR="",Pn.B_START_CHAR="",Pn.C_START_CHAR="",Pn.A_CHARS="[\0-_-]",Pn.B_CHARS="[ --]",Pn.C_CHARS="(*[0-9]{2}*)",Pn.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Pn}var p3;function Kx(){if(p3)return h1;p3=1,Object.defineProperty(h1,"__esModule",{value:!0});var e=(function(){function f(g,v){for(var w=0;w<v.length;w++){var E=v[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,w){return v&&f(g.prototype,v),w&&f(g,w),g}})(),r=Ls(),t=a(r),n=_f();function a(f){return f&&f.__esModule?f:{default:f}}function s(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}function c(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:f}function d(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}var x=(function(f){d(g,f);function g(v,w){s(this,g);var E=c(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,v.substring(1),w));return E.bytes=v.split("").map(function(N){return N.charCodeAt(0)}),E}return e(g,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var w=this.bytes,E=w.shift()-105,N=n.SET_BY_CODE[E];if(N===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&w.unshift(n.FNC1);var S=g.next(w,1,N);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:g.getBar(E)+S.result+g.getBar((S.checksum+E)%n.MODULO)+g.getBar(n.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var w=this.options.ean128||!1;return typeof w=="string"&&(w=w.toLowerCase()==="true"),w}}],[{key:"getBar",value:function(w){return n.BARS[w]?n.BARS[w].toString():""}},{key:"correctIndex",value:function(w,E){if(E===n.SET_A){var N=w.shift();return N<32?N+64:N-32}else return E===n.SET_B?w.shift()-32:(w.shift()-48)*10+w.shift()-48}},{key:"next",value:function(w,E,N){if(!w.length)return{result:"",checksum:0};var S=void 0,T=void 0;if(w[0]>=200){T=w.shift()-105;var j=n.SWAP[T];j!==void 0?S=g.next(w,E+1,j):((N===n.SET_A||N===n.SET_B)&&T===n.SHIFT&&(w[0]=N===n.SET_A?w[0]>95?w[0]-96:w[0]:w[0]<32?w[0]+96:w[0]),S=g.next(w,E+1,N))}else T=g.correctIndex(w,N),S=g.next(w,E+1,N);var D=g.getBar(T),I=T*E;return{result:D+S.result,checksum:I+S.checksum}}}]),g})(t.default);return h1.default=x,h1}var x1={},b3;function jG(){if(b3)return x1;b3=1,Object.defineProperty(x1,"__esModule",{value:!0});var e=_f(),r=function(d){return d.match(new RegExp("^"+e.A_CHARS+"*"))[0].length},t=function(d){return d.match(new RegExp("^"+e.B_CHARS+"*"))[0].length},n=function(d){return d.match(new RegExp("^"+e.C_CHARS+"*"))[0]};function a(c,d){var x=d?e.A_CHARS:e.B_CHARS,f=c.match(new RegExp("^("+x+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(f)return f[1]+""+s(c.substring(f[1].length));var g=c.match(new RegExp("^"+x+"+"))[0];return g.length===c.length?c:g+String.fromCharCode(d?205:206)+a(c.substring(g.length),!d)}function s(c){var d=n(c),x=d.length;if(x===c.length)return c;c=c.substring(x);var f=r(c)>=t(c);return d+String.fromCharCode(f?206:205)+a(c,f)}return x1.default=function(c){var d=void 0,x=n(c).length;if(x>=2)d=e.C_START_CHAR+s(c);else{var f=r(c)>t(c);d=(f?e.A_START_CHAR:e.B_START_CHAR)+a(c,f)}return d.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(g,v){return""+v})},x1}var v3;function OG(){if(v3)return f1;v3=1,Object.defineProperty(f1,"__esModule",{value:!0});var e=Kx(),r=a(e),t=jG(),n=a(t);function a(f){return f&&f.__esModule?f:{default:f}}function s(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}function c(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:f}function d(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}var x=(function(f){d(g,f);function g(v,w){if(s(this,g),/^[\x00-\x7F\xC8-\xD3]+$/.test(v))var E=c(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,(0,n.default)(v),w));else var E=c(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,v,w));return c(E)}return g})(r.default);return f1.default=x,f1}var m1={},y3;function RG(){if(y3)return m1;y3=1,Object.defineProperty(m1,"__esModule",{value:!0});var e=(function(){function f(g,v){for(var w=0;w<v.length;w++){var E=v[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,w){return v&&f(g.prototype,v),w&&f(g,w),g}})(),r=Kx(),t=a(r),n=_f();function a(f){return f&&f.__esModule?f:{default:f}}function s(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}function c(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:f}function d(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}var x=(function(f){d(g,f);function g(v,w){return s(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,n.A_START_CHAR+v,w))}return e(g,[{key:"valid",value:function(){return new RegExp("^"+n.A_CHARS+"+$").test(this.data)}}]),g})(t.default);return m1.default=x,m1}var g1={},w3;function IG(){if(w3)return g1;w3=1,Object.defineProperty(g1,"__esModule",{value:!0});var e=(function(){function f(g,v){for(var w=0;w<v.length;w++){var E=v[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,w){return v&&f(g.prototype,v),w&&f(g,w),g}})(),r=Kx(),t=a(r),n=_f();function a(f){return f&&f.__esModule?f:{default:f}}function s(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}function c(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:f}function d(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}var x=(function(f){d(g,f);function g(v,w){return s(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,n.B_START_CHAR+v,w))}return e(g,[{key:"valid",value:function(){return new RegExp("^"+n.B_CHARS+"+$").test(this.data)}}]),g})(t.default);return g1.default=x,g1}var p1={},_3;function DG(){if(_3)return p1;_3=1,Object.defineProperty(p1,"__esModule",{value:!0});var e=(function(){function f(g,v){for(var w=0;w<v.length;w++){var E=v[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,w){return v&&f(g.prototype,v),w&&f(g,w),g}})(),r=Kx(),t=a(r),n=_f();function a(f){return f&&f.__esModule?f:{default:f}}function s(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}function c(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:f}function d(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}var x=(function(f){d(g,f);function g(v,w){return s(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,n.C_START_CHAR+v,w))}return e(g,[{key:"valid",value:function(){return new RegExp("^"+n.C_CHARS+"+$").test(this.data)}}]),g})(t.default);return p1.default=x,p1}var E3;function MG(){if(E3)return mi;E3=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.CODE128C=mi.CODE128B=mi.CODE128A=mi.CODE128=void 0;var e=OG(),r=x(e),t=RG(),n=x(t),a=IG(),s=x(a),c=DG(),d=x(c);function x(f){return f&&f.__esModule?f:{default:f}}return mi.CODE128=r.default,mi.CODE128A=n.default,mi.CODE128B=s.default,mi.CODE128C=d.default,mi}var Xa={},b1={},gl={},k3;function Ef(){return k3||(k3=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.SIDE_BIN="101",gl.MIDDLE_BIN="01010",gl.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},gl.EAN2_STRUCTURE=["LL","LG","GL","GG"],gl.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],gl.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]),gl}var v1={},y1={},S3;function kf(){if(S3)return y1;S3=1,Object.defineProperty(y1,"__esModule",{value:!0});var e=Ef(),r=function(n,a,s){var c=n.split("").map(function(x,f){return e.BINARIES[a[f]]}).map(function(x,f){return x?x[n[f]]:""});if(s){var d=n.length-1;c=c.map(function(x,f){return f<d?x+s:x})}return c.join("")};return y1.default=r,y1}var N3;function S5(){if(N3)return v1;N3=1,Object.defineProperty(v1,"__esModule",{value:!0});var e=(function(){function v(w,E){for(var N=0;N<E.length;N++){var S=E[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,E,N){return E&&v(w.prototype,E),N&&v(w,N),w}})(),r=Ef(),t=kf(),n=c(t),a=Ls(),s=c(a);function c(v){return v&&v.__esModule?v:{default:v}}function d(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function x(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function f(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var g=(function(v){f(w,v);function w(E,N){d(this,w);var S=x(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,E,N));return S.fontSize=!N.flat&&N.fontSize>N.width*10?N.width*10:N.fontSize,S.guardHeight=N.height+S.fontSize/2+N.textMargin,S}return e(w,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(N,S){return this.text.substr(N,S)}},{key:"leftEncode",value:function(N,S){return(0,n.default)(N,S)}},{key:"rightText",value:function(N,S){return this.text.substr(N,S)}},{key:"rightEncode",value:function(N,S){return(0,n.default)(N,S)}},{key:"encodeGuarded",value:function(){var N={fontSize:this.fontSize},S={height:this.guardHeight};return[{data:r.SIDE_BIN,options:S},{data:this.leftEncode(),text:this.leftText(),options:N},{data:r.MIDDLE_BIN,options:S},{data:this.rightEncode(),text:this.rightText(),options:N},{data:r.SIDE_BIN,options:S}]}},{key:"encodeFlat",value:function(){var N=[r.SIDE_BIN,this.leftEncode(),r.MIDDLE_BIN,this.rightEncode(),r.SIDE_BIN];return{data:N.join(""),text:this.text}}}]),w})(s.default);return v1.default=g,v1}var A3;function FG(){if(A3)return b1;A3=1,Object.defineProperty(b1,"__esModule",{value:!0});var e=(function(){function v(w,E){for(var N=0;N<E.length;N++){var S=E[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,E,N){return E&&v(w.prototype,E),N&&v(w,N),w}})(),r=function v(w,E,N){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,E);if(S===void 0){var T=Object.getPrototypeOf(w);return T===null?void 0:v(T,E,N)}else{if("value"in S)return S.value;var j=S.get;return j===void 0?void 0:j.call(N)}},t=Ef(),n=S5(),a=s(n);function s(v){return v&&v.__esModule?v:{default:v}}function c(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function d(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function x(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var f=function(w){var E=w.substr(0,12).split("").map(function(N){return+N}).reduce(function(N,S,T){return T%2?N+S*3:N+S},0);return(10-E%10)%10},g=(function(v){x(w,v);function w(E,N){c(this,w),E.search(/^[0-9]{12}$/)!==-1&&(E+=f(E));var S=d(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,E,N));return S.lastChar=N.lastChar,S}return e(w,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===f(this.data)}},{key:"leftText",value:function(){return r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var N=this.data.substr(1,6),S=t.EAN13_STRUCTURE[this.data[0]];return r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"leftEncode",this).call(this,N,S)}},{key:"rightText",value:function(){return r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var N=this.data.substr(7,6);return r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"rightEncode",this).call(this,N,"RRRRRR")}},{key:"encodeGuarded",value:function(){var N=r(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(N.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(N.push({data:"00"}),N.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),N}}]),w})(a.default);return b1.default=g,b1}var w1={},T3;function LG(){if(T3)return w1;T3=1,Object.defineProperty(w1,"__esModule",{value:!0});var e=(function(){function g(v,w){for(var E=0;E<w.length;E++){var N=w[E];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,w,E){return w&&g(v.prototype,w),E&&g(v,E),v}})(),r=function g(v,w,E){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,w);if(N===void 0){var S=Object.getPrototypeOf(v);return S===null?void 0:g(S,w,E)}else{if("value"in N)return N.value;var T=N.get;return T===void 0?void 0:T.call(E)}},t=S5(),n=a(t);function a(g){return g&&g.__esModule?g:{default:g}}function s(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function c(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function d(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var x=function(v){var w=v.substr(0,7).split("").map(function(E){return+E}).reduce(function(E,N,S){return S%2?E+N:E+N*3},0);return(10-w%10)%10},f=(function(g){d(v,g);function v(w,E){return s(this,v),w.search(/^[0-9]{7}$/)!==-1&&(w+=x(w)),c(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,w,E))}return e(v,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===x(this.data)}},{key:"leftText",value:function(){return r(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var E=this.data.substr(0,4);return r(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"leftEncode",this).call(this,E,"LLLL")}},{key:"rightText",value:function(){return r(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var E=this.data.substr(4,4);return r(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"rightEncode",this).call(this,E,"RRRR")}}]),v})(n.default);return w1.default=f,w1}var _1={},C3;function BG(){if(C3)return _1;C3=1,Object.defineProperty(_1,"__esModule",{value:!0});var e=(function(){function w(E,N){for(var S=0;S<N.length;S++){var T=N[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}return function(E,N,S){return N&&w(E.prototype,N),S&&w(E,S),E}})(),r=Ef(),t=kf(),n=c(t),a=Ls(),s=c(a);function c(w){return w&&w.__esModule?w:{default:w}}function d(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function x(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:w}function f(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}var g=function(E){var N=E.split("").map(function(S){return+S}).reduce(function(S,T,j){return j%2?S+T*9:S+T*3},0);return N%10},v=(function(w){f(E,w);function E(N,S){return d(this,E),x(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,N,S))}return e(E,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var S=r.EAN5_STRUCTURE[g(this.data)];return{data:"1011"+(0,n.default)(this.data,S,"01"),text:this.text}}}]),E})(s.default);return _1.default=v,_1}var E1={},j3;function PG(){if(j3)return E1;j3=1,Object.defineProperty(E1,"__esModule",{value:!0});var e=(function(){function v(w,E){for(var N=0;N<E.length;N++){var S=E[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,E,N){return E&&v(w.prototype,E),N&&v(w,N),w}})(),r=Ef(),t=kf(),n=c(t),a=Ls(),s=c(a);function c(v){return v&&v.__esModule?v:{default:v}}function d(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function x(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function f(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var g=(function(v){f(w,v);function w(E,N){return d(this,w),x(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,E,N))}return e(w,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var N=r.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,n.default)(this.data,N,"01"),text:this.text}}}]),w})(s.default);return E1.default=g,E1}var sd={},O3;function N5(){if(O3)return sd;O3=1,Object.defineProperty(sd,"__esModule",{value:!0});var e=(function(){function v(w,E){for(var N=0;N<E.length;N++){var S=E[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,E,N){return E&&v(w.prototype,E),N&&v(w,N),w}})();sd.checksum=g;var r=kf(),t=s(r),n=Ls(),a=s(n);function s(v){return v&&v.__esModule?v:{default:v}}function c(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function d(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function x(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var f=(function(v){x(w,v);function w(E,N){c(this,w),E.search(/^[0-9]{11}$/)!==-1&&(E+=g(E));var S=d(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,E,N));return S.displayValue=N.displayValue,N.fontSize>N.width*10?S.fontSize=N.width*10:S.fontSize=N.fontSize,S.guardHeight=N.height+S.fontSize/2+N.textMargin,S}return e(w,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==g(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var N="";return N+="101",N+=(0,t.default)(this.data.substr(0,6),"LLLLLL"),N+="01010",N+=(0,t.default)(this.data.substr(6,6),"RRRRRR"),N+="101",{data:N,text:this.text}}},{key:"guardedEncoding",value:function(){var N=[];return this.displayValue&&N.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),N.push({data:"101"+(0,t.default)(this.data[0],"L"),options:{height:this.guardHeight}}),N.push({data:(0,t.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),N.push({data:"01010",options:{height:this.guardHeight}}),N.push({data:(0,t.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),N.push({data:(0,t.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&N.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),N}}]),w})(a.default);function g(v){var w=0,E;for(E=1;E<11;E+=2)w+=parseInt(v[E]);for(E=0;E<11;E+=2)w+=parseInt(v[E])*3;return(10-w%10)%10}return sd.default=f,sd}var k1={},R3;function UG(){if(R3)return k1;R3=1,Object.defineProperty(k1,"__esModule",{value:!0});var e=(function(){function N(S,T){for(var j=0;j<T.length;j++){var D=T[j];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(S,D.key,D)}}return function(S,T,j){return T&&N(S.prototype,T),j&&N(S,j),S}})(),r=kf(),t=c(r),n=Ls(),a=c(n),s=N5();function c(N){return N&&N.__esModule?N:{default:N}}function d(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function x(N,S){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:N}function f(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);N.prototype=Object.create(S&&S.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(N,S):N.__proto__=S)}var g=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],v=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],w=(function(N){f(S,N);function S(T,j){d(this,S);var D=x(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,T,j));if(D.isValid=!1,T.search(/^[0-9]{6}$/)!==-1)D.middleDigits=T,D.upcA=E(T,"0"),D.text=j.text||""+D.upcA[0]+T+D.upcA[D.upcA.length-1],D.isValid=!0;else if(T.search(/^[01][0-9]{7}$/)!==-1)if(D.middleDigits=T.substring(1,T.length-1),D.upcA=E(D.middleDigits,T[0]),D.upcA[D.upcA.length-1]===T[T.length-1])D.isValid=!0;else return x(D);else return x(D);return D.displayValue=j.displayValue,j.fontSize>j.width*10?D.fontSize=j.width*10:D.fontSize=j.fontSize,D.guardHeight=j.height+D.fontSize/2+j.textMargin,D}return e(S,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var j="";return j+="101",j+=this.encodeMiddleDigits(),j+="010101",{data:j,text:this.text}}},{key:"guardedEncoding",value:function(){var j=[];return this.displayValue&&j.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),j.push({data:"101",options:{height:this.guardHeight}}),j.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),j.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&j.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),j}},{key:"encodeMiddleDigits",value:function(){var j=this.upcA[0],D=this.upcA[this.upcA.length-1],I=v[parseInt(D)][parseInt(j)];return(0,t.default)(this.middleDigits,I)}}]),S})(a.default);function E(N,S){for(var T=parseInt(N[N.length-1]),j=g[T],D="",I=0,L=0;L<j.length;L++){var V=j[L];V==="X"?D+=N[I++]:D+=V}return D=""+S+D,""+D+(0,s.checksum)(D)}return k1.default=w,k1}var I3;function zG(){if(I3)return Xa;I3=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.UPCE=Xa.UPC=Xa.EAN2=Xa.EAN5=Xa.EAN8=Xa.EAN13=void 0;var e=FG(),r=w(e),t=LG(),n=w(t),a=BG(),s=w(a),c=PG(),d=w(c),x=N5(),f=w(x),g=UG(),v=w(g);function w(E){return E&&E.__esModule?E:{default:E}}return Xa.EAN13=r.default,Xa.EAN8=n.default,Xa.EAN5=s.default,Xa.EAN2=d.default,Xa.UPC=f.default,Xa.UPCE=v.default,Xa}var nc={},S1={},T0={},D3;function HG(){return D3||(D3=1,Object.defineProperty(T0,"__esModule",{value:!0}),T0.START_BIN="1010",T0.END_BIN="11101",T0.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]),T0}var M3;function A5(){if(M3)return S1;M3=1,Object.defineProperty(S1,"__esModule",{value:!0});var e=(function(){function f(g,v){for(var w=0;w<v.length;w++){var E=v[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,w){return v&&f(g.prototype,v),w&&f(g,w),g}})(),r=HG(),t=Ls(),n=a(t);function a(f){return f&&f.__esModule?f:{default:f}}function s(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}function c(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:f}function d(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}var x=(function(f){d(g,f);function g(){return s(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return e(g,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var w=this,E=this.data.match(/.{2}/g).map(function(N){return w.encodePair(N)}).join("");return{data:r.START_BIN+E+r.END_BIN,text:this.text}}},{key:"encodePair",value:function(w){var E=r.BINARIES[w[1]];return r.BINARIES[w[0]].split("").map(function(N,S){return(N==="1"?"111":"1")+(E[S]==="1"?"000":"0")}).join("")}}]),g})(n.default);return S1.default=x,S1}var N1={},F3;function GG(){if(F3)return N1;F3=1,Object.defineProperty(N1,"__esModule",{value:!0});var e=(function(){function f(g,v){for(var w=0;w<v.length;w++){var E=v[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,w){return v&&f(g.prototype,v),w&&f(g,w),g}})(),r=A5(),t=n(r);function n(f){return f&&f.__esModule?f:{default:f}}function a(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}function s(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:f}function c(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}var d=function(g){var v=g.substr(0,13).split("").map(function(w){return parseInt(w,10)}).reduce(function(w,E,N){return w+E*(3-N%2*2)},0);return Math.ceil(v/10)*10-v},x=(function(f){c(g,f);function g(v,w){return a(this,g),v.search(/^[0-9]{13}$/)!==-1&&(v+=d(v)),s(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,v,w))}return e(g,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===d(this.data)}}]),g})(t.default);return N1.default=x,N1}var L3;function VG(){if(L3)return nc;L3=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.ITF14=nc.ITF=void 0;var e=A5(),r=a(e),t=GG(),n=a(t);function a(s){return s&&s.__esModule?s:{default:s}}return nc.ITF=r.default,nc.ITF14=n.default,nc}var Es={},A1={},B3;function Sf(){if(B3)return A1;B3=1,Object.defineProperty(A1,"__esModule",{value:!0});var e=(function(){function f(g,v){for(var w=0;w<v.length;w++){var E=v[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,w){return v&&f(g.prototype,v),w&&f(g,w),g}})(),r=Ls(),t=n(r);function n(f){return f&&f.__esModule?f:{default:f}}function a(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}function s(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:f}function c(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}var d=(function(f){c(g,f);function g(v,w){return a(this,g),s(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,v,w))}return e(g,[{key:"encode",value:function(){for(var w="110",E=0;E<this.data.length;E++){var N=parseInt(this.data[E]),S=N.toString(2);S=x(S,4-S.length);for(var T=0;T<S.length;T++)w+=S[T]=="0"?"100":"110"}return w+="1001",{data:w,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),g})(t.default);function x(f,g){for(var v=0;v<g;v++)f="0"+f;return f}return A1.default=d,A1}var T1={},id={},P3;function Yx(){if(P3)return id;P3=1,Object.defineProperty(id,"__esModule",{value:!0}),id.mod10=e,id.mod11=r;function e(t){for(var n=0,a=0;a<t.length;a++){var s=parseInt(t[a]);(a+t.length)%2===0?n+=s:n+=s*2%10+Math.floor(s*2/10)}return(10-n%10)%10}function r(t){for(var n=0,a=[2,3,4,5,6,7],s=0;s<t.length;s++){var c=parseInt(t[t.length-1-s]);n+=a[s%a.length]*c}return(11-n%11)%11}return id}var U3;function WG(){if(U3)return T1;U3=1,Object.defineProperty(T1,"__esModule",{value:!0});var e=Sf(),r=n(e),t=Yx();function n(x){return x&&x.__esModule?x:{default:x}}function a(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")}function s(x,f){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:x}function c(x,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);x.prototype=Object.create(f&&f.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(x,f):x.__proto__=f)}var d=(function(x){c(f,x);function f(g,v){return a(this,f),s(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g+(0,t.mod10)(g),v))}return f})(r.default);return T1.default=d,T1}var C1={},z3;function qG(){if(z3)return C1;z3=1,Object.defineProperty(C1,"__esModule",{value:!0});var e=Sf(),r=n(e),t=Yx();function n(x){return x&&x.__esModule?x:{default:x}}function a(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")}function s(x,f){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:x}function c(x,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);x.prototype=Object.create(f&&f.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(x,f):x.__proto__=f)}var d=(function(x){c(f,x);function f(g,v){return a(this,f),s(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g+(0,t.mod11)(g),v))}return f})(r.default);return C1.default=d,C1}var j1={},H3;function XG(){if(H3)return j1;H3=1,Object.defineProperty(j1,"__esModule",{value:!0});var e=Sf(),r=n(e),t=Yx();function n(x){return x&&x.__esModule?x:{default:x}}function a(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")}function s(x,f){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:x}function c(x,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);x.prototype=Object.create(f&&f.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(x,f):x.__proto__=f)}var d=(function(x){c(f,x);function f(g,v){return a(this,f),g+=(0,t.mod10)(g),g+=(0,t.mod10)(g),s(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g,v))}return f})(r.default);return j1.default=d,j1}var O1={},G3;function KG(){if(G3)return O1;G3=1,Object.defineProperty(O1,"__esModule",{value:!0});var e=Sf(),r=n(e),t=Yx();function n(x){return x&&x.__esModule?x:{default:x}}function a(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")}function s(x,f){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:x}function c(x,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);x.prototype=Object.create(f&&f.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(x,f):x.__proto__=f)}var d=(function(x){c(f,x);function f(g,v){return a(this,f),g+=(0,t.mod11)(g),g+=(0,t.mod10)(g),s(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g,v))}return f})(r.default);return O1.default=d,O1}var V3;function YG(){if(V3)return Es;V3=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.MSI1110=Es.MSI1010=Es.MSI11=Es.MSI10=Es.MSI=void 0;var e=Sf(),r=g(e),t=WG(),n=g(t),a=qG(),s=g(a),c=XG(),d=g(c),x=KG(),f=g(x);function g(v){return v&&v.__esModule?v:{default:v}}return Es.MSI=r.default,Es.MSI10=n.default,Es.MSI11=s.default,Es.MSI1010=d.default,Es.MSI1110=f.default,Es}var ld={},W3;function $G(){if(W3)return ld;W3=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.pharmacode=void 0;var e=(function(){function x(f,g){for(var v=0;v<g.length;v++){var w=g[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}return function(f,g,v){return g&&x(f.prototype,g),v&&x(f,v),f}})(),r=Ls(),t=n(r);function n(x){return x&&x.__esModule?x:{default:x}}function a(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")}function s(x,f){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:x}function c(x,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);x.prototype=Object.create(f&&f.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(x,f):x.__proto__=f)}var d=(function(x){c(f,x);function f(g,v){a(this,f);var w=s(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g,v));return w.number=parseInt(g,10),w}return e(f,[{key:"encode",value:function(){for(var v=this.number,w="";!isNaN(v)&&v!=0;)v%2===0?(w="11100"+w,v=(v-2)/2):(w="100"+w,v=(v-1)/2);return w=w.slice(0,-2),{data:w,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),f})(t.default);return ld.pharmacode=d,ld}var od={},q3;function ZG(){if(q3)return od;q3=1,Object.defineProperty(od,"__esModule",{value:!0}),od.codabar=void 0;var e=(function(){function x(f,g){for(var v=0;v<g.length;v++){var w=g[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}return function(f,g,v){return g&&x(f.prototype,g),v&&x(f,v),f}})(),r=Ls(),t=n(r);function n(x){return x&&x.__esModule?x:{default:x}}function a(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")}function s(x,f){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:x}function c(x,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);x.prototype=Object.create(f&&f.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(x,f):x.__proto__=f)}var d=(function(x){c(f,x);function f(g,v){a(this,f),g.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(g="A"+g+"A");var w=s(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g.toUpperCase(),v));return w.text=w.options.text||w.text.replace(/[A-D]/g,""),w}return e(f,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var v=[],w=this.getEncodings(),E=0;E<this.data.length;E++)v.push(w[this.data.charAt(E)]),E!==this.data.length-1&&v.push("0");return{text:this.text,data:v.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),f})(t.default);return od.codabar=d,od}var ac={},R1={},C0={},X3;function JG(){return X3||(X3=1,Object.defineProperty(C0,"__esModule",{value:!0}),C0.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""],C0.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],C0.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]}),C0}var K3;function T5(){if(K3)return R1;K3=1,Object.defineProperty(R1,"__esModule",{value:!0});var e=(function(){function f(g,v){for(var w=0;w<v.length;w++){var E=v[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,v,w){return v&&f(g.prototype,v),w&&f(g,w),g}})(),r=JG(),t=Ls(),n=a(t);function a(f){return f&&f.__esModule?f:{default:f}}function s(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}function c(f,g){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:f}function d(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);f.prototype=Object.create(g&&g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(f,g):f.__proto__=g)}var x=(function(f){d(g,f);function g(v,w){return s(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,v,w))}return e(g,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var w=this.data.split("").flatMap(function(T){return r.MULTI_SYMBOLS[T]||T}),E=w.map(function(T){return g.getEncoding(T)}).join(""),N=g.checksum(w,20),S=g.checksum(w.concat(N),15);return{text:this.text,data:g.getEncoding("")+E+g.getEncoding(N)+g.getEncoding(S)+g.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(w){return r.BINARIES[g.symbolValue(w)]}},{key:"getSymbol",value:function(w){return r.SYMBOLS[w]}},{key:"symbolValue",value:function(w){return r.SYMBOLS.indexOf(w)}},{key:"checksum",value:function(w,E){var N=w.slice().reverse().reduce(function(S,T,j){var D=j%E+1;return S+g.symbolValue(T)*D},0);return g.getSymbol(N%47)}}]),g})(n.default);return R1.default=x,R1}var I1={},Y3;function QG(){if(Y3)return I1;Y3=1,Object.defineProperty(I1,"__esModule",{value:!0});var e=(function(){function x(f,g){for(var v=0;v<g.length;v++){var w=g[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}return function(f,g,v){return g&&x(f.prototype,g),v&&x(f,v),f}})(),r=T5(),t=n(r);function n(x){return x&&x.__esModule?x:{default:x}}function a(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")}function s(x,f){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:x}function c(x,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);x.prototype=Object.create(f&&f.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(x,f):x.__proto__=f)}var d=(function(x){c(f,x);function f(g,v){return a(this,f),s(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g,v))}return e(f,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),f})(t.default);return I1.default=d,I1}var $3;function eV(){if($3)return ac;$3=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.CODE93FullASCII=ac.CODE93=void 0;var e=T5(),r=a(e),t=QG(),n=a(t);function a(s){return s&&s.__esModule?s:{default:s}}return ac.CODE93=r.default,ac.CODE93FullASCII=n.default,ac}var cd={},Z3;function tV(){if(Z3)return cd;Z3=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.GenericBarcode=void 0;var e=(function(){function x(f,g){for(var v=0;v<g.length;v++){var w=g[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}return function(f,g,v){return g&&x(f.prototype,g),v&&x(f,v),f}})(),r=Ls(),t=n(r);function n(x){return x&&x.__esModule?x:{default:x}}function a(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")}function s(x,f){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:x}function c(x,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);x.prototype=Object.create(f&&f.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(x,f):x.__proto__=f)}var d=(function(x){c(f,x);function f(g,v){return a(this,f),s(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,g,v))}return e(f,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),f})(t.default);return cd.GenericBarcode=d,cd}var J3;function rV(){if(J3)return u1;J3=1,Object.defineProperty(u1,"__esModule",{value:!0});var e=CG(),r=MG(),t=zG(),n=VG(),a=YG(),s=$G(),c=ZG(),d=eV(),x=tV();return u1.default={CODE39:e.CODE39,CODE128:r.CODE128,CODE128A:r.CODE128A,CODE128B:r.CODE128B,CODE128C:r.CODE128C,EAN13:t.EAN13,EAN8:t.EAN8,EAN5:t.EAN5,EAN2:t.EAN2,UPC:t.UPC,UPCE:t.UPCE,ITF14:n.ITF14,ITF:n.ITF,MSI:a.MSI,MSI10:a.MSI10,MSI11:a.MSI11,MSI1010:a.MSI1010,MSI1110:a.MSI1110,pharmacode:s.pharmacode,codabar:c.codabar,CODE93:d.CODE93,CODE93FullASCII:d.CODE93FullASCII,GenericBarcode:x.GenericBarcode},u1}var D1={},Q3;function $x(){if(Q3)return D1;Q3=1,Object.defineProperty(D1,"__esModule",{value:!0});var e=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r};return D1.default=function(r,t){return e({},r,t)},D1}var M1={},eE;function nV(){if(eE)return M1;eE=1,Object.defineProperty(M1,"__esModule",{value:!0}),M1.default=e;function e(r){var t=[];function n(a){if(Array.isArray(a))for(var s=0;s<a.length;s++)n(a[s]);else a.text=a.text||"",a.data=a.data||"",t.push(a)}return n(r),t}return M1}var F1={},tE;function aV(){if(tE)return F1;tE=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.default=e;function e(r){return r.marginTop=r.marginTop||r.margin,r.marginBottom=r.marginBottom||r.margin,r.marginRight=r.marginRight||r.margin,r.marginLeft=r.marginLeft||r.margin,r}return F1}var L1={},B1={},P1={},rE;function C5(){if(rE)return P1;rE=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.default=e;function e(r){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in t)t.hasOwnProperty(n)&&(n=t[n],typeof r[n]=="string"&&(r[n]=parseInt(r[n],10)));return typeof r.displayValue=="string"&&(r.displayValue=r.displayValue!="false"),r}return P1}var U1={},nE;function j5(){if(nE)return U1;nE=1,Object.defineProperty(U1,"__esModule",{value:!0});var e={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};return U1.default=e,U1}var aE;function sV(){if(aE)return B1;aE=1,Object.defineProperty(B1,"__esModule",{value:!0});var e=C5(),r=a(e),t=j5(),n=a(t);function a(c){return c&&c.__esModule?c:{default:c}}function s(c){var d={};for(var x in n.default)n.default.hasOwnProperty(x)&&(c.hasAttribute("jsbarcode-"+x.toLowerCase())&&(d[x]=c.getAttribute("jsbarcode-"+x.toLowerCase())),c.hasAttribute("data-"+x.toLowerCase())&&(d[x]=c.getAttribute("data-"+x.toLowerCase())));return d.value=c.getAttribute("jsbarcode-value")||c.getAttribute("data-value"),d=(0,r.default)(d),d}return B1.default=s,B1}var z1={},H1={},ks={},sE;function O5(){if(sE)return ks;sE=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.getTotalWidthOfEncodings=ks.calculateEncodingAttributes=ks.getBarcodePadding=ks.getEncodingHeight=ks.getMaximumHeightOfEncodings=void 0;var e=$x(),r=t(e);function t(f){return f&&f.__esModule?f:{default:f}}function n(f,g){return g.height+(g.displayValue&&f.text.length>0?g.fontSize+g.textMargin:0)+g.marginTop+g.marginBottom}function a(f,g,v){if(v.displayValue&&g<f){if(v.textAlign=="center")return Math.floor((f-g)/2);if(v.textAlign=="left")return 0;if(v.textAlign=="right")return Math.floor(f-g)}return 0}function s(f,g,v){for(var w=0;w<f.length;w++){var E=f[w],N=(0,r.default)(g,E.options),S;N.displayValue?S=x(E.text,N,v):S=0;var T=E.data.length*N.width;E.width=Math.ceil(Math.max(S,T)),E.height=n(E,N),E.barcodePadding=a(S,T,N)}}function c(f){for(var g=0,v=0;v<f.length;v++)g+=f[v].width;return g}function d(f){for(var g=0,v=0;v<f.length;v++)f[v].height>g&&(g=f[v].height);return g}function x(f,g,v){var w;if(v)w=v;else if(typeof document<"u")w=document.createElement("canvas").getContext("2d");else return 0;w.font=g.fontOptions+" "+g.fontSize+"px "+g.font;var E=w.measureText(f);if(!E)return 0;var N=E.width;return N}return ks.getMaximumHeightOfEncodings=d,ks.getEncodingHeight=n,ks.getBarcodePadding=a,ks.calculateEncodingAttributes=s,ks.getTotalWidthOfEncodings=c,ks}var iE;function iV(){if(iE)return H1;iE=1,Object.defineProperty(H1,"__esModule",{value:!0});var e=(function(){function d(x,f){for(var g=0;g<f.length;g++){var v=f[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(x,v.key,v)}}return function(x,f,g){return f&&d(x.prototype,f),g&&d(x,g),x}})(),r=$x(),t=a(r),n=O5();function a(d){return d&&d.__esModule?d:{default:d}}function s(d,x){if(!(d instanceof x))throw new TypeError("Cannot call a class as a function")}var c=(function(){function d(x,f,g){s(this,d),this.canvas=x,this.encodings=f,this.options=g}return e(d,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var f=0;f<this.encodings.length;f++){var g=(0,t.default)(this.options,this.encodings[f].options);this.drawCanvasBarcode(g,this.encodings[f]),this.drawCanvasText(g,this.encodings[f]),this.moveCanvasDrawing(this.encodings[f])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var f=this.canvas.getContext("2d");f.save(),(0,n.calculateEncodingAttributes)(this.encodings,this.options,f);var g=(0,n.getTotalWidthOfEncodings)(this.encodings),v=(0,n.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=g+this.options.marginLeft+this.options.marginRight,this.canvas.height=v,f.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(f.fillStyle=this.options.background,f.fillRect(0,0,this.canvas.width,this.canvas.height)),f.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(f,g){var v=this.canvas.getContext("2d"),w=g.data,E;f.textPosition=="top"?E=f.marginTop+f.fontSize+f.textMargin:E=f.marginTop,v.fillStyle=f.lineColor;for(var N=0;N<w.length;N++){var S=N*f.width+g.barcodePadding;w[N]==="1"?v.fillRect(S,E,f.width,f.height):w[N]&&v.fillRect(S,E,f.width,f.height*w[N])}}},{key:"drawCanvasText",value:function(f,g){var v=this.canvas.getContext("2d"),w=f.fontOptions+" "+f.fontSize+"px "+f.font;if(f.displayValue){var E,N;f.textPosition=="top"?N=f.marginTop+f.fontSize-f.textMargin:N=f.height+f.textMargin+f.marginTop+f.fontSize,v.font=w,f.textAlign=="left"||g.barcodePadding>0?(E=0,v.textAlign="left"):f.textAlign=="right"?(E=g.width-1,v.textAlign="right"):(E=g.width/2,v.textAlign="center"),v.fillText(g.text,E,N)}}},{key:"moveCanvasDrawing",value:function(f){var g=this.canvas.getContext("2d");g.translate(f.width,0)}},{key:"restoreCanvas",value:function(){var f=this.canvas.getContext("2d");f.restore()}}]),d})();return H1.default=c,H1}var G1={},lE;function lV(){if(lE)return G1;lE=1,Object.defineProperty(G1,"__esModule",{value:!0});var e=(function(){function x(f,g){for(var v=0;v<g.length;v++){var w=g[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(f,w.key,w)}}return function(f,g,v){return g&&x(f.prototype,g),v&&x(f,v),f}})(),r=$x(),t=a(r),n=O5();function a(x){return x&&x.__esModule?x:{default:x}}function s(x,f){if(!(x instanceof f))throw new TypeError("Cannot call a class as a function")}var c="http://www.w3.org/2000/svg",d=(function(){function x(f,g,v){s(this,x),this.svg=f,this.encodings=g,this.options=v,this.document=v.xmlDocument||document}return e(x,[{key:"render",value:function(){var g=this.options.marginLeft;this.prepareSVG();for(var v=0;v<this.encodings.length;v++){var w=this.encodings[v],E=(0,t.default)(this.options,w.options),N=this.createGroup(g,E.marginTop,this.svg);this.setGroupOptions(N,E),this.drawSvgBarcode(N,E,w),this.drawSVGText(N,E,w),g+=w.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,n.calculateEncodingAttributes)(this.encodings,this.options);var g=(0,n.getTotalWidthOfEncodings)(this.encodings),v=(0,n.getMaximumHeightOfEncodings)(this.encodings),w=g+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(w,v),this.options.background&&this.drawRect(0,0,w,v,this.svg).setAttribute("fill",this.options.background)}},{key:"drawSvgBarcode",value:function(g,v,w){var E=w.data,N;v.textPosition=="top"?N=v.fontSize+v.textMargin:N=0;for(var S=0,T=0,j=0;j<E.length;j++)T=j*v.width+w.barcodePadding,E[j]==="1"?S++:S>0&&(this.drawRect(T-v.width*S,N,v.width*S,v.height,g),S=0);S>0&&this.drawRect(T-v.width*(S-1),N,v.width*S,v.height,g)}},{key:"drawSVGText",value:function(g,v,w){var E=this.document.createElementNS(c,"text");if(v.displayValue){var N,S;E.setAttribute("font-family",v.font),E.setAttribute("font-size",v.fontSize),v.fontOptions.includes("bold")&&E.setAttribute("font-weight","bold"),v.fontOptions.includes("italic")&&E.setAttribute("font-style","italic"),v.textPosition=="top"?S=v.fontSize-v.textMargin:S=v.height+v.textMargin+v.fontSize,v.textAlign=="left"||w.barcodePadding>0?(N=0,E.setAttribute("text-anchor","start")):v.textAlign=="right"?(N=w.width-1,E.setAttribute("text-anchor","end")):(N=w.width/2,E.setAttribute("text-anchor","middle")),E.setAttribute("x",N),E.setAttribute("y",S),E.appendChild(this.document.createTextNode(w.text)),g.appendChild(E)}}},{key:"setSvgAttributes",value:function(g,v){var w=this.svg;w.setAttribute("width",g+"px"),w.setAttribute("height",v+"px"),w.setAttribute("x","0px"),w.setAttribute("y","0px"),w.setAttribute("viewBox","0 0 "+g+" "+v),w.setAttribute("xmlns",c),w.setAttribute("version","1.1")}},{key:"createGroup",value:function(g,v,w){var E=this.document.createElementNS(c,"g");return E.setAttribute("transform","translate("+g+", "+v+")"),w.appendChild(E),E}},{key:"setGroupOptions",value:function(g,v){g.setAttribute("fill",v.lineColor)}},{key:"drawRect",value:function(g,v,w,E,N){var S=this.document.createElementNS(c,"rect");return S.setAttribute("x",g),S.setAttribute("y",v),S.setAttribute("width",w),S.setAttribute("height",E),N.appendChild(S),S}}]),x})();return G1.default=d,G1}var V1={},oE;function oV(){if(oE)return V1;oE=1,Object.defineProperty(V1,"__esModule",{value:!0});var e=(function(){function n(a,s){for(var c=0;c<s.length;c++){var d=s[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(a,s,c){return s&&n(a.prototype,s),c&&n(a,c),a}})();function r(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var t=(function(){function n(a,s,c){r(this,n),this.object=a,this.encodings=s,this.options=c}return e(n,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),n})();return V1.default=t,V1}var cE;function cV(){if(cE)return z1;cE=1,Object.defineProperty(z1,"__esModule",{value:!0});var e=iV(),r=c(e),t=lV(),n=c(t),a=oV(),s=c(a);function c(d){return d&&d.__esModule?d:{default:d}}return z1.default={CanvasRenderer:r.default,SVGRenderer:n.default,ObjectRenderer:s.default},z1}var j0={},uE;function R5(){if(uE)return j0;uE=1,Object.defineProperty(j0,"__esModule",{value:!0});function e(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function r(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function t(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var n=(function(c){t(d,c);function d(x,f){e(this,d);var g=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return g.name="InvalidInputException",g.symbology=x,g.input=f,g.message='"'+g.input+'" is not a valid input for '+g.symbology,g}return d})(Error),a=(function(c){t(d,c);function d(){e(this,d);var x=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return x.name="InvalidElementException",x.message="Not supported type to render on",x}return d})(Error),s=(function(c){t(d,c);function d(){e(this,d);var x=r(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return x.name="NoElementException",x.message="No element to render on.",x}return d})(Error);return j0.InvalidInputException=n,j0.InvalidElementException=a,j0.NoElementException=s,j0}var dE;function uV(){if(dE)return L1;dE=1,Object.defineProperty(L1,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},r=sV(),t=c(r),n=cV(),a=c(n),s=R5();function c(g){return g&&g.__esModule?g:{default:g}}function d(g){if(typeof g=="string")return x(g);if(Array.isArray(g)){for(var v=[],w=0;w<g.length;w++)v.push(d(g[w]));return v}else{if(typeof HTMLCanvasElement<"u"&&g instanceof HTMLImageElement)return f(g);if(g&&g.nodeName&&g.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&g instanceof SVGElement)return{element:g,options:(0,t.default)(g),renderer:a.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement)return{element:g,options:(0,t.default)(g),renderer:a.default.CanvasRenderer};if(g&&g.getContext)return{element:g,renderer:a.default.CanvasRenderer};if(g&&(typeof g>"u"?"undefined":e(g))==="object"&&!g.nodeName)return{element:g,renderer:a.default.ObjectRenderer};throw new s.InvalidElementException}}function x(g){var v=document.querySelectorAll(g);if(v.length!==0){for(var w=[],E=0;E<v.length;E++)w.push(d(v[E]));return w}}function f(g){var v=document.createElement("canvas");return{element:v,options:(0,t.default)(g),renderer:a.default.CanvasRenderer,afterRender:function(){g.setAttribute("src",v.toDataURL())}}}return L1.default=d,L1}var W1={},fE;function dV(){if(fE)return W1;fE=1,Object.defineProperty(W1,"__esModule",{value:!0});var e=(function(){function n(a,s){for(var c=0;c<s.length;c++){var d=s[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(a,s,c){return s&&n(a.prototype,s),c&&n(a,c),a}})();function r(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var t=(function(){function n(a){r(this,n),this.api=a}return e(n,[{key:"handleCatch",value:function(s){if(s.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw s.message;else throw s;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(s){try{var c=s.apply(void 0,arguments);return this.api._options.valid(!0),c}catch(d){return this.handleCatch(d),this.api}}}]),n})();return W1.default=t,W1}var Cp,hE;function fV(){if(hE)return Cp;hE=1;var e=rV(),r=j(e),t=$x(),n=j(t),a=nV(),s=j(a),c=aV(),d=j(c),x=uV(),f=j(x),g=C5(),v=j(g),w=dV(),E=j(w),N=R5(),S=j5(),T=j(S);function j(z){return z&&z.__esModule?z:{default:z}}var D=function(){},I=function(ae,Z,H){var he=new D;if(typeof ae>"u")throw Error("No element to render on was provided.");return he._renderProperties=(0,f.default)(ae),he._encodings=[],he._options=T.default,he._errorHandler=new E.default(he),typeof Z<"u"&&(H=H||{},H.format||(H.format=M()),he.options(H)[H.format](Z,H).render()),he};I.getModule=function(z){return r.default[z]};for(var L in r.default)r.default.hasOwnProperty(L)&&V(r.default,L);function V(z,ae){D.prototype[ae]=D.prototype[ae.toUpperCase()]=D.prototype[ae.toLowerCase()]=function(Z,H){var he=this;return he._errorHandler.wrapBarcodeCall(function(){H.text=typeof H.text>"u"?void 0:""+H.text;var q=(0,n.default)(he._options,H);q=(0,v.default)(q);var se=z[ae],ve=X(Z,se,q);return he._encodings.push(ve),he})}}function X(z,ae,Z){z=""+z;var H=new ae(z,Z);if(!H.valid())throw new N.InvalidInputException(H.constructor.name,z);var he=H.encode();he=(0,s.default)(he);for(var q=0;q<he.length;q++)he[q].options=(0,n.default)(Z,he[q].options);return he}function M(){return r.default.CODE128?"CODE128":Object.keys(r.default)[0]}D.prototype.options=function(z){return this._options=(0,n.default)(this._options,z),this},D.prototype.blank=function(z){var ae=new Array(z+1).join("0");return this._encodings.push({data:ae}),this},D.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var z;for(var ae in this._renderProperties){z=this._renderProperties[ae];var Z=(0,n.default)(this._options,z.options);Z.format=="auto"&&(Z.format=M()),this._errorHandler.wrapBarcodeCall(function(){var H=Z.value,he=r.default[Z.format.toUpperCase()],q=X(H,he,Z);W(z,q,Z)})}}},D.prototype.render=function(){if(!this._renderProperties)throw new N.NoElementException;if(Array.isArray(this._renderProperties))for(var z=0;z<this._renderProperties.length;z++)W(this._renderProperties[z],this._encodings,this._options);else W(this._renderProperties,this._encodings,this._options);return this},D.prototype._defaults=T.default;function W(z,ae,Z){ae=(0,s.default)(ae);for(var H=0;H<ae.length;H++)ae[H].options=(0,n.default)(Z,ae[H].options),(0,d.default)(ae[H].options);(0,d.default)(Z);var he=z.renderer,q=new he(z.element,ae,Z);q.render(),z.afterRender&&z.afterRender()}return typeof window<"u"&&(window.JsBarcode=I),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(z,ae){var Z=[];return jQuery(this).each(function(){Z.push(this)}),I(Z,z,ae)}),Cp=I,Cp}var hV=fV();const xV=O2(hV),I5={"Termal 30x60mm":{width:227,height:113,type:"thermal",labelsPerRow:1,rowsPerPage:1},"Termal 50x30mm":{width:189,height:113,type:"thermal",labelsPerRow:1,rowsPerPage:1},"A4 Standart (3x7)":{width:794,height:1123,type:"a4",labelsPerRow:3,rowsPerPage:7,marginTop:40,marginLeft:20,horizontalGap:10,verticalGap:0,labelWidth:240,labelHeight:144},"A4 Raf Etiketi (2x4)":{width:794,height:1123,type:"a4",labelsPerRow:2,rowsPerPage:4,marginTop:50,marginLeft:50,horizontalGap:50,verticalGap:50,labelWidth:320,labelHeight:220}},mV=[{key:"{{URUN_ADI}}",label:"rn Ad",sample:"rnek rn"},{key:"{{FIYAT}}",label:"Fiyat",sample:"129.90"},{key:"{{BARKOD}}",label:"Barkod/Stok Kodu",sample:"8690123456789"},{key:"{{TARIH}}",label:"Tarih",sample:"10.02.2026"},{key:"{{MARKA}}",label:"Marka",sample:"rnek Marka"},{key:"{{GRUP}}",label:"Grup",sample:"Gda"},{key:"{{PARA_BIRIMI}}",label:"Para Birimi",sample:""}],nx={"Termal 30x60mm":{paper_size:"Termal 30x60mm",items:[{type:"text",id:"name",x:10,y:10,width:200,height:40,text:"{{URUN_ADI}}",font_size:14,font_bold:!0,text_align:"center",color:"#000000"},{type:"text",id:"price",x:10,y:55,width:200,height:30,text:"{{FIYAT}} {{PARA_BIRIMI}}",font_size:24,font_bold:!0,text_align:"center",color:"#000000"},{type:"text",id:"barcode",x:10,y:90,width:200,height:15,text:"{{BARKOD}}",font_size:10,font_family:"monospace",text_align:"center",color:"#000000"}]},"A4 Standart (3x7)":{paper_size:"A4 Standart (3x7)",items:[{type:"text",id:"name",x:10,y:10,width:220,height:60,text:"{{URUN_ADI}}",font_size:16,font_bold:!0,text_align:"center",color:"#000000"},{type:"text",id:"price",x:10,y:80,width:220,height:40,text:"{{FIYAT}} {{PARA_BIRIMI}}",font_size:32,font_bold:!0,text_align:"center",color:"#000000"}]}},gV=[{label:"Inter",value:"Inter, sans-serif"},{label:"Arial",value:"Arial, sans-serif"},{label:"Roboto",value:"Roboto, sans-serif"},{label:"Times New Roman",value:"Times New Roman, serif"},{label:"Courier New",value:"Courier New, monospace"},{label:"Georgia",value:"Georgia, serif"},{label:"Verdana",value:"Verdana, sans-serif"},{label:"Tahoma",value:"Tahoma, sans-serif"}],pV=[{label:"Normal",value:"normal"},{label:"talik",value:"italic"},{label:"Yar Sktrlm",value:"semi-condensed"},{label:"Yar Sktrlm talik",value:"semi-condensed-italic"}];function bV({isOpen:e,onClose:r,initialPaperSize:t,allPaperSizes:n,onUpdatePaperSize:a}){const[s,c]=J.useState(null),[d,x]=J.useState(null),[f,g]=J.useState(null),[v,w]=J.useState({x:0,y:0}),E=J.useRef(null),[N,S]=J.useState(1),T=n||I5;J.useEffect(()=>{const ge=ie=>{d&&(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(ie.key)&&ie.preventDefault(),c(Le=>{const Q=[...Le.items],B=Q.findIndex(ue=>ue.id===d);if(B===-1)return Le;const te={...Q[B]},U=ie.shiftKey?10:1,P=ie.shiftKey?10:1;return ie.altKey?(ie.key==="ArrowRight"&&(te.width+=P),ie.key==="ArrowLeft"&&(te.width=Math.max(10,te.width-P)),ie.key==="ArrowDown"&&(te.height+=P),ie.key==="ArrowUp"&&(te.height=Math.max(10,te.height-P))):(ie.key==="ArrowRight"&&(te.x+=U),ie.key==="ArrowLeft"&&(te.x-=U),ie.key==="ArrowDown"&&(te.y+=U),ie.key==="ArrowUp"&&(te.y-=U)),Q[B]=te,{...Le,items:Q}}))};return window.addEventListener("keydown",ge),()=>window.removeEventListener("keydown",ge)},[d]),J.useEffect(()=>{if(e){const ge=t||"Termal 30x60mm",ie=`label_design_template_${ge}`,Le=localStorage.getItem(ie);if(Le)try{c(JSON.parse(Le))}catch{c(nx[ge]||j(ge))}else c(nx[ge]||j(ge))}},[e,t]);const j=ge=>({paper_size:ge,items:[]});if(!e||!s)return null;const D=T[s.paper_size],I=D?.type==="a4"?D.labelWidth:D?.width||300,L=D?.type==="a4"?D.labelHeight:D?.height||200,V=()=>{const ge=`label_design_template_${s.paper_size}`;localStorage.setItem(ge,JSON.stringify(s)),alert(`${s.paper_size} iin tasarm kaydedildi!`)},X=()=>{confirm("Varsaylan ablona dnmek istediinize emin misiniz?")&&(c(nx[s.paper_size]||j(s.paper_size)),x(null))},M=ge=>{s.paper_size!==ge&&confirm(`Kat boyutunu "${ge}" olarak deitirmek mevcut tasarm sfrlayacaktr. Devam etmek istiyor musunuz?`)&&(a&&a(ge),x(null))},W=()=>{const ge={type:"text",id:`text_${Date.now()}`,x:10,y:10,width:100,height:20,text:"Yeni Metin",font_family:"Inter",font_size:12,font_bold:!1,color:"#000000",text_align:"left",max_lines:1};c(ie=>({...ie,items:[...ie.items,ge]})),x(ge.id)},z=ge=>{const ie=ge==="{{BARKOD}}",Le={type:"text",id:`var_${Date.now()}`,x:10,y:10,width:ie?150:120,height:ie?50:20,text:ge,font_family:ie?void 0:"Inter, sans-serif",font_size:ie?14:12,font_bold:!ie,font_style:"normal",color:"#000000",text_align:ie?"center":"left",is_barcode:ie,max_lines:1,barcode_width:ie?2:void 0,barcode_height:ie?40:void 0,barcode_display_value:ie?!0:void 0};c(Q=>({...Q,items:[...Q.items,Le]})),x(Le.id)},ae=()=>{const ge={type:"shape",id:`shape_${Date.now()}`,x:20,y:20,width:50,height:50,fill_color:"#e5e7eb",border:{thickness:1,color:"#000000"}};c(ie=>({...ie,items:[...ie.items,ge]})),x(ge.id)},Z=()=>{d&&(c(ge=>({...ge,items:ge.items.filter(ie=>ie.id!==d)})),x(null))},H=(ge,ie)=>{d&&c(Le=>({...Le,items:Le.items.map(Q=>{if(Q.id===d){const B={...Q,[ge]:ie};if(ge==="text"&&ie==="{{BARKOD}}"&&!Q.is_barcode&&(B.is_barcode=!0,B.text_align="center",B.barcode_width=2,B.barcode_height=40,B.barcode_display_value=!0,B.font_size=14,Q.width<150&&(B.width=150),Q.height<50&&(B.height=50),Q.max_lines===1&&(B.max_lines=1)),ge==="text"&&ie!=="{{BARKOD}}"&&Q.is_barcode&&(B.is_barcode=!1),ge==="max_lines"&&Q.type==="text"){const te=(B.font_size||12)*1.3;B.height=Math.round(te*ie)}if(ge==="font_size"&&Q.type==="text"&&Q.max_lines){const te=ie*1.3;B.height=Math.round(te*Q.max_lines)}return B}return Q})}))},he=(ge,ie)=>{ge.stopPropagation(),x(ie.id),g(ie.id);const Le=E.current.getBoundingClientRect(),Q=(ge.clientX-Le.left)/N,B=(ge.clientY-Le.top)/N;w({x:Q-ie.x,y:B-ie.y})},q=ge=>{if(!f)return;const ie=E.current.getBoundingClientRect(),Le=(ge.clientX-ie.left)/N,Q=(ge.clientY-ie.top)/N,B=Le-v.x,te=Q-v.y;c(U=>({...U,items:U.items.map(P=>P.id===f?{...P,x:Math.round(B),y:Math.round(te)}:P)}))},se=()=>{g(null)},ve=ge=>{if(ge.type!=="text"||!ge.text)return 1;const ie=(ge.font_size||12)*.6,Le=Math.floor(ge.width/ie);if(Le<=0)return 1;const Q=ge.text.split(`
`);let B=0;return Q.forEach(te=>{te.length===0?B+=1:B+=Math.ceil(te.length/Le)}),B},le=s.items.find(ge=>ge.id===d);return J.useEffect(()=>{s&&s.items.forEach(ge=>{if(ge.is_barcode||ge.text==="{{BARKOD}}"){const ie=document.getElementById(`barcode-${ge.id}`);if(!ie)return;try{xV(ie,ge.text==="{{BARKOD}}"?"1234567890":ge.text||"1234567890",{format:"CODE128",width:ge.barcode_width||2,height:ge.barcode_height||40,displayValue:ge.barcode_display_value!==!1,fontSize:ge.font_size||14,margin:0,background:"transparent",lineColor:ge.color||"#000000"})}catch(Le){console.error("Barcode rendering error:",Le)}}})},[s]),l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-7xl h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"bg-gradient-to-r from-amber-600 to-orange-600 px-6 py-4 flex items-center justify-between flex-shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Etiket Tasarmcs"}),l.jsx("p",{className:"text-white/70 text-sm",children:"rn etiketlerini zelletirin"})]})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[l.jsxs("div",{className:"w-72 bg-slate-50 border-r border-slate-200 p-4 flex flex-col gap-6 overflow-y-auto",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Kat / Etiket Boyutu"}),l.jsx("select",{value:s.paper_size,onChange:ge=>M(ge.target.value),className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm font-medium focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none",children:Object.keys(T).map(ge=>l.jsx("option",{value:ge,children:ge},ge))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Element Ekle"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("button",{onClick:W,className:"px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-50 hover:border-slate-300 transition-all shadow-sm flex items-center justify-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Metin"]}),l.jsxs("button",{onClick:ae,className:"px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-50 hover:border-slate-300 transition-all shadow-sm flex items-center justify-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6z"})}),"ekil"]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Deikenler (Otomatik)"}),l.jsx("div",{className:"space-y-1.5 max-h-60 overflow-y-auto pr-1",children:mV.map(ge=>l.jsxs("button",{onClick:()=>z(ge.key),className:"w-full text-left px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs hover:bg-orange-50 hover:border-orange-200 hover:text-orange-700 transition-all group flex justify-between items-center",children:[l.jsx("span",{className:"font-medium",children:ge.label}),l.jsx("code",{className:"text-[10px] bg-slate-100 px-1.5 py-0.5 rounded text-slate-500 group-hover:bg-orange-100 group-hover:text-orange-600",children:ge.key})]},ge.key))})]}),l.jsxs("div",{className:"mt-auto space-y-3",children:[l.jsx("button",{onClick:V,className:"w-full py-3 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl font-bold shadow-lg shadow-orange-500/20 hover:shadow-xl hover:-translate-y-0.5 transition-all",children:"ablonu Kaydet"}),l.jsx("button",{onClick:X,className:"w-full py-2.5 bg-slate-100 text-slate-600 rounded-xl font-medium hover:bg-slate-200 transition-all",children:"Varsaylana Dn"})]})]}),l.jsxs("div",{className:"flex-1 bg-slate-100 p-8 overflow-hidden flex flex-col relative",children:[l.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 bg-white p-1.5 rounded-lg shadow-sm border border-slate-200 z-10",children:[l.jsx("button",{onClick:()=>S(ge=>Math.max(.5,ge-.1)),className:"p-1.5 hover:bg-slate-100 rounded text-slate-600",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),l.jsxs("span",{className:"text-xs font-medium text-slate-600 flex items-center px-1 min-w-[3rem] justify-center",children:[Math.round(N*100),"%"]}),l.jsx("button",{onClick:()=>S(ge=>Math.min(2,ge+.1)),className:"p-1.5 hover:bg-slate-100 rounded text-slate-600",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),l.jsx("div",{className:"flex-1 overflow-auto flex items-center justify-center",children:l.jsx("div",{ref:E,className:"bg-white shadow-xl relative transition-transform duration-200 ease-out origin-center",style:{width:I,height:L,transform:`scale(${N})`,backgroundImage:"linear-gradient(#f1f5f9 1px, transparent 1px), linear-gradient(90deg, #f1f5f9 1px, transparent 1px)",backgroundSize:"10px 10px"},onMouseMove:q,onMouseUp:se,onMouseLeave:se,onClick:()=>x(null),children:s.items.map(ge=>l.jsx("div",{className:`absolute cursor-move group ${d===ge.id?"ring-2 ring-orange-500 ring-offset-2 z-10":"hover:outline hover:outline-1 hover:outline-orange-300"}`,style:{left:ge.x,top:ge.y,width:ge.width,height:ge.height,backgroundColor:ge.type==="shape"?ge.fill_color:"transparent",border:ge.border?`${ge.border.thickness}px solid ${ge.border.color}`:"none",fontFamily:ge.is_barcode||ge.text==="{{BARKOD}}"?"sans-serif":ge.font_family||"Inter, sans-serif",fontSize:ge.font_size,fontWeight:ge.font_bold?"bold":"normal",fontStyle:ge.font_style==="italic"||ge.font_style==="semi-condensed-italic"?"italic":"normal",fontStretch:ge.font_style==="semi-condensed"||ge.font_style==="semi-condensed-italic"?"semi-condensed":"normal",color:ge.color,textAlign:ge.text_align,overflow:"hidden",padding:0,...ge.is_barcode||ge.text==="{{BARKOD}}"?{display:"flex",alignItems:"center",justifyContent:"center"}:{paddingTop:"2px",...ge.type==="text"&&ge.max_lines&&ge.max_lines>1?{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:ge.max_lines,whiteSpace:"normal",wordBreak:"break-word",lineHeight:"1.3"}:ge.type==="text"&&ge.height<=(ge.font_size||12)*1.6?{whiteSpace:"nowrap",textOverflow:"ellipsis",lineHeight:"1.2"}:{whiteSpace:"normal",wordBreak:"break-word",lineHeight:"1.2"}}},onMouseDown:ie=>he(ie,ge),onClick:ie=>ie.stopPropagation(),children:ge.is_barcode||ge.text==="{{BARKOD}}"?l.jsx("svg",{id:`barcode-${ge.id}`,style:{maxWidth:"100%",maxHeight:"100%"}}):ge.type==="text"&&l.jsx("span",{children:ge.text})},ge.id))})}),l.jsx("div",{className:"absolute bottom-4 left-4 bg-white/80 backdrop-blur px-3 py-1.5 rounded-lg border border-slate-200 text-xs text-slate-500",children:D?.type==="a4"?l.jsxs("span",{children:["A4 Sayfada ",D.rowsPerPage,"x",D.labelsPerRow," dzen | Etiket: ",D.labelWidth,"x",D.labelHeight,"px"]}):l.jsxs("span",{children:["Termal Rulo | ",D?.width,"x",D?.height,"px"]})})]}),l.jsx("div",{className:"w-72 bg-white border-l border-slate-200 p-4 overflow-y-auto",children:le?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"zellikler"}),l.jsx("button",{onClick:Z,className:"text-red-500 hover:text-red-600 hover:bg-red-50 p-1.5 rounded transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1 block",children:"X Konumu"}),l.jsx("input",{type:"number",value:le.x,onChange:ge=>H("x",parseInt(ge.target.value)||0),className:"w-full px-2 py-1 text-sm border border-slate-200 rounded"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1 block",children:"Y Konumu"}),l.jsx("input",{type:"number",value:le.y,onChange:ge=>H("y",parseInt(ge.target.value)||0),className:"w-full px-2 py-1 text-sm border border-slate-200 rounded"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1 block",children:"Genilik"}),l.jsx("input",{type:"number",value:le.width,onChange:ge=>H("width",parseInt(ge.target.value)||0),className:"w-full px-2 py-1 text-sm border border-slate-200 rounded"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1 block",children:"Ykseklik"}),l.jsx("input",{type:"number",value:le.height,onChange:ge=>H("height",parseInt(ge.target.value)||0),className:"w-full px-2 py-1 text-sm border border-slate-200 rounded"})]})]}),le.type==="text"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1.5 block",children:"Metin erii"}),l.jsx("textarea",{rows:3,value:le.text,onChange:ge=>H("text",ge.target.value),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none resize-none"}),l.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:["Deiken kullanabilirsiniz: ","{{URUN_ADI}}"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1.5 block",children:"Yaz Tipi"}),l.jsxs("select",{value:le.font_family||"Inter, sans-serif",onChange:ge=>H("font_family",ge.target.value),className:"w-full px-2 py-1.5 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",children:[gV.map(ge=>l.jsx("option",{value:ge.value,style:{fontFamily:ge.value},children:ge.label},ge.value)),l.jsx("option",{value:"Libre Barcode 128 Text",children:"Barkod (Code 128)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1.5 block",children:"Yaz Stili"}),l.jsx("select",{value:le.font_style||"normal",onChange:ge=>H("font_style",ge.target.value),className:"w-full px-2 py-1.5 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none",children:pV.map(ge=>l.jsx("option",{value:ge.value,children:ge.label},ge.value))})]}),(le.is_barcode||le.text==="{{BARKOD}}")&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1.5 block",children:"ubuk Genilii"}),l.jsx("input",{type:"range",min:"1",max:"4",step:"0.5",value:le.barcode_width||2,onChange:ge=>H("barcode_width",parseFloat(ge.target.value)),className:"w-full"}),l.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mt-1",children:[l.jsx("span",{children:"nce (1)"}),l.jsx("span",{className:"font-medium text-slate-600",children:le.barcode_width||2}),l.jsx("span",{children:"Kaln (4)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1.5 block",children:"Barkod Ykseklii"}),l.jsx("input",{type:"number",value:le.barcode_height||40,onChange:ge=>H("barcode_height",parseInt(ge.target.value)),className:"w-full px-2 py-1.5 text-sm border border-slate-200 rounded-lg"})]}),l.jsxs("label",{className:"flex items-center gap-2 p-2 border border-slate-100 rounded cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:le.barcode_display_value!==!1,onChange:ge=>H("barcode_display_value",ge.target.checked),className:"rounded text-orange-600 focus:ring-orange-500"}),l.jsx("span",{className:"text-xs text-slate-600",children:"Metni Gster"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1.5 block",children:"Font Boyutu"}),l.jsx("input",{type:"number",value:le.font_size,onChange:ge=>H("font_size",parseInt(ge.target.value)||12),className:"w-full px-2 py-1.5 text-sm border border-slate-200 rounded-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1.5 block",children:"Satr Says"}),l.jsx("input",{type:"number",min:"1",value:le.max_lines||1,onChange:ge=>H("max_lines",parseInt(ge.target.value)||1),className:"w-full px-2 py-1.5 text-sm border border-slate-200 rounded-lg"}),(()=>{const ge=ve(le),ie=le.max_lines||1,Le=ge>ie,B=Le?"text-red-600":ge===ie?"text-orange-600":"text-green-600";return l.jsxs("p",{className:`text-[10px] ${B} mt-1 font-medium`,children:["Tahmini: ~",ge," satr ",Le&&" Tayor!"]})})()]})]}),l.jsx("div",{className:"grid grid-cols-1 gap-3",children:l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1.5 block",children:"Hizalama"}),l.jsx("div",{className:"flex bg-slate-100 rounded-lg p-1",children:["left","center","right"].map(ge=>l.jsx("button",{onClick:()=>H("text_align",ge),className:`flex-1 p-1 rounded ${le.text_align===ge?"bg-white shadow-sm text-orange-600":"text-slate-400"}`,children:l.jsxs("svg",{className:"w-4 h-4 mx-auto",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:[ge==="left"&&l.jsx("path",{d:"M4 6h16M4 12h10M4 18h8"}),ge==="center"&&l.jsx("path",{d:"M4 6h16M7 12h10M9 18h6"}),ge==="right"&&l.jsx("path",{d:"M4 6h16M10 12h10M12 18h8"})]})},ge))})]})}),l.jsxs("label",{className:"flex items-center justify-between p-3 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50",children:[l.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Kaln Yaz (Bold)"}),l.jsx("div",{className:`w-10 h-6 rounded-full p-1 transition-colors ${le.font_bold?"bg-orange-500":"bg-slate-200"}`,children:l.jsx("div",{className:`w-4 h-4 rounded-full bg-white shadow-sm transition-transform ${le.font_bold?"translate-x-4":"translate-x-0"}`})}),l.jsx("input",{type:"checkbox",checked:le.font_bold,onChange:ge=>H("font_bold",ge.target.checked),className:"hidden"})]})]}),l.jsx("div",{className:"pt-4 border-t border-slate-200",children:l.jsxs("button",{onClick:Z,className:"w-full flex items-center justify-center gap-2 py-2.5 bg-red-50 text-red-600 rounded-xl font-medium hover:bg-red-100 transition-colors border border-red-200",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Nesneyi Sil"]})})]}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 text-center",children:[l.jsx("svg",{className:"w-12 h-12 mb-3 opacity-20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),l.jsx("p",{className:"text-sm font-medium",children:"Dzenlemek iin bir element sein"})]})})]})]})})}function vV({isOpen:e,onClose:r,products:t}){const[n,a]=J.useState(""),[s,c]=J.useState("Tm"),[d,x]=J.useState([]),[f,g]=J.useState([]),[v,w]=J.useState("Termal 30x60mm"),[E,N]=J.useState(!1),[S,T]=J.useState({}),[j,D]=J.useState(!1),[I,L]=J.useState(""),[V,X]=J.useState(""),[M,W]=J.useState(""),[z,ae]=J.useState(null),Z={...I5,...S};J.useEffect(()=>{if(e){const U=localStorage.getItem("custom_label_sizes");if(U)try{T(JSON.parse(U))}catch(P){console.error("Error loading custom sizes",P)}H(v)}},[e]),J.useEffect(()=>{H(v)},[v,E,S]);const H=U=>{if(!U)return;const P=`label_design_template_${U}`,ue=localStorage.getItem(P),Re=nx[U];if(ue)try{ae(JSON.parse(ue))}catch{ae(Re||he(U))}else ae(Re||he(U))},he=U=>Z[U]?{paper_size:U,items:[]}:null,q=()=>{if(!I||!V||!M){alert("Ltfen tm alanlar doldurun.");return}if(Z[I]){alert("Bu isimde bir boyut zaten var.");return}const U=parseFloat(V),P=parseFloat(M),ue=Math.round(U*3.7795),Re=Math.round(P*3.7795),De={width:ue,height:Re,widthMm:U,heightMm:P,type:"thermal",labelsPerRow:1,rowsPerPage:1,isCustom:!0},Ne={...S,[I]:De};T(Ne),localStorage.setItem("custom_label_sizes",JSON.stringify(Ne)),w(I),D(!1),L(""),X(""),W("")},se=U=>{if(window.confirm(`${U} boyutunu silmek istediinize emin misiniz?`)){const P={...S};delete P[U],T(P),localStorage.setItem("custom_label_sizes",JSON.stringify(P)),w("Termal 30x60mm")}};J.useEffect(()=>{let U=t;n&&(U=U.filter(P=>P.name.toLowerCase().includes(n.toLowerCase()))),s&&s!=="Tm"&&(U=U.filter(P=>P.group===s)),x(U)},[t,n,s]);const ve=U=>{g(P=>P.find(Re=>Re.stock_code===U.stock_code)?P.map(Re=>Re.stock_code===U.stock_code?{...Re,quantity:Re.quantity+1}:Re):[...P,{...U,quantity:1}])},le=()=>{const U=d.slice(0,100).filter(P=>!f.some(ue=>ue.stock_code===P.stock_code)).map(P=>({...P,quantity:1}));g(P=>[...P,...U])},ge=U=>{g(P=>P.filter((ue,Re)=>Re!==U))},ie=(U,P)=>{const ue=[...f];ue[U].quantity=parseInt(P)||1,g(ue)},Le=()=>{if(f.length===0)return alert("Listeye rn ekleyin.");if(!z)return alert("ablon yklenemedi.");const U=Z[z.paper_size];if(!U)return alert("Kat ayarlar bulunamad.");const P=window.open("","_blank");if(!P)return alert("Yazc penceresi alamad. Ltfen alr pencerelere izin verin.");const ue=f.flatMap(ye=>Array(ye.quantity).fill(ye));let Re="",De=U.widthMm||Math.round(U.width/3.7795),Ne=U.heightMm||Math.round(U.height/3.7795);if(U.type==="thermal")Re=ue.map(ye=>Q(ye,z)).join("");else if(U.type==="a4"){const ye=U.rowsPerPage*U.labelsPerRow,me=[];for(let Ce=0;Ce<ue.length;Ce+=ye){const G=ue.slice(Ce,Ce+ye);me.push(G)}Re=me.map(Ce=>`
                <div class="a4-page">
                    ${Ce.map(G=>Q(G,z)).join("")}
                </div>
            `).join("")}const Ke=`<!DOCTYPE html>
            <html>
                <head>
                    <title>Etiket Yazdr - ${z.paper_size}</title>
                    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"><\/script>
                    <style>
                        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Roboto:wght@400;700&family=Libre+Barcode+128+Text&display=swap');

                        body { margin: 0; padding: 0; font-family: 'Inter', sans-serif; }

                        /* Layout Styles */
                        ${U.type==="thermal"?`
                            .label-container {
                                width: ${U.width}px;
                                height: ${U.height}px;
                                position: relative;
                                page-break-after: always;
                                overflow: hidden;
                                box-sizing: border-box;
                            }
                        `:`
                            .a4-page {
                                width: ${U.width}px;
                                height: ${U.height}px;
                                position: relative;
                                page-break-after: always;
                                background: white;
                                padding-top: ${U.marginTop}px;
                                padding-left: ${U.marginLeft}px;
                            }
                            .label-container {
                                width: ${U.labelWidth}px;
                                height: ${U.labelHeight}px;
                                position: relative;
                                float: left;
                                margin-right: ${U.horizontalGap}px;
                                margin-bottom: ${U.verticalGap}px;
                                overflow: hidden;
                                box-sizing: border-box;
                                /* border: 1px dotted #eee; Debug border */
                            }
                            /* Clearfix for rows */
                            .a4-page::after { content: ""; display: table; clear: both; }

                            /* Remove right margin for last item in row */
                            .label-container:nth-child(${U.labelsPerRow}n) {
                                margin-right: 0;
                            }
                        `}

                        /* Element Styles */
                        .element { position: absolute; display: flex; align-items: center; overflow: hidden; white-space: pre-wrap; line-height: 1.2; }
                        .element img { width: 100%; height: 100%; object-fit: contain; }

                        @media print {
                            @page { margin: 0; size: ${De}mm ${Ne}mm; }
                            body { -webkit-print-color-adjust: exact; }
                        }
                    </style>
                </head>
                <body>
                    ${Re}
                    <script>
                        window.onload = () => {
                            // Initialize all barcodes
                            if (typeof JsBarcode !== 'undefined') {
                                JsBarcode(".barcode-element").init();
                            }
                            
                            setTimeout(() => {
                                window.print();
                            }, 1000); // Increased timeout to ensure barcodes render
                        };
                    <\/script>
                </body>
            </html>
        `;P.document.open(),P.document.write(Ke),P.document.close()},Q=(U,P,ue)=>{const Re=Ne=>Ne?Ne.replace(/{{URUN_ADI}}/g,U.name||"").replace(/{{FIYAT}}/g,parseFloat(U.price).toLocaleString("tr-TR",{minimumFractionDigits:2})).replace(/{{BARKOD}}/g,U.barcode||U.stock_code||"").replace(/{{STOK_KODU}}/g,U.stock_code||"").replace(/{{MARKA}}/g,U.brand||"").replace(/{{GRUP}}/g,U.group||"").replace(/{{TARIH}}/g,new Date().toLocaleDateString("tr-TR")).replace(/{{PARA_BIRIMI}}/g,""):"";return`<div class="label-container">${P.items.map(Ne=>{const Ke=Ne.type==="text"&&Ne.height<=(Ne.font_size||12)*1.6,ye=Ne.type==="text"&&Ne.max_lines&&Ne.max_lines>1,me=Ne.is_barcode||Ne.text==="{{BARKOD}}"?"'Libre Barcode 128 Text', cursive":Ne.font_family||"sans-serif",Ce=Ne.font_style==="italic"||Ne.font_style==="semi-condensed-italic"?"italic":"normal",G=Ne.font_style==="semi-condensed"||Ne.font_style==="semi-condensed-italic"?"semi-condensed":"normal",Me=`
                left: ${Ne.x}px;
                top: ${Ne.y}px;
                width: ${Ne.width}px;
                height: ${Ne.height}px;
                overflow: hidden;
                font-family: ${me};
                font-size: ${Ne.font_size}px;
                font-weight: ${Ne.font_bold?"bold":"normal"};
                font-style: ${Ce};
                font-stretch: ${G};
                color: ${Ne.color};
                text-align: ${Ne.text_align};
                transform: ${Ne.barcode_scale_x!==void 0?`scaleX(${Ne.barcode_scale_x})`:"none"};
                transform-origin: center;
                background-color: ${Ne.type==="shape"&&Ne.fill_color||"transparent"};
                ${Ne.border?`border: ${Ne.border.thickness}px solid ${Ne.border.color};`:""}
                z-index: ${Ne.type==="text"?10:1};
                padding-top: 2px;
                ${!(Ne.is_barcode||Ne.text==="{{BARKOD}}")&&ye?`display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: ${Ne.max_lines}; white-space: normal; word-break: break-word; line-height: 1.3;`:!(Ne.is_barcode||Ne.text==="{{BARKOD}}")&&Ke?"white-space: nowrap; text-overflow: ellipsis; line-height: 1.2;":"white-space: normal; word-break: break-word; line-height: 1.2;"}
                ${Ne.is_barcode||Ne.text==="{{BARKOD}}"?"display: flex; align-items: center; justify-content: center;":""}
            `;if(Ne.type==="text"){if(Ne.is_barcode||Ne.text==="{{BARKOD}}")return`<div class="element" style="${Me}">
                        <svg class="barcode-element"
                            data-value="${Re(Ne.text)||"1234567890"}"
                            data-format="CODE128"
                            data-width="${Ne.barcode_width||2}"
                            data-height="${Ne.barcode_height||40}"
                            data-display-value="${Ne.barcode_display_value!==!1}"
                            data-font-size="${Ne.font_size||14}"
                            style="max-width: 100%; max-height: 100%;"
                        ></svg>
                    </div>`;const Ae=Re(Ne.text);return`<div class="element" style="${Me}">${Ae}</div>`}}).join("")}</div>`};if(!e)return null;const B=["Tm",...new Set(t.map(U=>U.group).filter(Boolean))],te=f.reduce((U,P)=>U+P.quantity,0);return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[85vh] flex flex-col overflow-hidden",children:[l.jsx("div",{className:"bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 px-8 py-6 flex-shrink-0",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),"rn Etiketi Yazdr"]}),l.jsx("p",{className:"text-white/80 mt-2 text-sm",children:"rnleriniz iin fiyat etiketi oluturun ve yazdrn"})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsxs("div",{className:"flex-1 flex min-h-0 bg-gradient-to-br from-gray-50 to-orange-50/30 p-4 gap-4",children:[l.jsxs("div",{className:"w-64 bg-white rounded-2xl border border-gray-100 shadow-sm flex flex-col p-5 gap-4",children:[l.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2 text-sm",children:[l.jsx("svg",{className:"w-5 h-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filtrele"]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"rn Ad"}),l.jsx("input",{className:"w-full mt-2 px-4 py-2.5 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all",placeholder:"Ara...",value:n,onChange:U=>a(U.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Grup"}),l.jsx("select",{className:"w-full mt-2 px-4 py-2.5 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all",value:s,onChange:U=>c(U.target.value),children:B.map(U=>l.jsx("option",{value:U,children:U},U))})]}),l.jsx("button",{onClick:()=>{a(""),c("Tm")},className:"px-4 py-2.5 bg-gray-100 text-gray-600 rounded-xl font-medium hover:bg-gray-200 transition-all text-sm",children:"Temizle"}),l.jsx("div",{className:"mt-auto pt-4 border-t border-gray-100",children:l.jsxs("button",{onClick:le,className:"w-full px-4 py-3 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl font-semibold shadow-lg shadow-orange-500/25 hover:shadow-xl hover:-translate-y-0.5 transition-all flex items-center justify-center gap-2",children:["Tmn Ekle",l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]}),l.jsxs("div",{className:"flex-1 bg-white rounded-2xl border border-gray-100 shadow-sm flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50 px-5 py-4 border-b border-gray-100 flex items-center justify-between",children:[l.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"rn Listesi"}),l.jsxs("span",{className:"text-gray-500 text-xs",children:[d.length," rn"]})]}),l.jsxs("div",{className:"flex-1 overflow-auto",children:[l.jsxs("table",{className:"w-full text-sm text-left",children:[l.jsx("thead",{className:"bg-gray-50 text-gray-500 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 w-16",children:"Ekle"}),l.jsx("th",{className:"px-4 py-3",children:"Stok Kodu"}),l.jsx("th",{className:"px-4 py-3",children:"rn Ad"}),l.jsx("th",{className:"px-4 py-3 text-right",children:"Fiyat"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-50",children:d.map(U=>l.jsxs("tr",{className:"hover:bg-orange-50/50 transition-colors",children:[l.jsx("td",{className:"px-4 py-3",children:l.jsx("button",{onClick:()=>ve(U),className:"p-2 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-lg hover:shadow-md transition-all",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("span",{className:"font-mono text-sm text-orange-600 bg-orange-50 px-2 py-1 rounded-lg",children:U.stock_code})}),l.jsx("td",{className:"px-4 py-3 font-medium text-gray-800 truncate max-w-[200px]",children:U.name}),l.jsxs("td",{className:"px-4 py-3 text-right font-bold text-gray-900",children:["",parseFloat(U.price).toLocaleString("tr-TR",{minimumFractionDigits:2})]})]},U.stock_code))})]}),d.length===0&&l.jsx("div",{className:"text-center py-12 text-gray-400",children:"rn bulunamad"})]})]}),l.jsxs("div",{className:"w-80 flex flex-col gap-4",children:[l.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h3",{className:"font-bold text-gray-800",children:"Etiket Ayarlar"}),l.jsx("button",{onClick:()=>D(!0),className:"text-[10px] bg-orange-100 text-orange-700 px-2 py-1 rounded-lg font-bold hover:bg-orange-200 transition-colors",children:"+ Yeni Boyut"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Kat Boyutu"}),Z[v]?.isCustom&&l.jsx("button",{onClick:()=>se(v),className:"text-[10px] text-red-500 hover:text-red-700 underline",children:"Sil"})]}),l.jsx("select",{value:v,onChange:U=>w(U.target.value),className:"w-full px-3 py-2 bg-gray-50 border-0 rounded-lg text-sm focus:ring-2 focus:ring-orange-500",children:Object.keys(Z).map(U=>l.jsx("option",{value:U,children:U},U))})]}),l.jsxs("button",{onClick:()=>N(!0),className:"w-full px-4 py-2 bg-indigo-50 text-indigo-600 rounded-lg font-bold text-sm hover:bg-indigo-100 transition-colors flex items-center justify-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"ablonu Dzenle"]})]})]}),l.jsxs("div",{className:"flex-1 bg-white rounded-2xl border border-gray-100 shadow-sm flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50 px-5 py-4 border-b border-gray-100 flex justify-between items-center",children:[l.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"Yazdrlacaklar"}),l.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full font-bold",children:te})]}),l.jsxs("div",{className:"flex-1 overflow-auto p-3 space-y-2",children:[f.map((U,P)=>l.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-orange-50/50 p-3 rounded-xl border border-gray-100 group",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-semibold text-gray-800 text-sm truncate",children:U.name}),l.jsx("div",{className:"text-xs text-orange-600 font-mono",children:U.stock_code})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",value:U.quantity,min:"1",onChange:ue=>ie(P,ue.target.value),className:"w-10 px-1 py-1 bg-white border border-gray-200 rounded text-center text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-orange-500"}),l.jsx("button",{onClick:()=>ge(P),className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},P)),f.length===0&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-400 text-xs",children:"Liste bo"})})]}),l.jsxs("div",{className:"p-4 border-t border-gray-100 space-y-2",children:[l.jsxs("button",{onClick:Le,disabled:f.length===0,className:`w-full py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${f.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg shadow-green-500/25 hover:shadow-xl hover:-translate-y-0.5"}`,children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Yazdr"]}),f.length>0&&l.jsx("button",{onClick:()=>g([]),className:"w-full py-2 bg-red-50 text-red-600 rounded-lg font-medium hover:bg-red-100 transition-all text-xs",children:"Listeyi Temizle"})]})]})]})]})]})}),j&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"bg-gray-800 px-6 py-4 flex items-center justify-between",children:[l.jsx("h3",{className:"text-white font-bold",children:"Yeni Kat Boyutu"}),l.jsx("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-white transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Boyut Ad"}),l.jsx("input",{type:"text",value:I,onChange:U=>L(U.target.value),placeholder:"rn: Kk Raf Etiketi",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 outline-none"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Genilik (mm)"}),l.jsx("input",{type:"number",value:V,onChange:U=>X(U.target.value),placeholder:"40",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ykseklik (mm)"}),l.jsx("input",{type:"number",value:M,onChange:U=>W(U.target.value),placeholder:"20",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 outline-none"})]})]}),l.jsx("button",{onClick:q,className:"w-full py-3 bg-orange-500 text-white rounded-xl font-bold hover:bg-orange-600 transition-colors shadow-lg shadow-orange-500/20",children:"Ekle"})]})]})}),l.jsx(bV,{isOpen:E,onClose:()=>N(!1),initialPaperSize:v,allPaperSizes:Z})]})}function yV(){const[e,r]=J.useState([]),[t,n]=J.useState(!0),[a,s]=J.useState(!1),[c,d]=J.useState(!1),[x,f]=J.useState(null),[g,v]=J.useState(null),[w,E]=J.useState({show:!1,title:"",message:""}),[N,S]=J.useState(!1),[T,j]=J.useState({name:"",stockCode:"",barcode:"",brand:"",group:"",priceMin:"",priceMax:"",displayLimit:"100"}),[D,I]=J.useState({key:"name",direction:"asc"}),[L,V]=J.useState({name:"",stock_code:"",barcode:"",price:"",stock:"",group:"",brand:""}),[X,M]=J.useState(!1),[W,z]=J.useState("new"),[ae,Z]=J.useState(!1),[H,he]=J.useState(!1),q=()=>{z("new"),M(!0)},se=()=>{z("update"),M(!0)},ve=()=>{const Ce=e.map(Ae=>({"Stok Kodu":Ae.stock_code||"",Barkod:Ae.barcode||"","rn Ad":Ae.name||"",Marka:Ae.brand||"",Grup:Ae.group||"",Stok:Ae.stock||0,Fiyat:Ae.price||0})),G=rx.json_to_sheet(Ce),Me=rx.book_new();rx.book_append_sheet(Me,G,"rnler"),mG(Me,`urunler_${new Date().toISOString().slice(0,10)}.xlsx`)};J.useEffect(()=>{le()},[]);const le=async()=>{try{const Ce=await Sn.getAll();r(Ce.data?.products||[])}catch(Ce){console.error("rnler yklenirken hata:",Ce)}finally{n(!1)}},ge=Ce=>typeof Ce!="string"?"":Ce.toLowerCase().replace(//g,"g").replace(//g,"u").replace(//g,"s").replace(//g,"i").replace(//g,"o").replace(//g,"c"),ie=()=>{let Ce=[...e];if(T.name){const G=ge(T.name);Ce=Ce.filter(Me=>ge(Me.name).includes(G))}if(T.stockCode){const G=ge(T.stockCode);Ce=Ce.filter(Me=>ge(Me.stock_code).includes(G))}if(T.barcode){const G=ge(T.barcode);Ce=Ce.filter(Me=>ge(Me.barcode).includes(G))}if(T.brand){const G=ge(T.brand);Ce=Ce.filter(Me=>ge(Me.brand).includes(G))}if(T.group){const G=ge(T.group);Ce=Ce.filter(Me=>ge(Me.group).includes(G))}if(T.priceMin){const G=parseFloat(T.priceMin);isNaN(G)||(Ce=Ce.filter(Me=>Me.price>=G))}if(T.priceMax){const G=parseFloat(T.priceMax);isNaN(G)||(Ce=Ce.filter(Me=>Me.price<=G))}if(Ce.sort((G,Me)=>{const Ae=D.key;if(G[Ae]==null||Me[Ae]==null)return 0;if(Ae==="stock"||Ae==="price"){const de=parseFloat(G[Ae])||0,Se=parseFloat(Me[Ae])||0;return D.direction==="asc"?de-Se:Se-de}const oe=String(G[Ae]).toLowerCase().localeCompare(String(Me[Ae]).toLowerCase(),"tr");return D.direction==="asc"?oe:-oe}),T.displayLimit!=="all"){const G=parseInt(T.displayLimit);return{products:Ce.slice(0,G),total:Ce.length}}return{products:Ce,total:Ce.length}},{products:Le,total:Q}=ie(),B=Ce=>{I(G=>({key:Ce,direction:G.key===Ce&&G.direction==="asc"?"desc":"asc"}))},te=Ce=>D.key!==Ce?"":D.direction==="asc"?"":"",U=()=>{j({name:"",stockCode:"",barcode:"",brand:"",group:"",priceMin:"",priceMax:"",displayLimit:"100"})},P=()=>`STK-${Math.floor(1e5+Math.random()*9e5)}`,ue=()=>{f(null),V({name:"",stock_code:P(),barcode:"",price:"",stock:"",group:"",brand:""}),s(!0)},Re=Ce=>{f(Ce),V({name:Ce.name||"",stock_code:Ce.stock_code||"",barcode:Ce.barcode||"",price:Ce.price?.toString()||"",stock:Ce.stock?.toString()||"",group:Ce.group||"",brand:Ce.brand||""}),s(!0)},De=Ce=>{f(Ce),d(!0)},Ne=async Ce=>{Ce.preventDefault();try{const G={...L,price:parseFloat(L.price)||0,stock:parseInt(L.stock)||0};x?await Sn.update(x.stock_code,G):await Sn.add(G),s(!1),le()}catch(G){const Me=G.response?.data?.message||G.message||"";Me.includes("products_stock_code")&&Me.includes("unique")?E({show:!0,title:" Stok Kodu Kullanmda",message:`"${L.stock_code}" stok kodu sistemde zaten kaytldr. Ltfen farkl bir stok kodu giriniz.`}):E({show:!0,title:" Hata Olutu",message:Me||"Bilinmeyen bir hata olutu."})}},Ke=async Ce=>{if(confirm("Bu rn silmek istediinizden emin misiniz?"))try{await Sn.delete(Ce),le()}catch(G){alert("Silme hatas: "+(G.response?.data?.message||G.message))}},ye=async()=>{if(!g){alert(" Ltfen nce bir resim seiniz! (Dosya alglanmad)");return}alert("Resim ykleniyor... Ltfen bekleyin.");const Ce=new FormData;Ce.append("product_image",g);try{await Sn.updateImage(x.stock_code,Ce),alert("Resim baaryla gncellendi!"),d(!1),v(null),le()}catch(G){console.error(G),alert("Resim ykleme hatas: "+(G.response?.data?.message||G.message))}},me=Ce=>{const G=parseInt(Ce)||0;return G<=0?"text-red-600 font-bold":G<10?"text-amber-600 font-bold":"text-gray-800"};return t?l.jsx("div",{className:"flex items-center justify-center min-h-96 transition-all duration-300",children:l.jsx("div",{className:"spinner"})}):l.jsxs("div",{className:"flex min-h-screen transition-all duration-300",children:[N&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>S(!1)}),l.jsxs("aside",{className:`
                fixed lg:sticky lg:top-0 lg:h-screen inset-y-0 left-0 z-50
                w-72 bg-white/90 backdrop-blur-2xl border-r border-slate-200/60 p-5 overflow-y-auto
                transform transition-transform duration-500 cubic-bezier(0.4, 0, 0.2, 1) text-slate-700
                ${N?"translate-x-0 shadow-2xl":"-translate-x-full lg:translate-x-0 lg:shadow-none"}
            `,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6 relative",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-blue-500/20 text-white",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),l.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Filtreleme"})]}),l.jsx("button",{onClick:()=>S(!1),className:"lg:hidden p-2 hover:bg-slate-100 rounded-xl transition-all active:scale-95",children:l.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1",children:"rn Ad"}),l.jsx("input",{type:"text",value:T.name,onChange:Ce=>j({...T,name:Ce.target.value}),placeholder:"rn ara...",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all text-slate-700 placeholder:text-slate-400 text-sm font-medium"})]}),l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1",children:"Stok Kodu"}),l.jsx("input",{type:"text",value:T.stockCode,onChange:Ce=>j({...T,stockCode:Ce.target.value}),placeholder:"Stok kodu ara...",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all text-slate-700 placeholder:text-slate-400 text-sm font-medium"})]}),l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1",children:"Barkod"}),l.jsx("input",{type:"text",value:T.barcode,onChange:Ce=>j({...T,barcode:Ce.target.value}),placeholder:"Barkod ara...",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all text-slate-700 placeholder:text-slate-400 text-sm font-medium"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1",children:"Marka"}),l.jsx("input",{type:"text",value:T.brand,onChange:Ce=>j({...T,brand:Ce.target.value}),placeholder:"Marka",className:"w-full px-3 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 transition-all text-slate-700 placeholder:text-slate-400 text-sm font-medium"})]}),l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1",children:"Grup"}),l.jsx("input",{type:"text",value:T.group,onChange:Ce=>j({...T,group:Ce.target.value}),placeholder:"Grup",className:"w-full px-3 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500/20 transition-all text-slate-700 placeholder:text-slate-400 text-sm font-medium"})]})]}),l.jsxs("div",{className:"p-3.5 rounded-xl bg-slate-50 border border-slate-200/60",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Fiyat Aral (TL)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",value:T.priceMin,onChange:Ce=>j({...T,priceMin:Ce.target.value}),placeholder:"Min",className:"flex-1 px-3 py-2 bg-white rounded-lg border border-slate-200 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none text-sm transition-all text-center font-medium text-slate-700 placeholder:text-slate-400"}),l.jsx("span",{className:"text-slate-400 font-bold",children:"-"}),l.jsx("input",{type:"number",value:T.priceMax,onChange:Ce=>j({...T,priceMax:Ce.target.value}),placeholder:"Max",className:"flex-1 px-3 py-2 bg-white rounded-lg border border-slate-200 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none text-sm transition-all text-center font-medium text-slate-700 placeholder:text-slate-400"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1",children:"Limit"}),l.jsxs("select",{value:T.displayLimit,onChange:Ce=>j({...T,displayLimit:Ce.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-medium text-slate-700 text-sm cursor-pointer",children:[l.jsx("option",{value:"50",children:"50 Urun Goster"}),l.jsx("option",{value:"100",children:"100 Urun Goster"}),l.jsx("option",{value:"1000",children:"1000 Urun Goster"}),l.jsx("option",{value:"all",children:"Hepsini Goster"})]})]})]}),l.jsx("div",{className:"mt-6 pt-5 border-t border-slate-100",children:l.jsxs("button",{onClick:U,className:"w-full py-3 bg-slate-800 text-white rounded-xl font-bold shadow-lg shadow-slate-300/50 hover:bg-slate-700 hover:shadow-xl hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2 group",children:[l.jsx("svg",{className:"w-4 h-4 group-hover:rotate-180 transition-transform duration-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Temizle"]})})]}),l.jsxs("main",{className:"flex-1 p-6 bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:[l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>S(!0),className:"lg:hidden p-3 bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all",children:l.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-gray-800 to-gray-700 bg-clip-text text-transparent",children:"rn Ynetimi"}),l.jsxs("p",{className:"text-gray-500 mt-1 flex items-center gap-2",children:[l.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-blue-100 text-blue-600 rounded-full text-xs font-semibold",children:Q}),"rn kaytl"]})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("button",{onClick:ve,className:"group px-4 py-2.5 bg-gradient-to-r from-teal-500 to-cyan-600 text-white rounded-xl font-semibold shadow-lg shadow-cyan-500/25 hover:shadow-xl hover:shadow-cyan-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 whitespace-nowrap text-sm",children:[l.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Excel Dar Aktar"]}),l.jsxs("button",{onClick:q,className:"group px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-xl font-semibold shadow-lg shadow-green-500/25 hover:shadow-xl hover:shadow-green-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 whitespace-nowrap text-sm",children:[l.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Excel Yeni"]}),l.jsxs("button",{onClick:se,className:"group px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/25 hover:shadow-xl hover:shadow-blue-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 whitespace-nowrap text-sm",children:[l.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Excel Gncelle"]}),l.jsxs("button",{onClick:()=>Z(!0),className:"group px-4 py-2.5 bg-gradient-to-r from-violet-500 to-purple-600 text-white rounded-xl font-semibold shadow-lg shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 whitespace-nowrap text-sm",children:[l.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Toplu Resim"]}),l.jsxs("button",{onClick:()=>he(!0),className:"group px-4 py-2.5 bg-gradient-to-r from-amber-500 to-orange-600 text-white rounded-xl font-semibold shadow-lg shadow-orange-500/25 hover:shadow-xl hover:shadow-orange-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 whitespace-nowrap text-sm",children:[l.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Etiket Yazdr"]}),l.jsxs("button",{onClick:ue,className:"px-4 py-2.5 bg-gradient-to-r from-gray-900 to-gray-800 text-white rounded-xl font-bold shadow-lg shadow-gray-900/25 hover:shadow-xl hover:shadow-gray-900/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 whitespace-nowrap text-sm",children:[l.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Yeni rn"]})]})]})}),l.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-gray-100/80 shadow-xl shadow-gray-200/50 overflow-hidden",children:l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50 border-b border-gray-100",children:[l.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider w-16",children:"Resim"}),l.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>B("stock_code"),children:l.jsxs("span",{className:"flex items-center gap-1",children:["Stok Kodu ",te("stock_code")]})}),l.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Barkod"}),l.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>B("name"),children:l.jsxs("span",{className:"flex items-center gap-1",children:["rn Ad ",te("name")]})}),l.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>B("brand"),children:l.jsxs("span",{className:"flex items-center gap-1",children:["Marka ",te("brand")]})}),l.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>B("group"),children:l.jsxs("span",{className:"flex items-center gap-1",children:["Grup ",te("group")]})}),l.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>B("stock"),children:l.jsxs("span",{className:"flex items-center gap-1",children:["Stok ",te("stock")]})}),l.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>B("price"),children:l.jsxs("span",{className:"flex items-center gap-1",children:["Fiyat ",te("price")]})}),l.jsx("th",{className:"px-5 py-4 text-right text-xs font-bold text-gray-500 uppercase tracking-wider",children:"lemler"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-50",children:Le.map((Ce,G)=>l.jsxs("tr",{className:`group hover:bg-blue-50/50 transition-all duration-150 ${G%2===0?"bg-white":"bg-gray-50/30"}`,children:[l.jsx("td",{className:"px-5 py-4",children:Ce.image_url?l.jsx("img",{src:Ce.image_url,alt:"",className:"w-12 h-12 object-cover rounded-xl border-2 border-gray-100 shadow-sm group-hover:shadow-md group-hover:scale-105 transition-all"}):l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-100 to-gray-50 rounded-xl flex items-center justify-center border-2 border-dashed border-gray-200",children:l.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),l.jsx("td",{className:"px-5 py-4",children:l.jsx("span",{className:"font-mono text-sm font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded-lg",children:Ce.stock_code})}),l.jsx("td",{className:"px-5 py-4 font-mono text-sm text-gray-500",children:Ce.barcode||"-"}),l.jsx("td",{className:"px-5 py-4",children:l.jsx("span",{className:"font-medium text-gray-900",children:Ce.name})}),l.jsx("td",{className:"px-5 py-4 text-gray-600",children:Ce.brand||"-"}),l.jsx("td",{className:"px-5 py-4",children:Ce.group&&l.jsx("span",{className:"px-2.5 py-1 bg-gradient-to-r from-gray-100 to-gray-50 text-gray-700 rounded-lg text-xs font-semibold border border-gray-200/50",children:Ce.group})}),l.jsx("td",{className:`px-5 py-4 font-bold ${me(Ce.stock)}`,children:Ce.stock}),l.jsx("td",{className:"px-5 py-4",children:l.jsxs("span",{className:"font-bold text-gray-900",children:["",parseFloat(Ce.price).toLocaleString("tr-TR",{minimumFractionDigits:2})]})}),l.jsx("td",{className:"px-5 py-4 text-right",children:l.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>De(Ce),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-100 rounded-lg transition-all hover:scale-110",title:"Resim Ykle",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),l.jsx("button",{onClick:()=>Re(Ce),className:"p-2 text-gray-500 hover:text-amber-600 hover:bg-amber-100 rounded-lg transition-all hover:scale-110",title:"Dzenle",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:()=>Ke(Ce.stock_code),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-100 rounded-lg transition-all hover:scale-110",title:"Sil",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},Ce.stock_code))})]}),Le.length===0&&l.jsxs("div",{className:"text-center py-16",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),l.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"Henz rn yok"}),l.jsx("p",{className:"text-gray-400 text-sm mt-1",children:'lk rnnz eklemek iin "Yeni rn" butonuna tklayn'})]})]})})]}),a&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-3xl max-h-[90vh] overflow-hidden shadow-2xl",children:[l.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-10 py-8",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:l.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight",children:x?"rn Dzenle":"Yeni rn Ekle"}),l.jsx("p",{className:"text-slate-400 text-base mt-1",children:"rn bilgilerini doldurun"})]})]}),l.jsx("button",{onClick:()=>s(!1),className:"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition-all",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsxs("form",{onSubmit:Ne,className:"p-10 space-y-8 overflow-y-auto max-h-[calc(90vh-140px)] bg-gradient-to-b from-slate-50 to-white",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["rn Ad ",l.jsx("span",{className:"text-rose-500",children:"*"})]}),l.jsx("input",{type:"text",value:L.name,onChange:Ce=>V({...L,name:Ce.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"rn adn giriniz...",required:!0,autoFocus:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["Stok Kodu ",l.jsx("span",{className:"text-rose-500",children:"*"})]}),l.jsx("input",{type:"text",value:L.stock_code,onChange:Ce=>V({...L,stock_code:Ce.target.value}),className:`w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400 font-mono ${x?"opacity-50 cursor-not-allowed bg-slate-100":""}`,placeholder:"STK-001",required:!0,disabled:!!x})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Barkod"}),l.jsx("input",{type:"text",value:L.barcode,onChange:Ce=>V({...L,barcode:Ce.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400 font-mono",placeholder:"8690123456789"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["Fiyat () ",l.jsx("span",{className:"text-rose-500",children:"*"})]}),l.jsx("input",{type:"number",step:"0.01",value:L.price,onChange:Ce=>V({...L,price:Ce.target.value}),className:"w-full px-6 py-5 text-2xl font-bold rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"0.00",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Stok Miktar"}),l.jsx("input",{type:"number",value:L.stock,onChange:Ce=>V({...L,stock:Ce.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"0"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Marka"}),l.jsx("input",{type:"text",value:L.brand,onChange:Ce=>V({...L,brand:Ce.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Marka ad..."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Grup"}),l.jsx("input",{type:"text",value:L.group,onChange:Ce=>V({...L,group:Ce.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"rn grubu..."})]}),l.jsxs("div",{className:"flex gap-4 pt-8",children:[l.jsx("button",{type:"button",onClick:()=>s(!1),className:"flex-1 py-5 text-lg font-bold text-slate-600 bg-slate-100 rounded-2xl hover:bg-slate-200 transition-all active:scale-[0.98]",children:"ptal"}),l.jsxs("button",{type:"submit",className:"flex-[2] py-5 text-xl font-bold text-white bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl hover:from-emerald-600 hover:to-teal-600 shadow-xl shadow-emerald-500/30 transition-all hover:scale-[1.01] active:scale-[0.99]",children:[" ",x?"Gncelle":"Kaydet"]})]})]})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" Resim Gncelle"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"file",accept:"image/*",onChange:Ce=>v(Ce.target.files[0]),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),l.jsx("div",{className:"text-xs text-center text-gray-400",children:g?` Seilen: ${g.name}`:" Dosya seilmedi"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-gray-200 rounded-xl hover:bg-gray-50",children:"ptal"}),l.jsx("button",{type:"button",onClick:ye,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors",children:"Ykle"})]})]})]})}),l.jsx(NG,{isOpen:X,onClose:()=>M(!1),type:W,onSuccess:le}),l.jsx(AG,{isOpen:ae,onClose:()=>Z(!1),products:e}),l.jsx(vV,{isOpen:H,onClose:()=>he(!1),products:e}),w.show&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in zoom-in-95 duration-200",children:[l.jsx("div",{className:"bg-gradient-to-r from-red-500 to-rose-600 px-6 py-4",children:l.jsx("h3",{className:"text-xl font-bold text-white",children:w.title})}),l.jsx("div",{className:"p-6",children:l.jsx("p",{className:"text-gray-700 text-base leading-relaxed",children:w.message})}),l.jsx("div",{className:"px-6 pb-6",children:l.jsx("button",{onClick:()=>E({show:!1,title:"",message:""}),className:"w-full py-3 bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-800 hover:to-gray-900 text-white font-bold rounded-xl transition-all shadow-lg",children:"Tamam"})})]})})]})}function wV(){const[e,r]=J.useState([]),[t,n]=J.useState(!0),[a,s]=J.useState(""),[c,d]=J.useState("Tm"),[x,f]=J.useState("Aktif"),[g,v]=J.useState(null),[w,E]=J.useState("asc"),[N,S]=J.useState(!1),[T,j]=J.useState(!1),[D,I]=J.useState(null),[L,V]=J.useState({customer_code:"",name:"",company:"",group:"Cari",is_active:!0,address:"",city:"",district:"",zip_code:"",country:"",tax_office:"",tax_number:""}),[X,M]=J.useState(!1),[W,z]=J.useState("payment"),[ae,Z]=J.useState({customer_id:"",amount:"",description:"deme",payment_type:"Nakit"}),[H,he]=J.useState(!1),[q,se]=J.useState(""),ve=H?e.filter(ye=>{const me=q.toLowerCase();return(ye.name||"").toLowerCase().includes(me)||(ye.tax_number||"").includes(me)||(ye.customer_code||"").toLowerCase().includes(me)}):[];J.useEffect(()=>{le()},[]);const le=async()=>{try{const ye=await kn.getAll();r(ye.data?.customers||[])}catch(ye){console.error("Mteriler yklenirken hata:",ye)}finally{n(!1)}},ge=["Tm","Cari","Perakende","Firmalar"],ie=["Tm","Aktif","Pasif"],Le=e.filter(ye=>{const me=ye.is_active!==!1;return!(x==="Aktif"&&!me||x==="Pasif"&&me||c!=="Tm"&&(ye.group||"Cari")!==c||a&&!`${ye.customer_code||""} ${ye.name} ${ye.city} ${ye.district}`.toLowerCase().includes(a.toLowerCase()))}).sort((ye,me)=>{if(!g)return 0;let Ce=ye[g],G=me[g];return g==="balance"?(Ce=parseFloat(ye.balance)||0,G=parseFloat(me.balance)||0,w==="asc"?Ce-G:G-Ce):(Ce=(Ce||"").toString(),G=(G||"").toString(),w==="asc"?Ce.localeCompare(G,"tr"):G.localeCompare(Ce,"tr"))}),Q=ye=>{g===ye?E(w==="asc"?"desc":"asc"):(v(ye),E("asc"))},B=()=>{V({customer_code:"",name:"",company:"",group:"Cari",is_active:!0,address:"",city:"",district:"",zip_code:"",country:"",tax_office:"",tax_number:""}),S(!0)},te=ye=>{I(ye),V({customer_code:ye.customer_code||"",name:ye.name||"",company:ye.company||"",group:ye.group||"Cari",is_active:ye.is_active!==!1,address:ye.address||"",city:ye.city||"",district:ye.district||"",zip_code:ye.zip_code||"",country:ye.country||"",tax_office:ye.tax_office||"",tax_number:ye.tax_number||""}),j(!0)},U=()=>{const ye=e.map(G=>G.customer_code).filter(G=>G&&/^M\d+$/.test(G)).map(G=>parseInt(G.substring(1),10));return`M${((ye.length>0?Math.max(...ye):0)+1).toString().padStart(4,"0")}`},P=async()=>{if(!L.name.trim()){alert("Mteri ad bo braklamaz.");return}const ye={...L};ye.customer_code.trim()||(ye.customer_code=U());try{const me=await kn.add(ye);me.data?.success?(alert(me.data.message),S(!1),le()):alert("Hata: "+me.data?.message)}catch(me){alert("Mteri eklenirken hata: "+(me.response?.data?.message||me.message))}},ue=async()=>{if(D)try{const ye=await kn.update(D.id,L);ye.data?.success?(alert(ye.data.message),j(!1),le()):alert("Gncelleme hatas: "+ye.data?.message)}catch(ye){alert("Gncelleme hatas: "+(ye.response?.data?.message||ye.message))}},Re=async ye=>{if(confirm("Kalc olarak silmek istediinize emin misiniz?"))try{const me=await kn.delete(ye);alert(me.data?.message),me.data?.success&&le()}catch(me){alert("Silme hatas: "+(me.response?.data?.message||me.message))}},De=async()=>{if(!ae.customer_id||!ae.amount){alert("Ltfen mteri sein ve tutar girin.");return}try{let ye;W==="payment"?ye=await kn.addPayment(ae):ye=await kn.addManualDebit(ae),ye.data?.success?(alert(ye.data.message),M(!1),le(),Z({customer_id:"",amount:"",description:"deme",payment_type:"Nakit"})):alert("Hata: "+ye.data?.message)}catch(ye){alert("lem hatas: "+(ye.response?.data?.message||ye.message))}},Ne=()=>{const ye=["Mteri Kodu","Ksa Ad","Firma","Grubu","Durum","Bakiye","ehir","le","Adres","Vergi Dairesi","Vergi No"],me=Le.map(de=>[de.customer_code||"",de.name||"",de.company||"",de.group||"Cari",de.is_active!==!1?"Aktif":"Pasif",(parseFloat(de.balance)||0).toFixed(2),de.city||"",de.district||"",de.address||"",de.tax_office||"",de.tax_number||""]),G="\uFEFF"+[ye,...me].map(de=>de.map(Se=>`"${String(Se).replace(/"/g,'""')}"`).join(";")).join(`
`),Me=new Blob([G],{type:"text/csv;charset=utf-8"}),Ae=URL.createObjectURL(Me),oe=document.createElement("a");oe.href=Ae,oe.download=`Musteriler_${new Date().toISOString().split("T")[0]}.csv`,oe.click(),URL.revokeObjectURL(Ae)},Ke=ye=>ye?new Date(ye).toLocaleString("tr-TR"):"-";return t?l.jsx("div",{className:"flex items-center justify-center min-h-96",children:l.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col",children:[l.jsx("header",{className:"bg-gradient-to-r from-slate-50 via-white to-blue-50/30 px-6 py-5 shadow-sm border-b border-gray-100 sticky top-0 z-20",children:l.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-gray-800 to-gray-700 bg-clip-text text-transparent",children:"Mteriler"}),l.jsxs("p",{className:"text-gray-500 mt-1 flex items-center gap-2",children:[l.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-blue-100 text-blue-600 rounded-full text-xs font-semibold",children:e.length}),"mteri kaytl"]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3 w-full lg:w-auto",children:[l.jsxs("button",{onClick:()=>{Z(ye=>({...ye,description:"deme"})),z("payment"),M(!0)},className:"flex-1 lg:flex-none min-w-fit px-6 py-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-xl font-semibold shadow-lg shadow-green-500/25 hover:shadow-xl hover:shadow-green-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2 whitespace-nowrap",children:[l.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Mteriden deme Al"]}),l.jsxs("button",{onClick:()=>{Z(ye=>({...ye,description:"Firmaya deme Yapld"})),z("debt"),M(!0)},className:"flex-1 lg:flex-none min-w-fit px-6 py-3 bg-gradient-to-r from-orange-500 to-amber-600 text-white rounded-xl font-semibold shadow-lg shadow-orange-500/25 hover:shadow-xl hover:shadow-orange-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2 whitespace-nowrap",children:[l.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Firmaya deme Yap"]}),l.jsxs("button",{onClick:Ne,className:"flex-1 lg:flex-none min-w-fit px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/25 hover:shadow-xl hover:shadow-blue-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2 whitespace-nowrap",children:[l.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Excel ndir"]}),l.jsxs("button",{onClick:B,className:"flex-1 lg:flex-none min-w-fit px-6 py-3 bg-gradient-to-r from-gray-900 to-gray-800 text-white rounded-xl font-bold shadow-lg shadow-gray-900/25 hover:shadow-xl hover:shadow-gray-900/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2 whitespace-nowrap",children:[l.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Yeni Mteri"]}),l.jsxs("button",{className:"flex-1 lg:flex-none min-w-fit px-6 py-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-xl font-semibold shadow-lg shadow-green-500/25 hover:shadow-xl hover:shadow-green-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2 whitespace-nowrap",children:[l.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Excel Ykle"]})]})]})}),l.jsx("div",{className:"flex-1 p-5 flex flex-col",children:l.jsxs("div",{className:"flex gap-5 items-start",children:[l.jsxs("div",{className:"w-64 bg-white rounded-lg shadow-md p-5 flex-shrink-0 sticky top-28",children:[l.jsx("h3",{className:"text-lg font-semibold border-b-2 border-gray-100 pb-2 mb-4",children:"Filtreleme"}),l.jsxs("div",{className:"mb-5",children:[l.jsx("label",{className:"block mb-1 font-bold text-gray-600 text-sm",children:"Hesap Durumu:"}),l.jsx("select",{value:x,onChange:ye=>f(ye.target.value),className:"w-full p-2 border border-gray-300 rounded",children:ie.map(ye=>l.jsx("option",{value:ye,children:ye==="Aktif"?"Sadece Aktifler":ye==="Pasif"?"Sadece Pasifler":ye},ye))})]}),l.jsxs("div",{className:"mb-5",children:[l.jsx("label",{className:"block mb-1 font-bold text-gray-600 text-sm",children:"Mteri Grubu:"}),l.jsx("select",{value:c,onChange:ye=>d(ye.target.value),className:"w-full p-2 border border-gray-300 rounded",children:ge.map(ye=>l.jsx("option",{value:ye,children:ye},ye))})]}),l.jsxs("div",{className:"mb-5",children:[l.jsx("label",{className:"block mb-1 font-bold text-gray-600 text-sm",children:"Arama:"}),l.jsx("input",{type:"text",value:a,onChange:ye=>s(ye.target.value),placeholder:"Ad, Kod, ehir vb. ara...",className:"w-full p-2 border border-gray-300 rounded"})]})]}),l.jsx("div",{className:"flex-1 bg-white rounded-lg shadow-md p-5",children:l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{onClick:()=>Q("customer_code"),className:"border border-gray-200 p-2 text-left bg-gray-50 cursor-pointer hover:bg-gray-100 font-semibold",children:"Mteri Kodu"}),l.jsx("th",{onClick:()=>Q("name"),className:"border border-gray-200 p-2 text-left bg-gray-50 cursor-pointer hover:bg-gray-100 font-semibold",children:"Ksa Ad"}),l.jsx("th",{onClick:()=>Q("group"),className:"border border-gray-200 p-2 text-left bg-gray-50 cursor-pointer hover:bg-gray-100 font-semibold",children:"Grubu"}),l.jsx("th",{className:"border border-gray-200 p-2 text-left bg-gray-50 font-semibold",children:"Durum"}),l.jsx("th",{onClick:()=>Q("balance"),className:"border border-gray-200 p-2 text-left bg-gray-50 cursor-pointer hover:bg-gray-100 font-semibold",children:"Bakiye"}),l.jsx("th",{className:"border border-gray-200 p-2 text-left bg-gray-50 font-semibold",children:"Bakiye Durumu"}),l.jsx("th",{className:"border border-gray-200 p-2 text-left bg-gray-50 font-semibold",children:"Son lem Tarihi"}),l.jsx("th",{className:"border border-gray-200 p-2 text-left bg-gray-50 font-semibold",children:"lemler"})]})}),l.jsx("tbody",{children:Le.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"border border-gray-200 p-4 text-center text-gray-500",children:"Kriterlere uygun kayt bulunamad."})}):Le.map(ye=>{const me=parseFloat(ye.balance)||0,Ce=ye.is_active!==!1;return l.jsxs("tr",{className:Ce?"":"opacity-60 bg-gray-50",children:[l.jsx("td",{className:"border border-gray-200 p-2 font-bold",children:ye.customer_code||"-"}),l.jsx("td",{className:"border border-gray-200 p-2",children:ye.name}),l.jsx("td",{className:"border border-gray-200 p-2",children:ye.group||"Cari"}),l.jsx("td",{className:"border border-gray-200 p-2",children:l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold text-white ${Ce?"bg-green-500":"bg-gray-500"}`,children:Ce?"Aktif":"Pasif"})}),l.jsxs("td",{className:`border border-gray-200 p-2 font-bold ${me>0?"text-red-500":me<0?"text-green-500":""}`,children:[me.toFixed(2)," TL"]}),l.jsx("td",{className:`border border-gray-200 p-2 ${me>0?"text-red-500":me<0?"text-green-500":""}`,children:me>0?"Borlu":me<0?"Alacakl":"Ntr"}),l.jsx("td",{className:"border border-gray-200 p-2",children:Ke(ye.last_transaction_date)}),l.jsx("td",{className:"border border-gray-200 p-2",children:l.jsxs("div",{className:"flex items-center justify-start gap-2",children:[l.jsx(hr,{to:`/customer/${encodeURIComponent(ye.name)}`,className:"group p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md border border-gray-100 hover:border-blue-200",title:"Detaylar",children:l.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),l.jsx("button",{onClick:()=>te(ye),className:"group p-2 text-amber-500 hover:bg-amber-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md border border-gray-100 hover:border-amber-200",title:"Dzenle",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("button",{onClick:()=>Re(ye.id),className:"group p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md border border-gray-100 hover:border-red-200",title:"Sil",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},ye.id)})})]})})]})}),N&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center p-4 z-50 overflow-y-auto",children:l.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-3xl max-h-[90vh] overflow-hidden shadow-2xl my-8",children:[l.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-10 py-8",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:l.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight",children:"Yeni Mteri Ekle"}),l.jsx("p",{className:"text-slate-400 text-base mt-1",children:"Mteri bilgilerini doldurun"})]})]}),l.jsx("button",{onClick:()=>S(!1),className:"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition-all",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsxs("div",{className:"p-10 space-y-7 overflow-y-auto max-h-[calc(90vh-200px)] bg-gradient-to-b from-slate-50 to-white",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["Mteri Ad ",l.jsx("span",{className:"text-rose-500",children:"*"})]}),l.jsx("input",{type:"text",value:L.name,onChange:ye=>V({...L,name:ye.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Mteri adn giriniz...",required:!0,autoFocus:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Mteri Kodu"}),l.jsx("input",{type:"text",value:L.customer_code,onChange:ye=>V({...L,customer_code:ye.target.value}),placeholder:"Otomatik retilir",className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400 font-mono"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Firma Bilgileri"}),l.jsx("input",{type:"text",value:L.company,onChange:ye=>V({...L,company:ye.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Firma ad..."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Grubu"}),l.jsxs("select",{value:L.group,onChange:ye=>V({...L,group:ye.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all",children:[l.jsx("option",{value:"Cari",children:"Cari"}),l.jsx("option",{value:"Perakende",children:"Perakende"}),l.jsx("option",{value:"Firmalar",children:"Firmalar"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Durumu"}),l.jsxs("select",{value:L.is_active.toString(),onChange:ye=>V({...L,is_active:ye.target.value==="true"}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all",children:[l.jsx("option",{value:"true",children:"Aktif"}),l.jsx("option",{value:"false",children:"Pasif"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Adres"}),l.jsx("textarea",{value:L.address,onChange:ye=>V({...L,address:ye.target.value}),rows:"3",className:"w-full px-6 py-5 text-lg rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all resize-none placeholder:text-slate-400",placeholder:"Adres bilgisi..."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"l"}),l.jsx("input",{type:"text",value:L.city,onChange:ye=>V({...L,city:ye.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"l"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"le"}),l.jsx("input",{type:"text",value:L.district,onChange:ye=>V({...L,district:ye.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"le"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Vergi Dairesi"}),l.jsx("input",{type:"text",value:L.tax_office,onChange:ye=>V({...L,tax_office:ye.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Vergi dairesi"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Vergi Numaras"}),l.jsx("input",{type:"text",value:L.tax_number,onChange:ye=>V({...L,tax_number:ye.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400 font-mono",placeholder:"11111111111"})]})]})]}),l.jsxs("div",{className:"bg-slate-50 px-10 py-6 border-t border-slate-100 flex gap-4",children:[l.jsx("button",{onClick:()=>S(!1),className:"flex-1 py-5 text-lg font-bold text-slate-600 bg-slate-100 rounded-2xl hover:bg-slate-200 transition-all active:scale-[0.98]",children:"ptal"}),l.jsx("button",{onClick:P,className:"flex-[2] py-5 text-xl font-bold text-white bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl hover:from-emerald-600 hover:to-teal-600 shadow-xl shadow-emerald-500/30 transition-all hover:scale-[1.01] active:scale-[0.99]",children:" Kaydet"})]})]})}),T&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 z-50 overflow-y-auto",children:l.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl max-h-[90vh] overflow-hidden shadow-2xl my-8",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-indigo-500 to-violet-500 px-8 py-6",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),"Mteri Dzenle"]}),l.jsx("button",{onClick:()=>j(!1),className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsxs("div",{className:"p-8 space-y-5 overflow-y-auto max-h-[calc(90vh-180px)]",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Durumu"}),l.jsxs("select",{value:L.is_active.toString(),onChange:ye=>V({...L,is_active:ye.target.value==="true"}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",children:[l.jsx("option",{value:"true",children:"Aktif"}),l.jsx("option",{value:"false",children:"Pasif"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Mteri Kodu"}),l.jsx("input",{type:"text",value:L.customer_code,onChange:ye=>V({...L,customer_code:ye.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Ksa Ad *"}),l.jsx("input",{type:"text",value:L.name,onChange:ye=>V({...L,name:ye.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Firma Bilgileri"}),l.jsx("input",{type:"text",value:L.company,onChange:ye=>V({...L,company:ye.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Grubu"}),l.jsxs("select",{value:L.group,onChange:ye=>V({...L,group:ye.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",children:[l.jsx("option",{value:"Cari",children:"Cari"}),l.jsx("option",{value:"Perakende",children:"Perakende"}),l.jsx("option",{value:"Firmalar",children:"Firmalar"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Adresi"}),l.jsx("input",{type:"text",value:L.address,onChange:ye=>V({...L,address:ye.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"l"}),l.jsx("input",{type:"text",value:L.city,onChange:ye=>V({...L,city:ye.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"le"}),l.jsx("input",{type:"text",value:L.district,onChange:ye=>V({...L,district:ye.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Posta Kodu"}),l.jsx("input",{type:"text",value:L.zip_code,onChange:ye=>V({...L,zip_code:ye.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"lke"}),l.jsx("input",{type:"text",value:L.country,onChange:ye=>V({...L,country:ye.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Vergi Dairesi"}),l.jsx("input",{type:"text",value:L.tax_office,onChange:ye=>V({...L,tax_office:ye.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Vergi Numaras"}),l.jsx("input",{type:"text",value:L.tax_number,onChange:ye=>V({...L,tax_number:ye.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]})]})]}),l.jsxs("div",{className:"bg-gray-50 px-8 py-5 border-t border-gray-100 flex gap-3",children:[l.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-all",children:"ptal"}),l.jsx("button",{onClick:ue,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-blue-500/25 hover:shadow-xl hover:-translate-y-0.5 transition-all",children:"Gncelle"})]})]})}),X&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl overflow-hidden shadow-2xl",children:[l.jsx("div",{className:`px-10 py-8 bg-gradient-to-br ${W==="payment"?"from-slate-900 via-slate-800 to-slate-900":"from-orange-600 via-orange-500 to-amber-500"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg ${W==="payment"?"bg-gradient-to-br from-emerald-400 to-teal-500 shadow-emerald-500/30":"bg-white/20 backdrop-blur-sm shadow-black/10"}`,children:l.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W==="payment"?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),l.jsxs("div",{children:[l.jsx("h2",{className:`text-3xl font-bold text-white tracking-tight ${W==="debt"?"animate-pulse":""}`,children:W==="payment"?"Mteriden deme Al":"Firmaya deme Yap"}),l.jsx("p",{className:`text-base mt-1 ${W==="payment"?"text-slate-200":"text-white/90"}`,children:W==="payment"?"Tahsilat ilemini kaydedin":"Firma Carisine Bor Ekleyin"})]})]}),l.jsx("button",{onClick:()=>M(!1),className:"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition-all",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsxs("div",{className:"p-10 space-y-8 bg-gradient-to-b from-slate-50 to-white",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["Mteri Se ",l.jsx("span",{className:"text-rose-500",children:"*"})]}),l.jsxs("button",{onClick:()=>{se(""),he(!0)},className:`text-sm font-bold flex items-center gap-2 transition-colors ${W==="payment"?"text-emerald-600 hover:text-emerald-700":"text-orange-600 hover:text-orange-700"}`,children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Mteri Ara"]})]}),l.jsxs("select",{value:ae.customer_id,onChange:ye=>Z({...ae,customer_id:ye.target.value}),className:`w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 outline-none transition-all ${W==="payment"?"focus:ring-emerald-500/20 focus:border-emerald-500":"focus:ring-orange-500/20 focus:border-orange-500"}`,children:[l.jsx("option",{value:"",children:"Mteri seiniz..."}),e.map(ye=>l.jsxs("option",{value:ye.id,children:[ye.name," ",ye.customer_code?`(${ye.customer_code})`:""]},ye.id))]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["Tutar () ",l.jsx("span",{className:"text-rose-500",children:"*"})]}),l.jsx("input",{type:"number",min:"0",step:"0.01",value:ae.amount,onChange:ye=>Z({...ae,amount:ye.target.value}),className:`w-full px-6 py-6 text-3xl font-bold rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 outline-none transition-all text-center placeholder:text-slate-300 ${W==="payment"?"focus:ring-emerald-500/20 focus:border-emerald-500":"focus:ring-orange-500/20 focus:border-orange-500"}`,placeholder:"0.00"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"deme Yntemi"}),l.jsx("div",{className:"flex gap-4",children:["Nakit","Kredi Kart","Havale"].map(ye=>l.jsx("button",{onClick:()=>Z({...ae,payment_type:ye}),className:`flex-1 py-5 px-4 rounded-2xl font-bold text-lg transition-all ${ae.payment_type===ye?W==="payment"?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-xl shadow-emerald-500/30":"bg-gradient-to-r from-orange-500 to-amber-600 text-white shadow-xl shadow-orange-500/30":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:ye},ye))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Aklama"}),l.jsx("input",{type:"text",value:ae.description,onChange:ye=>Z({...ae,description:ye.target.value}),className:`w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 outline-none transition-all placeholder:text-slate-400 ${W==="payment"?"focus:ring-emerald-500/20 focus:border-emerald-500":"focus:ring-orange-500/20 focus:border-orange-500"}`,placeholder:W==="payment"?"rn: Kasm ay tahsilat":"rn: Firmaya deme Yapld"})]})]}),l.jsxs("div",{className:"bg-slate-50 px-10 py-6 border-t border-slate-100 flex gap-4",children:[l.jsx("button",{onClick:()=>M(!1),className:"flex-1 py-5 text-lg font-bold text-slate-600 bg-slate-100 rounded-2xl hover:bg-slate-200 transition-all active:scale-[0.98]",children:"ptal"}),l.jsx("button",{onClick:De,className:`flex-[2] py-5 text-xl font-bold text-white rounded-2xl shadow-xl transition-all hover:scale-[1.01] active:scale-[0.99] ${W==="payment"?"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 shadow-emerald-500/30":"bg-gradient-to-r from-orange-500 to-amber-600 hover:from-orange-600 hover:to-amber-700 shadow-orange-500/30 animate-pulse"}`,children:W==="payment"?" demeyi Onayla":" Borcu Onayla"})]})]})}),H&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg overflow-hidden shadow-2xl flex flex-col max-h-[80vh]",children:[l.jsxs("div",{className:"p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Mteri Ara"}),l.jsx("button",{onClick:()=>he(!1),className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 hover:bg-gray-300 transition-colors",children:""})]}),l.jsx("div",{className:"p-5 border-b border-gray-100",children:l.jsx("input",{autoFocus:!0,type:"text",placeholder:"Mteri ad, vergi no veya kod...",value:q,onChange:ye=>se(ye.target.value),className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all text-lg"})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 bg-gray-50/50",children:ve.length===0?l.jsxs("div",{className:"text-center py-10 text-gray-400",children:[l.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),l.jsx("p",{children:"Mteri bulunamad."})]}):ve.map(ye=>l.jsxs("button",{onClick:()=>{Z({...ae,customer_id:ye.id}),he(!1)},className:"w-full text-left p-4 bg-white hover:bg-blue-50 border border-gray-100 rounded-xl transition-all shadow-sm hover:shadow-md flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-gray-800 group-hover:text-blue-700",children:ye.name}),l.jsxs("div",{className:"text-sm text-gray-500 flex gap-3 mt-1",children:[l.jsx("span",{children:ye.customer_code}),ye.tax_number&&l.jsxs("span",{className:"bg-gray-100 px-2 rounded text-xs flex items-center",children:["VN: ",ye.tax_number]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:`font-bold ${parseFloat(ye.balance)<0?"text-red-500":"text-green-500"}`,children:[parseFloat(ye.balance||0).toFixed(2)," "]}),l.jsx("div",{className:"text-xs text-gray-400",children:"Bakiye"})]})]},ye.id))})]})})]})}function _V({sale:e,onClose:r,onUpdate:t,onDelete:n}){const[a,s]=J.useState([]),[c,d]=J.useState(!1),[x,f]=J.useState(!1),[g,v]=J.useState([]),[w,E]=J.useState(""),[N,S]=J.useState({show:!1,action:null});J.useEffect(()=>{if(e){const Z=e.items||e.products||[];s(JSON.parse(JSON.stringify(Z)))}},[e]);const T=()=>a.reduce((Z,H)=>{const he=H.price*H.quantity*(1-(H.discount_rate||0)/100);return Z+he},0),j=Z=>Z?new Date(Z).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",D=(Z,H,he)=>{s(q=>{const se=[...q];return se[Z]={...se[Z],[H]:he},se})},I=Z=>{confirm("Bu rn sattan kaldrmak istediinize emin misiniz?")&&s(H=>H.filter((he,q)=>q!==Z))},L=async()=>{try{const Z=await Sn.getAll();v(Z.data?.products||[])}catch(Z){console.error("rnler yklenirken hata:",Z)}},V=async()=>{await L(),E(""),f(!0)},X=Z=>{const H={id:Z.id,name:Z.name,stock_code:Z.stock_code,barcode:Z.barcode,price:Z.price,quantity:1,discount_rate:0};s(he=>[...he,H]),f(!1)},M=g.filter(Z=>Z.name?.toLowerCase().includes(w.toLowerCase())||Z.stock_code?.toLowerCase().includes(w.toLowerCase())||Z.barcode?.includes(w)),W=Z=>{const H=localStorage.getItem(Z)||"123456";return prompt("lem iin parolay girin:")===H},z=async()=>{if(!W("sales_edit_password")){alert("Hatal parola!");return}d(!0);try{const Z=T();await kl.update(e.sale_code,{products:a,total:Z}),alert("Sat baaryla gncellendi!"),t&&t(),r()}catch(Z){alert("Gncelleme hatas: "+(Z.message||"Bilinmeyen hata"))}finally{d(!1)}},ae=async()=>{if(!W("sales_cancel_password")){alert("Hatal parola!");return}if(confirm("Bu sat iptal etmek istediinize emin misiniz?"))try{await kl.delete(e.sale_code),alert("Sat baaryla iptal edildi."),n&&n(),r()}catch(Z){alert("Hata: "+(Z.response?.data?.message||Z.message))}};return e?l.jsxs("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center p-4 z-50",children:[l.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[l.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-10 py-8",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:l.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-3xl font-bold text-white tracking-tight",children:"Sat Detay"}),l.jsx("p",{className:"text-slate-400 text-base font-mono mt-1",children:e.sale_code})]})]}),l.jsx("button",{onClick:r,className:"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition-all",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-10 bg-gradient-to-b from-slate-50 to-white",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-100 p-5 shadow-sm",children:[l.jsx("p",{className:"text-slate-500 text-sm font-medium mb-1",children:"Mteri"}),l.jsx("p",{className:"font-bold text-slate-800 text-lg",children:e.customer})]}),l.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-100 p-5 shadow-sm",children:[l.jsx("p",{className:"text-slate-500 text-sm font-medium mb-1",children:"deme"}),l.jsx("p",{className:"font-bold text-slate-800 text-lg",children:e.payment_method})]}),l.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-100 p-5 shadow-sm",children:[l.jsx("p",{className:"text-slate-500 text-sm font-medium mb-1",children:"Tarih"}),l.jsx("p",{className:"font-bold text-slate-800 text-lg",children:j(e.date)})]}),l.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl p-5 text-white shadow-xl shadow-emerald-500/30",children:[l.jsx("p",{className:"text-emerald-100 text-sm font-medium mb-1",children:"Toplam"}),l.jsxs("p",{className:"text-3xl font-bold",children:["",T().toFixed(2)]})]})]}),l.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[l.jsx("h3",{className:"font-bold text-slate-800 text-xl",children:"rnler"}),l.jsxs("button",{onClick:V,className:"px-5 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg shadow-blue-500/25 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"rn Ekle"]})]}),l.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-100 shadow-sm overflow-hidden",children:[l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Stok Kodu"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"rn Ad"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase w-24",children:"Miktar"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase w-32",children:"Fiyat"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase w-24",children:"skonto %"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-500 uppercase",children:"Toplam"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase w-16",children:"Sil"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-50",children:a.map((Z,H)=>{const he=Z.price*Z.quantity*(1-(Z.discount_rate||0)/100);return l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 py-3 text-gray-500 text-sm font-mono",children:Z.stock_code||"-"}),l.jsx("td",{className:"px-4 py-3 font-medium text-gray-800",children:Z.name}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("input",{type:"number",value:Z.quantity,onChange:q=>D(H,"quantity",parseFloat(q.target.value)||0),className:"w-full px-2 py-1.5 text-center border border-gray-200  focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("input",{type:"number",value:Z.price,onChange:q=>D(H,"price",parseFloat(q.target.value)||0),className:"w-full px-2 py-1.5 text-center border border-gray-200  focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("input",{type:"number",value:Z.discount_rate||0,onChange:q=>D(H,"discount_rate",parseFloat(q.target.value)||0),className:"w-full px-2 py-1.5 text-center border border-gray-200  focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",max:"100"})}),l.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-gray-800",children:["",he.toFixed(2)]}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("button",{onClick:()=>I(H),className:"p-2 text-red-500 hover:bg-red-50  transition-colors",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},H)})})]}),a.length===0&&l.jsx("div",{className:"text-center py-8 text-gray-500",children:"Henz rn eklenmedi"})]})]}),l.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50/80",children:l.jsxs("div",{className:"flex items-center justify-between gap-4",children:[!e.is_deleted&&l.jsxs("button",{onClick:ae,className:"px-6 py-3 bg-red-50 text-red-600  font-bold hover:bg-red-100 transition-colors flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Sat ptal Et"]}),l.jsx("div",{className:"flex-1"}),l.jsx("button",{onClick:r,className:"px-6 py-3 bg-gray-200 text-gray-700  font-bold hover:bg-gray-300 transition-colors",children:"ptal"}),l.jsx("button",{onClick:z,disabled:c,className:"px-8 py-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white  font-bold hover:from-emerald-600 hover:to-green-700 transition-all shadow-lg shadow-emerald-500/30 flex items-center gap-2 disabled:opacity-50",children:c?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent -full animate-spin"}),"Kaydediliyor..."]}):l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Deiiklikleri Kaydet"]})})]})})]}),x&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center p-4 z-[60]",children:l.jsxs("div",{className:"bg-white  w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col shadow-2xl",children:[l.jsxs("div",{className:"bg-gradient-to-r from-purple-500 via-purple-600 to-indigo-600 px-6 py-5",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm  flex items-center justify-center",children:l.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-white",children:"rn Ekle"}),l.jsxs("p",{className:"text-white/80 text-sm",children:[M.length," bulunabilir rn"]})]})]}),l.jsx("button",{onClick:()=>f(!1),className:"w-10 h-10 bg-white/20 hover:bg-white/30  flex items-center justify-center transition-all",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"mt-4 relative",children:[l.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2",children:l.jsx("svg",{className:"w-5 h-5 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),l.jsx("input",{type:"text",value:w,onChange:Z=>E(Z.target.value),placeholder:"rn ad, stok kodu veya barkod...",className:"w-full pl-12 pr-4 py-3 bg-white/20 backdrop-blur-sm text-white placeholder-purple-200  border border-white/30 focus:outline-none focus:bg-white/30 focus:border-white/50 transition-all",autoFocus:!0})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gradient-to-b from-gray-50 to-white",children:M.length===0?l.jsx("div",{className:"text-center py-12 text-gray-500",children:"rn bulunamad"}):l.jsx("div",{className:"grid grid-cols-1 gap-2",children:M.slice(0,50).map(Z=>l.jsxs("div",{onClick:()=>X(Z),className:"bg-white  border border-gray-100 shadow-sm hover:shadow-lg hover:border-purple-200 transition-all duration-300 cursor-pointer overflow-hidden group p-4 flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-500  flex items-center justify-center flex-shrink-0",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-bold text-gray-800 truncate group-hover:text-purple-600 transition-colors",children:Z.name}),l.jsxs("p",{className:"text-sm text-gray-500",children:[Z.stock_code," | ",Z.barcode]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"text-lg font-bold text-purple-600",children:["",Z.price?.toFixed(2)]}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Stok: ",Z.stock]})]}),l.jsx("svg",{className:"w-5 h-5 text-gray-300 group-hover:text-purple-500 transition-colors flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]},Z.id))})}),l.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50/80",children:l.jsx("button",{onClick:()=>f(!1),className:"w-full py-3 bg-gray-200 text-gray-700  font-bold hover:bg-gray-300 transition-colors",children:"ptal"})})]})})]}):null}function EV(){const{customerName:e}=S8(),[r,t]=J.useState(null),[n,a]=J.useState([]),[s,c]=J.useState(!0),[d,x]=J.useState(null),[f,g]=J.useState(null),[v,w]=J.useState(""),E=W=>{if(W.transactionType==="Fatura"||W.transactionType==="Nakit"||W.transactionType==="K.Kart"||W.transactionType==="Veresiye"){const z={sale_code:W.sale_code||W.id,customer:r.name,payment_method:W.payment_method,date:W.created_at,total:W.total,items:W.items||W.products||[],is_deleted:!1};x(z)}},N=W=>{W.transactionType.includes("deme")&&(g(W),w(W.total.toString()))},S=async()=>{if(!f)return;const W=parseFloat(v);if(isNaN(W)||W<=0){alert("Geerli bir tutar giriniz.");return}try{await kn.updatePayment(f.id,r.id,f.total,W),g(null),w(""),j()}catch(z){console.error(z),alert("Hata: "+(z.message||"deme gncellenemedi"))}},T=async(W,z)=>{if(W.stopPropagation(),!!confirm("Bu demeyi silmek mterinin borcunu artracaktr. Emin misiniz?"))try{await kn.deletePayment(z.id,r.id,z.total),alert("deme silindi."),j()}catch(ae){console.error(ae),alert("Hata: "+(ae.message||"deme silinemedi"))}};J.useEffect(()=>{j()},[e]);const j=async()=>{try{const{data:W}=await kn.getAll(),ae=(W?.customers||[]).find(Z=>Z.name===decodeURIComponent(e));if(ae){t(ae);const{data:Z}=await kn.getTransactions(ae.id);a(Z?.transactions||[])}}catch(W){console.error("Mteri verileri yklenirken hata:",W)}finally{c(!1)}},D=W=>{if(!W)return"-";const z=new Date(W);return z.toLocaleDateString("tr-TR")+" "+z.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})},I=W=>(parseFloat(W)||0).toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}),L=n.map((W,z)=>{const ae=parseFloat(W.amount)||0,Z=Math.abs(ae),H=W.payment_type||"";let he=0,q=0,se="lem";ae<0||H.toLowerCase().includes("bor")?(he=Z,q=0,se="Sat (Bor)"):(q=Z,he=0,H.toLowerCase().includes("nakit")?se="deme (Nakit)":H.toLowerCase().includes("kredi")||H.toLowerCase().includes("kart")?se="deme (K.Kart)":se="deme");let ve=he>0?"bg-yellow-100":"bg-cyan-100";return{...W,total:Z,debtAmount:he,creditAmount:q,transactionType:se,rowColor:ve}}),V=L.reduce((W,z)=>({debt:W.debt+z.debtAmount,credit:W.credit+z.creditAmount}),{debt:0,credit:0});parseFloat(r?.balance);const M=V.debt-V.credit;return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:l.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):r?l.jsxs("div",{className:"min-h-screen bg-gray-100",children:[l.jsx("header",{className:"bg-white px-6 py-4 shadow-md",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(hr,{to:"/customers",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Cari Hareket Raporu"}),l.jsxs("p",{className:"text-gray-500 text-sm",children:[r.customer_code," - ",r.name]})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"px-4 py-2 bg-red-50 rounded-lg border border-red-200",children:[l.jsx("span",{className:"text-sm text-red-600",children:"Toplam Bor:"}),l.jsxs("span",{className:"ml-2 font-bold text-red-700",children:[I(V.debt)," TL"]})]}),l.jsxs("div",{className:"px-4 py-2 bg-green-50 rounded-lg border border-green-200",children:[l.jsx("span",{className:"text-sm text-green-600",children:"Toplam Alacak:"}),l.jsxs("span",{className:"ml-2 font-bold text-green-700",children:[I(V.credit)," TL"]})]}),l.jsxs("div",{className:`px-4 py-2 rounded-lg border ${M>0?"bg-red-100 border-red-300":M<0?"bg-green-100 border-green-300":"bg-gray-100 border-gray-300"}`,children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Net Bakiye:"}),l.jsxs("span",{className:`ml-2 font-bold ${M>0?"text-red-700":M<0?"text-green-700":"text-gray-700"}`,children:[I(Math.abs(M))," TL ",M>0?"(Borlu)":M<0?"(Alacakl)":""]})]})]})]})}),l.jsx("div",{className:"p-4",children:l.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-blue-600 text-white",children:[l.jsx("th",{className:"px-3 py-2 text-left font-semibold border-r border-blue-500",children:"Cari Kodu"}),l.jsx("th",{className:"px-3 py-2 text-left font-semibold border-r border-blue-500",children:"Ticari nvan"}),l.jsx("th",{className:"px-3 py-2 text-left font-semibold border-r border-blue-500",children:"Evrak No"}),l.jsx("th",{className:"px-3 py-2 text-left font-semibold border-r border-blue-500",children:"lem Tarihi"}),l.jsx("th",{className:"px-3 py-2 text-right font-semibold border-r border-blue-500",children:"Bor Tutar"}),l.jsx("th",{className:"px-3 py-2 text-right font-semibold border-r border-blue-500",children:"Alacak Tutar"}),l.jsx("th",{className:"px-3 py-2 text-right font-semibold border-r border-blue-500",children:"KPB Bakiyesi"}),l.jsx("th",{className:"px-3 py-2 text-center font-semibold border-r border-blue-500",children:"KPB B/A/S"}),l.jsx("th",{className:"px-3 py-2 text-center font-semibold border-r border-blue-500",children:"lem Tr"}),l.jsx("th",{className:"px-3 py-2 text-left font-semibold border-r border-blue-500",children:"Aklama"}),l.jsx("th",{className:"px-3 py-2 text-center font-semibold w-16",children:"Sil"})]})}),l.jsxs("tbody",{children:[L.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:11,className:"px-4 py-8 text-center text-gray-500",children:"Bu mteriye ait hareket bulunmamaktadr."})}):L.map((W,z)=>{const ae=L.slice(0,z+1).reduce((Z,H)=>Z+H.debtAmount-H.creditAmount,0);return l.jsxs("tr",{className:`${W.rowColor} border-b border-gray-200 hover:opacity-80 cursor-pointer transition-colors`,onClick:()=>E(W),onDoubleClick:()=>N(W),children:[l.jsx("td",{className:"px-3 py-2 border-r border-gray-200 font-medium",children:r.customer_code}),l.jsx("td",{className:"px-3 py-2 border-r border-gray-200",children:r.name}),l.jsx("td",{className:"px-3 py-2 border-r border-gray-200 font-mono text-xs",children:W.sale_code||W.id?.substring(0,8)||"-"}),l.jsx("td",{className:"px-3 py-2 border-r border-gray-200 whitespace-nowrap",children:D(W.created_at)}),l.jsx("td",{className:"px-3 py-2 border-r border-gray-200 text-right font-medium",children:W.debtAmount>0?I(W.debtAmount):""}),l.jsx("td",{className:"px-3 py-2 border-r border-gray-200 text-right font-medium",children:W.creditAmount>0?I(W.creditAmount):""}),l.jsx("td",{className:"px-3 py-2 border-r border-gray-200 text-right font-bold",children:I(Math.abs(ae))}),l.jsx("td",{className:`px-3 py-2 border-r border-gray-200 text-center font-bold ${ae>0?"text-red-600":ae<0?"text-green-600":"text-gray-600"}`,children:ae>0?"Bor":ae<0?"Alacak":"Sfr"}),l.jsx("td",{className:`px-3 py-2 border-r border-gray-200 text-center font-semibold ${W.transactionType==="Fatura"?"text-blue-600":W.transactionType==="Nakit"?"text-green-600":W.transactionType==="deme"?"text-purple-600":"text-gray-600"}`,children:W.transactionType}),l.jsx("td",{className:"px-3 py-2 text-left max-w-md truncate border-r border-gray-200",children:l.jsx("span",{className:"truncate",title:W.description||"",children:(W.items||W.products)?.map(Z=>Z.name).join(", ")||W.description||"-"})}),l.jsx("td",{className:"px-3 py-2 text-center",children:W.transactionType==="deme"&&l.jsx("button",{onClick:Z=>T(Z,W),className:"px-2 py-1 bg-red-100 text-red-600 rounded text-xs font-bold hover:bg-red-200 transition-colors",title:"demeyi Sil",children:"Sil"})})]},W.id||z)}),L.length>0&&l.jsxs("tr",{className:`font-bold text-base ${M>0?"bg-red-200":M<0?"bg-green-200":"bg-gray-200"}`,children:[l.jsx("td",{colSpan:4,className:"px-3 py-3 border-r border-gray-300 text-right uppercase",children:"Toplam:"}),l.jsx("td",{className:"px-3 py-3 border-r border-gray-300 text-right text-red-700",children:I(V.debt)}),l.jsx("td",{className:"px-3 py-3 border-r border-gray-300 text-right text-green-700",children:I(V.credit)}),l.jsx("td",{className:"px-3 py-3 border-r border-gray-300 text-right",children:I(Math.abs(M))}),l.jsx("td",{className:`px-3 py-3 border-r border-gray-300 text-center ${M>0?"text-red-700":M<0?"text-green-700":""}`,children:M>0?"YKSEL":M<0?"ALACAK":"SIFIR"}),l.jsx("td",{colSpan:3,className:"px-3 py-3"})]})]})]})})})}),d&&l.jsx(_V,{sale:d,onClose:()=>x(null),onUpdate:()=>{j(),x(null)},onDelete:()=>{j(),x(null)}}),f&&l.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[l.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:"deme Dzenle"}),l.jsx("p",{className:"text-blue-100 text-sm mt-1",children:f.description||"deme"})]}),l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mevcut Tutar"}),l.jsxs("div",{className:"text-xl font-bold text-gray-400 line-through",children:[f.total.toLocaleString("tr-TR",{minimumFractionDigits:2})," TL"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yeni Tutar (TL)"}),l.jsx("input",{type:"number",value:v,onChange:W=>w(W.target.value),className:"w-full px-4 py-3 text-2xl font-bold text-center border-2 border-blue-300 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",autoFocus:!0,step:"0.01",min:"0"})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 bg-gray-50 rounded-lg px-4 py-2",children:[l.jsx("span",{children:"Tarih:"}),l.jsx("span",{children:new Date(f.created_at).toLocaleDateString("tr-TR")})]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gray-50 space-y-3",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>{g(null),w("")},className:"flex-1 px-4 py-3 text-gray-700 bg-white border border-gray-300 rounded-xl font-medium hover:bg-gray-100 transition-colors",children:"ptal"}),l.jsx("button",{onClick:S,className:"flex-1 px-4 py-3 text-white bg-blue-600 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg",children:"Kaydet"})]}),l.jsx("button",{onClick:async()=>{if(confirm("Bu demeyi silmek mterinin borcunu artracaktr. Emin misiniz?"))try{await kn.deletePayment(f.id,r.id,f.total),g(null),w(""),j()}catch(W){console.error(W),alert("Hata: "+(W.message||"deme silinemedi"))}},className:"w-full px-4 py-3 text-red-600 bg-red-50 border border-red-200 rounded-xl font-medium hover:bg-red-100 transition-colors",children:"demeyi Sil"})]})]})})]}):l.jsx("div",{className:"min-h-screen bg-gray-100 p-6",children:l.jsxs("div",{className:"bg-white rounded-lg p-8 text-center shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"Mteri Bulunamad"}),l.jsx(hr,{to:"/customers",className:"mt-4 inline-block px-6 py-2 bg-blue-500 text-white rounded-lg",children:"Mterilere Dn"})]})})}function kV(){const[e,r]=J.useState([]),[t,n]=J.useState(!0),[a,s]=J.useState(()=>{const P=new Date,ue=new Date;return ue.setDate(ue.getDate()-7),{start:ue.toISOString().split("T")[0],end:P.toISOString().split("T")[0]}}),[c,d]=J.useState({searchTerm:"",stockCode:"",productName:"",barcode:"",minPrice:"",maxPrice:""}),[x,f]=J.useState(null),[g,v]=J.useState(!1),[w,E]=J.useState(null),[N,S]=J.useState(!1),[T,j]=J.useState([]),[D,I]=J.useState(""),[L,V]=J.useState(!1),[X,M]=J.useState(1),[W,z]=J.useState(null);J.useEffect(()=>{ae()},[]);const ae=async()=>{n(!0);try{const P={};a.start&&(P.start_date=a.start),a.end&&(P.end_date=a.end);const ue=await kl.getAll(P);r(ue.data?.sales||[])}catch(P){console.error("Satlar yklenirken hata:",P)}finally{n(!1)}},Z=P=>{const{name:ue,value:Re}=P.target;d(De=>({...De,[ue]:Re}))},H=P=>{const{name:ue,value:Re}=P.target;s(De=>({...De,[ue]:Re}))},he=P=>{f(P);const Re=(P.items?JSON.parse(JSON.stringify(P.items)):[]).map(De=>({...De,vat_rate:De.vat_rate!==void 0?De.vat_rate:20,is_vat_inc:!0}));E({...P,items:Re}),v(!0)},q=(P,ue)=>{E(Re=>({...Re,[P]:ue}))},se=(P,ue,Re)=>{E(De=>{const Ne=[...De.items];return Ne[P]={...Ne[P],[ue]:Re},{...De,items:Ne}})},ve=P=>{E(ue=>{const Re=ue.items.filter((De,Ne)=>Ne!==P);return{...ue,items:Re}})},le=async()=>{if(S(!0),I(""),z(null),M(1),T.length===0){V(!0);try{const P=await Sn.getAll();j(P.data?.products||[])}catch(P){console.error("rnler yklenirken hata:",P)}finally{V(!1)}}},ge=()=>{if(!W)return;const P={id:W.id,stock_code:W.stock_code,name:W.name,quantity:parseFloat(X)||1,price:parseFloat(W.price)||0,vat_rate:W.vat_rate!==void 0?W.vat_rate:20,is_vat_inc:!0};E(ue=>({...ue,items:[...ue.items,P]})),S(!1)},ie=J.useMemo(()=>{if(!D)return T;const P=D.toLowerCase();return T.filter(ue=>ue.name?.toLowerCase().includes(P)||ue.stock_code?.toLowerCase().includes(P)||ue.barcode?.toLowerCase().includes(P)).slice(0,20)},[T,D]),Le=J.useMemo(()=>{if(!w?.items)return{net:0,vat:0,grand:0,breakdown:{}};let P=0,ue=0;const Re={};return w.items.forEach(De=>{const Ne=parseFloat(De.quantity)||0,Ke=parseFloat(De.price)||0,ye=parseFloat(De.discount_rate)||0,me=parseFloat(De.vat_rate)||0;let Ce,G;De.is_vat_inc?(Ce=Ke,G=Ce/(1+me/100)):(G=Ke,Ce=G*(1+me/100));const Me=Ce*Ne*(1-ye/100),Ae=G*Ne*(1-ye/100),oe=Me-Ae;P+=Ae,ue+=oe,Re[me]||(Re[me]=0),Re[me]+=oe}),{net:P,vat:ue,grand:P+ue,breakdown:Re}},[w?.items]),Q=async()=>{if(window.confirm("Deiiklikleri kaydetmek istiyor musunuz?"))try{await kl.update(w.sale_code,{items:w.items,total:Le.grand,payment_method:w.payment_method,customer_name:w.customer_name}),alert("Sat gncellendi."),v(!1),ae()}catch(P){alert("Gncelleme hatas: "+P.message)}},B=async()=>{if(window.confirm("Bu sat silmek istediinize emin misiniz? Bu ilem geri alnamaz!"))try{await kl.delete(w.sale_code),alert("Sat silindi."),v(!1),ae()}catch(P){alert("Silme hatas: "+P.message)}},te=J.useMemo(()=>e.filter(P=>{const ue=c.searchTerm.toLowerCase();if(!(!ue||P.sale_code?.toLowerCase().includes(ue)||P.customerName?.toLowerCase().includes(ue)||P.customer?.toLowerCase().includes(ue)))return!1;const De=P.total||0;if(c.minPrice&&De<parseFloat(c.minPrice)||c.maxPrice&&De>parseFloat(c.maxPrice))return!1;if(c.stockCode||c.productName||c.barcode){const Ke=P.items||[];if(Ke.length===0||!Ke.some(me=>{let Ce=!0;return c.stockCode&&!me.stock_code?.toLowerCase().includes(c.stockCode.toLowerCase())&&(Ce=!1),c.productName&&!me.name?.toLowerCase().includes(c.productName.toLowerCase())&&(Ce=!1),c.barcode&&!me.barcode?.toLowerCase().includes(c.barcode.toLowerCase())&&(Ce=!1),Ce}))return!1}return!0}),[e,c]),U=J.useMemo(()=>te.reduce((P,ue)=>P+(ue.total||0),0),[te]);return l.jsxs("div",{className:"min-h-screen flex flex-row bg-slate-50 font-display",children:[l.jsxs("aside",{className:"w-80 bg-white border-r border-slate-200 fixed top-0 bottom-0 left-0 overflow-y-auto z-30 shadow-xl shadow-slate-200/50",children:[l.jsxs("div",{className:"p-5 border-b border-slate-100",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"filter_alt"}),"Filtreleme"]}),l.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Sat gemiini detayl sorgula"})]}),l.jsxs("div",{className:"p-5 space-y-5",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Tarih Aral"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{type:"date",name:"start",value:a.start,onChange:H,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"}),l.jsx("input",{type:"date",name:"end",value:a.end,onChange:H,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),l.jsxs("button",{onClick:ae,className:"w-full py-2 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined text-lg",children:"sync"}),"Uygula & Yenile"]})]}),l.jsx("div",{className:"h-px bg-slate-100"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Genel Arama"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-lg",children:"search"}),l.jsx("input",{type:"text",name:"searchTerm",value:c.searchTerm,onChange:Z,placeholder:"Sat No, Mteri...",className:"w-full pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"rn Detaylar"}),l.jsx("input",{type:"text",name:"productName",value:c.productName,onChange:Z,placeholder:"rn Ad",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),l.jsx("input",{type:"text",name:"stockCode",value:c.stockCode,onChange:Z,placeholder:"Stok Kodu",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),l.jsx("input",{type:"text",name:"barcode",value:c.barcode,onChange:Z,placeholder:"Barkod",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Fiyat Aral (TL)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",name:"minPrice",value:c.minPrice,onChange:Z,placeholder:"Min",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),l.jsx("span",{className:"text-slate-400",children:"-"}),l.jsx("input",{type:"number",name:"maxPrice",value:c.maxPrice,onChange:Z,placeholder:"Max",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})]})]})]}),l.jsxs("main",{className:"flex-1 ml-80 flex flex-col min-h-screen",children:[l.jsxs("header",{className:"px-8 py-5 bg-white border-b border-slate-200 flex items-center justify-between sticky top-0 z-10 shadow-sm/50 backdrop-blur-sm bg-white/90",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Satlar"}),l.jsxs("p",{className:"text-slate-500 text-sm mt-0.5",children:[l.jsx("span",{className:"font-bold text-slate-900",children:te.length})," ilem bulundu"]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:"TOPLAM CRO"}),l.jsxs("p",{className:"text-2xl font-extrabold text-emerald-600",children:["",U.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:t?l.jsx("div",{className:"p-12 flex justify-center",children:l.jsx("div",{className:"w-10 h-10 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):te.length===0?l.jsxs("div",{className:"p-12 text-center text-slate-500",children:[l.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"receipt_long"}),l.jsx("p",{children:"Kaytl sat bulunamad."})]}):l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 text-xs font-bold text-slate-500 uppercase tracking-wider",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4",children:"Tarih"}),l.jsx("th",{className:"px-6 py-4",children:"Sat No"}),l.jsx("th",{className:"px-6 py-4",children:"Mteri"}),l.jsx("th",{className:"px-6 py-4",children:"deme Tipi"}),l.jsx("th",{className:"px-6 py-4",children:"rnler"}),l.jsx("th",{className:"px-6 py-4 text-right",children:"Tutar"}),l.jsx("th",{className:"px-6 py-4 text-center",children:"lem"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:te.map(P=>l.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[l.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 whitespace-nowrap",children:new Date(P.date).toLocaleString("tr-TR")}),l.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900 font-mono",children:P.sale_code}),l.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:P.customerName||P.customer||"-"}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P.payment_method==="Nakit"?"bg-emerald-100 text-emerald-800":P.payment_method==="Kredi Kart"||P.payment_method==="POS"?"bg-blue-100 text-blue-800":"bg-slate-100 text-slate-800"}`,children:P.payment_method==="POS"?"Kredi Kart":P.payment_method})}),l.jsx("td",{className:"px-6 py-4 text-sm text-slate-500 max-w-xs truncate",children:P.items&&P.items.length>0?P.items.map(ue=>`${ue.name} x${ue.quantity}`).join(", "):"-"}),l.jsxs("td",{className:"px-6 py-4 text-sm font-bold text-slate-900 text-right whitespace-nowrap",children:["",P.total?.toFixed(2)]}),l.jsx("td",{className:"px-6 py-4 text-center",children:l.jsx("button",{onClick:()=>he(P),className:"px-3 py-1 bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-lg text-sm font-bold transition-colors",children:"Detay"})})]},P.id))})]})})})]}),g&&w&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 flex items-center justify-between bg-white",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Sat Detay"}),l.jsx("p",{className:"text-sm text-slate-400 font-mono mt-0.5",children:w.sale_code})]}),l.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-400 hover:text-slate-600",children:l.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Mteri"}),l.jsx("input",{type:"text",value:w.customer_name||w.customer||"",onChange:P=>q("customer_name",P.target.value),className:"w-full font-bold text-slate-800 border-b border-slate-200 focus:border-blue-500 outline-none py-1 bg-transparent"})]}),l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"deme Tipi"}),l.jsx("div",{className:"font-bold text-slate-600 py-1",children:w.payment_method==="POS"?"KRED KARTI":w.payment_method})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Tarih"}),l.jsx("p",{className:"font-bold text-slate-800 py-1",children:new Date(w.date).toLocaleString("tr-TR")})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden mb-6",children:[l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-xs font-bold text-slate-500 uppercase",children:"rn"}),l.jsx("th",{className:"px-4 py-3 text-xs font-bold text-slate-500 uppercase text-center w-20",children:"Adet"}),l.jsx("th",{className:"px-4 py-3 text-xs font-bold text-slate-500 uppercase text-center w-28",children:"Birim Fiyat"}),l.jsx("th",{className:"px-4 py-3 text-xs font-bold text-slate-500 uppercase text-right w-28",children:"Tutar"}),l.jsx("th",{className:"px-4 py-3 text-[10px] font-bold text-slate-400 uppercase text-center w-24",children:"KDV Oran"}),l.jsx("th",{className:"px-4 py-3 text-[10px] font-bold text-slate-400 uppercase text-center w-28",children:"KDV Dahil?"}),l.jsx("th",{className:"px-4 py-3 w-10"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:w.items.map((P,ue)=>{const Re=parseFloat(P.vat_rate)||0,De=parseFloat(P.price)||0,Ne=P.is_vat_inc?De:De/(1+Re/100);return l.jsxs("tr",{className:"group hover:bg-slate-50",children:[l.jsxs("td",{className:"px-4 py-3",children:[l.jsx("p",{className:"font-bold text-slate-800 text-sm",children:P.name}),l.jsx("p",{className:"text-xs text-slate-400 font-mono",children:P.stock_code})]}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("input",{type:"number",value:P.quantity,onChange:Ke=>se(ue,"quantity",Ke.target.value),className:"w-16 text-center border rounded py-1 text-sm font-bold text-red-600 focus:ring-2 focus:ring-blue-500 outline-none bg-slate-50 focus:bg-white"})}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("input",{type:"number",value:Number(Ne).toFixed(2),onChange:Ke=>{const ye=parseFloat(Ke.target.value)||0;let me=ye;P.is_vat_inc||(me=ye*(1+Re/100)),se(ue,"price",me)},className:"w-24 text-center border rounded py-1 text-sm font-bold text-red-600 focus:ring-2 focus:ring-blue-500 outline-none bg-slate-50 focus:bg-white"})}),l.jsxs("td",{className:"px-4 py-3 text-right font-bold text-red-600",children:[(P.quantity*P.price*(1-(P.discount_rate||0)/100)).toFixed(2)," "]}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("input",{type:"number",value:P.vat_rate,onChange:Ke=>se(ue,"vat_rate",Ke.target.value),className:"w-16 text-center border rounded py-1 text-xs text-slate-500 font-medium focus:ring-2 focus:ring-blue-500 outline-none bg-slate-50 focus:bg-white"})}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("button",{onClick:()=>se(ue,"is_vat_inc",!P.is_vat_inc),className:`px-2 py-1 rounded text-[10px] font-bold transition-colors ${P.is_vat_inc?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:P.is_vat_inc?"EVET":"HAYIR"})}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("button",{onClick:()=>ve(ue),className:"text-slate-300 hover:text-red-500 transition-colors p-1",children:l.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})})]},ue)})})]}),w.items.length===0&&l.jsx("div",{className:"p-8 text-center text-slate-400 text-sm",children:"rn bulunamad"})]}),l.jsxs("div",{className:"flex justify-end gap-6 items-start",children:[l.jsxs("div",{className:"text-right space-y-1.5 py-2",children:[l.jsxs("div",{className:"text-xs text-slate-400",children:["Toplam KDV: ",l.jsxs("span",{className:"font-bold text-slate-600",children:["",Le.vat.toFixed(2)]})]}),l.jsxs("div",{className:"text-xs text-slate-400",children:["KDV'siz Toplam: ",l.jsxs("span",{className:"font-bold text-slate-600",children:["",Le.net.toFixed(2)]})]}),Object.entries(Le.breakdown).map(([P,ue])=>ue>0&&l.jsxs("div",{className:"text-[10px] text-slate-400",children:["%",P," KDV: ",l.jsxs("span",{className:"text-slate-500",children:["",ue.toFixed(2)]})]},P))]}),l.jsx("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm w-72",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-base font-bold text-slate-800",children:"GENEL TOPLAM"}),l.jsxs("span",{className:"text-2xl font-black text-emerald-600",children:["",Le.grand.toFixed(2)]})]})})]})]}),l.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-200 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:B,className:"px-4 py-2.5 bg-red-50 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-xl font-bold transition-all flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined",children:"delete_forever"}),"Sat Sil"]}),l.jsxs("button",{onClick:le,className:"px-4 py-2.5 bg-emerald-50 text-emerald-600 hover:bg-emerald-100 hover:text-emerald-700 rounded-xl font-bold transition-all flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined",children:"add_shopping_cart"}),"Yeni rn Ekle"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2.5 text-slate-600 hover:bg-slate-200 font-bold rounded-xl transition-colors",children:"ptal"}),l.jsxs("button",{onClick:Q,className:"px-6 py-2.5 bg-blue-600 text-white hover:bg-blue-700 shadow-lg shadow-blue-600/30 rounded-xl font-bold transition-all flex items-center gap-2",children:[l.jsx("span",{className:"material-symbols-outlined",children:"save"}),"Kaydet"]})]})]})]})}),N&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl flex flex-col shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[l.jsxs("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"rn Ara & Ekle"}),l.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-slate-100 rounded-full",children:l.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),l.jsxs("div",{className:"p-5 space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"search"}),l.jsx("input",{type:"text",value:D,onChange:P=>I(P.target.value),placeholder:"rn ad, barkod veya stok kodu...",className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none font-medium",autoFocus:!0})]}),l.jsx("div",{className:"h-64 overflow-y-auto border border-slate-100 rounded-xl",children:L?l.jsx("div",{className:"flex justify-center items-center h-full",children:l.jsx("div",{className:"spinner"})}):ie.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[l.jsx("span",{className:"material-symbols-outlined text-3xl mb-2",children:"inventory_2"}),l.jsx("p",{children:"rn bulunamad"})]}):l.jsx("div",{className:"divide-y divide-slate-100",children:ie.map(P=>l.jsxs("div",{onClick:()=>z(P),className:`p-3 flex items-center justify-between cursor-pointer hover:bg-blue-50 transition-colors ${W?.stock_code===P.stock_code?"bg-blue-50 ring-1 ring-blue-500":""}`,children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 text-sm",children:P.name}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 font-mono",children:[l.jsx("span",{children:P.stock_code}),P.barcode&&l.jsxs("span",{children:[" ",P.barcode]})]})]}),l.jsxs("div",{className:"font-bold text-slate-800",children:["",parseFloat(P.price).toFixed(2)]})]},P.stock_code))})}),l.jsxs("div",{className:"flex items-end gap-4 pt-2",children:[l.jsxs("div",{className:"w-24",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:"Miktar"}),l.jsx("input",{type:"number",value:X,onChange:P=>M(P.target.value),className:"w-full px-3 py-2.5 border border-slate-200 rounded-xl font-bold text-center focus:ring-2 focus:ring-blue-500 outline-none",min:"1"})]}),l.jsx("button",{onClick:ge,disabled:!W,className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-blue-500/30",children:"Listeye Ekle"})]})]})]})})]})}const SV=4,xE=0,mE=1,NV=2;function ou(e){let r=e.length;for(;--r>=0;)e[r]=0}const AV=0,D5=1,TV=2,CV=3,jV=258,Lb=29,Nf=256,Jd=Nf+1+Lb,W0=30,Bb=19,M5=2*Jd+1,fc=15,jp=16,OV=7,Pb=256,F5=16,L5=17,B5=18,_2=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ax=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),RV=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),P5=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),IV=512,yl=new Array((Jd+2)*2);ou(yl);const Td=new Array(W0*2);ou(Td);const Qd=new Array(IV);ou(Qd);const ef=new Array(jV-CV+1);ou(ef);const Ub=new Array(Lb);ou(Ub);const Nx=new Array(W0);ou(Nx);function Op(e,r,t,n,a){this.static_tree=e,this.extra_bits=r,this.extra_base=t,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}let U5,z5,H5;function Rp(e,r){this.dyn_tree=e,this.max_code=0,this.stat_desc=r}const G5=e=>e<256?Qd[e]:Qd[256+(e>>>7)],tf=(e,r)=>{e.pending_buf[e.pending++]=r&255,e.pending_buf[e.pending++]=r>>>8&255},ls=(e,r,t)=>{e.bi_valid>jp-t?(e.bi_buf|=r<<e.bi_valid&65535,tf(e,e.bi_buf),e.bi_buf=r>>jp-e.bi_valid,e.bi_valid+=t-jp):(e.bi_buf|=r<<e.bi_valid&65535,e.bi_valid+=t)},Ui=(e,r,t)=>{ls(e,t[r*2],t[r*2+1])},V5=(e,r)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--r>0);return t>>>1},DV=e=>{e.bi_valid===16?(tf(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},MV=(e,r)=>{const t=r.dyn_tree,n=r.max_code,a=r.stat_desc.static_tree,s=r.stat_desc.has_stree,c=r.stat_desc.extra_bits,d=r.stat_desc.extra_base,x=r.stat_desc.max_length;let f,g,v,w,E,N,S=0;for(w=0;w<=fc;w++)e.bl_count[w]=0;for(t[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<M5;f++)g=e.heap[f],w=t[t[g*2+1]*2+1]+1,w>x&&(w=x,S++),t[g*2+1]=w,!(g>n)&&(e.bl_count[w]++,E=0,g>=d&&(E=c[g-d]),N=t[g*2],e.opt_len+=N*(w+E),s&&(e.static_len+=N*(a[g*2+1]+E)));if(S!==0){do{for(w=x-1;e.bl_count[w]===0;)w--;e.bl_count[w]--,e.bl_count[w+1]+=2,e.bl_count[x]--,S-=2}while(S>0);for(w=x;w!==0;w--)for(g=e.bl_count[w];g!==0;)v=e.heap[--f],!(v>n)&&(t[v*2+1]!==w&&(e.opt_len+=(w-t[v*2+1])*t[v*2],t[v*2+1]=w),g--)}},W5=(e,r,t)=>{const n=new Array(fc+1);let a=0,s,c;for(s=1;s<=fc;s++)a=a+t[s-1]<<1,n[s]=a;for(c=0;c<=r;c++){let d=e[c*2+1];d!==0&&(e[c*2]=V5(n[d]++,d))}},FV=()=>{let e,r,t,n,a;const s=new Array(fc+1);for(t=0,n=0;n<Lb-1;n++)for(Ub[n]=t,e=0;e<1<<_2[n];e++)ef[t++]=n;for(ef[t-1]=n,a=0,n=0;n<16;n++)for(Nx[n]=a,e=0;e<1<<ax[n];e++)Qd[a++]=n;for(a>>=7;n<W0;n++)for(Nx[n]=a<<7,e=0;e<1<<ax[n]-7;e++)Qd[256+a++]=n;for(r=0;r<=fc;r++)s[r]=0;for(e=0;e<=143;)yl[e*2+1]=8,e++,s[8]++;for(;e<=255;)yl[e*2+1]=9,e++,s[9]++;for(;e<=279;)yl[e*2+1]=7,e++,s[7]++;for(;e<=287;)yl[e*2+1]=8,e++,s[8]++;for(W5(yl,Jd+1,s),e=0;e<W0;e++)Td[e*2+1]=5,Td[e*2]=V5(e,5);U5=new Op(yl,_2,Nf+1,Jd,fc),z5=new Op(Td,ax,0,W0,fc),H5=new Op(new Array(0),RV,0,Bb,OV)},q5=e=>{let r;for(r=0;r<Jd;r++)e.dyn_ltree[r*2]=0;for(r=0;r<W0;r++)e.dyn_dtree[r*2]=0;for(r=0;r<Bb;r++)e.bl_tree[r*2]=0;e.dyn_ltree[Pb*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},X5=e=>{e.bi_valid>8?tf(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},gE=(e,r,t,n)=>{const a=r*2,s=t*2;return e[a]<e[s]||e[a]===e[s]&&n[r]<=n[t]},Ip=(e,r,t)=>{const n=e.heap[t];let a=t<<1;for(;a<=e.heap_len&&(a<e.heap_len&&gE(r,e.heap[a+1],e.heap[a],e.depth)&&a++,!gE(r,n,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=n},pE=(e,r,t)=>{let n,a,s=0,c,d;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+s++]&255,n+=(e.pending_buf[e.sym_buf+s++]&255)<<8,a=e.pending_buf[e.sym_buf+s++],n===0?Ui(e,a,r):(c=ef[a],Ui(e,c+Nf+1,r),d=_2[c],d!==0&&(a-=Ub[c],ls(e,a,d)),n--,c=G5(n),Ui(e,c,t),d=ax[c],d!==0&&(n-=Nx[c],ls(e,n,d)));while(s<e.sym_next);Ui(e,Pb,r)},E2=(e,r)=>{const t=r.dyn_tree,n=r.stat_desc.static_tree,a=r.stat_desc.has_stree,s=r.stat_desc.elems;let c,d,x=-1,f;for(e.heap_len=0,e.heap_max=M5,c=0;c<s;c++)t[c*2]!==0?(e.heap[++e.heap_len]=x=c,e.depth[c]=0):t[c*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=x<2?++x:0,t[f*2]=1,e.depth[f]=0,e.opt_len--,a&&(e.static_len-=n[f*2+1]);for(r.max_code=x,c=e.heap_len>>1;c>=1;c--)Ip(e,t,c);f=s;do c=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ip(e,t,1),d=e.heap[1],e.heap[--e.heap_max]=c,e.heap[--e.heap_max]=d,t[f*2]=t[c*2]+t[d*2],e.depth[f]=(e.depth[c]>=e.depth[d]?e.depth[c]:e.depth[d])+1,t[c*2+1]=t[d*2+1]=f,e.heap[1]=f++,Ip(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],MV(e,r),W5(t,x,e.bl_count)},bE=(e,r,t)=>{let n,a=-1,s,c=r[1],d=0,x=7,f=4;for(c===0&&(x=138,f=3),r[(t+1)*2+1]=65535,n=0;n<=t;n++)s=c,c=r[(n+1)*2+1],!(++d<x&&s===c)&&(d<f?e.bl_tree[s*2]+=d:s!==0?(s!==a&&e.bl_tree[s*2]++,e.bl_tree[F5*2]++):d<=10?e.bl_tree[L5*2]++:e.bl_tree[B5*2]++,d=0,a=s,c===0?(x=138,f=3):s===c?(x=6,f=3):(x=7,f=4))},vE=(e,r,t)=>{let n,a=-1,s,c=r[1],d=0,x=7,f=4;for(c===0&&(x=138,f=3),n=0;n<=t;n++)if(s=c,c=r[(n+1)*2+1],!(++d<x&&s===c)){if(d<f)do Ui(e,s,e.bl_tree);while(--d!==0);else s!==0?(s!==a&&(Ui(e,s,e.bl_tree),d--),Ui(e,F5,e.bl_tree),ls(e,d-3,2)):d<=10?(Ui(e,L5,e.bl_tree),ls(e,d-3,3)):(Ui(e,B5,e.bl_tree),ls(e,d-11,7));d=0,a=s,c===0?(x=138,f=3):s===c?(x=6,f=3):(x=7,f=4)}},LV=e=>{let r;for(bE(e,e.dyn_ltree,e.l_desc.max_code),bE(e,e.dyn_dtree,e.d_desc.max_code),E2(e,e.bl_desc),r=Bb-1;r>=3&&e.bl_tree[P5[r]*2+1]===0;r--);return e.opt_len+=3*(r+1)+5+5+4,r},BV=(e,r,t,n)=>{let a;for(ls(e,r-257,5),ls(e,t-1,5),ls(e,n-4,4),a=0;a<n;a++)ls(e,e.bl_tree[P5[a]*2+1],3);vE(e,e.dyn_ltree,r-1),vE(e,e.dyn_dtree,t-1)},PV=e=>{let r=4093624447,t;for(t=0;t<=31;t++,r>>>=1)if(r&1&&e.dyn_ltree[t*2]!==0)return xE;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return mE;for(t=32;t<Nf;t++)if(e.dyn_ltree[t*2]!==0)return mE;return xE};let yE=!1;const UV=e=>{yE||(FV(),yE=!0),e.l_desc=new Rp(e.dyn_ltree,U5),e.d_desc=new Rp(e.dyn_dtree,z5),e.bl_desc=new Rp(e.bl_tree,H5),e.bi_buf=0,e.bi_valid=0,q5(e)},K5=(e,r,t,n)=>{ls(e,(AV<<1)+(n?1:0),3),X5(e),tf(e,t),tf(e,~t),t&&e.pending_buf.set(e.window.subarray(r,r+t),e.pending),e.pending+=t},zV=e=>{ls(e,D5<<1,3),Ui(e,Pb,yl),DV(e)},HV=(e,r,t,n)=>{let a,s,c=0;e.level>0?(e.strm.data_type===NV&&(e.strm.data_type=PV(e)),E2(e,e.l_desc),E2(e,e.d_desc),c=LV(e),a=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=a&&(a=s)):a=s=t+5,t+4<=a&&r!==-1?K5(e,r,t,n):e.strategy===SV||s===a?(ls(e,(D5<<1)+(n?1:0),3),pE(e,yl,Td)):(ls(e,(TV<<1)+(n?1:0),3),BV(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),pE(e,e.dyn_ltree,e.dyn_dtree)),q5(e),n&&X5(e)},GV=(e,r,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=r,e.pending_buf[e.sym_buf+e.sym_next++]=r>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,r===0?e.dyn_ltree[t*2]++:(e.matches++,r--,e.dyn_ltree[(ef[t]+Nf+1)*2]++,e.dyn_dtree[G5(r)*2]++),e.sym_next===e.sym_end);var VV=UV,WV=K5,qV=HV,XV=GV,KV=zV,YV={_tr_init:VV,_tr_stored_block:WV,_tr_flush_block:qV,_tr_tally:XV,_tr_align:KV};const $V=(e,r,t,n)=>{let a=e&65535|0,s=e>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do a=a+r[n++]|0,s=s+a|0;while(--c);a%=65521,s%=65521}return a|s<<16|0};var rf=$V;const ZV=()=>{let e,r=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r},JV=new Uint32Array(ZV()),QV=(e,r,t,n)=>{const a=JV,s=n+t;e^=-1;for(let c=n;c<s;c++)e=e>>>8^a[(e^r[c])&255];return e^-1};var ba=QV,Tc={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Af={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:eW,_tr_stored_block:k2,_tr_flush_block:tW,_tr_tally:ko,_tr_align:rW}=YV,{Z_NO_FLUSH:So,Z_PARTIAL_FLUSH:nW,Z_FULL_FLUSH:aW,Z_FINISH:ei,Z_BLOCK:wE,Z_OK:ja,Z_STREAM_END:_E,Z_STREAM_ERROR:Hi,Z_DATA_ERROR:sW,Z_BUF_ERROR:Dp,Z_DEFAULT_COMPRESSION:iW,Z_FILTERED:lW,Z_HUFFMAN_ONLY:q1,Z_RLE:oW,Z_FIXED:cW,Z_DEFAULT_STRATEGY:uW,Z_UNKNOWN:dW,Z_DEFLATED:Zx}=Af,fW=9,hW=15,xW=8,mW=29,gW=256,S2=gW+1+mW,pW=30,bW=19,vW=2*S2+1,yW=15,Br=3,Eo=258,Gi=Eo+Br+1,wW=32,$0=42,zb=57,N2=69,A2=73,T2=91,C2=103,hc=113,gd=666,$a=1,cu=2,Cc=3,uu=4,_W=3,xc=(e,r)=>(e.msg=Tc[r],r),EE=e=>e*2-(e>4?9:0),bo=e=>{let r=e.length;for(;--r>=0;)e[r]=0},EW=e=>{let r,t,n,a=e.w_size;r=e.hash_size,n=r;do t=e.head[--n],e.head[n]=t>=a?t-a:0;while(--r);r=a,n=r;do t=e.prev[--n],e.prev[n]=t>=a?t-a:0;while(--r)};let kW=(e,r,t)=>(r<<e.hash_shift^t)&e.hash_mask,No=kW;const As=e=>{const r=e.state;let t=r.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(r.pending_buf.subarray(r.pending_out,r.pending_out+t),e.next_out),e.next_out+=t,r.pending_out+=t,e.total_out+=t,e.avail_out-=t,r.pending-=t,r.pending===0&&(r.pending_out=0))},Ds=(e,r)=>{tW(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r),e.block_start=e.strstart,As(e.strm)},Zr=(e,r)=>{e.pending_buf[e.pending++]=r},ud=(e,r)=>{e.pending_buf[e.pending++]=r>>>8&255,e.pending_buf[e.pending++]=r&255},j2=(e,r,t,n)=>{let a=e.avail_in;return a>n&&(a=n),a===0?0:(e.avail_in-=a,r.set(e.input.subarray(e.next_in,e.next_in+a),t),e.state.wrap===1?e.adler=rf(e.adler,r,a,t):e.state.wrap===2&&(e.adler=ba(e.adler,r,a,t)),e.next_in+=a,e.total_in+=a,a)},Y5=(e,r)=>{let t=e.max_chain_length,n=e.strstart,a,s,c=e.prev_length,d=e.nice_match;const x=e.strstart>e.w_size-Gi?e.strstart-(e.w_size-Gi):0,f=e.window,g=e.w_mask,v=e.prev,w=e.strstart+Eo;let E=f[n+c-1],N=f[n+c];e.prev_length>=e.good_match&&(t>>=2),d>e.lookahead&&(d=e.lookahead);do if(a=r,!(f[a+c]!==N||f[a+c-1]!==E||f[a]!==f[n]||f[++a]!==f[n+1])){n+=2,a++;do;while(f[++n]===f[++a]&&f[++n]===f[++a]&&f[++n]===f[++a]&&f[++n]===f[++a]&&f[++n]===f[++a]&&f[++n]===f[++a]&&f[++n]===f[++a]&&f[++n]===f[++a]&&n<w);if(s=Eo-(w-n),n=w-Eo,s>c){if(e.match_start=r,c=s,s>=d)break;E=f[n+c-1],N=f[n+c]}}while((r=v[r&g])>x&&--t!==0);return c<=e.lookahead?c:e.lookahead},Z0=e=>{const r=e.w_size;let t,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-Gi)&&(e.window.set(e.window.subarray(r,r+r-n),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),EW(e),n+=r),e.strm.avail_in===0)break;if(t=j2(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=Br)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=No(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=No(e,e.ins_h,e.window[a+Br-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<Br)););}while(e.lookahead<Gi&&e.strm.avail_in!==0)},$5=(e,r)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,s,c=0,d=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>s&&(n=s),n<t&&(n===0&&r!==ei||r===So||n!==a+e.strm.avail_in)))break;c=r===ei&&n===a+e.strm.avail_in?1:0,k2(e,0,0,c),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,As(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(j2(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(c===0);return d-=e.strm.avail_in,d&&(d>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=d&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-d,e.strm.next_in),e.strstart),e.strstart+=d,e.insert+=d>e.w_size-e.insert?e.w_size-e.insert:d),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),c?uu:r!==So&&r!==ei&&e.strm.avail_in===0&&e.strstart===e.block_start?cu:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(j2(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,t=s>e.w_size?e.w_size:s,a=e.strstart-e.block_start,(a>=t||(a||r===ei)&&r!==So&&e.strm.avail_in===0&&a<=s)&&(n=a>s?s:a,c=r===ei&&e.strm.avail_in===0&&n===a?1:0,k2(e,e.block_start,n,c),e.block_start+=n,As(e.strm)),c?Cc:$a)},Mp=(e,r)=>{let t,n;for(;;){if(e.lookahead<Gi){if(Z0(e),e.lookahead<Gi&&r===So)return $a;if(e.lookahead===0)break}if(t=0,e.lookahead>=Br&&(e.ins_h=No(e,e.ins_h,e.window[e.strstart+Br-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-Gi&&(e.match_length=Y5(e,t)),e.match_length>=Br)if(n=ko(e,e.strstart-e.match_start,e.match_length-Br),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Br){e.match_length--;do e.strstart++,e.ins_h=No(e,e.ins_h,e.window[e.strstart+Br-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=No(e,e.ins_h,e.window[e.strstart+1]);else n=ko(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Ds(e,!1),e.strm.avail_out===0))return $a}return e.insert=e.strstart<Br-1?e.strstart:Br-1,r===ei?(Ds(e,!0),e.strm.avail_out===0?Cc:uu):e.sym_next&&(Ds(e,!1),e.strm.avail_out===0)?$a:cu},O0=(e,r)=>{let t,n,a;for(;;){if(e.lookahead<Gi){if(Z0(e),e.lookahead<Gi&&r===So)return $a;if(e.lookahead===0)break}if(t=0,e.lookahead>=Br&&(e.ins_h=No(e,e.ins_h,e.window[e.strstart+Br-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Br-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-Gi&&(e.match_length=Y5(e,t),e.match_length<=5&&(e.strategy===lW||e.match_length===Br&&e.strstart-e.match_start>4096)&&(e.match_length=Br-1)),e.prev_length>=Br&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-Br,n=ko(e,e.strstart-1-e.prev_match,e.prev_length-Br),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=No(e,e.ins_h,e.window[e.strstart+Br-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Br-1,e.strstart++,n&&(Ds(e,!1),e.strm.avail_out===0))return $a}else if(e.match_available){if(n=ko(e,0,e.window[e.strstart-1]),n&&Ds(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return $a}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=ko(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Br-1?e.strstart:Br-1,r===ei?(Ds(e,!0),e.strm.avail_out===0?Cc:uu):e.sym_next&&(Ds(e,!1),e.strm.avail_out===0)?$a:cu},SW=(e,r)=>{let t,n,a,s;const c=e.window;for(;;){if(e.lookahead<=Eo){if(Z0(e),e.lookahead<=Eo&&r===So)return $a;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Br&&e.strstart>0&&(a=e.strstart-1,n=c[a],n===c[++a]&&n===c[++a]&&n===c[++a])){s=e.strstart+Eo;do;while(n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&a<s);e.match_length=Eo-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Br?(t=ko(e,1,e.match_length-Br),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=ko(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(Ds(e,!1),e.strm.avail_out===0))return $a}return e.insert=0,r===ei?(Ds(e,!0),e.strm.avail_out===0?Cc:uu):e.sym_next&&(Ds(e,!1),e.strm.avail_out===0)?$a:cu},NW=(e,r)=>{let t;for(;;){if(e.lookahead===0&&(Z0(e),e.lookahead===0)){if(r===So)return $a;break}if(e.match_length=0,t=ko(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(Ds(e,!1),e.strm.avail_out===0))return $a}return e.insert=0,r===ei?(Ds(e,!0),e.strm.avail_out===0?Cc:uu):e.sym_next&&(Ds(e,!1),e.strm.avail_out===0)?$a:cu};function Fi(e,r,t,n,a){this.good_length=e,this.max_lazy=r,this.nice_length=t,this.max_chain=n,this.func=a}const pd=[new Fi(0,0,0,0,$5),new Fi(4,4,8,4,Mp),new Fi(4,5,16,8,Mp),new Fi(4,6,32,32,Mp),new Fi(4,4,16,16,O0),new Fi(8,16,32,32,O0),new Fi(8,16,128,128,O0),new Fi(8,32,128,256,O0),new Fi(32,128,258,1024,O0),new Fi(32,258,258,4096,O0)],AW=e=>{e.window_size=2*e.w_size,bo(e.head),e.max_lazy_match=pd[e.level].max_lazy,e.good_match=pd[e.level].good_length,e.nice_match=pd[e.level].nice_length,e.max_chain_length=pd[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Br-1,e.match_available=0,e.ins_h=0};function TW(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Zx,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(vW*2),this.dyn_dtree=new Uint16Array((2*pW+1)*2),this.bl_tree=new Uint16Array((2*bW+1)*2),bo(this.dyn_ltree),bo(this.dyn_dtree),bo(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(yW+1),this.heap=new Uint16Array(2*S2+1),bo(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*S2+1),bo(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Tf=e=>{if(!e)return 1;const r=e.state;return!r||r.strm!==e||r.status!==$0&&r.status!==zb&&r.status!==N2&&r.status!==A2&&r.status!==T2&&r.status!==C2&&r.status!==hc&&r.status!==gd?1:0},Z5=e=>{if(Tf(e))return xc(e,Hi);e.total_in=e.total_out=0,e.data_type=dW;const r=e.state;return r.pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap===2?zb:r.wrap?$0:hc,e.adler=r.wrap===2?0:1,r.last_flush=-2,eW(r),ja},J5=e=>{const r=Z5(e);return r===ja&&AW(e.state),r},CW=(e,r)=>Tf(e)||e.state.wrap!==2?Hi:(e.state.gzhead=r,ja),Q5=(e,r,t,n,a,s)=>{if(!e)return Hi;let c=1;if(r===iW&&(r=6),n<0?(c=0,n=-n):n>15&&(c=2,n-=16),a<1||a>fW||t!==Zx||n<8||n>15||r<0||r>9||s<0||s>cW||n===8&&c!==1)return xc(e,Hi);n===8&&(n=9);const d=new TW;return e.state=d,d.strm=e,d.status=$0,d.wrap=c,d.gzhead=null,d.w_bits=n,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=a+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+Br-1)/Br),d.window=new Uint8Array(d.w_size*2),d.head=new Uint16Array(d.hash_size),d.prev=new Uint16Array(d.w_size),d.lit_bufsize=1<<a+6,d.pending_buf_size=d.lit_bufsize*4,d.pending_buf=new Uint8Array(d.pending_buf_size),d.sym_buf=d.lit_bufsize,d.sym_end=(d.lit_bufsize-1)*3,d.level=r,d.strategy=s,d.method=t,J5(e)},jW=(e,r)=>Q5(e,r,Zx,hW,xW,uW),OW=(e,r)=>{if(Tf(e)||r>wE||r<0)return e?xc(e,Hi):Hi;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===gd&&r!==ei)return xc(e,e.avail_out===0?Dp:Hi);const n=t.last_flush;if(t.last_flush=r,t.pending!==0){if(As(e),e.avail_out===0)return t.last_flush=-1,ja}else if(e.avail_in===0&&EE(r)<=EE(n)&&r!==ei)return xc(e,Dp);if(t.status===gd&&e.avail_in!==0)return xc(e,Dp);if(t.status===$0&&t.wrap===0&&(t.status=hc),t.status===$0){let a=Zx+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=q1||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,a|=s<<6,t.strstart!==0&&(a|=wW),a+=31-a%31,ud(t,a),t.strstart!==0&&(ud(t,e.adler>>>16),ud(t,e.adler&65535)),e.adler=1,t.status=hc,As(e),t.pending!==0)return t.last_flush=-1,ja}if(t.status===zb){if(e.adler=0,Zr(t,31),Zr(t,139),Zr(t,8),t.gzhead)Zr(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Zr(t,t.gzhead.time&255),Zr(t,t.gzhead.time>>8&255),Zr(t,t.gzhead.time>>16&255),Zr(t,t.gzhead.time>>24&255),Zr(t,t.level===9?2:t.strategy>=q1||t.level<2?4:0),Zr(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Zr(t,t.gzhead.extra.length&255),Zr(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=ba(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=N2;else if(Zr(t,0),Zr(t,0),Zr(t,0),Zr(t,0),Zr(t,0),Zr(t,t.level===9?2:t.strategy>=q1||t.level<2?4:0),Zr(t,_W),t.status=hc,As(e),t.pending!==0)return t.last_flush=-1,ja}if(t.status===N2){if(t.gzhead.extra){let a=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let d=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+d),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>a&&(e.adler=ba(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex+=d,As(e),t.pending!==0)return t.last_flush=-1,ja;a=0,s-=d}let c=new Uint8Array(t.gzhead.extra);t.pending_buf.set(c.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>a&&(e.adler=ba(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=A2}if(t.status===A2){if(t.gzhead.name){let a=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=ba(e.adler,t.pending_buf,t.pending-a,a)),As(e),t.pending!==0)return t.last_flush=-1,ja;a=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,Zr(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=ba(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=T2}if(t.status===T2){if(t.gzhead.comment){let a=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=ba(e.adler,t.pending_buf,t.pending-a,a)),As(e),t.pending!==0)return t.last_flush=-1,ja;a=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,Zr(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=ba(e.adler,t.pending_buf,t.pending-a,a))}t.status=C2}if(t.status===C2){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(As(e),t.pending!==0))return t.last_flush=-1,ja;Zr(t,e.adler&255),Zr(t,e.adler>>8&255),e.adler=0}if(t.status=hc,As(e),t.pending!==0)return t.last_flush=-1,ja}if(e.avail_in!==0||t.lookahead!==0||r!==So&&t.status!==gd){let a=t.level===0?$5(t,r):t.strategy===q1?NW(t,r):t.strategy===oW?SW(t,r):pd[t.level].func(t,r);if((a===Cc||a===uu)&&(t.status=gd),a===$a||a===Cc)return e.avail_out===0&&(t.last_flush=-1),ja;if(a===cu&&(r===nW?rW(t):r!==wE&&(k2(t,0,0,!1),r===aW&&(bo(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),As(e),e.avail_out===0))return t.last_flush=-1,ja}return r!==ei?ja:t.wrap<=0?_E:(t.wrap===2?(Zr(t,e.adler&255),Zr(t,e.adler>>8&255),Zr(t,e.adler>>16&255),Zr(t,e.adler>>24&255),Zr(t,e.total_in&255),Zr(t,e.total_in>>8&255),Zr(t,e.total_in>>16&255),Zr(t,e.total_in>>24&255)):(ud(t,e.adler>>>16),ud(t,e.adler&65535)),As(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?ja:_E)},RW=e=>{if(Tf(e))return Hi;const r=e.state.status;return e.state=null,r===hc?xc(e,sW):ja},IW=(e,r)=>{let t=r.length;if(Tf(e))return Hi;const n=e.state,a=n.wrap;if(a===2||a===1&&n.status!==$0||n.lookahead)return Hi;if(a===1&&(e.adler=rf(e.adler,r,t,0)),n.wrap=0,t>=n.w_size){a===0&&(bo(n.head),n.strstart=0,n.block_start=0,n.insert=0);let x=new Uint8Array(n.w_size);x.set(r.subarray(t-n.w_size,t),0),r=x,t=n.w_size}const s=e.avail_in,c=e.next_in,d=e.input;for(e.avail_in=t,e.next_in=0,e.input=r,Z0(n);n.lookahead>=Br;){let x=n.strstart,f=n.lookahead-(Br-1);do n.ins_h=No(n,n.ins_h,n.window[x+Br-1]),n.prev[x&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=x,x++;while(--f);n.strstart=x,n.lookahead=Br-1,Z0(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Br-1,n.match_available=0,e.next_in=c,e.input=d,e.avail_in=s,n.wrap=a,ja};var DW=jW,MW=Q5,FW=J5,LW=Z5,BW=CW,PW=OW,UW=RW,zW=IW,HW="pako deflate (from Nodeca project)",Cd={deflateInit:DW,deflateInit2:MW,deflateReset:FW,deflateResetKeep:LW,deflateSetHeader:BW,deflate:PW,deflateEnd:UW,deflateSetDictionary:zW,deflateInfo:HW};const GW=(e,r)=>Object.prototype.hasOwnProperty.call(e,r);var VW=function(e){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const t=r.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)GW(t,n)&&(e[n]=t[n])}}return e},WW=e=>{let r=0;for(let n=0,a=e.length;n<a;n++)r+=e[n].length;const t=new Uint8Array(r);for(let n=0,a=0,s=e.length;n<s;n++){let c=e[n];t.set(c,a),a+=c.length}return t},Jx={assign:VW,flattenChunks:WW};let eA=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{eA=!1}const nf=new Uint8Array(256);for(let e=0;e<256;e++)nf[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;nf[254]=nf[254]=1;var qW=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let r,t,n,a,s,c=e.length,d=0;for(a=0;a<c;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<c&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(r=new Uint8Array(d),s=0,a=0;s<d;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<c&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),t<128?r[s++]=t:t<2048?(r[s++]=192|t>>>6,r[s++]=128|t&63):t<65536?(r[s++]=224|t>>>12,r[s++]=128|t>>>6&63,r[s++]=128|t&63):(r[s++]=240|t>>>18,r[s++]=128|t>>>12&63,r[s++]=128|t>>>6&63,r[s++]=128|t&63);return r};const XW=(e,r)=>{if(r<65534&&e.subarray&&eA)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let t="";for(let n=0;n<r;n++)t+=String.fromCharCode(e[n]);return t};var KW=(e,r)=>{const t=r||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,r));let n,a;const s=new Array(t*2);for(a=0,n=0;n<t;){let c=e[n++];if(c<128){s[a++]=c;continue}let d=nf[c];if(d>4){s[a++]=65533,n+=d-1;continue}for(c&=d===2?31:d===3?15:7;d>1&&n<t;)c=c<<6|e[n++]&63,d--;if(d>1){s[a++]=65533;continue}c<65536?s[a++]=c:(c-=65536,s[a++]=55296|c>>10&1023,s[a++]=56320|c&1023)}return XW(s,a)},YW=(e,r)=>{r=r||e.length,r>e.length&&(r=e.length);let t=r-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+nf[e[t]]>r?t:r},af={string2buf:qW,buf2string:KW,utf8border:YW};function $W(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var tA=$W;const rA=Object.prototype.toString,{Z_NO_FLUSH:ZW,Z_SYNC_FLUSH:JW,Z_FULL_FLUSH:QW,Z_FINISH:eq,Z_OK:Ax,Z_STREAM_END:tq,Z_DEFAULT_COMPRESSION:rq,Z_DEFAULT_STRATEGY:nq,Z_DEFLATED:aq}=Af;function Cf(e){this.options=Jx.assign({level:rq,method:aq,chunkSize:16384,windowBits:15,memLevel:8,strategy:nq},e||{});let r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tA,this.strm.avail_out=0;let t=Cd.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(t!==Ax)throw new Error(Tc[t]);if(r.header&&Cd.deflateSetHeader(this.strm,r.header),r.dictionary){let n;if(typeof r.dictionary=="string"?n=af.string2buf(r.dictionary):rA.call(r.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(r.dictionary):n=r.dictionary,t=Cd.deflateSetDictionary(this.strm,n),t!==Ax)throw new Error(Tc[t]);this._dict_set=!0}}Cf.prototype.push=function(e,r){const t=this.strm,n=this.options.chunkSize;let a,s;if(this.ended)return!1;for(r===~~r?s=r:s=r===!0?eq:ZW,typeof e=="string"?t.input=af.string2buf(e):rA.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(s===JW||s===QW)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(a=Cd.deflate(t,s),a===tq)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),a=Cd.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Ax;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Cf.prototype.onData=function(e){this.chunks.push(e)};Cf.prototype.onEnd=function(e){e===Ax&&(this.result=Jx.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Hb(e,r){const t=new Cf(r);if(t.push(e,!0),t.err)throw t.msg||Tc[t.err];return t.result}function sq(e,r){return r=r||{},r.raw=!0,Hb(e,r)}function iq(e,r){return r=r||{},r.gzip=!0,Hb(e,r)}var lq=Cf,oq=Hb,cq=sq,uq=iq,dq={Deflate:lq,deflate:oq,deflateRaw:cq,gzip:uq};const X1=16209,fq=16191;var hq=function(r,t){let n,a,s,c,d,x,f,g,v,w,E,N,S,T,j,D,I,L,V,X,M,W,z,ae;const Z=r.state;n=r.next_in,z=r.input,a=n+(r.avail_in-5),s=r.next_out,ae=r.output,c=s-(t-r.avail_out),d=s+(r.avail_out-257),x=Z.dmax,f=Z.wsize,g=Z.whave,v=Z.wnext,w=Z.window,E=Z.hold,N=Z.bits,S=Z.lencode,T=Z.distcode,j=(1<<Z.lenbits)-1,D=(1<<Z.distbits)-1;e:do{N<15&&(E+=z[n++]<<N,N+=8,E+=z[n++]<<N,N+=8),I=S[E&j];t:for(;;){if(L=I>>>24,E>>>=L,N-=L,L=I>>>16&255,L===0)ae[s++]=I&65535;else if(L&16){V=I&65535,L&=15,L&&(N<L&&(E+=z[n++]<<N,N+=8),V+=E&(1<<L)-1,E>>>=L,N-=L),N<15&&(E+=z[n++]<<N,N+=8,E+=z[n++]<<N,N+=8),I=T[E&D];r:for(;;){if(L=I>>>24,E>>>=L,N-=L,L=I>>>16&255,L&16){if(X=I&65535,L&=15,N<L&&(E+=z[n++]<<N,N+=8,N<L&&(E+=z[n++]<<N,N+=8)),X+=E&(1<<L)-1,X>x){r.msg="invalid distance too far back",Z.mode=X1;break e}if(E>>>=L,N-=L,L=s-c,X>L){if(L=X-L,L>g&&Z.sane){r.msg="invalid distance too far back",Z.mode=X1;break e}if(M=0,W=w,v===0){if(M+=f-L,L<V){V-=L;do ae[s++]=w[M++];while(--L);M=s-X,W=ae}}else if(v<L){if(M+=f+v-L,L-=v,L<V){V-=L;do ae[s++]=w[M++];while(--L);if(M=0,v<V){L=v,V-=L;do ae[s++]=w[M++];while(--L);M=s-X,W=ae}}}else if(M+=v-L,L<V){V-=L;do ae[s++]=w[M++];while(--L);M=s-X,W=ae}for(;V>2;)ae[s++]=W[M++],ae[s++]=W[M++],ae[s++]=W[M++],V-=3;V&&(ae[s++]=W[M++],V>1&&(ae[s++]=W[M++]))}else{M=s-X;do ae[s++]=ae[M++],ae[s++]=ae[M++],ae[s++]=ae[M++],V-=3;while(V>2);V&&(ae[s++]=ae[M++],V>1&&(ae[s++]=ae[M++]))}}else if((L&64)===0){I=T[(I&65535)+(E&(1<<L)-1)];continue r}else{r.msg="invalid distance code",Z.mode=X1;break e}break}}else if((L&64)===0){I=S[(I&65535)+(E&(1<<L)-1)];continue t}else if(L&32){Z.mode=fq;break e}else{r.msg="invalid literal/length code",Z.mode=X1;break e}break}}while(n<a&&s<d);V=N>>3,n-=V,N-=V<<3,E&=(1<<N)-1,r.next_in=n,r.next_out=s,r.avail_in=n<a?5+(a-n):5-(n-a),r.avail_out=s<d?257+(d-s):257-(s-d),Z.hold=E,Z.bits=N};const R0=15,kE=852,SE=592,NE=0,Fp=1,AE=2,xq=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),mq=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),gq=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pq=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),bq=(e,r,t,n,a,s,c,d)=>{const x=d.bits;let f=0,g=0,v=0,w=0,E=0,N=0,S=0,T=0,j=0,D=0,I,L,V,X,M,W=null,z;const ae=new Uint16Array(R0+1),Z=new Uint16Array(R0+1);let H=null,he,q,se;for(f=0;f<=R0;f++)ae[f]=0;for(g=0;g<n;g++)ae[r[t+g]]++;for(E=x,w=R0;w>=1&&ae[w]===0;w--);if(E>w&&(E=w),w===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,d.bits=1,0;for(v=1;v<w&&ae[v]===0;v++);for(E<v&&(E=v),T=1,f=1;f<=R0;f++)if(T<<=1,T-=ae[f],T<0)return-1;if(T>0&&(e===NE||w!==1))return-1;for(Z[1]=0,f=1;f<R0;f++)Z[f+1]=Z[f]+ae[f];for(g=0;g<n;g++)r[t+g]!==0&&(c[Z[r[t+g]]++]=g);if(e===NE?(W=H=c,z=20):e===Fp?(W=xq,H=mq,z=257):(W=gq,H=pq,z=0),D=0,g=0,f=v,M=s,N=E,S=0,V=-1,j=1<<E,X=j-1,e===Fp&&j>kE||e===AE&&j>SE)return 1;for(;;){he=f-S,c[g]+1<z?(q=0,se=c[g]):c[g]>=z?(q=H[c[g]-z],se=W[c[g]-z]):(q=96,se=0),I=1<<f-S,L=1<<N,v=L;do L-=I,a[M+(D>>S)+L]=he<<24|q<<16|se|0;while(L!==0);for(I=1<<f-1;D&I;)I>>=1;if(I!==0?(D&=I-1,D+=I):D=0,g++,--ae[f]===0){if(f===w)break;f=r[t+c[g]]}if(f>E&&(D&X)!==V){for(S===0&&(S=E),M+=v,N=f-S,T=1<<N;N+S<w&&(T-=ae[N+S],!(T<=0));)N++,T<<=1;if(j+=1<<N,e===Fp&&j>kE||e===AE&&j>SE)return 1;V=D&X,a[V]=E<<24|N<<16|M-s|0}}return D!==0&&(a[M+D]=f-S<<24|64<<16|0),d.bits=E,0};var jd=bq;const vq=0,nA=1,aA=2,{Z_FINISH:TE,Z_BLOCK:yq,Z_TREES:K1,Z_OK:jc,Z_STREAM_END:wq,Z_NEED_DICT:_q,Z_STREAM_ERROR:ai,Z_DATA_ERROR:sA,Z_MEM_ERROR:iA,Z_BUF_ERROR:Eq,Z_DEFLATED:CE}=Af,Qx=16180,jE=16181,OE=16182,RE=16183,IE=16184,DE=16185,ME=16186,FE=16187,LE=16188,BE=16189,Tx=16190,pl=16191,Lp=16192,PE=16193,Bp=16194,UE=16195,zE=16196,HE=16197,GE=16198,Y1=16199,$1=16200,VE=16201,WE=16202,qE=16203,XE=16204,KE=16205,Pp=16206,YE=16207,$E=16208,On=16209,lA=16210,oA=16211,kq=852,Sq=592,Nq=15,Aq=Nq,ZE=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Tq(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Lc=e=>{if(!e)return 1;const r=e.state;return!r||r.strm!==e||r.mode<Qx||r.mode>oA?1:0},cA=e=>{if(Lc(e))return ai;const r=e.state;return e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=Qx,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(kq),r.distcode=r.distdyn=new Int32Array(Sq),r.sane=1,r.back=-1,jc},uA=e=>{if(Lc(e))return ai;const r=e.state;return r.wsize=0,r.whave=0,r.wnext=0,cA(e)},dA=(e,r)=>{let t;if(Lc(e))return ai;const n=e.state;return r<0?(t=0,r=-r):(t=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?ai:(n.window!==null&&n.wbits!==r&&(n.window=null),n.wrap=t,n.wbits=r,uA(e))},fA=(e,r)=>{if(!e)return ai;const t=new Tq;e.state=t,t.strm=e,t.window=null,t.mode=Qx;const n=dA(e,r);return n!==jc&&(e.state=null),n},Cq=e=>fA(e,Aq);let JE=!0,Up,zp;const jq=e=>{if(JE){Up=new Int32Array(512),zp=new Int32Array(32);let r=0;for(;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(jd(nA,e.lens,0,288,Up,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;jd(aA,e.lens,0,32,zp,0,e.work,{bits:5}),JE=!1}e.lencode=Up,e.lenbits=9,e.distcode=zp,e.distbits=5},hA=(e,r,t,n)=>{let a;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(r.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(r.subarray(t-n,t-n+a),s.wnext),n-=a,n?(s.window.set(r.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},Oq=(e,r)=>{let t,n,a,s,c,d,x,f,g,v,w,E,N,S,T=0,j,D,I,L,V,X,M,W;const z=new Uint8Array(4);let ae,Z;const H=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Lc(e)||!e.output||!e.input&&e.avail_in!==0)return ai;t=e.state,t.mode===pl&&(t.mode=Lp),c=e.next_out,a=e.output,x=e.avail_out,s=e.next_in,n=e.input,d=e.avail_in,f=t.hold,g=t.bits,v=d,w=x,W=jc;e:for(;;)switch(t.mode){case Qx:if(t.wrap===0){t.mode=Lp;break}for(;g<16;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,z[0]=f&255,z[1]=f>>>8&255,t.check=ba(t.check,z,2,0),f=0,g=0,t.mode=jE;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",t.mode=On;break}if((f&15)!==CE){e.msg="unknown compression method",t.mode=On;break}if(f>>>=4,g-=4,M=(f&15)+8,t.wbits===0&&(t.wbits=M),M>15||M>t.wbits){e.msg="invalid window size",t.mode=On;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=f&512?BE:pl,f=0,g=0;break;case jE:for(;g<16;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}if(t.flags=f,(t.flags&255)!==CE){e.msg="unknown compression method",t.mode=On;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=On;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(z[0]=f&255,z[1]=f>>>8&255,t.check=ba(t.check,z,2,0)),f=0,g=0,t.mode=OE;case OE:for(;g<32;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(z[0]=f&255,z[1]=f>>>8&255,z[2]=f>>>16&255,z[3]=f>>>24&255,t.check=ba(t.check,z,4,0)),f=0,g=0,t.mode=RE;case RE:for(;g<16;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(z[0]=f&255,z[1]=f>>>8&255,t.check=ba(t.check,z,2,0)),f=0,g=0,t.mode=IE;case IE:if(t.flags&1024){for(;g<16;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(z[0]=f&255,z[1]=f>>>8&255,t.check=ba(t.check,z,2,0)),f=0,g=0}else t.head&&(t.head.extra=null);t.mode=DE;case DE:if(t.flags&1024&&(E=t.length,E>d&&(E=d),E&&(t.head&&(M=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+E),M)),t.flags&512&&t.wrap&4&&(t.check=ba(t.check,n,E,s)),d-=E,s+=E,t.length-=E),t.length))break e;t.length=0,t.mode=ME;case ME:if(t.flags&2048){if(d===0)break e;E=0;do M=n[s+E++],t.head&&M&&t.length<65536&&(t.head.name+=String.fromCharCode(M));while(M&&E<d);if(t.flags&512&&t.wrap&4&&(t.check=ba(t.check,n,E,s)),d-=E,s+=E,M)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=FE;case FE:if(t.flags&4096){if(d===0)break e;E=0;do M=n[s+E++],t.head&&M&&t.length<65536&&(t.head.comment+=String.fromCharCode(M));while(M&&E<d);if(t.flags&512&&t.wrap&4&&(t.check=ba(t.check,n,E,s)),d-=E,s+=E,M)break e}else t.head&&(t.head.comment=null);t.mode=LE;case LE:if(t.flags&512){for(;g<16;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}if(t.wrap&4&&f!==(t.check&65535)){e.msg="header crc mismatch",t.mode=On;break}f=0,g=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=pl;break;case BE:for(;g<32;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}e.adler=t.check=ZE(f),f=0,g=0,t.mode=Tx;case Tx:if(t.havedict===0)return e.next_out=c,e.avail_out=x,e.next_in=s,e.avail_in=d,t.hold=f,t.bits=g,_q;e.adler=t.check=1,t.mode=pl;case pl:if(r===yq||r===K1)break e;case Lp:if(t.last){f>>>=g&7,g-=g&7,t.mode=Pp;break}for(;g<3;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}switch(t.last=f&1,f>>>=1,g-=1,f&3){case 0:t.mode=PE;break;case 1:if(jq(t),t.mode=Y1,r===K1){f>>>=2,g-=2;break e}break;case 2:t.mode=zE;break;case 3:e.msg="invalid block type",t.mode=On}f>>>=2,g-=2;break;case PE:for(f>>>=g&7,g-=g&7;g<32;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",t.mode=On;break}if(t.length=f&65535,f=0,g=0,t.mode=Bp,r===K1)break e;case Bp:t.mode=UE;case UE:if(E=t.length,E){if(E>d&&(E=d),E>x&&(E=x),E===0)break e;a.set(n.subarray(s,s+E),c),d-=E,s+=E,x-=E,c+=E,t.length-=E;break}t.mode=pl;break;case zE:for(;g<14;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}if(t.nlen=(f&31)+257,f>>>=5,g-=5,t.ndist=(f&31)+1,f>>>=5,g-=5,t.ncode=(f&15)+4,f>>>=4,g-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=On;break}t.have=0,t.mode=HE;case HE:for(;t.have<t.ncode;){for(;g<3;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}t.lens[H[t.have++]]=f&7,f>>>=3,g-=3}for(;t.have<19;)t.lens[H[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,ae={bits:t.lenbits},W=jd(vq,t.lens,0,19,t.lencode,0,t.work,ae),t.lenbits=ae.bits,W){e.msg="invalid code lengths set",t.mode=On;break}t.have=0,t.mode=GE;case GE:for(;t.have<t.nlen+t.ndist;){for(;T=t.lencode[f&(1<<t.lenbits)-1],j=T>>>24,D=T>>>16&255,I=T&65535,!(j<=g);){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}if(I<16)f>>>=j,g-=j,t.lens[t.have++]=I;else{if(I===16){for(Z=j+2;g<Z;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}if(f>>>=j,g-=j,t.have===0){e.msg="invalid bit length repeat",t.mode=On;break}M=t.lens[t.have-1],E=3+(f&3),f>>>=2,g-=2}else if(I===17){for(Z=j+3;g<Z;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}f>>>=j,g-=j,M=0,E=3+(f&7),f>>>=3,g-=3}else{for(Z=j+7;g<Z;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}f>>>=j,g-=j,M=0,E=11+(f&127),f>>>=7,g-=7}if(t.have+E>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=On;break}for(;E--;)t.lens[t.have++]=M}}if(t.mode===On)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=On;break}if(t.lenbits=9,ae={bits:t.lenbits},W=jd(nA,t.lens,0,t.nlen,t.lencode,0,t.work,ae),t.lenbits=ae.bits,W){e.msg="invalid literal/lengths set",t.mode=On;break}if(t.distbits=6,t.distcode=t.distdyn,ae={bits:t.distbits},W=jd(aA,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,ae),t.distbits=ae.bits,W){e.msg="invalid distances set",t.mode=On;break}if(t.mode=Y1,r===K1)break e;case Y1:t.mode=$1;case $1:if(d>=6&&x>=258){e.next_out=c,e.avail_out=x,e.next_in=s,e.avail_in=d,t.hold=f,t.bits=g,hq(e,w),c=e.next_out,a=e.output,x=e.avail_out,s=e.next_in,n=e.input,d=e.avail_in,f=t.hold,g=t.bits,t.mode===pl&&(t.back=-1);break}for(t.back=0;T=t.lencode[f&(1<<t.lenbits)-1],j=T>>>24,D=T>>>16&255,I=T&65535,!(j<=g);){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}if(D&&(D&240)===0){for(L=j,V=D,X=I;T=t.lencode[X+((f&(1<<L+V)-1)>>L)],j=T>>>24,D=T>>>16&255,I=T&65535,!(L+j<=g);){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}f>>>=L,g-=L,t.back+=L}if(f>>>=j,g-=j,t.back+=j,t.length=I,D===0){t.mode=KE;break}if(D&32){t.back=-1,t.mode=pl;break}if(D&64){e.msg="invalid literal/length code",t.mode=On;break}t.extra=D&15,t.mode=VE;case VE:if(t.extra){for(Z=t.extra;g<Z;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,g-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=WE;case WE:for(;T=t.distcode[f&(1<<t.distbits)-1],j=T>>>24,D=T>>>16&255,I=T&65535,!(j<=g);){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}if((D&240)===0){for(L=j,V=D,X=I;T=t.distcode[X+((f&(1<<L+V)-1)>>L)],j=T>>>24,D=T>>>16&255,I=T&65535,!(L+j<=g);){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}f>>>=L,g-=L,t.back+=L}if(f>>>=j,g-=j,t.back+=j,D&64){e.msg="invalid distance code",t.mode=On;break}t.offset=I,t.extra=D&15,t.mode=qE;case qE:if(t.extra){for(Z=t.extra;g<Z;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,g-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=On;break}t.mode=XE;case XE:if(x===0)break e;if(E=w-x,t.offset>E){if(E=t.offset-E,E>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=On;break}E>t.wnext?(E-=t.wnext,N=t.wsize-E):N=t.wnext-E,E>t.length&&(E=t.length),S=t.window}else S=a,N=c-t.offset,E=t.length;E>x&&(E=x),x-=E,t.length-=E;do a[c++]=S[N++];while(--E);t.length===0&&(t.mode=$1);break;case KE:if(x===0)break e;a[c++]=t.length,x--,t.mode=$1;break;case Pp:if(t.wrap){for(;g<32;){if(d===0)break e;d--,f|=n[s++]<<g,g+=8}if(w-=x,e.total_out+=w,t.total+=w,t.wrap&4&&w&&(e.adler=t.check=t.flags?ba(t.check,a,w,c-w):rf(t.check,a,w,c-w)),w=x,t.wrap&4&&(t.flags?f:ZE(f))!==t.check){e.msg="incorrect data check",t.mode=On;break}f=0,g=0}t.mode=YE;case YE:if(t.wrap&&t.flags){for(;g<32;){if(d===0)break e;d--,f+=n[s++]<<g,g+=8}if(t.wrap&4&&f!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=On;break}f=0,g=0}t.mode=$E;case $E:W=wq;break e;case On:W=sA;break e;case lA:return iA;case oA:default:return ai}return e.next_out=c,e.avail_out=x,e.next_in=s,e.avail_in=d,t.hold=f,t.bits=g,(t.wsize||w!==e.avail_out&&t.mode<On&&(t.mode<Pp||r!==TE))&&hA(e,e.output,e.next_out,w-e.avail_out),v-=e.avail_in,w-=e.avail_out,e.total_in+=v,e.total_out+=w,t.total+=w,t.wrap&4&&w&&(e.adler=t.check=t.flags?ba(t.check,a,w,e.next_out-w):rf(t.check,a,w,e.next_out-w)),e.data_type=t.bits+(t.last?64:0)+(t.mode===pl?128:0)+(t.mode===Y1||t.mode===Bp?256:0),(v===0&&w===0||r===TE)&&W===jc&&(W=Eq),W},Rq=e=>{if(Lc(e))return ai;let r=e.state;return r.window&&(r.window=null),e.state=null,jc},Iq=(e,r)=>{if(Lc(e))return ai;const t=e.state;return(t.wrap&2)===0?ai:(t.head=r,r.done=!1,jc)},Dq=(e,r)=>{const t=r.length;let n,a,s;return Lc(e)||(n=e.state,n.wrap!==0&&n.mode!==Tx)?ai:n.mode===Tx&&(a=1,a=rf(a,r,t,0),a!==n.check)?sA:(s=hA(e,r,t,t),s?(n.mode=lA,iA):(n.havedict=1,jc))};var Mq=uA,Fq=dA,Lq=cA,Bq=Cq,Pq=fA,Uq=Oq,zq=Rq,Hq=Iq,Gq=Dq,Vq="pako inflate (from Nodeca project)",wl={inflateReset:Mq,inflateReset2:Fq,inflateResetKeep:Lq,inflateInit:Bq,inflateInit2:Pq,inflate:Uq,inflateEnd:zq,inflateGetHeader:Hq,inflateSetDictionary:Gq,inflateInfo:Vq};function Wq(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var qq=Wq;const xA=Object.prototype.toString,{Z_NO_FLUSH:Xq,Z_FINISH:Kq,Z_OK:sf,Z_STREAM_END:Hp,Z_NEED_DICT:Gp,Z_STREAM_ERROR:Yq,Z_DATA_ERROR:QE,Z_MEM_ERROR:$q}=Af;function jf(e){this.options=Jx.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tA,this.strm.avail_out=0;let t=wl.inflateInit2(this.strm,r.windowBits);if(t!==sf)throw new Error(Tc[t]);if(this.header=new qq,wl.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=af.string2buf(r.dictionary):xA.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=wl.inflateSetDictionary(this.strm,r.dictionary),t!==sf)))throw new Error(Tc[t])}jf.prototype.push=function(e,r){const t=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,c,d;if(this.ended)return!1;for(r===~~r?c=r:c=r===!0?Kq:Xq,xA.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=wl.inflate(t,c),s===Gp&&a&&(s=wl.inflateSetDictionary(t,a),s===sf?s=wl.inflate(t,c):s===QE&&(s=Gp));t.avail_in>0&&s===Hp&&t.state.wrap>0&&e[t.next_in]!==0;)wl.inflateReset(t),s=wl.inflate(t,c);switch(s){case Yq:case QE:case Gp:case $q:return this.onEnd(s),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||s===Hp))if(this.options.to==="string"){let x=af.utf8border(t.output,t.next_out),f=t.next_out-x,g=af.buf2string(t.output,x);t.next_out=f,t.avail_out=n-f,f&&t.output.set(t.output.subarray(x,x+f),0),this.onData(g)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===sf&&d===0)){if(s===Hp)return s=wl.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};jf.prototype.onData=function(e){this.chunks.push(e)};jf.prototype.onEnd=function(e){e===sf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Jx.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Gb(e,r){const t=new jf(r);if(t.push(e),t.err)throw t.msg||Tc[t.err];return t.result}function Zq(e,r){return r=r||{},r.raw=!0,Gb(e,r)}var Jq=jf,Qq=Gb,eX=Zq,tX=Gb,rX={Inflate:Jq,inflate:Qq,inflateRaw:eX,ungzip:tX};const{Deflate:nX,deflate:aX,deflateRaw:sX,gzip:iX}=dq,{Inflate:lX,inflate:oX,inflateRaw:cX,ungzip:uX}=rX;var dX=nX,fX=aX,hX=sX,xX=iX,mX=lX,gX=oX,pX=cX,bX=uX,vX=Af,ek={Deflate:dX,deflate:fX,deflateRaw:hX,gzip:xX,Inflate:mX,inflate:gX,inflateRaw:pX,ungzip:bX,constants:vX};function yX({isOpen:e,onClose:r,invoiceLine:t,products:n,onSelect:a,onCreateNew:s}){if(!e)return null;const[c,d]=J.useState({name:"",stockCode:"",barcode:""}),[x,f]=J.useState(n);return J.useEffect(()=>{let g=n;const v=(w,E)=>(w||"").toLocaleLowerCase("tr-TR").includes((E||"").toLocaleLowerCase("tr-TR"));c.name&&(g=g.filter(w=>v(w.name,c.name))),c.stockCode&&(g=g.filter(w=>v(w.stock_code,c.stockCode))),c.barcode&&(g=g.filter(w=>v(w.barcode,c.barcode))),f(g)},[c,n]),l.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/90 via-indigo-900/80 to-purple-900/90 backdrop-blur-md animate-in fade-in duration-300",onClick:r}),l.jsxs("div",{className:"relative bg-white/95 backdrop-blur-xl rounded-none shadow-[0_25px_50px_-12px_rgba(0,0,0,0.5)] w-full max-w-7xl flex flex-col h-[95vh] overflow-hidden ring-1 ring-white/20 animate-in zoom-in-95 duration-300",children:[l.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 bg-gradient-to-br from-blue-400 to-cyan-400 rounded-full blur-3xl opacity-20 pointer-events-none"}),l.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full blur-3xl opacity-20 pointer-events-none"}),l.jsxs("div",{className:"bg-gradient-to-r from-slate-800 via-slate-900 to-indigo-900 p-6 border-b border-white/10 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-10",children:l.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_30%_20%,rgba(255,255,255,0.1)_0%,transparent_50%)]"})}),l.jsxs("div",{className:"flex justify-between items-center relative z-10",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/30 flex-shrink-0",children:l.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-indigo-300 text-xs font-bold uppercase tracking-widest mb-1 block",children:"RN ELETRME"}),l.jsx("h3",{className:"text-white font-extrabold text-2xl leading-tight",children:"Stok Kart Seimi"}),l.jsx("div",{className:"flex items-center gap-2 mt-2",children:l.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-slate-400 bg-white/5 px-3 py-1 rounded-full border border-white/10",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),t?.name]})})]})]}),l.jsx("button",{onClick:r,className:"p-3 rounded-xl bg-white/10 hover:bg-red-500/20 border border-white/20 transition-all duration-200",children:l.jsx("svg",{className:"w-6 h-6 text-white hover:text-red-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsx("div",{className:"p-6 bg-gradient-to-br from-slate-50 via-white to-indigo-50/30 border-b border-gray-200",children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{label:"rn Ad",key:"name",icon:"M4 6h16M4 12h16m-7 6h7"},{label:"Stok Kodu",key:"stockCode",icon:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"},{label:"Barkod",key:"barcode",icon:"M12 4v16m8-8H4"}].map(g=>l.jsxs("div",{className:"relative group",children:[l.jsx("label",{className:"text-xs font-bold text-indigo-600 uppercase tracking-widest mb-2 block",children:g.label}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:l.jsx("svg",{className:"h-5 w-5 text-gray-400 group-focus-within:text-indigo-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:g.icon})})}),l.jsx("input",{type:"text",className:"w-full bg-white border-2 border-gray-200 text-gray-800 text-base font-medium rounded-xl pl-12 pr-4 py-3.5 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all shadow-sm",placeholder:`${g.label} ile ara...`,value:c[g.key],onChange:v=>d({...c,[g.key]:v.target.value}),autoComplete:"off"})]})]},g.key))})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gradient-to-br from-slate-50 via-white to-indigo-50/30",children:l.jsx("div",{className:"bg-white rounded-xl shadow-xl border border-gray-200/50 overflow-hidden ring-1 ring-black/5",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gradient-to-r from-slate-800 to-indigo-900 text-white font-bold text-sm uppercase tracking-wide",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-5 w-16 text-center",children:"#"}),l.jsx("th",{className:"px-6 py-5 text-left w-48",children:"Stok Kodu"}),l.jsx("th",{className:"px-6 py-5 text-left",children:"rn Ad"}),l.jsx("th",{className:"px-6 py-5 text-left w-48",children:"Barkod"}),l.jsx("th",{className:"px-6 py-5 text-right w-36",children:"Sat Fiyat"}),l.jsx("th",{className:"px-6 py-5 w-10"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-100",children:[x.map((g,v)=>l.jsxs("tr",{onClick:()=>a(g),className:"hover:bg-indigo-50/50 cursor-pointer transition-all duration-200 group",children:[l.jsx("td",{className:"px-6 py-5 text-center",children:l.jsx("span",{className:"font-bold text-gray-400 text-base group-hover:text-indigo-500",children:v+1})}),l.jsx("td",{className:"px-6 py-5",children:l.jsx("span",{className:"font-mono font-bold text-base bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg",children:g.stock_code})}),l.jsx("td",{className:"px-6 py-5 font-semibold text-gray-800 text-base group-hover:text-gray-900",children:g.name}),l.jsx("td",{className:"px-6 py-5 text-gray-500 text-sm font-mono",children:g.barcode||"-"}),l.jsx("td",{className:"px-6 py-5 text-right",children:l.jsxs("span",{className:"font-bold text-lg text-emerald-700 bg-emerald-100 px-4 py-2 rounded-xl border border-emerald-200",children:[g.sale_price?.toLocaleString("tr-TR",{minimumFractionDigits:2})," "]})}),l.jsx("td",{className:"px-6 py-5 text-center",children:l.jsx("svg",{className:"w-6 h-6 text-gray-300 group-hover:text-indigo-500 transform group-hover:translate-x-1 transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]},g.id)),x.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:"6",className:"px-6 py-16 text-center",children:l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center",children:l.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),l.jsx("h4",{className:"text-gray-900 font-bold text-lg",children:"Sonu Bulunamad"}),l.jsx("p",{className:"text-gray-500 text-base",children:"Aradnz kriterlere uygun rn mevcut deil."})]})})})]})]})})}),l.jsxs("div",{className:"p-6 bg-gradient-to-r from-slate-800 via-slate-900 to-indigo-900 border-t border-white/10 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-5",children:l.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.1)_0%,transparent_50%)]"})}),l.jsxs("div",{className:"relative z-10",children:[l.jsxs("button",{onClick:s,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white font-bold text-lg py-4 px-8 rounded-xl shadow-lg shadow-emerald-500/30 transition-all transform hover:-translate-y-1 hover:shadow-2xl flex items-center justify-center gap-3",children:[l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})," Bu rn Yeni Olarak Ekle"]}),l.jsx("p",{className:"text-center text-xs text-slate-400 mt-3 font-medium",children:"Seili fatura satrndaki veriler kullanlarak yeni bir stok kart oluturulacaktr."})]})]})]})]})}function wX(){const[e,r]=J.useState([]),[t,n]=J.useState(!0),[a,s]=J.useState(!1),[c,d]=J.useState(!1),[x,f]=J.useState(!1),[g,v]=J.useState(null),[w,E]=J.useState(null),[N,S]=J.useState(!1),[T,j]=J.useState(!1),[D,I]=J.useState(null),[L,V]=J.useState(!1),[X,M]=J.useState(null),[W,z]=J.useState([]),[ae,Z]=J.useState([]),[H,he]=J.useState({}),[q,se]=J.useState(null),[ve,le]=J.useState(!1),[ge,ie]=J.useState(""),[Le,Q]=J.useState(!1),[B,te]=J.useState(null);J.useEffect(()=>{ye(),U()},[]);const U=async()=>{try{const[Pe,Ye]=await Promise.all([Sn.getAll(),kn.getAll()]);z(Pe.data?.products||[]),Z(Ye.data?.customers||[])}catch(Pe){console.error("Eletirme verileri yklenemedi",Pe)}},[P,ue]=J.useState({search:"",status:"Tm",startDate:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[Re,De]=J.useState({key:"date",direction:"desc"}),[Ne,Ke]=J.useState(!0);J.useEffect(()=>{ye(),(async()=>{try{const Ye=await xn.get("invoices_show_total");if(Ye.data!==null&&Ye.data!==void 0){const Tt=Ye.data;Ke(Tt===!0||Tt==="true")}}catch(Ye){console.error("Error loading settings",Ye)}})()},[]);const ye=async()=>{try{const Pe=await vi.getAll();r(Pe.data?.invoices||[])}catch(Pe){console.error("Faturalar yklenirken hata:",Pe)}finally{n(!1)}},me=async()=>{const[Pe,Ye,Tt]=await Promise.all([xn.get("birfatura_api_key"),xn.get("birfatura_secret_key"),xn.get("birfatura_integration_key")]);return!Pe.data||!Ye.data||!Tt.data?null:{api_key:Pe.data,secret_key:Ye.data,integration_key:Tt.data}},Ce=async Pe=>{if(!Pe.uuid){alert("Fatura UUID bulunamad.");return}j(!0),I(null),M(null);try{const Ye=await me();if(!Ye){alert("API ayarlar eksik. Ltfen ayarlardan BirFatura entegrasyonunu kontrol edin."),j(!1);return}const Tt={documentUUID:Pe.uuid,inOutCode:"IN",systemTypeCodes:"EFATURA"},Ct=await mn.post("/api/birfatura-proxy",{endpoint:"OutEBelgeV2/DocumentDownloadByUUID",payload:Tt,apiKey:Ye.api_key,secretKey:Ye.secret_key,integrationKey:Ye.integration_key},{timeout:3e4});if(!Ct.data?.Success)throw new Error("ndirme Baarsz: "+(Ct.data?.Message||"Bilinmeyen hata"));const Mt=Ct.data.Result?.content;if(!Mt)throw new Error("Fatura ierii bo geldi.");const lr={documentBytes:Mt,systemTypeCodes:"EFATURA"},jt=await mn.post("/api/birfatura-proxy",{endpoint:"OutEBelgeV2/PreviewDocumentReturnHTML",payload:lr,apiKey:Ye.api_key,secretKey:Ye.secret_key,integrationKey:Ye.integration_key},{timeout:3e4});if(!jt.data?.Success)throw new Error("nizleme Baarsz: "+(jt.data?.Message||"Bilinmeyen hata"));const ft=jt.data.Result?.zipped;if(!ft)throw new Error("HTML verisi oluturulamad.");const qt=atob(ft),Bt=new Uint8Array(qt.length);for(let mr=0;mr<qt.length;mr++)Bt[mr]=qt.charCodeAt(mr);let Qt="";try{Qt=ek.ungzip(Bt,{to:"string"})}catch{try{Qt=ek.inflate(Bt,{to:"string"})}catch(Pr){console.warn("Decompression failed, using raw bytes as string",Pr),Qt=new TextDecoder("utf-8").decode(Bt)}}M(Qt),V(!0),j(!1)}catch(Ye){console.error("Grntleme Hatas:",Ye);const Tt="Balant Hatas: "+(Ye.message||"Sunucuya ulalamad.");I(Tt),j(!1)}},G=async()=>{s(!0);try{const Pe=await me();if(!Pe){alert("Ltfen nce Ayarlar > Entegrasyon Ayarlar blmnden API anahtarlarn girin."),s(!1);return}const Ye=P.startDate?`${P.startDate}T00:00:00Z`:new Date(new Date().setDate(new Date().getDate()-30)).toISOString(),Tt=P.endDate?`${P.endDate}T23:59:59Z`:new Date().toISOString(),Ct={systemType:"EFATURA",startDateTime:Ye,endDateTime:Tt,documentType:"INVOICE",readUnReadStatus:"ALL",pageNumber:0},Mt=await mn.post("/api/birfatura-proxy",{endpoint:"OutEBelgeV2/GetInBoxDocumentsWithDetail",payload:Ct,apiKey:Pe.api_key,secretKey:Pe.secret_key,integrationKey:Pe.integration_key});if(Mt.data?.Success){const jt=(Mt.data.Result?.InBoxInvoices?.objects||[]).map(ft=>{const qt=ft.inBoxInvoice,Bt=e.find(Qt=>Qt.uuid===qt.UUID);return{uuid:qt.UUID,invoice_number:qt.InvoiceNo,supplier_name:qt.SenderName,date:(qt.IssueDate||"").split("T")[0]+" 00:00:00",total:qt.PayableAmount||0,status:Bt?Bt.status:"Bekliyor"}});jt.length>0?(await vi.syncBatch(jt)).data?.success?(alert(`${jt.length} fatura baaryla senkronize edildi.`),ye()):alert("Faturalar ekildi fakat veritabanna kaydedilemedi."):alert("Seilen tarih aralnda yeni fatura bulunamad.")}else alert(`BirFatura Hatas: ${Mt.data?.Message||"Bilinmeyen hata"}`)}catch(Pe){console.error("Sync Error Full Object:",Pe);const Ye=Pe.response?.data?.Message||Pe.response?.data?.message||Pe.message||"Bilinmeyen hata";alert("Senkronizasyon hatas: "+Ye)}finally{s(!1)}},Me=async Pe=>{v(Pe),f(!0),S(!0),E(null),he({}),se(null);try{const Ye=await me();if(!Ye){confirm("Fatura detaylarn grntlemek iin API anahtarlarn girmeniz gerekmektedir. Ayarlara gitmek ister misiniz?")&&(window.location.href="/settings"),f(!1),S(!1);return}const Tt={documentUUID:Pe.uuid,inOutCode:"IN",systemTypeCodes:"EFATURA"},Ct=await mn.post("/api/birfatura-proxy",{endpoint:"OutEBelgeV2/DocumentDownloadByUUID",payload:Tt,apiKey:Ye.api_key,secretKey:Ye.secret_key,integrationKey:Ye.integration_key});if(!Ct.data.Success)throw new Error(Ct.data.Message||"erik alnamad");const Mt=Ct.data.Result?.content;if(!Mt)throw new Error("Dosya ierii bo.");const jt=await new c2().loadAsync(Mt,{base64:!0}),ft=Object.keys(jt.files).find(_r=>_r.toLowerCase().endsWith(".xml"));if(!ft)throw new Error("ZIP iinde XML dosyas bulunamad.");const qt=await jt.files[ft].async("string"),Qt=new DOMParser().parseFromString(qt,"text/xml"),mr=(_r,Ie)=>{if(!_r)return"";const wt=_r.getElementsByTagName("*");for(let _t=0;_t<wt.length;_t++)if(wt[_t].localName===Ie)return wt[_t].textContent;return""},Pr=(_r,Ie)=>{if(!_r)return null;const wt=_r.getElementsByTagName("*");for(let _t=0;_t<wt.length;_t++)if(wt[_t].localName===Ie)return wt[_t];return null},Xr=Pr(Qt,"AccountingSupplierParty"),$t=Pr(Xr,"PartyIdentification"),Cr=mr($t,"ID"),Kr=Pr(Xr,"PartyName"),Tn=mr(Kr,"Name"),Mr=ae.find(_r=>_r.tax_number===Cr)||ae.find(_r=>_r.name.toLowerCase()===Tn?.toLowerCase());Mr&&se(Mr.id);const Ge=Array.from(Qt.getElementsByTagName("*")).filter(_r=>_r.localName==="InvoiceLine").map(_r=>{const Ie=Pr(_r,"Item"),wt=Pr(_r,"Price"),_t=parseFloat(mr(_r,"InvoicedQuantity")||0),Ft=parseFloat(mr(wt,"PriceAmount")||0),ee=parseFloat(mr(_r,"LineExtensionAmount")||0);let fe=0;const pe=Array.from(_r.getElementsByTagName("*")).filter(Ee=>Ee.localName==="AllowanceCharge");for(const Ee of pe)mr(Ee,"ChargeIndicator")==="false"&&(fe+=parseFloat(mr(Ee,"Amount")||0));let be=0;const we=Pr(_r,"TaxTotal");if(we){const Ee=Pr(we,"TaxSubtotal");if(Ee){const Xe=mr(Ee,"Percent");if(Xe)be=parseFloat(Xe);else{const ot=Pr(Ee,"TaxCategory");ot&&(be=parseFloat(mr(ot,"Percent")||0))}}}if(be===0){const Ee=Pr(Ie,"ClassifiedTaxCategory");Ee&&(be=parseFloat(mr(Ee,"Percent")||0))}return{name:mr(Ie,"Name"),description:mr(Ie,"Description"),quantity:_t,unit_price:Ft,line_net:ee,discount:fe,vat_rate:be,total_inc_vat:ee+ee*be/100-fe}}),Nt={};Ge.forEach((_r,Ie)=>{const wt=W.find(_t=>_t.name.toLowerCase()===_r.name.toLowerCase());wt&&(Nt[Ie]=wt.id)}),he(Nt);const Dt=Pr(Qt,"LegalMonetaryTotal"),Pt=parseFloat(mr(Dt,"PayableAmount")||0);E({supplier_name:Tn,supplier_tax_no:Cr,total_amount:Pt,lines:Ge})}catch(Ye){console.error("Fatura detay yklenirken hata:",Ye),alert("Detay hatas: "+(Ye.message||"Bilinmiyor"))}finally{S(!1)}},Ae=async()=>{try{await vi.updateStatus(g.id,"lenmeyecek"),f(!1),ye()}catch(Pe){alert("Hata: "+(Pe.response?.data?.message||Pe.message))}},oe=["Tm","Bekliyor","lendi","lenmeyecek","ptal Edildi"],Se=(()=>{let Pe=[...e];if(P.search){const Ye=P.search.toLowerCase();Pe=Pe.filter(Tt=>Tt.invoice_number?.toLowerCase().includes(Ye)||Tt.supplier_name?.toLowerCase().includes(Ye))}return P.status!=="Tm"&&(Pe=Pe.filter(Ye=>Ye.status===P.status)),P.startDate&&(Pe=Pe.filter(Ye=>new Date(Ye.date)>=new Date(P.startDate))),P.endDate&&(Pe=Pe.filter(Ye=>new Date(Ye.date)<=new Date(P.endDate))),Pe.sort((Ye,Tt)=>{let Ct=Ye[Re.key],Mt=Tt[Re.key];if(Re.key==="total")return Ct=parseFloat(Ct)||0,Mt=parseFloat(Mt)||0,Re.direction==="asc"?Ct-Mt:Mt-Ct;if(Re.key==="date")return Ct=new Date(Ct||0),Mt=new Date(Mt||0),Re.direction==="asc"?Ct-Mt:Mt-Ct;const lr=String(Ct||"").toLowerCase().localeCompare(String(Mt||"").toLowerCase(),"tr");return Re.direction==="asc"?lr:-lr}),Pe})(),lt=Pe=>{De(Ye=>({key:Pe,direction:Ye.key===Pe&&Ye.direction==="asc"?"desc":"asc"}))},Ue=Pe=>Re.key!==Pe?"":Re.direction==="asc"?"":"",He=()=>{ue({search:"",status:"Tm",startDate:"",endDate:""})},Oe=Pe=>Pe?new Date(Pe).toLocaleDateString("tr-TR"):"-",We=Se.reduce((Pe,Ye)=>Pe+(Ye.total||0),0);if(t)return l.jsx("div",{className:"flex items-center justify-center min-h-96",children:l.jsx("div",{className:"spinner"})});const rt=async()=>{if(!w)return;if(!q){alert("Ltfen faturay ilemek iin bir cari (tedariki) sein.");return}if(!w.lines.every((Ye,Tt)=>H[Tt])){alert("Ltfen tm satrlar stoktaki bir rnle eletirin.");return}if(confirm("Bu faturay ilemek istediinize emin misiniz? Stoklar artacak ve cari alaca gncellenecek.")){le(!0);try{for(let Ye=0;Ye<w.lines.length;Ye++){const Tt=w.lines[Ye],Ct=H[Ye],Mt=W.find(lr=>lr.id==Ct);if(Mt){const lr=(Mt.stock||0)+Tt.quantity;await Sn.updateStock(Mt.stock_code,{stock:lr,buying_price:Tt.unit_price})}}await kn.addPurchaseTransaction({customer_id:q,amount:w.total_amount,description:`${ge||"Fatura leme"} (${g.invoice_number})`}),await vi.updateStatus(g.id,"lendi"),alert("Fatura baaryla ilendi ve stoklara alnd!"),f(!1),ye()}catch(Ye){console.error(Ye),alert("lem srasnda hata olutu: "+Ye.message)}finally{le(!1)}}},ht=async Pe=>{if(!Pe||Pe.status!=="lendi"){alert("Sadece 'lendi' durumundaki faturalar iptal edilebilir.");return}if(confirm(`"${Pe.invoice_number}" numaral faturay iptal etmek istediinize emin misiniz?

Bu ilem:
 Stoklara eklenen rnleri geri decek
 Cariye ilenen borcu iptal edecek
 Fatura durumunu deitirecek`)){le(!0);try{const Ye=await me();if(!Ye){alert("API ayarlar bulunamad. Stok ve cari iptali manuel yaplmaldr."),await vi.updateStatus(Pe.id,"lendi ancak iptal edildi"),ye(),le(!1);return}const Tt={documentUUID:Pe.uuid,inOutCode:"IN",systemTypeCodes:"EFATURA"},Ct=await mn.post("/api/birfatura-proxy",{endpoint:"OutEBelgeV2/DocumentDownloadByUUID",payload:Tt,apiKey:Ye.api_key,secretKey:Ye.secret_key,integrationKey:Ye.integration_key});if(!Ct.data.Success)throw new Error(Ct.data.Message||"Fatura detay alnamad");const Mt=Ct.data.Result?.content;if(!Mt){await vi.updateStatus(Pe.id,"lendi ancak iptal edildi"),alert("Fatura detaylar alnamad ama durum gncellendi. Stok ve cari iptali manuel yaplmaldr."),ye(),le(!1);return}const jt=await new c2().loadAsync(Mt,{base64:!0}),ft=Object.keys(jt.files).find(Ge=>Ge.toLowerCase().endsWith(".xml"));if(!ft)throw new Error("XML bulunamad");const qt=await jt.files[ft].async("string"),Qt=new DOMParser().parseFromString(qt,"text/xml"),mr=(Ge,Nt)=>{if(!Ge)return"";const Dt=Ge.getElementsByTagName("*");for(let Pt=0;Pt<Dt.length;Pt++)if(Dt[Pt].localName===Nt)return Dt[Pt].textContent;return""},Pr=(Ge,Nt)=>{if(!Ge)return null;const Dt=Ge.getElementsByTagName("*");for(let Pt=0;Pt<Dt.length;Pt++)if(Dt[Pt].localName===Nt)return Dt[Pt];return null},$t=Array.from(Qt.getElementsByTagName("*")).filter(Ge=>Ge.localName==="InvoiceLine").map(Ge=>{const Nt=Pr(Ge,"Item"),Dt=parseFloat(mr(Ge,"InvoicedQuantity")||0);return{name:mr(Nt,"Name"),quantity:Dt}}),Cr=Pe.total||0;for(const Ge of $t){const Nt=W.find(Dt=>Dt.name.toLowerCase()===Ge.name.toLowerCase());if(Nt){const Dt=Math.max(0,(Nt.stock||0)-Ge.quantity);await Sn.updateStock(Nt.stock_code,{stock:Dt})}}const Kr=Pr(Qt,"AccountingSupplierParty"),Tn=Pr(Kr,"PartyName"),Mr=mr(Tn,"Name"),Hr=ae.find(Ge=>Ge.name.toLowerCase()===Mr?.toLowerCase());Hr&&await kn.cancelPurchaseTransaction({customer_id:Hr.id,amount:Cr,description:`Fatura ptali (${Pe.invoice_number})`}),await vi.updateStatus(Pe.id,"lendi ancak iptal edildi"),alert(`Fatura baaryla iptal edildi!
 Stoklar dld
 Cari borcu silindi
 Durum gncellendi`),ye(),U()}catch(Ye){console.error("ptal Hatas:",Ye),alert("ptal srasnda hata olutu: "+Ye.message)}finally{le(!1)}}};return l.jsxs("div",{className:"flex min-h-screen transition-all duration-300",children:[L&&X&&l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[70] flex items-center justify-center p-4 animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-5xl h-[90vh] flex flex-col shadow-2xl overflow-hidden ring-1 ring-gray-600",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[l.jsx("span",{className:"bg-blue-100 text-blue-600 p-1.5 rounded-lg",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),"Fatura nizleme"]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:()=>{const Pe=window.open("","_blank");Pe.document.write(X),Pe.document.close(),Pe.onload=()=>{Pe.print()}},className:"px-5 py-2.5 text-base font-semibold text-white bg-gradient-to-r from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 transform hover:scale-105",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Yazdr"]}),l.jsxs("button",{onClick:()=>{const Pe=new Blob([X],{type:"text/html;charset=utf-8"}),Ye=URL.createObjectURL(Pe),Tt=document.createElement("a");Tt.href=Ye,Tt.download=`fatura_${Date.now()}.html`,Tt.click()},className:"px-5 py-2.5 text-base font-semibold text-white bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 transform hover:scale-105",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"ndir"]}),l.jsxs("button",{onClick:()=>V(!1),className:"px-5 py-2.5 text-base font-semibold text-white bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 transform hover:scale-105",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Kapat"]})]})]}),l.jsx("div",{className:"flex-1 bg-gray-100 relative",children:l.jsx("iframe",{title:"Invoice Preview",srcDoc:X,className:"w-full h-full border-none"})})]})}),T&&l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[60] flex items-center justify-center flex-col animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl flex flex-col items-center max-w-sm w-full mx-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 animate-pulse"}),l.jsxs("div",{className:"w-20 h-20 mb-6 relative",children:[l.jsx("div",{className:"absolute inset-0 border-4 border-blue-100 rounded-full"}),l.jsx("div",{className:"absolute inset-0 border-4 border-blue-600 rounded-full border-t-transparent animate-spin"}),l.jsx("svg",{className:"w-8 h-8 text-blue-600 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]}),l.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Faturanz Alyor..."}),l.jsx("p",{className:"text-gray-500 text-center text-sm",children:"Belge sunucudan indiriliyor ve nizleme hazrlanyor."}),l.jsxs("div",{className:"mt-6 flex gap-2",children:[l.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0s"}}),l.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),l.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})}),c&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>d(!1)}),l.jsxs("aside",{className:`
                fixed lg:sticky lg:top-0 lg:h-screen inset-y-0 left-0 z-50
                w-72 bg-white border-r border-gray-200 p-5 overflow-y-auto
                transform transition-transform duration-300 flex flex-col
                ${c?"translate-x-0":"-translate-x-full lg:translate-x-0"}
            `,children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-5 flex items-center gap-2",children:[l.jsx("span",{children:""})," Filtreler"]}),l.jsxs("div",{className:"space-y-4 flex-1",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Fatura No / Tedariki"}),l.jsx("input",{type:"text",value:P.search,onChange:Pe=>ue({...P,search:Pe.target.value}),placeholder:"Ara...",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Durum"}),l.jsx("select",{value:P.status,onChange:Pe=>ue({...P,status:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500",children:oe.map(Pe=>l.jsx("option",{value:Pe,children:Pe},Pe))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tarih Aral"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{type:"date",value:P.startDate,onChange:Pe=>ue({...P,startDate:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500"}),l.jsx("input",{type:"date",value:P.endDate,onChange:Pe=>ue({...P,endDate:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500"})]})]})]}),l.jsx("div",{className:"mt-auto pt-4 border-t border-gray-200 space-y-2",children:l.jsx("button",{onClick:He,className:"w-full py-2.5 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:" Temizle"})})]}),l.jsxs("main",{className:"flex-1 p-5",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-5",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>d(!0),className:"lg:hidden p-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" Gelen Faturalar"}),l.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[Se.length," fatura"]})]})]}),l.jsx("button",{onClick:G,disabled:a,className:"px-4 py-2 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-medium hover:from-violet-700 hover:to-purple-700 transition-all flex items-center gap-2 justify-center disabled:opacity-50",children:a?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Senkronize ediliyor..."]}):l.jsx(l.Fragment,{children:" Faturalar Senkronize Et"})})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-5",children:[l.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-500 rounded-2xl p-4 text-white text-center",children:[l.jsx("p",{className:"text-amber-100 text-sm",children:"Bekleyen"}),l.jsx("p",{className:"text-2xl font-bold",children:e.filter(Pe=>Pe.status==="Bekliyor").length})]}),l.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[l.jsx("p",{className:"text-emerald-100 text-sm",children:"lendi"}),l.jsx("p",{className:"text-2xl font-bold",children:e.filter(Pe=>Pe.status==="lendi").length})]}),l.jsxs("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-2xl p-4 text-white text-center",children:[l.jsx("p",{className:"text-gray-100 text-sm",children:"lenmeyecek"}),l.jsx("p",{className:"text-2xl font-bold",children:e.filter(Pe=>Pe.status==="lenmeyecek").length})]}),l.jsxs("div",{className:"bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[l.jsx("p",{className:"text-violet-100 text-sm",children:"Toplam Tutar"}),l.jsx("p",{className:"text-2xl font-bold",children:Ne?`${We.toLocaleString("tr-TR")}`:"*************"})]})]}),l.jsx("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:l.jsxs("tr",{children:[l.jsxs("th",{onClick:()=>lt("date"),className:"px-3 py-2 text-left text-[10px] font-bold text-gray-400 uppercase cursor-pointer hover:bg-gray-100",children:["Tarih ",Ue("date")]}),l.jsxs("th",{onClick:()=>lt("invoice_number"),className:"px-3 py-2 text-left text-[10px] font-bold text-gray-400 uppercase cursor-pointer hover:bg-gray-100",children:["Fatura No ",Ue("invoice_number")]}),l.jsxs("th",{onClick:()=>lt("supplier_name"),className:"px-3 py-2 text-left text-[10px] font-bold text-gray-400 uppercase cursor-pointer hover:bg-gray-100",children:["Tedariki ",Ue("supplier_name")]}),l.jsxs("th",{onClick:()=>lt("total"),className:"px-3 py-2 text-left text-[10px] font-bold text-gray-400 uppercase cursor-pointer hover:bg-gray-100",children:["Tutar ",Ue("total")]}),l.jsx("th",{className:"px-3 py-2 text-left text-[10px] font-bold text-gray-400 uppercase",children:"Durum"}),l.jsx("th",{className:"px-3 py-2 text-right text-[10px] font-bold text-gray-400 uppercase",children:"lemler"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-50",children:Se.map(Pe=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors group",children:[l.jsx("td",{className:"px-3 py-2 font-mono text-xs text-gray-600 whitespace-nowrap",children:Oe(Pe.date)}),l.jsx("td",{className:"px-3 py-2 font-mono text-sm text-gray-800 font-bold whitespace-nowrap",children:Pe.invoice_number}),l.jsx("td",{className:"px-3 py-2 font-medium text-gray-800 text-sm truncate max-w-[200px]",title:Pe.supplier_name,children:Pe.supplier_name||"-"}),l.jsxs("td",{className:"px-3 py-2 font-bold text-gray-900 text-sm whitespace-nowrap",children:["",Pe.total?.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] uppercase font-bold tracking-wide border ${Pe.status==="Bekliyor"?"bg-amber-50 text-amber-600 border-amber-100":Pe.status==="lendi"?"bg-emerald-50 text-emerald-600 border-emerald-100":Pe.status==="lendi ancak iptal edildi"?"bg-orange-50 text-orange-600 border-orange-100":Pe.status==="lenmeyecek"?"bg-gray-50 text-gray-500 border-gray-200":"bg-gray-50 text-gray-600 border-gray-200"}`,children:Pe.status||"Bekliyor"})})}),l.jsx("td",{className:"px-3 py-2 text-right whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-100 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>Ce(Pe),className:"p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Grntle",children:l.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),l.jsxs("button",{onClick:()=>Me(Pe),className:"flex items-center gap-1 px-2 py-1.5 bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-700 rounded-lg text-xs font-bold transition-all",title:"Cariye ve Stoklara le",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),l.jsx("span",{children:"le"})]}),l.jsx("button",{onClick:()=>{v(Pe),Ae()},className:"p-1.5 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-lg transition-all",title:"lenmeyecek Olarak aretle",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),Pe.status==="lendi"&&l.jsx("button",{onClick:()=>ht(Pe),disabled:ve,className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"lemi ptal Et (Stok ve Cariye'den d)",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},Pe.id))})]}),Se.length===0&&l.jsx("div",{className:"text-center py-12 text-gray-500",children:"Fatura bulunamad."})]})})]}),x&&g&&l.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-900/90 via-indigo-900/80 to-purple-900/90 backdrop-blur-md flex items-center justify-center p-4 z-50 animate-in fade-in duration-300",children:l.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-none shadow-[0_25px_50px_-12px_rgba(0,0,0,0.5)] w-full max-w-7xl max-h-[95vh] flex flex-col overflow-hidden ring-1 ring-white/20 relative",children:[l.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 bg-gradient-to-br from-blue-400 to-cyan-400 rounded-full blur-3xl opacity-20 pointer-events-none"}),l.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full blur-3xl opacity-20 pointer-events-none"}),l.jsxs("div",{className:"bg-gradient-to-r from-slate-800 via-slate-900 to-indigo-900 p-8 border-b border-white/10 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 opacity-10",children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_30%_20%,rgba(255,255,255,0.1)_0%,transparent_50%)]"}),l.jsx("div",{className:"absolute bottom-0 right-0 w-full h-full bg-[radial-gradient(circle_at_70%_80%,rgba(79,70,229,0.2)_0%,transparent_50%)]"})]}),l.jsxs("div",{className:"grid grid-cols-12 gap-8 items-start relative z-10",children:[l.jsxs("div",{className:"col-span-12 md:col-span-5",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/30 flex-shrink-0",children:l.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("span",{className:"text-indigo-300 text-xs font-bold uppercase tracking-widest mb-1 block",children:"TEDARK"}),l.jsx("h2",{className:"text-white font-extrabold text-2xl leading-tight truncate",children:w?.supplier_name||g.supplier_name}),l.jsx("div",{className:"flex items-center gap-2 mt-2",children:l.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-slate-400 bg-white/5 px-3 py-1 rounded-full border border-white/10",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"VKN: ",w?.supplier_tax_no||"-"]})})]})]}),l.jsxs("div",{className:"mt-5 bg-white/5 backdrop-blur-sm rounded-2xl p-4 border border-white/10",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-300 uppercase tracking-wider mb-3 block",children:" CAR ELETRME"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{className:"flex-1 bg-white/10 border border-white/20 text-white text-sm font-semibold rounded-xl px-4 py-2.5 outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white/20 transition-all cursor-pointer",value:q||"",onChange:Pe=>se(Pe.target.value),children:[l.jsx("option",{value:"",className:"text-gray-900",children:"-- Bir Cari Seiniz --"}),ae.map(Pe=>l.jsx("option",{value:Pe.id,className:"text-gray-900",children:Pe.name},Pe.id))]}),!q&&w?.supplier_name&&l.jsxs("button",{onClick:async()=>{if(confirm(`"${w.supplier_name}" adnda yeni bir cari oluturulacak. Onaylyor musunuz?`)){le(!0);try{const Pe={name:w.supplier_name,tax_number:w.supplier_tax_no,address:"-",phone:"-",balance:0},Ye=await kn.add(Pe);if(Ye.data?.success){const Tt=await kn.getAll();Z(Tt.data?.customers||[]),se(Ye.data.id),alert("Cari baaryla oluturuldu ve seildi.")}}catch(Pe){alert("Hata: "+Pe.message)}finally{le(!1)}}},className:"bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-sm font-bold px-4 py-2.5 rounded-xl shadow-lg shadow-emerald-500/25 transition-all flex items-center gap-2 whitespace-nowrap",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Yeni Cari Ekle"]})]})]})]}),l.jsxs("div",{className:"col-span-12 md:col-span-3 text-center",children:[l.jsx("span",{className:"text-indigo-300 text-xs font-bold uppercase tracking-widest mb-1 block",children:"FATURA NO"}),l.jsx("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl px-5 py-4 border border-white/10 inline-block",children:l.jsx("span",{className:"text-white font-bold text-2xl font-mono tracking-wide",children:g.invoice_number})}),l.jsx("div",{className:"mt-3 text-slate-400 text-sm",children:Oe(g.date)})]}),l.jsxs("div",{className:"col-span-12 md:col-span-4 text-right",children:[l.jsx("span",{className:"text-indigo-300 text-xs font-bold uppercase tracking-widest mb-1 block",children:"GENEL TOPLAM"}),l.jsx("div",{className:"bg-gradient-to-r from-emerald-500/10 to-teal-500/10 backdrop-blur-sm rounded-2xl px-6 py-4 border border-emerald-500/20 inline-block",children:l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 font-black text-4xl tracking-tight",children:w?`${w.total_amount.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})}`:"..."})})]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto bg-gradient-to-br from-slate-50 via-white to-indigo-50/30 p-8",children:N?l.jsxs("div",{className:"flex flex-col items-center justify-center py-24 space-y-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-20 h-20 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full animate-pulse"})})]}),l.jsx("p",{className:"text-slate-600 font-semibold text-lg animate-pulse",children:"Fatura detaylar analiz ediliyor..."})]}):w?l.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200/50 overflow-hidden ring-1 ring-black/5",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gradient-to-r from-slate-800 to-indigo-900 text-white font-bold text-xs uppercase tracking-wide",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-4 text-center w-12",children:"#"}),l.jsx("th",{className:"px-4 py-4 text-left min-w-[200px]",children:"rn / Hizmet"}),l.jsx("th",{className:"px-4 py-4 text-center w-20",children:"Miktar"}),l.jsxs("th",{className:"px-4 py-4 text-right w-40",children:["Birim Fiyat",l.jsx("br",{}),l.jsx("span",{className:"text-[10px] text-indigo-300 font-normal",children:"(KDV Dahil)"})]}),l.jsx("th",{className:"px-4 py-4 text-center w-16",children:"sk.%"}),l.jsx("th",{className:"px-4 py-4 text-center w-16",children:"KDV%"}),l.jsxs("th",{className:"px-4 py-4 text-right w-40",children:["Net Tutar",l.jsx("br",{}),l.jsx("span",{className:"text-[10px] text-indigo-300 font-normal",children:"(KDV Dahil)"})]}),l.jsx("th",{className:"px-4 py-4 text-center w-24",children:"Durum"}),l.jsx("th",{className:"px-4 py-4 text-center w-32",children:"Eletirme"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100",children:w.lines.map((Pe,Ye)=>{const Tt=!!H[Ye],Ct=W.find(Mt=>Mt.id==H[Ye]);return l.jsxs("tr",{className:`hover:bg-indigo-50/50 transition-all duration-200 group ${Tt?"bg-emerald-50/50 hover:bg-emerald-50/70":""}`,children:[l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("span",{className:"text-gray-400 font-bold text-sm",children:Ye+1})}),l.jsxs("td",{className:"px-4 py-3",children:[l.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:Pe.name}),l.jsx("div",{className:"flex items-center gap-2 mt-1",children:Ct?l.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-emerald-700 bg-emerald-100 px-2 py-0.5 rounded-full border border-emerald-200",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),Ct.stock_code]}):l.jsx("span",{className:"text-[10px] font-bold text-gray-500 bg-gray-200 px-2 py-0.5 rounded-full",children:" Elemedi"})})]}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("span",{className:"font-bold text-gray-800 text-sm bg-indigo-100 px-3 py-1 rounded-lg",children:Pe.quantity})}),l.jsx("td",{className:"px-4 py-3 text-right",children:l.jsxs("span",{className:"font-mono text-gray-700 text-sm font-semibold",children:["",Pe.unit_price.toFixed(2)]})}),l.jsx("td",{className:"px-4 py-3 text-center",children:Pe.discount>0?l.jsxs("span",{className:"text-red-600 font-bold text-xs bg-red-100 px-2 py-0.5 rounded",children:["%",(Pe.discount/(Pe.quantity*Pe.unit_price)*100).toFixed(0)]}):l.jsx("span",{className:"text-gray-400 text-sm",children:"-"})}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsxs("span",{className:"font-bold text-indigo-700 text-xs bg-indigo-100 px-2 py-0.5 rounded",children:["%",Pe.vat_rate]})}),l.jsx("td",{className:"px-4 py-3 text-right",children:l.jsxs("span",{className:"font-bold text-gray-900 text-sm",children:["",Pe.line_net.toFixed(2)]})}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-bold bg-gradient-to-r from-amber-100 to-orange-100 text-amber-800 border border-amber-200",children:" Bekliyor"})}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("div",{className:"flex justify-center",children:Tt?l.jsxs("button",{onClick:()=>{te({index:Ye,line:Pe}),Q(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-lg hover:from-emerald-600 hover:to-green-700 shadow-md transition-all text-xs font-bold",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Deitir"]}):l.jsxs("button",{onClick:()=>{te({index:Ye,line:Pe}),Q(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg hover:from-indigo-600 hover:to-purple-700 shadow-md transition-all text-xs font-bold",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Eletir"]})})})]},Ye)})}),l.jsx("tfoot",{className:"bg-gray-50 border-t border-gray-200",children:l.jsx("tr",{children:l.jsxs("td",{colSpan:"9",className:"px-6 py-3 text-right text-xs text-gray-500 italic",children:["* Toplam ",w.lines.length," kalem rn listelenmektedir."]})})})]})}):l.jsxs("div",{className:"text-center py-20 bg-white rounded-xl border border-dashed border-gray-300 shadow-sm",children:[l.jsx("svg",{className:"w-16 h-16 text-gray-200 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Grntlenecek Detay Yok"}),l.jsx("p",{className:"text-gray-500 mt-1",children:"Fatura ierii henz yklenmedi veya ayrtrlamad."})]})}),l.jsxs("div",{className:"p-8 bg-gradient-to-r from-slate-800 via-slate-900 to-indigo-900 border-t border-white/10 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-5",children:l.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.1)_0%,transparent_50%)]"})}),l.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center relative z-10",children:[l.jsx("div",{className:"col-span-12 md:col-span-7",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:l.jsx("svg",{className:"h-5 w-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),l.jsx("input",{type:"text",placeholder:" Fatura Aklamas / lem Notu (stee Bal)",className:"w-full bg-white/10 border border-white/20 text-white placeholder-slate-400 text-base font-medium rounded-2xl pl-12 pr-4 py-4 outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white/20 transition-all backdrop-blur-sm",value:ge,onChange:Pe=>ie(Pe.target.value)})]})}),l.jsxs("div",{className:"col-span-12 md:col-span-5 flex justify-end gap-4",children:[l.jsxs("button",{onClick:()=>f(!1),className:"px-8 py-4 bg-white/10 border border-white/20 text-white font-bold rounded-2xl hover:bg-white/20 transition-all text-base flex items-center gap-2 backdrop-blur-sm",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Kapat"]}),l.jsx("button",{onClick:rt,disabled:ve||g.status==="lendi",className:`px-10 py-4 font-bold rounded-2xl shadow-lg hover:shadow-2xl transition-all flex items-center gap-3 text-base transform hover:-translate-y-1
                                            ${g.status==="lendi"?"bg-slate-700 text-slate-400 cursor-not-allowed shadow-none hover:translate-y-0":"bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:from-emerald-600 hover:to-green-700 shadow-emerald-500/30"}`,children:ve?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"leniyor..."]}):g.status==="lendi"?l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Bu Fatura lendi"]}):l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})," Faturay Kaydet"]})})]})]})]})]})}),l.jsx(yX,{isOpen:Le,onClose:()=>Q(!1),invoiceLine:B?.line,products:W,onSelect:Pe=>{he({...H,[B.index]:Pe.id}),Q(!1)},onCreateNew:async()=>{if(!B?.line)return;const Pe=B.line;if(confirm(`"${Pe.name}" iin yeni stok kart oluturulacak. Onaylyor musunuz?`)){le(!0);try{const Ye={stock_code:`GEN-${Date.now().toString().slice(-6)}`,name:Pe.name,brand:"Genel",group:"Genel",price:Pe.unit_price*1.5,buying_price:Pe.unit_price,stock:0,vat_rate:Pe.vat_rate,image_url:""},Tt=await Sn.add(Ye);if(Tt.data){const Ct=await Sn.getAll();z(Ct.data?.products||[]);const Mt=Tt.data;he({...H,[B.index]:Mt.id}),Q(!1),alert("rn oluturuldu ve eletirildi.")}}catch(Ye){alert("Hata: "+Ye.message)}finally{le(!1)}}}})]})}function _X(){const[e,r]=J.useState([]),[t,n]=J.useState(!0),[a,s]=J.useState(!1),[c,d]=J.useState(!1),[x,f]=J.useState(!1),[g,v]=J.useState(null),[w,E]=J.useState(!1),[N,S]=J.useState(null),[T,j]=J.useState({username:"",password:"",email:"",role:"calisan"}),[D,I]=J.useState({}),[L,V]=J.useState({days:[],start_time:"00:00",end_time:"23:59"}),[X,M]=J.useState(!1),{isKurucu:W,user:z}=Wi();J.useEffect(()=>{ae()},[]);const ae=async()=>{try{const U=await Li.getAll();r(U.data?.users||U.data||[])}catch(U){console.error("Kullanclar yklenirken hata:",U)}finally{n(!1)}},Z=()=>{E(!1),S(null),j({username:"",password:"",email:"",role:"calisan"}),I({}),s(!0)},H=U=>{E(!0),S(U.id),j({username:U.username,password:"",email:U.email||"",role:U.role}),I(U.permissions||{}),s(!0)},he=U=>{v(U),I(U.permissions||{}),d(!0)},q=U=>{v(U),V(U.access_schedule||{days:[],start_time:"00:00",end_time:"23:59"}),f(!0)},se=async U=>{U.preventDefault(),M(!0);try{const P={...T,permissions:D};if(w)await Li.update(N,P),T.password&&await Li.updatePassword(N,T.password),await Li.updatePermissions(N,D),alert("Kullanc gncellendi.");else{const ue=await Li.add(P);if(ue.data?.success===!1||ue.data?.message&&ue.data.message.includes("oluturuldu ancak"))throw new Error(ue.data.message||"Kullanc oluturulurken bir hata olutu.")}s(!1),ae()}catch(P){let ue=P.response?.data?.message||P.message||"Bir hata olutu.";ue.includes("security purposes")&&ue.includes("seconds")?ue=`Gvenlik nedeniyle ilem kstland. Ltfen ${ue.match(/\d+/)?.[0]||"birka"} saniye bekleyip tekrar deneyin.`:ue.includes("Rate limit")&&(ue="ok fazla deneme yaptnz. Ltfen biraz bekleyin."),alert("Hata: "+ue)}finally{M(!1)}},ve=async U=>{if(confirm("Bu kullancy silmek istediinizden emin misiniz?"))try{await Li.delete(U),ae()}catch(P){alert("Hata: "+(P.response?.data?.message||P.message))}},le=async U=>{if(confirm("Bu kullancnn oturumunu kapatmak istediinizden emin misiniz?"))try{await Li.forceLogout(U),alert("Kullancnn oturumu kapatld."),ae()}catch(P){alert("Hata: "+(P.response?.data?.message||P.message))}},ge=async()=>{try{await Li.updatePermissions(g.id,D),d(!1),ae()}catch(U){alert("Hata: "+(U.response?.data?.message||U.message))}},ie=async()=>{try{await Li.updateSchedule(g.id,L),f(!1),ae()}catch(U){alert("Hata: "+(U.response?.data?.message||U.message))}},Le=U=>{V(P=>({...P,days:P.days.includes(U)?P.days.filter(ue=>ue!==U):[...P.days,U]}))},Q=[{key:"can_view_products",label:"rnler",icon:""},{key:"can_view_customers",label:"Mteriler",icon:""},{key:"can_view_invoices",label:"Gelen Faturalar",icon:""},{key:"can_view_sales",label:"Sat Gemii",icon:""},{key:"can_view_pos",label:"Sat Ekran (POS)",icon:""},{key:"can_view_users",label:"Kullanclar",icon:""},{key:"can_view_balances",label:"Bakiye Grme",icon:""},{key:"can_view_prices",label:"Fiyat Grme",icon:""}],B=[{key:"monday",label:"Pazartesi"},{key:"tuesday",label:"Sal"},{key:"wednesday",label:"aramba"},{key:"thursday",label:"Perembe"},{key:"friday",label:"Cuma"},{key:"saturday",label:"Cumartesi"},{key:"sunday",label:"Pazar"}],te=U=>U?new Date(U).toLocaleString("tr-TR"):"Giri Yok";return t?l.jsx("div",{className:"flex items-center justify-center min-h-96",children:l.jsx("div",{className:"spinner"})}):l.jsxs("div",{className:"min-h-screen bg-gray-50 p-5 space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" Kullanc Ynetimi"}),l.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[e.length," kullanc kaytl"]})]}),W&&l.jsxs("button",{onClick:Z,className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-medium hover:from-blue-700 hover:to-indigo-700 transition-all flex items-center gap-2 justify-center",children:[l.jsx("span",{children:""})," Yeni Kullanc"]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-4 text-white text-center",children:[l.jsx("p",{className:"text-blue-100 text-sm",children:"Toplam"}),l.jsx("p",{className:"text-2xl font-bold",children:e.length})]}),l.jsxs("div",{className:"bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[l.jsx("p",{className:"text-violet-100 text-sm",children:"Kurucular"}),l.jsx("p",{className:"text-2xl font-bold",children:e.filter(U=>U.role==="kurucu").length})]}),l.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl p-4 text-white text-center",children:[l.jsx("p",{className:"text-cyan-100 text-sm",children:"alanlar"}),l.jsx("p",{className:"text-2xl font-bold",children:e.filter(U=>U.role==="calisan").length})]}),l.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[l.jsx("p",{className:"text-emerald-100 text-sm",children:"Aktif Oturum"}),l.jsx("p",{className:"text-2xl font-bold",children:e.filter(U=>U.is_active).length})]})]}),l.jsx("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Kullanc Ad"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"E-posta"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Rol"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Son Giri"}),l.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-500 uppercase",children:"lemler"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-50",children:e.map(U=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold ${U.role==="kurucu"?"bg-gradient-to-br from-violet-500 to-purple-600":"bg-gradient-to-br from-blue-500 to-cyan-600"}`,children:U.username?.charAt(0)?.toUpperCase()||"?"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-semibold text-gray-800",children:U.username}),U.is_active&&l.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full",title:"Aktif"})]})]})}),l.jsx("td",{className:"px-4 py-3 text-gray-600 text-sm",children:U.email||"-"}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${U.role==="kurucu"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:U.role==="kurucu"?" Kurucu":" alan"})}),l.jsx("td",{className:"px-4 py-3 text-gray-500 text-sm",children:l.jsxs("span",{className:"flex items-center gap-1",children:[" ",te(U.last_login)]})}),l.jsx("td",{className:"px-4 py-3 text-right",children:W&&U.id!==z?.id&&l.jsxs("div",{className:"flex justify-end gap-1 flex-wrap",children:[l.jsx("button",{onClick:()=>H(U),className:"px-2 py-1.5 text-xs bg-indigo-50 text-indigo-600 border border-indigo-200 rounded-lg hover:bg-indigo-100 transition-colors",title:"Dzenle",children:" Dzenle"}),l.jsx("button",{onClick:()=>le(U.id),className:"px-2 py-1.5 text-xs bg-amber-50 text-amber-600 border border-amber-200 rounded-lg hover:bg-amber-100 transition-colors",title:"Oturumu Kapat",children:" k"}),l.jsx("button",{onClick:()=>he(U),className:"px-2 py-1.5 text-xs bg-blue-50 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",title:"Yetkiler",children:" Yetki"}),l.jsx("button",{onClick:()=>q(U),className:"px-2 py-1.5 text-xs bg-violet-50 text-violet-600 border border-violet-200 rounded-lg hover:bg-violet-100 transition-colors",title:"Eriim Takvimi",children:" Takvim"}),U.role!=="kurucu"&&l.jsx("button",{onClick:()=>ve(U.id),className:"px-2 py-1.5 text-xs bg-red-50 text-red-600 border border-red-200 rounded-lg hover:bg-red-100 transition-colors",title:"Sil",children:" Sil"})]})})]},U.id))})]}),e.length===0&&l.jsx("div",{className:"text-center py-12 text-gray-500",children:"Kaytl kullanc yok."})]})}),a&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"p-6 border-b border-gray-100",children:l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:w?" Kullanc Dzenle":" Yeni alan Ekle"})}),l.jsxs("form",{onSubmit:se,className:"p-6 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kullanc Ad *"}),l.jsx("input",{type:"text",value:T.username,onChange:U=>j({...T,username:U.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["E-posta ",w?"":"*"]}),l.jsx("input",{type:"email",value:T.email,onChange:U=>j({...T,email:U.target.value}),className:`w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 ${w?"bg-gray-50 text-gray-500":""}`,required:!w,disabled:w,placeholder:w?"E-posta deitirilemez":""})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ifre ",w?"(Bo ise deimez)":"*"]}),l.jsx("input",{type:"password",value:T.password,onChange:U=>j({...T,password:U.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",required:!w})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),l.jsxs("select",{value:T.role,onChange:U=>j({...T,role:U.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"calisan",children:"alan"}),l.jsx("option",{value:"kurucu",children:"Kurucu"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Eriim Yetkileri"}),l.jsx("div",{className:"grid grid-cols-2 gap-2 p-4 bg-gray-50 rounded-xl border border-gray-200",children:Q.map(U=>l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:D[U.key]||!1,onChange:P=>I({...D,[U.key]:P.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),l.jsxs("span",{className:"text-sm text-gray-700",children:[U.icon," ",U.label]})]},U.key))})]}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>s(!1),className:"flex-1 px-4 py-2.5 border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50",disabled:X,children:"ptal"}),l.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:X,children:X?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"leniyor..."]}):w?"Gncelle":"Kullancy Ekle"})]})]})]})}),X&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-[60]",children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl flex flex-col items-center animate-bounce-slow",children:[l.jsx("div",{className:"w-16 h-16 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin mb-4"}),l.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"leminiz Yaplyor"}),l.jsx("p",{className:"text-gray-500 mt-2",children:"Ltfen bekleyiniz..."})]})}),X&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-[60]",children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl flex flex-col items-center animate-bounce-slow",children:[l.jsx("div",{className:"w-16 h-16 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin mb-4"}),l.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"leminiz Yaplyor"}),l.jsx("p",{className:"text-gray-500 mt-2",children:"Ltfen bekleyiniz..."})]})}),c&&g&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"p-6 border-b border-gray-100",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" Kullanc Yetkilerini Dzenle"}),l.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Kullanc: ",l.jsx("strong",{children:g.username})]})]}),l.jsx("div",{className:"p-6 space-y-3",children:l.jsx("div",{className:"grid grid-cols-2 gap-2 p-4 bg-gray-50 rounded-xl border border-gray-200",children:Q.map(U=>l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:D[U.key]||!1,onChange:P=>I({...D,[U.key]:P.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),l.jsxs("span",{className:"text-sm text-gray-700",children:[U.icon," ",U.label]})]},U.key))})}),l.jsxs("div",{className:"p-6 border-t border-gray-100 flex gap-3",children:[l.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2.5 border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50",children:"ptal"}),l.jsx("button",{onClick:ge,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:"Deiiklikleri Kaydet"})]})]})}),x&&g&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"p-6 border-b border-gray-100",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" Eriim Takvimi Dzenle"}),l.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Kullanc: ",l.jsx("strong",{children:g.username})]})]}),l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Eriim Gnleri"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:B.map(U=>l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg hover:bg-gray-50",children:[l.jsx("input",{type:"checkbox",checked:L.days?.includes(U.key)||!1,onChange:()=>Le(U.key),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-700",children:U.label})]},U.key))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balang"}),l.jsx("input",{type:"time",value:L.start_time||"00:00",onChange:U=>V({...L,start_time:U.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Biti"}),l.jsx("input",{type:"time",value:L.end_time||"23:59",onChange:U=>V({...L,end_time:U.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),l.jsxs("div",{className:"p-6 border-t border-gray-100 flex gap-3",children:[l.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2.5 border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50",children:"ptal"}),l.jsx("button",{onClick:ie,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:"Kaydet"})]})]})})]})}function EX({isOpen:e,onClose:r,groupName:t}){const[n,a]=J.useState([]),[s,c]=J.useState(""),[d,x]=J.useState([]),[f,g]=J.useState(!1),[v,w]=J.useState(!1);J.useEffect(()=>{e&&t&&E()},[e,t]);const E=async()=>{g(!0);try{const L=(await Sn.getAll()).data?.products||[];a(L);const M=((await yo.getAll()).data?.shortcuts||[]).find(W=>W.name===t);if(M&&M.items&&Array.isArray(M.items)){const W=M.items.map((z,ae)=>{const Z=L.find(H=>H.stock_code===z);return Z?{...Z,orderVal:ae+1}:null}).filter(Boolean);x(W)}else x([])}catch(I){console.error(I),alert("Veriler yklenirken hata olutu.")}finally{g(!1)}},N=I=>{if(d.some(V=>V.stock_code===I.stock_code))return;const L=d.reduce((V,X)=>Math.max(V,parseInt(X.orderVal)||0),0);x([...d,{...I,orderVal:L+1}])},S=I=>{x(d.filter(L=>L.stock_code!==I))},T=(I,L)=>{const V=[...d];V[I].orderVal=L,x(V)},j=async()=>{w(!0);try{const L=[...d].sort((V,X)=>{const M=parseInt(V.orderVal)||9999,W=parseInt(X.orderVal)||9999;return M-W}).map(V=>V.stock_code);await yo.updateCategory(t,{items:L}),r(),alert("Grup gncellendi!")}catch(I){console.error(I),alert("Kaydetme baarsz.")}finally{w(!1)}},D=n.filter(I=>{if(d.some(V=>V.stock_code===I.stock_code))return!1;const L=s.toLowerCase();return I.name.toLowerCase().includes(L)||I.stock_code.toLowerCase().includes(L)}).slice(0,50);return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[60] font-sans animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col border border-gray-200 overflow-hidden animate-in zoom-in-95 duration-200",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[l.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Grubu Dzenle: ",l.jsx("span",{className:"text-blue-200",children:t})]}),l.jsx("p",{className:"text-blue-200 mt-1",children:"rnleri sein ve sralama numaras vererek dzenleyin"})]}),l.jsx("button",{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-3 rounded-xl transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsx("div",{className:"flex-1 flex min-h-0 bg-gradient-to-br from-gray-50 to-blue-50 p-6 gap-6",children:f?l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600 font-medium",children:"Veriler ykleniyor..."})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-1/3 bg-white border-2 border-gray-200 rounded-2xl flex flex-col shadow-lg overflow-hidden",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:[l.jsxs("h3",{className:"font-bold text-gray-800 text-base mb-3 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"rn Listesi"]}),l.jsx("input",{className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"rn ara (isim veya stok kodu)...",value:s,onChange:I=>c(I.target.value),autoFocus:!0})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[D.map(I=>l.jsxs("div",{onClick:()=>N(I),className:"p-3 border-2 border-gray-100 rounded-xl hover:bg-blue-50 hover:border-blue-300 cursor-pointer transition-all group flex justify-between items-center",children:[l.jsxs("div",{className:"overflow-hidden",children:[l.jsx("div",{className:"text-base font-semibold text-gray-800 truncate",children:I.name}),l.jsx("div",{className:"text-sm text-gray-500 font-mono",children:I.stock_code})]}),l.jsx("span",{className:"text-blue-600 opacity-0 group-hover:opacity-100 font-bold text-2xl transition-opacity",children:"+"})]},I.stock_code)),D.length===0&&l.jsxs("div",{className:"text-center text-gray-400 py-8",children:[l.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),l.jsx("p",{children:"rn bulunamad"})]})]})]}),l.jsxs("div",{className:"flex-1 bg-white border-2 border-gray-200 rounded-2xl flex flex-col shadow-lg overflow-hidden",children:[l.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50 flex justify-between items-center",children:[l.jsxs("h3",{className:"font-bold text-blue-800 text-base flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Grup erii (",d.length," rn)"]}),l.jsx("span",{className:"text-sm text-blue-700 bg-blue-100 px-3 py-1.5 rounded-lg font-semibold",children:"Sra Numarasna Gre Kaydedilir"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:l.jsxs("table",{className:"w-full text-base text-left",children:[l.jsx("thead",{className:"text-sm text-gray-600 uppercase bg-gray-50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 w-24 font-bold",children:"Sra"}),l.jsx("th",{className:"px-4 py-3 font-bold",children:"rn"}),l.jsx("th",{className:"px-4 py-3 text-right font-bold",children:"Fiyat"}),l.jsx("th",{className:"px-4 py-3 w-20 text-center font-bold",children:"Kaldr"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-100",children:[d.map((I,L)=>l.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[l.jsx("td",{className:"px-4 py-3",children:l.jsx("input",{type:"number",value:I.orderVal,onChange:V=>T(L,V.target.value),className:"w-20 border-2 border-gray-200 rounded-lg px-2 py-2 text-center font-bold text-blue-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})}),l.jsxs("td",{className:"px-4 py-3",children:[l.jsx("div",{className:"font-semibold text-gray-800",children:I.name}),l.jsx("div",{className:"text-sm text-gray-500 font-mono",children:I.stock_code})]}),l.jsxs("td",{className:"px-4 py-3 text-right font-mono font-semibold text-gray-700",children:["",I.price?.toLocaleString("tr-TR")||"0"]}),l.jsx("td",{className:"px-4 py-3 text-center",children:l.jsx("button",{onClick:()=>S(I.stock_code),className:"p-2 text-gray-400 hover:text-white hover:bg-red-500 rounded-lg transition-all",title:"Kaldr",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},I.stock_code)),d.length===0&&l.jsx("tr",{children:l.jsxs("td",{colSpan:"4",className:"text-center py-16 text-gray-400",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),l.jsx("p",{className:"text-lg font-medium",children:"Bu grupta henz rn yok"}),l.jsx("p",{className:"text-sm mt-1",children:"Soldan rn seerek gruba ekleyebilirsiniz"})]})})]})]})})]})]})}),l.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-gray-100 flex justify-end gap-4",children:[l.jsxs("button",{onClick:r,className:"px-8 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl text-base font-semibold hover:bg-gray-100 hover:border-gray-400 transition-all shadow-sm flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Vazge"]}),l.jsxs("button",{onClick:j,disabled:v,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl text-base font-bold hover:from-blue-700 hover:to-indigo-700 shadow-lg shadow-blue-500/30 transition-all flex items-center gap-2 disabled:opacity-50",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),v?"Kaydediliyor...":"Kaydet ve Kapat"]})]})]})}):null}function kX({isOpen:e,onClose:r}){const[t,n]=J.useState([]),[a,s]=J.useState(!1),[c,d]=J.useState(""),[x,f]=J.useState(!1),[g,v]=J.useState(null),[w,E]=J.useState(null),[N,S]=J.useState(""),[T,j]=J.useState(!1);J.useEffect(()=>{e&&D()},[e]);const D=async()=>{s(!0);try{const M=await yo.getAll();M.data?.shortcuts&&n(M.data.shortcuts)}catch(M){console.error(M),alert("Gruplar yklenemedi.")}finally{s(!1)}},I=async M=>{if(M.preventDefault(),!!c.trim()){f(!0);try{if(t.some(W=>W.name.toLowerCase()===c.trim().toLowerCase())){alert("Bu isimde bir grup zaten var."),f(!1);return}await yo.addCategory(c.trim()),d(""),await D()}catch(W){console.error(W),alert("Grup eklenirken hata olutu.")}finally{f(!1)}}},L=async M=>{if(window.confirm(`${M} grubunu silmek istediinize emin misiniz?`))try{await yo.deleteCategory(M),await D()}catch(W){console.error(W),alert("Silme ilemi baarsz.")}},V=M=>{E(M),S(M)},X=async()=>{if(!N.trim()||N.trim()===w){E(null);return}if(t.some(M=>M.name.toLowerCase()===N.trim().toLowerCase()&&M.name!==w)){alert("Bu isimde bir grup zaten var.");return}j(!0);try{await yo.updateCategory(w,{name:N.trim()}),await D(),E(null)}catch(M){console.error(M),alert("sim deitirme baarsz.")}finally{j(!1)}};return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 font-sans animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl border border-gray-200 overflow-hidden transform transition-all animate-in zoom-in-95 duration-200",children:[l.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-8 py-6",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Ksayol Gruplar"}),l.jsx("p",{className:"text-indigo-200 mt-1",children:"Sat ekran iin zel kategoriler oluturun ve ynetin"})]}),l.jsx("button",{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-3 rounded-xl transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsxs("div",{className:"p-8",children:[l.jsxs("form",{onSubmit:I,className:"flex gap-3 mb-8",children:[l.jsx("input",{type:"text",placeholder:"Yeni Grup Ad (rn: erezler, ecekler, Attrmalklar)",className:"flex-1 px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all text-base",value:c,onChange:M=>d(M.target.value)}),l.jsx("button",{type:"submit",disabled:x||!c.trim(),className:"px-8 py-4 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-xl font-bold hover:from-emerald-600 hover:to-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all text-base shadow-lg shadow-emerald-500/25",children:x?"Ekleniyor...":"+ Yeni Grup Ekle"})]}),l.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:a?l.jsxs("div",{className:"text-center py-12 text-gray-500",children:[l.jsx("div",{className:"w-10 h-10 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto mb-4"}),"Gruplar ykleniyor..."]}):t.length===0?l.jsxs("div",{className:"text-center py-16 bg-gradient-to-br from-gray-50 to-indigo-50 rounded-2xl border-2 border-dashed border-gray-200",children:[l.jsx("span",{className:"text-5xl block mb-4",children:""}),l.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Henz grup oluturulmad"}),l.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Yukardaki alandan yeni bir grup ekleyin"})]}):t.map(M=>l.jsxs("div",{className:"flex items-center justify-between p-5 bg-gradient-to-r from-gray-50 to-white border-2 border-gray-100 rounded-xl hover:border-indigo-200 hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-indigo-500/25",children:M.name.charAt(0).toUpperCase()}),l.jsx("span",{className:"font-semibold text-gray-800 text-lg",children:M.name})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>V(M.name),className:"px-4 py-2.5 bg-amber-100 hover:bg-amber-600 text-amber-700 hover:text-white rounded-xl font-semibold transition-all flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"smi Deitir"]}),l.jsxs("button",{onClick:()=>v(M.name),className:"px-4 py-2.5 bg-blue-100 hover:bg-blue-600 text-blue-700 hover:text-white rounded-xl font-semibold transition-all flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Dzenle"]}),l.jsxs("button",{onClick:()=>L(M.name),className:"px-4 py-2.5 bg-red-100 hover:bg-red-600 text-red-700 hover:text-white rounded-xl font-semibold transition-all flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Sil"]})]})]},M.id||M.name))})]}),l.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-8 py-5 border-t border-gray-200 flex justify-end",children:l.jsx("button",{onClick:r,className:"px-8 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl text-base font-semibold hover:bg-gray-100 hover:border-gray-400 transition-all shadow-sm",children:"Kapat"})}),l.jsx(EX,{isOpen:!!g,onClose:()=>v(null),groupName:g}),w&&l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[70] animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 px-6 py-5",children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:"Grup smini Deitir"}),l.jsx("p",{className:"text-amber-100 text-sm mt-1",children:"Yeni grup adn giriniz"})]}),l.jsxs("div",{className:"p-6",children:[l.jsx("label",{className:"text-base font-semibold text-gray-800 mb-2 block",children:"Grup Ad"}),l.jsx("input",{type:"text",value:N,onChange:M=>S(M.target.value),className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all text-base",autoFocus:!0,onKeyDown:M=>M.key==="Enter"&&X()})]}),l.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>E(null),className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-100 transition-all",children:"ptal"}),l.jsx("button",{onClick:X,disabled:T||!N.trim(),className:"px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-bold hover:from-amber-600 hover:to-orange-600 transition-all disabled:opacity-50",children:T?"Kaydediliyor...":"Kaydet"})]})]})})]})}):null}const tk={"A5 (148x210mm)":{width:420,height:595},"A4 (210x297mm)":{width:595,height:842},"Termal 80mm":{width:280,height:400},"Termal 58mm":{width:200,height:400}},Vp=e=>{switch(e){case"Termal 80mm":return{...dS};case"Termal 58mm":return{...fS};default:return{...uS}}},SX=[{key:"{{TARIH}}",label:"Tarih"},{key:"{{SAAT}}",label:"Saat"},{key:"{{FIS_NO}}",label:"Fi No"},{key:"{{MUSTERI_ADI}}",label:"Musteri Adi"},{key:"{{ODEME_TIPI}}",label:"deme Tipi"},{key:"{{URUN_ADI}}",label:"Urun Adi"},{key:"{{MIKTAR}}",label:"Miktar"},{key:"{{FIYAT}}",label:"Fiyat"},{key:"{{ISKONTO}}",label:"skonto"},{key:"{{SATIR_TOPLAM}}",label:"Satir Toplam"},{key:"{{GENEL_TOPLAM}}",label:"Genel Toplam"},{key:"{{ESKI_BAKIYE}}",label:"Eski Bakiye"},{key:"{{YENI_BAKIYE}}",label:"Yeni Bakiye"}];function NX({isOpen:e,onClose:r,initialPaperSize:t}){const[n,a]=J.useState(null),[s,c]=J.useState(null),[d,x]=J.useState(null),[f,g]=J.useState({x:0,y:0}),[v,w]=J.useState(()=>localStorage.getItem("receipt_show_balance")==="true"),E=J.useRef(null);if(J.useEffect(()=>{if(e){const Z=`receipt_design_template_${t||"default"}`,H=localStorage.getItem(Z);if(H)try{a(JSON.parse(H))}catch{a(Vp(t||"Termal 80mm"))}else a(Vp(t||"Termal 80mm"))}},[e,t]),!e||!n)return null;const N=tk[n.paper_size]||tk["A5 (148x210mm)"],S=()=>{const Z=`receipt_design_template_${t||n.paper_size}`;localStorage.setItem(Z,JSON.stringify(n)),localStorage.setItem("receipt_show_balance",v),alert(`${t||n.paper_size} iin tasarm kaydedildi!`)},T=()=>{confirm("Varsayilan tasarima donmek istediginize emin misiniz?")&&(a(Vp(n.paper_size)),c(null))},j=()=>{const Z={type:"text",id:`metin_${Date.now()}`,x:50,y:50,text:"Yeni Metin",font_family:"Inter",font_size:12,font_bold:!1,color:"#000000",text_width:100,text_height:20,text_align:"left"};a(H=>({...H,items:[...H.items,Z]})),c(Z.id)},D=Z=>{const H=Z.target.files[0];if(!H)return;if(H.size>2*1024*1024){alert("Resim boyutu 2MB'dan kucuk olmalidir.");return}const he=new FileReader;he.onload=q=>{const se={type:"image",id:`resim_${Date.now()}`,x:50,y:50,width:100,height:100,src:q.target.result,is_dynamic_footer:!1};a(ve=>({...ve,items:[...ve.items,se]})),c(se.id)},he.readAsDataURL(H)},I=()=>{const Z={type:"shape",id:`sekil_${Date.now()}`,x:50,y:50,width:100,height:30,fill_color:"#e5e7eb",border:{sides:{top:!0,bottom:!0,left:!0,right:!0},thickness:1,color:"#000000"},is_dynamic_footer:!1};a(H=>({...H,items:[...H.items,Z]})),c(Z.id)},L=()=>{s&&confirm("Bu elementi silmek istediginize emin misiniz?")&&(a(Z=>({...Z,items:Z.items.filter(H=>H.id!==s)})),c(null))},V=(Z,H)=>{s&&a(he=>({...he,items:he.items.map(q=>q.id===s?{...q,[Z]:H}:q)}))},X=()=>n.items.find(Z=>Z.id===s),M=(Z,H)=>{Z.stopPropagation(),c(H.id),x(H.id);const he=E.current.getBoundingClientRect();g({x:Z.clientX-he.left-H.x,y:Z.clientY-he.top-H.y})},W=Z=>{if(!d)return;const H=E.current.getBoundingClientRect(),he=Math.max(0,Math.min(N.width-20,Z.clientX-H.left-f.x)),q=Math.max(0,Math.min(N.height-20,Z.clientY-H.top-f.y));a(se=>({...se,items:se.items.map(ve=>ve.id===d?{...ve,x:Math.round(he),y:Math.round(q)}:ve)}))},z=()=>{x(null)},ae=X();return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-7xl h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Fis Tasarimcisi"}),l.jsx("p",{className:"text-white/70 text-sm",children:"Satis sonrasi fis gorunumunu ozellestin"})]})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:l.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[l.jsxs("div",{className:"w-64 bg-slate-50 border-r border-slate-200 p-4 flex flex-col gap-4 overflow-y-auto",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-bold text-slate-600 uppercase tracking-wide mb-3",children:"Kagit Boyutu"}),l.jsx("div",{className:"w-full px-3 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg text-sm font-semibold text-blue-700",children:t||n.paper_size}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Ayarlar sayfasindan degistirilebilir"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-bold text-slate-600 uppercase tracking-wide mb-3",children:"Element Ekle"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("button",{onClick:j,className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Metin Ekle"]}),l.jsxs("button",{onClick:I,className:"w-full px-4 py-2 bg-emerald-500 text-white rounded-lg font-medium hover:bg-emerald-600 transition-colors flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6z"})}),"Sekil Ekle"]}),l.jsxs("label",{className:"w-full px-4 py-2 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors flex items-center gap-2 cursor-pointer",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Resim Ekle",l.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden"})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-bold text-slate-600 uppercase tracking-wide mb-3",children:"Degiskenler"}),l.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:SX.map(Z=>l.jsxs("div",{className:"text-xs bg-white px-2 py-1.5 rounded border border-slate-200 flex justify-between items-center",children:[l.jsx("span",{className:"text-slate-600",children:Z.label}),l.jsx("code",{className:"bg-slate-100 px-1 rounded text-[10px]",children:Z.key})]},Z.key))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-bold text-slate-600 uppercase tracking-wide mb-3",children:"Tasarm Ayarlar"}),l.jsxs("label",{className:"flex items-center justify-between p-2 bg-white rounded-lg border border-slate-200 cursor-pointer hover:bg-slate-50 transition-colors",children:[l.jsx("span",{className:"text-xs font-semibold text-slate-700",children:"Tasarmda Bakiyeler Grnsn"}),l.jsxs("div",{className:`relative w-9 h-5 rounded-full transition-colors ${v?"bg-indigo-600":"bg-slate-300"}`,children:[l.jsx("input",{type:"checkbox",checked:v,onChange:Z=>w(Z.target.checked),className:"sr-only"}),l.jsx("div",{className:`absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform ${v?"translate-x-4":"translate-x-0"}`})]})]})]}),l.jsxs("div",{className:"mt-auto space-y-2",children:[l.jsx("button",{onClick:S,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 transition-colors",children:"Kaydet"}),l.jsx("button",{onClick:T,className:"w-full px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-medium hover:bg-slate-300 transition-colors",children:"Varsayilana Don"})]})]}),l.jsx("div",{className:"flex-1 bg-slate-200 p-6 overflow-auto flex items-start justify-center",children:l.jsx("div",{ref:E,className:"bg-white shadow-xl relative",style:{width:N.width,height:N.height,minWidth:N.width,backgroundColor:"#ffffff",backgroundImage:"linear-gradient(#e5e7eb 1px, transparent 1px), linear-gradient(90deg, #e5e7eb 1px, transparent 1px)",backgroundSize:"20px 20px"},onMouseMove:W,onMouseUp:z,onMouseLeave:z,onClick:()=>c(null),children:n.items.map(Z=>l.jsxs("div",{className:`absolute cursor-move ${s===Z.id?"ring-2 ring-blue-500 ring-offset-1":""}`,style:{left:Z.x,top:Z.y,width:Z.type==="text"?Z.text_width:Z.width,height:Z.type==="text"?Z.text_height:Z.height,backgroundColor:Z.type==="shape"?Z.fill_color:"transparent",border:Z.border?`${Z.border.thickness}px solid ${Z.border.color}`:"none",fontFamily:Z.font_family,fontSize:Z.font_size,fontWeight:Z.font_bold?"bold":"normal",color:Z.color,textAlign:Z.text_align,display:"flex",alignItems:"center",justifyContent:Z.text_align==="center"?"center":Z.text_align==="right"?"flex-end":"flex-start",overflow:"hidden",whiteSpace:"nowrap"},onMouseDown:H=>M(H,Z),onClick:H=>H.stopPropagation(),children:[Z.type==="text"&&l.jsx("span",{children:Z.text}),Z.type==="image"&&l.jsx("img",{src:Z.src,alt:"Item",style:{width:"100%",height:"100%",objectFit:"contain"},draggable:!1})]},Z.id))})}),l.jsx("div",{className:"w-72 bg-slate-50 border-l border-slate-200 p-4 overflow-y-auto",children:ae?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-600 uppercase tracking-wide",children:"Ozellikler"}),l.jsx("button",{onClick:L,className:"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"Elementi Sil",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-100 rounded-lg",children:l.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:ae.is_dynamic_footer||!1,onChange:Z=>V("is_dynamic_footer",Z.target.checked),className:"mt-1 rounded"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-bold text-blue-900 block",children:"Urun Listesi Altinda Goster"}),l.jsx("span",{className:"text-xs text-blue-700 block mt-0.5",children:"Bu secenek acildiginda, oge urun listesinin bittigi yerden sonra konumlanir."})]})]})}),l.jsxs("div",{className:"text-xs text-slate-500 bg-white px-3 py-2 rounded-lg border border-slate-200",children:["ID: ",l.jsx("code",{className:"bg-slate-100 px-1 rounded",children:ae.id})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"X"}),l.jsx("input",{type:"number",value:ae.x,onChange:Z=>V("x",parseInt(Z.target.value)||0),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Y"}),l.jsx("input",{type:"number",value:ae.y,onChange:Z=>V("y",parseInt(Z.target.value)||0),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]})]}),ae.type==="text"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Metin"}),l.jsx("input",{type:"text",value:ae.text,onChange:Z=>V("text",Z.target.value),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Font Boyutu"}),l.jsx("input",{type:"number",value:ae.font_size,onChange:Z=>V("font_size",parseInt(Z.target.value)||10),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Renk"}),l.jsx("input",{type:"color",value:ae.color,onChange:Z=>V("color",Z.target.value),className:"w-full h-8 bg-white border border-slate-200 rounded cursor-pointer"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:ae.font_bold,onChange:Z=>V("font_bold",Z.target.checked),className:"rounded"}),l.jsx("span",{className:"text-sm font-bold",children:"Kalin"})]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Hizalama"}),l.jsxs("select",{value:ae.text_align,onChange:Z=>V("text_align",Z.target.value),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm",children:[l.jsx("option",{value:"left",children:"Sol"}),l.jsx("option",{value:"center",children:"Orta"}),l.jsx("option",{value:"right",children:"Sag"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Genislik"}),l.jsx("input",{type:"number",value:ae.text_width,onChange:Z=>V("text_width",parseInt(Z.target.value)||50),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Yukseklik"}),l.jsx("input",{type:"number",value:ae.text_height,onChange:Z=>V("text_height",parseInt(Z.target.value)||20),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]})]})]}),(ae.type==="shape"||ae.type==="image")&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Genislik"}),l.jsx("input",{type:"number",value:ae.width,onChange:Z=>V("width",parseInt(Z.target.value)||50),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Yukseklik"}),l.jsx("input",{type:"number",value:ae.height,onChange:Z=>V("height",parseInt(Z.target.value)||20),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]})]}),ae.type==="shape"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Dolgu Rengi"}),l.jsx("input",{type:"color",value:ae.fill_color==="#00000000"?"#ffffff":ae.fill_color,onChange:Z=>V("fill_color",Z.target.value),className:"w-full h-8 bg-white border border-slate-200 rounded cursor-pointer"})]})]}),l.jsxs("button",{onClick:L,className:"w-full mt-4 px-4 py-3 bg-red-500 text-white rounded-lg font-bold hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Bu eyi Sil"]})]}):l.jsxs("div",{className:"text-center text-slate-400 py-8",children:[l.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),l.jsx("p",{className:"text-sm",children:"Duzenlemek icin bir element secin"})]})})]})]})})}function AX({isOpen:e,onClose:r}){const[t,n]=J.useState(""),[a,s]=J.useState(""),[c,d]=J.useState(""),[x,f]=J.useState(!1),[g,v]=J.useState(!1);J.useEffect(()=>{e&&w()},[e]);const w=async()=>{v(!0);try{const N=await xn.get("birfatura_api_key"),S=await xn.get("birfatura_secret_key"),T=await xn.get("birfatura_integration_key");n(N.data||""),s(S.data||""),d(T.data||"")}catch(N){console.error("Error loading birfatura settings",N)}finally{v(!1)}},E=async()=>{f(!0);try{await xn.set("birfatura_api_key",t.trim()),await xn.set("birfatura_secret_key",a.trim()),await xn.set("birfatura_integration_key",c.trim()),alert("Ayarlar baaryla kaydedildi."),r()}catch(N){console.error("Error saving settings",N),alert("Ayarlar kaydedilemedi: "+N.message)}finally{f(!1)}};return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 font-sans animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col border border-gray-200 overflow-hidden transform transition-all animate-in zoom-in-95 duration-200",children:[l.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-600 px-8 py-6",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"BirFatura Entegrasyonu"}),l.jsx("p",{className:"text-amber-100 mt-1",children:"E-Fatura / E-Ariv API Anahtarlarn Ynetin"})]}),l.jsx("button",{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-3 rounded-xl transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsx("div",{className:"p-8 space-y-6 overflow-y-auto",children:g?l.jsxs("div",{className:"text-center py-12 text-gray-500",children:[l.jsx("div",{className:"w-10 h-10 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-4"}),"Ayarlar ykleniyor..."]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-5 rounded-xl text-base text-blue-800 border border-blue-200",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),l.jsxs("p",{children:["Ltfen ",l.jsx("strong",{children:"BirFatura paneli"}),"nden aldnz API anahtarlarn aadaki alanlara giriniz. Bu bilgiler irketinize zel olarak veritabannda saklanr."]})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-base font-semibold text-gray-800",children:"API Key"}),l.jsx("input",{type:"text",value:t,onChange:N=>n(N.target.value),placeholder:"BirFatura API Key",className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all font-mono text-base"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-base font-semibold text-gray-800",children:"Secret Key"}),l.jsx("input",{type:"password",value:a,onChange:N=>s(N.target.value),placeholder:"BirFatura Secret Key",className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all font-mono text-base"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-base font-semibold text-gray-800",children:"Integration Key"}),l.jsx("input",{type:"text",value:c,onChange:N=>d(N.target.value),placeholder:"BirFatura Integration Key",className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all font-mono text-base"})]})]})}),l.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-8 py-5 border-t border-gray-200 flex justify-end gap-4",children:[l.jsxs("button",{onClick:r,className:"px-8 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl text-base font-semibold hover:bg-gray-100 hover:border-gray-400 transition-all shadow-sm flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"ptal"]}),l.jsxs("button",{onClick:E,disabled:x,className:"px-8 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white rounded-xl text-base font-bold hover:from-amber-600 hover:to-orange-700 shadow-lg shadow-orange-500/30 transition-all flex items-center gap-2 disabled:opacity-50",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),x?"Kaydediliyor...":"Ayarlar Kaydet"]})]})]})}):null}function TX({isOpen:e,onClose:r}){const[t,n]=J.useState("Ykleniyor..."),[a,s]=J.useState(!1);J.useEffect(()=>{e&&c()},[e]);const c=async()=>{try{const{data:x}=await xn.get("secret_token");n(x||"")}catch(x){console.error("Error fetching secret token",x),n("Hata")}},d=async()=>{if(!window.confirm(`UYARI: Secret Token' deitirmek, mevcut entegrasyonlarn (BirFatura vb.) almasn durdurabilir ve yeni token' o sistemlere tekrar girmeniz gerekir.

Devam etmek istiyor musunuz?`))return;const x=crypto.randomUUID();s(!0);try{await xn.set("secret_token",x),n(x),alert("Yeni token oluturuldu ve kaydedildi.")}catch(f){console.error("Error regenerating token",f),alert("Token oluturulamad: "+f.message)}finally{s(!1)}};return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 font-sans animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl border border-gray-200 overflow-hidden transform transition-all animate-in zoom-in-95 duration-200",children:[l.jsx("div",{className:"bg-gradient-to-r from-red-500 to-rose-600 px-8 py-6",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Entegrasyon Token Ynetimi"}),l.jsx("p",{className:"text-red-100 mt-1",children:"Sipari / Stok Entegrasyon Gvenlik Anahtar"})]}),l.jsx("button",{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-3 rounded-xl transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsxs("div",{className:"p-8 space-y-6",children:[l.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-5 rounded-xl text-base text-amber-800 border border-amber-200",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("svg",{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),l.jsxs("p",{children:["Bu token, d sistemlerin (rn. ",l.jsx("strong",{children:"BirFatura paneli"}),") bu programa balanp siparileri ekebilmesi iin kullanlr.",l.jsx("strong",{children:" Ltfen gvenli bir yerde saklayn ve kimseyle paylamayn."})]})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("label",{className:"text-base font-semibold text-gray-800",children:"Secret Token"}),l.jsxs("button",{onClick:d,className:"text-sm text-red-600 hover:text-red-700 font-medium hover:underline flex items-center gap-1",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Yeni Secret Token Olutur"]})]}),l.jsx("input",{type:"text",value:t,readOnly:!0,className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl bg-gray-50 text-gray-600 focus:ring-0 cursor-not-allowed font-mono text-base"}),l.jsx("p",{className:"text-xs text-gray-500",children:`Token' deitirmek iin yukardaki "Yeni Secret Token Olutur" balantsn kullann.`})]})]}),l.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-8 py-5 border-t border-gray-200 flex justify-end gap-4",children:l.jsx("button",{onClick:r,className:"px-8 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl text-base font-semibold hover:bg-gray-100 hover:border-gray-400 transition-all shadow-sm flex items-center gap-2",children:"Kapat"})})]})}):null}function CX({isOpen:e,onClose:r}){const[t,n]=J.useState(""),[a,s]=J.useState(""),[c,d]=J.useState(""),[x,f]=J.useState(!1),[g,v]=J.useState(!1);J.useEffect(()=>{e&&w()},[e]);const w=async()=>{v(!0);try{const N=await xn.get("company_name"),S=await xn.get("company_address"),T=await xn.get("company_phone");n(N.data||""),s(S.data||""),d(T.data||"")}catch(N){console.error("Error loading company settings",N)}finally{v(!1)}},E=async()=>{f(!0);try{await xn.set("company_name",t.trim()),await xn.set("company_address",a.trim()),await xn.set("company_phone",c.trim()),alert("Firma bilgileri baaryla kaydedildi."),r()}catch(N){console.error("Error saving company settings",N),alert("Firma bilgileri kaydedilemedi: "+N.message)}finally{f(!1)}};return e?l.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 z-50 font-sans",children:[l.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden",style:{animation:"modalSlideIn 0.3s ease-out"},children:[l.jsxs("div",{className:"relative bg-gradient-to-br from-violet-600 via-purple-600 to-indigo-700 px-8 py-8 overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 opacity-10",children:[l.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white rounded-full -translate-y-1/2 translate-x-1/2"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white rounded-full translate-y-1/2 -translate-x-1/2"})]}),l.jsxs("div",{className:"relative flex justify-between items-start",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:l.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Firma Bilgileri"}),l.jsx("p",{className:"text-purple-200 mt-1",children:"letmenizin temel bilgilerini ynetin"})]})]}),l.jsx("button",{onClick:r,className:"text-white/70 hover:text-white hover:bg-white/20 p-3 rounded-xl transition-all duration-200 hover:rotate-90",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),l.jsx("div",{className:"p-8 space-y-6 overflow-y-auto bg-gradient-to-b from-gray-50 to-white",children:g?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500 font-medium",children:"Firma bilgileri ykleniyor..."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"group",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[l.jsx("span",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),"Firma smi"]}),l.jsx("input",{type:"text",value:t,onChange:N=>n(N.target.value),placeholder:"rn: ABC Ticaret Ltd. ti.",className:"w-full px-5 py-4 bg-white border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-violet-500/20 focus:border-violet-500 outline-none transition-all text-gray-800 text-base placeholder:text-gray-400 hover:border-gray-300"})]}),l.jsxs("div",{className:"group",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[l.jsx("span",{className:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center",children:l.jsxs("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),"Firma Adresi"]}),l.jsx("textarea",{value:a,onChange:N=>s(N.target.value),placeholder:"rn: Atatrk Cad. No:123, Merkez/stanbul",rows:3,className:"w-full px-5 py-4 bg-white border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all text-gray-800 text-base placeholder:text-gray-400 hover:border-gray-300 resize-none"})]}),l.jsxs("div",{className:"group",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[l.jsx("span",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),"Firma letiim Numaras"]}),l.jsx("input",{type:"tel",value:c,onChange:N=>d(N.target.value),placeholder:"rn: 0212 555 1234",className:"w-full px-5 py-4 bg-white border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all text-gray-800 text-base placeholder:text-gray-400 hover:border-gray-300"})]}),l.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-5 rounded-2xl border border-amber-200/50",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center flex-shrink-0",children:l.jsx("svg",{className:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-amber-800 font-medium",children:"Bilgi"}),l.jsx("p",{className:"text-amber-700 text-sm mt-1",children:"Bu bilgiler filerde ve raporlarnzda kullanlacaktr."})]})]})})]})}),l.jsxs("div",{className:"bg-white px-8 py-5 border-t border-gray-100 flex justify-end gap-4",children:[l.jsxs("button",{onClick:r,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl text-base font-semibold hover:bg-gray-200 transition-all flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"ptal"]}),l.jsx("button",{onClick:E,disabled:x,className:"px-8 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl text-base font-bold hover:from-violet-700 hover:to-purple-700 shadow-lg shadow-purple-500/30 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-xl hover:shadow-purple-500/40 hover:-translate-y-0.5",children:x?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Kaydediliyor..."]}):l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Kaydet"]})})]})]}),l.jsx("style",{children:`
                @keyframes modalSlideIn {
                    from {
                        opacity: 0;
                        transform: scale(0.95) translateY(10px);
                    }
                    to {
                        opacity: 1;
                        transform: scale(1) translateY(0);
                    }
                }
            `})]}):null}function jX(){const[e,r]=J.useState(!0),[t,n]=J.useState(!1),[a,s]=J.useState("123456"),[c,d]=J.useState("123456"),[x,f]=J.useState(!0),[g,v]=J.useState(!0),[w,E]=J.useState(!0),[N,S]=J.useState(!1),[T,j]=J.useState(!1),[D,I]=J.useState("Termal 80mm"),[L,V]=J.useState("..."),[X,M]=J.useState(!1),[W,z]=J.useState(!1),[ae,Z]=J.useState(!1),[H,he]=J.useState(!1),[q,se]=J.useState(!1);J.useEffect(()=>{ve()},[]);const ve=async()=>{r(!0);try{const{data:P}=await xn.getAll();P&&(P.pos_settings_ask_quantity!==void 0&&n(P.pos_settings_ask_quantity),P.sales_cancel_password&&s(P.sales_cancel_password),P.sales_edit_password&&d(P.sales_edit_password),P.sales_show_total_sales!==void 0&&f(P.sales_show_total_sales),P.sales_show_total_revenue!==void 0&&v(P.sales_show_total_revenue),P.invoices_show_total!==void 0&&E(P.invoices_show_total),P.integration_send_sales_to_birfatura!==void 0&&S(P.integration_send_sales_to_birfatura),P.receipt_auto_print!==void 0&&j(P.receipt_auto_print),P.receipt_paper_size&&I(P.receipt_paper_size),P.secret_token&&V(P.secret_token))}catch(P){console.error("Settings load error:",P)}finally{r(!1)}},le=async(P,ue)=>{try{await xn.set(P,ue)}catch(Re){console.error(`Failed to save setting ${P}:`,Re),alert("Ayar kaydedilemedi.")}},ge=()=>{const P=!t;n(P),le("pos_settings_ask_quantity",P)},ie=async P=>{const ue=P.target.value;s(ue),le("sales_cancel_password",ue)},Le=async P=>{const ue=P.target.value;d(ue),le("sales_edit_password",ue)},Q=()=>{const P=!x;f(P),le("sales_show_total_sales",P)},B=()=>{const P=!g;v(P),le("sales_show_total_revenue",P)},te=()=>{const P=!w;E(P),le("invoices_show_total",P)},U=()=>{const P=!N;S(P),le("integration_send_sales_to_birfatura",P)};return e?l.jsx("div",{className:"p-8 text-center text-gray-500",children:"Ayarlar ykleniyor..."}):l.jsxs("div",{className:"min-h-screen p-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Ayarlar"}),l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Firma Bilgileri"}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-violet-50 to-purple-50 rounded-lg border border-violet-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Firma Bilgilerini Ynet"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"letmenizin ad, adresi ve iletiim bilgilerini dzenleyin. Bu bilgiler filerde ve raporlarda kullanlr."})]}),l.jsxs("button",{onClick:()=>se(!0),className:"px-5 py-2.5 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-lg hover:from-violet-700 hover:to-purple-700 font-semibold text-sm transition-all shadow-lg shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Firma Bilgileri"]})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Sat Ekran Ayarlar"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"rn Seince Miktar Sor"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aktif edilirse, rn listesinden veya barkod ile rn seildiinde miktar girmeniz iin bir pencere alr."})]}),l.jsx("button",{onClick:ge,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${t?"bg-blue-600":"bg-gray-200"}`,children:l.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${t?"translate-x-7":"translate-x-1"}`})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Sat Ekranndaki Ksayol Grup simleri"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sat ekrannda grnen zel rn grubu kategorilerini ynetin."})]}),l.jsx("button",{onClick:()=>M(!0),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-medium text-sm transition-colors shadow-sm",children:"Gruplar Ynet"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mt-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Sat ve ptal Ayarlar"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-red-800",children:"Sat ptal Etme Parolas"}),l.jsx("p",{className:"text-sm text-red-600 mt-1",children:'"Sat Detay" ekrannda sat iptal etmek istediinizde sorulacak parolay belirleyin.'})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Parola:"}),l.jsx("input",{type:"text",value:a,onChange:ie,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-center font-mono w-32",placeholder:"******"})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg border border-orange-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-orange-800",children:"Sat Detaylarn Deitirme Parolas"}),l.jsx("p",{className:"text-sm text-orange-600 mt-1",children:"Gemi satlarn detaylarn dzenlerken sorulacak parolay belirleyin."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Parola:"}),l.jsx("input",{type:"text",value:c,onChange:Le,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-center font-mono w-32",placeholder:"******"})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Toplam Sat Kartn Gster"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Satlar sayfasndaki "Toplam Sat" bilgi kartn gster veya gizle.'})]}),l.jsx("button",{onClick:Q,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${x?"bg-blue-600":"bg-gray-200"}`,children:l.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${x?"translate-x-7":"translate-x-1"}`})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Toplam Ciro Kartn Gster"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Satlar sayfasndaki "Toplam Ciro" bilgi kartn gster veya gizle.'})]}),l.jsx("button",{onClick:B,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${g?"bg-blue-600":"bg-gray-200"}`,children:l.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${g?"translate-x-7":"translate-x-1"}`})})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mt-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Sat Sonras Fii Ayarlar"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Sat Sonras Fii Otomatik Yazdrlsn"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ak olduunda her sat sonras fi otomatik olarak yazcya gnderilir."})]}),l.jsx("button",{onClick:()=>{const P=!T;j(P),le("receipt_auto_print",P),localStorage.setItem("receipt_auto_print",P.toString())},className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors ${T?"bg-green-600":"bg-gray-300"}`,children:l.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${T?"translate-x-8":"translate-x-1"}`})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Kat Boyutu"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Yazdrlacak fi iin kullanlacak kat boyutunu sein."})]}),l.jsxs("select",{value:D,onChange:P=>{const ue=P.target.value;I(ue),le("receipt_paper_size",ue),localStorage.setItem("receipt_paper_size",ue)},className:"px-4 py-2.5 bg-white border-2 border-blue-200 rounded-lg text-sm font-semibold text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none cursor-pointer hover:border-blue-400 transition-all",children:[l.jsx("option",{value:"Termal 80mm",children:"Termal 80mm"}),l.jsx("option",{value:"Termal 58mm",children:"Termal 58mm"}),l.jsx("option",{value:"A5 (148x210mm)",children:"A5 (148x210mm)"}),l.jsx("option",{value:"A4 (210x297mm)",children:"A4 (210x297mm)"})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg border border-indigo-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Fi Grnm Tasarla"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Seili kat boyutu iin fi tasarmn zelletirin."}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:"Srkle Brak"}),l.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"Canl nizleme"}),l.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Deiken Destei"})]})]}),l.jsxs("button",{onClick:()=>z(!0),className:"px-5 py-2.5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 font-semibold text-sm transition-all shadow-lg shadow-indigo-500/25 hover:shadow-xl hover:shadow-indigo-500/30 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Tasarmcy A"]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mt-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Gelen Faturalar Ayarlar"}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Toplam Tutar Grnm"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gelen Faturalar sayfasndaki toplam tutar kartn gster veya gizle."})]}),l.jsx("button",{onClick:te,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${w?"bg-blue-600":"bg-gray-200"}`,children:l.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${w?"translate-x-7":"translate-x-1"}`})})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mt-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Entegrasyon Ayarlar"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"BirFatura Entegrasyonu"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"E-Fatura ve E-Ariv ilemleriniz iin BirFatura API anahtarlarnz yaplandrn."})]}),l.jsxs("button",{onClick:()=>Z(!0),className:"px-5 py-2.5 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 font-semibold text-sm transition-all shadow-lg shadow-orange-500/25 hover:shadow-xl hover:shadow-orange-500/30 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})}),"Ayarlar Yaplandr"]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Satlar BirFaturaya Sipari Olarak Gnder"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aktif edilirse, tamamlanan her sat otomatik olarak BirFatura sistemine sipari olarak iletilir."})]}),l.jsx("button",{onClick:U,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${N?"bg-orange-500":"bg-gray-200"}`,children:l.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${N?"translate-x-7":"translate-x-1"}`})})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-red-50 to-rose-50 rounded-lg border border-red-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Sipari Entegrasyon Token (Secret Token)"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Kaytl Token: ",l.jsx("span",{className:"font-mono bg-white px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:L.length>20?L.substring(0,20)+"...":L})]})]}),l.jsxs("button",{onClick:()=>he(!0),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-medium text-sm transition-colors shadow-sm flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Dzenle"]})]})]})]}),l.jsx(kX,{isOpen:X,onClose:()=>M(!1)}),l.jsx(NX,{isOpen:W,onClose:()=>z(!1),initialPaperSize:D}),l.jsx(AX,{isOpen:ae,onClose:()=>Z(!1)}),l.jsx(TX,{isOpen:H,onClose:()=>{he(!1),ve()}}),l.jsx(CX,{isOpen:q,onClose:()=>se(!1)})]})}function OX(){return l.jsx(eO,{children:l.jsx(uT,{children:l.jsxs(U8,{children:[l.jsx(pa,{path:"/register",element:l.jsx(aO,{})}),l.jsx(pa,{path:"/login",element:l.jsx(nO,{})}),l.jsx(pa,{path:"/email-success",element:l.jsx(sO,{})}),l.jsx(pa,{path:"/",element:l.jsx(_s,{permission:"can_view_pos",children:l.jsx(xo,{children:l.jsx(WR,{})})})}),l.jsx(pa,{path:"/products",element:l.jsx(_s,{permission:"can_view_products",children:l.jsx(xo,{children:l.jsx(yV,{})})})}),l.jsx(pa,{path:"/customers",element:l.jsx(_s,{permission:"can_view_customers",children:l.jsx(xo,{children:l.jsx(wV,{})})})}),l.jsx(pa,{path:"/customer/:customerName",element:l.jsx(_s,{permission:"can_view_customers",children:l.jsx(xo,{children:l.jsx(EV,{})})})}),l.jsx(pa,{path:"/sales",element:l.jsx(_s,{permission:"can_view_sales",children:l.jsx(xo,{children:l.jsx(kV,{})})})}),l.jsx(pa,{path:"/invoices",element:l.jsx(_s,{permission:"can_view_invoices",children:l.jsx(xo,{children:l.jsx(wX,{})})})}),l.jsx(pa,{path:"/users",element:l.jsx(_s,{permission:"can_view_users",children:l.jsx(xo,{children:l.jsx(_X,{})})})}),l.jsx(pa,{path:"/settings",element:l.jsx(_s,{permission:"can_view_users",children:l.jsx(xo,{children:l.jsx(jX,{})})})}),l.jsx(pa,{path:"/mobile-pos",element:l.jsx(_s,{permission:"can_view_pos",children:l.jsx(bI,{})})}),l.jsx(pa,{path:"/mobile-products",element:l.jsx(_s,{permission:"can_view_products",children:l.jsx(vI,{})})}),l.jsx(pa,{path:"/mobile-customers",element:l.jsx(_s,{permission:"can_view_customers",children:l.jsx(yI,{})})}),l.jsx(pa,{path:"/mobile-sales",element:l.jsx(_s,{permission:"can_view_sales",children:l.jsx(wI,{})})}),l.jsx(pa,{path:"/mobile-invoices",element:l.jsx(_s,{permission:"can_view_invoices",children:l.jsx(kI,{})})}),l.jsx(pa,{path:"*",element:l.jsx(gk,{to:"/",replace:!0})})]})})})}H6.createRoot(document.getElementById("root")).render(l.jsx(J.StrictMode,{children:l.jsx(OX,{})}));
