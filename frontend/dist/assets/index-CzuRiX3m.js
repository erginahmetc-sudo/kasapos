function m6(e,r){for(var t=0;t<r.length;t++){const n=r[t];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function X4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pm={exports:{}},Hu={};var Fv;function g6(){if(Fv)return Hu;Fv=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function t(n,a,i){var u=null;if(i!==void 0&&(u=""+i),a.key!==void 0&&(u=""+a.key),"key"in a){i={};for(var f in a)f!=="key"&&(i[f]=a[f])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:u,ref:a!==void 0?a:null,props:i}}return Hu.Fragment=r,Hu.jsx=t,Hu.jsxs=t,Hu}var Lv;function p6(){return Lv||(Lv=1,Pm.exports=g6()),Pm.exports}var o=p6(),Um={exports:{}},dr={};var Bv;function b6(){if(Bv)return dr;Bv=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function k(re){return re===null||typeof re!="object"?null:(re=E&&re[E]||re["@@iterator"],typeof re=="function"?re:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function I(re,L,q){this.props=re,this.context=L,this.refs=C,this.updater=q||N}I.prototype.isReactComponent={},I.prototype.setState=function(re,L){if(typeof re!="object"&&typeof re!="function"&&re!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,re,L,"setState")},I.prototype.forceUpdate=function(re){this.updater.enqueueForceUpdate(this,re,"forceUpdate")};function D(){}D.prototype=I.prototype;function O(re,L,q){this.props=re,this.context=L,this.refs=C,this.updater=q||N}var B=O.prototype=new D;B.constructor=O,A(B,I.prototype),B.isPureReactComponent=!0;var U=Array.isArray;function X(){}var F={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function H(re,L,q){var P=q.ref;return{$$typeof:e,type:re,key:L,ref:P!==void 0?P:null,props:q}}function ce(re,L){return H(re.type,L,re.props)}function J(re){return typeof re=="object"&&re!==null&&re.$$typeof===e}function V(re){var L={"=":"=0",":":"=2"};return"$"+re.replace(/[=:]/g,function(q){return L[q]})}var xe=/\/+/g;function W(re,L){return typeof re=="object"&&re!==null&&re.key!=null?V(""+re.key):L.toString(36)}function ne(re){switch(re.status){case"fulfilled":return re.value;case"rejected":throw re.reason;default:switch(typeof re.status=="string"?re.then(X,X):(re.status="pending",re.then(function(L){re.status==="pending"&&(re.status="fulfilled",re.value=L)},function(L){re.status==="pending"&&(re.status="rejected",re.reason=L)})),re.status){case"fulfilled":return re.value;case"rejected":throw re.reason}}throw re}function be(re,L,q,P,Z){var pe=typeof re;(pe==="undefined"||pe==="boolean")&&(re=null);var Le=!1;if(re===null)Le=!0;else switch(pe){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(re.$$typeof){case e:case r:Le=!0;break;case w:return Le=re._init,be(Le(re._payload),L,q,P,Z)}}if(Le)return Z=Z(re),Le=P===""?"."+W(re,0):P,U(Z)?(q="",Le!=null&&(q=Le.replace(xe,"$&/")+"/"),be(Z,L,q,"",function(et){return et})):Z!=null&&(J(Z)&&(Z=ce(Z,q+(Z.key==null||re&&re.key===Z.key?"":(""+Z.key).replace(xe,"$&/")+"/")+Le)),L.push(Z)),1;Le=0;var Be=P===""?".":P+":";if(U(re))for(var Pe=0;Pe<re.length;Pe++)P=re[Pe],pe=Be+W(P,Pe),Le+=be(P,L,q,pe,Z);else if(Pe=k(re),typeof Pe=="function")for(re=Pe.call(re),Pe=0;!(P=re.next()).done;)P=P.value,pe=Be+W(P,Pe++),Le+=be(P,L,q,pe,Z);else if(pe==="object"){if(typeof re.then=="function")return be(ne(re),L,q,P,Z);throw L=String(re),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(re).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return Le}function fe(re,L,q){if(re==null)return re;var P=[],Z=0;return be(re,P,"","",function(pe){return L.call(q,pe,Z++)}),P}function Ve(re){if(re._status===-1){var L=re._result;L=L(),L.then(function(q){(re._status===0||re._status===-1)&&(re._status=1,re._result=q)},function(q){(re._status===0||re._status===-1)&&(re._status=2,re._result=q)}),re._status===-1&&(re._status=0,re._result=L)}if(re._status===1)return re._result.default;throw re._result}var ge=typeof reportError=="function"?reportError:function(re){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof re=="object"&&re!==null&&typeof re.message=="string"?String(re.message):String(re),error:re});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",re);return}console.error(re)},We={map:fe,forEach:function(re,L,q){fe(re,function(){L.apply(this,arguments)},q)},count:function(re){var L=0;return fe(re,function(){L++}),L},toArray:function(re){return fe(re,function(L){return L})||[]},only:function(re){if(!J(re))throw Error("React.Children.only expected to receive a single React element child.");return re}};return dr.Activity=_,dr.Children=We,dr.Component=I,dr.Fragment=t,dr.Profiler=a,dr.PureComponent=O,dr.StrictMode=n,dr.Suspense=g,dr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,dr.__COMPILER_RUNTIME={__proto__:null,c:function(re){return F.H.useMemoCache(re)}},dr.cache=function(re){return function(){return re.apply(null,arguments)}},dr.cacheSignal=function(){return null},dr.cloneElement=function(re,L,q){if(re==null)throw Error("The argument must be a React element, but you passed "+re+".");var P=A({},re.props),Z=re.key;if(L!=null)for(pe in L.key!==void 0&&(Z=""+L.key),L)!Y.call(L,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&L.ref===void 0||(P[pe]=L[pe]);var pe=arguments.length-2;if(pe===1)P.children=q;else if(1<pe){for(var Le=Array(pe),Be=0;Be<pe;Be++)Le[Be]=arguments[Be+2];P.children=Le}return H(re.type,Z,P)},dr.createContext=function(re){return re={$$typeof:u,_currentValue:re,_currentValue2:re,_threadCount:0,Provider:null,Consumer:null},re.Provider=re,re.Consumer={$$typeof:i,_context:re},re},dr.createElement=function(re,L,q){var P,Z={},pe=null;if(L!=null)for(P in L.key!==void 0&&(pe=""+L.key),L)Y.call(L,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(Z[P]=L[P]);var Le=arguments.length-2;if(Le===1)Z.children=q;else if(1<Le){for(var Be=Array(Le),Pe=0;Pe<Le;Pe++)Be[Pe]=arguments[Pe+2];Z.children=Be}if(re&&re.defaultProps)for(P in Le=re.defaultProps,Le)Z[P]===void 0&&(Z[P]=Le[P]);return H(re,pe,Z)},dr.createRef=function(){return{current:null}},dr.forwardRef=function(re){return{$$typeof:f,render:re}},dr.isValidElement=J,dr.lazy=function(re){return{$$typeof:w,_payload:{_status:-1,_result:re},_init:Ve}},dr.memo=function(re,L){return{$$typeof:m,type:re,compare:L===void 0?null:L}},dr.startTransition=function(re){var L=F.T,q={};F.T=q;try{var P=re(),Z=F.S;Z!==null&&Z(q,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(X,ge)}catch(pe){ge(pe)}finally{L!==null&&q.types!==null&&(L.types=q.types),F.T=L}},dr.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},dr.use=function(re){return F.H.use(re)},dr.useActionState=function(re,L,q){return F.H.useActionState(re,L,q)},dr.useCallback=function(re,L){return F.H.useCallback(re,L)},dr.useContext=function(re){return F.H.useContext(re)},dr.useDebugValue=function(){},dr.useDeferredValue=function(re,L){return F.H.useDeferredValue(re,L)},dr.useEffect=function(re,L){return F.H.useEffect(re,L)},dr.useEffectEvent=function(re){return F.H.useEffectEvent(re)},dr.useId=function(){return F.H.useId()},dr.useImperativeHandle=function(re,L,q){return F.H.useImperativeHandle(re,L,q)},dr.useInsertionEffect=function(re,L){return F.H.useInsertionEffect(re,L)},dr.useLayoutEffect=function(re,L){return F.H.useLayoutEffect(re,L)},dr.useMemo=function(re,L){return F.H.useMemo(re,L)},dr.useOptimistic=function(re,L){return F.H.useOptimistic(re,L)},dr.useReducer=function(re,L,q){return F.H.useReducer(re,L,q)},dr.useRef=function(re){return F.H.useRef(re)},dr.useState=function(re){return F.H.useState(re)},dr.useSyncExternalStore=function(re,L,q){return F.H.useSyncExternalStore(re,L,q)},dr.useTransition=function(){return F.H.useTransition()},dr.version="19.2.3",dr}var Pv;function _p(){return Pv||(Pv=1,Um.exports=b6()),Um.exports}var Q=_p(),zm={exports:{}},Vu={},Hm={exports:{}},Vm={};var Uv;function w6(){return Uv||(Uv=1,(function(e){function r(be,fe){var Ve=be.length;be.push(fe);e:for(;0<Ve;){var ge=Ve-1>>>1,We=be[ge];if(0<a(We,fe))be[ge]=fe,be[Ve]=We,Ve=ge;else break e}}function t(be){return be.length===0?null:be[0]}function n(be){if(be.length===0)return null;var fe=be[0],Ve=be.pop();if(Ve!==fe){be[0]=Ve;e:for(var ge=0,We=be.length,re=We>>>1;ge<re;){var L=2*(ge+1)-1,q=be[L],P=L+1,Z=be[P];if(0>a(q,Ve))P<We&&0>a(Z,q)?(be[ge]=Z,be[P]=Ve,ge=P):(be[ge]=q,be[L]=Ve,ge=L);else if(P<We&&0>a(Z,Ve))be[ge]=Z,be[P]=Ve,ge=P;else break e}}return fe}function a(be,fe){var Ve=be.sortIndex-fe.sortIndex;return Ve!==0?Ve:be.id-fe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var g=[],m=[],w=1,_=null,E=3,k=!1,N=!1,A=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function B(be){for(var fe=t(m);fe!==null;){if(fe.callback===null)n(m);else if(fe.startTime<=be)n(m),fe.sortIndex=fe.expirationTime,r(g,fe);else break;fe=t(m)}}function U(be){if(A=!1,B(be),!N)if(t(g)!==null)N=!0,X||(X=!0,V());else{var fe=t(m);fe!==null&&ne(U,fe.startTime-be)}}var X=!1,F=-1,Y=5,H=-1;function ce(){return C?!0:!(e.unstable_now()-H<Y)}function J(){if(C=!1,X){var be=e.unstable_now();H=be;var fe=!0;try{e:{N=!1,A&&(A=!1,D(F),F=-1),k=!0;var Ve=E;try{t:{for(B(be),_=t(g);_!==null&&!(_.expirationTime>be&&ce());){var ge=_.callback;if(typeof ge=="function"){_.callback=null,E=_.priorityLevel;var We=ge(_.expirationTime<=be);if(be=e.unstable_now(),typeof We=="function"){_.callback=We,B(be),fe=!0;break t}_===t(g)&&n(g),B(be)}else n(g);_=t(g)}if(_!==null)fe=!0;else{var re=t(m);re!==null&&ne(U,re.startTime-be),fe=!1}}break e}finally{_=null,E=Ve,k=!1}fe=void 0}}finally{fe?V():X=!1}}}var V;if(typeof O=="function")V=function(){O(J)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,W=xe.port2;xe.port1.onmessage=J,V=function(){W.postMessage(null)}}else V=function(){I(J,0)};function ne(be,fe){F=I(function(){be(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(be){be.callback=null},e.unstable_forceFrameRate=function(be){0>be||125<be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<be?Math.floor(1e3/be):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(be){switch(E){case 1:case 2:case 3:var fe=3;break;default:fe=E}var Ve=E;E=fe;try{return be()}finally{E=Ve}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(be,fe){switch(be){case 1:case 2:case 3:case 4:case 5:break;default:be=3}var Ve=E;E=be;try{return fe()}finally{E=Ve}},e.unstable_scheduleCallback=function(be,fe,Ve){var ge=e.unstable_now();switch(typeof Ve=="object"&&Ve!==null?(Ve=Ve.delay,Ve=typeof Ve=="number"&&0<Ve?ge+Ve:ge):Ve=ge,be){case 1:var We=-1;break;case 2:We=250;break;case 5:We=1073741823;break;case 4:We=1e4;break;default:We=5e3}return We=Ve+We,be={id:w++,callback:fe,priorityLevel:be,startTime:Ve,expirationTime:We,sortIndex:-1},Ve>ge?(be.sortIndex=Ve,r(m,be),t(g)===null&&be===t(m)&&(A?(D(F),F=-1):A=!0,ne(U,Ve-ge))):(be.sortIndex=We,r(g,be),N||k||(N=!0,X||(X=!0,V()))),be},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(be){var fe=E;return function(){var Ve=E;E=fe;try{return be.apply(this,arguments)}finally{E=Ve}}}})(Vm)),Vm}var zv;function v6(){return zv||(zv=1,Hm.exports=w6()),Hm.exports}var Gm={exports:{}},Ia={};var Hv;function y6(){if(Hv)return Ia;Hv=1;var e=_p();function r(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(r(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(g,m,w){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:g,containerInfo:m,implementation:w}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Ia.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ia.createPortal=function(g,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(r(299));return i(g,m,null,w)},Ia.flushSync=function(g){var m=u.T,w=n.p;try{if(u.T=null,n.p=2,g)return g()}finally{u.T=m,n.p=w,n.d.f()}},Ia.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(g,m))},Ia.prefetchDNS=function(g){typeof g=="string"&&n.d.D(g)},Ia.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var w=m.as,_=f(w,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,k=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;w==="style"?n.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:k}):w==="script"&&n.d.X(g,{crossOrigin:_,integrity:E,fetchPriority:k,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Ia.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var w=f(m.as,m.crossOrigin);n.d.M(g,{crossOrigin:w,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(g)},Ia.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var w=m.as,_=f(w,m.crossOrigin);n.d.L(g,w,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Ia.preloadModule=function(g,m){if(typeof g=="string")if(m){var w=f(m.as,m.crossOrigin);n.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:w,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(g)},Ia.requestFormReset=function(g){n.d.r(g)},Ia.unstable_batchedUpdates=function(g,m){return g(m)},Ia.useFormState=function(g,m,w){return u.H.useFormState(g,m,w)},Ia.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ia.version="19.2.3",Ia}var Vv;function _6(){if(Vv)return Gm.exports;Vv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),Gm.exports=y6(),Gm.exports}var Gv;function k6(){if(Gv)return Vu;Gv=1;var e=v6(),r=_p(),t=_6();function n(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)c+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function i(s){var c=s,x=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(x=c.return),s=c.return;while(s)}return c.tag===3?x:null}function u(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function f(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function g(s){if(i(s)!==s)throw Error(n(188))}function m(s){var c=s.alternate;if(!c){if(c=i(s),c===null)throw Error(n(188));return c!==s?null:s}for(var x=s,v=c;;){var T=x.return;if(T===null)break;var R=T.alternate;if(R===null){if(v=T.return,v!==null){x=v;continue}break}if(T.child===R.child){for(R=T.child;R;){if(R===x)return g(T),s;if(R===v)return g(T),c;R=R.sibling}throw Error(n(188))}if(x.return!==v.return)x=T,v=R;else{for(var K=!1,oe=T.child;oe;){if(oe===x){K=!0,x=T,v=R;break}if(oe===v){K=!0,v=T,x=R;break}oe=oe.sibling}if(!K){for(oe=R.child;oe;){if(oe===x){K=!0,x=R,v=T;break}if(oe===v){K=!0,v=R,x=T;break}oe=oe.sibling}if(!K)throw Error(n(189))}}if(x.alternate!==v)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?s:c}function w(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=w(s),c!==null)return c;s=s.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),O=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=J&&s[J]||s["@@iterator"],typeof s=="function"?s:null)}var xe=Symbol.for("react.client.reference");function W(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===xe?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case I:return"Profiler";case C:return"StrictMode";case U:return"Suspense";case X:return"SuspenseList";case H:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case N:return"Portal";case O:return s.displayName||"Context";case D:return(s._context.displayName||"Context")+".Consumer";case B:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case F:return c=s.displayName||null,c!==null?c:W(s.type)||"Memo";case Y:c=s._payload,s=s._init;try{return W(s(c))}catch{}}return null}var ne=Array.isArray,be=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve={pending:!1,data:null,method:null,action:null},ge=[],We=-1;function re(s){return{current:s}}function L(s){0>We||(s.current=ge[We],ge[We]=null,We--)}function q(s,c){We++,ge[We]=s.current,s.current=c}var P=re(null),Z=re(null),pe=re(null),Le=re(null);function Be(s,c){switch(q(pe,c),q(Z,s),q(P,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?sv(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=sv(c),s=iv(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}L(P),q(P,s)}function Pe(){L(P),L(Z),L(pe)}function et(s){s.memoizedState!==null&&q(Le,s);var c=P.current,x=iv(c,s.type);c!==x&&(q(Z,s),q(P,x))}function ut(s){Z.current===s&&(L(P),L(Z)),Le.current===s&&(L(Le),Bu._currentValue=Ve)}var ve,Ie;function z(s){if(ve===void 0)try{throw Error()}catch(x){var c=x.stack.trim().match(/\n( *(at )?)/);ve=c&&c[1]||"",Ie=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+s+Ie}var De=!1;function Te(s,c){if(!s||De)return"";De=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(c){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(lt){var tt=lt}Reflect.construct(s,[],bt)}else{try{bt.call()}catch(lt){tt=lt}s.call(bt.prototype)}}else{try{throw Error()}catch(lt){tt=lt}(bt=s())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(lt){if(lt&&tt&&typeof lt.stack=="string")return[lt.stack,tt.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=v.DetermineComponentFrameRoot(),K=R[0],oe=R[1];if(K&&oe){var Ae=K.split(`
`),Qe=oe.split(`
`);for(T=v=0;v<Ae.length&&!Ae[v].includes("DetermineComponentFrameRoot");)v++;for(;T<Qe.length&&!Qe[T].includes("DetermineComponentFrameRoot");)T++;if(v===Ae.length||T===Qe.length)for(v=Ae.length-1,T=Qe.length-1;1<=v&&0<=T&&Ae[v]!==Qe[T];)T--;for(;1<=v&&0<=T;v--,T--)if(Ae[v]!==Qe[T]){if(v!==1||T!==1)do if(v--,T--,0>T||Ae[v]!==Qe[T]){var xt=`
`+Ae[v].replace(" at new "," at ");return s.displayName&&xt.includes("<anonymous>")&&(xt=xt.replace("<anonymous>",s.displayName)),xt}while(1<=v&&0<=T);break}}}finally{De=!1,Error.prepareStackTrace=x}return(x=s?s.displayName||s.name:"")?z(x):""}function le(s,c){switch(s.tag){case 26:case 27:case 5:return z(s.type);case 16:return z("Lazy");case 13:return s.child!==c&&c!==null?z("Suspense Fallback"):z("Suspense");case 19:return z("SuspenseList");case 0:case 15:return Te(s.type,!1);case 11:return Te(s.type.render,!1);case 1:return Te(s.type,!0);case 31:return z("Activity");default:return""}}function de(s){try{var c="",x=null;do c+=le(s,x),x=s,s=s.return;while(s);return c}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var Ee=Object.prototype.hasOwnProperty,at=e.unstable_scheduleCallback,Fe=e.unstable_cancelCallback,He=e.unstable_shouldYield,je=e.unstable_requestPaint,Ke=e.unstable_now,it=e.unstable_getCurrentPriorityLevel,qe=e.unstable_ImmediatePriority,Me=e.unstable_UserBlockingPriority,Xe=e.unstable_NormalPriority,St=e.unstable_LowPriority,At=e.unstable_IdlePriority,Ot=e.log,sr=e.unstable_setDisableYieldValue,Nt=null,mt=null;function Ht(s){if(typeof Ot=="function"&&sr(s),mt&&typeof mt.setStrictMode=="function")try{mt.setStrictMode(Nt,s)}catch{}}var Dt=Math.clz32?Math.clz32:_r,Yt=Math.log,or=Math.LN2;function _r(s){return s>>>=0,s===0?32:31-(Yt(s)/or|0)|0}var Qr=256,Xt=262144,Mr=4194304;function zr(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function En(s,c,x){var v=s.pendingLanes;if(v===0)return 0;var T=0,R=s.suspendedLanes,K=s.pingedLanes;s=s.warmLanes;var oe=v&134217727;return oe!==0?(v=oe&~R,v!==0?T=zr(v):(K&=oe,K!==0?T=zr(K):x||(x=oe&~s,x!==0&&(T=zr(x))))):(oe=v&~R,oe!==0?T=zr(oe):K!==0?T=zr(K):x||(x=v&~s,x!==0&&(T=zr(x)))),T===0?0:c!==0&&c!==T&&(c&R)===0&&(R=T&-T,x=c&-c,R>=x||R===32&&(x&4194048)!==0)?c:T}function Wr(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function Or(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ze(){var s=Mr;return Mr<<=1,(Mr&62914560)===0&&(Mr=4194304),s}function kt(s){for(var c=[],x=0;31>x;x++)c.push(s);return c}function Rt(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Mt(s,c,x,v,T,R){var K=s.pendingLanes;s.pendingLanes=x,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=x,s.entangledLanes&=x,s.errorRecoveryDisabledLanes&=x,s.shellSuspendCounter=0;var oe=s.entanglements,Ae=s.expirationTimes,Qe=s.hiddenUpdates;for(x=K&~x;0<x;){var xt=31-Dt(x),bt=1<<xt;oe[xt]=0,Ae[xt]=-1;var tt=Qe[xt];if(tt!==null)for(Qe[xt]=null,xt=0;xt<tt.length;xt++){var lt=tt[xt];lt!==null&&(lt.lane&=-536870913)}x&=~bt}v!==0&&pr(s,v,0),R!==0&&T===0&&s.tag!==0&&(s.suspendedLanes|=R&~(K&~c))}function pr(s,c,x){s.pendingLanes|=c,s.suspendedLanes&=~c;var v=31-Dt(c);s.entangledLanes|=c,s.entanglements[v]=s.entanglements[v]|1073741824|x&261930}function Fr(s,c){var x=s.entangledLanes|=c;for(s=s.entanglements;x;){var v=31-Dt(x),T=1<<v;T&c|s[v]&c&&(s[v]|=c),x&=~T}}function $r(s,c){var x=c&-c;return x=(x&42)!==0?1:br(x),(x&(s.suspendedLanes|c))!==0?0:x}function br(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Wn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ae(){var s=fe.p;return s!==0?s:(s=window.event,s===void 0?32:Tv(s.type))}function ue(s,c){var x=fe.p;try{return fe.p=s,c()}finally{fe.p=x}}var he=Math.random().toString(36).slice(2),me="__reactFiber$"+he,we="__reactProps$"+he,_e="__reactContainer$"+he,Ye="__reactEvents$"+he,ct="__reactListeners$"+he,ie="__reactHandles$"+he,Se="__reactResources$"+he,Ne="__reactMarker$"+he;function Ze(s){delete s[me],delete s[we],delete s[Ye],delete s[ct],delete s[ie]}function dt(s){var c=s[me];if(c)return c;for(var x=s.parentNode;x;){if(c=x[_e]||x[me]){if(x=c.alternate,c.child!==null||x!==null&&x.child!==null)for(s=hv(s);s!==null;){if(x=s[me])return x;s=hv(s)}return c}s=x,x=s.parentNode}return null}function gt(s){if(s=s[me]||s[_e]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function ht(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(n(33))}function wt(s){var c=s[Se];return c||(c=s[Se]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function It(s){s[Ne]=!0}var ot=new Set,Br={};function $t(s,c){jn(s,c),jn(s+"Capture",c)}function jn(s,c){for(Br[s]=c,s=0;s<c.length;s++)ot.add(c[s])}var si=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cr={},ir={};function ur(s){return Ee.call(ir,s)?!0:Ee.call(cr,s)?!1:si.test(s)?ir[s]=!0:(cr[s]=!0,!1)}function Dn(s,c,x){if(ur(c))if(x===null)s.removeAttribute(c);else{switch(typeof x){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var v=c.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+x)}}function fs(s,c,x){if(x===null)s.removeAttribute(c);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+x)}}function Va(s,c,x,v){if(v===null)s.removeAttribute(x);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(x);return}s.setAttributeNS(c,x,""+v)}}function Lr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function hs(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ki(s,c,x){var v=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var T=v.get,R=v.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return T.call(this)},set:function(K){x=""+K,R.call(this,K)}}),Object.defineProperty(s,c,{enumerable:v.enumerable}),{getValue:function(){return x},setValue:function(K){x=""+K},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function Ct(s){if(!s._valueTracker){var c=hs(s)?"checked":"value";s._valueTracker=ki(s,c,""+s[c])}}function Xr(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var x=c.getValue(),v="";return s&&(v=hs(s)?s.checked?"true":"false":s.value),s=v,s!==x?(c.setValue(s),!0):!1}function nr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var xs=/[\n"\\]/g;function fr(s){return s.replace(xs,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Mn(s,c,x,v,T,R,K,oe){s.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?s.type=K:s.removeAttribute("type"),c!=null?K==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+Lr(c)):s.value!==""+Lr(c)&&(s.value=""+Lr(c)):K!=="submit"&&K!=="reset"||s.removeAttribute("value"),c!=null?ye(s,K,Lr(c)):x!=null?ye(s,K,Lr(x)):v!=null&&s.removeAttribute("value"),T==null&&R!=null&&(s.defaultChecked=!!R),T!=null&&(s.checked=T&&typeof T!="function"&&typeof T!="symbol"),oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?s.name=""+Lr(oe):s.removeAttribute("name")}function $e(s,c,x,v,T,R,K,oe){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(s.type=R),c!=null||x!=null){if(!(R!=="submit"&&R!=="reset"||c!=null)){Ct(s);return}x=x!=null?""+Lr(x):"",c=c!=null?""+Lr(c):x,oe||c===s.value||(s.value=c),s.defaultValue=c}v=v??T,v=typeof v!="function"&&typeof v!="symbol"&&!!v,s.checked=oe?s.checked:!!v,s.defaultChecked=!!v,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(s.name=K),Ct(s)}function ye(s,c,x){c==="number"&&nr(s.ownerDocument)===s||s.defaultValue===""+x||(s.defaultValue=""+x)}function Bt(s,c,x,v){if(s=s.options,c){c={};for(var T=0;T<x.length;T++)c["$"+x[T]]=!0;for(x=0;x<s.length;x++)T=c.hasOwnProperty("$"+s[x].value),s[x].selected!==T&&(s[x].selected=T),T&&v&&(s[x].defaultSelected=!0)}else{for(x=""+Lr(x),c=null,T=0;T<s.length;T++){if(s[T].value===x){s[T].selected=!0,v&&(s[T].defaultSelected=!0);return}c!==null||s[T].disabled||(c=s[T])}c!==null&&(c.selected=!0)}}function Xn(s,c,x){if(c!=null&&(c=""+Lr(c),c!==s.value&&(s.value=c),x==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=x!=null?""+Lr(x):""}function Ga(s,c,x,v){if(c==null){if(v!=null){if(x!=null)throw Error(n(92));if(ne(v)){if(1<v.length)throw Error(n(93));v=v[0]}x=v}x==null&&(x=""),c=x}x=Lr(c),s.defaultValue=x,v=s.textContent,v===x&&v!==""&&v!==null&&(s.value=v),Ct(s)}function jl(s,c){if(c){var x=s.firstChild;if(x&&x===s.lastChild&&x.nodeType===3){x.nodeValue=c;return}}s.textContent=c}var eu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wa(s,c,x){var v=c.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?v?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":v?s.setProperty(c,x):typeof x!="number"||x===0||eu.has(c)?c==="float"?s.cssFloat=x:s[c]=(""+x).trim():s[c]=x+"px"}function Vt(s,c,x){if(c!=null&&typeof c!="object")throw Error(n(62));if(s=s.style,x!=null){for(var v in x)!x.hasOwnProperty(v)||c!=null&&c.hasOwnProperty(v)||(v.indexOf("--")===0?s.setProperty(v,""):v==="float"?s.cssFloat="":s[v]="");for(var T in c)v=c[T],c.hasOwnProperty(T)&&x[T]!==v&&Wa(s,T,v)}else for(var R in c)c.hasOwnProperty(R)&&Wa(s,R,c[R])}function un(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),K1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rl(s){return K1.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ja(){}var Co=null;function tu(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var gn=null,Ls=null;function ii(s){var c=gt(s);if(c&&(s=c.stateNode)){var x=s[we]||null;e:switch(s=c.stateNode,c.type){case"input":if(Mn(s,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),c=x.name,x.type==="radio"&&c!=null){for(x=s;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+fr(""+c)+'"][type="radio"]'),c=0;c<x.length;c++){var v=x[c];if(v!==s&&v.form===s.form){var T=v[we]||null;if(!T)throw Error(n(90));Mn(v,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(c=0;c<x.length;c++)v=x[c],v.form===s.form&&Xr(v)}break e;case"textarea":Xn(s,x.value,x.defaultValue);break e;case"select":c=x.value,c!=null&&Bt(s,!!x.multiple,c,!1)}}}var Kt=!1;function df(s,c,x){if(Kt)return s(c,x);Kt=!0;try{var v=s(c);return v}finally{if(Kt=!1,(gn!==null||Ls!==null)&&(rh(),gn&&(c=gn,s=Ls,Ls=gn=null,ii(c),s)))for(c=0;c<s.length;c++)ii(s[c])}}function ar(s,c){var x=s.stateNode;if(x===null)return null;var v=x[we]||null;if(v===null)return null;x=v[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(x&&typeof x!="function")throw Error(n(231,c,typeof x));return x}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ru=!1;if(dn)try{var Xi={};Object.defineProperty(Xi,"passive",{get:function(){ru=!0}}),window.addEventListener("test",Xi,Xi),window.removeEventListener("test",Xi,Xi)}catch{ru=!1}var li=null,oi=null,Rc=null;function Ol(){if(Rc)return Rc;var s,c=oi,x=c.length,v,T="value"in li?li.value:li.textContent,R=T.length;for(s=0;s<x&&c[s]===T[s];s++);var K=x-s;for(v=1;v<=K&&c[x-v]===T[R-v];v++);return Rc=T.slice(s,1<v?1-v:void 0)}function Ei(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function Si(){return!0}function nu(){return!1}function Qn(s){function c(x,v,T,R,K){this._reactName=x,this._targetInst=T,this.type=v,this.nativeEvent=R,this.target=K,this.currentTarget=null;for(var oe in s)s.hasOwnProperty(oe)&&(x=s[oe],this[oe]=x?x(R):R[oe]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Si:nu,this.isPropagationStopped=nu,this}return _(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Si)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Si)},persist:function(){},isPersistent:Si}),c}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=Qn(ms),Il=_({},ms,{view:0,detail:0}),ff=Qn(Il),Oc,au,To,Ic=_({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==To&&(To&&s.type==="mousemove"?(Oc=s.screenX-To.screenX,au=s.screenY-To.screenY):au=Oc=0,To=s),Oc)},movementY:function(s){return"movementY"in s?s.movementY:au}}),Kr=Qn(Ic),hf=_({},Ic,{dataTransfer:0}),Dc=Qn(hf),Ai=_({},Il,{relatedTarget:0}),su=Qn(Ai),nt=_({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),wr=Qn(nt),ua=_({},ms,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Mc=Qn(ua),xf=_({},ms,{data:0}),mf=Qn(xf),q1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kn(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=iu[s])?!!c[s]:!1}function jo(){return Kn}var Sn=_({},Il,{key:function(s){if(s.key){var c=q1[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=Ei(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Y1[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jo,charCode:function(s){return s.type==="keypress"?Ei(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ei(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Fc=Qn(Sn),Ki=_({},Ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zr=Qn(Ki),qt=_({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jo}),$1=Qn(qt),fn=_({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),qi=Qn(fn),Dl=_({},Ic,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Z1=Qn(Dl),Bs=_({},ms,{newState:0,oldState:0}),lu=Qn(Bs),gf=[9,13,27,32],Ro=dn&&"CompositionEvent"in window,Ml=null;dn&&"documentMode"in document&&(Ml=document.documentMode);var pf=dn&&"TextEvent"in window&&!Ml,bf=dn&&(!Ro||Ml&&8<Ml&&11>=Ml),Yi=" ",Lc=!1;function wf(s,c){switch(s){case"keyup":return gf.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ll=!1;function Ni(s,c){switch(s){case"compositionend":return Fl(c);case"keypress":return c.which!==32?null:(Lc=!0,Yi);case"textInput":return s=c.data,s===Yi&&Lc?null:s;default:return null}}function Bc(s,c){if(Ll)return s==="compositionend"||!Ro&&wf(s,c)?(s=Ol(),Rc=oi=li=null,Ll=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return bf&&c.locale!=="ko"?null:c.data;default:return null}}var Qa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ou(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!Qa[s.type]:c==="textarea"}function gs(s,c,x,v){gn?Ls?Ls.push(v):Ls=[v]:gn=v,c=ch(c,"onChange"),0<c.length&&(x=new ca("onChange","change",null,x,v),s.push({event:x,listeners:c}))}var Oo=null,$i=null;function J1(s){Qw(s,0)}function Io(s){var c=ht(s);if(Xr(c))return s}function ps(s,c){if(s==="change")return c}var vf=!1;if(dn){var Do;if(dn){var Zi="oninput"in document;if(!Zi){var Tr=document.createElement("div");Tr.setAttribute("oninput","return;"),Zi=typeof Tr.oninput=="function"}Do=Zi}else Do=!1;vf=Do&&(!document.documentMode||9<document.documentMode)}function Mo(){Oo&&(Oo.detachEvent("onpropertychange",ee),$i=Oo=null)}function ee(s){if(s.propertyName==="value"&&Io($i)){var c=[];gs(c,$i,s,tu(s)),df(J1,c)}}function l(s,c,x){s==="focusin"?(Mo(),Oo=c,$i=x,Oo.attachEvent("onpropertychange",ee)):s==="focusout"&&Mo()}function d(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Io($i)}function h(s,c){if(s==="click")return Io(c)}function p(s,c){if(s==="input"||s==="change")return Io(c)}function b(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var y=typeof Object.is=="function"?Object.is:b;function S(s,c){if(y(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var x=Object.keys(s),v=Object.keys(c);if(x.length!==v.length)return!1;for(v=0;v<x.length;v++){var T=x[v];if(!Ee.call(c,T)||!y(s[T],c[T]))return!1}return!0}function j(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function M(s,c){var x=j(s);s=0;for(var v;x;){if(x.nodeType===3){if(v=s+x.textContent.length,s<=c&&v>=c)return{node:x,offset:c-s};s=v}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=j(x)}}function G(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?G(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function te(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=nr(s.document);c instanceof s.HTMLIFrameElement;){try{var x=typeof c.contentWindow.location.href=="string"}catch{x=!1}if(x)s=c.contentWindow;else break;c=nr(s.document)}return c}function se(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var ke=dn&&"documentMode"in document&&11>=document.documentMode,Ce=null,Re=null,Ge=null,rt=!1;function Et(s,c,x){var v=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;rt||Ce==null||Ce!==nr(v)||(v=Ce,"selectionStart"in v&&se(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ge&&S(Ge,v)||(Ge=v,v=ch(Re,"onSelect"),0<v.length&&(c=new ca("onSelect","select",null,c,x),s.push({event:c,listeners:v}),c.target=Ce)))}function _t(s,c){var x={};return x[s.toLowerCase()]=c.toLowerCase(),x["Webkit"+s]="webkit"+c,x["Moz"+s]="moz"+c,x}var yt={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionrun:_t("Transition","TransitionRun"),transitionstart:_t("Transition","TransitionStart"),transitioncancel:_t("Transition","TransitionCancel"),transitionend:_t("Transition","TransitionEnd")},kr={},lr={};dn&&(lr=document.createElement("div").style,"AnimationEvent"in window||(delete yt.animationend.animation,delete yt.animationiteration.animation,delete yt.animationstart.animation),"TransitionEvent"in window||delete yt.transitionend.transition);function Fn(s){if(kr[s])return kr[s];if(!yt[s])return s;var c=yt[s],x;for(x in c)if(c.hasOwnProperty(x)&&x in lr)return kr[s]=c[x];return s}var es=Fn("animationend"),_a=Fn("animationiteration"),Jr=Fn("animationstart"),da=Fn("transitionrun"),Xa=Fn("transitionstart"),Bl=Fn("transitioncancel"),Ji=Fn("transitionend"),yf=new Map,cu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cu.push("scrollEnd");function ci(s,c){yf.set(s,c),$t(c,[s])}var _f=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Ps=[],Pc=0,Q1=0;function kf(){for(var s=Pc,c=Q1=Pc=0;c<s;){var x=Ps[c];Ps[c++]=null;var v=Ps[c];Ps[c++]=null;var T=Ps[c];Ps[c++]=null;var R=Ps[c];if(Ps[c++]=null,v!==null&&T!==null){var K=v.pending;K===null?T.next=T:(T.next=K.next,K.next=T),v.pending=T}R!==0&&D2(x,T,R)}}function Ef(s,c,x,v){Ps[Pc++]=s,Ps[Pc++]=c,Ps[Pc++]=x,Ps[Pc++]=v,Q1|=v,s.lanes|=v,s=s.alternate,s!==null&&(s.lanes|=v)}function ex(s,c,x,v){return Ef(s,c,x,v),Sf(s)}function Fo(s,c){return Ef(s,null,null,c),Sf(s)}function D2(s,c,x){s.lanes|=x;var v=s.alternate;v!==null&&(v.lanes|=x);for(var T=!1,R=s.return;R!==null;)R.childLanes|=x,v=R.alternate,v!==null&&(v.childLanes|=x),R.tag===22&&(s=R.stateNode,s===null||s._visibility&1||(T=!0)),s=R,R=R.return;return s.tag===3?(R=s.stateNode,T&&c!==null&&(T=31-Dt(x),s=R.hiddenUpdates,v=s[T],v===null?s[T]=[c]:v.push(c),c.lane=x|536870912),R):null}function Sf(s){if(50<Ru)throw Ru=0,cm=null,Error(n(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var Uc={};function JS(s,c,x,v){this.tag=s,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(s,c,x,v){return new JS(s,c,x,v)}function tx(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qi(s,c){var x=s.alternate;return x===null?(x=bs(s.tag,c,s.key,s.mode),x.elementType=s.elementType,x.type=s.type,x.stateNode=s.stateNode,x.alternate=s,s.alternate=x):(x.pendingProps=c,x.type=s.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=s.flags&65011712,x.childLanes=s.childLanes,x.lanes=s.lanes,x.child=s.child,x.memoizedProps=s.memoizedProps,x.memoizedState=s.memoizedState,x.updateQueue=s.updateQueue,c=s.dependencies,x.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},x.sibling=s.sibling,x.index=s.index,x.ref=s.ref,x.refCleanup=s.refCleanup,x}function M2(s,c){s.flags&=65011714;var x=s.alternate;return x===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=x.childLanes,s.lanes=x.lanes,s.child=x.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=x.memoizedProps,s.memoizedState=x.memoizedState,s.updateQueue=x.updateQueue,s.type=x.type,c=x.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function Af(s,c,x,v,T,R){var K=0;if(v=s,typeof s=="function")tx(s)&&(K=1);else if(typeof s=="string")K=n6(s,x,P.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case H:return s=bs(31,x,c,T),s.elementType=H,s.lanes=R,s;case A:return Lo(x.children,T,R,c);case C:K=8,T|=24;break;case I:return s=bs(12,x,c,T|2),s.elementType=I,s.lanes=R,s;case U:return s=bs(13,x,c,T),s.elementType=U,s.lanes=R,s;case X:return s=bs(19,x,c,T),s.elementType=X,s.lanes=R,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:K=10;break e;case D:K=9;break e;case B:K=11;break e;case F:K=14;break e;case Y:K=16,v=null;break e}K=29,x=Error(n(130,s===null?"null":typeof s,"")),v=null}return c=bs(K,x,c,T),c.elementType=s,c.type=v,c.lanes=R,c}function Lo(s,c,x,v){return s=bs(7,s,v,c),s.lanes=x,s}function rx(s,c,x){return s=bs(6,s,null,c),s.lanes=x,s}function F2(s){var c=bs(18,null,null,0);return c.stateNode=s,c}function nx(s,c,x){return c=bs(4,s.children!==null?s.children:[],s.key,c),c.lanes=x,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var L2=new WeakMap;function Us(s,c){if(typeof s=="object"&&s!==null){var x=L2.get(s);return x!==void 0?x:(c={value:s,source:c,stack:de(c)},L2.set(s,c),c)}return{value:s,source:c,stack:de(c)}}var zc=[],Hc=0,Nf=null,uu=0,zs=[],Hs=0,Pl=null,Ci=1,Ti="";function el(s,c){zc[Hc++]=uu,zc[Hc++]=Nf,Nf=s,uu=c}function B2(s,c,x){zs[Hs++]=Ci,zs[Hs++]=Ti,zs[Hs++]=Pl,Pl=s;var v=Ci;s=Ti;var T=32-Dt(v)-1;v&=~(1<<T),x+=1;var R=32-Dt(c)+T;if(30<R){var K=T-T%5;R=(v&(1<<K)-1).toString(32),v>>=K,T-=K,Ci=1<<32-Dt(c)+T|x<<T|v,Ti=R+s}else Ci=1<<R|x<<T|v,Ti=s}function ax(s){s.return!==null&&(el(s,1),B2(s,1,0))}function sx(s){for(;s===Nf;)Nf=zc[--Hc],zc[Hc]=null,uu=zc[--Hc],zc[Hc]=null;for(;s===Pl;)Pl=zs[--Hs],zs[Hs]=null,Ti=zs[--Hs],zs[Hs]=null,Ci=zs[--Hs],zs[Hs]=null}function P2(s,c){zs[Hs++]=Ci,zs[Hs++]=Ti,zs[Hs++]=Pl,Ci=c.id,Ti=c.overflow,Pl=s}var ka=null,pn=null,Ir=!1,Ul=null,Vs=!1,ix=Error(n(519));function zl(s){var c=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw du(Us(c,s)),ix}function U2(s){var c=s.stateNode,x=s.type,v=s.memoizedProps;switch(c[me]=s,c[we]=v,x){case"dialog":Cr("cancel",c),Cr("close",c);break;case"iframe":case"object":case"embed":Cr("load",c);break;case"video":case"audio":for(x=0;x<Iu.length;x++)Cr(Iu[x],c);break;case"source":Cr("error",c);break;case"img":case"image":case"link":Cr("error",c),Cr("load",c);break;case"details":Cr("toggle",c);break;case"input":Cr("invalid",c),$e(c,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":Cr("invalid",c);break;case"textarea":Cr("invalid",c),Ga(c,v.value,v.defaultValue,v.children)}x=v.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||c.textContent===""+x||v.suppressHydrationWarning===!0||nv(c.textContent,x)?(v.popover!=null&&(Cr("beforetoggle",c),Cr("toggle",c)),v.onScroll!=null&&Cr("scroll",c),v.onScrollEnd!=null&&Cr("scrollend",c),v.onClick!=null&&(c.onclick=Ja),c=!0):c=!1,c||zl(s,!0)}function z2(s){for(ka=s.return;ka;)switch(ka.tag){case 5:case 31:case 13:Vs=!1;return;case 27:case 3:Vs=!0;return;default:ka=ka.return}}function Vc(s){if(s!==ka)return!1;if(!Ir)return z2(s),Ir=!0,!1;var c=s.tag,x;if((x=c!==3&&c!==27)&&((x=c===5)&&(x=s.type,x=!(x!=="form"&&x!=="button")||Em(s.type,s.memoizedProps)),x=!x),x&&pn&&zl(s),z2(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));pn=fv(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));pn=fv(s)}else c===27?(c=pn,to(s.type)?(s=Tm,Tm=null,pn=s):pn=c):pn=ka?Ws(s.stateNode.nextSibling):null;return!0}function Bo(){pn=ka=null,Ir=!1}function lx(){var s=Ul;return s!==null&&(as===null?as=s:as.push.apply(as,s),Ul=null),s}function du(s){Ul===null?Ul=[s]:Ul.push(s)}var ox=re(null),Po=null,tl=null;function Hl(s,c,x){q(ox,c._currentValue),c._currentValue=x}function rl(s){s._currentValue=ox.current,L(ox)}function cx(s,c,x){for(;s!==null;){var v=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),s===x)break;s=s.return}}function ux(s,c,x,v){var T=s.child;for(T!==null&&(T.return=s);T!==null;){var R=T.dependencies;if(R!==null){var K=T.child;R=R.firstContext;e:for(;R!==null;){var oe=R;R=T;for(var Ae=0;Ae<c.length;Ae++)if(oe.context===c[Ae]){R.lanes|=x,oe=R.alternate,oe!==null&&(oe.lanes|=x),cx(R.return,x,s),v||(K=null);break e}R=oe.next}}else if(T.tag===18){if(K=T.return,K===null)throw Error(n(341));K.lanes|=x,R=K.alternate,R!==null&&(R.lanes|=x),cx(K,x,s),K=null}else K=T.child;if(K!==null)K.return=T;else for(K=T;K!==null;){if(K===s){K=null;break}if(T=K.sibling,T!==null){T.return=K.return,K=T;break}K=K.return}T=K}}function Gc(s,c,x,v){s=null;for(var T=c,R=!1;T!==null;){if(!R){if((T.flags&524288)!==0)R=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var K=T.alternate;if(K===null)throw Error(n(387));if(K=K.memoizedProps,K!==null){var oe=T.type;y(T.pendingProps.value,K.value)||(s!==null?s.push(oe):s=[oe])}}else if(T===Le.current){if(K=T.alternate,K===null)throw Error(n(387));K.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(s!==null?s.push(Bu):s=[Bu])}T=T.return}s!==null&&ux(c,s,x,v),c.flags|=262144}function Cf(s){for(s=s.firstContext;s!==null;){if(!y(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Uo(s){Po=s,tl=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ea(s){return H2(Po,s)}function Tf(s,c){return Po===null&&Uo(s),H2(s,c)}function H2(s,c){var x=c._currentValue;if(c={context:c,memoizedValue:x,next:null},tl===null){if(s===null)throw Error(n(308));tl=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else tl=tl.next=c;return x}var QS=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(x,v){s.push(v)}};this.abort=function(){c.aborted=!0,s.forEach(function(x){return x()})}},e5=e.unstable_scheduleCallback,t5=e.unstable_NormalPriority,ea={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dx(){return{controller:new QS,data:new Map,refCount:0}}function fu(s){s.refCount--,s.refCount===0&&e5(t5,function(){s.controller.abort()})}var hu=null,fx=0,Wc=0,Xc=null;function r5(s,c){if(hu===null){var x=hu=[];fx=0,Wc=mm(),Xc={status:"pending",value:void 0,then:function(v){x.push(v)}}}return fx++,c.then(V2,V2),c}function V2(){if(--fx===0&&hu!==null){Xc!==null&&(Xc.status="fulfilled");var s=hu;hu=null,Wc=0,Xc=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function n5(s,c){var x=[],v={status:"pending",value:null,reason:null,then:function(T){x.push(T)}};return s.then(function(){v.status="fulfilled",v.value=c;for(var T=0;T<x.length;T++)(0,x[T])(c)},function(T){for(v.status="rejected",v.reason=T,T=0;T<x.length;T++)(0,x[T])(void 0)}),v}var G2=be.S;be.S=function(s,c){Nw=Ke(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&r5(s,c),G2!==null&&G2(s,c)};var zo=re(null);function hx(){var s=zo.current;return s!==null?s:hn.pooledCache}function jf(s,c){c===null?q(zo,zo.current):q(zo,c.pool)}function W2(){var s=hx();return s===null?null:{parent:ea._currentValue,pool:s}}var Kc=Error(n(460)),xx=Error(n(474)),Rf=Error(n(542)),Of={then:function(){}};function X2(s){return s=s.status,s==="fulfilled"||s==="rejected"}function K2(s,c,x){switch(x=s[x],x===void 0?s.push(c):x!==c&&(c.then(Ja,Ja),c=x),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,Y2(s),s;default:if(typeof c.status=="string")c.then(Ja,Ja);else{if(s=hn,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=c,s.status="pending",s.then(function(v){if(c.status==="pending"){var T=c;T.status="fulfilled",T.value=v}},function(v){if(c.status==="pending"){var T=c;T.status="rejected",T.reason=v}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,Y2(s),s}throw Vo=c,Kc}}function Ho(s){try{var c=s._init;return c(s._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(Vo=x,Kc):x}}var Vo=null;function q2(){if(Vo===null)throw Error(n(459));var s=Vo;return Vo=null,s}function Y2(s){if(s===Kc||s===Rf)throw Error(n(483))}var qc=null,xu=0;function If(s){var c=xu;return xu+=1,qc===null&&(qc=[]),K2(qc,s,c)}function mu(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function Df(s,c){throw c.$$typeof===E?Error(n(525)):(s=Object.prototype.toString.call(c),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function $2(s){function c(Ue,Oe){if(s){var Je=Ue.deletions;Je===null?(Ue.deletions=[Oe],Ue.flags|=16):Je.push(Oe)}}function x(Ue,Oe){if(!s)return null;for(;Oe!==null;)c(Ue,Oe),Oe=Oe.sibling;return null}function v(Ue){for(var Oe=new Map;Ue!==null;)Ue.key!==null?Oe.set(Ue.key,Ue):Oe.set(Ue.index,Ue),Ue=Ue.sibling;return Oe}function T(Ue,Oe){return Ue=Qi(Ue,Oe),Ue.index=0,Ue.sibling=null,Ue}function R(Ue,Oe,Je){return Ue.index=Je,s?(Je=Ue.alternate,Je!==null?(Je=Je.index,Je<Oe?(Ue.flags|=67108866,Oe):Je):(Ue.flags|=67108866,Oe)):(Ue.flags|=1048576,Oe)}function K(Ue){return s&&Ue.alternate===null&&(Ue.flags|=67108866),Ue}function oe(Ue,Oe,Je,pt){return Oe===null||Oe.tag!==6?(Oe=rx(Je,Ue.mode,pt),Oe.return=Ue,Oe):(Oe=T(Oe,Je),Oe.return=Ue,Oe)}function Ae(Ue,Oe,Je,pt){var Gt=Je.type;return Gt===A?xt(Ue,Oe,Je.props.children,pt,Je.key):Oe!==null&&(Oe.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===Y&&Ho(Gt)===Oe.type)?(Oe=T(Oe,Je.props),mu(Oe,Je),Oe.return=Ue,Oe):(Oe=Af(Je.type,Je.key,Je.props,null,Ue.mode,pt),mu(Oe,Je),Oe.return=Ue,Oe)}function Qe(Ue,Oe,Je,pt){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Je.containerInfo||Oe.stateNode.implementation!==Je.implementation?(Oe=nx(Je,Ue.mode,pt),Oe.return=Ue,Oe):(Oe=T(Oe,Je.children||[]),Oe.return=Ue,Oe)}function xt(Ue,Oe,Je,pt,Gt){return Oe===null||Oe.tag!==7?(Oe=Lo(Je,Ue.mode,pt,Gt),Oe.return=Ue,Oe):(Oe=T(Oe,Je),Oe.return=Ue,Oe)}function bt(Ue,Oe,Je){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=rx(""+Oe,Ue.mode,Je),Oe.return=Ue,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case k:return Je=Af(Oe.type,Oe.key,Oe.props,null,Ue.mode,Je),mu(Je,Oe),Je.return=Ue,Je;case N:return Oe=nx(Oe,Ue.mode,Je),Oe.return=Ue,Oe;case Y:return Oe=Ho(Oe),bt(Ue,Oe,Je)}if(ne(Oe)||V(Oe))return Oe=Lo(Oe,Ue.mode,Je,null),Oe.return=Ue,Oe;if(typeof Oe.then=="function")return bt(Ue,If(Oe),Je);if(Oe.$$typeof===O)return bt(Ue,Tf(Ue,Oe),Je);Df(Ue,Oe)}return null}function tt(Ue,Oe,Je,pt){var Gt=Oe!==null?Oe.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Gt!==null?null:oe(Ue,Oe,""+Je,pt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case k:return Je.key===Gt?Ae(Ue,Oe,Je,pt):null;case N:return Je.key===Gt?Qe(Ue,Oe,Je,pt):null;case Y:return Je=Ho(Je),tt(Ue,Oe,Je,pt)}if(ne(Je)||V(Je))return Gt!==null?null:xt(Ue,Oe,Je,pt,null);if(typeof Je.then=="function")return tt(Ue,Oe,If(Je),pt);if(Je.$$typeof===O)return tt(Ue,Oe,Tf(Ue,Je),pt);Df(Ue,Je)}return null}function lt(Ue,Oe,Je,pt,Gt){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return Ue=Ue.get(Je)||null,oe(Oe,Ue,""+pt,Gt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case k:return Ue=Ue.get(pt.key===null?Je:pt.key)||null,Ae(Oe,Ue,pt,Gt);case N:return Ue=Ue.get(pt.key===null?Je:pt.key)||null,Qe(Oe,Ue,pt,Gt);case Y:return pt=Ho(pt),lt(Ue,Oe,Je,pt,Gt)}if(ne(pt)||V(pt))return Ue=Ue.get(Je)||null,xt(Oe,Ue,pt,Gt,null);if(typeof pt.then=="function")return lt(Ue,Oe,Je,If(pt),Gt);if(pt.$$typeof===O)return lt(Ue,Oe,Je,Tf(Oe,pt),Gt);Df(Oe,pt)}return null}function Lt(Ue,Oe,Je,pt){for(var Gt=null,Hr=null,Ut=Oe,vr=Oe=0,Rr=null;Ut!==null&&vr<Je.length;vr++){Ut.index>vr?(Rr=Ut,Ut=null):Rr=Ut.sibling;var Vr=tt(Ue,Ut,Je[vr],pt);if(Vr===null){Ut===null&&(Ut=Rr);break}s&&Ut&&Vr.alternate===null&&c(Ue,Ut),Oe=R(Vr,Oe,vr),Hr===null?Gt=Vr:Hr.sibling=Vr,Hr=Vr,Ut=Rr}if(vr===Je.length)return x(Ue,Ut),Ir&&el(Ue,vr),Gt;if(Ut===null){for(;vr<Je.length;vr++)Ut=bt(Ue,Je[vr],pt),Ut!==null&&(Oe=R(Ut,Oe,vr),Hr===null?Gt=Ut:Hr.sibling=Ut,Hr=Ut);return Ir&&el(Ue,vr),Gt}for(Ut=v(Ut);vr<Je.length;vr++)Rr=lt(Ut,Ue,vr,Je[vr],pt),Rr!==null&&(s&&Rr.alternate!==null&&Ut.delete(Rr.key===null?vr:Rr.key),Oe=R(Rr,Oe,vr),Hr===null?Gt=Rr:Hr.sibling=Rr,Hr=Rr);return s&&Ut.forEach(function(io){return c(Ue,io)}),Ir&&el(Ue,vr),Gt}function Zt(Ue,Oe,Je,pt){if(Je==null)throw Error(n(151));for(var Gt=null,Hr=null,Ut=Oe,vr=Oe=0,Rr=null,Vr=Je.next();Ut!==null&&!Vr.done;vr++,Vr=Je.next()){Ut.index>vr?(Rr=Ut,Ut=null):Rr=Ut.sibling;var io=tt(Ue,Ut,Vr.value,pt);if(io===null){Ut===null&&(Ut=Rr);break}s&&Ut&&io.alternate===null&&c(Ue,Ut),Oe=R(io,Oe,vr),Hr===null?Gt=io:Hr.sibling=io,Hr=io,Ut=Rr}if(Vr.done)return x(Ue,Ut),Ir&&el(Ue,vr),Gt;if(Ut===null){for(;!Vr.done;vr++,Vr=Je.next())Vr=bt(Ue,Vr.value,pt),Vr!==null&&(Oe=R(Vr,Oe,vr),Hr===null?Gt=Vr:Hr.sibling=Vr,Hr=Vr);return Ir&&el(Ue,vr),Gt}for(Ut=v(Ut);!Vr.done;vr++,Vr=Je.next())Vr=lt(Ut,Ue,vr,Vr.value,pt),Vr!==null&&(s&&Vr.alternate!==null&&Ut.delete(Vr.key===null?vr:Vr.key),Oe=R(Vr,Oe,vr),Hr===null?Gt=Vr:Hr.sibling=Vr,Hr=Vr);return s&&Ut.forEach(function(x6){return c(Ue,x6)}),Ir&&el(Ue,vr),Gt}function on(Ue,Oe,Je,pt){if(typeof Je=="object"&&Je!==null&&Je.type===A&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case k:e:{for(var Gt=Je.key;Oe!==null;){if(Oe.key===Gt){if(Gt=Je.type,Gt===A){if(Oe.tag===7){x(Ue,Oe.sibling),pt=T(Oe,Je.props.children),pt.return=Ue,Ue=pt;break e}}else if(Oe.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===Y&&Ho(Gt)===Oe.type){x(Ue,Oe.sibling),pt=T(Oe,Je.props),mu(pt,Je),pt.return=Ue,Ue=pt;break e}x(Ue,Oe);break}else c(Ue,Oe);Oe=Oe.sibling}Je.type===A?(pt=Lo(Je.props.children,Ue.mode,pt,Je.key),pt.return=Ue,Ue=pt):(pt=Af(Je.type,Je.key,Je.props,null,Ue.mode,pt),mu(pt,Je),pt.return=Ue,Ue=pt)}return K(Ue);case N:e:{for(Gt=Je.key;Oe!==null;){if(Oe.key===Gt)if(Oe.tag===4&&Oe.stateNode.containerInfo===Je.containerInfo&&Oe.stateNode.implementation===Je.implementation){x(Ue,Oe.sibling),pt=T(Oe,Je.children||[]),pt.return=Ue,Ue=pt;break e}else{x(Ue,Oe);break}else c(Ue,Oe);Oe=Oe.sibling}pt=nx(Je,Ue.mode,pt),pt.return=Ue,Ue=pt}return K(Ue);case Y:return Je=Ho(Je),on(Ue,Oe,Je,pt)}if(ne(Je))return Lt(Ue,Oe,Je,pt);if(V(Je)){if(Gt=V(Je),typeof Gt!="function")throw Error(n(150));return Je=Gt.call(Je),Zt(Ue,Oe,Je,pt)}if(typeof Je.then=="function")return on(Ue,Oe,If(Je),pt);if(Je.$$typeof===O)return on(Ue,Oe,Tf(Ue,Je),pt);Df(Ue,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint"?(Je=""+Je,Oe!==null&&Oe.tag===6?(x(Ue,Oe.sibling),pt=T(Oe,Je),pt.return=Ue,Ue=pt):(x(Ue,Oe),pt=rx(Je,Ue.mode,pt),pt.return=Ue,Ue=pt),K(Ue)):x(Ue,Oe)}return function(Ue,Oe,Je,pt){try{xu=0;var Gt=on(Ue,Oe,Je,pt);return qc=null,Gt}catch(Ut){if(Ut===Kc||Ut===Rf)throw Ut;var Hr=bs(29,Ut,null,Ue.mode);return Hr.lanes=pt,Hr.return=Ue,Hr}}}var Go=$2(!0),Z2=$2(!1),Vl=!1;function mx(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gx(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Gl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Wl(s,c,x){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(qr&2)!==0){var T=v.pending;return T===null?c.next=c:(c.next=T.next,T.next=c),v.pending=c,c=Sf(s),D2(s,null,x),c}return Ef(s,v,c,x),Sf(s)}function gu(s,c,x){if(c=c.updateQueue,c!==null&&(c=c.shared,(x&4194048)!==0)){var v=c.lanes;v&=s.pendingLanes,x|=v,c.lanes=x,Fr(s,x)}}function px(s,c){var x=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,x===v)){var T=null,R=null;if(x=x.firstBaseUpdate,x!==null){do{var K={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};R===null?T=R=K:R=R.next=K,x=x.next}while(x!==null);R===null?T=R=c:R=R.next=c}else T=R=c;x={baseState:v.baseState,firstBaseUpdate:T,lastBaseUpdate:R,shared:v.shared,callbacks:v.callbacks},s.updateQueue=x;return}s=x.lastBaseUpdate,s===null?x.firstBaseUpdate=c:s.next=c,x.lastBaseUpdate=c}var bx=!1;function pu(){if(bx){var s=Xc;if(s!==null)throw s}}function bu(s,c,x,v){bx=!1;var T=s.updateQueue;Vl=!1;var R=T.firstBaseUpdate,K=T.lastBaseUpdate,oe=T.shared.pending;if(oe!==null){T.shared.pending=null;var Ae=oe,Qe=Ae.next;Ae.next=null,K===null?R=Qe:K.next=Qe,K=Ae;var xt=s.alternate;xt!==null&&(xt=xt.updateQueue,oe=xt.lastBaseUpdate,oe!==K&&(oe===null?xt.firstBaseUpdate=Qe:oe.next=Qe,xt.lastBaseUpdate=Ae))}if(R!==null){var bt=T.baseState;K=0,xt=Qe=Ae=null,oe=R;do{var tt=oe.lane&-536870913,lt=tt!==oe.lane;if(lt?(jr&tt)===tt:(v&tt)===tt){tt!==0&&tt===Wc&&(bx=!0),xt!==null&&(xt=xt.next={lane:0,tag:oe.tag,payload:oe.payload,callback:null,next:null});e:{var Lt=s,Zt=oe;tt=c;var on=x;switch(Zt.tag){case 1:if(Lt=Zt.payload,typeof Lt=="function"){bt=Lt.call(on,bt,tt);break e}bt=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Zt.payload,tt=typeof Lt=="function"?Lt.call(on,bt,tt):Lt,tt==null)break e;bt=_({},bt,tt);break e;case 2:Vl=!0}}tt=oe.callback,tt!==null&&(s.flags|=64,lt&&(s.flags|=8192),lt=T.callbacks,lt===null?T.callbacks=[tt]:lt.push(tt))}else lt={lane:tt,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},xt===null?(Qe=xt=lt,Ae=bt):xt=xt.next=lt,K|=tt;if(oe=oe.next,oe===null){if(oe=T.shared.pending,oe===null)break;lt=oe,oe=lt.next,lt.next=null,T.lastBaseUpdate=lt,T.shared.pending=null}}while(!0);xt===null&&(Ae=bt),T.baseState=Ae,T.firstBaseUpdate=Qe,T.lastBaseUpdate=xt,R===null&&(T.shared.lanes=0),$l|=K,s.lanes=K,s.memoizedState=bt}}function J2(s,c){if(typeof s!="function")throw Error(n(191,s));s.call(c)}function Q2(s,c){var x=s.callbacks;if(x!==null)for(s.callbacks=null,s=0;s<x.length;s++)J2(x[s],c)}var Yc=re(null),Mf=re(0);function eb(s,c){s=dl,q(Mf,s),q(Yc,c),dl=s|c.baseLanes}function wx(){q(Mf,dl),q(Yc,Yc.current)}function vx(){dl=Mf.current,L(Yc),L(Mf)}var ws=re(null),Gs=null;function Xl(s){var c=s.alternate;q(qn,qn.current&1),q(ws,s),Gs===null&&(c===null||Yc.current!==null||c.memoizedState!==null)&&(Gs=s)}function yx(s){q(qn,qn.current),q(ws,s),Gs===null&&(Gs=s)}function tb(s){s.tag===22?(q(qn,qn.current),q(ws,s),Gs===null&&(Gs=s)):Kl()}function Kl(){q(qn,qn.current),q(ws,ws.current)}function vs(s){L(ws),Gs===s&&(Gs=null),L(qn)}var qn=re(0);function Ff(s){for(var c=s;c!==null;){if(c.tag===13){var x=c.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Nm(x)||Cm(x)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var nl=0,xr=null,sn=null,ta=null,Lf=!1,$c=!1,Wo=!1,Bf=0,wu=0,Zc=null,a5=0;function Ln(){throw Error(n(321))}function _x(s,c){if(c===null)return!1;for(var x=0;x<c.length&&x<s.length;x++)if(!y(s[x],c[x]))return!1;return!0}function kx(s,c,x,v,T,R){return nl=R,xr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,be.H=s===null||s.memoizedState===null?Bb:Bx,Wo=!1,R=x(v,T),Wo=!1,$c&&(R=nb(c,x,v,T)),rb(s),R}function rb(s){be.H=_u;var c=sn!==null&&sn.next!==null;if(nl=0,ta=sn=xr=null,Lf=!1,wu=0,Zc=null,c)throw Error(n(300));s===null||ra||(s=s.dependencies,s!==null&&Cf(s)&&(ra=!0))}function nb(s,c,x,v){xr=s;var T=0;do{if($c&&(Zc=null),wu=0,$c=!1,25<=T)throw Error(n(301));if(T+=1,ta=sn=null,s.updateQueue!=null){var R=s.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}be.H=Pb,R=c(x,v)}while($c);return R}function s5(){var s=be.H,c=s.useState()[0];return c=typeof c.then=="function"?vu(c):c,s=s.useState()[0],(sn!==null?sn.memoizedState:null)!==s&&(xr.flags|=1024),c}function Ex(){var s=Bf!==0;return Bf=0,s}function Sx(s,c,x){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~x}function Ax(s){if(Lf){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}Lf=!1}nl=0,ta=sn=xr=null,$c=!1,wu=Bf=0,Zc=null}function Ka(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ta===null?xr.memoizedState=ta=s:ta=ta.next=s,ta}function Yn(){if(sn===null){var s=xr.alternate;s=s!==null?s.memoizedState:null}else s=sn.next;var c=ta===null?xr.memoizedState:ta.next;if(c!==null)ta=c,sn=s;else{if(s===null)throw xr.alternate===null?Error(n(467)):Error(n(310));sn=s,s={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},ta===null?xr.memoizedState=ta=s:ta=ta.next=s}return ta}function Pf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vu(s){var c=wu;return wu+=1,Zc===null&&(Zc=[]),s=K2(Zc,s,c),c=xr,(ta===null?c.memoizedState:ta.next)===null&&(c=c.alternate,be.H=c===null||c.memoizedState===null?Bb:Bx),s}function Uf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return vu(s);if(s.$$typeof===O)return Ea(s)}throw Error(n(438,String(s)))}function Nx(s){var c=null,x=xr.updateQueue;if(x!==null&&(c=x.memoCache),c==null){var v=xr.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(c={data:v.data.map(function(T){return T.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),x===null&&(x=Pf(),xr.updateQueue=x),x.memoCache=c,x=c.data[c.index],x===void 0)for(x=c.data[c.index]=Array(s),v=0;v<s;v++)x[v]=ce;return c.index++,x}function al(s,c){return typeof c=="function"?c(s):c}function zf(s){var c=Yn();return Cx(c,sn,s)}function Cx(s,c,x){var v=s.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=x;var T=s.baseQueue,R=v.pending;if(R!==null){if(T!==null){var K=T.next;T.next=R.next,R.next=K}c.baseQueue=T=R,v.pending=null}if(R=s.baseState,T===null)s.memoizedState=R;else{c=T.next;var oe=K=null,Ae=null,Qe=c,xt=!1;do{var bt=Qe.lane&-536870913;if(bt!==Qe.lane?(jr&bt)===bt:(nl&bt)===bt){var tt=Qe.revertLane;if(tt===0)Ae!==null&&(Ae=Ae.next={lane:0,revertLane:0,gesture:null,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),bt===Wc&&(xt=!0);else if((nl&tt)===tt){Qe=Qe.next,tt===Wc&&(xt=!0);continue}else bt={lane:0,revertLane:Qe.revertLane,gesture:null,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},Ae===null?(oe=Ae=bt,K=R):Ae=Ae.next=bt,xr.lanes|=tt,$l|=tt;bt=Qe.action,Wo&&x(R,bt),R=Qe.hasEagerState?Qe.eagerState:x(R,bt)}else tt={lane:bt,revertLane:Qe.revertLane,gesture:Qe.gesture,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},Ae===null?(oe=Ae=tt,K=R):Ae=Ae.next=tt,xr.lanes|=bt,$l|=bt;Qe=Qe.next}while(Qe!==null&&Qe!==c);if(Ae===null?K=R:Ae.next=oe,!y(R,s.memoizedState)&&(ra=!0,xt&&(x=Xc,x!==null)))throw x;s.memoizedState=R,s.baseState=K,s.baseQueue=Ae,v.lastRenderedState=R}return T===null&&(v.lanes=0),[s.memoizedState,v.dispatch]}function Tx(s){var c=Yn(),x=c.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=s;var v=x.dispatch,T=x.pending,R=c.memoizedState;if(T!==null){x.pending=null;var K=T=T.next;do R=s(R,K.action),K=K.next;while(K!==T);y(R,c.memoizedState)||(ra=!0),c.memoizedState=R,c.baseQueue===null&&(c.baseState=R),x.lastRenderedState=R}return[R,v]}function ab(s,c,x){var v=xr,T=Yn(),R=Ir;if(R){if(x===void 0)throw Error(n(407));x=x()}else x=c();var K=!y((sn||T).memoizedState,x);if(K&&(T.memoizedState=x,ra=!0),T=T.queue,Ox(lb.bind(null,v,T,s),[s]),T.getSnapshot!==c||K||ta!==null&&ta.memoizedState.tag&1){if(v.flags|=2048,Jc(9,{destroy:void 0},ib.bind(null,v,T,x,c),null),hn===null)throw Error(n(349));R||(nl&127)!==0||sb(v,c,x)}return x}function sb(s,c,x){s.flags|=16384,s={getSnapshot:c,value:x},c=xr.updateQueue,c===null?(c=Pf(),xr.updateQueue=c,c.stores=[s]):(x=c.stores,x===null?c.stores=[s]:x.push(s))}function ib(s,c,x,v){c.value=x,c.getSnapshot=v,ob(c)&&cb(s)}function lb(s,c,x){return x(function(){ob(c)&&cb(s)})}function ob(s){var c=s.getSnapshot;s=s.value;try{var x=c();return!y(s,x)}catch{return!0}}function cb(s){var c=Fo(s,2);c!==null&&ss(c,s,2)}function jx(s){var c=Ka();if(typeof s=="function"){var x=s;if(s=x(),Wo){Ht(!0);try{x()}finally{Ht(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:s},c}function ub(s,c,x,v){return s.baseState=x,Cx(s,sn,typeof v=="function"?v:al)}function i5(s,c,x,v,T){if(Gf(s))throw Error(n(485));if(s=c.action,s!==null){var R={payload:T,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){R.listeners.push(K)}};be.T!==null?x(!0):R.isTransition=!1,v(R),x=c.pending,x===null?(R.next=c.pending=R,db(c,R)):(R.next=x.next,c.pending=x.next=R)}}function db(s,c){var x=c.action,v=c.payload,T=s.state;if(c.isTransition){var R=be.T,K={};be.T=K;try{var oe=x(T,v),Ae=be.S;Ae!==null&&Ae(K,oe),fb(s,c,oe)}catch(Qe){Rx(s,c,Qe)}finally{R!==null&&K.types!==null&&(R.types=K.types),be.T=R}}else try{R=x(T,v),fb(s,c,R)}catch(Qe){Rx(s,c,Qe)}}function fb(s,c,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(v){hb(s,c,v)},function(v){return Rx(s,c,v)}):hb(s,c,x)}function hb(s,c,x){c.status="fulfilled",c.value=x,xb(c),s.state=x,c=s.pending,c!==null&&(x=c.next,x===c?s.pending=null:(x=x.next,c.next=x,db(s,x)))}function Rx(s,c,x){var v=s.pending;if(s.pending=null,v!==null){v=v.next;do c.status="rejected",c.reason=x,xb(c),c=c.next;while(c!==v)}s.action=null}function xb(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function mb(s,c){return c}function gb(s,c){if(Ir){var x=hn.formState;if(x!==null){e:{var v=xr;if(Ir){if(pn){t:{for(var T=pn,R=Vs;T.nodeType!==8;){if(!R){T=null;break t}if(T=Ws(T.nextSibling),T===null){T=null;break t}}R=T.data,T=R==="F!"||R==="F"?T:null}if(T){pn=Ws(T.nextSibling),v=T.data==="F!";break e}}zl(v)}v=!1}v&&(c=x[0])}}return x=Ka(),x.memoizedState=x.baseState=c,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mb,lastRenderedState:c},x.queue=v,x=Mb.bind(null,xr,v),v.dispatch=x,v=jx(!1),R=Lx.bind(null,xr,!1,v.queue),v=Ka(),T={state:c,dispatch:null,action:s,pending:null},v.queue=T,x=i5.bind(null,xr,T,R,x),T.dispatch=x,v.memoizedState=s,[c,x,!1]}function pb(s){var c=Yn();return bb(c,sn,s)}function bb(s,c,x){if(c=Cx(s,c,mb)[0],s=zf(al)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var v=vu(c)}catch(K){throw K===Kc?Rf:K}else v=c;c=Yn();var T=c.queue,R=T.dispatch;return x!==c.memoizedState&&(xr.flags|=2048,Jc(9,{destroy:void 0},l5.bind(null,T,x),null)),[v,R,s]}function l5(s,c){s.action=c}function wb(s){var c=Yn(),x=sn;if(x!==null)return bb(c,x,s);Yn(),c=c.memoizedState,x=Yn();var v=x.queue.dispatch;return x.memoizedState=s,[c,v,!1]}function Jc(s,c,x,v){return s={tag:s,create:x,deps:v,inst:c,next:null},c=xr.updateQueue,c===null&&(c=Pf(),xr.updateQueue=c),x=c.lastEffect,x===null?c.lastEffect=s.next=s:(v=x.next,x.next=s,s.next=v,c.lastEffect=s),s}function vb(){return Yn().memoizedState}function Hf(s,c,x,v){var T=Ka();xr.flags|=s,T.memoizedState=Jc(1|c,{destroy:void 0},x,v===void 0?null:v)}function Vf(s,c,x,v){var T=Yn();v=v===void 0?null:v;var R=T.memoizedState.inst;sn!==null&&v!==null&&_x(v,sn.memoizedState.deps)?T.memoizedState=Jc(c,R,x,v):(xr.flags|=s,T.memoizedState=Jc(1|c,R,x,v))}function yb(s,c){Hf(8390656,8,s,c)}function Ox(s,c){Vf(2048,8,s,c)}function o5(s){xr.flags|=4;var c=xr.updateQueue;if(c===null)c=Pf(),xr.updateQueue=c,c.events=[s];else{var x=c.events;x===null?c.events=[s]:x.push(s)}}function _b(s){var c=Yn().memoizedState;return o5({ref:c,nextImpl:s}),function(){if((qr&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}function kb(s,c){return Vf(4,2,s,c)}function Eb(s,c){return Vf(4,4,s,c)}function Sb(s,c){if(typeof c=="function"){s=s();var x=c(s);return function(){typeof x=="function"?x():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function Ab(s,c,x){x=x!=null?x.concat([s]):null,Vf(4,4,Sb.bind(null,c,s),x)}function Ix(){}function Nb(s,c){var x=Yn();c=c===void 0?null:c;var v=x.memoizedState;return c!==null&&_x(c,v[1])?v[0]:(x.memoizedState=[s,c],s)}function Cb(s,c){var x=Yn();c=c===void 0?null:c;var v=x.memoizedState;if(c!==null&&_x(c,v[1]))return v[0];if(v=s(),Wo){Ht(!0);try{s()}finally{Ht(!1)}}return x.memoizedState=[v,c],v}function Dx(s,c,x){return x===void 0||(nl&1073741824)!==0&&(jr&261930)===0?s.memoizedState=c:(s.memoizedState=x,s=Tw(),xr.lanes|=s,$l|=s,x)}function Tb(s,c,x,v){return y(x,c)?x:Yc.current!==null?(s=Dx(s,x,v),y(s,c)||(ra=!0),s):(nl&42)===0||(nl&1073741824)!==0&&(jr&261930)===0?(ra=!0,s.memoizedState=x):(s=Tw(),xr.lanes|=s,$l|=s,c)}function jb(s,c,x,v,T){var R=fe.p;fe.p=R!==0&&8>R?R:8;var K=be.T,oe={};be.T=oe,Lx(s,!1,c,x);try{var Ae=T(),Qe=be.S;if(Qe!==null&&Qe(oe,Ae),Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var xt=n5(Ae,v);yu(s,c,xt,ks(s))}else yu(s,c,v,ks(s))}catch(bt){yu(s,c,{then:function(){},status:"rejected",reason:bt},ks())}finally{fe.p=R,K!==null&&oe.types!==null&&(K.types=oe.types),be.T=K}}function c5(){}function Mx(s,c,x,v){if(s.tag!==5)throw Error(n(476));var T=Rb(s).queue;jb(s,T,c,Ve,x===null?c5:function(){return Ob(s),x(v)})}function Rb(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:Ve,baseState:Ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:Ve},next:null};var x={};return c.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:x},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function Ob(s){var c=Rb(s);c.next===null&&(c=s.alternate.memoizedState),yu(s,c.next.queue,{},ks())}function Fx(){return Ea(Bu)}function Ib(){return Yn().memoizedState}function Db(){return Yn().memoizedState}function u5(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var x=ks();s=Gl(x);var v=Wl(c,s,x);v!==null&&(ss(v,c,x),gu(v,c,x)),c={cache:dx()},s.payload=c;return}c=c.return}}function d5(s,c,x){var v=ks();x={lane:v,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Gf(s)?Fb(c,x):(x=ex(s,c,x,v),x!==null&&(ss(x,s,v),Lb(x,c,v)))}function Mb(s,c,x){var v=ks();yu(s,c,x,v)}function yu(s,c,x,v){var T={lane:v,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(Gf(s))Fb(c,T);else{var R=s.alternate;if(s.lanes===0&&(R===null||R.lanes===0)&&(R=c.lastRenderedReducer,R!==null))try{var K=c.lastRenderedState,oe=R(K,x);if(T.hasEagerState=!0,T.eagerState=oe,y(oe,K))return Ef(s,c,T,0),hn===null&&kf(),!1}catch{}if(x=ex(s,c,T,v),x!==null)return ss(x,s,v),Lb(x,c,v),!0}return!1}function Lx(s,c,x,v){if(v={lane:2,revertLane:mm(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Gf(s)){if(c)throw Error(n(479))}else c=ex(s,x,v,2),c!==null&&ss(c,s,2)}function Gf(s){var c=s.alternate;return s===xr||c!==null&&c===xr}function Fb(s,c){$c=Lf=!0;var x=s.pending;x===null?c.next=c:(c.next=x.next,x.next=c),s.pending=c}function Lb(s,c,x){if((x&4194048)!==0){var v=c.lanes;v&=s.pendingLanes,x|=v,c.lanes=x,Fr(s,x)}}var _u={readContext:Ea,use:Uf,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useLayoutEffect:Ln,useInsertionEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useSyncExternalStore:Ln,useId:Ln,useHostTransitionStatus:Ln,useFormState:Ln,useActionState:Ln,useOptimistic:Ln,useMemoCache:Ln,useCacheRefresh:Ln};_u.useEffectEvent=Ln;var Bb={readContext:Ea,use:Uf,useCallback:function(s,c){return Ka().memoizedState=[s,c===void 0?null:c],s},useContext:Ea,useEffect:yb,useImperativeHandle:function(s,c,x){x=x!=null?x.concat([s]):null,Hf(4194308,4,Sb.bind(null,c,s),x)},useLayoutEffect:function(s,c){return Hf(4194308,4,s,c)},useInsertionEffect:function(s,c){Hf(4,2,s,c)},useMemo:function(s,c){var x=Ka();c=c===void 0?null:c;var v=s();if(Wo){Ht(!0);try{s()}finally{Ht(!1)}}return x.memoizedState=[v,c],v},useReducer:function(s,c,x){var v=Ka();if(x!==void 0){var T=x(c);if(Wo){Ht(!0);try{x(c)}finally{Ht(!1)}}}else T=c;return v.memoizedState=v.baseState=T,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:T},v.queue=s,s=s.dispatch=d5.bind(null,xr,s),[v.memoizedState,s]},useRef:function(s){var c=Ka();return s={current:s},c.memoizedState=s},useState:function(s){s=jx(s);var c=s.queue,x=Mb.bind(null,xr,c);return c.dispatch=x,[s.memoizedState,x]},useDebugValue:Ix,useDeferredValue:function(s,c){var x=Ka();return Dx(x,s,c)},useTransition:function(){var s=jx(!1);return s=jb.bind(null,xr,s.queue,!0,!1),Ka().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,x){var v=xr,T=Ka();if(Ir){if(x===void 0)throw Error(n(407));x=x()}else{if(x=c(),hn===null)throw Error(n(349));(jr&127)!==0||sb(v,c,x)}T.memoizedState=x;var R={value:x,getSnapshot:c};return T.queue=R,yb(lb.bind(null,v,R,s),[s]),v.flags|=2048,Jc(9,{destroy:void 0},ib.bind(null,v,R,x,c),null),x},useId:function(){var s=Ka(),c=hn.identifierPrefix;if(Ir){var x=Ti,v=Ci;x=(v&~(1<<32-Dt(v)-1)).toString(32)+x,c="_"+c+"R_"+x,x=Bf++,0<x&&(c+="H"+x.toString(32)),c+="_"}else x=a5++,c="_"+c+"r_"+x.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:Fx,useFormState:gb,useActionState:gb,useOptimistic:function(s){var c=Ka();c.memoizedState=c.baseState=s;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=x,c=Lx.bind(null,xr,!0,x),x.dispatch=c,[s,c]},useMemoCache:Nx,useCacheRefresh:function(){return Ka().memoizedState=u5.bind(null,xr)},useEffectEvent:function(s){var c=Ka(),x={impl:s};return c.memoizedState=x,function(){if((qr&2)!==0)throw Error(n(440));return x.impl.apply(void 0,arguments)}}},Bx={readContext:Ea,use:Uf,useCallback:Nb,useContext:Ea,useEffect:Ox,useImperativeHandle:Ab,useInsertionEffect:kb,useLayoutEffect:Eb,useMemo:Cb,useReducer:zf,useRef:vb,useState:function(){return zf(al)},useDebugValue:Ix,useDeferredValue:function(s,c){var x=Yn();return Tb(x,sn.memoizedState,s,c)},useTransition:function(){var s=zf(al)[0],c=Yn().memoizedState;return[typeof s=="boolean"?s:vu(s),c]},useSyncExternalStore:ab,useId:Ib,useHostTransitionStatus:Fx,useFormState:pb,useActionState:pb,useOptimistic:function(s,c){var x=Yn();return ub(x,sn,s,c)},useMemoCache:Nx,useCacheRefresh:Db};Bx.useEffectEvent=_b;var Pb={readContext:Ea,use:Uf,useCallback:Nb,useContext:Ea,useEffect:Ox,useImperativeHandle:Ab,useInsertionEffect:kb,useLayoutEffect:Eb,useMemo:Cb,useReducer:Tx,useRef:vb,useState:function(){return Tx(al)},useDebugValue:Ix,useDeferredValue:function(s,c){var x=Yn();return sn===null?Dx(x,s,c):Tb(x,sn.memoizedState,s,c)},useTransition:function(){var s=Tx(al)[0],c=Yn().memoizedState;return[typeof s=="boolean"?s:vu(s),c]},useSyncExternalStore:ab,useId:Ib,useHostTransitionStatus:Fx,useFormState:wb,useActionState:wb,useOptimistic:function(s,c){var x=Yn();return sn!==null?ub(x,sn,s,c):(x.baseState=s,[s,x.queue.dispatch])},useMemoCache:Nx,useCacheRefresh:Db};Pb.useEffectEvent=_b;function Px(s,c,x,v){c=s.memoizedState,x=x(v,c),x=x==null?c:_({},c,x),s.memoizedState=x,s.lanes===0&&(s.updateQueue.baseState=x)}var Ux={enqueueSetState:function(s,c,x){s=s._reactInternals;var v=ks(),T=Gl(v);T.payload=c,x!=null&&(T.callback=x),c=Wl(s,T,v),c!==null&&(ss(c,s,v),gu(c,s,v))},enqueueReplaceState:function(s,c,x){s=s._reactInternals;var v=ks(),T=Gl(v);T.tag=1,T.payload=c,x!=null&&(T.callback=x),c=Wl(s,T,v),c!==null&&(ss(c,s,v),gu(c,s,v))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var x=ks(),v=Gl(x);v.tag=2,c!=null&&(v.callback=c),c=Wl(s,v,x),c!==null&&(ss(c,s,x),gu(c,s,x))}};function Ub(s,c,x,v,T,R,K){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,R,K):c.prototype&&c.prototype.isPureReactComponent?!S(x,v)||!S(T,R):!0}function zb(s,c,x,v){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(x,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(x,v),c.state!==s&&Ux.enqueueReplaceState(c,c.state,null)}function Xo(s,c){var x=c;if("ref"in c){x={};for(var v in c)v!=="ref"&&(x[v]=c[v])}if(s=s.defaultProps){x===c&&(x=_({},x));for(var T in s)x[T]===void 0&&(x[T]=s[T])}return x}function Hb(s){_f(s)}function Vb(s){console.error(s)}function Gb(s){_f(s)}function Wf(s,c){try{var x=s.onUncaughtError;x(c.value,{componentStack:c.stack})}catch(v){setTimeout(function(){throw v})}}function Wb(s,c,x){try{var v=s.onCaughtError;v(x.value,{componentStack:x.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function zx(s,c,x){return x=Gl(x),x.tag=3,x.payload={element:null},x.callback=function(){Wf(s,c)},x}function Xb(s){return s=Gl(s),s.tag=3,s}function Kb(s,c,x,v){var T=x.type.getDerivedStateFromError;if(typeof T=="function"){var R=v.value;s.payload=function(){return T(R)},s.callback=function(){Wb(c,x,v)}}var K=x.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(s.callback=function(){Wb(c,x,v),typeof T!="function"&&(Zl===null?Zl=new Set([this]):Zl.add(this));var oe=v.stack;this.componentDidCatch(v.value,{componentStack:oe!==null?oe:""})})}function f5(s,c,x,v,T){if(x.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(c=x.alternate,c!==null&&Gc(c,x,T,!0),x=ws.current,x!==null){switch(x.tag){case 31:case 13:return Gs===null?nh():x.alternate===null&&Bn===0&&(Bn=3),x.flags&=-257,x.flags|=65536,x.lanes=T,v===Of?x.flags|=16384:(c=x.updateQueue,c===null?x.updateQueue=new Set([v]):c.add(v),fm(s,v,T)),!1;case 22:return x.flags|=65536,v===Of?x.flags|=16384:(c=x.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([v])},x.updateQueue=c):(x=c.retryQueue,x===null?c.retryQueue=new Set([v]):x.add(v)),fm(s,v,T)),!1}throw Error(n(435,x.tag))}return fm(s,v,T),nh(),!1}if(Ir)return c=ws.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=T,v!==ix&&(s=Error(n(422),{cause:v}),du(Us(s,x)))):(v!==ix&&(c=Error(n(423),{cause:v}),du(Us(c,x))),s=s.current.alternate,s.flags|=65536,T&=-T,s.lanes|=T,v=Us(v,x),T=zx(s.stateNode,v,T),px(s,T),Bn!==4&&(Bn=2)),!1;var R=Error(n(520),{cause:v});if(R=Us(R,x),ju===null?ju=[R]:ju.push(R),Bn!==4&&(Bn=2),c===null)return!0;v=Us(v,x),x=c;do{switch(x.tag){case 3:return x.flags|=65536,s=T&-T,x.lanes|=s,s=zx(x.stateNode,v,s),px(x,s),!1;case 1:if(c=x.type,R=x.stateNode,(x.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Zl===null||!Zl.has(R))))return x.flags|=65536,T&=-T,x.lanes|=T,T=Xb(T),Kb(T,s,x,v),px(x,T),!1}x=x.return}while(x!==null);return!1}var Hx=Error(n(461)),ra=!1;function Sa(s,c,x,v){c.child=s===null?Z2(c,null,x,v):Go(c,s.child,x,v)}function qb(s,c,x,v,T){x=x.render;var R=c.ref;if("ref"in v){var K={};for(var oe in v)oe!=="ref"&&(K[oe]=v[oe])}else K=v;return Uo(c),v=kx(s,c,x,K,R,T),oe=Ex(),s!==null&&!ra?(Sx(s,c,T),sl(s,c,T)):(Ir&&oe&&ax(c),c.flags|=1,Sa(s,c,v,T),c.child)}function Yb(s,c,x,v,T){if(s===null){var R=x.type;return typeof R=="function"&&!tx(R)&&R.defaultProps===void 0&&x.compare===null?(c.tag=15,c.type=R,$b(s,c,R,v,T)):(s=Af(x.type,null,v,c,c.mode,T),s.ref=c.ref,s.return=c,c.child=s)}if(R=s.child,!$x(s,T)){var K=R.memoizedProps;if(x=x.compare,x=x!==null?x:S,x(K,v)&&s.ref===c.ref)return sl(s,c,T)}return c.flags|=1,s=Qi(R,v),s.ref=c.ref,s.return=c,c.child=s}function $b(s,c,x,v,T){if(s!==null){var R=s.memoizedProps;if(S(R,v)&&s.ref===c.ref)if(ra=!1,c.pendingProps=v=R,$x(s,T))(s.flags&131072)!==0&&(ra=!0);else return c.lanes=s.lanes,sl(s,c,T)}return Vx(s,c,x,v,T)}function Zb(s,c,x,v){var T=v.children,R=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((c.flags&128)!==0){if(R=R!==null?R.baseLanes|x:x,s!==null){for(v=c.child=s.child,T=0;v!==null;)T=T|v.lanes|v.childLanes,v=v.sibling;v=T&~R}else v=0,c.child=null;return Jb(s,c,R,x,v)}if((x&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&jf(c,R!==null?R.cachePool:null),R!==null?eb(c,R):wx(),tb(c);else return v=c.lanes=536870912,Jb(s,c,R!==null?R.baseLanes|x:x,x,v)}else R!==null?(jf(c,R.cachePool),eb(c,R),Kl(),c.memoizedState=null):(s!==null&&jf(c,null),wx(),Kl());return Sa(s,c,T,x),c.child}function ku(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function Jb(s,c,x,v,T){var R=hx();return R=R===null?null:{parent:ea._currentValue,pool:R},c.memoizedState={baseLanes:x,cachePool:R},s!==null&&jf(c,null),wx(),tb(c),s!==null&&Gc(s,c,v,!0),c.childLanes=T,null}function Xf(s,c){return c=qf({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function Qb(s,c,x){return Go(c,s.child,null,x),s=Xf(c,c.pendingProps),s.flags|=2,vs(c),c.memoizedState=null,s}function h5(s,c,x){var v=c.pendingProps,T=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(Ir){if(v.mode==="hidden")return s=Xf(c,v),c.lanes=536870912,ku(null,s);if(yx(c),(s=pn)?(s=dv(s,Vs),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:Pl!==null?{id:Ci,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},x=F2(s),x.return=c,c.child=x,ka=c,pn=null)):s=null,s===null)throw zl(c);return c.lanes=536870912,null}return Xf(c,v)}var R=s.memoizedState;if(R!==null){var K=R.dehydrated;if(yx(c),T)if(c.flags&256)c.flags&=-257,c=Qb(s,c,x);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(n(558));else if(ra||Gc(s,c,x,!1),T=(x&s.childLanes)!==0,ra||T){if(v=hn,v!==null&&(K=$r(v,x),K!==0&&K!==R.retryLane))throw R.retryLane=K,Fo(s,K),ss(v,s,K),Hx;nh(),c=Qb(s,c,x)}else s=R.treeContext,pn=Ws(K.nextSibling),ka=c,Ir=!0,Ul=null,Vs=!1,s!==null&&P2(c,s),c=Xf(c,v),c.flags|=4096;return c}return s=Qi(s.child,{mode:v.mode,children:v.children}),s.ref=c.ref,c.child=s,s.return=c,s}function Kf(s,c){var x=c.ref;if(x===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(n(284));(s===null||s.ref!==x)&&(c.flags|=4194816)}}function Vx(s,c,x,v,T){return Uo(c),x=kx(s,c,x,v,void 0,T),v=Ex(),s!==null&&!ra?(Sx(s,c,T),sl(s,c,T)):(Ir&&v&&ax(c),c.flags|=1,Sa(s,c,x,T),c.child)}function ew(s,c,x,v,T,R){return Uo(c),c.updateQueue=null,x=nb(c,v,x,T),rb(s),v=Ex(),s!==null&&!ra?(Sx(s,c,R),sl(s,c,R)):(Ir&&v&&ax(c),c.flags|=1,Sa(s,c,x,R),c.child)}function tw(s,c,x,v,T){if(Uo(c),c.stateNode===null){var R=Uc,K=x.contextType;typeof K=="object"&&K!==null&&(R=Ea(K)),R=new x(v,R),c.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Ux,c.stateNode=R,R._reactInternals=c,R=c.stateNode,R.props=v,R.state=c.memoizedState,R.refs={},mx(c),K=x.contextType,R.context=typeof K=="object"&&K!==null?Ea(K):Uc,R.state=c.memoizedState,K=x.getDerivedStateFromProps,typeof K=="function"&&(Px(c,x,K,v),R.state=c.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(K=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),K!==R.state&&Ux.enqueueReplaceState(R,R.state,null),bu(c,v,R,T),pu(),R.state=c.memoizedState),typeof R.componentDidMount=="function"&&(c.flags|=4194308),v=!0}else if(s===null){R=c.stateNode;var oe=c.memoizedProps,Ae=Xo(x,oe);R.props=Ae;var Qe=R.context,xt=x.contextType;K=Uc,typeof xt=="object"&&xt!==null&&(K=Ea(xt));var bt=x.getDerivedStateFromProps;xt=typeof bt=="function"||typeof R.getSnapshotBeforeUpdate=="function",oe=c.pendingProps!==oe,xt||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(oe||Qe!==K)&&zb(c,R,v,K),Vl=!1;var tt=c.memoizedState;R.state=tt,bu(c,v,R,T),pu(),Qe=c.memoizedState,oe||tt!==Qe||Vl?(typeof bt=="function"&&(Px(c,x,bt,v),Qe=c.memoizedState),(Ae=Vl||Ub(c,x,Ae,v,tt,Qe,K))?(xt||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(c.flags|=4194308)):(typeof R.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=Qe),R.props=v,R.state=Qe,R.context=K,v=Ae):(typeof R.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{R=c.stateNode,gx(s,c),K=c.memoizedProps,xt=Xo(x,K),R.props=xt,bt=c.pendingProps,tt=R.context,Qe=x.contextType,Ae=Uc,typeof Qe=="object"&&Qe!==null&&(Ae=Ea(Qe)),oe=x.getDerivedStateFromProps,(Qe=typeof oe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(K!==bt||tt!==Ae)&&zb(c,R,v,Ae),Vl=!1,tt=c.memoizedState,R.state=tt,bu(c,v,R,T),pu();var lt=c.memoizedState;K!==bt||tt!==lt||Vl||s!==null&&s.dependencies!==null&&Cf(s.dependencies)?(typeof oe=="function"&&(Px(c,x,oe,v),lt=c.memoizedState),(xt=Vl||Ub(c,x,xt,v,tt,lt,Ae)||s!==null&&s.dependencies!==null&&Cf(s.dependencies))?(Qe||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(v,lt,Ae),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(v,lt,Ae)),typeof R.componentDidUpdate=="function"&&(c.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof R.componentDidUpdate!="function"||K===s.memoizedProps&&tt===s.memoizedState||(c.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||K===s.memoizedProps&&tt===s.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=lt),R.props=v,R.state=lt,R.context=Ae,v=xt):(typeof R.componentDidUpdate!="function"||K===s.memoizedProps&&tt===s.memoizedState||(c.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||K===s.memoizedProps&&tt===s.memoizedState||(c.flags|=1024),v=!1)}return R=v,Kf(s,c),v=(c.flags&128)!==0,R||v?(R=c.stateNode,x=v&&typeof x.getDerivedStateFromError!="function"?null:R.render(),c.flags|=1,s!==null&&v?(c.child=Go(c,s.child,null,T),c.child=Go(c,null,x,T)):Sa(s,c,x,T),c.memoizedState=R.state,s=c.child):s=sl(s,c,T),s}function rw(s,c,x,v){return Bo(),c.flags|=256,Sa(s,c,x,v),c.child}var Gx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wx(s){return{baseLanes:s,cachePool:W2()}}function Xx(s,c,x){return s=s!==null?s.childLanes&~x:0,c&&(s|=_s),s}function nw(s,c,x){var v=c.pendingProps,T=!1,R=(c.flags&128)!==0,K;if((K=R)||(K=s!==null&&s.memoizedState===null?!1:(qn.current&2)!==0),K&&(T=!0,c.flags&=-129),K=(c.flags&32)!==0,c.flags&=-33,s===null){if(Ir){if(T?Xl(c):Kl(),(s=pn)?(s=dv(s,Vs),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:Pl!==null?{id:Ci,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},x=F2(s),x.return=c,c.child=x,ka=c,pn=null)):s=null,s===null)throw zl(c);return Cm(s)?c.lanes=32:c.lanes=536870912,null}var oe=v.children;return v=v.fallback,T?(Kl(),T=c.mode,oe=qf({mode:"hidden",children:oe},T),v=Lo(v,T,x,null),oe.return=c,v.return=c,oe.sibling=v,c.child=oe,v=c.child,v.memoizedState=Wx(x),v.childLanes=Xx(s,K,x),c.memoizedState=Gx,ku(null,v)):(Xl(c),Kx(c,oe))}var Ae=s.memoizedState;if(Ae!==null&&(oe=Ae.dehydrated,oe!==null)){if(R)c.flags&256?(Xl(c),c.flags&=-257,c=qx(s,c,x)):c.memoizedState!==null?(Kl(),c.child=s.child,c.flags|=128,c=null):(Kl(),oe=v.fallback,T=c.mode,v=qf({mode:"visible",children:v.children},T),oe=Lo(oe,T,x,null),oe.flags|=2,v.return=c,oe.return=c,v.sibling=oe,c.child=v,Go(c,s.child,null,x),v=c.child,v.memoizedState=Wx(x),v.childLanes=Xx(s,K,x),c.memoizedState=Gx,c=ku(null,v));else if(Xl(c),Cm(oe)){if(K=oe.nextSibling&&oe.nextSibling.dataset,K)var Qe=K.dgst;K=Qe,v=Error(n(419)),v.stack="",v.digest=K,du({value:v,source:null,stack:null}),c=qx(s,c,x)}else if(ra||Gc(s,c,x,!1),K=(x&s.childLanes)!==0,ra||K){if(K=hn,K!==null&&(v=$r(K,x),v!==0&&v!==Ae.retryLane))throw Ae.retryLane=v,Fo(s,v),ss(K,s,v),Hx;Nm(oe)||nh(),c=qx(s,c,x)}else Nm(oe)?(c.flags|=192,c.child=s.child,c=null):(s=Ae.treeContext,pn=Ws(oe.nextSibling),ka=c,Ir=!0,Ul=null,Vs=!1,s!==null&&P2(c,s),c=Kx(c,v.children),c.flags|=4096);return c}return T?(Kl(),oe=v.fallback,T=c.mode,Ae=s.child,Qe=Ae.sibling,v=Qi(Ae,{mode:"hidden",children:v.children}),v.subtreeFlags=Ae.subtreeFlags&65011712,Qe!==null?oe=Qi(Qe,oe):(oe=Lo(oe,T,x,null),oe.flags|=2),oe.return=c,v.return=c,v.sibling=oe,c.child=v,ku(null,v),v=c.child,oe=s.child.memoizedState,oe===null?oe=Wx(x):(T=oe.cachePool,T!==null?(Ae=ea._currentValue,T=T.parent!==Ae?{parent:Ae,pool:Ae}:T):T=W2(),oe={baseLanes:oe.baseLanes|x,cachePool:T}),v.memoizedState=oe,v.childLanes=Xx(s,K,x),c.memoizedState=Gx,ku(s.child,v)):(Xl(c),x=s.child,s=x.sibling,x=Qi(x,{mode:"visible",children:v.children}),x.return=c,x.sibling=null,s!==null&&(K=c.deletions,K===null?(c.deletions=[s],c.flags|=16):K.push(s)),c.child=x,c.memoizedState=null,x)}function Kx(s,c){return c=qf({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function qf(s,c){return s=bs(22,s,null,c),s.lanes=0,s}function qx(s,c,x){return Go(c,s.child,null,x),s=Kx(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function aw(s,c,x){s.lanes|=c;var v=s.alternate;v!==null&&(v.lanes|=c),cx(s.return,c,x)}function Yx(s,c,x,v,T,R){var K=s.memoizedState;K===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:x,tailMode:T,treeForkCount:R}:(K.isBackwards=c,K.rendering=null,K.renderingStartTime=0,K.last=v,K.tail=x,K.tailMode=T,K.treeForkCount=R)}function sw(s,c,x){var v=c.pendingProps,T=v.revealOrder,R=v.tail;v=v.children;var K=qn.current,oe=(K&2)!==0;if(oe?(K=K&1|2,c.flags|=128):K&=1,q(qn,K),Sa(s,c,v,x),v=Ir?uu:0,!oe&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&aw(s,x,c);else if(s.tag===19)aw(s,x,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(T){case"forwards":for(x=c.child,T=null;x!==null;)s=x.alternate,s!==null&&Ff(s)===null&&(T=x),x=x.sibling;x=T,x===null?(T=c.child,c.child=null):(T=x.sibling,x.sibling=null),Yx(c,!1,T,x,R,v);break;case"backwards":case"unstable_legacy-backwards":for(x=null,T=c.child,c.child=null;T!==null;){if(s=T.alternate,s!==null&&Ff(s)===null){c.child=T;break}s=T.sibling,T.sibling=x,x=T,T=s}Yx(c,!0,x,null,R,v);break;case"together":Yx(c,!1,null,null,void 0,v);break;default:c.memoizedState=null}return c.child}function sl(s,c,x){if(s!==null&&(c.dependencies=s.dependencies),$l|=c.lanes,(x&c.childLanes)===0)if(s!==null){if(Gc(s,c,x,!1),(x&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(n(153));if(c.child!==null){for(s=c.child,x=Qi(s,s.pendingProps),c.child=x,x.return=c;s.sibling!==null;)s=s.sibling,x=x.sibling=Qi(s,s.pendingProps),x.return=c;x.sibling=null}return c.child}function $x(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&Cf(s)))}function x5(s,c,x){switch(c.tag){case 3:Be(c,c.stateNode.containerInfo),Hl(c,ea,s.memoizedState.cache),Bo();break;case 27:case 5:et(c);break;case 4:Be(c,c.stateNode.containerInfo);break;case 10:Hl(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,yx(c),null;break;case 13:var v=c.memoizedState;if(v!==null)return v.dehydrated!==null?(Xl(c),c.flags|=128,null):(x&c.child.childLanes)!==0?nw(s,c,x):(Xl(c),s=sl(s,c,x),s!==null?s.sibling:null);Xl(c);break;case 19:var T=(s.flags&128)!==0;if(v=(x&c.childLanes)!==0,v||(Gc(s,c,x,!1),v=(x&c.childLanes)!==0),T){if(v)return sw(s,c,x);c.flags|=128}if(T=c.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),q(qn,qn.current),v)break;return null;case 22:return c.lanes=0,Zb(s,c,x,c.pendingProps);case 24:Hl(c,ea,s.memoizedState.cache)}return sl(s,c,x)}function iw(s,c,x){if(s!==null)if(s.memoizedProps!==c.pendingProps)ra=!0;else{if(!$x(s,x)&&(c.flags&128)===0)return ra=!1,x5(s,c,x);ra=(s.flags&131072)!==0}else ra=!1,Ir&&(c.flags&1048576)!==0&&B2(c,uu,c.index);switch(c.lanes=0,c.tag){case 16:e:{var v=c.pendingProps;if(s=Ho(c.elementType),c.type=s,typeof s=="function")tx(s)?(v=Xo(s,v),c.tag=1,c=tw(null,c,s,v,x)):(c.tag=0,c=Vx(null,c,s,v,x));else{if(s!=null){var T=s.$$typeof;if(T===B){c.tag=11,c=qb(null,c,s,v,x);break e}else if(T===F){c.tag=14,c=Yb(null,c,s,v,x);break e}}throw c=W(s)||s,Error(n(306,c,""))}}return c;case 0:return Vx(s,c,c.type,c.pendingProps,x);case 1:return v=c.type,T=Xo(v,c.pendingProps),tw(s,c,v,T,x);case 3:e:{if(Be(c,c.stateNode.containerInfo),s===null)throw Error(n(387));v=c.pendingProps;var R=c.memoizedState;T=R.element,gx(s,c),bu(c,v,null,x);var K=c.memoizedState;if(v=K.cache,Hl(c,ea,v),v!==R.cache&&ux(c,[ea],x,!0),pu(),v=K.element,R.isDehydrated)if(R={element:v,isDehydrated:!1,cache:K.cache},c.updateQueue.baseState=R,c.memoizedState=R,c.flags&256){c=rw(s,c,v,x);break e}else if(v!==T){T=Us(Error(n(424)),c),du(T),c=rw(s,c,v,x);break e}else for(s=c.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,pn=Ws(s.firstChild),ka=c,Ir=!0,Ul=null,Vs=!0,x=Z2(c,null,v,x),c.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Bo(),v===T){c=sl(s,c,x);break e}Sa(s,c,v,x)}c=c.child}return c;case 26:return Kf(s,c),s===null?(x=pv(c.type,null,c.pendingProps,null))?c.memoizedState=x:Ir||(x=c.type,s=c.pendingProps,v=uh(pe.current).createElement(x),v[me]=c,v[we]=s,Aa(v,x,s),It(v),c.stateNode=v):c.memoizedState=pv(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return et(c),s===null&&Ir&&(v=c.stateNode=xv(c.type,c.pendingProps,pe.current),ka=c,Vs=!0,T=pn,to(c.type)?(Tm=T,pn=Ws(v.firstChild)):pn=T),Sa(s,c,c.pendingProps.children,x),Kf(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&Ir&&((T=v=pn)&&(v=G5(v,c.type,c.pendingProps,Vs),v!==null?(c.stateNode=v,ka=c,pn=Ws(v.firstChild),Vs=!1,T=!0):T=!1),T||zl(c)),et(c),T=c.type,R=c.pendingProps,K=s!==null?s.memoizedProps:null,v=R.children,Em(T,R)?v=null:K!==null&&Em(T,K)&&(c.flags|=32),c.memoizedState!==null&&(T=kx(s,c,s5,null,null,x),Bu._currentValue=T),Kf(s,c),Sa(s,c,v,x),c.child;case 6:return s===null&&Ir&&((s=x=pn)&&(x=W5(x,c.pendingProps,Vs),x!==null?(c.stateNode=x,ka=c,pn=null,s=!0):s=!1),s||zl(c)),null;case 13:return nw(s,c,x);case 4:return Be(c,c.stateNode.containerInfo),v=c.pendingProps,s===null?c.child=Go(c,null,v,x):Sa(s,c,v,x),c.child;case 11:return qb(s,c,c.type,c.pendingProps,x);case 7:return Sa(s,c,c.pendingProps,x),c.child;case 8:return Sa(s,c,c.pendingProps.children,x),c.child;case 12:return Sa(s,c,c.pendingProps.children,x),c.child;case 10:return v=c.pendingProps,Hl(c,c.type,v.value),Sa(s,c,v.children,x),c.child;case 9:return T=c.type._context,v=c.pendingProps.children,Uo(c),T=Ea(T),v=v(T),c.flags|=1,Sa(s,c,v,x),c.child;case 14:return Yb(s,c,c.type,c.pendingProps,x);case 15:return $b(s,c,c.type,c.pendingProps,x);case 19:return sw(s,c,x);case 31:return h5(s,c,x);case 22:return Zb(s,c,x,c.pendingProps);case 24:return Uo(c),v=Ea(ea),s===null?(T=hx(),T===null&&(T=hn,R=dx(),T.pooledCache=R,R.refCount++,R!==null&&(T.pooledCacheLanes|=x),T=R),c.memoizedState={parent:v,cache:T},mx(c),Hl(c,ea,T)):((s.lanes&x)!==0&&(gx(s,c),bu(c,null,null,x),pu()),T=s.memoizedState,R=c.memoizedState,T.parent!==v?(T={parent:v,cache:v},c.memoizedState=T,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=T),Hl(c,ea,v)):(v=R.cache,Hl(c,ea,v),v!==T.cache&&ux(c,[ea],x,!0))),Sa(s,c,c.pendingProps.children,x),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function il(s){s.flags|=4}function Zx(s,c,x,v,T){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(T&335544128)===T)if(s.stateNode.complete)s.flags|=8192;else if(Iw())s.flags|=8192;else throw Vo=Of,xx}else s.flags&=-16777217}function lw(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!_v(c))if(Iw())s.flags|=8192;else throw Vo=Of,xx}function Yf(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?ze():536870912,s.lanes|=c,r0|=c)}function Eu(s,c){if(!Ir)switch(s.tailMode){case"hidden":c=s.tail;for(var x=null;c!==null;)c.alternate!==null&&(x=c),c=c.sibling;x===null?s.tail=null:x.sibling=null;break;case"collapsed":x=s.tail;for(var v=null;x!==null;)x.alternate!==null&&(v=x),x=x.sibling;v===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function bn(s){var c=s.alternate!==null&&s.alternate.child===s.child,x=0,v=0;if(c)for(var T=s.child;T!==null;)x|=T.lanes|T.childLanes,v|=T.subtreeFlags&65011712,v|=T.flags&65011712,T.return=s,T=T.sibling;else for(T=s.child;T!==null;)x|=T.lanes|T.childLanes,v|=T.subtreeFlags,v|=T.flags,T.return=s,T=T.sibling;return s.subtreeFlags|=v,s.childLanes=x,c}function m5(s,c,x){var v=c.pendingProps;switch(sx(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(c),null;case 1:return bn(c),null;case 3:return x=c.stateNode,v=null,s!==null&&(v=s.memoizedState.cache),c.memoizedState.cache!==v&&(c.flags|=2048),rl(ea),Pe(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(s===null||s.child===null)&&(Vc(c)?il(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,lx())),bn(c),null;case 26:var T=c.type,R=c.memoizedState;return s===null?(il(c),R!==null?(bn(c),lw(c,R)):(bn(c),Zx(c,T,null,v,x))):R?R!==s.memoizedState?(il(c),bn(c),lw(c,R)):(bn(c),c.flags&=-16777217):(s=s.memoizedProps,s!==v&&il(c),bn(c),Zx(c,T,s,v,x)),null;case 27:if(ut(c),x=pe.current,T=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==v&&il(c);else{if(!v){if(c.stateNode===null)throw Error(n(166));return bn(c),null}s=P.current,Vc(c)?U2(c):(s=xv(T,v,x),c.stateNode=s,il(c))}return bn(c),null;case 5:if(ut(c),T=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==v&&il(c);else{if(!v){if(c.stateNode===null)throw Error(n(166));return bn(c),null}if(R=P.current,Vc(c))U2(c);else{var K=uh(pe.current);switch(R){case 1:R=K.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:R=K.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":R=K.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":R=K.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":R=K.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof v.is=="string"?K.createElement("select",{is:v.is}):K.createElement("select"),v.multiple?R.multiple=!0:v.size&&(R.size=v.size);break;default:R=typeof v.is=="string"?K.createElement(T,{is:v.is}):K.createElement(T)}}R[me]=c,R[we]=v;e:for(K=c.child;K!==null;){if(K.tag===5||K.tag===6)R.appendChild(K.stateNode);else if(K.tag!==4&&K.tag!==27&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===c)break e;for(;K.sibling===null;){if(K.return===null||K.return===c)break e;K=K.return}K.sibling.return=K.return,K=K.sibling}c.stateNode=R;e:switch(Aa(R,T,v),T){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&il(c)}}return bn(c),Zx(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,x),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==v&&il(c);else{if(typeof v!="string"&&c.stateNode===null)throw Error(n(166));if(s=pe.current,Vc(c)){if(s=c.stateNode,x=c.memoizedProps,v=null,T=ka,T!==null)switch(T.tag){case 27:case 5:v=T.memoizedProps}s[me]=c,s=!!(s.nodeValue===x||v!==null&&v.suppressHydrationWarning===!0||nv(s.nodeValue,x)),s||zl(c,!0)}else s=uh(s).createTextNode(v),s[me]=c,c.stateNode=s}return bn(c),null;case 31:if(x=c.memoizedState,s===null||s.memoizedState!==null){if(v=Vc(c),x!==null){if(s===null){if(!v)throw Error(n(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[me]=c}else Bo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;bn(c),s=!1}else x=lx(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=x),s=!0;if(!s)return c.flags&256?(vs(c),c):(vs(c),null);if((c.flags&128)!==0)throw Error(n(558))}return bn(c),null;case 13:if(v=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(T=Vc(c),v!==null&&v.dehydrated!==null){if(s===null){if(!T)throw Error(n(318));if(T=c.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[me]=c}else Bo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;bn(c),T=!1}else T=lx(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=T),T=!0;if(!T)return c.flags&256?(vs(c),c):(vs(c),null)}return vs(c),(c.flags&128)!==0?(c.lanes=x,c):(x=v!==null,s=s!==null&&s.memoizedState!==null,x&&(v=c.child,T=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(T=v.alternate.memoizedState.cachePool.pool),R=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(R=v.memoizedState.cachePool.pool),R!==T&&(v.flags|=2048)),x!==s&&x&&(c.child.flags|=8192),Yf(c,c.updateQueue),bn(c),null);case 4:return Pe(),s===null&&wm(c.stateNode.containerInfo),bn(c),null;case 10:return rl(c.type),bn(c),null;case 19:if(L(qn),v=c.memoizedState,v===null)return bn(c),null;if(T=(c.flags&128)!==0,R=v.rendering,R===null)if(T)Eu(v,!1);else{if(Bn!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(R=Ff(s),R!==null){for(c.flags|=128,Eu(v,!1),s=R.updateQueue,c.updateQueue=s,Yf(c,s),c.subtreeFlags=0,s=x,x=c.child;x!==null;)M2(x,s),x=x.sibling;return q(qn,qn.current&1|2),Ir&&el(c,v.treeForkCount),c.child}s=s.sibling}v.tail!==null&&Ke()>eh&&(c.flags|=128,T=!0,Eu(v,!1),c.lanes=4194304)}else{if(!T)if(s=Ff(R),s!==null){if(c.flags|=128,T=!0,s=s.updateQueue,c.updateQueue=s,Yf(c,s),Eu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!R.alternate&&!Ir)return bn(c),null}else 2*Ke()-v.renderingStartTime>eh&&x!==536870912&&(c.flags|=128,T=!0,Eu(v,!1),c.lanes=4194304);v.isBackwards?(R.sibling=c.child,c.child=R):(s=v.last,s!==null?s.sibling=R:c.child=R,v.last=R)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=Ke(),s.sibling=null,x=qn.current,q(qn,T?x&1|2:x&1),Ir&&el(c,v.treeForkCount),s):(bn(c),null);case 22:case 23:return vs(c),vx(),v=c.memoizedState!==null,s!==null?s.memoizedState!==null!==v&&(c.flags|=8192):v&&(c.flags|=8192),v?(x&536870912)!==0&&(c.flags&128)===0&&(bn(c),c.subtreeFlags&6&&(c.flags|=8192)):bn(c),x=c.updateQueue,x!==null&&Yf(c,x.retryQueue),x=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==x&&(c.flags|=2048),s!==null&&L(zo),null;case 24:return x=null,s!==null&&(x=s.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),rl(ea),bn(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function g5(s,c){switch(sx(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return rl(ea),Pe(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return ut(c),null;case 31:if(c.memoizedState!==null){if(vs(c),c.alternate===null)throw Error(n(340));Bo()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(vs(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Bo()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return L(qn),null;case 4:return Pe(),null;case 10:return rl(c.type),null;case 22:case 23:return vs(c),vx(),s!==null&&L(zo),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return rl(ea),null;case 25:return null;default:return null}}function ow(s,c){switch(sx(c),c.tag){case 3:rl(ea),Pe();break;case 26:case 27:case 5:ut(c);break;case 4:Pe();break;case 31:c.memoizedState!==null&&vs(c);break;case 13:vs(c);break;case 19:L(qn);break;case 10:rl(c.type);break;case 22:case 23:vs(c),vx(),s!==null&&L(zo);break;case 24:rl(ea)}}function Su(s,c){try{var x=c.updateQueue,v=x!==null?x.lastEffect:null;if(v!==null){var T=v.next;x=T;do{if((x.tag&s)===s){v=void 0;var R=x.create,K=x.inst;v=R(),K.destroy=v}x=x.next}while(x!==T)}}catch(oe){tn(c,c.return,oe)}}function ql(s,c,x){try{var v=c.updateQueue,T=v!==null?v.lastEffect:null;if(T!==null){var R=T.next;v=R;do{if((v.tag&s)===s){var K=v.inst,oe=K.destroy;if(oe!==void 0){K.destroy=void 0,T=c;var Ae=x,Qe=oe;try{Qe()}catch(xt){tn(T,Ae,xt)}}}v=v.next}while(v!==R)}}catch(xt){tn(c,c.return,xt)}}function cw(s){var c=s.updateQueue;if(c!==null){var x=s.stateNode;try{Q2(c,x)}catch(v){tn(s,s.return,v)}}}function uw(s,c,x){x.props=Xo(s.type,s.memoizedProps),x.state=s.memoizedState;try{x.componentWillUnmount()}catch(v){tn(s,c,v)}}function Au(s,c){try{var x=s.ref;if(x!==null){switch(s.tag){case 26:case 27:case 5:var v=s.stateNode;break;case 30:v=s.stateNode;break;default:v=s.stateNode}typeof x=="function"?s.refCleanup=x(v):x.current=v}}catch(T){tn(s,c,T)}}function ji(s,c){var x=s.ref,v=s.refCleanup;if(x!==null)if(typeof v=="function")try{v()}catch(T){tn(s,c,T)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(T){tn(s,c,T)}else x.current=null}function dw(s){var c=s.type,x=s.memoizedProps,v=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":x.autoFocus&&v.focus();break e;case"img":x.src?v.src=x.src:x.srcSet&&(v.srcset=x.srcSet)}}catch(T){tn(s,s.return,T)}}function Jx(s,c,x){try{var v=s.stateNode;B5(v,s.type,x,c),v[we]=c}catch(T){tn(s,s.return,T)}}function fw(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&to(s.type)||s.tag===4}function Qx(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||fw(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&to(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function em(s,c,x){var v=s.tag;if(v===5||v===6)s=s.stateNode,c?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(s,c):(c=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,c.appendChild(s),x=x._reactRootContainer,x!=null||c.onclick!==null||(c.onclick=Ja));else if(v!==4&&(v===27&&to(s.type)&&(x=s.stateNode,c=null),s=s.child,s!==null))for(em(s,c,x),s=s.sibling;s!==null;)em(s,c,x),s=s.sibling}function $f(s,c,x){var v=s.tag;if(v===5||v===6)s=s.stateNode,c?x.insertBefore(s,c):x.appendChild(s);else if(v!==4&&(v===27&&to(s.type)&&(x=s.stateNode),s=s.child,s!==null))for($f(s,c,x),s=s.sibling;s!==null;)$f(s,c,x),s=s.sibling}function hw(s){var c=s.stateNode,x=s.memoizedProps;try{for(var v=s.type,T=c.attributes;T.length;)c.removeAttributeNode(T[0]);Aa(c,v,x),c[me]=s,c[we]=x}catch(R){tn(s,s.return,R)}}var ll=!1,na=!1,tm=!1,xw=typeof WeakSet=="function"?WeakSet:Set,ga=null;function p5(s,c){if(s=s.containerInfo,_m=ph,s=te(s),se(s)){if("selectionStart"in s)var x={start:s.selectionStart,end:s.selectionEnd};else e:{x=(x=s.ownerDocument)&&x.defaultView||window;var v=x.getSelection&&x.getSelection();if(v&&v.rangeCount!==0){x=v.anchorNode;var T=v.anchorOffset,R=v.focusNode;v=v.focusOffset;try{x.nodeType,R.nodeType}catch{x=null;break e}var K=0,oe=-1,Ae=-1,Qe=0,xt=0,bt=s,tt=null;t:for(;;){for(var lt;bt!==x||T!==0&&bt.nodeType!==3||(oe=K+T),bt!==R||v!==0&&bt.nodeType!==3||(Ae=K+v),bt.nodeType===3&&(K+=bt.nodeValue.length),(lt=bt.firstChild)!==null;)tt=bt,bt=lt;for(;;){if(bt===s)break t;if(tt===x&&++Qe===T&&(oe=K),tt===R&&++xt===v&&(Ae=K),(lt=bt.nextSibling)!==null)break;bt=tt,tt=bt.parentNode}bt=lt}x=oe===-1||Ae===-1?null:{start:oe,end:Ae}}else x=null}x=x||{start:0,end:0}}else x=null;for(km={focusedElem:s,selectionRange:x},ph=!1,ga=c;ga!==null;)if(c=ga,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,ga=s;else for(;ga!==null;){switch(c=ga,R=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(x=0;x<s.length;x++)T=s[x],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&R!==null){s=void 0,x=c,T=R.memoizedProps,R=R.memoizedState,v=x.stateNode;try{var Lt=Xo(x.type,T);s=v.getSnapshotBeforeUpdate(Lt,R),v.__reactInternalSnapshotBeforeUpdate=s}catch(Zt){tn(x,x.return,Zt)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,x=s.nodeType,x===9)Am(s);else if(x===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Am(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=c.sibling,s!==null){s.return=c.return,ga=s;break}ga=c.return}}function mw(s,c,x){var v=x.flags;switch(x.tag){case 0:case 11:case 15:cl(s,x),v&4&&Su(5,x);break;case 1:if(cl(s,x),v&4)if(s=x.stateNode,c===null)try{s.componentDidMount()}catch(K){tn(x,x.return,K)}else{var T=Xo(x.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(T,c,s.__reactInternalSnapshotBeforeUpdate)}catch(K){tn(x,x.return,K)}}v&64&&cw(x),v&512&&Au(x,x.return);break;case 3:if(cl(s,x),v&64&&(s=x.updateQueue,s!==null)){if(c=null,x.child!==null)switch(x.child.tag){case 27:case 5:c=x.child.stateNode;break;case 1:c=x.child.stateNode}try{Q2(s,c)}catch(K){tn(x,x.return,K)}}break;case 27:c===null&&v&4&&hw(x);case 26:case 5:cl(s,x),c===null&&v&4&&dw(x),v&512&&Au(x,x.return);break;case 12:cl(s,x);break;case 31:cl(s,x),v&4&&bw(s,x);break;case 13:cl(s,x),v&4&&ww(s,x),v&64&&(s=x.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(x=A5.bind(null,x),X5(s,x))));break;case 22:if(v=x.memoizedState!==null||ll,!v){c=c!==null&&c.memoizedState!==null||na,T=ll;var R=na;ll=v,(na=c)&&!R?ul(s,x,(x.subtreeFlags&8772)!==0):cl(s,x),ll=T,na=R}break;case 30:break;default:cl(s,x)}}function gw(s){var c=s.alternate;c!==null&&(s.alternate=null,gw(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&Ze(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var An=null,ts=!1;function ol(s,c,x){for(x=x.child;x!==null;)pw(s,c,x),x=x.sibling}function pw(s,c,x){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(Nt,x)}catch{}switch(x.tag){case 26:na||ji(x,c),ol(s,c,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:na||ji(x,c);var v=An,T=ts;to(x.type)&&(An=x.stateNode,ts=!1),ol(s,c,x),Mu(x.stateNode),An=v,ts=T;break;case 5:na||ji(x,c);case 6:if(v=An,T=ts,An=null,ol(s,c,x),An=v,ts=T,An!==null)if(ts)try{(An.nodeType===9?An.body:An.nodeName==="HTML"?An.ownerDocument.body:An).removeChild(x.stateNode)}catch(R){tn(x,c,R)}else try{An.removeChild(x.stateNode)}catch(R){tn(x,c,R)}break;case 18:An!==null&&(ts?(s=An,cv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,x.stateNode),u0(s)):cv(An,x.stateNode));break;case 4:v=An,T=ts,An=x.stateNode.containerInfo,ts=!0,ol(s,c,x),An=v,ts=T;break;case 0:case 11:case 14:case 15:ql(2,x,c),na||ql(4,x,c),ol(s,c,x);break;case 1:na||(ji(x,c),v=x.stateNode,typeof v.componentWillUnmount=="function"&&uw(x,c,v)),ol(s,c,x);break;case 21:ol(s,c,x);break;case 22:na=(v=na)||x.memoizedState!==null,ol(s,c,x),na=v;break;default:ol(s,c,x)}}function bw(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{u0(s)}catch(x){tn(c,c.return,x)}}}function ww(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{u0(s)}catch(x){tn(c,c.return,x)}}function b5(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new xw),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new xw),c;default:throw Error(n(435,s.tag))}}function Zf(s,c){var x=b5(s);c.forEach(function(v){if(!x.has(v)){x.add(v);var T=N5.bind(null,s,v);v.then(T,T)}})}function rs(s,c){var x=c.deletions;if(x!==null)for(var v=0;v<x.length;v++){var T=x[v],R=s,K=c,oe=K;e:for(;oe!==null;){switch(oe.tag){case 27:if(to(oe.type)){An=oe.stateNode,ts=!1;break e}break;case 5:An=oe.stateNode,ts=!1;break e;case 3:case 4:An=oe.stateNode.containerInfo,ts=!0;break e}oe=oe.return}if(An===null)throw Error(n(160));pw(R,K,T),An=null,ts=!1,R=T.alternate,R!==null&&(R.return=null),T.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)vw(c,s),c=c.sibling}var ui=null;function vw(s,c){var x=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:rs(c,s),ns(s),v&4&&(ql(3,s,s.return),Su(3,s),ql(5,s,s.return));break;case 1:rs(c,s),ns(s),v&512&&(na||x===null||ji(x,x.return)),v&64&&ll&&(s=s.updateQueue,s!==null&&(v=s.callbacks,v!==null&&(x=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=x===null?v:x.concat(v))));break;case 26:var T=ui;if(rs(c,s),ns(s),v&512&&(na||x===null||ji(x,x.return)),v&4){var R=x!==null?x.memoizedState:null;if(v=s.memoizedState,x===null)if(v===null)if(s.stateNode===null){e:{v=s.type,x=s.memoizedProps,T=T.ownerDocument||T;t:switch(v){case"title":R=T.getElementsByTagName("title")[0],(!R||R[Ne]||R[me]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=T.createElement(v),T.head.insertBefore(R,T.querySelector("head > title"))),Aa(R,v,x),R[me]=s,It(R),v=R;break e;case"link":var K=vv("link","href",T).get(v+(x.href||""));if(K){for(var oe=0;oe<K.length;oe++)if(R=K[oe],R.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&R.getAttribute("rel")===(x.rel==null?null:x.rel)&&R.getAttribute("title")===(x.title==null?null:x.title)&&R.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){K.splice(oe,1);break t}}R=T.createElement(v),Aa(R,v,x),T.head.appendChild(R);break;case"meta":if(K=vv("meta","content",T).get(v+(x.content||""))){for(oe=0;oe<K.length;oe++)if(R=K[oe],R.getAttribute("content")===(x.content==null?null:""+x.content)&&R.getAttribute("name")===(x.name==null?null:x.name)&&R.getAttribute("property")===(x.property==null?null:x.property)&&R.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&R.getAttribute("charset")===(x.charSet==null?null:x.charSet)){K.splice(oe,1);break t}}R=T.createElement(v),Aa(R,v,x),T.head.appendChild(R);break;default:throw Error(n(468,v))}R[me]=s,It(R),v=R}s.stateNode=v}else yv(T,s.type,s.stateNode);else s.stateNode=wv(T,v,s.memoizedProps);else R!==v?(R===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):R.count--,v===null?yv(T,s.type,s.stateNode):wv(T,v,s.memoizedProps)):v===null&&s.stateNode!==null&&Jx(s,s.memoizedProps,x.memoizedProps)}break;case 27:rs(c,s),ns(s),v&512&&(na||x===null||ji(x,x.return)),x!==null&&v&4&&Jx(s,s.memoizedProps,x.memoizedProps);break;case 5:if(rs(c,s),ns(s),v&512&&(na||x===null||ji(x,x.return)),s.flags&32){T=s.stateNode;try{jl(T,"")}catch(Lt){tn(s,s.return,Lt)}}v&4&&s.stateNode!=null&&(T=s.memoizedProps,Jx(s,T,x!==null?x.memoizedProps:T)),v&1024&&(tm=!0);break;case 6:if(rs(c,s),ns(s),v&4){if(s.stateNode===null)throw Error(n(162));v=s.memoizedProps,x=s.stateNode;try{x.nodeValue=v}catch(Lt){tn(s,s.return,Lt)}}break;case 3:if(hh=null,T=ui,ui=dh(c.containerInfo),rs(c,s),ui=T,ns(s),v&4&&x!==null&&x.memoizedState.isDehydrated)try{u0(c.containerInfo)}catch(Lt){tn(s,s.return,Lt)}tm&&(tm=!1,yw(s));break;case 4:v=ui,ui=dh(s.stateNode.containerInfo),rs(c,s),ns(s),ui=v;break;case 12:rs(c,s),ns(s);break;case 31:rs(c,s),ns(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,Zf(s,v)));break;case 13:rs(c,s),ns(s),s.child.flags&8192&&s.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(Qf=Ke()),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,Zf(s,v)));break;case 22:T=s.memoizedState!==null;var Ae=x!==null&&x.memoizedState!==null,Qe=ll,xt=na;if(ll=Qe||T,na=xt||Ae,rs(c,s),na=xt,ll=Qe,ns(s),v&8192)e:for(c=s.stateNode,c._visibility=T?c._visibility&-2:c._visibility|1,T&&(x===null||Ae||ll||na||Ko(s)),x=null,c=s;;){if(c.tag===5||c.tag===26){if(x===null){Ae=x=c;try{if(R=Ae.stateNode,T)K=R.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{oe=Ae.stateNode;var bt=Ae.memoizedProps.style,tt=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;oe.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(Lt){tn(Ae,Ae.return,Lt)}}}else if(c.tag===6){if(x===null){Ae=c;try{Ae.stateNode.nodeValue=T?"":Ae.memoizedProps}catch(Lt){tn(Ae,Ae.return,Lt)}}}else if(c.tag===18){if(x===null){Ae=c;try{var lt=Ae.stateNode;T?uv(lt,!0):uv(Ae.stateNode,!1)}catch(Lt){tn(Ae,Ae.return,Lt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;x===c&&(x=null),c=c.return}x===c&&(x=null),c.sibling.return=c.return,c=c.sibling}v&4&&(v=s.updateQueue,v!==null&&(x=v.retryQueue,x!==null&&(v.retryQueue=null,Zf(s,x))));break;case 19:rs(c,s),ns(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,Zf(s,v)));break;case 30:break;case 21:break;default:rs(c,s),ns(s)}}function ns(s){var c=s.flags;if(c&2){try{for(var x,v=s.return;v!==null;){if(fw(v)){x=v;break}v=v.return}if(x==null)throw Error(n(160));switch(x.tag){case 27:var T=x.stateNode,R=Qx(s);$f(s,R,T);break;case 5:var K=x.stateNode;x.flags&32&&(jl(K,""),x.flags&=-33);var oe=Qx(s);$f(s,oe,K);break;case 3:case 4:var Ae=x.stateNode.containerInfo,Qe=Qx(s);em(s,Qe,Ae);break;default:throw Error(n(161))}}catch(xt){tn(s,s.return,xt)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function yw(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;yw(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function cl(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)mw(s,c.alternate,c),c=c.sibling}function Ko(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:ql(4,c,c.return),Ko(c);break;case 1:ji(c,c.return);var x=c.stateNode;typeof x.componentWillUnmount=="function"&&uw(c,c.return,x),Ko(c);break;case 27:Mu(c.stateNode);case 26:case 5:ji(c,c.return),Ko(c);break;case 22:c.memoizedState===null&&Ko(c);break;case 30:Ko(c);break;default:Ko(c)}s=s.sibling}}function ul(s,c,x){for(x=x&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var v=c.alternate,T=s,R=c,K=R.flags;switch(R.tag){case 0:case 11:case 15:ul(T,R,x),Su(4,R);break;case 1:if(ul(T,R,x),v=R,T=v.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Qe){tn(v,v.return,Qe)}if(v=R,T=v.updateQueue,T!==null){var oe=v.stateNode;try{var Ae=T.shared.hiddenCallbacks;if(Ae!==null)for(T.shared.hiddenCallbacks=null,T=0;T<Ae.length;T++)J2(Ae[T],oe)}catch(Qe){tn(v,v.return,Qe)}}x&&K&64&&cw(R),Au(R,R.return);break;case 27:hw(R);case 26:case 5:ul(T,R,x),x&&v===null&&K&4&&dw(R),Au(R,R.return);break;case 12:ul(T,R,x);break;case 31:ul(T,R,x),x&&K&4&&bw(T,R);break;case 13:ul(T,R,x),x&&K&4&&ww(T,R);break;case 22:R.memoizedState===null&&ul(T,R,x),Au(R,R.return);break;case 30:break;default:ul(T,R,x)}c=c.sibling}}function rm(s,c){var x=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==x&&(s!=null&&s.refCount++,x!=null&&fu(x))}function nm(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&fu(s))}function di(s,c,x,v){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)_w(s,c,x,v),c=c.sibling}function _w(s,c,x,v){var T=c.flags;switch(c.tag){case 0:case 11:case 15:di(s,c,x,v),T&2048&&Su(9,c);break;case 1:di(s,c,x,v);break;case 3:di(s,c,x,v),T&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&fu(s)));break;case 12:if(T&2048){di(s,c,x,v),s=c.stateNode;try{var R=c.memoizedProps,K=R.id,oe=R.onPostCommit;typeof oe=="function"&&oe(K,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Ae){tn(c,c.return,Ae)}}else di(s,c,x,v);break;case 31:di(s,c,x,v);break;case 13:di(s,c,x,v);break;case 23:break;case 22:R=c.stateNode,K=c.alternate,c.memoizedState!==null?R._visibility&2?di(s,c,x,v):Nu(s,c):R._visibility&2?di(s,c,x,v):(R._visibility|=2,Qc(s,c,x,v,(c.subtreeFlags&10256)!==0||!1)),T&2048&&rm(K,c);break;case 24:di(s,c,x,v),T&2048&&nm(c.alternate,c);break;default:di(s,c,x,v)}}function Qc(s,c,x,v,T){for(T=T&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var R=s,K=c,oe=x,Ae=v,Qe=K.flags;switch(K.tag){case 0:case 11:case 15:Qc(R,K,oe,Ae,T),Su(8,K);break;case 23:break;case 22:var xt=K.stateNode;K.memoizedState!==null?xt._visibility&2?Qc(R,K,oe,Ae,T):Nu(R,K):(xt._visibility|=2,Qc(R,K,oe,Ae,T)),T&&Qe&2048&&rm(K.alternate,K);break;case 24:Qc(R,K,oe,Ae,T),T&&Qe&2048&&nm(K.alternate,K);break;default:Qc(R,K,oe,Ae,T)}c=c.sibling}}function Nu(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var x=s,v=c,T=v.flags;switch(v.tag){case 22:Nu(x,v),T&2048&&rm(v.alternate,v);break;case 24:Nu(x,v),T&2048&&nm(v.alternate,v);break;default:Nu(x,v)}c=c.sibling}}var Cu=8192;function e0(s,c,x){if(s.subtreeFlags&Cu)for(s=s.child;s!==null;)kw(s,c,x),s=s.sibling}function kw(s,c,x){switch(s.tag){case 26:e0(s,c,x),s.flags&Cu&&s.memoizedState!==null&&a6(x,ui,s.memoizedState,s.memoizedProps);break;case 5:e0(s,c,x);break;case 3:case 4:var v=ui;ui=dh(s.stateNode.containerInfo),e0(s,c,x),ui=v;break;case 22:s.memoizedState===null&&(v=s.alternate,v!==null&&v.memoizedState!==null?(v=Cu,Cu=16777216,e0(s,c,x),Cu=v):e0(s,c,x));break;default:e0(s,c,x)}}function Ew(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function Tu(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var x=0;x<c.length;x++){var v=c[x];ga=v,Aw(v,s)}Ew(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Sw(s),s=s.sibling}function Sw(s){switch(s.tag){case 0:case 11:case 15:Tu(s),s.flags&2048&&ql(9,s,s.return);break;case 3:Tu(s);break;case 12:Tu(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,Jf(s)):Tu(s);break;default:Tu(s)}}function Jf(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var x=0;x<c.length;x++){var v=c[x];ga=v,Aw(v,s)}Ew(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:ql(8,c,c.return),Jf(c);break;case 22:x=c.stateNode,x._visibility&2&&(x._visibility&=-3,Jf(c));break;default:Jf(c)}s=s.sibling}}function Aw(s,c){for(;ga!==null;){var x=ga;switch(x.tag){case 0:case 11:case 15:ql(8,x,c);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var v=x.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:fu(x.memoizedState.cache)}if(v=x.child,v!==null)v.return=x,ga=v;else e:for(x=s;ga!==null;){v=ga;var T=v.sibling,R=v.return;if(gw(v),v===x){ga=null;break e}if(T!==null){T.return=R,ga=T;break e}ga=R}}}var w5={getCacheForType:function(s){var c=Ea(ea),x=c.data.get(s);return x===void 0&&(x=s(),c.data.set(s,x)),x},cacheSignal:function(){return Ea(ea).controller.signal}},v5=typeof WeakMap=="function"?WeakMap:Map,qr=0,hn=null,Nr=null,jr=0,en=0,ys=null,Yl=!1,t0=!1,am=!1,dl=0,Bn=0,$l=0,qo=0,sm=0,_s=0,r0=0,ju=null,as=null,im=!1,Qf=0,Nw=0,eh=1/0,th=null,Zl=null,fa=0,Jl=null,n0=null,fl=0,lm=0,om=null,Cw=null,Ru=0,cm=null;function ks(){return(qr&2)!==0&&jr!==0?jr&-jr:be.T!==null?mm():ae()}function Tw(){if(_s===0)if((jr&536870912)===0||Ir){var s=Xt;Xt<<=1,(Xt&3932160)===0&&(Xt=262144),_s=s}else _s=536870912;return s=ws.current,s!==null&&(s.flags|=32),_s}function ss(s,c,x){(s===hn&&(en===2||en===9)||s.cancelPendingCommit!==null)&&(a0(s,0),Ql(s,jr,_s,!1)),Rt(s,x),((qr&2)===0||s!==hn)&&(s===hn&&((qr&2)===0&&(qo|=x),Bn===4&&Ql(s,jr,_s,!1)),Ri(s))}function jw(s,c,x){if((qr&6)!==0)throw Error(n(327));var v=!x&&(c&127)===0&&(c&s.expiredLanes)===0||Wr(s,c),T=v?k5(s,c):dm(s,c,!0),R=v;do{if(T===0){t0&&!v&&Ql(s,c,0,!1);break}else{if(x=s.current.alternate,R&&!y5(x)){T=dm(s,c,!1),R=!1;continue}if(T===2){if(R=c,s.errorRecoveryDisabledLanes&R)var K=0;else K=s.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){c=K;e:{var oe=s;T=ju;var Ae=oe.current.memoizedState.isDehydrated;if(Ae&&(a0(oe,K).flags|=256),K=dm(oe,K,!1),K!==2){if(am&&!Ae){oe.errorRecoveryDisabledLanes|=R,qo|=R,T=4;break e}R=as,as=T,R!==null&&(as===null?as=R:as.push.apply(as,R))}T=K}if(R=!1,T!==2)continue}}if(T===1){a0(s,0),Ql(s,c,0,!0);break}e:{switch(v=s,R=T,R){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:Ql(v,c,_s,!Yl);break e;case 2:as=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(T=Qf+300-Ke(),10<T)){if(Ql(v,c,_s,!Yl),En(v,0,!0)!==0)break e;fl=c,v.timeoutHandle=lv(Rw.bind(null,v,x,as,th,im,c,_s,qo,r0,Yl,R,"Throttled",-0,0),T);break e}Rw(v,x,as,th,im,c,_s,qo,r0,Yl,R,null,-0,0)}}break}while(!0);Ri(s)}function Rw(s,c,x,v,T,R,K,oe,Ae,Qe,xt,bt,tt,lt){if(s.timeoutHandle=-1,bt=c.subtreeFlags,bt&8192||(bt&16785408)===16785408){bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ja},kw(c,R,bt);var Lt=(R&62914560)===R?Qf-Ke():(R&4194048)===R?Nw-Ke():0;if(Lt=s6(bt,Lt),Lt!==null){fl=R,s.cancelPendingCommit=Lt(Pw.bind(null,s,c,R,x,v,T,K,oe,Ae,xt,bt,null,tt,lt)),Ql(s,R,K,!Qe);return}}Pw(s,c,R,x,v,T,K,oe,Ae)}function y5(s){for(var c=s;;){var x=c.tag;if((x===0||x===11||x===15)&&c.flags&16384&&(x=c.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var v=0;v<x.length;v++){var T=x[v],R=T.getSnapshot;T=T.value;try{if(!y(R(),T))return!1}catch{return!1}}if(x=c.child,c.subtreeFlags&16384&&x!==null)x.return=c,c=x;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ql(s,c,x,v){c&=~sm,c&=~qo,s.suspendedLanes|=c,s.pingedLanes&=~c,v&&(s.warmLanes|=c),v=s.expirationTimes;for(var T=c;0<T;){var R=31-Dt(T),K=1<<R;v[R]=-1,T&=~K}x!==0&&pr(s,x,c)}function rh(){return(qr&6)===0?(Ou(0),!1):!0}function um(){if(Nr!==null){if(en===0)var s=Nr.return;else s=Nr,tl=Po=null,Ax(s),qc=null,xu=0,s=Nr;for(;s!==null;)ow(s.alternate,s),s=s.return;Nr=null}}function a0(s,c){var x=s.timeoutHandle;x!==-1&&(s.timeoutHandle=-1,z5(x)),x=s.cancelPendingCommit,x!==null&&(s.cancelPendingCommit=null,x()),fl=0,um(),hn=s,Nr=x=Qi(s.current,null),jr=c,en=0,ys=null,Yl=!1,t0=Wr(s,c),am=!1,r0=_s=sm=qo=$l=Bn=0,as=ju=null,im=!1,(c&8)!==0&&(c|=c&32);var v=s.entangledLanes;if(v!==0)for(s=s.entanglements,v&=c;0<v;){var T=31-Dt(v),R=1<<T;c|=s[T],v&=~R}return dl=c,kf(),x}function Ow(s,c){xr=null,be.H=_u,c===Kc||c===Rf?(c=q2(),en=3):c===xx?(c=q2(),en=4):en=c===Hx?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ys=c,Nr===null&&(Bn=1,Wf(s,Us(c,s.current)))}function Iw(){var s=ws.current;return s===null?!0:(jr&4194048)===jr?Gs===null:(jr&62914560)===jr||(jr&536870912)!==0?s===Gs:!1}function Dw(){var s=be.H;return be.H=_u,s===null?_u:s}function Mw(){var s=be.A;return be.A=w5,s}function nh(){Bn=4,Yl||(jr&4194048)!==jr&&ws.current!==null||(t0=!0),($l&134217727)===0&&(qo&134217727)===0||hn===null||Ql(hn,jr,_s,!1)}function dm(s,c,x){var v=qr;qr|=2;var T=Dw(),R=Mw();(hn!==s||jr!==c)&&(th=null,a0(s,c)),c=!1;var K=Bn;e:do try{if(en!==0&&Nr!==null){var oe=Nr,Ae=ys;switch(en){case 8:um(),K=6;break e;case 3:case 2:case 9:case 6:ws.current===null&&(c=!0);var Qe=en;if(en=0,ys=null,s0(s,oe,Ae,Qe),x&&t0){K=0;break e}break;default:Qe=en,en=0,ys=null,s0(s,oe,Ae,Qe)}}_5(),K=Bn;break}catch(xt){Ow(s,xt)}while(!0);return c&&s.shellSuspendCounter++,tl=Po=null,qr=v,be.H=T,be.A=R,Nr===null&&(hn=null,jr=0,kf()),K}function _5(){for(;Nr!==null;)Fw(Nr)}function k5(s,c){var x=qr;qr|=2;var v=Dw(),T=Mw();hn!==s||jr!==c?(th=null,eh=Ke()+500,a0(s,c)):t0=Wr(s,c);e:do try{if(en!==0&&Nr!==null){c=Nr;var R=ys;t:switch(en){case 1:en=0,ys=null,s0(s,c,R,1);break;case 2:case 9:if(X2(R)){en=0,ys=null,Lw(c);break}c=function(){en!==2&&en!==9||hn!==s||(en=7),Ri(s)},R.then(c,c);break e;case 3:en=7;break e;case 4:en=5;break e;case 7:X2(R)?(en=0,ys=null,Lw(c)):(en=0,ys=null,s0(s,c,R,7));break;case 5:var K=null;switch(Nr.tag){case 26:K=Nr.memoizedState;case 5:case 27:var oe=Nr;if(K?_v(K):oe.stateNode.complete){en=0,ys=null;var Ae=oe.sibling;if(Ae!==null)Nr=Ae;else{var Qe=oe.return;Qe!==null?(Nr=Qe,ah(Qe)):Nr=null}break t}}en=0,ys=null,s0(s,c,R,5);break;case 6:en=0,ys=null,s0(s,c,R,6);break;case 8:um(),Bn=6;break e;default:throw Error(n(462))}}E5();break}catch(xt){Ow(s,xt)}while(!0);return tl=Po=null,be.H=v,be.A=T,qr=x,Nr!==null?0:(hn=null,jr=0,kf(),Bn)}function E5(){for(;Nr!==null&&!He();)Fw(Nr)}function Fw(s){var c=iw(s.alternate,s,dl);s.memoizedProps=s.pendingProps,c===null?ah(s):Nr=c}function Lw(s){var c=s,x=c.alternate;switch(c.tag){case 15:case 0:c=ew(x,c,c.pendingProps,c.type,void 0,jr);break;case 11:c=ew(x,c,c.pendingProps,c.type.render,c.ref,jr);break;case 5:Ax(c);default:ow(x,c),c=Nr=M2(c,dl),c=iw(x,c,dl)}s.memoizedProps=s.pendingProps,c===null?ah(s):Nr=c}function s0(s,c,x,v){tl=Po=null,Ax(c),qc=null,xu=0;var T=c.return;try{if(f5(s,T,c,x,jr)){Bn=1,Wf(s,Us(x,s.current)),Nr=null;return}}catch(R){if(T!==null)throw Nr=T,R;Bn=1,Wf(s,Us(x,s.current)),Nr=null;return}c.flags&32768?(Ir||v===1?s=!0:t0||(jr&536870912)!==0?s=!1:(Yl=s=!0,(v===2||v===9||v===3||v===6)&&(v=ws.current,v!==null&&v.tag===13&&(v.flags|=16384))),Bw(c,s)):ah(c)}function ah(s){var c=s;do{if((c.flags&32768)!==0){Bw(c,Yl);return}s=c.return;var x=m5(c.alternate,c,dl);if(x!==null){Nr=x;return}if(c=c.sibling,c!==null){Nr=c;return}Nr=c=s}while(c!==null);Bn===0&&(Bn=5)}function Bw(s,c){do{var x=g5(s.alternate,s);if(x!==null){x.flags&=32767,Nr=x;return}if(x=s.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!c&&(s=s.sibling,s!==null)){Nr=s;return}Nr=s=x}while(s!==null);Bn=6,Nr=null}function Pw(s,c,x,v,T,R,K,oe,Ae){s.cancelPendingCommit=null;do sh();while(fa!==0);if((qr&6)!==0)throw Error(n(327));if(c!==null){if(c===s.current)throw Error(n(177));if(R=c.lanes|c.childLanes,R|=Q1,Mt(s,x,R,K,oe,Ae),s===hn&&(Nr=hn=null,jr=0),n0=c,Jl=s,fl=x,lm=R,om=T,Cw=v,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,C5(Xe,function(){return Gw(),null})):(s.callbackNode=null,s.callbackPriority=0),v=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||v){v=be.T,be.T=null,T=fe.p,fe.p=2,K=qr,qr|=4;try{p5(s,c,x)}finally{qr=K,fe.p=T,be.T=v}}fa=1,Uw(),zw(),Hw()}}function Uw(){if(fa===1){fa=0;var s=Jl,c=n0,x=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||x){x=be.T,be.T=null;var v=fe.p;fe.p=2;var T=qr;qr|=4;try{vw(c,s);var R=km,K=te(s.containerInfo),oe=R.focusedElem,Ae=R.selectionRange;if(K!==oe&&oe&&oe.ownerDocument&&G(oe.ownerDocument.documentElement,oe)){if(Ae!==null&&se(oe)){var Qe=Ae.start,xt=Ae.end;if(xt===void 0&&(xt=Qe),"selectionStart"in oe)oe.selectionStart=Qe,oe.selectionEnd=Math.min(xt,oe.value.length);else{var bt=oe.ownerDocument||document,tt=bt&&bt.defaultView||window;if(tt.getSelection){var lt=tt.getSelection(),Lt=oe.textContent.length,Zt=Math.min(Ae.start,Lt),on=Ae.end===void 0?Zt:Math.min(Ae.end,Lt);!lt.extend&&Zt>on&&(K=on,on=Zt,Zt=K);var Ue=M(oe,Zt),Oe=M(oe,on);if(Ue&&Oe&&(lt.rangeCount!==1||lt.anchorNode!==Ue.node||lt.anchorOffset!==Ue.offset||lt.focusNode!==Oe.node||lt.focusOffset!==Oe.offset)){var Je=bt.createRange();Je.setStart(Ue.node,Ue.offset),lt.removeAllRanges(),Zt>on?(lt.addRange(Je),lt.extend(Oe.node,Oe.offset)):(Je.setEnd(Oe.node,Oe.offset),lt.addRange(Je))}}}}for(bt=[],lt=oe;lt=lt.parentNode;)lt.nodeType===1&&bt.push({element:lt,left:lt.scrollLeft,top:lt.scrollTop});for(typeof oe.focus=="function"&&oe.focus(),oe=0;oe<bt.length;oe++){var pt=bt[oe];pt.element.scrollLeft=pt.left,pt.element.scrollTop=pt.top}}ph=!!_m,km=_m=null}finally{qr=T,fe.p=v,be.T=x}}s.current=c,fa=2}}function zw(){if(fa===2){fa=0;var s=Jl,c=n0,x=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||x){x=be.T,be.T=null;var v=fe.p;fe.p=2;var T=qr;qr|=4;try{mw(s,c.alternate,c)}finally{qr=T,fe.p=v,be.T=x}}fa=3}}function Hw(){if(fa===4||fa===3){fa=0,je();var s=Jl,c=n0,x=fl,v=Cw;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?fa=5:(fa=0,n0=Jl=null,Vw(s,s.pendingLanes));var T=s.pendingLanes;if(T===0&&(Zl=null),Wn(x),c=c.stateNode,mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(Nt,c,void 0,(c.current.flags&128)===128)}catch{}if(v!==null){c=be.T,T=fe.p,fe.p=2,be.T=null;try{for(var R=s.onRecoverableError,K=0;K<v.length;K++){var oe=v[K];R(oe.value,{componentStack:oe.stack})}}finally{be.T=c,fe.p=T}}(fl&3)!==0&&sh(),Ri(s),T=s.pendingLanes,(x&261930)!==0&&(T&42)!==0?s===cm?Ru++:(Ru=0,cm=s):Ru=0,Ou(0)}}function Vw(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,fu(c)))}function sh(){return Uw(),zw(),Hw(),Gw()}function Gw(){if(fa!==5)return!1;var s=Jl,c=lm;lm=0;var x=Wn(fl),v=be.T,T=fe.p;try{fe.p=32>x?32:x,be.T=null,x=om,om=null;var R=Jl,K=fl;if(fa=0,n0=Jl=null,fl=0,(qr&6)!==0)throw Error(n(331));var oe=qr;if(qr|=4,Sw(R.current),_w(R,R.current,K,x),qr=oe,Ou(0,!1),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(Nt,R)}catch{}return!0}finally{fe.p=T,be.T=v,Vw(s,c)}}function Ww(s,c,x){c=Us(x,c),c=zx(s.stateNode,c,2),s=Wl(s,c,2),s!==null&&(Rt(s,2),Ri(s))}function tn(s,c,x){if(s.tag===3)Ww(s,s,x);else for(;c!==null;){if(c.tag===3){Ww(c,s,x);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Zl===null||!Zl.has(v))){s=Us(x,s),x=Xb(2),v=Wl(c,x,2),v!==null&&(Kb(x,v,c,s),Rt(v,2),Ri(v));break}}c=c.return}}function fm(s,c,x){var v=s.pingCache;if(v===null){v=s.pingCache=new v5;var T=new Set;v.set(c,T)}else T=v.get(c),T===void 0&&(T=new Set,v.set(c,T));T.has(x)||(am=!0,T.add(x),s=S5.bind(null,s,c,x),c.then(s,s))}function S5(s,c,x){var v=s.pingCache;v!==null&&v.delete(c),s.pingedLanes|=s.suspendedLanes&x,s.warmLanes&=~x,hn===s&&(jr&x)===x&&(Bn===4||Bn===3&&(jr&62914560)===jr&&300>Ke()-Qf?(qr&2)===0&&a0(s,0):sm|=x,r0===jr&&(r0=0)),Ri(s)}function Xw(s,c){c===0&&(c=ze()),s=Fo(s,c),s!==null&&(Rt(s,c),Ri(s))}function A5(s){var c=s.memoizedState,x=0;c!==null&&(x=c.retryLane),Xw(s,x)}function N5(s,c){var x=0;switch(s.tag){case 31:case 13:var v=s.stateNode,T=s.memoizedState;T!==null&&(x=T.retryLane);break;case 19:v=s.stateNode;break;case 22:v=s.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(c),Xw(s,x)}function C5(s,c){return at(s,c)}var ih=null,i0=null,hm=!1,lh=!1,xm=!1,eo=0;function Ri(s){s!==i0&&s.next===null&&(i0===null?ih=i0=s:i0=i0.next=s),lh=!0,hm||(hm=!0,j5())}function Ou(s,c){if(!xm&&lh){xm=!0;do for(var x=!1,v=ih;v!==null;){if(s!==0){var T=v.pendingLanes;if(T===0)var R=0;else{var K=v.suspendedLanes,oe=v.pingedLanes;R=(1<<31-Dt(42|s)+1)-1,R&=T&~(K&~oe),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(x=!0,$w(v,R))}else R=jr,R=En(v,v===hn?R:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(R&3)===0||Wr(v,R)||(x=!0,$w(v,R));v=v.next}while(x);xm=!1}}function T5(){Kw()}function Kw(){lh=hm=!1;var s=0;eo!==0&&U5()&&(s=eo);for(var c=Ke(),x=null,v=ih;v!==null;){var T=v.next,R=qw(v,c);R===0?(v.next=null,x===null?ih=T:x.next=T,T===null&&(i0=x)):(x=v,(s!==0||(R&3)!==0)&&(lh=!0)),v=T}fa!==0&&fa!==5||Ou(s),eo!==0&&(eo=0)}function qw(s,c){for(var x=s.suspendedLanes,v=s.pingedLanes,T=s.expirationTimes,R=s.pendingLanes&-62914561;0<R;){var K=31-Dt(R),oe=1<<K,Ae=T[K];Ae===-1?((oe&x)===0||(oe&v)!==0)&&(T[K]=Or(oe,c)):Ae<=c&&(s.expiredLanes|=oe),R&=~oe}if(c=hn,x=jr,x=En(s,s===c?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v=s.callbackNode,x===0||s===c&&(en===2||en===9)||s.cancelPendingCommit!==null)return v!==null&&v!==null&&Fe(v),s.callbackNode=null,s.callbackPriority=0;if((x&3)===0||Wr(s,x)){if(c=x&-x,c===s.callbackPriority)return c;switch(v!==null&&Fe(v),Wn(x)){case 2:case 8:x=Me;break;case 32:x=Xe;break;case 268435456:x=At;break;default:x=Xe}return v=Yw.bind(null,s),x=at(x,v),s.callbackPriority=c,s.callbackNode=x,c}return v!==null&&v!==null&&Fe(v),s.callbackPriority=2,s.callbackNode=null,2}function Yw(s,c){if(fa!==0&&fa!==5)return s.callbackNode=null,s.callbackPriority=0,null;var x=s.callbackNode;if(sh()&&s.callbackNode!==x)return null;var v=jr;return v=En(s,s===hn?v:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v===0?null:(jw(s,v,c),qw(s,Ke()),s.callbackNode!=null&&s.callbackNode===x?Yw.bind(null,s):null)}function $w(s,c){if(sh())return null;jw(s,c,!0)}function j5(){H5(function(){(qr&6)!==0?at(qe,T5):Kw()})}function mm(){if(eo===0){var s=Wc;s===0&&(s=Qr,Qr<<=1,(Qr&261888)===0&&(Qr=256)),eo=s}return eo}function Zw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Rl(""+s)}function Jw(s,c){var x=c.ownerDocument.createElement("input");return x.name=c.name,x.value=c.value,s.id&&x.setAttribute("form",s.id),c.parentNode.insertBefore(x,c),s=new FormData(s),x.parentNode.removeChild(x),s}function R5(s,c,x,v,T){if(c==="submit"&&x&&x.stateNode===T){var R=Zw((T[we]||null).action),K=v.submitter;K&&(c=(c=K[we]||null)?Zw(c.formAction):K.getAttribute("formAction"),c!==null&&(R=c,K=null));var oe=new ca("action","action",null,v,T);s.push({event:oe,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(eo!==0){var Ae=K?Jw(T,K):new FormData(T);Mx(x,{pending:!0,data:Ae,method:T.method,action:R},null,Ae)}}else typeof R=="function"&&(oe.preventDefault(),Ae=K?Jw(T,K):new FormData(T),Mx(x,{pending:!0,data:Ae,method:T.method,action:R},R,Ae))},currentTarget:T}]})}}for(var gm=0;gm<cu.length;gm++){var pm=cu[gm],O5=pm.toLowerCase(),I5=pm[0].toUpperCase()+pm.slice(1);ci(O5,"on"+I5)}ci(es,"onAnimationEnd"),ci(_a,"onAnimationIteration"),ci(Jr,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(da,"onTransitionRun"),ci(Xa,"onTransitionStart"),ci(Bl,"onTransitionCancel"),ci(Ji,"onTransitionEnd"),jn("onMouseEnter",["mouseout","mouseover"]),jn("onMouseLeave",["mouseout","mouseover"]),jn("onPointerEnter",["pointerout","pointerover"]),jn("onPointerLeave",["pointerout","pointerover"]),$t("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$t("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$t("onBeforeInput",["compositionend","keypress","textInput","paste"]),$t("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$t("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$t("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Iu));function Qw(s,c){c=(c&4)!==0;for(var x=0;x<s.length;x++){var v=s[x],T=v.event;v=v.listeners;e:{var R=void 0;if(c)for(var K=v.length-1;0<=K;K--){var oe=v[K],Ae=oe.instance,Qe=oe.currentTarget;if(oe=oe.listener,Ae!==R&&T.isPropagationStopped())break e;R=oe,T.currentTarget=Qe;try{R(T)}catch(xt){_f(xt)}T.currentTarget=null,R=Ae}else for(K=0;K<v.length;K++){if(oe=v[K],Ae=oe.instance,Qe=oe.currentTarget,oe=oe.listener,Ae!==R&&T.isPropagationStopped())break e;R=oe,T.currentTarget=Qe;try{R(T)}catch(xt){_f(xt)}T.currentTarget=null,R=Ae}}}}function Cr(s,c){var x=c[Ye];x===void 0&&(x=c[Ye]=new Set);var v=s+"__bubble";x.has(v)||(ev(c,s,2,!1),x.add(v))}function bm(s,c,x){var v=0;c&&(v|=4),ev(x,s,v,c)}var oh="_reactListening"+Math.random().toString(36).slice(2);function wm(s){if(!s[oh]){s[oh]=!0,ot.forEach(function(x){x!=="selectionchange"&&(D5.has(x)||bm(x,!1,s),bm(x,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[oh]||(c[oh]=!0,bm("selectionchange",!1,c))}}function ev(s,c,x,v){switch(Tv(c)){case 2:var T=o6;break;case 8:T=c6;break;default:T=Dm}x=T.bind(null,c,x,s),T=void 0,!ru||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(T=!0),v?T!==void 0?s.addEventListener(c,x,{capture:!0,passive:T}):s.addEventListener(c,x,!0):T!==void 0?s.addEventListener(c,x,{passive:T}):s.addEventListener(c,x,!1)}function vm(s,c,x,v,T){var R=v;if((c&1)===0&&(c&2)===0&&v!==null)e:for(;;){if(v===null)return;var K=v.tag;if(K===3||K===4){var oe=v.stateNode.containerInfo;if(oe===T)break;if(K===4)for(K=v.return;K!==null;){var Ae=K.tag;if((Ae===3||Ae===4)&&K.stateNode.containerInfo===T)return;K=K.return}for(;oe!==null;){if(K=dt(oe),K===null)return;if(Ae=K.tag,Ae===5||Ae===6||Ae===26||Ae===27){v=R=K;continue e}oe=oe.parentNode}}v=v.return}df(function(){var Qe=R,xt=tu(x),bt=[];e:{var tt=yf.get(s);if(tt!==void 0){var lt=ca,Lt=s;switch(s){case"keypress":if(Ei(x)===0)break e;case"keydown":case"keyup":lt=Fc;break;case"focusin":Lt="focus",lt=su;break;case"focusout":Lt="blur",lt=su;break;case"beforeblur":case"afterblur":lt=su;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=Kr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Dc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=$1;break;case es:case _a:case Jr:lt=wr;break;case Ji:lt=qi;break;case"scroll":case"scrollend":lt=ff;break;case"wheel":lt=Z1;break;case"copy":case"cut":case"paste":lt=Mc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Zr;break;case"toggle":case"beforetoggle":lt=lu}var Zt=(c&4)!==0,on=!Zt&&(s==="scroll"||s==="scrollend"),Ue=Zt?tt!==null?tt+"Capture":null:tt;Zt=[];for(var Oe=Qe,Je;Oe!==null;){var pt=Oe;if(Je=pt.stateNode,pt=pt.tag,pt!==5&&pt!==26&&pt!==27||Je===null||Ue===null||(pt=ar(Oe,Ue),pt!=null&&Zt.push(Du(Oe,pt,Je))),on)break;Oe=Oe.return}0<Zt.length&&(tt=new lt(tt,Lt,null,x,xt),bt.push({event:tt,listeners:Zt}))}}if((c&7)===0){e:{if(tt=s==="mouseover"||s==="pointerover",lt=s==="mouseout"||s==="pointerout",tt&&x!==Co&&(Lt=x.relatedTarget||x.fromElement)&&(dt(Lt)||Lt[_e]))break e;if((lt||tt)&&(tt=xt.window===xt?xt:(tt=xt.ownerDocument)?tt.defaultView||tt.parentWindow:window,lt?(Lt=x.relatedTarget||x.toElement,lt=Qe,Lt=Lt?dt(Lt):null,Lt!==null&&(on=i(Lt),Zt=Lt.tag,Lt!==on||Zt!==5&&Zt!==27&&Zt!==6)&&(Lt=null)):(lt=null,Lt=Qe),lt!==Lt)){if(Zt=Kr,pt="onMouseLeave",Ue="onMouseEnter",Oe="mouse",(s==="pointerout"||s==="pointerover")&&(Zt=Zr,pt="onPointerLeave",Ue="onPointerEnter",Oe="pointer"),on=lt==null?tt:ht(lt),Je=Lt==null?tt:ht(Lt),tt=new Zt(pt,Oe+"leave",lt,x,xt),tt.target=on,tt.relatedTarget=Je,pt=null,dt(xt)===Qe&&(Zt=new Zt(Ue,Oe+"enter",Lt,x,xt),Zt.target=Je,Zt.relatedTarget=on,pt=Zt),on=pt,lt&&Lt)t:{for(Zt=M5,Ue=lt,Oe=Lt,Je=0,pt=Ue;pt;pt=Zt(pt))Je++;pt=0;for(var Gt=Oe;Gt;Gt=Zt(Gt))pt++;for(;0<Je-pt;)Ue=Zt(Ue),Je--;for(;0<pt-Je;)Oe=Zt(Oe),pt--;for(;Je--;){if(Ue===Oe||Oe!==null&&Ue===Oe.alternate){Zt=Ue;break t}Ue=Zt(Ue),Oe=Zt(Oe)}Zt=null}else Zt=null;lt!==null&&tv(bt,tt,lt,Zt,!1),Lt!==null&&on!==null&&tv(bt,on,Lt,Zt,!0)}}e:{if(tt=Qe?ht(Qe):window,lt=tt.nodeName&&tt.nodeName.toLowerCase(),lt==="select"||lt==="input"&&tt.type==="file")var Hr=ps;else if(ou(tt))if(vf)Hr=p;else{Hr=d;var Ut=l}else lt=tt.nodeName,!lt||lt.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Qe&&un(Qe.elementType)&&(Hr=ps):Hr=h;if(Hr&&(Hr=Hr(s,Qe))){gs(bt,Hr,x,xt);break e}Ut&&Ut(s,tt,Qe),s==="focusout"&&Qe&&tt.type==="number"&&Qe.memoizedProps.value!=null&&ye(tt,"number",tt.value)}switch(Ut=Qe?ht(Qe):window,s){case"focusin":(ou(Ut)||Ut.contentEditable==="true")&&(Ce=Ut,Re=Qe,Ge=null);break;case"focusout":Ge=Re=Ce=null;break;case"mousedown":rt=!0;break;case"contextmenu":case"mouseup":case"dragend":rt=!1,Et(bt,x,xt);break;case"selectionchange":if(ke)break;case"keydown":case"keyup":Et(bt,x,xt)}var vr;if(Ro)e:{switch(s){case"compositionstart":var Rr="onCompositionStart";break e;case"compositionend":Rr="onCompositionEnd";break e;case"compositionupdate":Rr="onCompositionUpdate";break e}Rr=void 0}else Ll?wf(s,x)&&(Rr="onCompositionEnd"):s==="keydown"&&x.keyCode===229&&(Rr="onCompositionStart");Rr&&(bf&&x.locale!=="ko"&&(Ll||Rr!=="onCompositionStart"?Rr==="onCompositionEnd"&&Ll&&(vr=Ol()):(li=xt,oi="value"in li?li.value:li.textContent,Ll=!0)),Ut=ch(Qe,Rr),0<Ut.length&&(Rr=new mf(Rr,s,null,x,xt),bt.push({event:Rr,listeners:Ut}),vr?Rr.data=vr:(vr=Fl(x),vr!==null&&(Rr.data=vr)))),(vr=pf?Ni(s,x):Bc(s,x))&&(Rr=ch(Qe,"onBeforeInput"),0<Rr.length&&(Ut=new mf("onBeforeInput","beforeinput",null,x,xt),bt.push({event:Ut,listeners:Rr}),Ut.data=vr)),R5(bt,s,Qe,x,xt)}Qw(bt,c)})}function Du(s,c,x){return{instance:s,listener:c,currentTarget:x}}function ch(s,c){for(var x=c+"Capture",v=[];s!==null;){var T=s,R=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||R===null||(T=ar(s,x),T!=null&&v.unshift(Du(s,T,R)),T=ar(s,c),T!=null&&v.push(Du(s,T,R))),s.tag===3)return v;s=s.return}return[]}function M5(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function tv(s,c,x,v,T){for(var R=c._reactName,K=[];x!==null&&x!==v;){var oe=x,Ae=oe.alternate,Qe=oe.stateNode;if(oe=oe.tag,Ae!==null&&Ae===v)break;oe!==5&&oe!==26&&oe!==27||Qe===null||(Ae=Qe,T?(Qe=ar(x,R),Qe!=null&&K.unshift(Du(x,Qe,Ae))):T||(Qe=ar(x,R),Qe!=null&&K.push(Du(x,Qe,Ae)))),x=x.return}K.length!==0&&s.push({event:c,listeners:K})}var F5=/\r\n?/g,L5=/\u0000|\uFFFD/g;function rv(s){return(typeof s=="string"?s:""+s).replace(F5,`
`).replace(L5,"")}function nv(s,c){return c=rv(c),rv(s)===c}function ln(s,c,x,v,T,R){switch(x){case"children":typeof v=="string"?c==="body"||c==="textarea"&&v===""||jl(s,v):(typeof v=="number"||typeof v=="bigint")&&c!=="body"&&jl(s,""+v);break;case"className":fs(s,"class",v);break;case"tabIndex":fs(s,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":fs(s,x,v);break;case"style":Vt(s,v,R);break;case"data":if(c!=="object"){fs(s,"data",v);break}case"src":case"href":if(v===""&&(c!=="a"||x!=="href")){s.removeAttribute(x);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(x);break}v=Rl(""+v),s.setAttribute(x,v);break;case"action":case"formAction":if(typeof v=="function"){s.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(x==="formAction"?(c!=="input"&&ln(s,c,"name",T.name,T,null),ln(s,c,"formEncType",T.formEncType,T,null),ln(s,c,"formMethod",T.formMethod,T,null),ln(s,c,"formTarget",T.formTarget,T,null)):(ln(s,c,"encType",T.encType,T,null),ln(s,c,"method",T.method,T,null),ln(s,c,"target",T.target,T,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(x);break}v=Rl(""+v),s.setAttribute(x,v);break;case"onClick":v!=null&&(s.onclick=Ja);break;case"onScroll":v!=null&&Cr("scroll",s);break;case"onScrollEnd":v!=null&&Cr("scrollend",s);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(x=v.__html,x!=null){if(T.children!=null)throw Error(n(60));s.innerHTML=x}}break;case"multiple":s.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":s.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){s.removeAttribute("xlink:href");break}x=Rl(""+v),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(x,""+v):s.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(x,""):s.removeAttribute(x);break;case"capture":case"download":v===!0?s.setAttribute(x,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(x,v):s.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?s.setAttribute(x,v):s.removeAttribute(x);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?s.removeAttribute(x):s.setAttribute(x,v);break;case"popover":Cr("beforetoggle",s),Cr("toggle",s),Dn(s,"popover",v);break;case"xlinkActuate":Va(s,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Va(s,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Va(s,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Va(s,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Va(s,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Va(s,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Va(s,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Va(s,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Va(s,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Dn(s,"is",v);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=uf.get(x)||x,Dn(s,x,v))}}function ym(s,c,x,v,T,R){switch(x){case"style":Vt(s,v,R);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(x=v.__html,x!=null){if(T.children!=null)throw Error(n(60));s.innerHTML=x}}break;case"children":typeof v=="string"?jl(s,v):(typeof v=="number"||typeof v=="bigint")&&jl(s,""+v);break;case"onScroll":v!=null&&Cr("scroll",s);break;case"onScrollEnd":v!=null&&Cr("scrollend",s);break;case"onClick":v!=null&&(s.onclick=Ja);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Br.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(T=x.endsWith("Capture"),c=x.slice(2,T?x.length-7:void 0),R=s[we]||null,R=R!=null?R[x]:null,typeof R=="function"&&s.removeEventListener(c,R,T),typeof v=="function")){typeof R!="function"&&R!==null&&(x in s?s[x]=null:s.hasAttribute(x)&&s.removeAttribute(x)),s.addEventListener(c,v,T);break e}x in s?s[x]=v:v===!0?s.setAttribute(x,""):Dn(s,x,v)}}}function Aa(s,c,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cr("error",s),Cr("load",s);var v=!1,T=!1,R;for(R in x)if(x.hasOwnProperty(R)){var K=x[R];if(K!=null)switch(R){case"src":v=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:ln(s,c,R,K,x,null)}}T&&ln(s,c,"srcSet",x.srcSet,x,null),v&&ln(s,c,"src",x.src,x,null);return;case"input":Cr("invalid",s);var oe=R=K=T=null,Ae=null,Qe=null;for(v in x)if(x.hasOwnProperty(v)){var xt=x[v];if(xt!=null)switch(v){case"name":T=xt;break;case"type":K=xt;break;case"checked":Ae=xt;break;case"defaultChecked":Qe=xt;break;case"value":R=xt;break;case"defaultValue":oe=xt;break;case"children":case"dangerouslySetInnerHTML":if(xt!=null)throw Error(n(137,c));break;default:ln(s,c,v,xt,x,null)}}$e(s,R,oe,Ae,Qe,K,T,!1);return;case"select":Cr("invalid",s),v=K=R=null;for(T in x)if(x.hasOwnProperty(T)&&(oe=x[T],oe!=null))switch(T){case"value":R=oe;break;case"defaultValue":K=oe;break;case"multiple":v=oe;default:ln(s,c,T,oe,x,null)}c=R,x=K,s.multiple=!!v,c!=null?Bt(s,!!v,c,!1):x!=null&&Bt(s,!!v,x,!0);return;case"textarea":Cr("invalid",s),R=T=v=null;for(K in x)if(x.hasOwnProperty(K)&&(oe=x[K],oe!=null))switch(K){case"value":v=oe;break;case"defaultValue":T=oe;break;case"children":R=oe;break;case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(91));break;default:ln(s,c,K,oe,x,null)}Ga(s,v,T,R);return;case"option":for(Ae in x)x.hasOwnProperty(Ae)&&(v=x[Ae],v!=null)&&(Ae==="selected"?s.selected=v&&typeof v!="function"&&typeof v!="symbol":ln(s,c,Ae,v,x,null));return;case"dialog":Cr("beforetoggle",s),Cr("toggle",s),Cr("cancel",s),Cr("close",s);break;case"iframe":case"object":Cr("load",s);break;case"video":case"audio":for(v=0;v<Iu.length;v++)Cr(Iu[v],s);break;case"image":Cr("error",s),Cr("load",s);break;case"details":Cr("toggle",s);break;case"embed":case"source":case"link":Cr("error",s),Cr("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Qe in x)if(x.hasOwnProperty(Qe)&&(v=x[Qe],v!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:ln(s,c,Qe,v,x,null)}return;default:if(un(c)){for(xt in x)x.hasOwnProperty(xt)&&(v=x[xt],v!==void 0&&ym(s,c,xt,v,x,void 0));return}}for(oe in x)x.hasOwnProperty(oe)&&(v=x[oe],v!=null&&ln(s,c,oe,v,x,null))}function B5(s,c,x,v){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,R=null,K=null,oe=null,Ae=null,Qe=null,xt=null;for(lt in x){var bt=x[lt];if(x.hasOwnProperty(lt)&&bt!=null)switch(lt){case"checked":break;case"value":break;case"defaultValue":Ae=bt;default:v.hasOwnProperty(lt)||ln(s,c,lt,null,v,bt)}}for(var tt in v){var lt=v[tt];if(bt=x[tt],v.hasOwnProperty(tt)&&(lt!=null||bt!=null))switch(tt){case"type":R=lt;break;case"name":T=lt;break;case"checked":Qe=lt;break;case"defaultChecked":xt=lt;break;case"value":K=lt;break;case"defaultValue":oe=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(n(137,c));break;default:lt!==bt&&ln(s,c,tt,lt,v,bt)}}Mn(s,K,oe,Ae,Qe,xt,R,T);return;case"select":lt=K=oe=tt=null;for(R in x)if(Ae=x[R],x.hasOwnProperty(R)&&Ae!=null)switch(R){case"value":break;case"multiple":lt=Ae;default:v.hasOwnProperty(R)||ln(s,c,R,null,v,Ae)}for(T in v)if(R=v[T],Ae=x[T],v.hasOwnProperty(T)&&(R!=null||Ae!=null))switch(T){case"value":tt=R;break;case"defaultValue":oe=R;break;case"multiple":K=R;default:R!==Ae&&ln(s,c,T,R,v,Ae)}c=oe,x=K,v=lt,tt!=null?Bt(s,!!x,tt,!1):!!v!=!!x&&(c!=null?Bt(s,!!x,c,!0):Bt(s,!!x,x?[]:"",!1));return;case"textarea":lt=tt=null;for(oe in x)if(T=x[oe],x.hasOwnProperty(oe)&&T!=null&&!v.hasOwnProperty(oe))switch(oe){case"value":break;case"children":break;default:ln(s,c,oe,null,v,T)}for(K in v)if(T=v[K],R=x[K],v.hasOwnProperty(K)&&(T!=null||R!=null))switch(K){case"value":tt=T;break;case"defaultValue":lt=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:T!==R&&ln(s,c,K,T,v,R)}Xn(s,tt,lt);return;case"option":for(var Lt in x)tt=x[Lt],x.hasOwnProperty(Lt)&&tt!=null&&!v.hasOwnProperty(Lt)&&(Lt==="selected"?s.selected=!1:ln(s,c,Lt,null,v,tt));for(Ae in v)tt=v[Ae],lt=x[Ae],v.hasOwnProperty(Ae)&&tt!==lt&&(tt!=null||lt!=null)&&(Ae==="selected"?s.selected=tt&&typeof tt!="function"&&typeof tt!="symbol":ln(s,c,Ae,tt,v,lt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zt in x)tt=x[Zt],x.hasOwnProperty(Zt)&&tt!=null&&!v.hasOwnProperty(Zt)&&ln(s,c,Zt,null,v,tt);for(Qe in v)if(tt=v[Qe],lt=x[Qe],v.hasOwnProperty(Qe)&&tt!==lt&&(tt!=null||lt!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(n(137,c));break;default:ln(s,c,Qe,tt,v,lt)}return;default:if(un(c)){for(var on in x)tt=x[on],x.hasOwnProperty(on)&&tt!==void 0&&!v.hasOwnProperty(on)&&ym(s,c,on,void 0,v,tt);for(xt in v)tt=v[xt],lt=x[xt],!v.hasOwnProperty(xt)||tt===lt||tt===void 0&&lt===void 0||ym(s,c,xt,tt,v,lt);return}}for(var Ue in x)tt=x[Ue],x.hasOwnProperty(Ue)&&tt!=null&&!v.hasOwnProperty(Ue)&&ln(s,c,Ue,null,v,tt);for(bt in v)tt=v[bt],lt=x[bt],!v.hasOwnProperty(bt)||tt===lt||tt==null&&lt==null||ln(s,c,bt,tt,v,lt)}function av(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function P5(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,x=performance.getEntriesByType("resource"),v=0;v<x.length;v++){var T=x[v],R=T.transferSize,K=T.initiatorType,oe=T.duration;if(R&&oe&&av(K)){for(K=0,oe=T.responseEnd,v+=1;v<x.length;v++){var Ae=x[v],Qe=Ae.startTime;if(Qe>oe)break;var xt=Ae.transferSize,bt=Ae.initiatorType;xt&&av(bt)&&(Ae=Ae.responseEnd,K+=xt*(Ae<oe?1:(oe-Qe)/(Ae-Qe)))}if(--v,c+=8*(R+K)/(T.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var _m=null,km=null;function uh(s){return s.nodeType===9?s:s.ownerDocument}function sv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iv(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function Em(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Sm=null;function U5(){var s=window.event;return s&&s.type==="popstate"?s===Sm?!1:(Sm=s,!0):(Sm=null,!1)}var lv=typeof setTimeout=="function"?setTimeout:void 0,z5=typeof clearTimeout=="function"?clearTimeout:void 0,ov=typeof Promise=="function"?Promise:void 0,H5=typeof queueMicrotask=="function"?queueMicrotask:typeof ov<"u"?function(s){return ov.resolve(null).then(s).catch(V5)}:lv;function V5(s){setTimeout(function(){throw s})}function to(s){return s==="head"}function cv(s,c){var x=c,v=0;do{var T=x.nextSibling;if(s.removeChild(x),T&&T.nodeType===8)if(x=T.data,x==="/$"||x==="/&"){if(v===0){s.removeChild(T),u0(c);return}v--}else if(x==="$"||x==="$?"||x==="$~"||x==="$!"||x==="&")v++;else if(x==="html")Mu(s.ownerDocument.documentElement);else if(x==="head"){x=s.ownerDocument.head,Mu(x);for(var R=x.firstChild;R;){var K=R.nextSibling,oe=R.nodeName;R[Ne]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&R.rel.toLowerCase()==="stylesheet"||x.removeChild(R),R=K}}else x==="body"&&Mu(s.ownerDocument.body);x=T}while(x);u0(c)}function uv(s,c){var x=s;s=0;do{var v=x.nextSibling;if(x.nodeType===1?c?(x._stashedDisplay=x.style.display,x.style.display="none"):(x.style.display=x._stashedDisplay||"",x.getAttribute("style")===""&&x.removeAttribute("style")):x.nodeType===3&&(c?(x._stashedText=x.nodeValue,x.nodeValue=""):x.nodeValue=x._stashedText||""),v&&v.nodeType===8)if(x=v.data,x==="/$"){if(s===0)break;s--}else x!=="$"&&x!=="$?"&&x!=="$~"&&x!=="$!"||s++;x=v}while(x)}function Am(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var x=c;switch(c=c.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":Am(x),Ze(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}s.removeChild(x)}}function G5(s,c,x,v){for(;s.nodeType===1;){var T=x;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!v&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(v){if(!s[Ne])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(R=s.getAttribute("rel"),R==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(R!==T.rel||s.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||s.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||s.getAttribute("title")!==(T.title==null?null:T.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(R=s.getAttribute("src"),(R!==(T.src==null?null:T.src)||s.getAttribute("type")!==(T.type==null?null:T.type)||s.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&R&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var R=T.name==null?null:""+T.name;if(T.type==="hidden"&&s.getAttribute("name")===R)return s}else return s;if(s=Ws(s.nextSibling),s===null)break}return null}function W5(s,c,x){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!x||(s=Ws(s.nextSibling),s===null))return null;return s}function dv(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Ws(s.nextSibling),s===null))return null;return s}function Nm(s){return s.data==="$?"||s.data==="$~"}function Cm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function X5(s,c){var x=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||x.readyState!=="loading")c();else{var v=function(){c(),x.removeEventListener("DOMContentLoaded",v)};x.addEventListener("DOMContentLoaded",v),s._reactRetry=v}}function Ws(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var Tm=null;function fv(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var x=s.data;if(x==="/$"||x==="/&"){if(c===0)return Ws(s.nextSibling);c--}else x!=="$"&&x!=="$!"&&x!=="$?"&&x!=="$~"&&x!=="&"||c++}s=s.nextSibling}return null}function hv(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var x=s.data;if(x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"){if(c===0)return s;c--}else x!=="/$"&&x!=="/&"||c++}s=s.previousSibling}return null}function xv(s,c,x){switch(c=uh(x),s){case"html":if(s=c.documentElement,!s)throw Error(n(452));return s;case"head":if(s=c.head,!s)throw Error(n(453));return s;case"body":if(s=c.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function Mu(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);Ze(s)}var Xs=new Map,mv=new Set;function dh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var hl=fe.d;fe.d={f:K5,r:q5,D:Y5,C:$5,L:Z5,m:J5,X:e6,S:Q5,M:t6};function K5(){var s=hl.f(),c=rh();return s||c}function q5(s){var c=gt(s);c!==null&&c.tag===5&&c.type==="form"?Ob(c):hl.r(s)}var l0=typeof document>"u"?null:document;function gv(s,c,x){var v=l0;if(v&&typeof c=="string"&&c){var T=fr(c);T='link[rel="'+s+'"][href="'+T+'"]',typeof x=="string"&&(T+='[crossorigin="'+x+'"]'),mv.has(T)||(mv.add(T),s={rel:s,crossOrigin:x,href:c},v.querySelector(T)===null&&(c=v.createElement("link"),Aa(c,"link",s),It(c),v.head.appendChild(c)))}}function Y5(s){hl.D(s),gv("dns-prefetch",s,null)}function $5(s,c){hl.C(s,c),gv("preconnect",s,c)}function Z5(s,c,x){hl.L(s,c,x);var v=l0;if(v&&s&&c){var T='link[rel="preload"][as="'+fr(c)+'"]';c==="image"&&x&&x.imageSrcSet?(T+='[imagesrcset="'+fr(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(T+='[imagesizes="'+fr(x.imageSizes)+'"]')):T+='[href="'+fr(s)+'"]';var R=T;switch(c){case"style":R=o0(s);break;case"script":R=c0(s)}Xs.has(R)||(s=_({rel:"preload",href:c==="image"&&x&&x.imageSrcSet?void 0:s,as:c},x),Xs.set(R,s),v.querySelector(T)!==null||c==="style"&&v.querySelector(Fu(R))||c==="script"&&v.querySelector(Lu(R))||(c=v.createElement("link"),Aa(c,"link",s),It(c),v.head.appendChild(c)))}}function J5(s,c){hl.m(s,c);var x=l0;if(x&&s){var v=c&&typeof c.as=="string"?c.as:"script",T='link[rel="modulepreload"][as="'+fr(v)+'"][href="'+fr(s)+'"]',R=T;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=c0(s)}if(!Xs.has(R)&&(s=_({rel:"modulepreload",href:s},c),Xs.set(R,s),x.querySelector(T)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(Lu(R)))return}v=x.createElement("link"),Aa(v,"link",s),It(v),x.head.appendChild(v)}}}function Q5(s,c,x){hl.S(s,c,x);var v=l0;if(v&&s){var T=wt(v).hoistableStyles,R=o0(s);c=c||"default";var K=T.get(R);if(!K){var oe={loading:0,preload:null};if(K=v.querySelector(Fu(R)))oe.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":c},x),(x=Xs.get(R))&&jm(s,x);var Ae=K=v.createElement("link");It(Ae),Aa(Ae,"link",s),Ae._p=new Promise(function(Qe,xt){Ae.onload=Qe,Ae.onerror=xt}),Ae.addEventListener("load",function(){oe.loading|=1}),Ae.addEventListener("error",function(){oe.loading|=2}),oe.loading|=4,fh(K,c,v)}K={type:"stylesheet",instance:K,count:1,state:oe},T.set(R,K)}}}function e6(s,c){hl.X(s,c);var x=l0;if(x&&s){var v=wt(x).hoistableScripts,T=c0(s),R=v.get(T);R||(R=x.querySelector(Lu(T)),R||(s=_({src:s,async:!0},c),(c=Xs.get(T))&&Rm(s,c),R=x.createElement("script"),It(R),Aa(R,"link",s),x.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},v.set(T,R))}}function t6(s,c){hl.M(s,c);var x=l0;if(x&&s){var v=wt(x).hoistableScripts,T=c0(s),R=v.get(T);R||(R=x.querySelector(Lu(T)),R||(s=_({src:s,async:!0,type:"module"},c),(c=Xs.get(T))&&Rm(s,c),R=x.createElement("script"),It(R),Aa(R,"link",s),x.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},v.set(T,R))}}function pv(s,c,x,v){var T=(T=pe.current)?dh(T):null;if(!T)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(c=o0(x.href),x=wt(T).hoistableStyles,v=x.get(c),v||(v={type:"style",instance:null,count:0,state:null},x.set(c,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){s=o0(x.href);var R=wt(T).hoistableStyles,K=R.get(s);if(K||(T=T.ownerDocument||T,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(s,K),(R=T.querySelector(Fu(s)))&&!R._p&&(K.instance=R,K.state.loading=5),Xs.has(s)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},Xs.set(s,x),R||r6(T,s,x,K.state))),c&&v===null)throw Error(n(528,""));return K}if(c&&v!==null)throw Error(n(529,""));return null;case"script":return c=x.async,x=x.src,typeof x=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=c0(x),x=wt(T).hoistableScripts,v=x.get(c),v||(v={type:"script",instance:null,count:0,state:null},x.set(c,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function o0(s){return'href="'+fr(s)+'"'}function Fu(s){return'link[rel="stylesheet"]['+s+"]"}function bv(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function r6(s,c,x,v){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?v.loading=1:(c=s.createElement("link"),v.preload=c,c.addEventListener("load",function(){return v.loading|=1}),c.addEventListener("error",function(){return v.loading|=2}),Aa(c,"link",x),It(c),s.head.appendChild(c))}function c0(s){return'[src="'+fr(s)+'"]'}function Lu(s){return"script[async]"+s}function wv(s,c,x){if(c.count++,c.instance===null)switch(c.type){case"style":var v=s.querySelector('style[data-href~="'+fr(x.href)+'"]');if(v)return c.instance=v,It(v),v;var T=_({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return v=(s.ownerDocument||s).createElement("style"),It(v),Aa(v,"style",T),fh(v,x.precedence,s),c.instance=v;case"stylesheet":T=o0(x.href);var R=s.querySelector(Fu(T));if(R)return c.state.loading|=4,c.instance=R,It(R),R;v=bv(x),(T=Xs.get(T))&&jm(v,T),R=(s.ownerDocument||s).createElement("link"),It(R);var K=R;return K._p=new Promise(function(oe,Ae){K.onload=oe,K.onerror=Ae}),Aa(R,"link",v),c.state.loading|=4,fh(R,x.precedence,s),c.instance=R;case"script":return R=c0(x.src),(T=s.querySelector(Lu(R)))?(c.instance=T,It(T),T):(v=x,(T=Xs.get(R))&&(v=_({},x),Rm(v,T)),s=s.ownerDocument||s,T=s.createElement("script"),It(T),Aa(T,"link",v),s.head.appendChild(T),c.instance=T);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(v=c.instance,c.state.loading|=4,fh(v,x.precedence,s));return c.instance}function fh(s,c,x){for(var v=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=v.length?v[v.length-1]:null,R=T,K=0;K<v.length;K++){var oe=v[K];if(oe.dataset.precedence===c)R=oe;else if(R!==T)break}R?R.parentNode.insertBefore(s,R.nextSibling):(c=x.nodeType===9?x.head:x,c.insertBefore(s,c.firstChild))}function jm(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function Rm(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var hh=null;function vv(s,c,x){if(hh===null){var v=new Map,T=hh=new Map;T.set(x,v)}else T=hh,v=T.get(x),v||(v=new Map,T.set(x,v));if(v.has(s))return v;for(v.set(s,null),x=x.getElementsByTagName(s),T=0;T<x.length;T++){var R=x[T];if(!(R[Ne]||R[me]||s==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var K=R.getAttribute(c)||"";K=s+K;var oe=v.get(K);oe?oe.push(R):v.set(K,[R])}}return v}function yv(s,c,x){s=s.ownerDocument||s,s.head.insertBefore(x,c==="title"?s.querySelector("head > title"):null)}function n6(s,c,x){if(x===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;return c.rel==="stylesheet"?(s=c.disabled,typeof c.precedence=="string"&&s==null):!0;case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function _v(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function a6(s,c,x,v){if(x.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var T=o0(v.href),R=c.querySelector(Fu(T));if(R){c=R._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=xh.bind(s),c.then(s,s)),x.state.loading|=4,x.instance=R,It(R);return}R=c.ownerDocument||c,v=bv(v),(T=Xs.get(T))&&jm(v,T),R=R.createElement("link"),It(R);var K=R;K._p=new Promise(function(oe,Ae){K.onload=oe,K.onerror=Ae}),Aa(R,"link",v),x.instance=R}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(x,c),(c=x.state.preload)&&(x.state.loading&3)===0&&(s.count++,x=xh.bind(s),c.addEventListener("load",x),c.addEventListener("error",x))}}var Om=0;function s6(s,c){return s.stylesheets&&s.count===0&&gh(s,s.stylesheets),0<s.count||0<s.imgCount?function(x){var v=setTimeout(function(){if(s.stylesheets&&gh(s,s.stylesheets),s.unsuspend){var R=s.unsuspend;s.unsuspend=null,R()}},6e4+c);0<s.imgBytes&&Om===0&&(Om=62500*P5());var T=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&gh(s,s.stylesheets),s.unsuspend)){var R=s.unsuspend;s.unsuspend=null,R()}},(s.imgBytes>Om?50:800)+c);return s.unsuspend=x,function(){s.unsuspend=null,clearTimeout(v),clearTimeout(T)}}:null}function xh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var mh=null;function gh(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,mh=new Map,c.forEach(i6,s),mh=null,xh.call(s))}function i6(s,c){if(!(c.state.loading&4)){var x=mh.get(s);if(x)var v=x.get(null);else{x=new Map,mh.set(s,x);for(var T=s.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<T.length;R++){var K=T[R];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(x.set(K.dataset.precedence,K),v=K)}v&&x.set(null,v)}T=c.instance,K=T.getAttribute("data-precedence"),R=x.get(K)||v,R===v&&x.set(null,T),x.set(K,T),this.count++,v=xh.bind(this),T.addEventListener("load",v),T.addEventListener("error",v),R?R.parentNode.insertBefore(T,R.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(T,s.firstChild)),c.state.loading|=4}}var Bu={$$typeof:O,Provider:null,Consumer:null,_currentValue:Ve,_currentValue2:Ve,_threadCount:0};function l6(s,c,x,v,T,R,K,oe,Ae){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.hiddenUpdates=kt(null),this.identifierPrefix=v,this.onUncaughtError=T,this.onCaughtError=R,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ae,this.incompleteTransitions=new Map}function kv(s,c,x,v,T,R,K,oe,Ae,Qe,xt,bt){return s=new l6(s,c,x,K,Ae,Qe,xt,bt,oe),c=1,R===!0&&(c|=24),R=bs(3,null,null,c),s.current=R,R.stateNode=s,c=dx(),c.refCount++,s.pooledCache=c,c.refCount++,R.memoizedState={element:v,isDehydrated:x,cache:c},mx(R),s}function Ev(s){return s?(s=Uc,s):Uc}function Sv(s,c,x,v,T,R){T=Ev(T),v.context===null?v.context=T:v.pendingContext=T,v=Gl(c),v.payload={element:x},R=R===void 0?null:R,R!==null&&(v.callback=R),x=Wl(s,v,c),x!==null&&(ss(x,s,c),gu(x,s,c))}function Av(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var x=s.retryLane;s.retryLane=x!==0&&x<c?x:c}}function Im(s,c){Av(s,c),(s=s.alternate)&&Av(s,c)}function Nv(s){if(s.tag===13||s.tag===31){var c=Fo(s,67108864);c!==null&&ss(c,s,67108864),Im(s,67108864)}}function Cv(s){if(s.tag===13||s.tag===31){var c=ks();c=br(c);var x=Fo(s,c);x!==null&&ss(x,s,c),Im(s,c)}}var ph=!0;function o6(s,c,x,v){var T=be.T;be.T=null;var R=fe.p;try{fe.p=2,Dm(s,c,x,v)}finally{fe.p=R,be.T=T}}function c6(s,c,x,v){var T=be.T;be.T=null;var R=fe.p;try{fe.p=8,Dm(s,c,x,v)}finally{fe.p=R,be.T=T}}function Dm(s,c,x,v){if(ph){var T=Mm(v);if(T===null)vm(s,c,v,bh,x),jv(s,v);else if(d6(T,s,c,x,v))v.stopPropagation();else if(jv(s,v),c&4&&-1<u6.indexOf(s)){for(;T!==null;){var R=gt(T);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var K=zr(R.pendingLanes);if(K!==0){var oe=R;for(oe.pendingLanes|=2,oe.entangledLanes|=2;K;){var Ae=1<<31-Dt(K);oe.entanglements[1]|=Ae,K&=~Ae}Ri(R),(qr&6)===0&&(eh=Ke()+500,Ou(0))}}break;case 31:case 13:oe=Fo(R,2),oe!==null&&ss(oe,R,2),rh(),Im(R,2)}if(R=Mm(v),R===null&&vm(s,c,v,bh,x),R===T)break;T=R}T!==null&&v.stopPropagation()}else vm(s,c,v,null,x)}}function Mm(s){return s=tu(s),Fm(s)}var bh=null;function Fm(s){if(bh=null,s=dt(s),s!==null){var c=i(s);if(c===null)s=null;else{var x=c.tag;if(x===13){if(s=u(c),s!==null)return s;s=null}else if(x===31){if(s=f(c),s!==null)return s;s=null}else if(x===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return bh=s,null}function Tv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case qe:return 2;case Me:return 8;case Xe:case St:return 32;case At:return 268435456;default:return 32}default:return 32}}var Lm=!1,ro=null,no=null,ao=null,Pu=new Map,Uu=new Map,so=[],u6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jv(s,c){switch(s){case"focusin":case"focusout":ro=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":Pu.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(c.pointerId)}}function zu(s,c,x,v,T,R){return s===null||s.nativeEvent!==R?(s={blockedOn:c,domEventName:x,eventSystemFlags:v,nativeEvent:R,targetContainers:[T]},c!==null&&(c=gt(c),c!==null&&Nv(c)),s):(s.eventSystemFlags|=v,c=s.targetContainers,T!==null&&c.indexOf(T)===-1&&c.push(T),s)}function d6(s,c,x,v,T){switch(c){case"focusin":return ro=zu(ro,s,c,x,v,T),!0;case"dragenter":return no=zu(no,s,c,x,v,T),!0;case"mouseover":return ao=zu(ao,s,c,x,v,T),!0;case"pointerover":var R=T.pointerId;return Pu.set(R,zu(Pu.get(R)||null,s,c,x,v,T)),!0;case"gotpointercapture":return R=T.pointerId,Uu.set(R,zu(Uu.get(R)||null,s,c,x,v,T)),!0}return!1}function Rv(s){var c=dt(s.target);if(c!==null){var x=i(c);if(x!==null){if(c=x.tag,c===13){if(c=u(x),c!==null){s.blockedOn=c,ue(s.priority,function(){Cv(x)});return}}else if(c===31){if(c=f(x),c!==null){s.blockedOn=c,ue(s.priority,function(){Cv(x)});return}}else if(c===3&&x.stateNode.current.memoizedState.isDehydrated){s.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}s.blockedOn=null}function wh(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var x=Mm(s.nativeEvent);if(x===null){x=s.nativeEvent;var v=new x.constructor(x.type,x);Co=v,x.target.dispatchEvent(v),Co=null}else return c=gt(x),c!==null&&Nv(c),s.blockedOn=x,!1;c.shift()}return!0}function Ov(s,c,x){wh(s)&&x.delete(c)}function f6(){Lm=!1,ro!==null&&wh(ro)&&(ro=null),no!==null&&wh(no)&&(no=null),ao!==null&&wh(ao)&&(ao=null),Pu.forEach(Ov),Uu.forEach(Ov)}function vh(s,c){s.blockedOn===c&&(s.blockedOn=null,Lm||(Lm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,f6)))}var yh=null;function Iv(s){yh!==s&&(yh=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){yh===s&&(yh=null);for(var c=0;c<s.length;c+=3){var x=s[c],v=s[c+1],T=s[c+2];if(typeof v!="function"){if(Fm(v||x)===null)continue;break}var R=gt(x);R!==null&&(s.splice(c,3),c-=3,Mx(R,{pending:!0,data:T,method:x.method,action:v},v,T))}}))}function u0(s){function c(Ae){return vh(Ae,s)}ro!==null&&vh(ro,s),no!==null&&vh(no,s),ao!==null&&vh(ao,s),Pu.forEach(c),Uu.forEach(c);for(var x=0;x<so.length;x++){var v=so[x];v.blockedOn===s&&(v.blockedOn=null)}for(;0<so.length&&(x=so[0],x.blockedOn===null);)Rv(x),x.blockedOn===null&&so.shift();if(x=(s.ownerDocument||s).$$reactFormReplay,x!=null)for(v=0;v<x.length;v+=3){var T=x[v],R=x[v+1],K=T[we]||null;if(typeof R=="function")K||Iv(x);else if(K){var oe=null;if(R&&R.hasAttribute("formAction")){if(T=R,K=R[we]||null)oe=K.formAction;else if(Fm(T)!==null)continue}else oe=K.action;typeof oe=="function"?x[v+1]=oe:(x.splice(v,3),v-=3),Iv(x)}}}function Dv(){function s(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(K){return T=K})},focusReset:"manual",scroll:"manual"})}function c(){T!==null&&(T(),T=null),v||setTimeout(x,20)}function x(){if(!v&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,T=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(x,100),function(){v=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),T!==null&&(T(),T=null)}}}function Bm(s){this._internalRoot=s}_h.prototype.render=Bm.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(n(409));var x=c.current,v=ks();Sv(x,v,s,c,null,null)},_h.prototype.unmount=Bm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;Sv(s.current,2,null,s,null,null),rh(),c[_e]=null}};function _h(s){this._internalRoot=s}_h.prototype.unstable_scheduleHydration=function(s){if(s){var c=ae();s={blockedOn:null,target:s,priority:c};for(var x=0;x<so.length&&c!==0&&c<so[x].priority;x++);so.splice(x,0,s),x===0&&Rv(s)}};var Mv=r.version;if(Mv!=="19.2.3")throw Error(n(527,Mv,"19.2.3"));fe.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=m(c),s=s!==null?w(s):null,s=s===null?null:s.stateNode,s};var h6={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:be,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kh.isDisabled&&kh.supportsFiber)try{Nt=kh.inject(h6),mt=kh}catch{}}return Vu.createRoot=function(s,c){if(!a(s))throw Error(n(299));var x=!1,v="",T=Hb,R=Vb,K=Gb;return c!=null&&(c.unstable_strictMode===!0&&(x=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(T=c.onUncaughtError),c.onCaughtError!==void 0&&(R=c.onCaughtError),c.onRecoverableError!==void 0&&(K=c.onRecoverableError)),c=kv(s,1,!1,null,null,x,v,null,T,R,K,Dv),s[_e]=c.current,wm(s),new Bm(c)},Vu.hydrateRoot=function(s,c,x){if(!a(s))throw Error(n(299));var v=!1,T="",R=Hb,K=Vb,oe=Gb,Ae=null;return x!=null&&(x.unstable_strictMode===!0&&(v=!0),x.identifierPrefix!==void 0&&(T=x.identifierPrefix),x.onUncaughtError!==void 0&&(R=x.onUncaughtError),x.onCaughtError!==void 0&&(K=x.onCaughtError),x.onRecoverableError!==void 0&&(oe=x.onRecoverableError),x.formState!==void 0&&(Ae=x.formState)),c=kv(s,1,!0,c,x??null,v,T,Ae,R,K,oe,Dv),c.context=Ev(null),x=c.current,v=ks(),v=br(v),T=Gl(v),T.callback=null,Wl(x,T,v),x=v,c.current.lanes=x,Rt(c,x),Ri(c),s[_e]=c.current,wm(s),new _h(c)},Vu.version="19.2.3",Vu}var Wv;function E6(){if(Wv)return zm.exports;Wv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),zm.exports=k6(),zm.exports}var S6=E6();var Xv="popstate";function A6(e={}){function r(n,a){let{pathname:i,search:u,hash:f}=n.location;return Fg("",{pathname:i,search:u,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(n,a){return typeof a=="string"?a:xd(a)}return C6(r,t,null,e)}function Tn(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function ti(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function N6(){return Math.random().toString(36).substring(2,10)}function Kv(e,r){return{usr:e.state,key:e.key,idx:r}}function Fg(e,r,t=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof r=="string"?z0(r):r,state:t,key:r&&r.key||n||N6()}}function xd({pathname:e="/",search:r="",hash:t=""}){return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),t&&t!=="#"&&(e+=t.charAt(0)==="#"?t:"#"+t),e}function z0(e){let r={};if(e){let t=e.indexOf("#");t>=0&&(r.hash=e.substring(t),e=e.substring(0,t));let n=e.indexOf("?");n>=0&&(r.search=e.substring(n),e=e.substring(0,n)),e&&(r.pathname=e)}return r}function C6(e,r,t,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,u=a.history,f="POP",g=null,m=w();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function w(){return(u.state||{idx:null}).idx}function _(){f="POP";let C=w(),I=C==null?null:C-m;m=C,g&&g({action:f,location:A.location,delta:I})}function E(C,I){f="PUSH";let D=Fg(A.location,C,I);m=w()+1;let O=Kv(D,m),B=A.createHref(D);try{u.pushState(O,"",B)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;a.location.assign(B)}i&&g&&g({action:f,location:A.location,delta:1})}function k(C,I){f="REPLACE";let D=Fg(A.location,C,I);m=w();let O=Kv(D,m),B=A.createHref(D);u.replaceState(O,"",B),i&&g&&g({action:f,location:A.location,delta:0})}function N(C){return T6(C)}let A={get action(){return f},get location(){return e(a,u)},listen(C){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(Xv,_),g=C,()=>{a.removeEventListener(Xv,_),g=null}},createHref(C){return r(a,C)},createURL:N,encodeLocation(C){let I=N(C);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:E,replace:k,go(C){return u.go(C)}};return A}function T6(e,r=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Tn(t,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:xd(e);return n=n.replace(/ $/,"%20"),!r&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function K4(e,r,t="/"){return j6(e,r,t,!1)}function j6(e,r,t,n){let a=typeof r=="string"?z0(r):r,i=El(a.pathname||"/",t);if(i==null)return null;let u=q4(e);R6(u);let f=null;for(let g=0;f==null&&g<u.length;++g){let m=H6(i);f=U6(u[g],m,n)}return f}function q4(e,r=[],t=[],n="",a=!1){let i=(u,f,g=a,m)=>{let w={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(n)&&g)return;Tn(w.relativePath.startsWith(n),`Absolute route path "${w.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(n.length)}let _=vl([n,w.relativePath]),E=t.concat(w);u.children&&u.children.length>0&&(Tn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),q4(u.children,r,E,_,g)),!(u.path==null&&!u.index)&&r.push({path:_,score:B6(_,u.index),routesMeta:E})};return e.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))i(u,f);else for(let g of Y4(u.path))i(u,f,!0,g)}),r}function Y4(e){let r=e.split("/");if(r.length===0)return[];let[t,...n]=r,a=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let u=Y4(n.join("/")),f=[];return f.push(...u.map(g=>g===""?i:[i,g].join("/"))),a&&f.push(...u),f.map(g=>e.startsWith("/")&&g===""?"/":g)}function R6(e){e.sort((r,t)=>r.score!==t.score?t.score-r.score:P6(r.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var O6=/^:[\w-]+$/,I6=3,D6=2,M6=1,F6=10,L6=-2,qv=e=>e==="*";function B6(e,r){let t=e.split("/"),n=t.length;return t.some(qv)&&(n+=L6),r&&(n+=D6),t.filter(a=>!qv(a)).reduce((a,i)=>a+(O6.test(i)?I6:i===""?M6:F6),n)}function P6(e,r){return e.length===r.length&&e.slice(0,-1).every((n,a)=>n===r[a])?e[e.length-1]-r[r.length-1]:0}function U6(e,r,t=!1){let{routesMeta:n}=e,a={},i="/",u=[];for(let f=0;f<n.length;++f){let g=n[f],m=f===n.length-1,w=i==="/"?r:r.slice(i.length)||"/",_=t1({path:g.relativePath,caseSensitive:g.caseSensitive,end:m},w),E=g.route;if(!_&&m&&t&&!n[n.length-1].route.index&&(_=t1({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!_)return null;Object.assign(a,_.params),u.push({params:a,pathname:vl([i,_.pathname]),pathnameBase:X6(vl([i,_.pathnameBase])),route:E}),_.pathnameBase!=="/"&&(i=vl([i,_.pathnameBase]))}return u}function t1(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,n]=z6(e.path,e.caseSensitive,e.end),a=r.match(t);if(!a)return null;let i=a[0],u=i.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:n.reduce((m,{paramName:w,isOptional:_},E)=>{if(w==="*"){let N=f[E]||"";u=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const k=f[E];return _&&!k?m[w]=void 0:m[w]=(k||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:u,pattern:e}}function z6(e,r=!1,t=!0){ti(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,g)=>(n.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,r?void 0:"i"),n]}function H6(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return ti(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),e}}function El(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let t=r.endsWith("/")?r.length-1:r.length,n=e.charAt(t);return n&&n!=="/"?null:e.slice(t)||"/"}var $4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V6=e=>$4.test(e);function G6(e,r="/"){let{pathname:t,search:n="",hash:a=""}=typeof e=="string"?z0(e):e,i;if(t)if(V6(t))i=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),ti(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?i=Yv(t.substring(1),"/"):i=Yv(t,r)}else i=r;return{pathname:i,search:K6(n),hash:q6(a)}}function Yv(e,r){let t=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Wm(e,r,t,n){return`Cannot include a '${e}' character in a manually specified \`to.${r}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function W6(e){return e.filter((r,t)=>t===0||r.route.path&&r.route.path.length>0)}function kp(e){let r=W6(e);return r.map((t,n)=>n===r.length-1?t.pathname:t.pathnameBase)}function Ep(e,r,t,n=!1){let a;typeof e=="string"?a=z0(e):(a={...e},Tn(!a.pathname||!a.pathname.includes("?"),Wm("?","pathname","search",a)),Tn(!a.pathname||!a.pathname.includes("#"),Wm("#","pathname","hash",a)),Tn(!a.search||!a.search.includes("#"),Wm("#","search","hash",a)));let i=e===""||a.pathname==="",u=i?"/":a.pathname,f;if(u==null)f=t;else{let _=r.length-1;if(!n&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),_-=1;a.pathname=E.join("/")}f=_>=0?r[_]:"/"}let g=G6(a,f),m=u&&u!=="/"&&u.endsWith("/"),w=(i||u===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(m||w)&&(g.pathname+="/"),g}var vl=e=>e.join("/").replace(/\/\/+/g,"/"),X6=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,q6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Y6=class{constructor(e,r,t,n=!1){this.status=e,this.statusText=r||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function $6(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Z6(e){return e.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Z4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function J4(e,r){let t=e;if(typeof t!="string"||!$4.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,a=!1;if(Z4)try{let i=new URL(window.location.href),u=t.startsWith("//")?new URL(i.protocol+t):new URL(t),f=El(u.pathname,r);u.origin===i.origin&&f!=null?t=f+u.search+u.hash:a=!0}catch{ti(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Q4=["POST","PUT","PATCH","DELETE"];new Set(Q4);var J6=["GET",...Q4];new Set(J6);var H0=Q.createContext(null);H0.displayName="DataRouter";var S1=Q.createContext(null);S1.displayName="DataRouterState";var Q6=Q.createContext(!1),e3=Q.createContext({isTransitioning:!1});e3.displayName="ViewTransition";var eA=Q.createContext(new Map);eA.displayName="Fetchers";var tA=Q.createContext(null);tA.displayName="Await";var Fs=Q.createContext(null);Fs.displayName="Navigation";var Vd=Q.createContext(null);Vd.displayName="Location";var yi=Q.createContext({outlet:null,matches:[],isDataRoute:!1});yi.displayName="Route";var Sp=Q.createContext(null);Sp.displayName="RouteError";var t3="REACT_ROUTER_ERROR",rA="REDIRECT",nA="ROUTE_ERROR_RESPONSE";function aA(e){if(e.startsWith(`${t3}:${rA}:{`))try{let r=JSON.parse(e.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function sA(e){if(e.startsWith(`${t3}:${nA}:{`))try{let r=JSON.parse(e.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new Y6(r.status,r.statusText,r.data)}catch{}}function iA(e,{relative:r}={}){Tn(V0(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=Q.useContext(Fs),{hash:a,pathname:i,search:u}=Gd(e,{relative:r}),f=i;return t!=="/"&&(f=i==="/"?t:vl([t,i])),n.createHref({pathname:f,search:u,hash:a})}function V0(){return Q.useContext(Vd)!=null}function Hi(){return Tn(V0(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(Vd).location}var r3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function n3(e){Q.useContext(Fs).static||Q.useLayoutEffect(e)}function G0(){let{isDataRoute:e}=Q.useContext(yi);return e?vA():lA()}function lA(){Tn(V0(),"useNavigate() may be used only in the context of a <Router> component.");let e=Q.useContext(H0),{basename:r,navigator:t}=Q.useContext(Fs),{matches:n}=Q.useContext(yi),{pathname:a}=Hi(),i=JSON.stringify(kp(n)),u=Q.useRef(!1);return n3(()=>{u.current=!0}),Q.useCallback((g,m={})=>{if(ti(u.current,r3),!u.current)return;if(typeof g=="number"){t.go(g);return}let w=Ep(g,JSON.parse(i),a,m.relative==="path");e==null&&r!=="/"&&(w.pathname=w.pathname==="/"?r:vl([r,w.pathname])),(m.replace?t.replace:t.push)(w,m.state,m)},[r,t,i,a,e])}Q.createContext(null);function oA(){let{matches:e}=Q.useContext(yi),r=e[e.length-1];return r?r.params:{}}function Gd(e,{relative:r}={}){let{matches:t}=Q.useContext(yi),{pathname:n}=Hi(),a=JSON.stringify(kp(t));return Q.useMemo(()=>Ep(e,JSON.parse(a),n,r==="path"),[e,a,n,r])}function cA(e,r){return a3(e,r)}function a3(e,r,t,n,a){Tn(V0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=Q.useContext(Fs),{matches:u}=Q.useContext(yi),f=u[u.length-1],g=f?f.params:{},m=f?f.pathname:"/",w=f?f.pathnameBase:"/",_=f&&f.route;{let D=_&&_.path||"";i3(m,!_||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let E=Hi(),k;if(r){let D=typeof r=="string"?z0(r):r;Tn(w==="/"||D.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${D.pathname}" was given in the \`location\` prop.`),k=D}else k=E;let N=k.pathname||"/",A=N;if(w!=="/"){let D=w.replace(/^\//,"").split("/");A="/"+N.replace(/^\//,"").split("/").slice(D.length).join("/")}let C=K4(e,{pathname:A});ti(_||C!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),ti(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=xA(C&&C.map(D=>Object.assign({},D,{params:Object.assign({},g,D.params),pathname:vl([w,i.encodeLocation?i.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?w:vl([w,i.encodeLocation?i.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),u,t,n,a);return r&&I?Q.createElement(Vd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},I):I}function uA(){let e=wA(),r=$6(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=Q.createElement(Q.Fragment,null,Q.createElement("p",null," Hey developer "),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:i},"ErrorBoundary")," or"," ",Q.createElement("code",{style:i},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},r),t?Q.createElement("pre",{style:a},t):null,u)}var dA=Q.createElement(uA,null),s3=class extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){this.props.onError?this.props.onError(e,r):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const t=sA(e.digest);t&&(e=t)}let r=e!==void 0?Q.createElement(yi.Provider,{value:this.props.routeContext},Q.createElement(Sp.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?Q.createElement(fA,{error:e},r):r}};s3.contextType=Q6;var Xm=new WeakMap;function fA({children:e,error:r}){let{basename:t}=Q.useContext(Fs);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let n=aA(r.digest);if(n){let a=Xm.get(r);if(a)throw a;let i=J4(n.location,t);if(Z4&&!Xm.get(r))if(i.isExternal||n.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:n.replace}));throw Xm.set(r,u),u}return Q.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function hA({routeContext:e,match:r,children:t}){let n=Q.useContext(H0);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),Q.createElement(yi.Provider,{value:e},t)}function xA(e,r=[],t=null,n=null,a=null){if(e==null){if(!t)return null;if(t.errors)e=t.matches;else if(r.length===0&&!t.initialized&&t.matches.length>0)e=t.matches;else return null}let i=e,u=t?.errors;if(u!=null){let w=i.findIndex(_=>_.route.id&&u?.[_.route.id]!==void 0);Tn(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),i=i.slice(0,Math.min(i.length,w+1))}let f=!1,g=-1;if(t)for(let w=0;w<i.length;w++){let _=i[w];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(g=w),_.route.id){let{loaderData:E,errors:k}=t,N=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!k||k[_.route.id]===void 0);if(_.route.lazy||N){f=!0,g>=0?i=i.slice(0,g+1):i=[i[0]];break}}}let m=t&&n?(w,_)=>{n(w,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:Z6(t.matches),errorInfo:_})}:void 0;return i.reduceRight((w,_,E)=>{let k,N=!1,A=null,C=null;t&&(k=u&&_.route.id?u[_.route.id]:void 0,A=_.route.errorElement||dA,f&&(g<0&&E===0?(i3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,C=null):g===E&&(N=!0,C=_.route.hydrateFallbackElement||null)));let I=r.concat(i.slice(0,E+1)),D=()=>{let O;return k?O=A:N?O=C:_.route.Component?O=Q.createElement(_.route.Component,null):_.route.element?O=_.route.element:O=w,Q.createElement(hA,{match:_,routeContext:{outlet:w,matches:I,isDataRoute:t!=null},children:O})};return t&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?Q.createElement(s3,{location:t.location,revalidation:t.revalidation,component:A,error:k,children:D(),routeContext:{outlet:null,matches:I,isDataRoute:!0},onError:m}):D()},null)}function Ap(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mA(e){let r=Q.useContext(H0);return Tn(r,Ap(e)),r}function gA(e){let r=Q.useContext(S1);return Tn(r,Ap(e)),r}function pA(e){let r=Q.useContext(yi);return Tn(r,Ap(e)),r}function Np(e){let r=pA(e),t=r.matches[r.matches.length-1];return Tn(t.route.id,`${e} can only be used on routes that contain a unique "id"`),t.route.id}function bA(){return Np("useRouteId")}function wA(){let e=Q.useContext(Sp),r=gA("useRouteError"),t=Np("useRouteError");return e!==void 0?e:r.errors?.[t]}function vA(){let{router:e}=mA("useNavigate"),r=Np("useNavigate"),t=Q.useRef(!1);return n3(()=>{t.current=!0}),Q.useCallback(async(a,i={})=>{ti(t.current,r3),t.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:r,...i}))},[e,r])}var $v={};function i3(e,r,t){!r&&!$v[e]&&($v[e]=!0,ti(!1,t))}Q.memo(yA);function yA({routes:e,future:r,state:t,onError:n}){return a3(e,void 0,t,n,r)}function l3({to:e,replace:r,state:t,relative:n}){Tn(V0(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=Q.useContext(Fs);ti(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=Q.useContext(yi),{pathname:u}=Hi(),f=G0(),g=Ep(e,kp(i),u,n==="path"),m=JSON.stringify(g);return Q.useEffect(()=>{f(JSON.parse(m),{replace:r,state:t,relative:n})},[f,m,n,r,t]),null}function pa(e){Tn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _A({basename:e="/",children:r=null,location:t,navigationType:n="POP",navigator:a,static:i=!1,unstable_useTransitions:u}){Tn(!V0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),g=Q.useMemo(()=>({basename:f,navigator:a,static:i,unstable_useTransitions:u,future:{}}),[f,a,i,u]);typeof t=="string"&&(t=z0(t));let{pathname:m="/",search:w="",hash:_="",state:E=null,key:k="default"}=t,N=Q.useMemo(()=>{let A=El(m,f);return A==null?null:{location:{pathname:A,search:w,hash:_,state:E,key:k},navigationType:n}},[f,m,w,_,E,k,n]);return ti(N!=null,`<Router basename="${f}"> is not able to match the URL "${m}${w}${_}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:Q.createElement(Fs.Provider,{value:g},Q.createElement(Vd.Provider,{children:r,value:N}))}function kA({children:e,location:r}){return cA(Lg(e),r)}function Lg(e,r=[]){let t=[];return Q.Children.forEach(e,(n,a)=>{if(!Q.isValidElement(n))return;let i=[...r,a];if(n.type===Q.Fragment){t.push.apply(t,Lg(n.props.children,i));return}Tn(n.type===pa,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=Lg(n.props.children,i)),t.push(u)}),t}var qh="get",Yh="application/x-www-form-urlencoded";function A1(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function EA(e){return A1(e)&&e.tagName.toLowerCase()==="button"}function SA(e){return A1(e)&&e.tagName.toLowerCase()==="form"}function AA(e){return A1(e)&&e.tagName.toLowerCase()==="input"}function NA(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function CA(e,r){return e.button===0&&(!r||r==="_self")&&!NA(e)}var Eh=null;function TA(){if(Eh===null)try{new FormData(document.createElement("form"),0),Eh=!1}catch{Eh=!0}return Eh}var jA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Km(e){return e!=null&&!jA.has(e)?(ti(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yh}"`),null):e}function RA(e,r){let t,n,a,i,u;if(SA(e)){let f=e.getAttribute("action");n=f?El(f,r):null,t=e.getAttribute("method")||qh,a=Km(e.getAttribute("enctype"))||Yh,i=new FormData(e)}else if(EA(e)||AA(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=e.getAttribute("formaction")||f.getAttribute("action");if(n=g?El(g,r):null,t=e.getAttribute("formmethod")||f.getAttribute("method")||qh,a=Km(e.getAttribute("formenctype"))||Km(f.getAttribute("enctype"))||Yh,i=new FormData(f,e),!TA()){let{name:m,type:w,value:_}=e;if(w==="image"){let E=m?`${m}.`:"";i.append(`${E}x`,"0"),i.append(`${E}y`,"0")}else m&&i.append(m,_)}}else{if(A1(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=qh,n=null,a=Yh,u=e}return i&&a==="text/plain"&&(u=i,i=void 0),{action:n,method:t.toLowerCase(),encType:a,formData:i,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Cp(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function OA(e,r,t,n){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${n}`:a.pathname=`${a.pathname}.${n}`:a.pathname==="/"?a.pathname=`_root.${n}`:r&&El(a.pathname,r)==="/"?a.pathname=`${r.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function IA(e,r){if(e.id in r)return r[e.id];try{let t=await import(e.module);return r[e.id]=t,t}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DA(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function MA(e,r,t){let n=await Promise.all(e.map(async a=>{let i=r.routes[a.route.id];if(i){let u=await IA(i,t);return u.links?u.links():[]}return[]}));return PA(n.flat(1).filter(DA).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Zv(e,r,t,n,a,i){let u=(g,m)=>t[m]?g.route.id!==t[m].route.id:!0,f=(g,m)=>t[m].pathname!==g.pathname||t[m].route.path?.endsWith("*")&&t[m].params["*"]!==g.params["*"];return i==="assets"?r.filter((g,m)=>u(g,m)||f(g,m)):i==="data"?r.filter((g,m)=>{let w=n.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(u(g,m)||f(g,m))return!0;if(g.route.shouldRevalidate){let _=g.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function FA(e,r,{includeHydrateFallback:t}={}){return LA(e.map(n=>{let a=r.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function LA(e){return[...new Set(e)]}function BA(e){let r={},t=Object.keys(e).sort();for(let n of t)r[n]=e[n];return r}function PA(e,r){let t=new Set;return new Set(r),e.reduce((n,a)=>{let i=JSON.stringify(BA(a));return t.has(i)||(t.add(i),n.push({key:i,link:a})),n},[])}function o3(){let e=Q.useContext(H0);return Cp(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function UA(){let e=Q.useContext(S1);return Cp(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Tp=Q.createContext(void 0);Tp.displayName="FrameworkContext";function c3(){let e=Q.useContext(Tp);return Cp(e,"You must render this element inside a <HydratedRouter> element"),e}function zA(e,r){let t=Q.useContext(Tp),[n,a]=Q.useState(!1),[i,u]=Q.useState(!1),{onFocus:f,onBlur:g,onMouseEnter:m,onMouseLeave:w,onTouchStart:_}=r,E=Q.useRef(null);Q.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let A=I=>{I.forEach(D=>{u(D.isIntersecting)})},C=new IntersectionObserver(A,{threshold:.5});return E.current&&C.observe(E.current),()=>{C.disconnect()}}},[e]),Q.useEffect(()=>{if(n){let A=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(A)}}},[n]);let k=()=>{a(!0)},N=()=>{a(!1),u(!1)};return t?e!=="intent"?[i,E,{}]:[i,E,{onFocus:Gu(f,k),onBlur:Gu(g,N),onMouseEnter:Gu(m,k),onMouseLeave:Gu(w,N),onTouchStart:Gu(_,k)}]:[!1,E,{}]}function Gu(e,r){return t=>{e&&e(t),t.defaultPrevented||r(t)}}function HA({page:e,...r}){let{router:t}=o3(),n=Q.useMemo(()=>K4(t.routes,e,t.basename),[t.routes,e,t.basename]);return n?Q.createElement(GA,{page:e,matches:n,...r}):null}function VA(e){let{manifest:r,routeModules:t}=c3(),[n,a]=Q.useState([]);return Q.useEffect(()=>{let i=!1;return MA(e,r,t).then(u=>{i||a(u)}),()=>{i=!0}},[e,r,t]),n}function GA({page:e,matches:r,...t}){let n=Hi(),{future:a,manifest:i,routeModules:u}=c3(),{basename:f}=o3(),{loaderData:g,matches:m}=UA(),w=Q.useMemo(()=>Zv(e,r,m,i,n,"data"),[e,r,m,i,n]),_=Q.useMemo(()=>Zv(e,r,m,i,n,"assets"),[e,r,m,i,n]),E=Q.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let A=new Set,C=!1;if(r.forEach(D=>{let O=i.routes[D.route.id];!O||!O.hasLoader||(!w.some(B=>B.route.id===D.route.id)&&D.route.id in g&&u[D.route.id]?.shouldRevalidate||O.hasClientLoader?C=!0:A.add(D.route.id))}),A.size===0)return[];let I=OA(e,f,a.unstable_trailingSlashAwareDataRequests,"data");return C&&A.size>0&&I.searchParams.set("_routes",r.filter(D=>A.has(D.route.id)).map(D=>D.route.id).join(",")),[I.pathname+I.search]},[f,a.unstable_trailingSlashAwareDataRequests,g,n,i,w,r,e,u]),k=Q.useMemo(()=>FA(_,i),[_,i]),N=VA(_);return Q.createElement(Q.Fragment,null,E.map(A=>Q.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),k.map(A=>Q.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),N.map(({key:A,link:C})=>Q.createElement("link",{key:A,nonce:t.nonce,...C})))}function WA(...e){return r=>{e.forEach(t=>{typeof t=="function"?t(r):t!=null&&(t.current=r)})}}var XA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XA&&(window.__reactRouterVersion="7.12.0")}catch{}function KA({basename:e,children:r,unstable_useTransitions:t,window:n}){let a=Q.useRef();a.current==null&&(a.current=A6({window:n,v5Compat:!0}));let i=a.current,[u,f]=Q.useState({action:i.action,location:i.location}),g=Q.useCallback(m=>{t===!1?f(m):Q.startTransition(()=>f(m))},[t]);return Q.useLayoutEffect(()=>i.listen(g),[i,g]),Q.createElement(_A,{basename:e,children:r,location:u.location,navigationType:u.action,navigator:i,unstable_useTransitions:t})}var u3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hr=Q.forwardRef(function({onClick:r,discover:t="render",prefetch:n="none",relative:a,reloadDocument:i,replace:u,state:f,target:g,to:m,preventScrollReset:w,viewTransition:_,unstable_defaultShouldRevalidate:E,...k},N){let{basename:A,unstable_useTransitions:C}=Q.useContext(Fs),I=typeof m=="string"&&u3.test(m),D=J4(m,A);m=D.to;let O=iA(m,{relative:a}),[B,U,X]=zA(n,k),F=ZA(m,{replace:u,state:f,target:g,preventScrollReset:w,relative:a,viewTransition:_,unstable_defaultShouldRevalidate:E,unstable_useTransitions:C});function Y(ce){r&&r(ce),ce.defaultPrevented||F(ce)}let H=Q.createElement("a",{...k,...X,href:D.absoluteURL||O,onClick:D.isExternal||i?r:Y,ref:WA(N,U),target:g,"data-discover":!I&&t==="render"?"true":void 0});return B&&!I?Q.createElement(Q.Fragment,null,H,Q.createElement(HA,{page:O})):H});hr.displayName="Link";var qA=Q.forwardRef(function({"aria-current":r="page",caseSensitive:t=!1,className:n="",end:a=!1,style:i,to:u,viewTransition:f,children:g,...m},w){let _=Gd(u,{relative:m.relative}),E=Hi(),k=Q.useContext(S1),{navigator:N,basename:A}=Q.useContext(Fs),C=k!=null&&rN(_)&&f===!0,I=N.encodeLocation?N.encodeLocation(_).pathname:_.pathname,D=E.pathname,O=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;t||(D=D.toLowerCase(),O=O?O.toLowerCase():null,I=I.toLowerCase()),O&&A&&(O=El(O,A)||O);const B=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let U=D===I||!a&&D.startsWith(I)&&D.charAt(B)==="/",X=O!=null&&(O===I||!a&&O.startsWith(I)&&O.charAt(I.length)==="/"),F={isActive:U,isPending:X,isTransitioning:C},Y=U?r:void 0,H;typeof n=="function"?H=n(F):H=[n,U?"active":null,X?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let ce=typeof i=="function"?i(F):i;return Q.createElement(hr,{...m,"aria-current":Y,className:H,ref:w,style:ce,to:u,viewTransition:f},typeof g=="function"?g(F):g)});qA.displayName="NavLink";var YA=Q.forwardRef(({discover:e="render",fetcherKey:r,navigate:t,reloadDocument:n,replace:a,state:i,method:u=qh,action:f,onSubmit:g,relative:m,preventScrollReset:w,viewTransition:_,unstable_defaultShouldRevalidate:E,...k},N)=>{let{unstable_useTransitions:A}=Q.useContext(Fs),C=eN(),I=tN(f,{relative:m}),D=u.toLowerCase()==="get"?"get":"post",O=typeof f=="string"&&u3.test(f),B=U=>{if(g&&g(U),U.defaultPrevented)return;U.preventDefault();let X=U.nativeEvent.submitter,F=X?.getAttribute("formmethod")||u,Y=()=>C(X||U.currentTarget,{fetcherKey:r,method:F,navigate:t,replace:a,state:i,relative:m,preventScrollReset:w,viewTransition:_,unstable_defaultShouldRevalidate:E});A&&t!==!1?Q.startTransition(()=>Y()):Y()};return Q.createElement("form",{ref:N,method:D,action:I,onSubmit:n?g:B,...k,"data-discover":!O&&e==="render"?"true":void 0})});YA.displayName="Form";function $A(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d3(e){let r=Q.useContext(H0);return Tn(r,$A(e)),r}function ZA(e,{target:r,replace:t,state:n,preventScrollReset:a,relative:i,viewTransition:u,unstable_defaultShouldRevalidate:f,unstable_useTransitions:g}={}){let m=G0(),w=Hi(),_=Gd(e,{relative:i});return Q.useCallback(E=>{if(CA(E,r)){E.preventDefault();let k=t!==void 0?t:xd(w)===xd(_),N=()=>m(e,{replace:k,state:n,preventScrollReset:a,relative:i,viewTransition:u,unstable_defaultShouldRevalidate:f});g?Q.startTransition(()=>N()):N()}},[w,m,_,t,n,r,e,a,i,u,f,g])}var JA=0,QA=()=>`__${String(++JA)}__`;function eN(){let{router:e}=d3("useSubmit"),{basename:r}=Q.useContext(Fs),t=bA(),n=e.fetch,a=e.navigate;return Q.useCallback(async(i,u={})=>{let{action:f,method:g,encType:m,formData:w,body:_}=RA(i,r);if(u.navigate===!1){let E=u.fetcherKey||QA();await n(E,t,u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:w,body:_,formMethod:u.method||g,formEncType:u.encType||m,flushSync:u.flushSync})}else await a(u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:w,body:_,formMethod:u.method||g,formEncType:u.encType||m,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[n,a,r,t])}function tN(e,{relative:r}={}){let{basename:t}=Q.useContext(Fs),n=Q.useContext(yi);Tn(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...Gd(e||".",{relative:r})},u=Hi();if(e==null){i.search=u.search;let f=new URLSearchParams(i.search),g=f.getAll("index");if(g.some(w=>w==="")){f.delete("index"),g.filter(_=>_).forEach(_=>f.append("index",_));let w=f.toString();i.search=w?`?${w}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:vl([t,i.pathname])),xd(i)}function rN(e,{relative:r}={}){let t=Q.useContext(e3);Tn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=d3("useViewTransitionState"),a=Gd(e,{relative:r});if(!t.isTransitioning)return!1;let i=El(t.currentLocation.pathname,n)||t.currentLocation.pathname,u=El(t.nextLocation.pathname,n)||t.nextLocation.pathname;return t1(a.pathname,u)!=null||t1(a.pathname,i)!=null}function N1(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t}function nN(e,r,t,n){function a(i){return i instanceof t?i:new t(function(u){u(i)})}return new(t||(t=Promise))(function(i,u){function f(w){try{m(n.next(w))}catch(_){u(_)}}function g(w){try{m(n.throw(w))}catch(_){u(_)}}function m(w){w.done?i(w.value):a(w.value).then(f,g)}m((n=n.apply(e,r||[])).next())})}const aN=e=>e?(...r)=>e(...r):(...r)=>fetch(...r);class jp extends Error{constructor(r,t="FunctionsError",n){super(r),this.name=t,this.context=n}}class sN extends jp{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Jv extends jp{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Qv extends jp{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Bg;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Bg||(Bg={}));class iN{constructor(r,{headers:t={},customFetch:n,region:a=Bg.Any}={}){this.url=r,this.headers=t,this.region=a,this.fetch=aN(n)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return nN(this,arguments,void 0,function*(t,n={}){var a;let i,u;try{const{headers:f,method:g,body:m,signal:w,timeout:_}=n;let E={},{region:k}=n;k||(k=this.region);const N=new URL(`${this.url}/${t}`);k&&k!=="any"&&(E["x-region"]=k,N.searchParams.set("forceFunctionRegion",k));let A;m&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",A=m):typeof m=="string"?(E["Content-Type"]="text/plain",A=m):typeof FormData<"u"&&m instanceof FormData?A=m:(E["Content-Type"]="application/json",A=JSON.stringify(m)):m&&typeof m!="string"&&!(typeof Blob<"u"&&m instanceof Blob)&&!(m instanceof ArrayBuffer)&&!(typeof FormData<"u"&&m instanceof FormData)?A=JSON.stringify(m):A=m;let C=w;_&&(u=new AbortController,i=setTimeout(()=>u.abort(),_),w?(C=u.signal,w.addEventListener("abort",()=>u.abort())):C=u.signal);const I=yield this.fetch(N.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),f),body:A,signal:C}).catch(U=>{throw new sN(U)}),D=I.headers.get("x-relay-error");if(D&&D==="true")throw new Jv(I);if(!I.ok)throw new Qv(I);let O=((a=I.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),B;return O==="application/json"?B=yield I.json():O==="application/octet-stream"||O==="application/pdf"?B=yield I.blob():O==="text/event-stream"?B=I:O==="multipart/form-data"?B=yield I.formData():B=yield I.text(),{data:B,error:null,response:I}}catch(f){return{data:null,error:f,response:f instanceof Qv||f instanceof Jv?f.context:void 0}}finally{i&&clearTimeout(i)}})}}var lN=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},oN=class{constructor(e){var r,t;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(t=e.isMaybeSingle)!==null&&t!==void 0?t:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let u=null,f=null,g=null,m=i.status,w=i.statusText;if(i.ok){var _,E;if(t.method!=="HEAD"){var k;const I=await i.text();I===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((k=t.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?f=I:f=JSON.parse(I))}const A=(_=t.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),C=(E=i.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");A&&C&&C.length>1&&(g=parseInt(C[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,g=null,m=406,w="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var N;const A=await i.text();try{u=JSON.parse(A),Array.isArray(u)&&i.status===404&&(f=[],u=null,m=200,w="OK")}catch{i.status===404&&A===""?(m=204,w="No Content"):u={message:A}}if(u&&t.isMaybeSingle&&(!(u==null||(N=u.details)===null||N===void 0)&&N.includes("0 rows"))&&(u=null,m=200,w="OK"),u&&t.shouldThrowOnError)throw new lN(u)}return{error:u,data:f,count:g,status:m,statusText:w}});return this.shouldThrowOnError||(a=a.catch(i=>{var u;let f="";const g=i?.cause;if(g){var m,w,_,E;const N=(m=g?.message)!==null&&m!==void 0?m:"",A=(w=g?.code)!==null&&w!==void 0?w:"";f=`${(_=i?.name)!==null&&_!==void 0?_:"FetchError"}: ${i?.message}`,f+=`

Caused by: ${(E=g?.name)!==null&&E!==void 0?E:"Error"}: ${N}`,A&&(f+=` (${A})`),g?.stack&&(f+=`
${g.stack}`)}else{var k;f=(k=i?.stack)!==null&&k!==void 0?k:""}return{error:{message:`${(u=i?.name)!==null&&u!==void 0?u:"FetchError"}: ${i?.message}`,details:f,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,r)}returns(){return this}overrideTypes(){return this}},cN=class extends oN{select(e){let r=!1;const t=(e??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:t,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",u=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${u?`${u},`:""}${e}.${r?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:t=r}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,r,{foreignTable:t,referencedTable:n=t}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:t=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var u;const f=[e?"analyze":null,r?"verbose":null,t?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),g=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${g}"; options=${f};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const ey=new RegExp("[,()]");var _0=class extends cN{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}regexMatch(e,r){return this.url.searchParams.append(e,`match.${r}`),this}regexIMatch(e,r){return this.url.searchParams.append(e,`imatch.${r}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}isDistinct(e,r){return this.url.searchParams.append(e,`isdistinct.${r}`),this}in(e,r){const t=Array.from(new Set(r)).map(n=>typeof n=="string"&&ey.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${t})`),this}notIn(e,r){const t=Array.from(new Set(r)).map(n=>typeof n=="string"&&ey.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${t})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:t,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=t===void 0?"":`(${t})`;return this.url.searchParams.append(e,`${a}fts${i}.${r}`),this}match(e){return Object.entries(e).forEach(([r,t])=>{this.url.searchParams.append(r,`eq.${t}`)}),this}not(e,r,t){return this.url.searchParams.append(e,`not.${r}.${t}`),this}or(e,{foreignTable:r,referencedTable:t=r}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,r,t){return this.url.searchParams.append(e,`${r}.${t}`),this}},uN=class{constructor(e,{headers:r={},schema:t,fetch:n}){this.url=e,this.headers=new Headers(r),this.schema=t,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,r){const{head:t=!1,count:n}=r??{},a=t?"HEAD":"GET";let i=!1;const u=(e??"*").split("").map(m=>/\s/.test(m)&&!i?"":(m==='"'&&(i=!i),m)).join(""),{url:f,headers:g}=this.cloneRequestState();return f.searchParams.set("select",u),n&&g.append("Prefer",`count=${n}`),new _0({method:a,url:f,headers:g,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:t=!0}={}){var n;const a="POST",{url:i,headers:u}=this.cloneRequestState();if(r&&u.append("Prefer",`count=${r}`),t||u.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(f.length>0){const g=[...new Set(f)].map(m=>`"${m}"`);i.searchParams.set("columns",g.join(","))}}return new _0({method:a,url:i,headers:u,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:t=!1,count:n,defaultToNull:a=!0}={}){var i;const u="POST",{url:f,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),r!==void 0&&f.searchParams.set("on_conflict",r),n&&g.append("Prefer",`count=${n}`),a||g.append("Prefer","missing=default"),Array.isArray(e)){const m=e.reduce((w,_)=>w.concat(Object.keys(_)),[]);if(m.length>0){const w=[...new Set(m)].map(_=>`"${_}"`);f.searchParams.set("columns",w.join(","))}}return new _0({method:u,url:f,headers:g,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:r}={}){var t;const n="PATCH",{url:a,headers:i}=this.cloneRequestState();return r&&i.append("Prefer",`count=${r}`),new _0({method:n,url:a,headers:i,schema:this.schema,body:e,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:e}={}){var r;const t="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new _0({method:t,url:n,headers:a,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},dN=class f3{constructor(r,{headers:t={},schema:n,fetch:a}={}){this.url=r,this.headers=new Headers(t),this.schemaName=n,this.fetch=a}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new uN(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new f3(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,t={},{head:n=!1,get:a=!1,count:i}={}){var u;let f;const g=new URL(`${this.url}/rpc/${r}`);let m;const w=k=>k!==null&&typeof k=="object"&&(!Array.isArray(k)||k.some(w)),_=n&&Object.values(t).some(w);_?(f="POST",m=t):n||a?(f=n?"HEAD":"GET",Object.entries(t).filter(([k,N])=>N!==void 0).map(([k,N])=>[k,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([k,N])=>{g.searchParams.append(k,N)})):(f="POST",m=t);const E=new Headers(this.headers);return _?E.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&E.set("Prefer",`count=${i}`),new _0({method:f,url:g,headers:E,schema:this.schemaName,body:m,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class fN{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const n=t.versions;if(n&&n.node){const a=n.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let t=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(t+=`

Suggested solution: ${r.workaround}`),new Error(t)}static createWebSocket(r,t){const n=this.getWebSocketConstructor();return new n(r,t)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const hN="2.90.1",xN=`realtime-js/${hN}`,h3="1.0.0",mN="2.0.0",ty=h3,Pg=1e4,gN=1e3,pN=100;var co;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(co||(co={}));var ha;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ha||(ha={}));var mi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(mi||(mi={}));var Ug;(function(e){e.websocket="websocket"})(Ug||(Ug={}));var Jo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Jo||(Jo={}));class bN{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,t){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(r));let n=[r.join_ref,r.ref,r.topic,r.event,r.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(r){var t;return this._isArrayBuffer((t=r.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var t,n;const a=(n=(t=r.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(r){var t,n;const a=(n=(t=r.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:{},u=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(r,t,n){var a,i;const u=r.topic,f=(a=r.ref)!==null&&a!==void 0?a:"",g=(i=r.join_ref)!==null&&i!==void 0?i:"",m=r.payload.event,w=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},_=Object.keys(w).length===0?"":JSON.stringify(w);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+f.length+u.length+m.length+_.length,k=new ArrayBuffer(this.HEADER_LENGTH+E);let N=new DataView(k),A=0;N.setUint8(A++,this.KINDS.userBroadcastPush),N.setUint8(A++,g.length),N.setUint8(A++,f.length),N.setUint8(A++,u.length),N.setUint8(A++,m.length),N.setUint8(A++,_.length),N.setUint8(A++,t),Array.from(g,I=>N.setUint8(A++,I.charCodeAt(0))),Array.from(f,I=>N.setUint8(A++,I.charCodeAt(0))),Array.from(u,I=>N.setUint8(A++,I.charCodeAt(0))),Array.from(m,I=>N.setUint8(A++,I.charCodeAt(0))),Array.from(_,I=>N.setUint8(A++,I.charCodeAt(0)));var C=new Uint8Array(k.byteLength+n.byteLength);return C.set(new Uint8Array(k),0),C.set(new Uint8Array(n),k.byteLength),C.buffer}decode(r,t){if(this._isArrayBuffer(r)){let n=this._binaryDecode(r);return t(n)}if(typeof r=="string"){const n=JSON.parse(r),[a,i,u,f,g]=n;return t({join_ref:a,ref:i,topic:u,event:f,payload:g})}return t({})}_binaryDecode(r){const t=new DataView(r),n=t.getUint8(0),a=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(r,t,a)}_decodeUserBroadcast(r,t,n){const a=t.getUint8(1),i=t.getUint8(2),u=t.getUint8(3),f=t.getUint8(4);let g=this.HEADER_LENGTH+4;const m=n.decode(r.slice(g,g+a));g=g+a;const w=n.decode(r.slice(g,g+i));g=g+i;const _=n.decode(r.slice(g,g+u));g=g+u;const E=r.slice(g,r.byteLength),k=f===this.JSON_ENCODING?JSON.parse(n.decode(E)):E,N={type:this.BROADCAST_EVENT,event:w,payload:k};return u>0&&(N.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(r){var t;return r instanceof ArrayBuffer||((t=r?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(r,t){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([n])=>t.includes(n)))}}class x3{constructor(r,t){this.callback=r,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(mn||(mn={}));const ry=(e,r,t={})=>{var n;const a=(n=t.skipTypes)!==null&&n!==void 0?n:[];return r?Object.keys(r).reduce((i,u)=>(i[u]=wN(u,e,r,a),i),{}):{}},wN=(e,r,t,n)=>{const a=r.find(f=>f.name===e),i=a?.type,u=t[e];return i&&!n.includes(i)?m3(i,u):zg(u)},m3=(e,r)=>{if(e.charAt(0)==="_"){const t=e.slice(1,e.length);return kN(r,t)}switch(e){case mn.bool:return vN(r);case mn.float4:case mn.float8:case mn.int2:case mn.int4:case mn.int8:case mn.numeric:case mn.oid:return yN(r);case mn.json:case mn.jsonb:return _N(r);case mn.timestamp:return EN(r);case mn.abstime:case mn.date:case mn.daterange:case mn.int4range:case mn.int8range:case mn.money:case mn.reltime:case mn.text:case mn.time:case mn.timestamptz:case mn.timetz:case mn.tsrange:case mn.tstzrange:return zg(r);default:return zg(r)}},zg=e=>e,vN=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},yN=e=>{if(typeof e=="string"){const r=parseFloat(e);if(!Number.isNaN(r))return r}return e},_N=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},kN=(e,r)=>{if(typeof e!="string")return e;const t=e.length-1,n=e[t];if(e[0]==="{"&&n==="}"){let i;const u=e.slice(1,t);try{i=JSON.parse("["+u+"]")}catch{i=u?u.split(","):[]}return i.map(f=>m3(r,f))}return e},EN=e=>typeof e=="string"?e.replace(" ","T"):e,g3=e=>{const r=new URL(e);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class qm{constructor(r,t,n={},a=Pg){this.channel=r,this.event=t,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,t){var n;return this._hasReceived(r)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:r,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:t}){this.recHooks.filter(n=>n.status===r).forEach(n=>n.callback(t))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var ny;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ny||(ny={}));class td{constructor(r,t){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=td.syncState(this.state,a,i,u),this.pendingDiffs.forEach(g=>{this.state=td.syncDiff(this.state,g,i,u)}),this.pendingDiffs=[],f()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=td.syncDiff(this.state,a,i,u),f())}),this.onJoin((a,i,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:u})}),this.onLeave((a,i,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,t,n,a){const i=this.cloneDeep(r),u=this.transformState(t),f={},g={};return this.map(i,(m,w)=>{u[m]||(g[m]=w)}),this.map(u,(m,w)=>{const _=i[m];if(_){const E=w.map(C=>C.presence_ref),k=_.map(C=>C.presence_ref),N=w.filter(C=>k.indexOf(C.presence_ref)<0),A=_.filter(C=>E.indexOf(C.presence_ref)<0);N.length>0&&(f[m]=N),A.length>0&&(g[m]=A)}else f[m]=w}),this.syncDiff(i,{joins:f,leaves:g},n,a)}static syncDiff(r,t,n,a){const{joins:i,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(f,g)=>{var m;const w=(m=r[f])!==null&&m!==void 0?m:[];if(r[f]=this.cloneDeep(g),w.length>0){const _=r[f].map(k=>k.presence_ref),E=w.filter(k=>_.indexOf(k.presence_ref)<0);r[f].unshift(...E)}n(f,w,g)}),this.map(u,(f,g)=>{let m=r[f];if(!m)return;const w=g.map(_=>_.presence_ref);m=m.filter(_=>w.indexOf(_.presence_ref)<0),r[f]=m,a(f,m,g),m.length===0&&delete r[f]}),r}static map(r,t){return Object.getOwnPropertyNames(r).map(n=>t(n,r[n]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((t,n)=>{const a=r[n];return"metas"in a?t[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=a,t},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ay;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ay||(ay={}));var rd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(rd||(rd={}));var gl;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(gl||(gl={}));class A0{constructor(r,t={config:{}},n){var a,i;if(this.topic=r,this.params=t,this.socket=n,this.bindings={},this.state=ha.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new qm(this,mi.join,this.params,this.timeout),this.rejoinTimer=new x3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ha.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ha.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ha.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ha.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ha.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mi.reply,{},(u,f)=>{this._trigger(this._replyEventName(f),u)}),this.presence=new td(this),this.broadcastEndpointURL=g3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,t=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ha.closed){const{config:{broadcast:u,presence:f,private:g}}=this.params,m=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(k=>k.filter))!==null&&a!==void 0?a:[],w=!!this.bindings[rd.PRESENCE]&&this.bindings[rd.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,_={},E={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:w}),postgres_changes:m,private:g};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(k=>r?.(gl.CHANNEL_ERROR,k)),this._onClose(()=>r?.(gl.CLOSED)),this.updateJoinPayload(Object.assign({config:E},_)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:k})=>{var N;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){r?.(gl.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,C=(N=A?.length)!==null&&N!==void 0?N:0,I=[];for(let D=0;D<C;D++){const O=A[D],{filter:{event:B,schema:U,table:X,filter:F}}=O,Y=k&&k[D];if(Y&&Y.event===B&&A0.isFilterValueEqual(Y.schema,U)&&A0.isFilterValueEqual(Y.table,X)&&A0.isFilterValueEqual(Y.filter,F))I.push(Object.assign(Object.assign({},O),{id:Y.id}));else{this.unsubscribe(),this.state=ha.errored,r?.(gl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,r&&r(gl.SUBSCRIBED);return}}).receive("error",k=>{this.state=ha.errored,r?.(gl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{r?.(gl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,t={}){return await this.send({type:"presence",event:"track",payload:r},t.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,t,n){return this.state===ha.joined&&r===rd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,t,n)}async httpSend(r,t,n={}){var a;if(t==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:t,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(f.status===202)return{success:!0};let g=f.statusText;try{const m=await f.json();g=m.error||m.message||g}catch{}return Promise.reject(new Error(g))}async send(r,t={}){var n,a;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:u}=r,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var u,f,g;const m=this._push(r.type,r,t.timeout||this.timeout);r.type==="broadcast"&&!(!((g=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||g===void 0)&&g.ack)&&i("ok"),m.receive("ok",()=>i("ok")),m.receive("error",()=>i("error")),m.receive("timeout",()=>i("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=ha.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new qm(this,mi.leave,{},r),n.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ha.closed,this.bindings={}}async _fetchWithTimeout(r,t,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),u=await this.socket.fetch(r,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(i),u}_push(r,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new qm(this,r,t,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>pN){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(r,t,n){return t}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,t,n){var a,i;const u=r.toLocaleLowerCase(),{close:f,error:g,leave:m,join:w}=mi;if(n&&[f,g,m,w].indexOf(u)>=0&&n!==this._joinRef())return;let E=this._onMessage(u,t,n);if(t&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(k=>{var N,A,C;return((N=k.filter)===null||N===void 0?void 0:N.event)==="*"||((C=(A=k.filter)===null||A===void 0?void 0:A.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(k=>k.callback(E,n)):(i=this.bindings[u])===null||i===void 0||i.filter(k=>{var N,A,C,I,D,O,B,U;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in k){const X=k.id,F=(N=k.filter)===null||N===void 0?void 0:N.event;return X&&((A=t.ids)===null||A===void 0?void 0:A.includes(X))&&(F==="*"||F?.toLocaleLowerCase()===((C=t.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))&&(!(!((I=k.filter)===null||I===void 0)&&I.table)||k.filter.table===((D=t.data)===null||D===void 0?void 0:D.table))}else{const X=(B=(O=k?.filter)===null||O===void 0?void 0:O.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return X==="*"||X===((U=t?.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===u}).map(k=>{if(typeof E=="object"&&"ids"in E){const N=E.data,{schema:A,table:C,commit_timestamp:I,type:D,errors:O}=N;E=Object.assign(Object.assign({},{schema:A,table:C,commit_timestamp:I,eventType:D,new:{},old:{},errors:O}),this._getPayloadRecords(N))}k.callback(E,n)})}_isClosed(){return this.state===ha.closed}_isJoined(){return this.state===ha.joined}_isJoining(){return this.state===ha.joining}_isLeaving(){return this.state===ha.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,t,n){const a=r.toLocaleLowerCase(),i={type:a,filter:t,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(r,t){const n=r.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&A0.isEqual(a.filter,t))})),this}static isEqual(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const n in r)if(r[n]!==t[n])return!1;return!0}static isFilterValueEqual(r,t){return(r??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(mi.close,{},r)}_onError(r){this._on(mi.error,{},t=>r(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ha.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const t={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(t.new=ry(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(t.old=ry(r.columns,r.old_record)),t}}const Ym=()=>{},Sh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},SN=[1e3,2e3,5e3,1e4],AN=1e4,NN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class CN{constructor(r,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pg,this.transport=null,this.heartbeatIntervalMs=Sh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ym,this.ref=0,this.reconnectTimer=null,this.vsn=ty,this.logger=Ym,this.conn=null,this.sendBuffer=[],this.serializer=new bN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=t?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${r}/${Ug.websocket}`,this.httpEndpoint=g3(r),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fN.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const t=r.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const t=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const r=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,t,n){this.logger(r,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case co.connecting:return Jo.Connecting;case co.open:return Jo.Open;case co.closing:return Jo.Closing;default:return Jo.Closed}}isConnected(){return this.connectionState()===Jo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,t={config:{}}){const n=`realtime:${r}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new A0(`realtime:${r}`,t,this);return this.channels.push(i),i}}push(r){const{topic:t,event:n,payload:a,ref:i}=r,u=()=>{this.encode(r,f=>{var g;(g=this.conn)===null||g===void 0||g.send(f)})};this.log("push",`${t} ${n} (${i})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(gN,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Sh.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let t=this.channels.find(n=>n.topic===r&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${r}"`),t.unsubscribe())}_remove(r){this.channels=this.channels.filter(t=>t.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const m=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",m)}catch(w){this.log("error","error in heartbeat callback",w)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:i,ref:u}=t,f=u?`(${u})`:"",g=i.status||"";this.log("receive",`${g} ${n} ${a} ${f}`.trim(),i),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(a,i,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(r){var t;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===co.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===co.open||this.conn.readyState===co.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var t;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(mi.error))}_appendParams(r,t){if(Object.keys(t).length===0)return r;const n=r.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${r}${n}${a}`}_workerObjectUrl(r){let t;if(r)t=r;else{const n=new Blob([NN],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(r,t=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(r=null){let t,n=!1;if(r)t=r,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(a=>{const i={access_token:t,version:xN};t&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(mi.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${r}`,t)})}_triggerStateCallbacks(r,t){try{this.stateChangeCallbacks[r].forEach(n=>{try{n(t)}catch(a){this.log("error",`error in ${r} callback`,a)}})}catch(n){this.log("error",`error triggering ${r} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new x3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Sh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var t,n,a,i,u,f,g,m,w,_,E,k;switch(this.transport=(t=r?.transport)!==null&&t!==void 0?t:null,this.timeout=(n=r?.timeout)!==null&&n!==void 0?n:Pg,this.heartbeatIntervalMs=(a=r?.heartbeatIntervalMs)!==null&&a!==void 0?a:Sh.HEARTBEAT_INTERVAL,this.worker=(i=r?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(u=r?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=r?.heartbeatCallback)!==null&&f!==void 0?f:Ym,this.vsn=(g=r?.vsn)!==null&&g!==void 0?g:ty,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=r?.reconnectAfterMs)!==null&&m!==void 0?m:(N=>SN[N-1]||AN),this.vsn){case h3:this.encode=(w=r?.encode)!==null&&w!==void 0?w:((N,A)=>A(JSON.stringify(N))),this.decode=(_=r?.decode)!==null&&_!==void 0?_:((N,A)=>A(JSON.parse(N)));break;case mN:this.encode=(E=r?.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(k=r?.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var md=class extends Error{constructor(e,r){super(e),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function TN(e,r,t){const n=new URL(r,e);if(t)for(const[a,i]of Object.entries(t))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function jN(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function RN(e){const r=e.fetchImpl??globalThis.fetch;return{async request({method:t,path:n,query:a,body:i,headers:u}){const f=TN(e.baseUrl,n,a),g=await jN(e.auth),m=await r(f,{method:t,headers:{...i?{"Content-Type":"application/json"}:{},...g,...u},body:i?JSON.stringify(i):void 0}),w=await m.text(),_=(m.headers.get("content-type")||"").includes("application/json"),E=_&&w?JSON.parse(w):w;if(!m.ok){const k=_?E:void 0,N=k?.error;throw new md(N?.message??`Request failed with status ${m.status}`,{status:m.status,icebergType:N?.type,icebergCode:N?.code,details:k})}return{status:m.status,headers:m.headers,data:E}}}}function Ah(e){return e.join("")}var ON=class{constructor(e,r=""){this.client=e,this.prefix=r}async listNamespaces(e){const r=e?{parent:Ah(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,r){const t={namespace:e.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ah(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ah(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ah(e.namespace)}`}),!0}catch(r){if(r instanceof md&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(e,r){try{return await this.createNamespace(e,r)}catch(t){if(t instanceof md&&t.status===409)return;throw t}}};function d0(e){return e.join("")}var IN=class{constructor(e,r="",t){this.client=e,this.prefix=r,this.accessDelegation=t}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${d0(e.namespace)}/tables`})).data.identifiers}async createTable(e,r){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${d0(e.namespace)}/tables`,body:r,headers:t})).data.metadata}async updateTable(e,r){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${d0(e.namespace)}/tables/${e.name}`,body:r});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(e,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${d0(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${d0(e.namespace)}/tables/${e.name}`,headers:r})).data.metadata}async tableExists(e){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${d0(e.namespace)}/tables/${e.name}`,headers:r}),!0}catch(t){if(t instanceof md&&t.status===404)return!1;throw t}}async createTableIfNotExists(e,r){try{return await this.createTable(e,r)}catch(t){if(t instanceof md&&t.status===409)return await this.loadTable({namespace:e.namespace,name:r.name});throw t}}},DN=class{constructor(e){let r="v1";e.catalogName&&(r+=`/${e.catalogName}`);const t=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=RN({baseUrl:t,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new ON(this.client,r),this.tableOps=new IN(this.client,r,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,r){return this.namespaceOps.createNamespace(e,r)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,r){return this.tableOps.createTable(e,r)}async updateTable(e,r){return this.tableOps.updateTable(e,r)}async dropTable(e,r){await this.tableOps.dropTable(e,r)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,r){return this.namespaceOps.createNamespaceIfNotExists(e,r)}async createTableIfNotExists(e,r){return this.tableOps.createTableIfNotExists(e,r)}},C1=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Rn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var MN=class extends C1{constructor(e,r,t){super(e),this.name="StorageApiError",this.status=r,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Hg=class extends C1{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}};const Rp=e=>e?(...r)=>e(...r):(...r)=>fetch(...r),FN=()=>Response,Vg=e=>{if(Array.isArray(e))return e.map(t=>Vg(t));if(typeof e=="function"||e!==Object(e))return e;const r={};return Object.entries(e).forEach(([t,n])=>{const a=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));r[a]=Vg(n)}),r},LN=e=>{if(typeof e!="object"||e===null)return!1;const r=Object.getPrototypeOf(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},BN=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function gd(e){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},gd(e)}function PN(e,r){if(gd(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function UN(e){var r=PN(e,"string");return gd(r)=="symbol"?r:r+""}function zN(e,r,t){return(r=UN(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function sy(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Qt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?sy(Object(t),!0).forEach(function(n){zN(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sy(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}const $m=e=>{var r;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(r=e.error)===null||r===void 0?void 0:r.message)||JSON.stringify(e)},HN=async(e,r,t)=>{e instanceof await FN()&&!t?.noResolveJson?e.json().then(n=>{const a=e.status||500,i=n?.statusCode||a+"";r(new MN($m(n),a,i))}).catch(n=>{r(new Hg($m(n),n))}):r(new Hg($m(e),e))},VN=(e,r,t,n)=>{const a={method:e,headers:r?.headers||{}};return e==="GET"||!n?a:(LN(n)?(a.headers=Qt({"Content-Type":"application/json"},r?.headers),a.body=JSON.stringify(n)):a.body=n,r?.duplex&&(a.duplex=r.duplex),Qt(Qt({},a),t))};async function Wd(e,r,t,n,a,i){return new Promise((u,f)=>{e(t,VN(r,n,a,i)).then(g=>{if(!g.ok)throw g;return n?.noResolveJson?g:g.json()}).then(g=>u(g)).catch(g=>HN(g,f,n))})}async function pd(e,r,t,n){return Wd(e,"GET",r,t,n)}async function xi(e,r,t,n,a){return Wd(e,"POST",r,n,a,t)}async function Gg(e,r,t,n,a){return Wd(e,"PUT",r,n,a,t)}async function GN(e,r,t,n){return Wd(e,"HEAD",r,Qt(Qt({},t),{},{noResolveJson:!0}),n)}async function Op(e,r,t,n,a){return Wd(e,"DELETE",r,n,a,t)}var WN=class{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Rn(r))return{data:null,error:r};throw r}}};let p3;p3=Symbol.toStringTag;var XN=class{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[p3]="BlobDownloadBuilder",this.promise=null}asStream(){return new WN(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Rn(r))return{data:null,error:r};throw r}}};const KN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var qN=class{constructor(e,r={},t,n){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=t,this.fetch=Rp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,r,t,n){var a=this;try{let i;const u=Qt(Qt({},iy),n);let f=Qt(Qt({},a.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&t instanceof Blob?(i=new FormData,i.append("cacheControl",u.cacheControl),g&&i.append("metadata",a.encodeMetadata(g)),i.append("",t)):typeof FormData<"u"&&t instanceof FormData?(i=t,i.has("cacheControl")||i.append("cacheControl",u.cacheControl),g&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(g))):(i=t,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,g&&(f["x-metadata"]=a.toBase64(a.encodeMetadata(g))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!u.duplex&&(u.duplex="half")),n?.headers&&(f=Qt(Qt({},f),n.headers));const m=a._removeEmptyFolders(r),w=a._getFinalPath(m),_=await(e=="PUT"?Gg:xi)(a.fetch,`${a.url}/object/${w}`,i,Qt({headers:f},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:_.Id,fullPath:_.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Rn(i))return{data:null,error:i};throw i}}async upload(e,r,t){return this.uploadOrUpdate("POST",e,r,t)}async uploadToSignedUrl(e,r,t,n){var a=this;const i=a._removeEmptyFolders(e),u=a._getFinalPath(i),f=new URL(a.url+`/object/upload/sign/${u}`);f.searchParams.set("token",r);try{let g;const m=Qt({upsert:iy.upsert},n),w=Qt(Qt({},a.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&t instanceof Blob?(g=new FormData,g.append("cacheControl",m.cacheControl),g.append("",t)):typeof FormData<"u"&&t instanceof FormData?(g=t,g.append("cacheControl",m.cacheControl)):(g=t,w["cache-control"]=`max-age=${m.cacheControl}`,w["content-type"]=m.contentType),{data:{path:i,fullPath:(await Gg(a.fetch,f.toString(),g,{headers:w})).Key},error:null}}catch(g){if(a.shouldThrowOnError)throw g;if(Rn(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(e,r){var t=this;try{let n=t._getFinalPath(e);const a=Qt({},t.headers);r?.upsert&&(a["x-upsert"]="true");const i=await xi(t.fetch,`${t.url}/object/upload/sign/${n}`,{},{headers:a}),u=new URL(t.url+i.url),f=u.searchParams.get("token");if(!f)throw new C1("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:f},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}}async update(e,r,t){return this.uploadOrUpdate("PUT",e,r,t)}async move(e,r,t){var n=this;try{return{data:await xi(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:r,destinationBucket:t?.destinationBucket},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Rn(a))return{data:null,error:a};throw a}}async copy(e,r,t){var n=this;try{return{data:{path:(await xi(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:r,destinationBucket:t?.destinationBucket},{headers:n.headers})).Key},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Rn(a))return{data:null,error:a};throw a}}async createSignedUrl(e,r,t){var n=this;try{let a=n._getFinalPath(e),i=await xi(n.fetch,`${n.url}/object/sign/${a}`,Qt({expiresIn:r},t?.transform?{transform:t.transform}:{}),{headers:n.headers});const u=t?.download?`&download=${t.download===!0?"":t.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${u}`)},{data:i,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Rn(a))return{data:null,error:a};throw a}}async createSignedUrls(e,r,t){var n=this;try{const a=await xi(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:r,paths:e},{headers:n.headers}),i=t?.download?`&download=${t.download===!0?"":t.download}`:"";return{data:a.map(u=>Qt(Qt({},u),{},{signedUrl:u.signedURL?encodeURI(`${n.url}${u.signedURL}${i}`):null})),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Rn(a))return{data:null,error:a};throw a}}download(e,r){const t=typeof r?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(r?.transform||{}),a=n?`?${n}`:"",i=this._getFinalPath(e),u=()=>pd(this.fetch,`${this.url}/${t}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new XN(u,this.shouldThrowOnError)}async info(e){var r=this;const t=r._getFinalPath(e);try{return{data:Vg(await pd(r.fetch,`${r.url}/object/info/${t}`,{headers:r.headers})),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}}async exists(e){var r=this;const t=r._getFinalPath(e);try{return await GN(r.fetch,`${r.url}/object/${t}`,{headers:r.headers}),{data:!0,error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Rn(n)&&n instanceof Hg){const a=n.originalError;if([400,404].includes(a?.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,r){const t=this._getFinalPath(e),n=[],a=r?.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&n.push(a);const i=typeof r?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(r?.transform||{});u!==""&&n.push(u);let f=n.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${t}${f}`)}}}async remove(e){var r=this;try{return{data:await Op(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:e},{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(Rn(t))return{data:null,error:t};throw t}}async list(e,r,t){var n=this;try{const a=Qt(Qt(Qt({},KN),r),{},{prefix:e||""});return{data:await xi(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},t),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Rn(a))return{data:null,error:a};throw a}}async listV2(e,r){var t=this;try{const n=Qt({},e);return{data:await xi(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,n,{headers:t.headers},r),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}};const b3="2.90.1",w3={"X-Client-Info":`storage-js/${b3}`};var YN=class{constructor(e,r={},t,n){this.shouldThrowOnError=!1;const a=new URL(e);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Qt(Qt({},w3),r),this.fetch=Rp(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var r=this;try{const t=r.listBucketOptionsToQueryString(e);return{data:await pd(r.fetch,`${r.url}/bucket${t}`,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(Rn(t))return{data:null,error:t};throw t}}async getBucket(e){var r=this;try{return{data:await pd(r.fetch,`${r.url}/bucket/${e}`,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(Rn(t))return{data:null,error:t};throw t}}async createBucket(e,r={public:!1}){var t=this;try{return{data:await xi(t.fetch,`${t.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}}async updateBucket(e,r){var t=this;try{return{data:await Gg(t.fetch,`${t.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Rn(n))return{data:null,error:n};throw n}}async emptyBucket(e){var r=this;try{return{data:await xi(r.fetch,`${r.url}/bucket/${e}/empty`,{},{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(Rn(t))return{data:null,error:t};throw t}}async deleteBucket(e){var r=this;try{return{data:await Op(r.fetch,`${r.url}/bucket/${e}`,{},{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(Rn(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},$N=class{constructor(e,r={},t){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Qt(Qt({},w3),r),this.fetch=Rp(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var r=this;try{return{data:await xi(r.fetch,`${r.url}/bucket`,{name:e},{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(Rn(t))return{data:null,error:t};throw t}}async listBuckets(e){var r=this;try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const n=t.toString(),a=n?`${r.url}/bucket?${n}`:`${r.url}/bucket`;return{data:await pd(r.fetch,a,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(Rn(t))return{data:null,error:t};throw t}}async deleteBucket(e){var r=this;try{return{data:await Op(r.fetch,`${r.url}/bucket/${e}`,{},{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(Rn(t))return{data:null,error:t};throw t}}from(e){var r=this;if(!BN(e))throw new C1("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new DN({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(t,{get(a,i){const u=a[i];return typeof u!="function"?u:async(...f)=>{try{return{data:await u.apply(a,f),error:null}}catch(g){if(n)throw g;return{data:null,error:g}}}}})}};const Ip={"X-Client-Info":`storage-js/${b3}`,"Content-Type":"application/json"};var v3=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function js(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Zm=class extends v3{constructor(e,r,t){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ZN=class extends v3{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}};const Dp=e=>e?(...r)=>e(...r):(...r)=>fetch(...r),JN=e=>{if(typeof e!="object"||e===null)return!1;const r=Object.getPrototypeOf(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ly=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),QN=async(e,r,t)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!t?.noResolveJson){const n=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const u=i?.statusCode||i?.code||n+"";r(new Zm(ly(i),n,u))}).catch(()=>{const i=n+"";r(new Zm(a.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";r(new Zm(a.statusText||`HTTP ${n} error`,n,i))}}else r(new ZN(ly(e),e))},e8=(e,r,t,n)=>{const a={method:e,headers:r?.headers||{}};return n?(JN(n)?(a.headers=Qt({"Content-Type":"application/json"},r?.headers),a.body=JSON.stringify(n)):a.body=n,Qt(Qt({},a),t)):a};async function t8(e,r,t,n,a,i){return new Promise((u,f)=>{e(t,e8(r,n,a,i)).then(g=>{if(!g.ok)throw g;if(n?.noResolveJson)return g;const m=g.headers.get("content-type");return!m||!m.includes("application/json")?{}:g.json()}).then(g=>u(g)).catch(g=>QN(g,f,n))})}async function Rs(e,r,t,n,a){return t8(e,"POST",r,n,a,t)}var r8=class{constructor(e,r={},t){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Qt(Qt({},Ip),r),this.fetch=Dp(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var r=this;try{return{data:await Rs(r.fetch,`${r.url}/CreateIndex`,e,{headers:r.headers})||{},error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async getIndex(e,r){var t=this;try{return{data:await Rs(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(js(n))return{data:null,error:n};throw n}}async listIndexes(e){var r=this;try{return{data:await Rs(r.fetch,`${r.url}/ListIndexes`,e,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async deleteIndex(e,r){var t=this;try{return{data:await Rs(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(js(n))return{data:null,error:n};throw n}}},n8=class{constructor(e,r={},t){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Qt(Qt({},Ip),r),this.fetch=Dp(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var r=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Rs(r.fetch,`${r.url}/PutVectors`,e,{headers:r.headers})||{},error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async getVectors(e){var r=this;try{return{data:await Rs(r.fetch,`${r.url}/GetVectors`,e,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async listVectors(e){var r=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Rs(r.fetch,`${r.url}/ListVectors`,e,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async queryVectors(e){var r=this;try{return{data:await Rs(r.fetch,`${r.url}/QueryVectors`,e,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async deleteVectors(e){var r=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Rs(r.fetch,`${r.url}/DeleteVectors`,e,{headers:r.headers})||{},error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}},a8=class{constructor(e,r={},t){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Qt(Qt({},Ip),r),this.fetch=Dp(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var r=this;try{return{data:await Rs(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:r.headers})||{},error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async getBucket(e){var r=this;try{return{data:await Rs(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:e},{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async listBuckets(e={}){var r=this;try{return{data:await Rs(r.fetch,`${r.url}/ListVectorBuckets`,e,{headers:r.headers}),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}async deleteBucket(e){var r=this;try{return{data:await Rs(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:r.headers})||{},error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(js(t))return{data:null,error:t};throw t}}},s8=class extends a8{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new i8(this.url,this.headers,e,this.fetch)}async createBucket(e){var r=()=>super.createBucket,t=this;return r().call(t,e)}async getBucket(e){var r=()=>super.getBucket,t=this;return r().call(t,e)}async listBuckets(e={}){var r=()=>super.listBuckets,t=this;return r().call(t,e)}async deleteBucket(e){var r=()=>super.deleteBucket,t=this;return r().call(t,e)}},i8=class extends r8{constructor(e,r,t,n){super(e,r,n),this.vectorBucketName=t}async createIndex(e){var r=()=>super.createIndex,t=this;return r().call(t,Qt(Qt({},e),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(e={}){var r=()=>super.listIndexes,t=this;return r().call(t,Qt(Qt({},e),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(e){var r=()=>super.getIndex,t=this;return r().call(t,t.vectorBucketName,e)}async deleteIndex(e){var r=()=>super.deleteIndex,t=this;return r().call(t,t.vectorBucketName,e)}index(e){return new l8(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},l8=class extends n8{constructor(e,r,t,n,a){super(e,r,a),this.vectorBucketName=t,this.indexName=n}async putVectors(e){var r=()=>super.putVectors,t=this;return r().call(t,Qt(Qt({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(e){var r=()=>super.getVectors,t=this;return r().call(t,Qt(Qt({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(e={}){var r=()=>super.listVectors,t=this;return r().call(t,Qt(Qt({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(e){var r=()=>super.queryVectors,t=this;return r().call(t,Qt(Qt({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(e){var r=()=>super.deleteVectors,t=this;return r().call(t,Qt(Qt({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},o8=class extends YN{constructor(e,r={},t,n){super(e,r,t,n)}from(e){return new qN(this.url,this.headers,e,this.fetch)}get vectors(){return new s8(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $N(this.url+"/iceberg",this.headers,this.fetch)}};const y3="2.90.1",k0=30*1e3,Wg=3,Jm=Wg*k0,c8="http://localhost:9999",u8="supabase.auth.token",d8={"X-Client-Info":`gotrue-js/${y3}`},Xg="X-Supabase-Api-Version",_3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},f8=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,h8=600*1e3;class bd extends Error{constructor(r,t,n){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function zt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class x8 extends bd{constructor(r,t,n){super(r,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function m8(e){return zt(e)&&e.name==="AuthApiError"}class Qo extends bd{constructor(r,t){super(r),this.name="AuthUnknownError",this.originalError=t}}class Al extends bd{constructor(r,t,n,a){super(r,n,a),this.name=t,this.status=n}}class Ss extends Al{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function g8(e){return zt(e)&&e.name==="AuthSessionMissingError"}class f0 extends Al{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nh extends Al{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Ch extends Al{constructor(r,t=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function p8(e){return zt(e)&&e.name==="AuthImplicitGrantRedirectError"}class oy extends Al{constructor(r,t=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class b8 extends Al{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Kg extends Al{constructor(r,t){super(r,"AuthRetryableFetchError",t,void 0)}}function Qm(e){return zt(e)&&e.name==="AuthRetryableFetchError"}class cy extends Al{constructor(r,t,n){super(r,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class qg extends Al{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const r1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),uy=` 	
\r=`.split(""),w8=(()=>{const e=new Array(128);for(let r=0;r<e.length;r+=1)e[r]=-1;for(let r=0;r<uy.length;r+=1)e[uy[r].charCodeAt(0)]=-2;for(let r=0;r<r1.length;r+=1)e[r1[r].charCodeAt(0)]=r;return e})();function dy(e,r,t){if(e!==null)for(r.queue=r.queue<<8|e,r.queuedBits+=8;r.queuedBits>=6;){const n=r.queue>>r.queuedBits-6&63;t(r1[n]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const n=r.queue>>r.queuedBits-6&63;t(r1[n]),r.queuedBits-=6}}function k3(e,r,t){const n=w8[e];if(n>-1)for(r.queue=r.queue<<6|n,r.queuedBits+=6;r.queuedBits>=8;)t(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function fy(e){const r=[],t=u=>{r.push(String.fromCodePoint(u))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=u=>{_8(u,n,t)};for(let u=0;u<e.length;u+=1)k3(e.charCodeAt(u),a,i);return r.join("")}function v8(e,r){if(e<=127){r(e);return}else if(e<=2047){r(192|e>>6),r(128|e&63);return}else if(e<=65535){r(224|e>>12),r(128|e>>6&63),r(128|e&63);return}else if(e<=1114111){r(240|e>>18),r(128|e>>12&63),r(128|e>>6&63),r(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function y8(e,r){for(let t=0;t<e.length;t+=1){let n=e.charCodeAt(t);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}v8(n,r)}}function _8(e,r,t){if(r.utf8seq===0){if(e<=127){t(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){r.utf8seq=n;break}if(r.utf8seq===2)r.codepoint=e&31;else if(r.utf8seq===3)r.codepoint=e&15;else if(r.utf8seq===4)r.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|e&63,r.utf8seq-=1,r.utf8seq===0&&t(r.codepoint)}}function T0(e){const r=[],t={queue:0,queuedBits:0},n=a=>{r.push(a)};for(let a=0;a<e.length;a+=1)k3(e.charCodeAt(a),t,n);return new Uint8Array(r)}function k8(e){const r=[];return y8(e,t=>r.push(t)),new Uint8Array(r)}function tc(e){const r=[],t={queue:0,queuedBits:0},n=a=>{r.push(a)};return e.forEach(a=>dy(a,t,n)),dy(null,t,n),r.join("")}function E8(e){return Math.round(Date.now()/1e3)+e}function S8(){return Symbol("auth-callback")}const Ca=()=>typeof window<"u"&&typeof document<"u",Yo={tested:!1,writable:!1},E3=()=>{if(!Ca())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yo.tested)return Yo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Yo.tested=!0,Yo.writable=!0}catch{Yo.tested=!0,Yo.writable=!1}return Yo.writable};function A8(e){const r={},t=new URL(e);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,i)=>{r[i]=a})}catch{}return t.searchParams.forEach((n,a)=>{r[a]=n}),r}const S3=e=>e?(...r)=>e(...r):(...r)=>fetch(...r),N8=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",E0=async(e,r,t)=>{await e.setItem(r,JSON.stringify(t))},$o=async(e,r)=>{const t=await e.getItem(r);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Na=async(e,r)=>{await e.removeItem(r)};class T1{constructor(){this.promise=new T1.promiseConstructor((r,t)=>{this.resolve=r,this.reject=t})}}T1.promiseConstructor=Promise;function eg(e){const r=e.split(".");if(r.length!==3)throw new qg("Invalid JWT structure");for(let n=0;n<r.length;n++)if(!f8.test(r[n]))throw new qg("JWT not in base64url format");return{header:JSON.parse(fy(r[0])),payload:JSON.parse(fy(r[1])),signature:T0(r[2]),raw:{header:r[0],payload:r[1]}}}async function C8(e){return await new Promise(r=>{setTimeout(()=>r(null),e)})}function T8(e,r){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const u=await e(i);if(!r(i,null,u)){n(u);return}}catch(u){if(!r(i,u)){a(u);return}}})()})}function j8(e){return("0"+e.toString(16)).substr(-2)}function R8(){const r=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let a="";for(let i=0;i<56;i++)a+=t.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(r),Array.from(r,j8).join("")}async function O8(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function I8(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await O8(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function h0(e,r,t=!1){const n=R8();let a=n;t&&(a+="/PASSWORD_RECOVERY"),await E0(e,`${r}-code-verifier`,a);const i=await I8(n);return[i,n===i?"plain":"s256"]}const D8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function M8(e){const r=e.headers.get(Xg);if(!r||!r.match(D8))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function F8(e){if(!e)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(e<=r)throw new Error("JWT has expired")}function L8(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const B8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function x0(e){if(!B8.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tg(){const e={};return new Proxy(e,{get:(r,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function P8(e,r){return new Proxy(e,{get:(t,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,a)}return!r.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(t,n,a)}})}function hy(e){return JSON.parse(JSON.stringify(e))}const Zo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),U8=[502,503,504];async function xy(e){var r;if(!N8(e))throw new Kg(Zo(e),0);if(U8.includes(e.status))throw new Kg(Zo(e),e.status);let t;try{t=await e.json()}catch(i){throw new Qo(Zo(i),i)}let n;const a=M8(e);if(a&&a.getTime()>=_3["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new cy(Zo(t),e.status,((r=t.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(n==="session_not_found")throw new Ss}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,u)=>i&&typeof u=="string",!0))throw new cy(Zo(t),e.status,t.weak_password.reasons);throw new x8(Zo(t),e.status||500,n)}const z8=(e,r,t,n)=>{const a={method:e,headers:r?.headers||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),t))};async function Jt(e,r,t,n){var a;const i=Object.assign({},n?.headers);i[Xg]||(i[Xg]=_3["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const u=(a=n?.query)!==null&&a!==void 0?a:{};n?.redirectTo&&(u.redirect_to=n.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await H8(e,r,t+f,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(g):{data:Object.assign({},g),error:null}}async function H8(e,r,t,n,a,i){const u=z8(r,n,a,i);let f;try{f=await e(t,Object.assign({},u))}catch(g){throw console.error(g),new Kg(Zo(g),0)}if(f.ok||await xy(f),n?.noResolveJson)return f;try{return await f.json()}catch(g){await xy(g)}}function hi(e){var r;let t=null;W8(e)&&(t=Object.assign({},e),e.expires_at||(t.expires_at=E8(e.expires_in)));const n=(r=e.user)!==null&&r!==void 0?r:e;return{data:{session:t,user:n},error:null}}function my(e){const r=hi(e);return!r.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(r.data.weak_password=e.weak_password),r}function uo(e){var r;return{data:{user:(r=e.user)!==null&&r!==void 0?r:e},error:null}}function V8(e){return{data:e,error:null}}function G8(e){const{action_link:r,email_otp:t,hashed_token:n,redirect_to:a,verification_type:i}=e,u=N1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:r,email_otp:t,hashed_token:n,redirect_to:a,verification_type:i},g=Object.assign({},u);return{data:{properties:f,user:g},error:null}}function gy(e){return e}function W8(e){return e.access_token&&e.refresh_token&&e.expires_in}const rg=["global","local","others"];class X8{constructor({url:r="",headers:t={},fetch:n}){this.url=r,this.headers=t,this.fetch=S3(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,t=rg[0]){if(rg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rg.join(", ")}`);try{return await Jt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(n){if(zt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(r,t={}){try{return await Jt(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:uo})}catch(n){if(zt(n))return{data:{user:null},error:n};throw n}}async generateLink(r){try{const{options:t}=r,n=N1(r,["options"]),a=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(a.new_email=n?.newEmail,delete a.newEmail),await Jt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:G8,redirectTo:t?.redirectTo})}catch(t){if(zt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(r){try{return await Jt(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:uo})}catch(t){if(zt(t))return{data:{user:null},error:t};throw t}}async listUsers(r){var t,n,a,i,u,f,g;try{const m={nextPage:null,lastPage:0,total:0},w=await Jt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=r?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=r?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:gy});if(w.error)throw w.error;const _=await w.json(),E=(u=w.headers.get("x-total-count"))!==null&&u!==void 0?u:0,k=(g=(f=w.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return k.length>0&&(k.forEach(N=>{const A=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(N.split(";")[1].split("=")[1]);m[`${C}Page`]=A}),m.total=parseInt(E)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(zt(m))return{data:{users:[]},error:m};throw m}}async getUserById(r){x0(r);try{return await Jt(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:uo})}catch(t){if(zt(t))return{data:{user:null},error:t};throw t}}async updateUserById(r,t){x0(r);try{return await Jt(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:t,headers:this.headers,xform:uo})}catch(n){if(zt(n))return{data:{user:null},error:n};throw n}}async deleteUser(r,t=!1){x0(r);try{return await Jt(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:t},xform:uo})}catch(n){if(zt(n))return{data:{user:null},error:n};throw n}}async _listFactors(r){x0(r.userId);try{const{data:t,error:n}=await Jt(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:n}}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _deleteFactor(r){x0(r.userId),x0(r.id);try{return{data:await Jt(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _listOAuthClients(r){var t,n,a,i,u,f,g;try{const m={nextPage:null,lastPage:0,total:0},w=await Jt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=r?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=r?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:gy});if(w.error)throw w.error;const _=await w.json(),E=(u=w.headers.get("x-total-count"))!==null&&u!==void 0?u:0,k=(g=(f=w.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return k.length>0&&(k.forEach(N=>{const A=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(N.split(";")[1].split("=")[1]);m[`${C}Page`]=A}),m.total=parseInt(E)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(zt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(r){try{return await Jt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _getOAuthClient(r){try{return await Jt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _updateOAuthClient(r,t){try{return await Jt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(zt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(r){try{return await Jt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(zt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(r){try{return await Jt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(zt(t))return{data:null,error:t};throw t}}}function py(e={}){return{getItem:r=>e[r]||null,setItem:(r,t)=>{e[r]=t},removeItem:r=>{delete e[r]}}}const m0={debug:!!(globalThis&&E3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class A3 extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class K8 extends A3{}async function q8(e,r,t){m0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,r);const n=new globalThis.AbortController;return r>0&&setTimeout(()=>{n.abort(),m0.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){m0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await t()}finally{m0.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(r===0)throw m0.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new K8(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(m0.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function Y8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function N3(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function $8(e){return parseInt(e,16)}function Z8(e){const r=new TextEncoder().encode(e);return"0x"+Array.from(r,n=>n.toString(16).padStart(2,"0")).join("")}function J8(e){var r;const{chainId:t,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:u,notBefore:f,requestId:g,resources:m,scheme:w,uri:_,version:E}=e;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((r=e.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const k=N3(e.address),N=w?`${w}://${n}`:n,A=e.statement?`${e.statement}
`:"",C=`${N} wants you to sign in with your Ethereum account:
${k}

${A}`;let I=`URI: ${_}
Version: ${E}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${i.toISOString()}`;if(a&&(I+=`
Expiration Time: ${a.toISOString()}`),f&&(I+=`
Not Before: ${f.toISOString()}`),g&&(I+=`
Request ID: ${g}`),m){let D=`
Resources:`;for(const O of m){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);D+=`
- ${O}`}I+=D}return`${C}
${I}`}class la extends Error{constructor({message:r,code:t,cause:n,name:a}){var i;super(r,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=t}}class n1 extends la{constructor(r,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:r}),this.name="WebAuthnUnknownError",this.originalError=t}}function Q8({error:e,options:r}){var t,n,a;const{publicKey:i}=r;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(r.signal instanceof AbortSignal)return new la({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((t=i.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new la({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(r.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new la({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new la({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new la({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new la({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new la({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new la({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(C3(u)){if(i.rp.id!==u)return new la({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new la({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new la({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new la({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new la({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function eC({error:e,options:r}){const{publicKey:t}=r;if(!t)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(r.signal instanceof AbortSignal)return new la({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new la({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(C3(n)){if(t.rpId!==n)return new la({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new la({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new la({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new la({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class tC{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const rC=new tC;function nC(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:r,user:t,excludeCredentials:n}=e,a=N1(e,["challenge","user","excludeCredentials"]),i=T0(r).buffer,u=Object.assign(Object.assign({},t),{id:T0(t.id).buffer}),f=Object.assign(Object.assign({},a),{challenge:i,user:u});if(n&&n.length>0){f.excludeCredentials=new Array(n.length);for(let g=0;g<n.length;g++){const m=n[g];f.excludeCredentials[g]=Object.assign(Object.assign({},m),{id:T0(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return f}function aC(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:r,allowCredentials:t}=e,n=N1(e,["challenge","allowCredentials"]),a=T0(r).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(t&&t.length>0){i.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const f=t[u];i.allowCredentials[u]=Object.assign(Object.assign({},f),{id:T0(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return i}function sC(e){var r;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const t=e;return{id:e.id,rawId:e.id,response:{attestationObject:tc(new Uint8Array(e.response.attestationObject)),clientDataJSON:tc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(r=t.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function iC(e){var r;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const t=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:tc(new Uint8Array(a.authenticatorData)),clientDataJSON:tc(new Uint8Array(a.clientDataJSON)),signature:tc(new Uint8Array(a.signature)),userHandle:a.userHandle?tc(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(r=t.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function C3(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function by(){var e,r;return!!(Ca()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function lC(e){try{const r=await navigator.credentials.create(e);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new n1("Browser returned unexpected credential type",r)}:{data:null,error:new n1("Empty credential response",r)}}catch(r){return{data:null,error:Q8({error:r,options:e})}}}async function oC(e){try{const r=await navigator.credentials.get(e);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new n1("Browser returned unexpected credential type",r)}:{data:null,error:new n1("Empty credential response",r)}}catch(r){return{data:null,error:eC({error:r,options:e})}}}const cC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},uC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function a1(...e){const r=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const u=a[i];if(u!==void 0)if(Array.isArray(u))n[i]=u;else if(t(u))n[i]=u;else if(r(u)){const f=n[i];r(f)?n[i]=a1(f,u):n[i]=a1(u)}else n[i]=u}return n}function dC(e,r){return a1(cC,e,r||{})}function fC(e,r){return a1(uC,e,r||{})}class hC{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:t,friendlyName:n,signal:a},i){try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:r,webauthn:t});if(!u)return{data:null,error:f};const g=a??rC.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=dC(u.webauthn.credential_options.publicKey,i?.create),{data:w,error:_}=await lC({publicKey:m,signal:g});return w?{data:{factorId:r,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}case"request":{const m=fC(u.webauthn.credential_options.publicKey,i?.request),{data:w,error:_}=await oC(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:g}));return w?{data:{factorId:r,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}}}catch(u){return zt(u)?{data:null,error:u}:{data:null,error:new Qo("Unexpected error in challenge",u)}}}async _verify({challengeId:r,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:r,webauthn:n})}async _authenticate({factorId:r,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!t)return{data:null,error:new bd("rpId is required for WebAuthn authentication")};try{if(!by())return{data:null,error:new Qo("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this.challenge({factorId:r,webauthn:{rpId:t,rpOrigins:n},signal:a},{request:i});if(!u)return{data:null,error:f};const{webauthn:g}=u;return this._verify({factorId:r,challengeId:u.challengeId,webauthn:{type:g.type,rpId:t,rpOrigins:n,credential_response:g.credential_response}})}catch(u){return zt(u)?{data:null,error:u}:{data:null,error:new Qo("Unexpected error in authenticate",u)}}}async _register({friendlyName:r,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!t)return{data:null,error:new bd("rpId is required for WebAuthn registration")};try{if(!by())return{data:null,error:new Qo("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this._enroll({friendlyName:r});if(!u)return await this.client.mfa.listFactors().then(w=>{var _;return(_=w.data)===null||_===void 0?void 0:_.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===r&&E.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w?.id}):void 0),{data:null,error:f};const{data:g,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:a},{create:i});return g?this._verify({factorId:u.id,challengeId:g.challengeId,webauthn:{rpId:t,rpOrigins:n,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:m}}catch(u){return zt(u)?{data:null,error:u}:{data:null,error:new Qo("Unexpected error in register",u)}}}}Y8();const xC={url:c8,storageKey:u8,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:d8,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function wy(e,r,t){return await t()}const g0={};class wd{get jwks(){var r,t;return(t=(r=g0[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(r){g0[this.storageKey]=Object.assign(Object.assign({},g0[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,t;return(t=(r=g0[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){g0[this.storageKey]=Object.assign(Object.assign({},g0[this.storageKey]),{cachedAt:r})}constructor(r){var t,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},xC),r);if(this.storageKey=i.storageKey,this.instanceID=(t=wd.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,wd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Ca()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new X8({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=S3(i.fetch),this.lock=i.lock||wy,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Ca()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=q8:this.lock=wy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new hC(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:E3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=py(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=py(this.memoryStorage)),Ca()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${y3}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let t={},n="none";if(Ca()&&(t=A8(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Ca()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),p8(i)){const g=(r=i.details)===null||r===void 0?void 0:r.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:u,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return zt(t)?this._returnResult({error:t}):this._returnResult({error:new Qo("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var t,n,a;try{const i=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=r?.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=r?.options)===null||a===void 0?void 0:a.captchaToken}},xform:hi}),{data:u,error:f}=i;if(f||!u)return this._returnResult({data:{user:null,session:null},error:f});const g=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(i){if(zt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(r){var t,n,a;try{let i;if("email"in r){const{email:w,password:_,options:E}=r;let k=null,N=null;this.flowType==="pkce"&&([k,N]=await h0(this.storage,this.storageKey)),i=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E?.emailRedirectTo,body:{email:w,password:_,data:(t=E?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:E?.captchaToken},code_challenge:k,code_challenge_method:N},xform:hi})}else if("phone"in r){const{phone:w,password:_,options:E}=r;i=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:_,data:(n=E?.data)!==null&&n!==void 0?n:{},channel:(a=E?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:E?.captchaToken}},xform:hi})}else throw new Nh("You must provide either an email or phone number and a password");const{data:u,error:f}=i;if(f||!u)return await Na(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const g=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(i){if(await Na(this.storage,`${this.storageKey}-code-verifier`),zt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(r){try{let t;if("email"in r){const{email:i,password:u,options:f}=r;t=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:my})}else if("phone"in r){const{phone:i,password:u,options:f}=r;t=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:u,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:my})}else throw new Nh("You must provide either an email or phone number and a password");const{data:n,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new f0;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(t){if(zt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(r){var t,n,a,i;return await this._handleProviderSignIn(r.provider,{redirectTo:(t=r.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=r.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=r.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=r.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:t}=r;switch(t){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(r){var t,n,a,i,u,f,g,m,w,_,E;let k,N;if("message"in r)k=r.message,N=r.signature;else{const{chain:A,wallet:C,statement:I,options:D}=r;let O;if(Ca())if(typeof C=="object")O=C;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")O=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=C}const B=new URL((t=D?.url)!==null&&t!==void 0?t:window.location.href),U=await O.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const X=N3(U[0]);let F=(n=D?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!F){const H=await O.request({method:"eth_chainId"});F=$8(H)}const Y={domain:B.host,address:X,statement:I,uri:B.href,version:"1",chainId:F,nonce:(a=D?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(i=D?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(f=D?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(g=D?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(m=D?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(w=D?.signInWithEthereum)===null||w===void 0?void 0:w.resources};k=J8(Y),N=await O.request({method:"personal_sign",params:[Z8(k),X]})}try{const{data:A,error:C}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:N},!((_=r.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(E=r.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:hi});if(C)throw C;if(!A||!A.session||!A.user){const I=new f0;return this._returnResult({data:{user:null,session:null},error:I})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:C})}catch(A){if(zt(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(r){var t,n,a,i,u,f,g,m,w,_,E,k;let N,A;if("message"in r)N=r.message,A=r.signature;else{const{chain:C,wallet:I,statement:D,options:O}=r;let B;if(Ca())if(typeof I=="object")B=I;else{const X=window;if("solana"in X&&typeof X.solana=="object"&&("signIn"in X.solana&&typeof X.solana.signIn=="function"||"signMessage"in X.solana&&typeof X.solana.signMessage=="function"))B=X.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=I}const U=new URL((t=O?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in B&&B.signIn){const X=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),D?{statement:D}:null));let F;if(Array.isArray(X)&&X[0]&&typeof X[0]=="object")F=X[0];else if(X&&typeof X=="object"&&"signedMessage"in X&&"signature"in X)F=X;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)N=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),A=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${U.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(a=(n=O?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=O?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((u=O?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((f=O?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((g=O?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((m=O?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((_=(w=O?.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||_===void 0)&&_.length?["Resources",...O.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const X=await B.signMessage(new TextEncoder().encode(N),"utf8");if(!X||!(X instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=X}}try{const{data:C,error:I}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:tc(A)},!((E=r.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(k=r.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:hi});if(I)throw I;if(!C||!C.session||!C.user){const D=new f0;return this._returnResult({data:{user:null,session:null},error:D})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:I})}catch(C){if(zt(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(r){const t=await $o(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(t??"").split("/");try{if(!n&&this.flowType==="pkce")throw new b8;const{data:i,error:u}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:n},xform:hi});if(await Na(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!i||!i.session||!i.user){const f=new f0;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:u})}catch(i){if(await Na(this.storage,`${this.storageKey}-code-verifier`),zt(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(r){try{const{options:t,provider:n,token:a,access_token:i,nonce:u}=r,f=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:u,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:hi}),{data:g,error:m}=f;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!g||!g.session||!g.user){const w=new f0;return this._returnResult({data:{user:null,session:null},error:w})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:m})}catch(t){if(zt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(r){var t,n,a,i,u;try{if("email"in r){const{email:f,options:g}=r;let m=null,w=null;this.flowType==="pkce"&&([m,w]=await h0(this.storage,this.storageKey));const{error:_}=await Jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=g?.data)!==null&&t!==void 0?t:{},create_user:(n=g?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:m,code_challenge_method:w},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in r){const{phone:f,options:g}=r,{data:m,error:w}=await Jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=g?.data)!==null&&a!==void 0?a:{},create_user:(i=g?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(u=g?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:w})}throw new Nh("You must provide either an email or phone number.")}catch(f){if(await Na(this.storage,`${this.storageKey}-code-verifier`),zt(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(r){var t,n;try{let a,i;"options"in r&&(a=(t=r.options)===null||t===void 0?void 0:t.redirectTo,i=(n=r.options)===null||n===void 0?void 0:n.captchaToken);const{data:u,error:f}=await Jt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:hi});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,m=u.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(a){if(zt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(r){var t,n,a,i,u;try{let f=null,g=null;this.flowType==="pkce"&&([f,g]=await h0(this.storage,this.storageKey));const m=await Jt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(n=(t=r.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=r?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:g}),headers:this.headers,xform:V8});return!((i=m.data)===null||i===void 0)&&i.url&&Ca()&&!(!((u=r.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(f){if(await Na(this.storage,`${this.storageKey}-code-verifier`),zt(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:t},error:n}=r;if(n)throw n;if(!t)throw new Ss;const{error:a}=await Jt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(r){if(zt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const t=`${this.url}/resend`;if("email"in r){const{email:n,type:a,options:i}=r,{error:u}=await Jt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in r){const{phone:n,type:a,options:i}=r,{data:u,error:f}=await Jt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:f})}throw new Nh("You must provide either an email or phone number and a type")}catch(t){if(zt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(r,t){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await r(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const t=await $o(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?r=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const n=r.expires_at?r.expires_at*1e3-Date.now()<Jm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",r.expires_at),!n){if(this.userStorage){const u=await $o(this.userStorage,this.storageKey+"-user");u?.user?r.user=u.user:r.user=tg()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};r.user=P8(r.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:a,error:i}=await this._callRefreshToken(r.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(r){try{return r?await Jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:uo}):await this._useSession(async t=>{var n,a,i;const{data:u,error:f}=t;if(f)throw f;return!(!((n=u.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ss}:await Jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:uo})})}catch(t){if(zt(t))return g8(t)&&(await this._removeSession(),await Na(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(r,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,t))}async _updateUser(r,t={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Ss;const u=a.session;let f=null,g=null;this.flowType==="pkce"&&r.email!=null&&([f,g]=await h0(this.storage,this.storageKey));const{data:m,error:w}=await Jt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:f,code_challenge_method:g}),jwt:u.access_token,xform:uo});if(w)throw w;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(n){if(await Na(this.storage,`${this.storageKey}-code-verifier`),zt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new Ss;const t=Date.now()/1e3;let n=t,a=!0,i=null;const{payload:u}=eg(r.access_token);if(u.exp&&(n=u.exp,a=n<=t),a){const{data:f,error:g}=await this._callRefreshToken(r.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!f)return{data:{user:null,session:null},error:null};i=f}else{const{data:f,error:g}=await this._getUser(r.access_token);if(g)throw g;i={access_token:r.access_token,refresh_token:r.refresh_token,user:f.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(t){if(zt(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async t=>{var n;if(!r){const{data:u,error:f}=t;if(f)throw f;r=(n=u.session)!==null&&n!==void 0?n:void 0}if(!r?.refresh_token)throw new Ss;const{data:a,error:i}=await this._callRefreshToken(r.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(zt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(r,t){try{if(!Ca())throw new Ch("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Ch(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new oy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ch("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new oy("No code detected.");const{data:D,error:O}=await this._exchangeCodeForSession(r.code);if(O)throw O;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:u,expires_in:f,expires_at:g,token_type:m}=r;if(!i||!f||!u||!m)throw new Ch("No session defined in URL");const w=Math.round(Date.now()/1e3),_=parseInt(f);let E=w+_;g&&(E=parseInt(g));const k=E-w;k*1e3<=k0&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${_}s`);const N=E-_;w-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,E,w):w-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,E,w);const{data:A,error:C}=await this._getUser(i);if(C)throw C;const I={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:_,expires_at:E,refresh_token:u,token_type:m,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:I,redirectType:r.type},error:null})}catch(n){if(zt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const t=await $o(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&t)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:a,error:i}=t;if(i)return this._returnResult({error:i});const u=(n=a.session)===null||n===void 0?void 0:n.access_token;if(u){const{error:f}=await this.admin.signOut(u,r);if(f&&!(m8(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return r!=="others"&&(await this._removeSession(),await Na(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const t=S8(),n={id:t,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(r){return await this._useSession(async t=>{var n,a;try{const{data:{session:i},error:u}=t;if(u)throw u;await((n=this.stateChangeEmitters.get(r))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",r,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(r))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",i),console.error(i)}})}async resetPasswordForEmail(r,t={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await h0(this.storage,this.storageKey,!0));try{return await Jt(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(await Na(this.storage,`${this.storageKey}-code-verifier`),zt(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var r;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(r=t.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(t){if(zt(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var t;try{const{data:n,error:a}=await this._useSession(async i=>{var u,f,g,m,w;const{data:_,error:E}=i;if(E)throw E;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(u=r.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=r.options)===null||f===void 0?void 0:f.scopes,queryParams:(g=r.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Jt(this.fetch,"GET",k,{headers:this.headers,jwt:(w=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&w!==void 0?w:void 0})});if(a)throw a;return Ca()&&!(!((t=r.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:r.provider,url:n?.url},error:null})}catch(n){if(zt(n))return this._returnResult({data:{provider:r.provider,url:null},error:n});throw n}}async linkIdentityIdToken(r){return await this._useSession(async t=>{var n;try{const{error:a,data:{session:i}}=t;if(a)throw a;const{options:u,provider:f,token:g,access_token:m,nonce:w}=r,_=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:f,id_token:g,access_token:m,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:hi}),{data:E,error:k}=_;return k?this._returnResult({data:{user:null,session:null},error:k}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new f0}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:k}))}catch(a){if(await Na(this.storage,`${this.storageKey}-code-verifier`),zt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(r){try{return await this._useSession(async t=>{var n,a;const{data:i,error:u}=t;if(u)throw u;return await Jt(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(zt(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(r){const t=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await T8(async a=>(a>0&&await C8(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Jt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:hi})),(a,i)=>{const u=200*Math.pow(2,a);return i&&Qm(i)&&Date.now()+u-n<k0})}catch(n){if(this._debug(t,"error",n),zt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",t,"url",n),Ca()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:r,url:n},error:null}}async _recoverAndRefresh(){var r,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await $o(this.storage,this.storageKey);if(a&&this.userStorage){let u=await $o(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await E0(this.userStorage,this.storageKey+"-user",u)),a.user=(r=u?.user)!==null&&r!==void 0?r:tg()}else if(a&&!a.user&&!a.user){const u=await $o(this.storage,this.storageKey+"-user");u&&u?.user?(a.user=u.user,await Na(this.storage,this.storageKey+"-user"),await E0(this.storage,this.storageKey,a)):a.user=tg()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Jm;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Jm}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Qm(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(a.access_token);!f&&u?.user?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(n,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(r){var t,n;if(!r)throw new Ss;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new T1;const{data:i,error:u}=await this._refreshAccessToken(r);if(u)throw u;if(!i.session)throw new Ss;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const f={data:i.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(i){if(this._debug(a,"error",i),zt(i)){const u={data:null,error:i};return Qm(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(r,t,n=!0){const a=`#_notifyAllSubscribers(${r})`;this._debug(a,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:r,session:t});const i=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(r,t)}catch(g){i.push(g)}});if(await Promise.all(u),i.length>0){for(let f=0;f<i.length;f+=1)console.error(i[f]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await Na(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},r),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await E0(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const i=hy(a);await E0(this.storage,this.storageKey,i)}else{const a=hy(t);await E0(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Na(this.storage,this.storageKey),await Na(this.storage,this.storageKey+"-code-verifier"),await Na(this.storage,this.storageKey+"-user"),this.userStorage&&await Na(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Ca()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),k0);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-r)/k0);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${k0}ms, refresh threshold is ${Wg} ticks`),a<=Wg&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof A3)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ca()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const t=`#_onVisibilityChanged(${r})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,t,n){const a=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,u]=await h0(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(f.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n?.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${r}?${a.join("&")}`}async _unenroll(r){try{return await this._useSession(async t=>{var n;const{data:a,error:i}=t;return i?this._returnResult({data:null,error:i}):await Jt(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(zt(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(r){try{return await this._useSession(async t=>{var n,a;const{data:i,error:u}=t;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:g,error:m}=await Jt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return m?this._returnResult({data:null,error:m}):(r.factorType==="totp"&&g.type==="totp"&&(!((a=g?.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(t){if(zt(t))return this._returnResult({data:null,error:t});throw t}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:a,error:i}=t;if(i)return this._returnResult({data:null,error:i});const u=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?sC(r.webauthn.credential_response):iC(r.webauthn.credential_response)})}:{code:r.code}),{data:f,error:g}=await Jt(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:u,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:g}))})}catch(t){if(zt(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:a,error:i}=t;if(i)return this._returnResult({data:null,error:i});const u=await Jt(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});if(u.error)return u;const{data:f}=u;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:nC(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:aC(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(zt(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(r){const{data:t,error:n}=await this._challenge({factorId:r.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:r.factorId,challengeId:t.id,code:r.code})}async _listFactors(){var r;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(r=t?.factors)!==null&&r!==void 0?r:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var r,t;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=eg(n.access_token);let u=null;i.aal&&(u=i.aal);let f=u;((t=(r=n.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(f="aal2");const m=i.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async t=>{const{data:{session:n},error:a}=t;return a?this._returnResult({data:null,error:a}):n?await Jt(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ss})})}catch(t){if(zt(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(r,t){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ss});const u=await Jt(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&Ca()&&!t?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(n){if(zt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(r,t){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ss});const u=await Jt(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&Ca()&&!t?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(n){if(zt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:t},error:n}=r;return n?this._returnResult({data:null,error:n}):t?await Jt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ss})})}catch(r){if(zt(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async t=>{const{data:{session:n},error:a}=t;return a?this._returnResult({data:null,error:a}):n?(await Jt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ss})})}catch(t){if(zt(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(r,t={keys:[]}){let n=t.keys.find(f=>f.kid===r);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(f=>f.kid===r),n&&this.jwks_cached_at+h8>a)return n;const{data:i,error:u}=await Jt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(f=>f.kid===r),!n)?null:n}async getClaims(r,t={}){try{let n=r;if(!n){const{data:k,error:N}=await this.getSession();if(N||!k.session)return this._returnResult({data:null,error:N});n=k.session.access_token}const{header:a,payload:i,signature:u,raw:{header:f,payload:g}}=eg(n);t?.allowExpired||F8(i.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!m){const{error:k}=await this.getUser(n);if(k)throw k;return{data:{claims:i,header:a,signature:u},error:null}}const w=L8(a.alg),_=await crypto.subtle.importKey("jwk",m,w,!0,["verify"]);if(!await crypto.subtle.verify(w,_,u,k8(`${f}.${g}`)))throw new qg("Invalid JWT signature");return{data:{claims:i,header:a,signature:u},error:null}}catch(n){if(zt(n))return this._returnResult({data:null,error:n});throw n}}}wd.nextInstanceID={};const mC=wd,gC="2.90.1";let qu="";typeof Deno<"u"?qu="deno":typeof document<"u"?qu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qu="react-native":qu="node";const pC={"X-Client-Info":`supabase-js-${qu}/${gC}`},bC={headers:pC},wC={schema:"public"},vC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yC={};function vd(e){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},vd(e)}function _C(e,r){if(vd(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(vd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function kC(e){var r=_C(e,"string");return vd(r)=="symbol"?r:r+""}function EC(e,r,t){return(r=kC(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function vy(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Un(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?vy(Object(t),!0).forEach(function(n){EC(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vy(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}const SC=e=>e?(...r)=>e(...r):(...r)=>fetch(...r),AC=()=>Headers,NC=(e,r,t)=>{const n=SC(t),a=AC();return async(i,u)=>{var f;const g=(f=await r())!==null&&f!==void 0?f:e;let m=new a(u?.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${g}`),n(i,Un(Un({},u),{},{headers:m}))}};function CC(e){return e.endsWith("/")?e:e+"/"}function TC(e,r){var t,n;const{db:a,auth:i,realtime:u,global:f}=e,{db:g,auth:m,realtime:w,global:_}=r,E={db:Un(Un({},g),a),auth:Un(Un({},m),i),realtime:Un(Un({},w),u),storage:{},global:Un(Un(Un({},_),f),{},{headers:Un(Un({},(t=_?.headers)!==null&&t!==void 0?t:{}),(n=f?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?E.accessToken=e.accessToken:delete E.accessToken,E}function jC(e){const r=e?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(CC(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var RC=class extends mC{constructor(e){super(e)}},OC=class{constructor(e,r,t){var n,a;this.supabaseUrl=e,this.supabaseKey=r;const i=jC(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const u=`sb-${i.hostname.split(".")[0]}-auth-token`,f={db:wC,realtime:yC,auth:Un(Un({},vC),{},{storageKey:u}),global:bC},g=TC(t??{},f);if(this.storageKey=(n=g.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(w,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=g.auth)!==null&&m!==void 0?m:{},this.headers,g.global.fetch)}this.fetch=NC(r,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Un({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new dN(new URL("rest/v1",i).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new o8(this.storageUrl.href,this.headers,this.fetch,t?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new iN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,t)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,r,t;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:t,storage:n,userStorage:a,storageKey:i,flowType:u,lock:f,debug:g,throwOnError:m},w,_){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new RC({url:this.authUrl.href,headers:Un(Un({},E),w),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:t,storage:n,userStorage:a,flowType:u,lock:f,debug:g,throwOnError:m,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new CN(this.realtimeUrl.href,Un(Un({},e),{},{params:Un(Un({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(e,r,t){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const IC=(e,r,t)=>new OC(e,r,t);function DC(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const r=e.version;if(r==null)return!1;const t=r.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}DC()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");console.warn("Supabase URL or Key is missing! Check your .env file or Railway Variables.");const Pt=IC("https://placeholder.supabase.co","placeholder"),Er=(e,r)=>{if(r)throw console.error("Supabase Error:",r),{response:{data:{message:r.message||"Bir hata olutu"}}};return{data:e}},T3={login:async(e,r)=>{if(!e.includes("@"))throw{response:{data:{message:"Ltfen e-posta adresinizi giriniz."}}};const{data:t,error:n}=await Pt.auth.signInWithPassword({email:e,password:r});if(n)throw n.message.includes("Email not confirmed")?{response:{data:{message:"E-posta adresiniz henz onaylanmam."}}}:{response:{data:{message:"Giri yaplamad. Bilgilerinizi kontrol edin."}}};const{data:a,error:i}=await Pt.from("user_profiles").select("*").eq("id",t.user.id).single();let u=a||{role:"user",permissions:{}};return{status:200,data:{token:t.session.access_token,user:{...t.user,...u}}}},verify2FA:async e=>({status:200}),logout:async()=>{const{error:e}=await Pt.auth.signOut();if(e)throw e;return localStorage.removeItem("user"),localStorage.removeItem("auth_token"),{status:200}}},yn=()=>{try{const e=localStorage.getItem("user");if(e)return JSON.parse(e).company_code}catch(e){console.error("Error reading company code",e)}return null},Cn={getAll:async()=>{const e=yn();if(!e)return{data:{products:[]}};const{data:r,error:t}=await Pt.from("products").select("*").eq("company_code",e).order("name");if(t)throw t;return{data:{products:(r||[]).map(a=>({...a,price:a.sale_price,group:a.category}))}}},add:async e=>{const r=yn();if(!r)throw new Error("irket kodu bulunamad.");const t={stock_code:e.stock_code,name:e.name,barcode:e.barcode,category:e.group,brand:e.brand,sale_price:e.price,buying_price:e.buying_price||0,stock:e.stock,vat_rate:e.vat_rate||18,image_url:e.image_url,company_code:r},{data:n,error:a}=await Pt.from("products").insert([t]).select().single();if(a)throw a;return{data:n}},update:async(e,r)=>{const t=yn(),n={name:r.name,barcode:r.barcode,category:r.group,brand:r.brand,sale_price:r.price,buying_price:r.buying_price,stock:r.stock,vat_rate:r.vat_rate,image_url:r.image_url},{data:a,error:i}=await Pt.from("products").update(n).eq("stock_code",e).eq("company_code",t).select();if(i)throw i;return{data:a}},delete:async e=>{const r=yn(),{error:t}=await Pt.from("products").delete().eq("stock_code",e).eq("company_code",r);if(t)throw t;return{data:{success:!0}}},updateStock:async(e,r)=>{const t={};r.stock!==void 0&&(t.stock=r.stock),r.buying_price!==void 0&&(t.buying_price=r.buying_price);const{data:n,error:a}=await Pt.from("products").update(t).eq("stock_code",e).select();if(a)throw a;return{data:n}},updateImage:async(e,r)=>{const t=r.get("product_image");if(!t)return{data:{success:!0}};const n=t.name.split(".").pop(),i=`${`${e}-${Date.now()}.${n}`}`,{error:u}=await Pt.storage.from("product-images").upload(i,t);if(u)throw u;const{data:f}=Pt.storage.from("product-images").getPublicUrl(i),{error:g}=await Pt.from("products").update({image_url:f.publicUrl}).eq("stock_code",e);if(g)throw g;return{data:{success:!0,image_url:f.publicUrl}}},repairStockCode:async e=>{const{data:r,error:t}=await Pt.from("products").select("*").eq("stock_code",e);if(t)throw t;if(r&&r.length>0){const{error:n}=await Pt.from("products").delete().eq("stock_code",e);if(n){const a=`${e}_DEL_${Math.floor(Date.now()/1e3)}`,{error:i}=await Pt.from("products").update({stock_code:a}).eq("stock_code",e);if(i)throw i;return{success:!0,message:`Kayt silinemedi (bal veriler var), ancak ${a} olarak yeniden adlandrld. Artk ${e} kullanlabilir.`}}return{success:!0,message:"Eski kayt baaryla veritabanndan silindi."}}else return{success:!1,message:"Bu stok koduna sahip kayt bulunamad."}}},Hn={getAll:async()=>{const e=yn();if(!e)return Er({success:!0,customers:[]});const{data:r,error:t}=await Pt.from("customers").select("*").eq("company_code",e).order("name");return Er({success:!0,customers:r||[]},t)},add:async e=>{const r=yn(),{id:t,...n}=e,{data:a,error:i}=await Pt.from("customers").insert([{...n,company_code:r}]).select().single();return Er({success:!0,message:"Mteri eklendi",id:a?.id},i)},update:async(e,r)=>{const t=yn(),{error:n}=await Pt.from("customers").update(r).eq("id",e).eq("company_code",t);return Er({success:!0,message:"Mteri gncellendi"},n)},delete:async e=>{const r=yn(),{error:t}=await Pt.from("customers").delete().eq("id",e).eq("company_code",r);return Er({success:!0,message:"Mteri silindi"},t)},getTransactions:async e=>{const{data:r,error:t}=await Pt.from("sales").select("*").eq("customer_id",e).order("created_at",{ascending:!0});if(t)return console.error("Sales fetch error:",t),Er(null,t);let n=[];try{const{data:i,error:u}=await Pt.from("customer_payments").select("*").eq("customer_id",e).order("created_at",{ascending:!0});u?console.warn("Payments fetch warning (table might not exist):",u.message):n=i||[]}catch(i){console.warn("Payments fetch exception:",i)}console.log("Fetched sales:",r?.length||0,"payments:",n.length);const a=[...(r||[]).map(i=>({...i,type:"sale"})),...n.map(i=>({...i,type:"payment",total:i.amount,paid_amount:i.amount,payment_method:i.payment_type?.toLowerCase()||"nakit"}))].sort((i,u)=>new Date(i.created_at)-new Date(u.created_at));return Er({success:!0,transactions:a},null)},addPayment:async e=>{const{data:r,error:t}=await Pt.from("customers").select("balance").eq("id",e.customer_id).single();if(t)throw t;const n=parseFloat(r?.balance)||0,a=parseFloat(e.amount)||0,i=n-a,{error:u}=await Pt.from("customer_payments").insert({customer_id:e.customer_id,amount:a,payment_type:e.payment_type||"Nakit",description:e.description||"deme",created_at:new Date().toISOString()});u&&console.error("Payment record error:",u);const{error:f}=await Pt.from("customers").update({balance:i,last_transaction_date:new Date().toISOString()}).eq("id",e.customer_id);if(f)throw f;return{data:{success:!0,message:"deme alnd ve bakiye gncellendi."}}},addPurchaseTransaction:async e=>{const{customer_id:r,amount:t,description:n}=e,{data:a,error:i}=await Pt.from("customers").select("balance").eq("id",r).single();if(i)throw i;const u=parseFloat(a?.balance)||0,f=parseFloat(t)||0,g=u-f,{error:m}=await Pt.from("customer_payments").insert({customer_id:r,amount:f,payment_type:"Fatura (Al)",description:n||"Gelen Fatura",created_at:new Date().toISOString()});m&&console.error("Transaction record error:",m);const{error:w}=await Pt.from("customers").update({balance:g,last_transaction_date:new Date().toISOString()}).eq("id",r);if(w)throw w;return{data:{success:!0,message:"Cari hesaba ilendi."}}},cancelPurchaseTransaction:async e=>{const{customer_id:r,amount:t,description:n}=e,{data:a,error:i}=await Pt.from("customers").select("balance").eq("id",r).single();if(i)throw i;const u=parseFloat(a?.balance)||0,f=parseFloat(t)||0,g=u+f,{error:m}=await Pt.from("customer_payments").insert({customer_id:r,amount:-f,payment_type:"Fatura ptali",description:n||"Fatura ptali",created_at:new Date().toISOString()});m&&console.error("Cancel transaction record error:",m);const{error:w}=await Pt.from("customers").update({balance:g,last_transaction_date:new Date().toISOString()}).eq("id",r);if(w)throw w;return{data:{success:!0,message:"Fatura iptali cariye ilendi."}}},deletePayment:async(e,r,t)=>{const{error:n}=await Pt.from("customer_payments").delete().eq("id",e);if(n)throw n;try{const{data:a,error:i}=await Pt.from("customers").select("balance").eq("id",r).single();if(i)throw i;const u=Math.abs(parseFloat(t)),f=(a.balance||0)+u,{error:g}=await Pt.from("customers").update({balance:f}).eq("id",r);if(g)throw g;return{data:{success:!0,message:"deme silindi ve bakiye gncellendi."}}}catch(a){return console.error("Balance rollback error:",a),{data:{success:!0,warning:"deme silindi fakat bakiye gncellenemedi."}}}}},fc={getAll:async e=>{const r=yn();if(!r)return Er({success:!0,sales:[]});let t=Pt.from("sales").select("*, customers(name)").eq("company_code",r);e?.start_date&&(t=t.gte("date",`${e.start_date}T00:00:00`)),e?.end_date&&(t=t.lte("date",`${e.end_date}T23:59:59`)),e?.sale_code&&(t=t.ilike("sale_code",`%${e.sale_code}%`)),e?.show_deleted||(t=t.eq("is_deleted",!1));const{data:n,error:a}=await t.order("date",{ascending:!1});let i=n?.map(u=>({...u,customerName:u.customers?.name,customer:u.customers?.name||u.customer_name||u.customer||"Misafir"}))||[];if(e?.customer_name){const u=e.customer_name.toLowerCase();i=i.filter(f=>f.customer?.toLowerCase().includes(u))}return Er({success:!0,sales:i},a)},complete:async e=>{let r=[];e.items?r=e.items:e.products&&(r=e.products.map(u=>({id:u.id,name:u.name,quantity:u.quantity,price:u.price,total:u.price*u.quantity})));const t=yn(),n={sale_code:e.sale_code||`S-${Date.now()}`,items:r,total:e.total,payment_method:e.payment_method,is_deleted:!1,date:new Date().toISOString(),customer_id:e.customer_id||e.customer&&e.customer.id||null,customer_name:e.customer_name||e.customer&&e.customer.name||(typeof e.customer=="string"?e.customer:"")||"Misafir",company_code:t},{data:a,error:i}=await Pt.from("sales").insert([n]).select().single();if(i)throw console.error("Sale insert error:",i),{response:{data:{message:i.message||"Sat kaydedilemedi"}}};if(n.customer_id&&(n.payment_method==="Nakit"||n.payment_method==="POS"||n.payment_method==="Kredi Kart"))try{await Hn.addPayment({customer_id:n.customer_id,amount:n.total,payment_type:n.payment_method==="POS"?"Kredi Kart":"Nakit",description:`Sat Tahsilat - ${n.sale_code}`}),console.log("Automated payment record created for sale:",n.sale_code)}catch(u){console.error("Automated payment creation failed:",u)}return Er({success:!0,message:"Sat tamamland",sale_code:a?.sale_code},i)},add:async e=>fc.complete(e),delete:async e=>{const{error:r}=await Pt.from("sales").update({is_deleted:!0}).eq("sale_code",e);return Er({success:!0,message:"Sat iptal edildi"},r)},getByCode:async e=>{const{data:r,error:t}=await Pt.from("sales").select("*").eq("sale_code",e).single();return Er(r,t)},update:async(e,r)=>{const t={};r.products&&(t.items=r.products),r.total!==void 0&&(t.total=r.total);const{error:n}=await Pt.from("sales").update(t).eq("sale_code",e);return Er({success:!0,message:"Sat gncellendi"},n)}},Mi={getAll:async()=>{const e=yn();if(!e)return Er({success:!0,users:[]});const{data:r,error:t}=await Pt.from("user_profiles").select("*").eq("company_code",e);return Er({success:!0,users:r||[]},t)},add:async e=>{let{data:r,error:t}=await Pt.auth.signUp({email:e.email,password:e.password,options:{data:{username:e.username,role:e.role||"user",permissions:e.permissions,access_schedule:e.access_schedule,company_code:yn()}}});if(t&&t.message&&t.message.includes("Database error")){console.warn("Metadata signUp failed, retrying without metadata...");const n=await Pt.auth.signUp({email:e.email,password:e.password});r=n.data,t=n.error}if(t)return Er(null,t);if(r.user&&r.user.identities&&r.user.identities.length===0)return Er(null,{message:"E-Mail daha nce kaydedilmitir."});if(r.user){const{error:n}=await Pt.from("user_profiles").upsert({id:r.user.id,username:e.username,role:e.role||"user",permissions:e.permissions,access_schedule:e.access_schedule,company_code:yn()});if(n)return console.error("Profile create error:",n),Er({success:!0,message:"Kullanc oluturuldu ancak profil detaylar kaydedilemedi: "+n.message},null)}return Er({success:!0,message:"Kullanc eklendi."},null)},delete:async e=>{const{error:r}=await Pt.from("user_profiles").delete().eq("id",e);return Er({success:!0,message:"Kullanc profili silindi"},r)},updatePermissions:async(e,r)=>{const{error:t}=await Pt.from("user_profiles").update({permissions:r}).eq("id",e);return Er({success:!0,message:"Yetkiler gncellendi"},t)},update:async(e,r)=>{const{error:t}=await Pt.from("user_profiles").update({username:r.username,role:r.role}).eq("id",e);return Er({success:!0,message:"Kullanc bilgileri gncellendi"},t)},updateSchedule:async(e,r)=>{const{error:t}=await Pt.from("user_profiles").update({access_schedule:r}).eq("id",e);return Er({success:!0,message:"Eriim takvimi gncellendi"},t)},forceLogout:async e=>Er({success:!0,message:"Kullanc oturumu kapatld (Token yenilenemedi - DB destei yok)"},null),updatePassword:async(e,r)=>({data:{success:!1,message:"Parola deitirme ilemi iin Ynetici Paneli gereklidir (Client-Side kstlamas)."}}),registerTenant:async e=>{const{data:r,error:t}=await Pt.auth.signUp({email:e.email,password:e.password,options:{emailRedirectTo:`${window.location.origin}/email-success`,data:{username:e.username,role:"kurucu",company_code:e.company_code}}});if(t)return Er(null,t);if(r.user&&r.user.identities&&r.user.identities.length===0)return Er(null,{message:"Bu e-posta adresi ile zaten kaytl bir kullanc var."});if(r.user){const{error:n}=await Pt.from("user_profiles").upsert({id:r.user.id,username:e.username,role:"kurucu",company_code:e.company_code,permissions:{can_view_products:!0,can_view_customers:!0,can_view_sales:!0,can_view_invoices:!0,can_view_pos:!0,can_view_users:!0,can_view_balances:!0,can_view_prices:!0}});if(n)return console.error("Tenant profile error:",n),Er({success:!0,message:"Kayt oldu ancak profil hatas: "+n.message},null);try{const a=crypto.randomUUID(),{error:i}=await Pt.from("app_settings").insert({key:"secret_token",value:a,company_code:e.company_code});i&&console.error("Secret token generation error:",i)}catch(a){console.error("Secret token generation exception:",a)}}return Er({success:!0,message:"irket kayd baaryla oluturuldu."},null)}},Th={getAll:async()=>{const e=yn();if(!e)return Er({success:!0,held_sales:[]});const{data:r,error:t}=await Pt.from("held_sales").select("*").eq("company_code",e).order("created_at",{ascending:!1});return Er({success:!0,held_sales:r||[]},t)},add:async e=>{const r=yn(),t={customer_name:e.customer||"Toptan Sat",items:e.items,company_code:r},{data:n,error:a}=await Pt.from("held_sales").insert([t]).select();if(a)throw console.error("Held sale error:",a),{response:{data:{message:a.message||"Beklemeye alma hatas"}}};return{data:{success:!0,message:"Sat beklemeye alnd",held_sale:n?.[0]}}},delete:async e=>{const{error:r}=await Pt.from("held_sales").delete().eq("id",e);return Er({success:!0,message:"Silindi"},r)}},xo={getAll:async()=>{const e=yn();if(!e)return Er({success:!0,shortcuts:[]});const{data:r,error:t}=await Pt.from("shortcuts").select("*").eq("company_code",e);return Er({success:!0,shortcuts:r||[]},t)},addCategory:async e=>{const r=yn(),{error:t}=await Pt.from("shortcuts").insert([{name:e,items:[],company_code:r}]);return Er({success:!0,message:"Kategori eklendi"},t)},updateCategory:async(e,r)=>{const t=yn(),{error:n}=await Pt.from("shortcuts").update(r).eq("name",e).eq("company_code",t);return Er({success:!0,message:"Gncellendi"},n)},deleteCategory:async e=>{const r=yn(),{error:t}=await Pt.from("shortcuts").delete().eq("name",e).eq("company_code",r);return Er({success:!0,message:"Silindi"},t)}},gi={getAll:async()=>{const e=yn();if(!e)return Er({success:!0,invoices:[]});const{data:r,error:t}=await Pt.from("invoices").select("*").eq("company_code",e).order("date",{ascending:!1});return Er({success:!0,invoices:r||[]},t)},syncBatch:async e=>{const r=yn();if(!r)throw new Error("irket kodu bulunamad.");const t=e.map(i=>({...i,company_code:r})),{data:n,error:a}=await Pt.from("invoices").upsert(t,{onConflict:"uuid"}).select();return Er({success:!0,message:`${e.length} fatura senkronize edildi.`,data:n},a)},updateStatus:async(e,r)=>{const t=yn(),{error:n}=await Pt.from("invoices").update({status:r}).eq("id",e).eq("company_code",t);return Er({success:!0,message:"Durum gncellendi"},n)}},oa={get:async e=>{const r=yn();if(!r)return{data:null};const{data:t,error:n}=await Pt.from("app_settings").select("value").eq("key",e).eq("company_code",r).single();return n&&n.code!=="PGRST116"&&console.error(`Error fetching setting ${e}:`,n),{data:t?.value||null}},set:async(e,r)=>{const t=yn();if(!t)throw new Error("irket kodu bulunamad.");const{error:n}=await Pt.from("app_settings").upsert({key:e,value:r,company_code:t},{onConflict:"company_code, key"});if(n)throw n;return{data:{success:!0}}},getAll:async()=>{const e=yn();if(!e)return{data:{}};const{data:r,error:t}=await Pt.from("app_settings").select("key, value").eq("company_code",e);if(t)throw t;const n={};return r.forEach(a=>{n[a.key]=a.value}),{data:n}}},j3=Q.createContext(null),Vi=()=>{const e=Q.useContext(j3);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},MC=({children:e})=>{const[r,t]=Q.useState(null),[n,a]=Q.useState(!0);Q.useEffect(()=>{const m=async()=>{const _=localStorage.getItem("user");let E=null;if(_)try{E=JSON.parse(_),E.id==="mock-admin-id"?(E=null,localStorage.removeItem("user")):t(E)}catch(k){console.error("Parse error",k),localStorage.removeItem("user")}if(E&&E.id)try{const{data:{session:k},error:N}=await Pt.auth.getSession();if(!(N||!k)){const{data:A,error:C}=await Pt.from("user_profiles").select("*").eq("id",E.id).single();if(A){const I={...E,...A};JSON.stringify(I)!==JSON.stringify(E)&&(console.log("Profile refreshed from DB",I),t(I),localStorage.setItem("user",JSON.stringify(I))),await w()}}}catch(k){console.error("Profile revalidation failed",k)}a(!1)},w=async()=>{try{const _=await oa.get("birfatura_api_key"),E=await oa.get("birfatura_secret_key"),k=await oa.get("birfatura_integration_key");(_.data||E.data||k.data)&&(localStorage.setItem("birfatura_config",JSON.stringify({api_key:_.data||"",secret_key:E.data||"",integration_key:k.data||""})),console.log("BirFatura settings loaded from database"))}catch(_){console.error("Failed to load company settings:",_)}};m()},[]),Q.useEffect(()=>{},[r]);const g={user:r,loading:n,login:async m=>{t(m),localStorage.setItem("user",JSON.stringify(m))},logout:async()=>{try{await T3.logout()}catch{}t(null),localStorage.removeItem("user"),localStorage.removeItem("auth_token"),localStorage.removeItem("birfatura_config"),window.location.pathname!=="/login"&&(window.location.href="/login")},hasPermission:m=>r?r.role==="kurucu"?!0:r.permissions&&r.permissions[m]===!0:!1,isAuthenticated:!!r,isKurucu:r?.role==="kurucu"||r?.username==="admin"};return o.jsx(j3.Provider,{value:g,children:!n&&e})};function Es({children:e,permission:r}){const{isAuthenticated:t,loading:n,hasPermission:a,logout:i}=Vi(),u=Hi();return n?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):t?r&&!a(r)?o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-center p-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Yetkisiz Eriim"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Bu sayfay grntlemek iin yeterli yetkiniz bulunmamaktadr."}),o.jsxs("div",{className:"text-sm text-gray-400 mb-6",children:["Gerekli Yetki: ",r]}),o.jsx("button",{onClick:i,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors shadow-lg",children:"k Yap"})]}):e:o.jsx(l3,{to:"/login",replace:!0,state:{from:u}})}function FC({onClose:e,onSave:r}){const t={miktar_duzenle:"F2",iskonto_ekle:"F3",fiyat_duzenle:"F4",nakit_odeme:"F8",pos_odeme:"F9",musteri_sec:"F10",search_focus:"F1"},[n,a]=Q.useState(t),[i,u]=Q.useState(null),f=["None","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Insert","Delete","Home","End","PageUp","PageDown"];Q.useEffect(()=>{const _=localStorage.getItem("pos_keyboard_shortcuts");if(_)try{a({...t,...JSON.parse(_)})}catch(E){console.error("Error parsing shortcuts",E)}},[]);const g=(_,E)=>{a(k=>({...k,[_]:E})),u(null)},m=()=>{localStorage.setItem("pos_keyboard_shortcuts",JSON.stringify(n)),r&&r(n),e()},w=[{id:"search_focus",label:"rn Arama",icon:""},{id:"miktar_duzenle",label:"Miktar Dzenle",icon:""},{id:"iskonto_ekle",label:"skonto Ekle",icon:""},{id:"fiyat_duzenle",label:"Fiyat Dzenle",icon:""},{id:"musteri_sec",label:"Mteri Se",icon:""},{id:"nakit_odeme",label:"Nakit deme",icon:""},{id:"pos_odeme",label:"Kredi Kart",icon:""}];return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-[60] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200 flex flex-col max-h-[90vh]",children:[o.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-indigo-600 p-6 flex justify-between items-center shrink-0",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-white tracking-tight",children:"Klavye Ksayollar"}),o.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:"Hzl sat ilemleri iin tular zelletirin"})]}),o.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/20 hover:bg-white/30 flex items-center justify-center text-white transition-all shadow-lg shadow-black/10",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-2 bg-gray-50/50",children:o.jsx("div",{className:"grid gap-2 p-2",children:w.map(_=>o.jsxs("div",{className:`
                                    group flex items-center justify-between p-4 border transition-all duration-200
                                    ${i===_.id?"bg-white border-violet-500 shadow-lg shadow-violet-100 ring-2 ring-violet-100 transform scale-[1.02] z-10":"bg-white border-gray-100 hover:border-gray-300 hover:shadow-md"}
                                `,children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`
                                        w-12 h-12 flex items-center justify-center text-2xl shadow-sm transition-colors
                                        ${i===_.id?"bg-violet-100":"bg-gray-100 group-hover:bg-gray-200"}
                                    `,children:_.icon}),o.jsx("span",{className:"font-bold text-gray-700 text-lg",children:_.label})]}),o.jsxs("div",{className:"relative",children:[o.jsx("select",{value:n[_.id]||"None",onChange:E=>g(_.id,E.target.value),onFocus:()=>u(_.id),onBlur:()=>u(null),className:`
                                            appearance-none cursor-pointer w-28 py-2.5 pl-4 pr-8 text-center font-mono font-bold text-lg border-2 outline-none transition-all
                                            ${i===_.id?"bg-violet-50 border-violet-500 text-violet-700 shadow-inner":"bg-gray-50 border-gray-200 text-gray-600 hover:border-gray-300"}
                                        `,children:f.map(E=>o.jsx("option",{value:E,children:E},E))}),o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]},_.id))})}),o.jsxs("div",{className:"p-6 bg-white border-t border-gray-100 shrink-0",children:[o.jsxs("button",{onClick:m,className:"w-full py-4 bg-gradient-to-r from-violet-600 to-indigo-600 hover:from-violet-700 hover:to-indigo-700 text-white font-bold text-lg shadow-lg shadow-indigo-500/30 transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[o.jsx("span",{children:"Deiiklikleri Kaydet"}),o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]}),o.jsx("button",{onClick:e,className:"w-full mt-3 py-3 text-gray-500 font-semibold hover:text-gray-700 transition-colors text-sm",children:"Vazge"})]})]})})}const LC=[{path:"/",label:"Sat Ekran",icon:"",permission:"can_view_pos"},{path:"/products",label:"rn Listesi",icon:"",permission:"can_view_products"},{path:"/customers",label:"Bakiyeler Listesi",icon:"",permission:"can_view_customers"},{path:"/sales",label:"Sat Gemii",icon:"",permission:"can_view_sales"},{path:"/invoices",label:"Gelen Faturalar(Entegrasyonlu)",icon:"",permission:"can_view_invoices"},{path:"/settings",label:"Ayarlar",icon:"",permission:"can_view_users"},{path:"/users",label:"Kullanclar",icon:"",permission:"can_view_users"}];function lo({children:e}){const{user:r,logout:t,hasPermission:n}=Vi(),a=Hi(),[i,u]=Q.useState(!1),f=LC.filter(g=>n(g.permission));return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:o.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-6",children:o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/20",children:o.jsx("span",{className:"text-white text-xl",children:""})}),o.jsx("span",{className:"font-bold text-xl text-gray-800 tracking-tight hidden sm:block",children:"KasaPos"})]}),o.jsx("nav",{className:"hidden md:flex items-center justify-center flex-1 gap-6",children:f.map(g=>o.jsxs("div",{className:"flex items-center gap-6",children:[g.path==="/settings"&&o.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-200 text-sm font-medium text-gray-500 hover:bg-gray-50 hover:text-gray-900",title:"Klavye Ksayollar",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{children:"Ksayollar"})]}),o.jsxs(hr,{to:g.path,className:`flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-200 text-sm font-medium
                                            ${a.pathname===g.path?"bg-blue-50 text-blue-700 shadow-sm border border-blue-100/50":"text-gray-500 hover:bg-gray-50 hover:text-gray-900"}`,children:[o.jsx("span",{className:"text-lg",children:g.icon}),o.jsx("span",{children:g.label})]})]},g.path))}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("span",{className:"text-sm text-gray-600 hidden sm:block",children:[o.jsx("span",{className:"font-semibold text-gray-800",children:r?.username}),o.jsx("span",{className:"ml-2 px-2.5 py-0.5 bg-blue-100 text-blue-700 rounded-lg text-xs font-medium",children:r?.role==="kurucu"?"Kurucu":"alan"})]}),r?.company_code&&o.jsxs("div",{className:"hidden md:flex flex-col items-end mr-2",children:[o.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider font-bold",children:"irket Kodu"}),o.jsx("span",{className:"font-mono font-bold text-gray-700 bg-gray-100 px-2 py-0.5 rounded border border-gray-200",children:r.company_code})]}),o.jsx("div",{className:"h-8 w-px bg-gray-200 hidden sm:block mx-1"}),o.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-3 py-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all group",title:"k Yap",children:[o.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:-translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),o.jsx("span",{className:"hidden lg:inline text-sm font-medium",children:"k"})]})]})]})})}),o.jsx("main",{className:"flex-1 pb-20 md:pb-6 pt-4 px-4 sm:px-6 lg:px-8 max-w-[1920px] mx-auto w-full",children:e}),i&&o.jsx(FC,{onClose:()=>u(!1),onSave:g=>{window.dispatchEvent(new CustomEvent("shortcuts-updated",{detail:g}))}}),o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 md:hidden z-50 pb-safe",children:o.jsx("div",{className:"grid grid-cols-5 gap-1 px-2 py-2",children:f.slice(0,5).map(g=>o.jsxs(hr,{to:g.path,className:`flex flex-col items-center justify-center py-2 rounded-xl transition-colors ${a.pathname===g.path?"bg-blue-50 text-blue-600":"text-gray-500 hover:bg-gray-50"}`,children:[o.jsx("span",{className:"text-lg",children:g.icon}),o.jsx("span",{className:"text-[10px] mt-0.5 font-medium",children:g.label})]},g.path))})})]})}function BC(){const[e,r]=Q.useState({email:"",password:""}),[t,n]=Q.useState(!1),[a,i]=Q.useState(""),u=G0(),{login:f}=Vi(),g=async m=>{m.preventDefault(),i(""),n(!0);try{const w=await T3.login(e.email,e.password);w.status===200&&(f(w.data.user),u("/"))}catch(w){const _=w.response?.data?.message||w.response?.data?.error||w.message||"Giri baarsz. Bilgilerinizi kontrol edin.";i(_)}finally{n(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 via-indigo-700 to-purple-800 p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/10 backdrop-blur-lg rounded-2xl mb-4",children:o.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),o.jsx("h1",{className:"text-3xl font-bold text-white",children:"KasaPos"}),o.jsx("p",{className:"text-white/70 mt-2",children:"Kurumsal Giri"})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl p-8 shadow-2xl border border-white/20",children:[o.jsx("h2",{className:"text-xl font-semibold text-white mb-6 text-center",children:"Giri Yap"}),a&&o.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-400/30 rounded-xl text-red-200 text-sm text-center",children:a}),o.jsxs("form",{onSubmit:g,className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"E-posta"}),o.jsx("input",{type:"email",value:e.email,onChange:m=>r({...e,email:m.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all",placeholder:"isim@sirket.com",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"ifre"}),o.jsx("input",{type:"password",value:e.password,onChange:m=>r({...e,password:m.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all",placeholder:"",required:!0})]}),o.jsx("button",{type:"submit",disabled:t,className:"w-full py-3 px-4 bg-white text-indigo-700 font-semibold rounded-xl hover:bg-white/90 focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:t?o.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):"Giri Yap"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-white/60 text-sm",children:["Hesabnz yok mu?"," ",o.jsx(hr,{to:"/register",className:"text-white hover:text-blue-200 underline",children:"irket Kayd Olutur"})]})})]}),o.jsx("p",{className:"text-center text-white/50 text-sm mt-6",children:" 2026 KasaPos - Tm haklar sakldr."})]})})}function PC(){const[e,r]=Q.useState({username:"",email:"",password:"",confirmPassword:""}),[t,n]=Q.useState(!1),[a,i]=Q.useState(""),u=G0(),f=async g=>{if(g.preventDefault(),i(""),n(!0),e.password!==e.confirmPassword){i("ifreler elemiyor."),n(!1);return}try{const m=Math.floor(1e6+Math.random()*9e6).toString();(await Mi.registerTenant({username:e.username,email:e.email,password:e.password,company_code:m})).data?.success&&u("/login")}catch(m){i(m.response?.data?.message||m.message||"Kayt srasnda bir hata olutu.")}finally{n(!1)}};return o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden",children:[o.jsxs("div",{className:"p-8 bg-blue-600 text-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"KasaPOS"}),o.jsx("p",{className:"text-blue-100",children:"Yeni irket Kayd"})]}),o.jsxs("div",{className:"p-8",children:[a&&o.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm mb-6 border border-red-100",children:a}),o.jsxs("form",{onSubmit:f,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad Soyad / Firma Ad"}),o.jsx("input",{type:"text",required:!0,value:e.username,onChange:g=>r({...e,username:g.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"rn: Ahmet Ylmaz"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta Adresi"}),o.jsx("input",{type:"email",required:!0,value:e.email,onChange:g=>r({...e,email:g.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"ornek@sirket.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ifre"}),o.jsx("input",{type:"password",required:!0,minLength:6,value:e.password,onChange:g=>r({...e,password:g.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"******"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ifre Tekrar"}),o.jsx("input",{type:"password",required:!0,minLength:6,value:e.confirmPassword,onChange:g=>r({...e,confirmPassword:g.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"******"})]}),o.jsx("button",{type:"submit",disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-xl transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Kayt Yaplyor...":"Kayt Ol ve irket Kodu Olutur"})]}),o.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Zaten hesabnz var m?"," ",o.jsx(hr,{to:"/login",className:"text-blue-600 font-semibold hover:text-blue-700",children:"Giri Yap"})]})]})]})})}function UC(){const e=G0();return Q.useEffect(()=>{const r=setTimeout(()=>{e("/login")},5e3);return()=>clearTimeout(r)},[e]),o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden text-center p-8",children:[o.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Tebrikler!"}),o.jsx("p",{className:"text-gray-600 mb-8",children:"E-posta adresiniz baaryla doruland. Hesabnz artk aktif."}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("button",{onClick:()=>e("/login"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-xl transition-all shadow-md hover:shadow-lg",children:"Giri Yap"}),o.jsx("p",{className:"text-sm text-gray-500",children:"5 saniye iinde otomatik olarak ynlendirileceksiniz..."})]})]})})}function R3(e,r){return function(){return e.apply(r,arguments)}}const{toString:zC}=Object.prototype,{getPrototypeOf:Mp}=Object,{iterator:j1,toStringTag:O3}=Symbol,R1=(e=>r=>{const t=zC.call(r);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),_i=e=>(e=e.toLowerCase(),r=>R1(r)===e),O1=e=>r=>typeof r===e,{isArray:W0}=Array,M0=O1("undefined");function Xd(e){return e!==null&&!M0(e)&&e.constructor!==null&&!M0(e.constructor)&&os(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const I3=_i("ArrayBuffer");function HC(e){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(e):r=e&&e.buffer&&I3(e.buffer),r}const VC=O1("string"),os=O1("function"),D3=O1("number"),Kd=e=>e!==null&&typeof e=="object",GC=e=>e===!0||e===!1,$h=e=>{if(R1(e)!=="object")return!1;const r=Mp(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(O3 in e)&&!(j1 in e)},WC=e=>{if(!Kd(e)||Xd(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},XC=_i("Date"),KC=_i("File"),qC=_i("Blob"),YC=_i("FileList"),$C=e=>Kd(e)&&os(e.pipe),ZC=e=>{let r;return e&&(typeof FormData=="function"&&e instanceof FormData||os(e.append)&&((r=R1(e))==="formdata"||r==="object"&&os(e.toString)&&e.toString()==="[object FormData]"))},JC=_i("URLSearchParams"),[QC,eT,tT,rT]=["ReadableStream","Request","Response","Headers"].map(_i),nT=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function qd(e,r,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),W0(e))for(n=0,a=e.length;n<a;n++)r.call(null,e[n],n,e);else{if(Xd(e))return;const i=t?Object.getOwnPropertyNames(e):Object.keys(e),u=i.length;let f;for(n=0;n<u;n++)f=i[n],r.call(null,e[f],f,e)}}function M3(e,r){if(Xd(e))return null;r=r.toLowerCase();const t=Object.keys(e);let n=t.length,a;for(;n-- >0;)if(a=t[n],r===a.toLowerCase())return a;return null}const rc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,F3=e=>!M0(e)&&e!==rc;function Yg(){const{caseless:e,skipUndefined:r}=F3(this)&&this||{},t={},n=(a,i)=>{const u=e&&M3(t,i)||i;$h(t[u])&&$h(a)?t[u]=Yg(t[u],a):$h(a)?t[u]=Yg({},a):W0(a)?t[u]=a.slice():(!r||!M0(a))&&(t[u]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&qd(arguments[a],n);return t}const aT=(e,r,t,{allOwnKeys:n}={})=>(qd(r,(a,i)=>{t&&os(a)?e[i]=R3(a,t):e[i]=a},{allOwnKeys:n}),e),sT=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),iT=(e,r,t,n)=>{e.prototype=Object.create(r.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:r.prototype}),t&&Object.assign(e.prototype,t)},lT=(e,r,t,n)=>{let a,i,u;const f={};if(r=r||{},e==null)return r;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)u=a[i],(!n||n(u,e,r))&&!f[u]&&(r[u]=e[u],f[u]=!0);e=t!==!1&&Mp(e)}while(e&&(!t||t(e,r))&&e!==Object.prototype);return r},oT=(e,r,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=r.length;const n=e.indexOf(r,t);return n!==-1&&n===t},cT=e=>{if(!e)return null;if(W0(e))return e;let r=e.length;if(!D3(r))return null;const t=new Array(r);for(;r-- >0;)t[r]=e[r];return t},uT=(e=>r=>e&&r instanceof e)(typeof Uint8Array<"u"&&Mp(Uint8Array)),dT=(e,r)=>{const n=(e&&e[j1]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;r.call(e,i[0],i[1])}},fT=(e,r)=>{let t;const n=[];for(;(t=e.exec(r))!==null;)n.push(t);return n},hT=_i("HTMLFormElement"),xT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,a){return n.toUpperCase()+a}),yy=(({hasOwnProperty:e})=>(r,t)=>e.call(r,t))(Object.prototype),mT=_i("RegExp"),L3=(e,r)=>{const t=Object.getOwnPropertyDescriptors(e),n={};qd(t,(a,i)=>{let u;(u=r(a,i,e))!==!1&&(n[i]=u||a)}),Object.defineProperties(e,n)},gT=e=>{L3(e,(r,t)=>{if(os(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=e[t];if(os(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},pT=(e,r)=>{const t={},n=a=>{a.forEach(i=>{t[i]=!0})};return W0(e)?n(e):n(String(e).split(r)),t},bT=()=>{},wT=(e,r)=>e!=null&&Number.isFinite(e=+e)?e:r;function vT(e){return!!(e&&os(e.append)&&e[O3]==="FormData"&&e[j1])}const yT=e=>{const r=new Array(10),t=(n,a)=>{if(Kd(n)){if(r.indexOf(n)>=0)return;if(Xd(n))return n;if(!("toJSON"in n)){r[a]=n;const i=W0(n)?[]:{};return qd(n,(u,f)=>{const g=t(u,a+1);!M0(g)&&(i[f]=g)}),r[a]=void 0,i}}return n};return t(e,0)},_T=_i("AsyncFunction"),kT=e=>e&&(Kd(e)||os(e))&&os(e.then)&&os(e.catch),B3=((e,r)=>e?setImmediate:r?((t,n)=>(rc.addEventListener("message",({source:a,data:i})=>{a===rc&&i===t&&n.length&&n.shift()()},!1),a=>{n.push(a),rc.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",os(rc.postMessage)),ET=typeof queueMicrotask<"u"?queueMicrotask.bind(rc):typeof process<"u"&&process.nextTick||B3,ST=e=>e!=null&&os(e[j1]),st={isArray:W0,isArrayBuffer:I3,isBuffer:Xd,isFormData:ZC,isArrayBufferView:HC,isString:VC,isNumber:D3,isBoolean:GC,isObject:Kd,isPlainObject:$h,isEmptyObject:WC,isReadableStream:QC,isRequest:eT,isResponse:tT,isHeaders:rT,isUndefined:M0,isDate:XC,isFile:KC,isBlob:qC,isRegExp:mT,isFunction:os,isStream:$C,isURLSearchParams:JC,isTypedArray:uT,isFileList:YC,forEach:qd,merge:Yg,extend:aT,trim:nT,stripBOM:sT,inherits:iT,toFlatObject:lT,kindOf:R1,kindOfTest:_i,endsWith:oT,toArray:cT,forEachEntry:dT,matchAll:fT,isHTMLForm:hT,hasOwnProperty:yy,hasOwnProp:yy,reduceDescriptors:L3,freezeMethods:gT,toObjectSet:pT,toCamelCase:xT,noop:bT,toFiniteNumber:wT,findKey:M3,global:rc,isContextDefined:F3,isSpecCompliantForm:vT,toJSONObject:yT,isAsyncFn:_T,isThenable:kT,setImmediate:B3,asap:ET,isIterable:ST};function mr(e,r,t,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",r&&(this.code=r),t&&(this.config=t),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}st.inherits(mr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:st.toJSONObject(this.config),code:this.code,status:this.status}}});const P3=mr.prototype,U3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{U3[e]={value:e}});Object.defineProperties(mr,U3);Object.defineProperty(P3,"isAxiosError",{value:!0});mr.from=(e,r,t,n,a,i)=>{const u=Object.create(P3);st.toFlatObject(e,u,function(w){return w!==Error.prototype},m=>m!=="isAxiosError");const f=e&&e.message?e.message:"Error",g=r==null&&e?e.code:r;return mr.call(u,f,g,t,n,a),e&&u.cause==null&&Object.defineProperty(u,"cause",{value:e,configurable:!0}),u.name=e&&e.name||"Error",i&&Object.assign(u,i),u};const AT=null;function $g(e){return st.isPlainObject(e)||st.isArray(e)}function z3(e){return st.endsWith(e,"[]")?e.slice(0,-2):e}function _y(e,r,t){return e?e.concat(r).map(function(a,i){return a=z3(a),!t&&i?"["+a+"]":a}).join(t?".":""):r}function NT(e){return st.isArray(e)&&!e.some($g)}const CT=st.toFlatObject(st,{},null,function(r){return/^is[A-Z]/.test(r)});function I1(e,r,t){if(!st.isObject(e))throw new TypeError("target must be an object");r=r||new FormData,t=st.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,C){return!st.isUndefined(C[A])});const n=t.metaTokens,a=t.visitor||w,i=t.dots,u=t.indexes,g=(t.Blob||typeof Blob<"u"&&Blob)&&st.isSpecCompliantForm(r);if(!st.isFunction(a))throw new TypeError("visitor must be a function");function m(N){if(N===null)return"";if(st.isDate(N))return N.toISOString();if(st.isBoolean(N))return N.toString();if(!g&&st.isBlob(N))throw new mr("Blob is not supported. Use a Buffer instead.");return st.isArrayBuffer(N)||st.isTypedArray(N)?g&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function w(N,A,C){let I=N;if(N&&!C&&typeof N=="object"){if(st.endsWith(A,"{}"))A=n?A:A.slice(0,-2),N=JSON.stringify(N);else if(st.isArray(N)&&NT(N)||(st.isFileList(N)||st.endsWith(A,"[]"))&&(I=st.toArray(N)))return A=z3(A),I.forEach(function(O,B){!(st.isUndefined(O)||O===null)&&r.append(u===!0?_y([A],B,i):u===null?A:A+"[]",m(O))}),!1}return $g(N)?!0:(r.append(_y(C,A,i),m(N)),!1)}const _=[],E=Object.assign(CT,{defaultVisitor:w,convertValue:m,isVisitable:$g});function k(N,A){if(!st.isUndefined(N)){if(_.indexOf(N)!==-1)throw Error("Circular reference detected in "+A.join("."));_.push(N),st.forEach(N,function(I,D){(!(st.isUndefined(I)||I===null)&&a.call(r,I,st.isString(D)?D.trim():D,A,E))===!0&&k(I,A?A.concat(D):[D])}),_.pop()}}if(!st.isObject(e))throw new TypeError("data must be an object");return k(e),r}function ky(e){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function Fp(e,r){this._pairs=[],e&&I1(e,this,r)}const H3=Fp.prototype;H3.append=function(r,t){this._pairs.push([r,t])};H3.toString=function(r){const t=r?function(n){return r.call(this,n,ky)}:ky;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function TT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function V3(e,r,t){if(!r)return e;const n=t&&t.encode||TT;st.isFunction(t)&&(t={serialize:t});const a=t&&t.serialize;let i;if(a?i=a(r,t):i=st.isURLSearchParams(r)?r.toString():new Fp(r,t).toString(n),i){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Ey{constructor(){this.handlers=[]}use(r,t,n){return this.handlers.push({fulfilled:r,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){st.forEach(this.handlers,function(n){n!==null&&r(n)})}}const G3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jT=typeof URLSearchParams<"u"?URLSearchParams:Fp,RT=typeof FormData<"u"?FormData:null,OT=typeof Blob<"u"?Blob:null,IT={isBrowser:!0,classes:{URLSearchParams:jT,FormData:RT,Blob:OT},protocols:["http","https","file","blob","url","data"]},Lp=typeof window<"u"&&typeof document<"u",Zg=typeof navigator=="object"&&navigator||void 0,DT=Lp&&(!Zg||["ReactNative","NativeScript","NS"].indexOf(Zg.product)<0),MT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",FT=Lp&&window.location.href||"http://localhost",LT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Lp,hasStandardBrowserEnv:DT,hasStandardBrowserWebWorkerEnv:MT,navigator:Zg,origin:FT},Symbol.toStringTag,{value:"Module"})),Ba={...LT,...IT};function BT(e,r){return I1(e,new Ba.classes.URLSearchParams,{visitor:function(t,n,a,i){return Ba.isNode&&st.isBuffer(t)?(this.append(n,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...r})}function PT(e){return st.matchAll(/\w+|\[(\w*)]/g,e).map(r=>r[0]==="[]"?"":r[1]||r[0])}function UT(e){const r={},t=Object.keys(e);let n;const a=t.length;let i;for(n=0;n<a;n++)i=t[n],r[i]=e[i];return r}function W3(e){function r(t,n,a,i){let u=t[i++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),g=i>=t.length;return u=!u&&st.isArray(a)?a.length:u,g?(st.hasOwnProp(a,u)?a[u]=[a[u],n]:a[u]=n,!f):((!a[u]||!st.isObject(a[u]))&&(a[u]=[]),r(t,n,a[u],i)&&st.isArray(a[u])&&(a[u]=UT(a[u])),!f)}if(st.isFormData(e)&&st.isFunction(e.entries)){const t={};return st.forEachEntry(e,(n,a)=>{r(PT(n),a,t,0)}),t}return null}function zT(e,r,t){if(st.isString(e))try{return(r||JSON.parse)(e),st.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(e)}const Yd={transitional:G3,adapter:["xhr","http","fetch"],transformRequest:[function(r,t){const n=t.getContentType()||"",a=n.indexOf("application/json")>-1,i=st.isObject(r);if(i&&st.isHTMLForm(r)&&(r=new FormData(r)),st.isFormData(r))return a?JSON.stringify(W3(r)):r;if(st.isArrayBuffer(r)||st.isBuffer(r)||st.isStream(r)||st.isFile(r)||st.isBlob(r)||st.isReadableStream(r))return r;if(st.isArrayBufferView(r))return r.buffer;if(st.isURLSearchParams(r))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let f;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return BT(r,this.formSerializer).toString();if((f=st.isFileList(r))||n.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return I1(f?{"files[]":r}:r,g&&new g,this.formSerializer)}}return i||a?(t.setContentType("application/json",!1),zT(r)):r}],transformResponse:[function(r){const t=this.transitional||Yd.transitional,n=t&&t.forcedJSONParsing,a=this.responseType==="json";if(st.isResponse(r)||st.isReadableStream(r))return r;if(r&&st.isString(r)&&(n&&!this.responseType||a)){const u=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(r,this.parseReviver)}catch(f){if(u)throw f.name==="SyntaxError"?mr.from(f,mr.ERR_BAD_RESPONSE,this,null,this.response):f}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ba.classes.FormData,Blob:Ba.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};st.forEach(["delete","get","head","post","put","patch"],e=>{Yd.headers[e]={}});const HT=st.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VT=e=>{const r={};let t,n,a;return e&&e.split(`
`).forEach(function(u){a=u.indexOf(":"),t=u.substring(0,a).trim().toLowerCase(),n=u.substring(a+1).trim(),!(!t||r[t]&&HT[t])&&(t==="set-cookie"?r[t]?r[t].push(n):r[t]=[n]:r[t]=r[t]?r[t]+", "+n:n)}),r},Sy=Symbol("internals");function Wu(e){return e&&String(e).trim().toLowerCase()}function Zh(e){return e===!1||e==null?e:st.isArray(e)?e.map(Zh):String(e)}function GT(e){const r=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(e);)r[n[1]]=n[2];return r}const WT=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ng(e,r,t,n,a){if(st.isFunction(n))return n.call(this,r,t);if(a&&(r=t),!!st.isString(r)){if(st.isString(n))return r.indexOf(n)!==-1;if(st.isRegExp(n))return n.test(r)}}function XT(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,t,n)=>t.toUpperCase()+n)}function KT(e,r){const t=st.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+t,{value:function(a,i,u){return this[n].call(this,r,a,i,u)},configurable:!0})})}let cs=class{constructor(r){r&&this.set(r)}set(r,t,n){const a=this;function i(f,g,m){const w=Wu(g);if(!w)throw new Error("header name must be a non-empty string");const _=st.findKey(a,w);(!_||a[_]===void 0||m===!0||m===void 0&&a[_]!==!1)&&(a[_||g]=Zh(f))}const u=(f,g)=>st.forEach(f,(m,w)=>i(m,w,g));if(st.isPlainObject(r)||r instanceof this.constructor)u(r,t);else if(st.isString(r)&&(r=r.trim())&&!WT(r))u(VT(r),t);else if(st.isObject(r)&&st.isIterable(r)){let f={},g,m;for(const w of r){if(!st.isArray(w))throw TypeError("Object iterator must return a key-value pair");f[m=w[0]]=(g=f[m])?st.isArray(g)?[...g,w[1]]:[g,w[1]]:w[1]}u(f,t)}else r!=null&&i(t,r,n);return this}get(r,t){if(r=Wu(r),r){const n=st.findKey(this,r);if(n){const a=this[n];if(!t)return a;if(t===!0)return GT(a);if(st.isFunction(t))return t.call(this,a,n);if(st.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,t){if(r=Wu(r),r){const n=st.findKey(this,r);return!!(n&&this[n]!==void 0&&(!t||ng(this,this[n],n,t)))}return!1}delete(r,t){const n=this;let a=!1;function i(u){if(u=Wu(u),u){const f=st.findKey(n,u);f&&(!t||ng(n,n[f],f,t))&&(delete n[f],a=!0)}}return st.isArray(r)?r.forEach(i):i(r),a}clear(r){const t=Object.keys(this);let n=t.length,a=!1;for(;n--;){const i=t[n];(!r||ng(this,this[i],i,r,!0))&&(delete this[i],a=!0)}return a}normalize(r){const t=this,n={};return st.forEach(this,(a,i)=>{const u=st.findKey(n,i);if(u){t[u]=Zh(a),delete t[i];return}const f=r?XT(i):String(i).trim();f!==i&&delete t[i],t[f]=Zh(a),n[f]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const t=Object.create(null);return st.forEach(this,(n,a)=>{n!=null&&n!==!1&&(t[a]=r&&st.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,t])=>r+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...t){const n=new this(r);return t.forEach(a=>n.set(a)),n}static accessor(r){const n=(this[Sy]=this[Sy]={accessors:{}}).accessors,a=this.prototype;function i(u){const f=Wu(u);n[f]||(KT(a,u),n[f]=!0)}return st.isArray(r)?r.forEach(i):i(r),this}};cs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);st.reduceDescriptors(cs.prototype,({value:e},r)=>{let t=r[0].toUpperCase()+r.slice(1);return{get:()=>e,set(n){this[t]=n}}});st.freezeMethods(cs);function ag(e,r){const t=this||Yd,n=r||t,a=cs.from(n.headers);let i=n.data;return st.forEach(e,function(f){i=f.call(t,i,a.normalize(),r?r.status:void 0)}),a.normalize(),i}function X3(e){return!!(e&&e.__CANCEL__)}function X0(e,r,t){mr.call(this,e??"canceled",mr.ERR_CANCELED,r,t),this.name="CanceledError"}st.inherits(X0,mr,{__CANCEL__:!0});function K3(e,r,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?e(t):r(new mr("Request failed with status code "+t.status,[mr.ERR_BAD_REQUEST,mr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function qT(e){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}function YT(e,r){e=e||10;const t=new Array(e),n=new Array(e);let a=0,i=0,u;return r=r!==void 0?r:1e3,function(g){const m=Date.now(),w=n[i];u||(u=m),t[a]=g,n[a]=m;let _=i,E=0;for(;_!==a;)E+=t[_++],_=_%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),m-u<r)return;const k=w&&m-w;return k?Math.round(E*1e3/k):void 0}}function $T(e,r){let t=0,n=1e3/r,a,i;const u=(m,w=Date.now())=>{t=w,a=null,i&&(clearTimeout(i),i=null),e(...m)};return[(...m)=>{const w=Date.now(),_=w-t;_>=n?u(m,w):(a=m,i||(i=setTimeout(()=>{i=null,u(a)},n-_)))},()=>a&&u(a)]}const s1=(e,r,t=3)=>{let n=0;const a=YT(50,250);return $T(i=>{const u=i.loaded,f=i.lengthComputable?i.total:void 0,g=u-n,m=a(g),w=u<=f;n=u;const _={loaded:u,total:f,progress:f?u/f:void 0,bytes:g,rate:m||void 0,estimated:m&&f&&w?(f-u)/m:void 0,event:i,lengthComputable:f!=null,[r?"download":"upload"]:!0};e(_)},t)},Ay=(e,r)=>{const t=e!=null;return[n=>r[0]({lengthComputable:t,total:e,loaded:n}),r[1]]},Ny=e=>(...r)=>st.asap(()=>e(...r)),ZT=Ba.hasStandardBrowserEnv?((e,r)=>t=>(t=new URL(t,Ba.origin),e.protocol===t.protocol&&e.host===t.host&&(r||e.port===t.port)))(new URL(Ba.origin),Ba.navigator&&/(msie|trident)/i.test(Ba.navigator.userAgent)):()=>!0,JT=Ba.hasStandardBrowserEnv?{write(e,r,t,n,a,i,u){if(typeof document>"u")return;const f=[`${e}=${encodeURIComponent(r)}`];st.isNumber(t)&&f.push(`expires=${new Date(t).toUTCString()}`),st.isString(n)&&f.push(`path=${n}`),st.isString(a)&&f.push(`domain=${a}`),i===!0&&f.push("secure"),st.isString(u)&&f.push(`SameSite=${u}`),document.cookie=f.join("; ")},read(e){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function QT(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ej(e,r){return r?e.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):e}function q3(e,r,t){let n=!QT(r);return e&&(n||t==!1)?ej(e,r):r}const Cy=e=>e instanceof cs?{...e}:e;function hc(e,r){r=r||{};const t={};function n(m,w,_,E){return st.isPlainObject(m)&&st.isPlainObject(w)?st.merge.call({caseless:E},m,w):st.isPlainObject(w)?st.merge({},w):st.isArray(w)?w.slice():w}function a(m,w,_,E){if(st.isUndefined(w)){if(!st.isUndefined(m))return n(void 0,m,_,E)}else return n(m,w,_,E)}function i(m,w){if(!st.isUndefined(w))return n(void 0,w)}function u(m,w){if(st.isUndefined(w)){if(!st.isUndefined(m))return n(void 0,m)}else return n(void 0,w)}function f(m,w,_){if(_ in r)return n(m,w);if(_ in e)return n(void 0,m)}const g={url:i,method:i,data:i,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(m,w,_)=>a(Cy(m),Cy(w),_,!0)};return st.forEach(Object.keys({...e,...r}),function(w){const _=g[w]||a,E=_(e[w],r[w],w);st.isUndefined(E)&&_!==f||(t[w]=E)}),t}const Y3=e=>{const r=hc({},e);let{data:t,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:u,auth:f}=r;if(r.headers=u=cs.from(u),r.url=V3(q3(r.baseURL,r.url,r.allowAbsoluteUrls),e.params,e.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),st.isFormData(t)){if(Ba.hasStandardBrowserEnv||Ba.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(st.isFunction(t.getHeaders)){const g=t.getHeaders(),m=["content-type","content-length"];Object.entries(g).forEach(([w,_])=>{m.includes(w.toLowerCase())&&u.set(w,_)})}}if(Ba.hasStandardBrowserEnv&&(n&&st.isFunction(n)&&(n=n(r)),n||n!==!1&&ZT(r.url))){const g=a&&i&&JT.read(i);g&&u.set(a,g)}return r},tj=typeof XMLHttpRequest<"u",rj=tj&&function(e){return new Promise(function(t,n){const a=Y3(e);let i=a.data;const u=cs.from(a.headers).normalize();let{responseType:f,onUploadProgress:g,onDownloadProgress:m}=a,w,_,E,k,N;function A(){k&&k(),N&&N(),a.cancelToken&&a.cancelToken.unsubscribe(w),a.signal&&a.signal.removeEventListener("abort",w)}let C=new XMLHttpRequest;C.open(a.method.toUpperCase(),a.url,!0),C.timeout=a.timeout;function I(){if(!C)return;const O=cs.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),U={data:!f||f==="text"||f==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:O,config:e,request:C};K3(function(F){t(F),A()},function(F){n(F),A()},U),C=null}"onloadend"in C?C.onloadend=I:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(I)},C.onabort=function(){C&&(n(new mr("Request aborted",mr.ECONNABORTED,e,C)),C=null)},C.onerror=function(B){const U=B&&B.message?B.message:"Network Error",X=new mr(U,mr.ERR_NETWORK,e,C);X.event=B||null,n(X),C=null},C.ontimeout=function(){let B=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const U=a.transitional||G3;a.timeoutErrorMessage&&(B=a.timeoutErrorMessage),n(new mr(B,U.clarifyTimeoutError?mr.ETIMEDOUT:mr.ECONNABORTED,e,C)),C=null},i===void 0&&u.setContentType(null),"setRequestHeader"in C&&st.forEach(u.toJSON(),function(B,U){C.setRequestHeader(U,B)}),st.isUndefined(a.withCredentials)||(C.withCredentials=!!a.withCredentials),f&&f!=="json"&&(C.responseType=a.responseType),m&&([E,N]=s1(m,!0),C.addEventListener("progress",E)),g&&C.upload&&([_,k]=s1(g),C.upload.addEventListener("progress",_),C.upload.addEventListener("loadend",k)),(a.cancelToken||a.signal)&&(w=O=>{C&&(n(!O||O.type?new X0(null,e,C):O),C.abort(),C=null)},a.cancelToken&&a.cancelToken.subscribe(w),a.signal&&(a.signal.aborted?w():a.signal.addEventListener("abort",w)));const D=qT(a.url);if(D&&Ba.protocols.indexOf(D)===-1){n(new mr("Unsupported protocol "+D+":",mr.ERR_BAD_REQUEST,e));return}C.send(i||null)})},nj=(e,r)=>{const{length:t}=e=e?e.filter(Boolean):[];if(r||t){let n=new AbortController,a;const i=function(m){if(!a){a=!0,f();const w=m instanceof Error?m:this.reason;n.abort(w instanceof mr?w:new X0(w instanceof Error?w.message:w))}};let u=r&&setTimeout(()=>{u=null,i(new mr(`timeout ${r} of ms exceeded`,mr.ETIMEDOUT))},r);const f=()=>{e&&(u&&clearTimeout(u),u=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),e=null)};e.forEach(m=>m.addEventListener("abort",i));const{signal:g}=n;return g.unsubscribe=()=>st.asap(f),g}},aj=function*(e,r){let t=e.byteLength;if(t<r){yield e;return}let n=0,a;for(;n<t;)a=n+r,yield e.slice(n,a),n=a},sj=async function*(e,r){for await(const t of ij(e))yield*aj(t,r)},ij=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const r=e.getReader();try{for(;;){const{done:t,value:n}=await r.read();if(t)break;yield n}}finally{await r.cancel()}},Ty=(e,r,t,n)=>{const a=sj(e,r);let i=0,u,f=g=>{u||(u=!0,n&&n(g))};return new ReadableStream({async pull(g){try{const{done:m,value:w}=await a.next();if(m){f(),g.close();return}let _=w.byteLength;if(t){let E=i+=_;t(E)}g.enqueue(new Uint8Array(w))}catch(m){throw f(m),m}},cancel(g){return f(g),a.return()}},{highWaterMark:2})},jy=64*1024,{isFunction:jh}=st,lj=(({Request:e,Response:r})=>({Request:e,Response:r}))(st.global),{ReadableStream:Ry,TextEncoder:Oy}=st.global,Iy=(e,...r)=>{try{return!!e(...r)}catch{return!1}},oj=e=>{e=st.merge.call({skipUndefined:!0},lj,e);const{fetch:r,Request:t,Response:n}=e,a=r?jh(r):typeof fetch=="function",i=jh(t),u=jh(n);if(!a)return!1;const f=a&&jh(Ry),g=a&&(typeof Oy=="function"?(N=>A=>N.encode(A))(new Oy):async N=>new Uint8Array(await new t(N).arrayBuffer())),m=i&&f&&Iy(()=>{let N=!1;const A=new t(Ba.origin,{body:new Ry,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!A}),w=u&&f&&Iy(()=>st.isReadableStream(new n("").body)),_={stream:w&&(N=>N.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!_[N]&&(_[N]=(A,C)=>{let I=A&&A[N];if(I)return I.call(A);throw new mr(`Response type '${N}' is not supported`,mr.ERR_NOT_SUPPORT,C)})});const E=async N=>{if(N==null)return 0;if(st.isBlob(N))return N.size;if(st.isSpecCompliantForm(N))return(await new t(Ba.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(st.isArrayBufferView(N)||st.isArrayBuffer(N))return N.byteLength;if(st.isURLSearchParams(N)&&(N=N+""),st.isString(N))return(await g(N)).byteLength},k=async(N,A)=>{const C=st.toFiniteNumber(N.getContentLength());return C??E(A)};return async N=>{let{url:A,method:C,data:I,signal:D,cancelToken:O,timeout:B,onDownloadProgress:U,onUploadProgress:X,responseType:F,headers:Y,withCredentials:H="same-origin",fetchOptions:ce}=Y3(N),J=r||fetch;F=F?(F+"").toLowerCase():"text";let V=nj([D,O&&O.toAbortSignal()],B),xe=null;const W=V&&V.unsubscribe&&(()=>{V.unsubscribe()});let ne;try{if(X&&m&&C!=="get"&&C!=="head"&&(ne=await k(Y,I))!==0){let re=new t(A,{method:"POST",body:I,duplex:"half"}),L;if(st.isFormData(I)&&(L=re.headers.get("content-type"))&&Y.setContentType(L),re.body){const[q,P]=Ay(ne,s1(Ny(X)));I=Ty(re.body,jy,q,P)}}st.isString(H)||(H=H?"include":"omit");const be=i&&"credentials"in t.prototype,fe={...ce,signal:V,method:C.toUpperCase(),headers:Y.normalize().toJSON(),body:I,duplex:"half",credentials:be?H:void 0};xe=i&&new t(A,fe);let Ve=await(i?J(xe,ce):J(A,fe));const ge=w&&(F==="stream"||F==="response");if(w&&(U||ge&&W)){const re={};["status","statusText","headers"].forEach(Z=>{re[Z]=Ve[Z]});const L=st.toFiniteNumber(Ve.headers.get("content-length")),[q,P]=U&&Ay(L,s1(Ny(U),!0))||[];Ve=new n(Ty(Ve.body,jy,q,()=>{P&&P(),W&&W()}),re)}F=F||"text";let We=await _[st.findKey(_,F)||"text"](Ve,N);return!ge&&W&&W(),await new Promise((re,L)=>{K3(re,L,{data:We,headers:cs.from(Ve.headers),status:Ve.status,statusText:Ve.statusText,config:N,request:xe})})}catch(be){throw W&&W(),be&&be.name==="TypeError"&&/Load failed|fetch/i.test(be.message)?Object.assign(new mr("Network Error",mr.ERR_NETWORK,N,xe),{cause:be.cause||be}):mr.from(be,be&&be.code,N,xe)}}},cj=new Map,$3=e=>{let r=e&&e.env||{};const{fetch:t,Request:n,Response:a}=r,i=[n,a,t];let u=i.length,f=u,g,m,w=cj;for(;f--;)g=i[f],m=w.get(g),m===void 0&&w.set(g,m=f?new Map:oj(r)),w=m;return m};$3();const Bp={http:AT,xhr:rj,fetch:{get:$3}};st.forEach(Bp,(e,r)=>{if(e){try{Object.defineProperty(e,"name",{value:r})}catch{}Object.defineProperty(e,"adapterName",{value:r})}});const Dy=e=>`- ${e}`,uj=e=>st.isFunction(e)||e===null||e===!1;function dj(e,r){e=st.isArray(e)?e:[e];const{length:t}=e;let n,a;const i={};for(let u=0;u<t;u++){n=e[u];let f;if(a=n,!uj(n)&&(a=Bp[(f=String(n)).toLowerCase()],a===void 0))throw new mr(`Unknown adapter '${f}'`);if(a&&(st.isFunction(a)||(a=a.get(r))))break;i[f||"#"+u]=a}if(!a){const u=Object.entries(i).map(([g,m])=>`adapter ${g} `+(m===!1?"is not supported by the environment":"is not available in the build"));let f=t?u.length>1?`since :
`+u.map(Dy).join(`
`):" "+Dy(u[0]):"as no adapter specified";throw new mr("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return a}const Z3={getAdapter:dj,adapters:Bp};function sg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new X0(null,e)}function My(e){return sg(e),e.headers=cs.from(e.headers),e.data=ag.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Z3.getAdapter(e.adapter||Yd.adapter,e)(e).then(function(n){return sg(e),n.data=ag.call(e,e.transformResponse,n),n.headers=cs.from(n.headers),n},function(n){return X3(n)||(sg(e),n&&n.response&&(n.response.data=ag.call(e,e.transformResponse,n.response),n.response.headers=cs.from(n.response.headers))),Promise.reject(n)})}const J3="1.13.2",D1={};["object","boolean","number","function","string","symbol"].forEach((e,r)=>{D1[e]=function(n){return typeof n===e||"a"+(r<1?"n ":" ")+e}});const Fy={};D1.transitional=function(r,t,n){function a(i,u){return"[Axios v"+J3+"] Transitional option '"+i+"'"+u+(n?". "+n:"")}return(i,u,f)=>{if(r===!1)throw new mr(a(u," has been removed"+(t?" in "+t:"")),mr.ERR_DEPRECATED);return t&&!Fy[u]&&(Fy[u]=!0,console.warn(a(u," has been deprecated since v"+t+" and will be removed in the near future"))),r?r(i,u,f):!0}};D1.spelling=function(r){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${r}`),!0)};function fj(e,r,t){if(typeof e!="object")throw new mr("options must be an object",mr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],u=r[i];if(u){const f=e[i],g=f===void 0||u(f,i,e);if(g!==!0)throw new mr("option "+i+" must be "+g,mr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new mr("Unknown option "+i,mr.ERR_BAD_OPTION)}}const Jh={assertOptions:fj,validators:D1},Oi=Jh.validators;let lc=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Ey,response:new Ey}}async request(r,t){try{return await this._request(r,t)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(r,t){typeof r=="string"?(t=t||{},t.url=r):t=r||{},t=hc(this.defaults,t);const{transitional:n,paramsSerializer:a,headers:i}=t;n!==void 0&&Jh.assertOptions(n,{silentJSONParsing:Oi.transitional(Oi.boolean),forcedJSONParsing:Oi.transitional(Oi.boolean),clarifyTimeoutError:Oi.transitional(Oi.boolean)},!1),a!=null&&(st.isFunction(a)?t.paramsSerializer={serialize:a}:Jh.assertOptions(a,{encode:Oi.function,serialize:Oi.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Jh.assertOptions(t,{baseUrl:Oi.spelling("baseURL"),withXsrfToken:Oi.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=i&&st.merge(i.common,i[t.method]);i&&st.forEach(["delete","get","head","post","put","patch","common"],N=>{delete i[N]}),t.headers=cs.concat(u,i);const f=[];let g=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(t)===!1||(g=g&&A.synchronous,f.unshift(A.fulfilled,A.rejected))});const m=[];this.interceptors.response.forEach(function(A){m.push(A.fulfilled,A.rejected)});let w,_=0,E;if(!g){const N=[My.bind(this),void 0];for(N.unshift(...f),N.push(...m),E=N.length,w=Promise.resolve(t);_<E;)w=w.then(N[_++],N[_++]);return w}E=f.length;let k=t;for(;_<E;){const N=f[_++],A=f[_++];try{k=N(k)}catch(C){A.call(this,C);break}}try{w=My.call(this,k)}catch(N){return Promise.reject(N)}for(_=0,E=m.length;_<E;)w=w.then(m[_++],m[_++]);return w}getUri(r){r=hc(this.defaults,r);const t=q3(r.baseURL,r.url,r.allowAbsoluteUrls);return V3(t,r.params,r.paramsSerializer)}};st.forEach(["delete","get","head","options"],function(r){lc.prototype[r]=function(t,n){return this.request(hc(n||{},{method:r,url:t,data:(n||{}).data}))}});st.forEach(["post","put","patch"],function(r){function t(n){return function(i,u,f){return this.request(hc(f||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:u}))}}lc.prototype[r]=t(),lc.prototype[r+"Form"]=t(!0)});let hj=class Q3{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const u=new Promise(f=>{n.subscribe(f),i=f}).then(a);return u.cancel=function(){n.unsubscribe(i)},u},r(function(i,u,f){n.reason||(n.reason=new X0(i,u,f),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const t=this._listeners.indexOf(r);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const r=new AbortController,t=n=>{r.abort(n)};return this.subscribe(t),r.signal.unsubscribe=()=>this.unsubscribe(t),r.signal}static source(){let r;return{token:new Q3(function(a){r=a}),cancel:r}}};function xj(e){return function(t){return e.apply(null,t)}}function mj(e){return st.isObject(e)&&e.isAxiosError===!0}const Jg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Jg).forEach(([e,r])=>{Jg[r]=e});function ek(e){const r=new lc(e),t=R3(lc.prototype.request,r);return st.extend(t,lc.prototype,r,{allOwnKeys:!0}),st.extend(t,r,null,{allOwnKeys:!0}),t.create=function(a){return ek(hc(e,a))},t}const xn=ek(Yd);xn.Axios=lc;xn.CanceledError=X0;xn.CancelToken=hj;xn.isCancel=X3;xn.VERSION=J3;xn.toFormData=I1;xn.AxiosError=mr;xn.Cancel=xn.CanceledError;xn.all=function(r){return Promise.all(r)};xn.spread=xj;xn.isAxiosError=mj;xn.mergeConfig=hc;xn.AxiosHeaders=cs;xn.formToJSON=e=>W3(st.isHTMLForm(e)?new FormData(e):e);xn.getAdapter=Z3.getAdapter;xn.HttpStatusCode=Jg;xn.default=xn;const{Axios:_G,AxiosError:kG,CanceledError:EG,isCancel:SG,CancelToken:AG,VERSION:NG,all:CG,Cancel:TG,isAxiosError:jG,spread:RG,toFormData:OG,AxiosHeaders:IG,HttpStatusCode:DG,formToJSON:MG,getAdapter:FG,mergeConfig:LG}=xn,gj="https://uygulama.edonustur.com/api",pj={createOrder:async e=>{const r=localStorage.getItem("birfatura_config");if(!r)return{success:!1,message:"Ayarlar bulunamad. Ltfen Ayarlar sayfasndan BirFatura API anahtarlarn kaydedin."};let t;try{t=JSON.parse(r)}catch{return{success:!1,message:"Ayar dosyas bozuk. Ltfen ayarlar tekrar kaydedin."}}if(!t.api_key||!t.secret_key)return{success:!1,message:"API veya Secret Key eksik. Ltfen Ayarlar sayfasn kontrol edin."};const n=e.customer_name||e.customer?.name||(typeof e.customer=="string"?e.customer:"Misafir Mteri");let a="",i="",u="",f="Adana",g="Seyhan";e.customer&&typeof e.customer=="object"?(a=e.customer.tax_number||"",i=e.customer.tax_office||"",u=e.customer.address||"",f=e.customer.city||f,g=e.customer.district||g):e.customer_name==="Misafir Mteri"||e.customer;let m="",w="";const _=String(a||"").trim();_.length===11?w=_:_.length>0&&(m=_),!w&&!m&&(n==="Misafir Mteri"||n==="Toptan Sat")&&(w="11111111111");const E=m||w;let k=0,N=0;const A=e.items.map(O=>{const B=parseFloat(O.price||0),U=B/1.2,X=parseFloat(O.quantity||1);return k+=B*X,{ProductId:0,ProductCode:O.stock_code||"",Barcode:O.stock_code||"",ProductName:O.name||"",ProductQuantity:X,VatRate:20,ProductUnitPriceTaxExcluding:Number(U.toFixed(4)),ProductUnitPriceTaxIncluding:Number(B.toFixed(4)),Variants:[]}});N=k/1.2;const C=new Date,I=C.toLocaleDateString("tr-TR")+" "+C.toLocaleTimeString("tr-TR"),D={OrderCode:e.sale_code,OrderDate:I,CustomerId:0,BillingName:n,BillingAddress:u,BillingTown:g,BillingCity:f,BillingTaxOffice:i,TaxNo:m,SSNTCNo:w,ShippingId:0,ShippingName:n,ShippingAddress:u,ShippingTown:g,ShippingCity:f,ShippingTaxNumber:E,ShipCompany:"Kargo",PaymentTypeId:1,PaymentType:"Kredi Kart",Currency:"TRY",CurrencyRate:1,TotalPaidTaxIncluding:Number(k.toFixed(2)),TotalPaidTaxExcluding:Number(N.toFixed(2)),OrderDetails:A};try{return{success:!0,data:(await xn.post(`${gj}/Orders`,D,{headers:{"Content-Type":"application/json","X-Api-Key":t.api_key,"X-Secret-Key":t.secret_key,"X-Integration-Key":t.integration_key}})).data}}catch(O){return console.error("BirFatura API Error:",O),{success:!1,message:`BirFatura Hatas: ${O.response?.data?.message||O.message||"Bilinmeyen Hata"}`}}}},bj="A5 (148x210mm)",wj=[{type:"text",id:"baslik",x:10,y:15,text:"POS Sistemi",font_family:"Tahoma",font_size:22,font_bold:!0,color:"#000000",text_width:400,text_height:28,text_align:"center"},{type:"text",id:"alt_baslik",x:10,y:45,text:"Sat Fii",font_family:"Tahoma",font_size:14,font_bold:!1,color:"#666666",text_width:400,text_height:20,text_align:"center"},{type:"shape",id:"kutu_bilgi",x:10,y:75,width:400,height:80,fill_color:"#f8f9fa",border:{sides:{top:!0,bottom:!0,left:!0,right:!0},thickness:1,color:"#dee2e6"}},{type:"text",id:"bilgi_fis_no_label",x:20,y:82,text:"Fi No:",font_family:"Tahoma",font_size:11,font_bold:!0,color:"#000000",text_width:60,text_height:16,text_align:"left"},{type:"text",id:"bilgi_fis_no_value",x:80,y:82,text:"{{FIS_NO}}",font_family:"Tahoma",font_size:11,font_bold:!1,color:"#333333",text_width:150,text_height:16,text_align:"left"},{type:"text",id:"bilgi_tarih_label",x:20,y:100,text:"Tarih:",font_family:"Tahoma",font_size:11,font_bold:!0,color:"#000000",text_width:60,text_height:16,text_align:"left"},{type:"text",id:"bilgi_tarih_value",x:80,y:100,text:"{{TARIH}} {{SAAT}}",font_family:"Tahoma",font_size:11,font_bold:!1,color:"#333333",text_width:150,text_height:16,text_align:"left"},{type:"text",id:"bilgi_musteri_label",x:20,y:118,text:"Mteri:",font_family:"Tahoma",font_size:11,font_bold:!0,color:"#000000",text_width:60,text_height:16,text_align:"left"},{type:"text",id:"bilgi_musteri_value",x:80,y:118,text:"{{MUSTERI_ADI}}",font_family:"Tahoma",font_size:11,font_bold:!1,color:"#333333",text_width:150,text_height:16,text_align:"left"},{type:"text",id:"bilgi_odeme_label",x:20,y:136,text:"deme Tipi:",font_family:"Tahoma",font_size:11,font_bold:!0,color:"#000000",text_width:70,text_height:16,text_align:"left"},{type:"text",id:"bilgi_odeme_value",x:90,y:136,text:"{{ODEME_TIPI}}",font_family:"Tahoma",font_size:11,font_bold:!1,color:"#333333",text_width:140,text_height:16,text_align:"left"},{type:"shape",id:"tablo_baslik_bg",x:10,y:165,width:400,height:25,fill_color:"#343a40"},{type:"text",id:"th_urun",x:15,y:170,text:"rn",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#ffffff",text_width:140,text_height:16,text_align:"left"},{type:"text",id:"th_adet",x:160,y:170,text:"Adet",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#ffffff",text_width:50,text_height:16,text_align:"center"},{type:"text",id:"th_fiyat",x:215,y:170,text:"Fiyat",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#ffffff",text_width:60,text_height:16,text_align:"right"},{type:"text",id:"th_iskonto",x:280,y:170,text:"skonto",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#ffffff",text_width:55,text_height:16,text_align:"center"},{type:"text",id:"th_toplam",x:340,y:170,text:"Toplam",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#ffffff",text_width:65,text_height:16,text_align:"right"},{type:"text",id:"row_urun",x:15,y:195,text:"{{URUN_ADI}}",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#000000",text_width:140,text_height:16,text_align:"left",is_product_row:!0},{type:"text",id:"row_adet",x:160,y:195,text:"{{MIKTAR}}",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#000000",text_width:50,text_height:16,text_align:"center",is_product_row:!0},{type:"text",id:"row_fiyat",x:215,y:195,text:"{{FIYAT}} TL",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#000000",text_width:60,text_height:16,text_align:"right",is_product_row:!0},{type:"text",id:"row_iskonto",x:280,y:195,text:"%{{ISKONTO}}",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#000000",text_width:55,text_height:16,text_align:"center",is_product_row:!0},{type:"text",id:"row_toplam",x:340,y:195,text:"{{SATIR_TOPLAM}} TL",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#000000",text_width:65,text_height:16,text_align:"right",is_product_row:!0},{type:"shape",id:"row_line",x:10,y:213,width:400,height:1,fill_color:"#e0e0e0",is_product_row:!0},{type:"shape",id:"total_bg",x:200,y:280,width:210,height:32,fill_color:"#343a40",is_dynamic_footer:!0},{type:"text",id:"genel_toplam_label",x:210,y:287,text:"Toplam:",font_family:"Tahoma",font_size:12,font_bold:!0,color:"#ffffff",text_width:80,text_height:18,text_align:"left",is_dynamic_footer:!0},{type:"text",id:"genel_toplam_value",x:300,y:287,text:"{{GENEL_TOPLAM}} TL",font_family:"Tahoma",font_size:14,font_bold:!0,color:"#ffffff",text_width:100,text_height:18,text_align:"right",is_dynamic_footer:!0},{type:"shape",id:"balance_bg",x:10,y:322,width:400,height:50,fill_color:"#f9f9f9",border:{sides:{top:!0,bottom:!0,left:!0,right:!0},thickness:1,color:"#ddd"},is_dynamic_footer:!0},{type:"text",id:"eski_bakiye",x:20,y:330,text:"nceki Bakiye: {{ESKI_BAKIYE}} TL",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#666666",text_width:380,text_height:16,text_align:"left",is_dynamic_footer:!0},{type:"text",id:"yeni_bakiye",x:20,y:350,text:"Gncel Bakiye: {{YENI_BAKIYE}} TL",font_family:"Tahoma",font_size:12,font_bold:!0,color:"#000000",text_width:380,text_height:18,text_align:"left",is_dynamic_footer:!0},{type:"text",id:"footer_msg",x:10,y:390,text:"Bizi tercih ettiiniz iin teekkr ederiz.",font_family:"Tahoma",font_size:10,font_bold:!1,color:"#666666",text_width:400,text_height:16,text_align:"center",is_dynamic_footer:!0}],tk={paper_size:bj,items:wj},vj="Termal 80mm",yj=[{type:"text",id:"firma_adi",x:10,y:10,text:"FIRMA ADI",font_family:"Tahoma",font_size:14,font_bold:!0,color:"#000000",text_width:260,text_height:20,text_align:"center"},{type:"text",id:"firma_adres",x:10,y:32,text:"Adres Bilgisi",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:260,text_height:15,text_align:"center"},{type:"text",id:"firma_tel",x:10,y:48,text:"Tel: 0XXX XXX XX XX",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:260,text_height:15,text_align:"center"},{type:"shape",id:"kesik_cizgi_1",x:10,y:68,width:260,height:1,fill_color:"#000000",border:{sides:{top:!0,bottom:!1,left:!1,right:!1},thickness:1,color:"#000000",style:"dashed"}},{type:"text",id:"tarih_saat",x:10,y:75,text:"{{TARIH}} {{SAAT}}",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:140,text_height:15,text_align:"left"},{type:"text",id:"musteri_adi",x:150,y:75,text:"{{MUSTERI_ADI}}",font_family:"Tahoma",font_size:9,font_bold:!0,color:"#000000",text_width:120,text_height:15,text_align:"right"},{type:"shape",id:"tablo_baslik_bg",x:10,y:95,width:260,height:18,fill_color:"#e5e5e5",border:{sides:{top:!0,bottom:!0,left:!0,right:!0},thickness:1,color:"#000000"}},{type:"text",id:"baslik_urun",x:12,y:98,text:"URUN",font_family:"Tahoma",font_size:8,font_bold:!0,color:"#000000",text_width:120,text_height:14,text_align:"left"},{type:"text",id:"baslik_miktar",x:140,y:98,text:"ADET",font_family:"Tahoma",font_size:8,font_bold:!0,color:"#000000",text_width:40,text_height:14,text_align:"center"},{type:"text",id:"baslik_fiyat",x:185,y:98,text:"FIYAT",font_family:"Tahoma",font_size:8,font_bold:!0,color:"#000000",text_width:40,text_height:14,text_align:"right"},{type:"text",id:"baslik_toplam",x:225,y:98,text:"TUTAR",font_family:"Tahoma",font_size:8,font_bold:!0,color:"#000000",text_width:45,text_height:14,text_align:"right"},{type:"text",id:"urun_satiri_adi",x:12,y:118,text:"{{URUN_ADI}}",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:125,text_height:14,text_align:"left",is_product_row:!0},{type:"text",id:"urun_satiri_miktar",x:140,y:118,text:"{{MIKTAR}}",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:40,text_height:14,text_align:"center",is_product_row:!0},{type:"text",id:"urun_satiri_fiyat",x:185,y:118,text:"{{FIYAT}}",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:40,text_height:14,text_align:"right",is_product_row:!0},{type:"text",id:"urun_satiri_toplam",x:225,y:118,text:"{{SATIR_TOPLAM}}",font_family:"Tahoma",font_size:9,font_bold:!1,color:"#000000",text_width:45,text_height:14,text_align:"right",is_product_row:!0},{type:"shape",id:"toplam_cizgi",x:10,y:180,width:260,height:1,fill_color:"#000000",is_dynamic_footer:!0},{type:"text",id:"genel_toplam_baslik",x:100,y:188,text:"TOPLAM:",font_family:"Tahoma",font_size:12,font_bold:!0,color:"#000000",text_width:80,text_height:18,text_align:"right",is_dynamic_footer:!0},{type:"text",id:"genel_toplam_deger",x:185,y:188,text:"{{GENEL_TOPLAM}} TL",font_family:"Tahoma",font_size:12,font_bold:!0,color:"#000000",text_width:85,text_height:18,text_align:"right",is_dynamic_footer:!0},{type:"shape",id:"kesik_cizgi_2",x:10,y:215,width:260,height:1,fill_color:"#000000",is_dynamic_footer:!0},{type:"text",id:"eski_bakiye",x:10,y:222,text:"Onceki Bakiye: {{ESKI_BAKIYE}} TL",font_family:"Tahoma",font_size:8,font_bold:!1,color:"#666666",text_width:260,text_height:12,text_align:"left",is_dynamic_footer:!0},{type:"text",id:"yeni_bakiye",x:10,y:236,text:"Guncel Bakiye: {{YENI_BAKIYE}} TL",font_family:"Tahoma",font_size:9,font_bold:!0,color:"#000000",text_width:260,text_height:14,text_align:"left",is_dynamic_footer:!0},{type:"text",id:"tesekkur",x:10,y:260,text:"Bizi tercih ettiginiz icin tesekkurler!",font_family:"Tahoma",font_size:8,font_bold:!1,color:"#666666",text_width:260,text_height:12,text_align:"center",is_dynamic_footer:!0}],rk={paper_size:vj,items:yj},_j="Termal 58mm",kj=[{type:"text",id:"firma_adi",x:5,y:8,text:"FIRMA ADI",font_family:"Tahoma",font_size:11,font_bold:!0,color:"#000000",text_width:190,text_height:16,text_align:"center"},{type:"text",id:"firma_tel",x:5,y:26,text:"Tel: 0XXX XXX XX XX",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#000000",text_width:190,text_height:12,text_align:"center"},{type:"shape",id:"kesik_cizgi_1",x:5,y:42,width:190,height:1,fill_color:"#000000"},{type:"text",id:"tarih_saat",x:5,y:48,text:"{{TARIH}} {{SAAT}}",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#000000",text_width:190,text_height:12,text_align:"left"},{type:"text",id:"musteri_adi",x:5,y:62,text:"{{MUSTERI_ADI}}",font_family:"Tahoma",font_size:8,font_bold:!0,color:"#000000",text_width:190,text_height:12,text_align:"left"},{type:"shape",id:"tablo_baslik_bg",x:5,y:78,width:190,height:14,fill_color:"#e5e5e5",border:{sides:{top:!0,bottom:!0,left:!0,right:!0},thickness:1,color:"#000000"}},{type:"text",id:"baslik_urun",x:7,y:80,text:"URUN",font_family:"Tahoma",font_size:7,font_bold:!0,color:"#000000",text_width:80,text_height:12,text_align:"left"},{type:"text",id:"baslik_miktar",x:90,y:80,text:"AD",font_family:"Tahoma",font_size:7,font_bold:!0,color:"#000000",text_width:25,text_height:12,text_align:"center"},{type:"text",id:"baslik_fiyat",x:115,y:80,text:"FYT",font_family:"Tahoma",font_size:7,font_bold:!0,color:"#000000",text_width:35,text_height:12,text_align:"right"},{type:"text",id:"baslik_toplam",x:155,y:80,text:"TUT",font_family:"Tahoma",font_size:7,font_bold:!0,color:"#000000",text_width:40,text_height:12,text_align:"right"},{type:"text",id:"urun_satiri_adi",x:7,y:96,text:"{{URUN_ADI}}",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#000000",text_width:80,text_height:12,text_align:"left",is_product_row:!0},{type:"text",id:"urun_satiri_miktar",x:90,y:96,text:"{{MIKTAR}}",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#000000",text_width:25,text_height:12,text_align:"center",is_product_row:!0},{type:"text",id:"urun_satiri_fiyat",x:115,y:96,text:"{{FIYAT}}",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#000000",text_width:35,text_height:12,text_align:"right",is_product_row:!0},{type:"text",id:"urun_satiri_toplam",x:155,y:96,text:"{{SATIR_TOPLAM}}",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#000000",text_width:40,text_height:12,text_align:"right",is_product_row:!0},{type:"shape",id:"toplam_cizgi",x:5,y:150,width:190,height:1,fill_color:"#000000",is_dynamic_footer:!0},{type:"text",id:"genel_toplam_baslik",x:5,y:156,text:"TOPLAM:",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#000000",text_width:90,text_height:14,text_align:"right",is_dynamic_footer:!0},{type:"text",id:"genel_toplam_deger",x:100,y:156,text:"{{GENEL_TOPLAM}} TL",font_family:"Tahoma",font_size:10,font_bold:!0,color:"#000000",text_width:95,text_height:14,text_align:"right",is_dynamic_footer:!0},{type:"text",id:"tesekkur",x:5,y:180,text:"Tesekkurler!",font_family:"Tahoma",font_size:7,font_bold:!1,color:"#666666",text_width:190,text_height:12,text_align:"center",is_dynamic_footer:!0}],nk={paper_size:_j,items:kj};function Ej(){const e=G0();Q.useEffect(()=>{window.innerWidth<768&&e("/mobile-pos",{replace:!0})},[e])}function Sj(){Ej();const{user:e,logout:r}=Vi(),[t,n]=Q.useState([]),[a,i]=Q.useState(["Tm"]),[u,f]=Q.useState("Tm"),[g,m]=Q.useState(""),[w,_]=Q.useState(""),[E,k]=Q.useState([]),[N,A]=Q.useState(null),[C,I]=Q.useState("Toptan Sat"),[D,O]=Q.useState([]),[B,U]=Q.useState(!1),[X,F]=Q.useState(!1),[Y,H]=Q.useState(!1),[ce,J]=Q.useState(!1),[V,xe]=Q.useState(!1),[W,ne]=Q.useState([]),[be,fe]=Q.useState([]),Ve=Q.useRef(null),[ge,We]=Q.useState({});Q.useEffect(()=>{const ie=localStorage.getItem("pos_keyboard_shortcuts");if(ie)try{We(JSON.parse(ie))}catch(Se){console.error("Shortcuts parse error",Se)}},[]),Q.useEffect(()=>{const ie=Se=>{const Ne=Object.keys(ge).find(Ze=>ge[Ze]===Se.key);if(Ne)switch(Se.key.startsWith("F")&&Se.preventDefault(),Ne){case"search_focus":Ve.current?.focus();break;case"nakit_odeme":E.length>0&&we("Nakit");break;case"pos_odeme":E.length>0&&we("POS");break;case"miktar_duzenle":N!==null&&E[N]&&(Ie(E[N].quantity),F(!0));break;case"iskonto_ekle":N!==null&&E[N]&&(Ie(E[N].discount_rate||0),H(!0));break;case"fiyat_duzenle":N!==null&&E[N]&&(Ie(E[N].price),J(!0));break;case"musteri_sec":U(!0);break}};return window.addEventListener("keydown",ie),()=>window.removeEventListener("keydown",ie)},[ge,E,N]);const[re,L]=Q.useState(!1),q={name:"",address:"Fatih mh.",phone:"",email:"",tax_office:"",tax_number:"11111111111"},[P,Z]=Q.useState(q),[pe,Le]=Q.useState(!1),[Be,Pe]=Q.useState(1),[et,ut]=Q.useState(null),[ve,Ie]=Q.useState(""),[z,De]=Q.useState(""),[Te,le]=Q.useState({show:!1,x:0,y:0}),[de,Ee]=Q.useState(!1),[at,Fe]=Q.useState(null),He=[{value:"text-xs",label:"ok Kk"},{value:"text-sm",label:"Kk"},{value:"text-base",label:"Normal"},{value:"text-lg",label:"Byk"},{value:"text-xl",label:"ok Byk"},{value:"text-2xl",label:"Dev"}],je=[{value:"font-normal",label:"Normal"},{value:"font-medium",label:"Orta"},{value:"font-semibold",label:"Yar Kaln"},{value:"font-bold",label:"Kaln"},{value:"font-extrabold",label:"ok Kaln"}],Ke=[{value:"text-gray-900",label:"Siyah",hex:"#111827"},{value:"text-gray-600",label:"Gri",hex:"#4B5563"},{value:"text-red-600",label:"Krmz",hex:"#DC2626"},{value:"text-orange-600",label:"Turuncu",hex:"#EA580C"},{value:"text-amber-600",label:"Amber",hex:"#D97706"},{value:"text-yellow-600",label:"Sar",hex:"#CA8A04"},{value:"text-lime-600",label:"Lime",hex:"#65A30D"},{value:"text-green-600",label:"Yeil",hex:"#16A34A"},{value:"text-emerald-600",label:"Zmrt",hex:"#059669"},{value:"text-teal-600",label:"Teal",hex:"#0D9488"},{value:"text-cyan-600",label:"Cyan",hex:"#0891B2"},{value:"text-sky-600",label:"Gk Mavi",hex:"#0284C7"},{value:"text-blue-600",label:"Mavi",hex:"#2563EB"},{value:"text-indigo-600",label:"ndigo",hex:"#4F46E5"},{value:"text-violet-600",label:"Mor",hex:"#7C3AED"},{value:"text-purple-600",label:"Eflatun",hex:"#9333EA"},{value:"text-fuchsia-600",label:"Fuya",hex:"#C026D3"},{value:"text-pink-600",label:"Pembe",hex:"#DB2777"},{value:"text-rose-600",label:"Gl",hex:"#E11D48"}],it={stock_code:{visible:!0,label:"Stok Kodu",color:"text-indigo-600",bg:"bg-indigo-50",fontSize:"text-xs",fontWeight:"font-medium",textColor:"text-indigo-600",width:90},name:{visible:!0,label:"rn Ad",color:"text-emerald-700",bg:"bg-emerald-50",fontSize:"text-sm",fontWeight:"font-semibold",textColor:"text-emerald-700",width:140},quantity:{visible:!0,label:"Adet",color:"text-amber-600",bg:"bg-amber-50",fontSize:"text-lg",fontWeight:"font-bold",textColor:"text-amber-600",width:60},price:{visible:!0,label:"Fiyat",color:"text-blue-600",bg:"bg-blue-50",fontSize:"text-sm",fontWeight:"font-medium",textColor:"text-blue-600",width:70},discount:{visible:!0,label:"sk%",color:"text-rose-500",bg:"bg-rose-50",fontSize:"text-sm",fontWeight:"font-medium",textColor:"text-rose-600",width:50},discounted_price:{visible:!0,label:"sk.Sonras",color:"text-purple-600",bg:"bg-purple-50",fontSize:"text-sm",fontWeight:"font-medium",textColor:"text-purple-600",width:80},total:{visible:!0,label:"Toplam",color:"text-gray-900",bg:"bg-yellow-100",fontSize:"text-base",fontWeight:"font-bold",textColor:"text-gray-900",width:90}},[qe,Me]=Q.useState(()=>{const ie=localStorage.getItem("pos_cart_columns");if(ie){const Se=JSON.parse(ie),Ne={};return Object.keys(it).forEach(Ze=>{Ne[Ze]={...it[Ze],...Se[Ze]}}),Ne}return it}),[Xe,St]=Q.useState(null),[At,Ot]=Q.useState(0),[sr,Nt]=Q.useState(0),[mt,Ht]=Q.useState(!1),Dt=ie=>{Me(ie),localStorage.setItem("pos_cart_columns",JSON.stringify(ie))},Yt=ie=>{const Se={...qe,[ie]:{...qe[ie],visible:!qe[ie].visible}};Dt(Se)},or=(ie,Se,Ne)=>{const Ze={...qe,[ie]:{...qe[ie],[Se]:Ne}};Dt(Ze)},_r=ie=>`${ie.fontSize||"text-sm"} ${ie.fontWeight||"font-normal"} ${ie.textColor||"text-gray-900"}`,Qr=(ie,Se)=>{ie.preventDefault(),ie.stopPropagation(),St(Se),Ot(ie.clientX),Nt(qe[Se].width)};Q.useEffect(()=>{if(!Xe)return;const ie=Ne=>{const Ze=Ne.clientX-At,dt=Math.max(40,sr+Ze);Me(gt=>({...gt,[Xe]:{...gt[Xe],width:dt}})),Ht(!0)},Se=()=>{St(null)};return document.addEventListener("mousemove",ie),document.addEventListener("mouseup",Se),()=>{document.removeEventListener("mousemove",ie),document.removeEventListener("mouseup",Se)}},[Xe,At,sr]);const Xt=()=>{localStorage.setItem("pos_cart_columns",JSON.stringify(qe)),Ht(!1),le({show:!1,x:0,y:0})},Mr=ie=>{ie.preventDefault(),le({show:!0,x:ie.clientX,y:ie.clientY})};Q.useEffect(()=>{const ie=()=>le({show:!1,x:0,y:0});if(Te.show)return document.addEventListener("click",ie),()=>document.removeEventListener("click",ie)},[Te.show]),Object.values(qe).filter(ie=>ie.visible).length;const zr=()=>{const ie=[];return qe.stock_code.visible&&ie.push(`${qe.stock_code.width}px`),qe.name.visible&&ie.push(`${qe.name.width}px`),qe.quantity.visible&&ie.push(`${qe.quantity.width}px`),qe.price.visible&&ie.push(`${qe.price.width}px`),qe.discount.visible&&ie.push(`${qe.discount.width}px`),qe.discounted_price.visible&&ie.push(`${qe.discounted_price.width}px`),qe.total.visible&&ie.push(`${qe.total.width}px`),ie.join(" ")};Q.useEffect(()=>{En(),Wr(),Or(),ze()},[]);const En=async()=>{try{const Ne=((await Cn.getAll()).data||{}).products||[];n(Ne),n(Ne)}catch(ie){console.error("rnler yklenirken hata:",ie)}},Wr=async()=>{try{const ie=await Hn.getAll();O(ie.data?.customers||[])}catch(ie){console.error("Mteriler yklenirken hata:",ie)}},Or=async()=>{try{const ie=await Th.getAll();ne(ie.data?.held_sales||[])}catch(ie){console.error("Bekleyen satlar yklenirken hata:",ie)}},ze=async()=>{try{const Se=(await xo.getAll()).data?.shortcuts||[];fe(Se),i(["Tm",...Se.map(Ne=>Ne.name)])}catch(ie){console.error("Ksayollar yklenirken hata:",ie)}},kt=(()=>{const Se=(u!=="Tm"?be.find(Ze=>Ze.name===u):null)?.items||[];let Ne=t.filter(Ze=>{let dt=!0;u!=="Tm"&&(dt=Se.includes(Ze.stock_code));const gt=Ze.name?.toLowerCase().includes(g.toLowerCase())||Ze.barcode?.includes(g)||Ze.stock_code?.toLowerCase().includes(g.toLowerCase());return dt&&gt});return u!=="Tm"&&Se.length>0&&Ne.sort((Ze,dt)=>{const gt=Se.indexOf(Ze.stock_code),ht=Se.indexOf(dt.stock_code);return gt-ht}),Ne})(),Rt=ie=>{const{name:Se,value:Ne}=ie.target;Z(Ze=>({...Ze,[Se]:Ne}))},Mt=ie=>{if(ie.preventDefault(),!P.name.trim()){alert("sim Soyisim zorunludur!");return}I(`${P.name.trim()} (Perakende)`),L(!1),U(!1)},pr=ie=>{if(localStorage.getItem("pos_settings_ask_quantity")==="true"){ut(ie),Pe(""),Pe("1"),Le(!0);return}const Ne=E.findIndex(Ze=>Ze.stock_code===ie.stock_code);if(Ne>=0){const Ze=[...E];Ze[Ne].quantity+=1,k(Ze)}else k([...E,{...ie,quantity:1,discount_rate:0}])},Fr=ie=>{if(ie.preventDefault(),!et)return;const Se=parseFloat(Be)||1,Ne=E.findIndex(Ze=>Ze.stock_code===et.stock_code);if(Ne>=0){const Ze=[...E];Ze[Ne].quantity+=Se,k(Ze)}else k([...E,{...et,quantity:Se,discount_rate:0}]);Le(!1),ut(null),_("")},$r=ie=>{if(ie.key==="Enter"&&w.trim()){const Se=t.find(Ne=>Ne.barcode===w.trim()||Ne.stock_code?.toLowerCase()===w.trim().toLowerCase());Se?(pr(Se),_("")):alert("rn bulunamad: "+w)}},br=(ie,Se,Ne)=>{const Ze=[...E];Ze[ie][Se]=Ne,k(Ze),F(!1),H(!1),J(!1)},Wn=ie=>{k(E.filter((Se,Ne)=>Ne!==ie)),A(null)},ae={"A5 (148x210mm)":{width:420,height:595},"A4 (210x297mm)":{width:595,height:842},"Termal 80mm":{width:280,height:"auto"},"Termal 58mm":{width:200,height:"auto"}},ue=ie=>{const Se=localStorage.getItem("receipt_paper_size")||"Termal 80mm",Ne=`receipt_design_template_${Se}`,Ze=localStorage.getItem(Ne);let dt;try{dt=Ze?JSON.parse(Ze):null}catch{dt=null}if(!dt)switch(Se){case"Termal 80mm":dt={...rk};break;case"Termal 58mm":dt={...nk};break;case"A4 (210x297mm)":case"A5 (148x210mm)":he(ie,Se);return;default:dt={...tk};break}const gt=ae[Se]||ae["Termal 80mm"],ht=new Date,wt=(Ct,Xr=null)=>{if(!Ct)return"";let nr=Ct;nr=nr.replace("{{TARIH}}",ht.toLocaleDateString("tr-TR")),nr=nr.replace("{{SAAT}}",ht.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})),nr=nr.replace("{{FIS_NO}}",ht.getTime().toString()),nr=nr.replace("{{MUSTERI_ADI}}",ie.customer||"Mteri"),nr=nr.replace("{{ODEME_TIPI}}",ie.paymentMethod||"Nakit"),nr=nr.replace("{{GENEL_TOPLAM}}",ie.total.toFixed(2));const xs=ie.customerData?.balance||0,fr=xs+ie.total;if(nr=nr.replace("{{ESKI_BAKIYE}}",xs.toFixed(2)),nr=nr.replace("{{YENI_BAKIYE}}",fr.toFixed(2)),Xr){nr=nr.replace("{{URUN_ADI}}",Xr.name||""),nr=nr.replace("{{MIKTAR}}",Xr.quantity?.toString()||"1"),nr=nr.replace("{{FIYAT}}",Xr.price?.toFixed(2)||"0.00"),nr=nr.replace("{{ISKONTO}}",(Xr.discount_rate||0).toString());const Mn=Xr.price*Xr.quantity*(1-(Xr.discount_rate||0)/100);nr=nr.replace("{{SATIR_TOPLAM}}",Mn.toFixed(2))}return nr},It=localStorage.getItem("receipt_show_balance")==="true",ot=ie.customer&&ie.customer!=="Toptan Sat"&&!ie.customer.includes("(Perakende)"),Br=It&&ot,$t=dt.items.filter(Ct=>!Ct.is_product_row&&!Ct.is_dynamic_footer),jn=dt.items.filter(Ct=>Ct.is_product_row),si=dt.items.filter(Ct=>!(!Ct.is_dynamic_footer||!Br&&(Ct.id&&(Ct.id.includes("bakiye")||Ct.id==="eski_bakiye"||Ct.id==="yeni_bakiye")||Ct.text&&(Ct.text.includes("Bakiye")||Ct.text.includes("{{ESKI_BAKIYE}}")||Ct.text.includes("{{YENI_BAKIYE}}")))));let cr="";$t.forEach(Ct=>{const Xr=`
                position: absolute;
                left: ${Ct.x}px;
                top: ${Ct.y}px;
                width: ${Ct.text_width||Ct.width||100}px;
                height: ${Ct.text_height||Ct.height||20}px;
                font-family: 'Tahoma', sans-serif;
                font-size: ${Ct.font_size||10}px;
                font-weight: ${Ct.font_bold?"bold":"normal"};
                color: ${Ct.color||"#000"};
                text-align: ${Ct.text_align||"left"};
                background-color: ${Ct.type==="shape"&&Ct.fill_color||"transparent"};
                display: flex;
                align-items: center;
                justify-content: ${Ct.text_align==="center"?"center":Ct.text_align==="right"?"flex-end":"flex-start"};
                overflow: hidden;
                white-space: nowrap;
            `;Ct.type==="text"?cr+=`<div style="${Xr}">${wt(Ct.text)}</div>`:Ct.type==="shape"?cr+=`<div style="${Xr}"></div>`:Ct.type==="image"&&(cr+=`<div style="${Xr}"><img src="${Ct.src}" style="width: 100%; height: 100%; object-fit: contain;"></div>`)});let ir="",ur=jn.length>0?jn[0].y:120;const Dn=16;ie.items.forEach((Ct,Xr)=>{jn.forEach(nr=>{const xs=Xr*Dn,fr=`
                    position: absolute;
                    left: ${nr.x}px;
                    top: ${nr.y+xs}px;
                    width: ${nr.text_width||100}px;
                    height: ${nr.text_height||14}px;
                    font-family: 'Tahoma', sans-serif;
                    font-size: ${nr.font_size||9}px;
                    font-weight: ${nr.font_bold?"bold":"normal"};
                    color: ${nr.color||"#000"};
                    text-align: ${nr.text_align||"left"};
                    display: flex;
                    align-items: center;
                    justify-content: ${nr.text_align==="center"?"center":nr.text_align==="right"?"flex-end":"flex-start"};
                    overflow: hidden;
                    white-space: nowrap;
                `;ir+=`<div style="${fr}">${wt(nr.text,Ct)}</div>`}),ur+=Dn});let fs="";const Va=(ie.items.length-1)*Dn;si.forEach(Ct=>{const Xr=`
                position: absolute;
                left: ${Ct.x}px;
                top: ${Ct.y+Va}px;
                width: ${Ct.text_width||Ct.width||100}px;
                height: ${Ct.text_height||Ct.height||20}px;
                font-family: 'Tahoma', sans-serif;
                font-size: ${Ct.font_size||10}px;
                font-weight: ${Ct.font_bold?"bold":"normal"};
                color: ${Ct.color||"#000"};
                text-align: ${Ct.text_align||"left"};
                background-color: ${Ct.type==="shape"&&Ct.fill_color||"transparent"};
                display: flex;
                align-items: center;
                justify-content: ${Ct.text_align==="center"?"center":Ct.text_align==="right"?"flex-end":"flex-start"};
                overflow: hidden;
            `;Ct.type==="text"?fs+=`<div style="${Xr}">${wt(Ct.text)}</div>`:Ct.type==="shape"?fs+=`<div style="${Xr}"></div>`:Ct.type==="image"&&(fs+=`<div style="${Xr}"><img src="${Ct.src}" style="width: 100%; height: 100%; object-fit: contain;"></div>`)});const Lr=ur+100,hs=`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Sat Fii</title>
                <style>
                    * { margin: 0; padding: 0; box-sizing: border-box; }
                    body { width: ${gt.width}px; margin: 0 auto; }
                    .receipt { position: relative; width: ${gt.width}px; min-height: ${Lr}px; }
                    @media print { 
                        body { margin: 0; } 
                        @page { margin: 0; size: ${gt.width}px auto; }
                    }
                </style>
            </head>
            <body>
                <div class="receipt">
                    ${cr}
                    ${ir}
                    ${fs}
                </div>
            </body>
            </html>
        `,ki=window.open("","_blank",`width=${gt.width+50},height=600`);ki&&(ki.document.write(hs),ki.document.close(),ki.focus(),setTimeout(()=>{ki.print(),ki.close()},100))},he=(ie,Se)=>{const Ne=Se==="A4 (210x297mm)",Ze=Ne?"210mm":"148mm",dt=localStorage.getItem("receipt_company_name")||"POS Sistemi",gt=`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Sat Fii</title>
                <style>
                    * { margin: 0; padding: 0; box-sizing: border-box; }
                    body { 
                        font-family: 'Tahoma', 'Segoe UI', sans-serif; 
                        font-size: 12px; 
                        width: ${Ze}; 
                        margin: 0 auto; 
                        padding: 15px;
                        color: #333;
                    }
                    .receipt-header { 
                        text-align: center; 
                        border-bottom: 2px solid #333; 
                        padding-bottom: 15px; 
                        margin-bottom: 15px; 
                    }
                    .receipt-header h1 { 
                        font-size: ${Ne?"24px":"20px"}; 
                        margin-bottom: 5px; 
                        color: #000;
                    }
                    .receipt-header p { 
                        font-size: 14px; 
                        color: #666; 
                    }
                    .receipt-info { 
                        background: #f8f9fa; 
                        border: 1px solid #dee2e6; 
                        border-radius: 5px;
                        padding: 12px; 
                        margin-bottom: 15px; 
                    }
                    .receipt-info p { 
                        margin: 5px 0; 
                        font-size: 11px; 
                    }
                    .receipt-info strong { 
                        display: inline-block; 
                        width: 90px; 
                    }
                    .receipt-table { 
                        width: 100%; 
                        border-collapse: collapse; 
                        margin-bottom: 15px; 
                    }
                    .receipt-table th { 
                        background: #343a40; 
                        color: #fff; 
                        padding: 10px 8px; 
                        text-align: left; 
                        font-size: 11px;
                        font-weight: bold;
                    }
                    .receipt-table th:nth-child(2),
                    .receipt-table th:nth-child(3),
                    .receipt-table th:nth-child(4),
                    .receipt-table th:nth-child(5) { 
                        text-align: right; 
                    }
                    .receipt-table td { 
                        padding: 8px; 
                        border-bottom: 1px solid #e0e0e0; 
                        font-size: 11px;
                    }
                    .receipt-table td:nth-child(2),
                    .receipt-table td:nth-child(3),
                    .receipt-table td:nth-child(4),
                    .receipt-table td:nth-child(5) { 
                        text-align: right; 
                    }
                    .receipt-table tbody tr:hover { 
                        background: #f5f5f5; 
                    }
                    .receipt-total { 
                        background: #343a40; 
                        color: #fff; 
                        padding: 12px 15px; 
                        font-size: ${Ne?"18px":"16px"}; 
                        font-weight: bold; 
                        text-align: right; 
                        border-radius: 5px;
                        margin-bottom: 15px;
                    }
                    .receipt-footer { 
                        text-align: center; 
                        padding-top: 15px; 
                        border-top: 1px dashed #ccc; 
                        color: #666; 
                        font-size: 11px; 
                    }
                    @media print { 
                        body { margin: 0; padding: 10px; } 
                        @page { margin: 5mm; size: ${Ze} auto; }
                    }
                </style>
            </head>
            <body>
                <div class="receipt-header">
                    <h1>${dt}</h1>
                    <p>Sat Fii</p>
                </div>
                <div class="receipt-info">
                    <p><strong>Fi No:</strong> ${new Date().getTime()}</p>
                    <p><strong>Tarih:</strong> ${new Date().toLocaleString("tr-TR")}</p>
                    <p><strong>Mteri:</strong> ${ie.customer||"Misafir"}</p>
                    <p><strong>deme Tipi:</strong> ${ie.paymentMethod||"Nakit"}</p>
                </div>
                <table class="receipt-table">
                    <thead>
                        <tr>
                            <th>rn</th>
                            <th>Adet</th>
                            <th>Fiyat</th>
                            <th>skonto</th>
                            <th>Toplam</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${(ie.items||[]).map(wt=>{const It=parseFloat(wt.quantity)||1,ot=parseFloat(wt.price)||0,Br=parseFloat(wt.discount_rate)||0,$t=ot*It*(1-Br/100);return`
                                <tr>
                                    <td>${wt.name||""}</td>
                                    <td>${It.toFixed(0)}</td>
                                    <td>${ot.toFixed(2)} TL</td>
                                    <td>%${Br.toFixed(0)}</td>
                                    <td>${$t.toFixed(2)} TL</td>
                                </tr>
                            `}).join("")}
                    </tbody>
                </table>
                <div class="receipt-total">
                    Toplam: ${(ie.total||0).toFixed(2)} TL
                </div>
                <div class="receipt-footer">
                    <p>Bizi tercih ettiiniz iin teekkr ederiz.</p>
                </div>
            </body>
            </html>
        `,ht=window.open("","_blank",`width=${Ne?700:500},height=700`);ht&&(ht.document.write(gt),ht.document.close(),ht.focus(),setTimeout(()=>{ht.print(),ht.close()},100))},me=()=>E.reduce((ie,Se)=>{const Ne=Se.price*Se.quantity,Ze=Ne*(Se.discount_rate||0)/100;return ie+(Ne-Ze)},0),we=async ie=>{if(E.length===0){alert("Sepet bo!");return}try{const Se="SLS-"+Date.now(),Ne=D.find(ht=>ht.name===C),Ze=(C||"Toptan Sat").replace(/ \(Perakende\)$/i,"").trim();if(await fc.complete({sale_code:Se,customer:Ne||null,customer_name:Ne?void 0:Ze,payment_method:ie,items:E.map(ht=>({id:ht.id,stock_code:ht.stock_code,name:ht.name,quantity:ht.quantity,price:ht.price,discount_rate:ht.discount_rate||0,amount:ht.quantity})),total:me()}),localStorage.getItem("integration_send_sales_to_birfatura")==="true"){const ht={sale_code:Se,customer:Ne||null,customer_name:Ne?void 0:Ze,items:E.map(wt=>({stock_code:wt.stock_code,name:wt.name,quantity:wt.quantity,price:wt.price})),total:me()};pj.createOrder(ht).then(wt=>{wt.success||(console.error("BirFatura Error:",wt.message),alert("BirFatura Entegrasyon Uyars: "+wt.message))})}localStorage.getItem("receipt_auto_print")==="true"&&ue({customer:C,paymentMethod:ie,items:E,total:me(),customerData:Ne}),De("Sat lemi Baarl"),setTimeout(()=>De(""),2e3),k([]),I("Toptan Sat"),Z(q),En()}catch(Se){alert("Sat hatas: "+(Se.response?.data?.message||Se.message))}},_e=async()=>{if(E.length===0){alert("Sepet bo!");return}try{await Th.add({customer:C,items:E}),De("Sat Beklemeye Alnd"),setTimeout(()=>De(""),2e3),k([]),I("Toptan Sat"),Or()}catch(ie){alert("Beklemeye alma hatas: "+(ie.response?.data?.message||ie.message||"Bilinmeyen hata"))}},Ye=async ie=>{k(ie.items||[]),I(ie.customer_name||"Toptan Sat");try{await Th.delete(ie.id),Or()}catch(Se){console.error("Bekleyen sat silme hatas:",Se)}xe(!1)},ct=async ie=>{try{await Th.delete(ie),Or()}catch(Se){alert("Silme hatas: "+Se.message)}};return o.jsxs("div",{className:"flex flex-col bg-gray-100 h-[calc(100vh-9rem)] md:h-[calc(100vh-6rem)] overflow-hidden",children:[z&&o.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:o.jsx("div",{className:"bg-green-500 text-white px-16 py-8  shadow-2xl text-3xl font-bold animate-pulse",children:z})}),o.jsxs("div",{className:"flex-1 flex gap-3 p-3 overflow-hidden",children:[o.jsxs("div",{className:"w-[35%] bg-white  shadow-md p-4 flex flex-col h-full overflow-hidden",children:[o.jsxs("div",{className:"flex gap-1 mb-2",children:[o.jsx("button",{onClick:_e,className:"flex-1 h-14 bg-orange-500 text-white  font-semibold text-sm hover:bg-orange-600 transition-colors flex items-center justify-center",children:"Beklemeye Al"}),o.jsx("button",{onClick:()=>xe(!0),className:"flex-1 h-14 bg-gray-500 text-white  font-semibold text-sm hover:bg-gray-600 transition-colors flex items-center justify-center",children:"Bekleme Listesi"}),o.jsx("button",{onClick:()=>U(!0),className:"flex-1 h-14 bg-blue-400 text-white  font-semibold text-sm hover:bg-blue-500 transition-colors flex items-center justify-center",children:"Mteri Se"}),o.jsx("div",{className:"flex-[1.5] h-14 bg-gray-100 border border-gray-200  font-semibold text-gray-700 text-sm flex items-center justify-center px-2 truncate",children:C})]}),o.jsx("div",{className:"mb-2",children:o.jsx("input",{type:"text",value:w,onChange:ie=>_(ie.target.value),onKeyDown:$r,placeholder:"Barkod veya Stok Kodu...",className:"w-full px-4 py-3 text-xl font-bold text-gray-800 bg-yellow-100 border-2 border-yellow-200  focus:outline-none focus:border-yellow-400 placeholder-gray-400/70",autoFocus:!0})}),o.jsxs("div",{className:"flex-1 border border-gray-300 bg-white flex flex-col min-h-0  overflow-hidden shadow-sm",onContextMenu:Mr,children:[o.jsxs("div",{className:"grid gap-0 bg-gradient-to-r from-slate-100 to-slate-200 border-b border-gray-300 text-xs font-bold text-gray-700 text-center items-center h-10",style:{gridTemplateColumns:zr()},children:[qe.stock_code.visible&&o.jsxs("div",{className:"relative py-2 border-r border-gray-300 bg-indigo-100 text-indigo-700 select-none",children:["Stok Kodu",o.jsx("div",{onMouseDown:ie=>Qr(ie,"stock_code"),className:"absolute right-0 top-0 bottom-0 w-2 cursor-col-resize hover:bg-indigo-400 transition-colors"})]}),qe.name.visible&&o.jsxs("div",{className:"relative py-2 border-r border-gray-300 bg-emerald-100 text-emerald-700 select-none",children:["rn Ad",o.jsx("div",{onMouseDown:ie=>Qr(ie,"name"),className:"absolute right-0 top-0 bottom-0 w-2 cursor-col-resize hover:bg-emerald-400 transition-colors"})]}),qe.quantity.visible&&o.jsxs("div",{className:"relative py-2 border-r border-gray-300 bg-amber-100 text-amber-700 select-none",children:["Adet",o.jsx("div",{onMouseDown:ie=>Qr(ie,"quantity"),className:"absolute right-0 top-0 bottom-0 w-2 cursor-col-resize hover:bg-amber-400 transition-colors"})]}),qe.price.visible&&o.jsxs("div",{className:"relative py-2 border-r border-gray-300 bg-blue-100 text-blue-700 select-none",children:["Fiyat",o.jsx("div",{onMouseDown:ie=>Qr(ie,"price"),className:"absolute right-0 top-0 bottom-0 w-2 cursor-col-resize hover:bg-blue-400 transition-colors"})]}),qe.discount.visible&&o.jsxs("div",{className:"relative py-2 border-r border-gray-300 bg-rose-100 text-rose-600 select-none",children:["sk%",o.jsx("div",{onMouseDown:ie=>Qr(ie,"discount"),className:"absolute right-0 top-0 bottom-0 w-2 cursor-col-resize hover:bg-rose-400 transition-colors"})]}),qe.discounted_price.visible&&o.jsxs("div",{className:"relative py-2 border-r border-gray-300 bg-purple-100 text-purple-700 select-none",children:["sk.Sonras",o.jsx("div",{onMouseDown:ie=>Qr(ie,"discounted_price"),className:"absolute right-0 top-0 bottom-0 w-2 cursor-col-resize hover:bg-purple-400 transition-colors"})]}),qe.total.visible&&o.jsx("div",{className:"py-2 bg-yellow-100 text-yellow-800 select-none",children:"Toplam"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:E.map((ie,Se)=>{const Ze=ie.price*ie.quantity*(1-(ie.discount_rate||0)/100);return o.jsxs("div",{onClick:()=>A(Se),className:`grid gap-0 border-b border-gray-200 text-sm cursor-pointer transition-all duration-150 ${N===Se?"bg-blue-50 ring-2 ring-blue-400 ring-inset":"hover:bg-gray-50"}`,style:{gridTemplateColumns:zr()},children:[qe.stock_code.visible&&o.jsx("div",{className:`p-2 border-r border-gray-100 truncate ${_r(qe.stock_code)} ${N===Se?"":qe.stock_code.bg}`,children:ie.stock_code}),qe.name.visible&&o.jsx("div",{className:`p-2 border-r border-gray-100 truncate ${_r(qe.name)} ${N===Se?"":qe.name.bg}`,children:ie.name}),qe.quantity.visible&&o.jsx("div",{className:`p-2 border-r border-gray-100 text-center ${_r(qe.quantity)} ${N===Se?"":qe.quantity.bg}`,children:ie.quantity}),qe.price.visible&&o.jsx("div",{className:`p-2 border-r border-gray-100 text-right ${_r(qe.price)} ${N===Se?"":qe.price.bg}`,children:ie.price?.toFixed(2)}),qe.discount.visible&&o.jsxs("div",{className:`p-2 border-r border-gray-100 text-center ${_r(qe.discount)} ${N===Se?"":qe.discount.bg}`,children:[ie.discount_rate||0,"%"]}),qe.discounted_price.visible&&o.jsx("div",{className:`p-2 border-r border-gray-100 text-right ${_r(qe.discounted_price)} ${N===Se?"":qe.discounted_price.bg}`,children:(ie.price*(1-(ie.discount_rate||0)/100)).toFixed(2)}),qe.total.visible&&o.jsxs("div",{className:`p-2 text-right ${_r(qe.total)} ${N===Se?"":qe.total.bg}`,children:[Ze.toFixed(2)," "]})]},Se)})})]}),Te.show&&o.jsxs("div",{className:"fixed bg-white  shadow-2xl border border-gray-200 py-2 z-50 min-w-52 overflow-hidden",style:{left:Te.x,top:Te.y},children:[o.jsxs("button",{onClick:()=>{le({show:!1,x:0,y:0}),Ee(!0)},className:"w-full px-4 py-3 text-left hover:bg-gradient-to-r hover:from-violet-50 hover:to-purple-50 flex items-center gap-3 transition-all duration-200",children:[o.jsx("span",{className:"text-xl",children:""}),o.jsx("span",{className:"font-medium text-gray-700",children:"Sepeti Dzenle"})]}),mt&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"border-t border-gray-100 my-1"}),o.jsxs("button",{onClick:Xt,className:"w-full px-4 py-3 text-left hover:bg-gradient-to-r hover:from-green-50 hover:to-emerald-50 flex items-center gap-3 transition-all duration-200",children:[o.jsx("span",{className:"text-xl",children:""}),o.jsx("span",{className:"font-medium text-green-700",children:"Stun Geniliini Kaydet"})]})]})]}),o.jsxs("div",{className:"mt-2 space-y-2",children:[o.jsxs("div",{className:"bg-yellow-400 p-2  flex justify-between items-center px-4",children:[o.jsx("span",{className:"font-bold text-gray-900 text-lg",children:"TOPLAM:"}),o.jsxs("span",{className:"font-bold text-gray-900 text-2xl",children:[me().toFixed(2)," TL"]})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsxs("button",{onClick:()=>{N!==null&&(Ie(E[N].quantity),F(!0))},disabled:N===null,className:"h-14 bg-gray-200 text-gray-800  font-bold text-base hover:bg-gray-300 disabled:opacity-50 flex flex-col items-center justify-center leading-tight transition-all",children:["Adet",o.jsx("br",{}),"Deitir"]}),o.jsxs("button",{onClick:()=>{N!==null&&(Ie(E[N].discount_rate||0),H(!0))},disabled:N===null,className:"h-14 bg-gray-200 text-gray-800  font-bold text-base hover:bg-gray-300 disabled:opacity-50 flex flex-col items-center justify-center leading-tight transition-all",children:["skonto",o.jsx("br",{}),"Uygula"]}),o.jsxs("button",{onClick:()=>{N!==null&&(Ie(E[N].price),J(!0))},disabled:N===null,className:"h-14 bg-gray-200 text-gray-800  font-bold text-base hover:bg-gray-300 disabled:opacity-50 flex flex-col items-center justify-center leading-tight transition-all",children:["Fiyat",o.jsx("br",{}),"Dzenle"]}),o.jsxs("button",{onClick:()=>{N!==null&&Wn(N)},disabled:N===null,className:"h-14 bg-gray-200 text-gray-800  font-bold text-base hover:bg-gray-300 disabled:opacity-50 flex flex-col items-center justify-center leading-tight transition-all",children:["Satr",o.jsx("br",{}),"Sil"]})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsx("button",{onClick:()=>we("Nakit"),className:"h-14 bg-green-500 text-white  font-bold text-2xl hover:bg-green-600 shadow-lg hover:shadow-xl transition-all active:scale-95 flex flex-col items-center justify-center",children:"Nakit"}),o.jsx("button",{onClick:()=>we("POS"),className:"h-14 bg-blue-600 text-white  font-bold text-2xl hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all active:scale-95 flex flex-col items-center justify-center",children:"Kredi Kart"}),o.jsx("button",{onClick:()=>we("Ak Hesap"),className:"h-14 bg-orange-500 text-white  font-bold text-2xl hover:bg-orange-600 shadow-lg hover:shadow-xl transition-all active:scale-95 flex flex-col items-center justify-center",children:"Veresiye"}),o.jsx("button",{onClick:()=>{window.confirm("Sepeti temizlemek istiyor musunuz?")&&(k([]),I("Toptan Sat"))},className:"h-14 bg-red-600 text-white  font-bold text-2xl hover:bg-red-700 shadow-lg hover:shadow-xl transition-all active:scale-95 flex flex-col items-center justify-center",children:"ptal Et"})]})]})]}),o.jsxs("div",{className:"w-[65%] bg-white  shadow-md p-4 flex flex-col h-full overflow-hidden",children:[o.jsxs("div",{className:"flex gap-3 mb-4",children:[o.jsxs("div",{className:"flex-1 relative group",children:[o.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-violet-500 via-purple-500 to-pink-500  blur opacity-30 group-hover:opacity-60 group-focus-within:opacity-100 transition-all duration-500"}),o.jsxs("div",{className:"relative flex items-center bg-white/90 backdrop-blur-xl  border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.08)] overflow-hidden",children:[o.jsx("div",{className:"pl-5 pr-2",children:o.jsx("svg",{className:"w-6 h-6 text-gray-400 group-focus-within:text-violet-500 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsx("input",{ref:Ve,type:"text",value:g,onChange:ie=>m(ie.target.value),placeholder:"rn Ara...",className:"flex-1 py-4 pr-5 bg-transparent text-gray-800 text-lg font-medium placeholder:text-gray-400 placeholder:text-center focus:outline-none focus:placeholder:text-violet-400 transition-all duration-300"}),g&&o.jsx("button",{onClick:()=>m(""),className:"pr-4 text-gray-400 hover:text-violet-500 transition-colors duration-200",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),o.jsxs("button",{className:"px-6 py-4 bg-gradient-to-r from-violet-500 to-purple-600 text-white  font-bold shadow-lg shadow-purple-500/30 hover:shadow-xl hover:shadow-purple-500/40 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300 flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"Barkod Oku"]})]}),o.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(120px,1fr))] gap-2 mb-3",children:a.map(ie=>o.jsx("button",{onClick:()=>f(ie),className:`p-3 h-20 border-2  font-bold text-sm text-center transition-all ${u===ie?"bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-200 hover:border-blue-500 hover:text-blue-500"}`,children:ie},ie))}),o.jsx("div",{className:"flex-1 overflow-y-auto grid grid-cols-[repeat(auto-fill,minmax(120px,1fr))] gap-0 content-start",children:kt.map(ie=>o.jsxs("div",{onClick:()=>pr(ie),className:"h-28 border border-gray-200  cursor-pointer transition-all hover:shadow-lg hover:-translate-y-1 relative overflow-hidden bg-white",children:[ie.image_url?o.jsx("img",{src:ie.image_url,alt:"",className:"absolute inset-0 w-full h-full object-contain p-1"}):o.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-4xl text-gray-300",children:""}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-center",children:[o.jsx("div",{className:"text-xs font-semibold p-1 line-clamp-2",children:ie.name}),o.jsxs("div",{className:"text-sm font-bold pb-1",children:[ie.price?.toFixed(2)," TL"]})]})]},ie.id||ie.stock_code))})]})]}),B&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white  w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col shadow-2xl",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-600 px-6 py-5",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm  flex items-center justify-center",children:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-white",children:"Musteri Sec"}),o.jsxs("p",{className:"text-white/80 text-sm",children:[D.length," kayitli musteri"]})]})]}),o.jsx("button",{onClick:()=>L(!0),className:"ml-auto mr-4 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white font-bold  transition-colors text-sm shadow-lg shadow-orange-500/30 whitespace-nowrap",children:"Perakende Mteri smi Gir"}),o.jsx("button",{onClick:()=>U(!1),className:"w-10 h-10 bg-white/20 hover:bg-white/30  flex items-center justify-center transition-all",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"mt-4 relative",children:[o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2",children:o.jsx("svg",{className:"w-5 h-5 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsx("input",{type:"text",placeholder:"Musteri ara...",className:"w-full pl-12 pr-4 py-3 bg-white/20 backdrop-blur-sm text-white placeholder-blue-200  border border-white/30 focus:outline-none focus:bg-white/30 focus:border-white/50 transition-all"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-gradient-to-b from-gray-50 to-white",children:[o.jsx("div",{onClick:()=>{I("Toptan Satis"),U(!1)},className:"mb-3 p-4 bg-gradient-to-r from-emerald-500 to-green-500  cursor-pointer hover:shadow-lg transition-all group overflow-hidden",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-white/20  flex items-center justify-center flex-shrink-0",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"text-white font-bold text-lg truncate",children:"Toptan Satis"}),o.jsx("p",{className:"text-white/80 text-sm truncate",children:"Varsayilan satis tipi"})]}),o.jsx("svg",{className:"w-6 h-6 text-white/60 group-hover:text-white group-hover:translate-x-1 transition-all flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),D.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-indigo-100 -full flex items-center justify-center mb-4",children:o.jsx("svg",{className:"w-10 h-10 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),o.jsx("h4",{className:"text-lg font-bold text-gray-700 mb-2",children:"Musteri Bulunamadi"}),o.jsx("p",{className:"text-gray-500 max-w-xs",children:"Henuz kayitli musteri yok. Musteriler sayfasindan yeni musteri ekleyebilirsiniz."})]}):o.jsx("div",{className:"space-y-2",children:D.map((ie,Se)=>o.jsx("div",{onClick:()=>{I(ie.name),U(!1)},className:"bg-white  border border-gray-100 shadow-sm hover:shadow-lg hover:border-blue-200 transition-all duration-300 cursor-pointer overflow-hidden group",children:o.jsxs("div",{className:"p-4 flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-500  flex items-center justify-center flex-shrink-0 shadow-lg shadow-blue-500/20",children:o.jsx("span",{className:"text-white font-bold text-lg",children:ie.name?.charAt(0)?.toUpperCase()||"?"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-bold text-gray-800 text-lg truncate group-hover:text-blue-600 transition-colors",children:ie.name}),o.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[ie.phone&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),ie.phone]}),ie.address&&o.jsxs("span",{className:"flex items-center gap-1 truncate",children:[o.jsxs("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),o.jsx("span",{className:"truncate",children:ie.address})]})]})]}),ie.balance!==void 0&&ie.balance!==0&&o.jsxs("div",{className:"text-right flex-shrink-0",children:[o.jsx("p",{className:`text-lg font-bold ${ie.balance>0?"text-red-500":"text-green-500"}`,children:Math.abs(ie.balance).toFixed(2)}),o.jsx("p",{className:"text-xs text-gray-500",children:ie.balance>0?"Borc":"Alacak"})]}),o.jsx("svg",{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500 group-hover:translate-x-1 transition-all flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},ie.id))})]}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50/80 backdrop-blur-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:["Secili: ",o.jsx("span",{className:"font-bold text-gray-800",children:C})]}),o.jsxs("button",{onClick:()=>U(!1),className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold  hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg shadow-blue-500/30 flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Kapat"]})]})})]})}),X&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white  p-8 w-96 text-center",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Miktar Dzenle"}),o.jsx("p",{className:"text-gray-500 mb-4",children:E[N]?.name}),o.jsx("input",{type:"number",value:ve,onChange:ie=>Ie(ie.target.value),className:"w-full p-4 text-3xl text-center border-2 border-blue-500  mb-4 focus:outline-none",min:"1"}),o.jsx("button",{onClick:()=>br(N,"quantity",parseInt(ve)||1),className:"w-full p-4 bg-blue-500 text-white text-xl font-semibold  hover:bg-blue-600",children:"Kaydet"})]})}),Y&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white  p-8 w-96 text-center",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"skonto Ekle (%)"}),o.jsx("p",{className:"text-gray-500 mb-4",children:E[N]?.name}),o.jsx("input",{type:"number",value:ve,onChange:ie=>Ie(ie.target.value),className:"w-full p-4 text-3xl text-center border-2 border-blue-500  mb-4 focus:outline-none",min:"0",max:"100"}),o.jsx("button",{onClick:()=>br(N,"discount_rate",parseFloat(ve)||0),className:"w-full p-4 bg-blue-500 text-white text-xl font-semibold  hover:bg-blue-600",children:"Kaydet"})]})}),ce&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white  p-8 w-96 text-center",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Fiyat Dzenle"}),o.jsx("p",{className:"text-gray-500 mb-4",children:E[N]?.name}),o.jsx("input",{type:"number",step:"0.01",value:ve,onChange:ie=>Ie(ie.target.value),className:"w-full p-4 text-3xl text-center border-2 border-blue-500  mb-4 focus:outline-none",min:"0"}),o.jsx("button",{onClick:()=>br(N,"price",parseFloat(ve)||0),className:"w-full p-4 bg-blue-500 text-white text-xl font-semibold  hover:bg-blue-600",children:"Kaydet"})]})}),V&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white  w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col shadow-2xl",children:[o.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-amber-500 to-yellow-500 px-6 py-5",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm  flex items-center justify-center",children:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-white",children:"Bekleme Listesi"}),o.jsxs("p",{className:"text-white/80 text-sm",children:[W.length," adet bekleyen satis"]})]})]}),o.jsx("button",{onClick:()=>xe(!1),className:"w-10 h-10 bg-white/20 hover:bg-white/30  flex items-center justify-center transition-all",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gradient-to-b from-gray-50 to-white",children:W.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[o.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-orange-100 to-amber-100 -full flex items-center justify-center mb-6",children:o.jsx("svg",{className:"w-12 h-12 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),o.jsx("h4",{className:"text-xl font-bold text-gray-700 mb-2",children:"Bekleyen Satis Yok"}),o.jsx("p",{className:"text-gray-500 max-w-xs",children:'Bir satisi beklemeye almak icin sepete urun ekleyip "Beklemeye Al" butonuna basin.'})]}):o.jsx("div",{className:"space-y-3",children:W.map((ie,Se)=>{const Ne=ie.items?.reduce((gt,ht)=>{const wt=ht.price*ht.quantity,It=wt*(ht.discount_rate||0)/100;return gt+(wt-It)},0)||0,Ze=ie.created_at?new Date(ie.created_at):null,dt=Ze?Math.round((Date.now()-Ze.getTime())/6e4):null;return o.jsxs("div",{className:"bg-white  border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden group",children:[o.jsxs("div",{className:"p-4 flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-amber-500  flex items-center justify-center flex-shrink-0 shadow-lg shadow-orange-500/20",children:o.jsxs("span",{className:"text-white font-bold text-lg",children:["#",Se+1]})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h4",{className:"font-bold text-gray-800 text-lg truncate",children:ie.customer_name||"Genel Musteri"}),dt!==null&&dt<60&&o.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium -full",children:"Yeni"})]}),o.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),ie.items?.length||0," urun"]}),dt!==null&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),dt<60?`${dt} dk once`:`${Math.round(dt/60)} saat once`]})]})]}),o.jsxs("div",{className:"text-right flex-shrink-0",children:[o.jsx("p",{className:"text-2xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:Ne.toFixed(2)}),o.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"TL"})]})]}),o.jsx("div",{className:"px-4 pb-2",children:o.jsxs("div",{className:"flex flex-wrap gap-1",children:[ie.items?.slice(0,3).map((gt,ht)=>o.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs  truncate max-w-[140px]",children:[gt.quantity,"x ",gt.name]},ht)),ie.items?.length>3&&o.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-600 text-xs  font-medium",children:["+",ie.items.length-3," daha"]})]})}),o.jsxs("div",{className:"flex border-t border-gray-100",children:[o.jsxs("button",{onClick:()=>Ye(ie),className:"flex-1 py-3.5 text-green-600 font-bold hover:bg-green-50 transition-colors flex items-center justify-center gap-2 text-base",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Geri Yukle"]}),o.jsx("div",{className:"w-px bg-gray-100"}),o.jsxs("button",{onClick:()=>{confirm("Bu bekleyen satisi silmek istediginize emin misiniz?")&&ct(ie.id)},className:"flex-1 py-3.5 text-red-500 font-bold hover:bg-red-50 transition-colors flex items-center justify-center gap-2 text-base",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Sil"]})]})]},ie.id)})})}),W.length>0&&o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50/80 backdrop-blur-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:["Toplam bekleyen tutar: ",o.jsxs("span",{className:"font-bold text-gray-800",children:[W.reduce((ie,Se)=>ie+(Se.items?.reduce((Ne,Ze)=>{const dt=Ze.price*Ze.quantity,gt=dt*(Ze.discount_rate||0)/100;return Ne+(dt-gt)},0)||0),0).toFixed(2)," TL"]})]}),o.jsx("button",{onClick:()=>xe(!1),className:"px-6 py-2.5 bg-gray-200 text-gray-700 font-semibold  hover:bg-gray-300 transition-colors",children:"Kapat"})]})})]})}),pe&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white  p-6 w-96 shadow-2xl",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:"Miktar Giriniz"}),o.jsx("div",{className:"mb-2 text-center font-medium text-gray-600",children:et?.name}),o.jsxs("form",{onSubmit:Fr,children:[o.jsx("input",{type:"number",value:Be,onChange:ie=>Pe(ie.target.value),className:"w-full p-4 text-3xl text-center border-2 border-blue-500  mb-4 focus:outline-none font-bold",min:"0.01",step:"any",autoFocus:!0,onFocus:ie=>ie.target.select()}),o.jsx("button",{type:"submit",className:"w-full p-4 bg-green-500 text-white text-xl font-bold  hover:bg-green-600 transition-colors",children:"Ekle (Enter)"})]})]})}),re&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center z-[60] p-4",children:o.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-300",children:[o.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-10 py-8",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center shadow-lg shadow-orange-500/30",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-3xl font-bold text-white tracking-tight",children:"Perakende Mteri"}),o.jsx("p",{className:"text-slate-400 text-base mt-1",children:"Hzl sat iin bilgileri doldurun"})]})]})}),o.jsxs("form",{onSubmit:Mt,className:"p-10 space-y-6 bg-gradient-to-b from-slate-50 to-white",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["sim Soyisim ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsx("input",{type:"text",name:"name",value:P.name,onChange:Rt,className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-amber-500/20 focus:border-amber-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Mteri adn giriniz...",required:!0,autoFocus:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"TC Kimlik / Vergi Numaras"}),o.jsx("input",{type:"text",name:"tax_number",value:P.tax_number,onChange:Rt,className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-amber-500/20 focus:border-amber-500 outline-none transition-all placeholder:text-slate-400 font-mono tracking-wider",placeholder:"11111111111"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Adres"}),o.jsx("textarea",{name:"address",value:P.address,onChange:Rt,rows:"3",className:"w-full px-6 py-5 text-lg rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-amber-500/20 focus:border-amber-500 outline-none transition-all resize-none placeholder:text-slate-400",placeholder:"Adres bilgisi..."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Telefon"}),o.jsx("input",{type:"tel",name:"phone",value:P.phone,onChange:Rt,className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-amber-500/20 focus:border-amber-500 outline-none transition-all placeholder:text-slate-400",placeholder:"0532 xxx xx xx"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Vergi Dairesi"}),o.jsx("input",{type:"text",name:"tax_office",value:P.tax_office,onChange:Rt,className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-amber-500/20 focus:border-amber-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Vergi dairesi ad..."})]}),o.jsxs("div",{className:"flex gap-4 pt-6",children:[o.jsx("button",{type:"button",onClick:()=>L(!1),className:"flex-1 py-5 text-lg font-bold text-slate-600 bg-slate-100 rounded-2xl hover:bg-slate-200 transition-all active:scale-[0.98]",children:"ptal"}),o.jsx("button",{type:"submit",className:"flex-[2] py-5 text-xl font-bold text-white bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl hover:from-amber-600 hover:to-orange-600 shadow-xl shadow-orange-500/30 transition-all hover:scale-[1.01] active:scale-[0.99]",children:" Tamamla"})]})]})]})}),de&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white  shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"bg-gradient-to-r from-violet-500 to-purple-600 p-6 flex-shrink-0",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[o.jsx("span",{children:""})," Sepeti Dzenle"]}),o.jsx("button",{onClick:()=>{Ee(!1),Fe(null)},className:"text-white/80 hover:text-white text-3xl transition-colors",children:""})]}),o.jsx("p",{className:"text-white/70 text-sm mt-2",children:"Stun grnrl ve font ayarlarn yaplandrn"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:Object.entries(qe).map(([ie,Se])=>o.jsxs("div",{className:"border border-gray-200  overflow-hidden",children:[o.jsxs("div",{className:`flex items-center gap-3 p-4 cursor-pointer transition-all duration-200 ${Se.visible?"bg-violet-50":"bg-gray-50"}`,children:[o.jsx("input",{type:"checkbox",checked:Se.visible,onChange:()=>Yt(ie),className:"w-5 h-5 text-violet-600  focus:ring-violet-500 focus:ring-2"}),o.jsx("span",{className:`flex-1 font-medium ${Se.visible?"text-violet-700":"text-gray-500"}`,children:Se.label}),o.jsx("div",{className:`px-3 py-1  bg-white border shadow-sm ${_r(Se)}`,children:"rnek"}),o.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),Fe(at===ie?null:ie)},className:`p-2  transition-all duration-200 ${at===ie?"bg-violet-200 text-violet-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:"Font Ayarlar",children:o.jsx("svg",{className:`w-5 h-5 transition-transform duration-200 ${at===ie?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),at===ie&&o.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200 space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx("span",{children:""})," Yaz Bykl"]}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:He.map(Ne=>o.jsx("button",{onClick:()=>or(ie,"fontSize",Ne.value),className:`py-2 px-3  text-sm font-medium transition-all ${Se.fontSize===Ne.value?"bg-violet-500 text-white shadow-md":"bg-white border border-gray-200 text-gray-700 hover:border-violet-300"}`,children:Ne.label},Ne.value))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx("span",{children:""})," Kaln Yaz"]}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:je.map(Ne=>o.jsx("button",{onClick:()=>or(ie,"fontWeight",Ne.value),className:`py-2 px-3  text-sm transition-all ${Se.fontWeight===Ne.value?"bg-violet-500 text-white shadow-md":"bg-white border border-gray-200 text-gray-700 hover:border-violet-300"}`,style:{fontWeight:Ne.value.replace("font-","")},children:Ne.label},Ne.value))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx("span",{children:""})," Yaz Rengi"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Ke.map(Ne=>o.jsx("button",{onClick:()=>or(ie,"textColor",Ne.value),className:`w-8 h-8 -full border-2 transition-all hover:scale-110 ${Se.textColor===Ne.value?"border-gray-800 ring-2 ring-violet-400 ring-offset-2":"border-gray-300"}`,style:{backgroundColor:Ne.hex},title:Ne.label},Ne.value))})]})]})]},ie))}),o.jsxs("div",{className:"p-4 border-t border-gray-200 flex gap-3 flex-shrink-0 bg-white",children:[o.jsx("button",{onClick:()=>{Dt(it),Fe(null)},className:"flex-1 py-3 bg-gray-100 text-gray-700  font-semibold hover:bg-gray-200 transition-colors",children:"Varsaylana Dn"}),o.jsx("button",{onClick:()=>{Ee(!1),Fe(null)},className:"flex-1 py-3 bg-gradient-to-r from-violet-500 to-purple-600 text-white  font-semibold hover:from-violet-600 hover:to-purple-700 transition-all shadow-lg",children:"Tamam"})]})]})}),o.jsx("style",{jsx:!0,children:`
        .menu-btn {
          display: flex;
          align-items: center;
          padding: 10px 16px;
          background-color: #e9f2ff;
          color: #007bff;
          border: none;
          border-radius: 8px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
          text-decoration: none;
        }
        .menu-btn:hover {
          background-color: #007bff;
          color: white;
          transform: translateY(-2px);
          box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
      `})]})}var Ft;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ft||(Ft={}));var Ly=new Map([[Ft.QR_CODE,"QR_CODE"],[Ft.AZTEC,"AZTEC"],[Ft.CODABAR,"CODABAR"],[Ft.CODE_39,"CODE_39"],[Ft.CODE_93,"CODE_93"],[Ft.CODE_128,"CODE_128"],[Ft.DATA_MATRIX,"DATA_MATRIX"],[Ft.MAXICODE,"MAXICODE"],[Ft.ITF,"ITF"],[Ft.EAN_13,"EAN_13"],[Ft.EAN_8,"EAN_8"],[Ft.PDF_417,"PDF_417"],[Ft.RSS_14,"RSS_14"],[Ft.RSS_EXPANDED,"RSS_EXPANDED"],[Ft.UPC_A,"UPC_A"],[Ft.UPC_E,"UPC_E"],[Ft.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),By;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(By||(By={}));function Aj(e){return Object.values(Ft).includes(e)}var i1;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(i1||(i1={}));var Nj=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[i1.SCAN_TYPE_CAMERA,i1.SCAN_TYPE_FILE],e})(),ak=(function(){function e(r,t){this.format=r,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(r){if(!Ly.has(r))throw"".concat(r," not in html5QrcodeSupportedFormatsTextMap");return new e(r,Ly.get(r))},e})(),Py=(function(){function e(){}return e.createFromText=function(r){var t={text:r};return{decodedText:r,result:t}},e.createFromQrcodeResult=function(r){return{decodedText:r.text,result:r}},e})(),Qg;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Qg||(Qg={}));var Cj=(function(){function e(){}return e.createFrom=function(r){return{errorMessage:r,type:Qg.UNKWOWN_ERROR}},e})(),Tj=(function(){function e(r){this.verbose=r}return e.prototype.log=function(r){this.verbose&&console.log(r)},e.prototype.warn=function(r){this.verbose&&console.warn(r)},e.prototype.logError=function(r,t){(this.verbose||t===!0)&&console.error(r)},e.prototype.logErrors=function(r){if(r.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(r)},e})();function ml(e){return typeof e>"u"||e===null}var N0=(function(){function e(){}return e.codeParseError=function(r){return"QR code parse error, error = ".concat(r)},e.errorGettingUserMedia=function(r){return"Error getting userMedia, error = ".concat(r)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),sk=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(r,t){if(typeof r!="object"){var n=typeof r;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(a),u=Object.keys(r),f=0,g=u;f<g.length;f++){var m=g[f];if(i.has(m))return t.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},e})(),Yu={exports:{}},jj=Yu.exports,Uy;function Rj(){return Uy||(Uy=1,(function(e,r){(function(t,n){n(r)})(jj,(function(t){function n(ee){return ee==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,l){ee.__proto__=l}||function(ee,l){for(var d in l)l.hasOwnProperty(d)&&(ee[d]=l[d])};function i(ee,l){a(ee,l);function d(){this.constructor=ee}ee.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}function u(ee,l){var d=Object.setPrototypeOf;d?d(ee,l):ee.__proto__=l}function f(ee,l){l===void 0&&(l=ee.constructor);var d=Error.captureStackTrace;d&&d(ee,l)}var g=(function(ee){i(l,ee);function l(d){var h=this.constructor,p=ee.call(this,d)||this;return Object.defineProperty(p,"name",{value:h.name,enumerable:!1}),u(p,h.prototype),f(p),p}return l})(Error);class m extends g{constructor(l=void 0){super(l),this.message=l}getKind(){return this.constructor.kind}}m.kind="Exception";class w extends m{}w.kind="ArgumentException";class _ extends m{}_.kind="IllegalArgumentException";class E{constructor(l){if(this.binarizer=l,l===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(l,d){return this.binarizer.getBlackRow(l,d)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(l,d,h,p){const b=this.binarizer.getLuminanceSource().crop(l,d,h,p);return new E(this.binarizer.createBinarizer(b))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new E(this.binarizer.createBinarizer(l))}rotateCounterClockwise45(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new E(this.binarizer.createBinarizer(l))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends m{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class N{constructor(l){this.source=l}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class A{static arraycopy(l,d,h,p,b){for(;b--;)h[p++]=l[d++]}static currentTimeMillis(){return Date.now()}}class C extends m{}C.kind="IndexOutOfBoundsException";class I extends C{constructor(l=void 0,d=void 0){super(d),this.index=l,this.message=d}}I.kind="ArrayIndexOutOfBoundsException";class D{static fill(l,d){for(let h=0,p=l.length;h<p;h++)l[h]=d}static fillWithin(l,d,h,p){D.rangeCheck(l.length,d,h);for(let b=d;b<h;b++)l[b]=p}static rangeCheck(l,d,h){if(d>h)throw new _("fromIndex("+d+") > toIndex("+h+")");if(d<0)throw new I(d);if(h>l)throw new I(h)}static asList(...l){return l}static create(l,d,h){return Array.from({length:l}).map(b=>Array.from({length:d}).fill(h))}static createInt32Array(l,d,h){return Array.from({length:l}).map(b=>Int32Array.from({length:d}).fill(h))}static equals(l,d){if(!l||!d||!l.length||!d.length||l.length!==d.length)return!1;for(let h=0,p=l.length;h<p;h++)if(l[h]!==d[h])return!1;return!0}static hashCode(l){if(l===null)return 0;let d=1;for(const h of l)d=31*d+h;return d}static fillUint8Array(l,d){for(let h=0;h!==l.length;h++)l[h]=d}static copyOf(l,d){return l.slice(0,d)}static copyOfUint8Array(l,d){if(l.length<=d){const h=new Uint8Array(d);return h.set(l),h}return l.slice(0,d)}static copyOfRange(l,d,h){const p=h-d,b=new Int32Array(p);return A.arraycopy(l,d,b,0,p),b}static binarySearch(l,d,h){h===void 0&&(h=D.numberComparator);let p=0,b=l.length-1;for(;p<=b;){const y=b+p>>1,S=h(d,l[y]);if(S>0)p=y+1;else if(S<0)b=y-1;else return y}return-p-1}static numberComparator(l,d){return l-d}}class O{static numberOfTrailingZeros(l){let d;if(l===0)return 32;let h=31;return d=l<<16,d!==0&&(h-=16,l=d),d=l<<8,d!==0&&(h-=8,l=d),d=l<<4,d!==0&&(h-=4,l=d),d=l<<2,d!==0&&(h-=2,l=d),h-(l<<1>>>31)}static numberOfLeadingZeros(l){if(l===0)return 32;let d=1;return l>>>16||(d+=16,l<<=16),l>>>24||(d+=8,l<<=8),l>>>28||(d+=4,l<<=4),l>>>30||(d+=2,l<<=2),d-=l>>>31,d}static toHexString(l){return l.toString(16)}static toBinaryString(l){return String(parseInt(String(l),2))}static bitCount(l){return l=l-(l>>>1&1431655765),l=(l&858993459)+(l>>>2&858993459),l=l+(l>>>4)&252645135,l=l+(l>>>8),l=l+(l>>>16),l&63}static truncDivision(l,d){return Math.trunc(l/d)}static parseInt(l,d=void 0){return parseInt(l,d)}}O.MIN_VALUE_32_BITS=-2147483648,O.MAX_VALUE=Number.MAX_SAFE_INTEGER;class B{constructor(l,d){l===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=l,d==null?this.bits=B.makeArray(l):this.bits=d)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(l){if(l>this.bits.length*32){const d=B.makeArray(l);A.arraycopy(this.bits,0,d,0,this.bits.length),this.bits=d}}get(l){return(this.bits[Math.floor(l/32)]&1<<(l&31))!==0}set(l){this.bits[Math.floor(l/32)]|=1<<(l&31)}flip(l){this.bits[Math.floor(l/32)]^=1<<(l&31)}getNextSet(l){const d=this.size;if(l>=d)return d;const h=this.bits;let p=Math.floor(l/32),b=h[p];b&=~((1<<(l&31))-1);const y=h.length;for(;b===0;){if(++p===y)return d;b=h[p]}const S=p*32+O.numberOfTrailingZeros(b);return S>d?d:S}getNextUnset(l){const d=this.size;if(l>=d)return d;const h=this.bits;let p=Math.floor(l/32),b=~h[p];b&=~((1<<(l&31))-1);const y=h.length;for(;b===0;){if(++p===y)return d;b=~h[p]}const S=p*32+O.numberOfTrailingZeros(b);return S>d?d:S}setBulk(l,d){this.bits[Math.floor(l/32)]=d}setRange(l,d){if(d<l||l<0||d>this.size)throw new _;if(d===l)return;d--;const h=Math.floor(l/32),p=Math.floor(d/32),b=this.bits;for(let y=h;y<=p;y++){const S=y>h?0:l&31,M=(2<<(y<p?31:d&31))-(1<<S);b[y]|=M}}clear(){const l=this.bits.length,d=this.bits;for(let h=0;h<l;h++)d[h]=0}isRange(l,d,h){if(d<l||l<0||d>this.size)throw new _;if(d===l)return!0;d--;const p=Math.floor(l/32),b=Math.floor(d/32),y=this.bits;for(let S=p;S<=b;S++){const j=S>p?0:l&31,G=(2<<(S<b?31:d&31))-(1<<j)&4294967295;if((y[S]&G)!==(h?G:0))return!1}return!0}appendBit(l){this.ensureCapacity(this.size+1),l&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(l,d){if(d<0||d>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+d);for(let h=d;h>0;h--)this.appendBit((l>>h-1&1)===1)}appendBitArray(l){const d=l.size;this.ensureCapacity(this.size+d);for(let h=0;h<d;h++)this.appendBit(l.get(h))}xor(l){if(this.size!==l.size)throw new _("Sizes don't match");const d=this.bits;for(let h=0,p=d.length;h<p;h++)d[h]^=l.bits[h]}toBytes(l,d,h,p){for(let b=0;b<p;b++){let y=0;for(let S=0;S<8;S++)this.get(l)&&(y|=1<<7-S),l++;d[h+b]=y}}getBitArray(){return this.bits}reverse(){const l=new Int32Array(this.bits.length),d=Math.floor((this.size-1)/32),h=d+1,p=this.bits;for(let b=0;b<h;b++){let y=p[b];y=y>>1&1431655765|(y&1431655765)<<1,y=y>>2&858993459|(y&858993459)<<2,y=y>>4&252645135|(y&252645135)<<4,y=y>>8&16711935|(y&16711935)<<8,y=y>>16&65535|(y&65535)<<16,l[d-b]=y}if(this.size!==h*32){const b=h*32-this.size;let y=l[0]>>>b;for(let S=1;S<h;S++){const j=l[S];y|=j<<32-b,l[S-1]=y,y=j>>>b}l[h-1]=y}this.bits=l}static makeArray(l){return new Int32Array(Math.floor((l+31)/32))}equals(l){if(!(l instanceof B))return!1;const d=l;return this.size===d.size&&D.equals(this.bits,d.bits)}hashCode(){return 31*this.size+D.hashCode(this.bits)}toString(){let l="";for(let d=0,h=this.size;d<h;d++)(d&7)===0&&(l+=" "),l+=this.get(d)?"X":".";return l}clone(){return new B(this.size,this.bits.slice())}}var U;(function(ee){ee[ee.OTHER=0]="OTHER",ee[ee.PURE_BARCODE=1]="PURE_BARCODE",ee[ee.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",ee[ee.TRY_HARDER=3]="TRY_HARDER",ee[ee.CHARACTER_SET=4]="CHARACTER_SET",ee[ee.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",ee[ee.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",ee[ee.ASSUME_GS1=7]="ASSUME_GS1",ee[ee.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",ee[ee.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",ee[ee.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(U||(U={}));var X=U;class F extends m{static getFormatInstance(){return new F}}F.kind="FormatException";var Y;(function(ee){ee[ee.Cp437=0]="Cp437",ee[ee.ISO8859_1=1]="ISO8859_1",ee[ee.ISO8859_2=2]="ISO8859_2",ee[ee.ISO8859_3=3]="ISO8859_3",ee[ee.ISO8859_4=4]="ISO8859_4",ee[ee.ISO8859_5=5]="ISO8859_5",ee[ee.ISO8859_6=6]="ISO8859_6",ee[ee.ISO8859_7=7]="ISO8859_7",ee[ee.ISO8859_8=8]="ISO8859_8",ee[ee.ISO8859_9=9]="ISO8859_9",ee[ee.ISO8859_10=10]="ISO8859_10",ee[ee.ISO8859_11=11]="ISO8859_11",ee[ee.ISO8859_13=12]="ISO8859_13",ee[ee.ISO8859_14=13]="ISO8859_14",ee[ee.ISO8859_15=14]="ISO8859_15",ee[ee.ISO8859_16=15]="ISO8859_16",ee[ee.SJIS=16]="SJIS",ee[ee.Cp1250=17]="Cp1250",ee[ee.Cp1251=18]="Cp1251",ee[ee.Cp1252=19]="Cp1252",ee[ee.Cp1256=20]="Cp1256",ee[ee.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",ee[ee.UTF8=22]="UTF8",ee[ee.ASCII=23]="ASCII",ee[ee.Big5=24]="Big5",ee[ee.GB18030=25]="GB18030",ee[ee.EUC_KR=26]="EUC_KR"})(Y||(Y={}));class H{constructor(l,d,h,...p){this.valueIdentifier=l,this.name=h,typeof d=="number"?this.values=Int32Array.from([d]):this.values=d,this.otherEncodingNames=p,H.VALUE_IDENTIFIER_TO_ECI.set(l,this),H.NAME_TO_ECI.set(h,this);const b=this.values;for(let y=0,S=b.length;y!==S;y++){const j=b[y];H.VALUES_TO_ECI.set(j,this)}for(const y of p)H.NAME_TO_ECI.set(y,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(l){if(l<0||l>=900)throw new F("incorect value");const d=H.VALUES_TO_ECI.get(l);if(d===void 0)throw new F("incorect value");return d}static getCharacterSetECIByName(l){const d=H.NAME_TO_ECI.get(l);if(d===void 0)throw new F("incorect value");return d}equals(l){if(!(l instanceof H))return!1;const d=l;return this.getName()===d.getName()}}H.VALUE_IDENTIFIER_TO_ECI=new Map,H.VALUES_TO_ECI=new Map,H.NAME_TO_ECI=new Map,H.Cp437=new H(Y.Cp437,Int32Array.from([0,2]),"Cp437"),H.ISO8859_1=new H(Y.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),H.ISO8859_2=new H(Y.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),H.ISO8859_3=new H(Y.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),H.ISO8859_4=new H(Y.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),H.ISO8859_5=new H(Y.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),H.ISO8859_6=new H(Y.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),H.ISO8859_7=new H(Y.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),H.ISO8859_8=new H(Y.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),H.ISO8859_9=new H(Y.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),H.ISO8859_10=new H(Y.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),H.ISO8859_11=new H(Y.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),H.ISO8859_13=new H(Y.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),H.ISO8859_14=new H(Y.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),H.ISO8859_15=new H(Y.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),H.ISO8859_16=new H(Y.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),H.SJIS=new H(Y.SJIS,20,"SJIS","Shift_JIS"),H.Cp1250=new H(Y.Cp1250,21,"Cp1250","windows-1250"),H.Cp1251=new H(Y.Cp1251,22,"Cp1251","windows-1251"),H.Cp1252=new H(Y.Cp1252,23,"Cp1252","windows-1252"),H.Cp1256=new H(Y.Cp1256,24,"Cp1256","windows-1256"),H.UnicodeBigUnmarked=new H(Y.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),H.UTF8=new H(Y.UTF8,26,"UTF8","UTF-8"),H.ASCII=new H(Y.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),H.Big5=new H(Y.Big5,28,"Big5"),H.GB18030=new H(Y.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),H.EUC_KR=new H(Y.EUC_KR,30,"EUC_KR","EUC-KR");class ce extends m{}ce.kind="UnsupportedOperationException";class J{static decode(l,d){const h=this.encodingName(d);return this.customDecoder?this.customDecoder(l,h):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(h)?this.decodeFallback(l,h):new TextDecoder(h).decode(l)}static shouldDecodeOnFallback(l){return!J.isBrowser()&&l==="ISO-8859-1"}static encode(l,d){const h=this.encodingName(d);return this.customEncoder?this.customEncoder(l,h):typeof TextEncoder>"u"?this.encodeFallback(l):new TextEncoder().encode(l)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(l){return typeof l=="string"?l:l.getName()}static encodingCharacterSet(l){return l instanceof H?l:H.getCharacterSetECIByName(l)}static decodeFallback(l,d){const h=this.encodingCharacterSet(d);if(J.isDecodeFallbackSupported(h)){let p="";for(let b=0,y=l.length;b<y;b++){let S=l[b].toString(16);S.length<2&&(S="0"+S),p+="%"+S}return decodeURIComponent(p)}if(h.equals(H.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(l.buffer));throw new ce(`Encoding ${this.encodingName(d)} not supported by fallback.`)}static isDecodeFallbackSupported(l){return l.equals(H.UTF8)||l.equals(H.ISO8859_1)||l.equals(H.ASCII)}static encodeFallback(l){const h=btoa(unescape(encodeURIComponent(l))).split(""),p=[];for(let b=0;b<h.length;b++)p.push(h[b].charCodeAt(0));return new Uint8Array(p)}}class V{static castAsNonUtf8Char(l,d=null){const h=d?d.getName():this.ISO88591;return J.decode(new Uint8Array([l]),h)}static guessEncoding(l,d){if(d!=null&&d.get(X.CHARACTER_SET)!==void 0)return d.get(X.CHARACTER_SET).toString();const h=l.length;let p=!0,b=!0,y=!0,S=0,j=0,M=0,G=0,te=0,se=0,ke=0,Ce=0,Re=0,Ge=0,rt=0;const Et=l.length>3&&l[0]===239&&l[1]===187&&l[2]===191;for(let _t=0;_t<h&&(p||b||y);_t++){const yt=l[_t]&255;y&&(S>0?(yt&128)===0?y=!1:S--:(yt&128)!==0&&((yt&64)===0?y=!1:(S++,(yt&32)===0?j++:(S++,(yt&16)===0?M++:(S++,(yt&8)===0?G++:y=!1))))),p&&(yt>127&&yt<160?p=!1:yt>159&&(yt<192||yt===215||yt===247)&&rt++),b&&(te>0?yt<64||yt===127||yt>252?b=!1:te--:yt===128||yt===160||yt>239?b=!1:yt>160&&yt<224?(se++,Ce=0,ke++,ke>Re&&(Re=ke)):yt>127?(te++,ke=0,Ce++,Ce>Ge&&(Ge=Ce)):(ke=0,Ce=0))}return y&&S>0&&(y=!1),b&&te>0&&(b=!1),y&&(Et||j+M+G>0)?V.UTF8:b&&(V.ASSUME_SHIFT_JIS||Re>=3||Ge>=3)?V.SHIFT_JIS:p&&b?Re===2&&se===2||rt*10>=h?V.SHIFT_JIS:V.ISO88591:p?V.ISO88591:b?V.SHIFT_JIS:y?V.UTF8:V.PLATFORM_DEFAULT_ENCODING}static format(l,...d){let h=-1;function p(y,S,j,M,G,te){if(y==="%%")return"%";if(d[++h]===void 0)return;y=M?parseInt(M.substr(1)):void 0;let se=G?parseInt(G.substr(1)):void 0,ke;switch(te){case"s":ke=d[h];break;case"c":ke=d[h][0];break;case"f":ke=parseFloat(d[h]).toFixed(y);break;case"p":ke=parseFloat(d[h]).toPrecision(y);break;case"e":ke=parseFloat(d[h]).toExponential(y);break;case"x":ke=parseInt(d[h]).toString(se||16);break;case"d":ke=parseFloat(parseInt(d[h],se||10).toPrecision(y)).toFixed(0);break}ke=typeof ke=="object"?JSON.stringify(ke):(+ke).toString(se);let Ce=parseInt(j),Re=j&&j[0]+""=="0"?"0":" ";for(;ke.length<Ce;)ke=S!==void 0?ke+Re:Re+ke;return ke}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(b,p)}static getBytes(l,d){return J.encode(l,d)}static getCharCode(l,d=0){return l.charCodeAt(d)}static getCharAt(l){return String.fromCharCode(l)}}V.SHIFT_JIS=H.SJIS.getName(),V.GB2312="GB2312",V.ISO88591=H.ISO8859_1.getName(),V.EUC_JP="EUC_JP",V.UTF8=H.UTF8.getName(),V.PLATFORM_DEFAULT_ENCODING=V.UTF8,V.ASSUME_SHIFT_JIS=!1;class xe{constructor(l=""){this.value=l}enableDecoding(l){return this.encoding=l,this}append(l){return typeof l=="string"?this.value+=l.toString():this.encoding?this.value+=V.castAsNonUtf8Char(l,this.encoding):this.value+=String.fromCharCode(l),this}appendChars(l,d,h){for(let p=d;d<d+h;p++)this.append(l[p]);return this}length(){return this.value.length}charAt(l){return this.value.charAt(l)}deleteCharAt(l){this.value=this.value.substr(0,l)+this.value.substring(l+1)}setCharAt(l,d){this.value=this.value.substr(0,l)+d+this.value.substr(l+1)}substring(l,d){return this.value.substring(l,d)}setLengthToZero(){this.value=""}toString(){return this.value}insert(l,d){this.value=this.value.substr(0,l)+d+this.value.substr(l+d.length)}}class W{constructor(l,d,h,p){if(this.width=l,this.height=d,this.rowSize=h,this.bits=p,d==null&&(d=l),this.height=d,l<1||d<1)throw new _("Both dimensions must be greater than 0");h==null&&(h=Math.floor((l+31)/32)),this.rowSize=h,p==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(l){const d=l.length,h=l[0].length,p=new W(h,d);for(let b=0;b<d;b++){const y=l[b];for(let S=0;S<h;S++)y[S]&&p.set(S,b)}return p}static parseFromString(l,d,h){if(l===null)throw new _("stringRepresentation cannot be null");const p=new Array(l.length);let b=0,y=0,S=-1,j=0,M=0;for(;M<l.length;)if(l.charAt(M)===`
`||l.charAt(M)==="\r"){if(b>y){if(S===-1)S=b-y;else if(b-y!==S)throw new _("row lengths do not match");y=b,j++}M++}else if(l.substring(M,M+d.length)===d)M+=d.length,p[b]=!0,b++;else if(l.substring(M,M+h.length)===h)M+=h.length,p[b]=!1,b++;else throw new _("illegal character encountered: "+l.substring(M));if(b>y){if(S===-1)S=b-y;else if(b-y!==S)throw new _("row lengths do not match");j++}const G=new W(S,j);for(let te=0;te<b;te++)p[te]&&G.set(Math.floor(te%S),Math.floor(te/S));return G}get(l,d){const h=d*this.rowSize+Math.floor(l/32);return(this.bits[h]>>>(l&31)&1)!==0}set(l,d){const h=d*this.rowSize+Math.floor(l/32);this.bits[h]|=1<<(l&31)&4294967295}unset(l,d){const h=d*this.rowSize+Math.floor(l/32);this.bits[h]&=~(1<<(l&31)&4294967295)}flip(l,d){const h=d*this.rowSize+Math.floor(l/32);this.bits[h]^=1<<(l&31)&4294967295}xor(l){if(this.width!==l.getWidth()||this.height!==l.getHeight()||this.rowSize!==l.getRowSize())throw new _("input matrix dimensions do not match");const d=new B(Math.floor(this.width/32)+1),h=this.rowSize,p=this.bits;for(let b=0,y=this.height;b<y;b++){const S=b*h,j=l.getRow(b,d).getBitArray();for(let M=0;M<h;M++)p[S+M]^=j[M]}}clear(){const l=this.bits,d=l.length;for(let h=0;h<d;h++)l[h]=0}setRegion(l,d,h,p){if(d<0||l<0)throw new _("Left and top must be nonnegative");if(p<1||h<1)throw new _("Height and width must be at least 1");const b=l+h,y=d+p;if(y>this.height||b>this.width)throw new _("The region must fit inside the matrix");const S=this.rowSize,j=this.bits;for(let M=d;M<y;M++){const G=M*S;for(let te=l;te<b;te++)j[G+Math.floor(te/32)]|=1<<(te&31)&4294967295}}getRow(l,d){d==null||d.getSize()<this.width?d=new B(this.width):d.clear();const h=this.rowSize,p=this.bits,b=l*h;for(let y=0;y<h;y++)d.setBulk(y*32,p[b+y]);return d}setRow(l,d){A.arraycopy(d.getBitArray(),0,this.bits,l*this.rowSize,this.rowSize)}rotate180(){const l=this.getWidth(),d=this.getHeight();let h=new B(l),p=new B(l);for(let b=0,y=Math.floor((d+1)/2);b<y;b++)h=this.getRow(b,h),p=this.getRow(d-1-b,p),h.reverse(),p.reverse(),this.setRow(b,p),this.setRow(d-1-b,h)}getEnclosingRectangle(){const l=this.width,d=this.height,h=this.rowSize,p=this.bits;let b=l,y=d,S=-1,j=-1;for(let M=0;M<d;M++)for(let G=0;G<h;G++){const te=p[M*h+G];if(te!==0){if(M<y&&(y=M),M>j&&(j=M),G*32<b){let se=0;for(;(te<<31-se&4294967295)===0;)se++;G*32+se<b&&(b=G*32+se)}if(G*32+31>S){let se=31;for(;!(te>>>se);)se--;G*32+se>S&&(S=G*32+se)}}}return S<b||j<y?null:Int32Array.from([b,y,S-b+1,j-y+1])}getTopLeftOnBit(){const l=this.rowSize,d=this.bits;let h=0;for(;h<d.length&&d[h]===0;)h++;if(h===d.length)return null;const p=h/l;let b=h%l*32;const y=d[h];let S=0;for(;(y<<31-S&4294967295)===0;)S++;return b+=S,Int32Array.from([b,p])}getBottomRightOnBit(){const l=this.rowSize,d=this.bits;let h=d.length-1;for(;h>=0&&d[h]===0;)h--;if(h<0)return null;const p=Math.floor(h/l);let b=Math.floor(h%l)*32;const y=d[h];let S=31;for(;!(y>>>S);)S--;return b+=S,Int32Array.from([b,p])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(l){if(!(l instanceof W))return!1;const d=l;return this.width===d.width&&this.height===d.height&&this.rowSize===d.rowSize&&D.equals(this.bits,d.bits)}hashCode(){let l=this.width;return l=31*l+this.width,l=31*l+this.height,l=31*l+this.rowSize,l=31*l+D.hashCode(this.bits),l}toString(l="X ",d="  ",h=`
`){return this.buildToString(l,d,h)}buildToString(l,d,h){let p=new xe;for(let b=0,y=this.height;b<y;b++){for(let S=0,j=this.width;S<j;S++)p.append(this.get(S,b)?l:d);p.append(h)}return p.toString()}clone(){return new W(this.width,this.height,this.rowSize,this.bits.slice())}}class ne extends m{static getNotFoundInstance(){return new ne}}ne.kind="NotFoundException";class be extends N{constructor(l){super(l),this.luminances=be.EMPTY,this.buckets=new Int32Array(be.LUMINANCE_BUCKETS)}getBlackRow(l,d){const h=this.getLuminanceSource(),p=h.getWidth();d==null||d.getSize()<p?d=new B(p):d.clear(),this.initArrays(p);const b=h.getRow(l,this.luminances),y=this.buckets;for(let j=0;j<p;j++)y[(b[j]&255)>>be.LUMINANCE_SHIFT]++;const S=be.estimateBlackPoint(y);if(p<3)for(let j=0;j<p;j++)(b[j]&255)<S&&d.set(j);else{let j=b[0]&255,M=b[1]&255;for(let G=1;G<p-1;G++){const te=b[G+1]&255;(M*4-j-te)/2<S&&d.set(G),j=M,M=te}}return d}getBlackMatrix(){const l=this.getLuminanceSource(),d=l.getWidth(),h=l.getHeight(),p=new W(d,h);this.initArrays(d);const b=this.buckets;for(let j=1;j<5;j++){const M=Math.floor(h*j/5),G=l.getRow(M,this.luminances),te=Math.floor(d*4/5);for(let se=Math.floor(d/5);se<te;se++){const ke=G[se]&255;b[ke>>be.LUMINANCE_SHIFT]++}}const y=be.estimateBlackPoint(b),S=l.getMatrix();for(let j=0;j<h;j++){const M=j*d;for(let G=0;G<d;G++)(S[M+G]&255)<y&&p.set(G,j)}return p}createBinarizer(l){return new be(l)}initArrays(l){this.luminances.length<l&&(this.luminances=new Uint8ClampedArray(l));const d=this.buckets;for(let h=0;h<be.LUMINANCE_BUCKETS;h++)d[h]=0}static estimateBlackPoint(l){const d=l.length;let h=0,p=0,b=0;for(let G=0;G<d;G++)l[G]>b&&(p=G,b=l[G]),l[G]>h&&(h=l[G]);let y=0,S=0;for(let G=0;G<d;G++){const te=G-p,se=l[G]*te*te;se>S&&(y=G,S=se)}if(p>y){const G=p;p=y,y=G}if(y-p<=d/16)throw new ne;let j=y-1,M=-1;for(let G=y-1;G>p;G--){const te=G-p,se=te*te*(y-G)*(h-l[G]);se>M&&(j=G,M=se)}return j<<be.LUMINANCE_SHIFT}}be.LUMINANCE_BITS=5,be.LUMINANCE_SHIFT=8-be.LUMINANCE_BITS,be.LUMINANCE_BUCKETS=1<<be.LUMINANCE_BITS,be.EMPTY=Uint8ClampedArray.from([0]);class fe extends be{constructor(l){super(l),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const l=this.getLuminanceSource(),d=l.getWidth(),h=l.getHeight();if(d>=fe.MINIMUM_DIMENSION&&h>=fe.MINIMUM_DIMENSION){const p=l.getMatrix();let b=d>>fe.BLOCK_SIZE_POWER;(d&fe.BLOCK_SIZE_MASK)!==0&&b++;let y=h>>fe.BLOCK_SIZE_POWER;(h&fe.BLOCK_SIZE_MASK)!==0&&y++;const S=fe.calculateBlackPoints(p,b,y,d,h),j=new W(d,h);fe.calculateThresholdForBlock(p,b,y,d,h,S,j),this.matrix=j}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(l){return new fe(l)}static calculateThresholdForBlock(l,d,h,p,b,y,S){const j=b-fe.BLOCK_SIZE,M=p-fe.BLOCK_SIZE;for(let G=0;G<h;G++){let te=G<<fe.BLOCK_SIZE_POWER;te>j&&(te=j);const se=fe.cap(G,2,h-3);for(let ke=0;ke<d;ke++){let Ce=ke<<fe.BLOCK_SIZE_POWER;Ce>M&&(Ce=M);const Re=fe.cap(ke,2,d-3);let Ge=0;for(let Et=-2;Et<=2;Et++){const _t=y[se+Et];Ge+=_t[Re-2]+_t[Re-1]+_t[Re]+_t[Re+1]+_t[Re+2]}const rt=Ge/25;fe.thresholdBlock(l,Ce,te,rt,p,S)}}}static cap(l,d,h){return l<d?d:l>h?h:l}static thresholdBlock(l,d,h,p,b,y){for(let S=0,j=h*b+d;S<fe.BLOCK_SIZE;S++,j+=b)for(let M=0;M<fe.BLOCK_SIZE;M++)(l[j+M]&255)<=p&&y.set(d+M,h+S)}static calculateBlackPoints(l,d,h,p,b){const y=b-fe.BLOCK_SIZE,S=p-fe.BLOCK_SIZE,j=new Array(h);for(let M=0;M<h;M++){j[M]=new Int32Array(d);let G=M<<fe.BLOCK_SIZE_POWER;G>y&&(G=y);for(let te=0;te<d;te++){let se=te<<fe.BLOCK_SIZE_POWER;se>S&&(se=S);let ke=0,Ce=255,Re=0;for(let rt=0,Et=G*p+se;rt<fe.BLOCK_SIZE;rt++,Et+=p){for(let _t=0;_t<fe.BLOCK_SIZE;_t++){const yt=l[Et+_t]&255;ke+=yt,yt<Ce&&(Ce=yt),yt>Re&&(Re=yt)}if(Re-Ce>fe.MIN_DYNAMIC_RANGE)for(rt++,Et+=p;rt<fe.BLOCK_SIZE;rt++,Et+=p)for(let _t=0;_t<fe.BLOCK_SIZE;_t++)ke+=l[Et+_t]&255}let Ge=ke>>fe.BLOCK_SIZE_POWER*2;if(Re-Ce<=fe.MIN_DYNAMIC_RANGE&&(Ge=Ce/2,M>0&&te>0)){const rt=(j[M-1][te]+2*j[M][te-1]+j[M-1][te-1])/4;Ce<rt&&(Ge=rt)}j[M][te]=Ge}}return j}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class Ve{constructor(l,d){this.width=l,this.height=d}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(l,d,h,p){throw new ce("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ce("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ce("This luminance source does not support rotation by 45 degrees.")}toString(){const l=new Uint8ClampedArray(this.width);let d=new xe;for(let h=0;h<this.height;h++){const p=this.getRow(h,l);for(let b=0;b<this.width;b++){const y=p[b]&255;let S;y<64?S="#":y<128?S="+":y<192?S=".":S=" ",d.append(S)}d.append(`
`)}return d.toString()}}class ge extends Ve{constructor(l){super(l.getWidth(),l.getHeight()),this.delegate=l}getRow(l,d){const h=this.delegate.getRow(l,d),p=this.getWidth();for(let b=0;b<p;b++)h[b]=255-(h[b]&255);return h}getMatrix(){const l=this.delegate.getMatrix(),d=this.getWidth()*this.getHeight(),h=new Uint8ClampedArray(d);for(let p=0;p<d;p++)h[p]=255-(l[p]&255);return h}isCropSupported(){return this.delegate.isCropSupported()}crop(l,d,h,p){return new ge(this.delegate.crop(l,d,h,p))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ge(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ge(this.delegate.rotateCounterClockwise45())}}class We extends Ve{constructor(l){super(l.width,l.height),this.canvas=l,this.tempCanvasElement=null,this.buffer=We.makeBufferFromCanvasImageData(l)}static makeBufferFromCanvasImageData(l){const d=l.getContext("2d").getImageData(0,0,l.width,l.height);return We.toGrayscaleBuffer(d.data,l.width,l.height)}static toGrayscaleBuffer(l,d,h){const p=new Uint8ClampedArray(d*h);for(let b=0,y=0,S=l.length;b<S;b+=4,y++){let j;if(l[b+3]===0)j=255;else{const G=l[b],te=l[b+1],se=l[b+2];j=306*G+601*te+117*se+512>>10}p[y]=j}return p}getRow(l,d){if(l<0||l>=this.getHeight())throw new _("Requested row is outside the image: "+l);const h=this.getWidth(),p=l*h;return d===null?d=this.buffer.slice(p,p+h):(d.length<h&&(d=new Uint8ClampedArray(h)),d.set(this.buffer.slice(p,p+h))),d}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(l,d,h,p){return super.crop(l,d,h,p),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const l=this.canvas.ownerDocument.createElement("canvas");l.width=this.canvas.width,l.height=this.canvas.height,this.tempCanvasElement=l}return this.tempCanvasElement}rotate(l){const d=this.getTempCanvasElement(),h=d.getContext("2d"),p=l*We.DEGREE_TO_RADIANS,b=this.canvas.width,y=this.canvas.height,S=Math.ceil(Math.abs(Math.cos(p))*b+Math.abs(Math.sin(p))*y),j=Math.ceil(Math.abs(Math.sin(p))*b+Math.abs(Math.cos(p))*y);return d.width=S,d.height=j,h.translate(S/2,j/2),h.rotate(p),h.drawImage(this.canvas,b/-2,y/-2),this.buffer=We.makeBufferFromCanvasImageData(d),this}invert(){return new ge(this)}}We.DEGREE_TO_RADIANS=Math.PI/180;class re{constructor(l,d,h){this.deviceId=l,this.label=d,this.kind="videoinput",this.groupId=h||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var L=(globalThis||ho||self||window||void 0)&&(globalThis||ho||self||window||void 0).__awaiter||function(ee,l,d,h){function p(b){return b instanceof d?b:new d(function(y){y(b)})}return new(d||(d=Promise))(function(b,y){function S(G){try{M(h.next(G))}catch(te){y(te)}}function j(G){try{M(h.throw(G))}catch(te){y(te)}}function M(G){G.done?b(G.value):p(G.value).then(S,j)}M((h=h.apply(ee,l||[])).next())})};class q{constructor(l,d=500,h){this.reader=l,this.timeBetweenScansMillis=d,this._hints=h,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(l){this._timeBetweenDecodingAttempts=l<0?0:l}set hints(l){this._hints=l||null}get hints(){return this._hints}listVideoInputDevices(){return L(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const l=yield navigator.mediaDevices.enumerateDevices(),d=[];for(const h of l){const p=h.kind==="video"?"videoinput":h.kind;if(p!=="videoinput")continue;const b=h.deviceId||h.id,y=h.label||`Video device ${d.length+1}`,S=h.groupId,j={deviceId:b,label:y,kind:p,groupId:S};d.push(j)}return d})}getVideoInputDevices(){return L(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(d=>new re(d.deviceId,d.label))})}findDeviceById(l){return L(this,void 0,void 0,function*(){const d=yield this.listVideoInputDevices();return d?d.find(h=>h.deviceId===l):null})}decodeFromInputVideoDevice(l,d){return L(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(l,d)})}decodeOnceFromVideoDevice(l,d){return L(this,void 0,void 0,function*(){this.reset();let h;l?h={deviceId:{exact:l}}:h={facingMode:"environment"};const p={video:h};return yield this.decodeOnceFromConstraints(p,d)})}decodeOnceFromConstraints(l,d){return L(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeOnceFromStream(h,d)})}decodeOnceFromStream(l,d){return L(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(l,d);return yield this.decodeOnce(h)})}decodeFromInputVideoDeviceContinuously(l,d,h){return L(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(l,d,h)})}decodeFromVideoDevice(l,d,h){return L(this,void 0,void 0,function*(){let p;l?p={deviceId:{exact:l}}:p={facingMode:"environment"};const b={video:p};return yield this.decodeFromConstraints(b,d,h)})}decodeFromConstraints(l,d,h){return L(this,void 0,void 0,function*(){const p=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeFromStream(p,d,h)})}decodeFromStream(l,d,h){return L(this,void 0,void 0,function*(){this.reset();const p=yield this.attachStreamToVideo(l,d);return yield this.decodeContinuously(p,h)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(l,d){return L(this,void 0,void 0,function*(){const h=this.prepareVideoElement(d);return this.addVideoSource(h,l),this.videoElement=h,this.stream=l,yield this.playVideoOnLoadAsync(h),h})}playVideoOnLoadAsync(l){return new Promise((d,h)=>this.playVideoOnLoad(l,()=>d()))}playVideoOnLoad(l,d){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(l),l.addEventListener("ended",this.videoEndedListener),l.addEventListener("canplay",this.videoCanPlayListener),l.addEventListener("playing",d),this.tryPlayVideo(l)}isVideoPlaying(l){return l.currentTime>0&&!l.paused&&!l.ended&&l.readyState>2}tryPlayVideo(l){return L(this,void 0,void 0,function*(){if(this.isVideoPlaying(l)){console.warn("Trying to play video that is already playing.");return}try{yield l.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(l,d){const h=document.getElementById(l);if(!h)throw new w(`element with id '${l}' not found`);if(h.nodeName.toLowerCase()!==d.toLowerCase())throw new w(`element with id '${l}' must be an ${d} element`);return h}decodeFromImage(l,d){if(!l&&!d)throw new w("either imageElement with a src set or an url must be provided");return d&&!l?this.decodeFromImageUrl(d):this.decodeFromImageElement(l)}decodeFromVideo(l,d){if(!l&&!d)throw new w("Either an element with a src set or an URL must be provided");return d&&!l?this.decodeFromVideoUrl(d):this.decodeFromVideoElement(l)}decodeFromVideoContinuously(l,d,h){if(l===void 0&&d===void 0)throw new w("Either an element with a src set or an URL must be provided");return d&&!l?this.decodeFromVideoUrlContinuously(d,h):this.decodeFromVideoElementContinuously(l,h)}decodeFromImageElement(l){if(!l)throw new w("An image element must be provided.");this.reset();const d=this.prepareImageElement(l);this.imageElement=d;let h;return this.isImageLoaded(d)?h=this.decodeOnce(d,!1,!0):h=this._decodeOnLoadImage(d),h}decodeFromVideoElement(l){const d=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideo(d)}decodeFromVideoElementContinuously(l,d){const h=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideoContinuously(h,d)}_decodeFromVideoElementSetup(l){if(!l)throw new w("A video element must be provided.");this.reset();const d=this.prepareVideoElement(l);return this.videoElement=d,d}decodeFromImageUrl(l){if(!l)throw new w("An URL must be provided.");this.reset();const d=this.prepareImageElement();this.imageElement=d;const h=this._decodeOnLoadImage(d);return d.src=l,h}decodeFromVideoUrl(l){if(!l)throw new w("An URL must be provided.");this.reset();const d=this.prepareVideoElement(),h=this.decodeFromVideoElement(d);return d.src=l,h}decodeFromVideoUrlContinuously(l,d){if(!l)throw new w("An URL must be provided.");this.reset();const h=this.prepareVideoElement(),p=this.decodeFromVideoElementContinuously(h,d);return h.src=l,p}_decodeOnLoadImage(l){return new Promise((d,h)=>{this.imageLoadedListener=()=>this.decodeOnce(l,!1,!0).then(d,h),l.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(l){return L(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(l),yield this.decodeOnce(l)})}_decodeOnLoadVideoContinuously(l,d){return L(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(l),this.decodeContinuously(l,d)})}isImageLoaded(l){return!(!l.complete||l.naturalWidth===0)}prepareImageElement(l){let d;return typeof l>"u"&&(d=document.createElement("img"),d.width=200,d.height=200),typeof l=="string"&&(d=this.getMediaElement(l,"img")),l instanceof HTMLImageElement&&(d=l),d}prepareVideoElement(l){let d;return!l&&typeof document<"u"&&(d=document.createElement("video"),d.width=200,d.height=200),typeof l=="string"&&(d=this.getMediaElement(l,"video")),l instanceof HTMLVideoElement&&(d=l),d.setAttribute("autoplay","true"),d.setAttribute("muted","true"),d.setAttribute("playsinline","true"),d}decodeOnce(l,d=!0,h=!0){this._stopAsyncDecode=!1;const p=(b,y)=>{if(this._stopAsyncDecode){y(new ne("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const S=this.decode(l);b(S)}catch(S){const j=d&&S instanceof ne,G=(S instanceof k||S instanceof F)&&h;if(j||G)return setTimeout(p,this._timeBetweenDecodingAttempts,b,y);y(S)}};return new Promise((b,y)=>p(b,y))}decodeContinuously(l,d){this._stopContinuousDecode=!1;const h=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const p=this.decode(l);d(p,null),setTimeout(h,this.timeBetweenScansMillis)}catch(p){d(null,p);const b=p instanceof k||p instanceof F,y=p instanceof ne;(b||y)&&setTimeout(h,this._timeBetweenDecodingAttempts)}};h()}decode(l){const d=this.createBinaryBitmap(l);return this.decodeBitmap(d)}_isHTMLVideoElement(l){return l.videoWidth!==0}drawFrameOnCanvas(l,d,h){d||(d={sx:0,sy:0,sWidth:l.videoWidth,sHeight:l.videoHeight,dx:0,dy:0,dWidth:l.videoWidth,dHeight:l.videoHeight}),h||(h=this.captureCanvasContext),h.drawImage(l,d.sx,d.sy,d.sWidth,d.sHeight,d.dx,d.dy,d.dWidth,d.dHeight)}drawImageOnCanvas(l,d,h=this.captureCanvasContext){d||(d={sx:0,sy:0,sWidth:l.naturalWidth,sHeight:l.naturalHeight,dx:0,dy:0,dWidth:l.naturalWidth,dHeight:l.naturalHeight}),h||(h=this.captureCanvasContext),h.drawImage(l,d.sx,d.sy,d.sWidth,d.sHeight,d.dx,d.dy,d.dWidth,d.dHeight)}createBinaryBitmap(l){this.getCaptureCanvasContext(l),this._isHTMLVideoElement(l)?this.drawFrameOnCanvas(l):this.drawImageOnCanvas(l);const d=this.getCaptureCanvas(l),h=new We(d),p=new fe(h);return new E(p)}getCaptureCanvasContext(l){if(!this.captureCanvasContext){const h=this.getCaptureCanvas(l).getContext("2d");this.captureCanvasContext=h}return this.captureCanvasContext}getCaptureCanvas(l){if(!this.captureCanvas){const d=this.createCaptureCanvas(l);this.captureCanvas=d}return this.captureCanvas}decodeBitmap(l){return this.reader.decode(l,this._hints)}createCaptureCanvas(l){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const d=document.createElement("canvas");let h,p;return typeof l<"u"&&(l instanceof HTMLVideoElement?(h=l.videoWidth,p=l.videoHeight):l instanceof HTMLImageElement&&(h=l.naturalWidth||l.width,p=l.naturalHeight||l.height)),d.style.width=h+"px",d.style.height=p+"px",d.width=h,d.height=p,d}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(l=>l.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(l,d){try{l.srcObject=d}catch{l.src=URL.createObjectURL(d)}}cleanVideoSource(l){try{l.srcObject=null}catch{l.src=""}this.videoElement.removeAttribute("src")}}class P{constructor(l,d,h=d==null?0:8*d.length,p,b,y=A.currentTimeMillis()){this.text=l,this.rawBytes=d,this.numBits=h,this.resultPoints=p,this.format=b,this.timestamp=y,this.text=l,this.rawBytes=d,h==null?this.numBits=d==null?0:8*d.length:this.numBits=h,this.resultPoints=p,this.format=b,this.resultMetadata=null,y==null?this.timestamp=A.currentTimeMillis():this.timestamp=y}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(l,d){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(l,d)}putAllMetadata(l){l!==null&&(this.resultMetadata===null?this.resultMetadata=l:this.resultMetadata=new Map(l))}addResultPoints(l){const d=this.resultPoints;if(d===null)this.resultPoints=l;else if(l!==null&&l.length>0){const h=new Array(d.length+l.length);A.arraycopy(d,0,h,0,d.length),A.arraycopy(l,0,h,d.length,l.length),this.resultPoints=h}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Z;(function(ee){ee[ee.AZTEC=0]="AZTEC",ee[ee.CODABAR=1]="CODABAR",ee[ee.CODE_39=2]="CODE_39",ee[ee.CODE_93=3]="CODE_93",ee[ee.CODE_128=4]="CODE_128",ee[ee.DATA_MATRIX=5]="DATA_MATRIX",ee[ee.EAN_8=6]="EAN_8",ee[ee.EAN_13=7]="EAN_13",ee[ee.ITF=8]="ITF",ee[ee.MAXICODE=9]="MAXICODE",ee[ee.PDF_417=10]="PDF_417",ee[ee.QR_CODE=11]="QR_CODE",ee[ee.RSS_14=12]="RSS_14",ee[ee.RSS_EXPANDED=13]="RSS_EXPANDED",ee[ee.UPC_A=14]="UPC_A",ee[ee.UPC_E=15]="UPC_E",ee[ee.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Z||(Z={}));var pe=Z,Le;(function(ee){ee[ee.OTHER=0]="OTHER",ee[ee.ORIENTATION=1]="ORIENTATION",ee[ee.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",ee[ee.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",ee[ee.ISSUE_NUMBER=4]="ISSUE_NUMBER",ee[ee.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",ee[ee.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",ee[ee.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",ee[ee.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",ee[ee.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",ee[ee.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Le||(Le={}));var Be=Le;class Pe{constructor(l,d,h,p,b=-1,y=-1){this.rawBytes=l,this.text=d,this.byteSegments=h,this.ecLevel=p,this.structuredAppendSequenceNumber=b,this.structuredAppendParity=y,this.numBits=l==null?0:8*l.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(l){this.numBits=l}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(l){this.errorsCorrected=l}getErasures(){return this.erasures}setErasures(l){this.erasures=l}getOther(){return this.other}setOther(l){this.other=l}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class et{exp(l){return this.expTable[l]}log(l){if(l===0)throw new _;return this.logTable[l]}static addOrSubtract(l,d){return l^d}}class ut{constructor(l,d){if(d.length===0)throw new _;this.field=l;const h=d.length;if(h>1&&d[0]===0){let p=1;for(;p<h&&d[p]===0;)p++;p===h?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(h-p),A.arraycopy(d,p,this.coefficients,0,this.coefficients.length))}else this.coefficients=d}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);const d=this.coefficients;let h;if(l===1){h=0;for(let y=0,S=d.length;y!==S;y++){const j=d[y];h=et.addOrSubtract(h,j)}return h}h=d[0];const p=d.length,b=this.field;for(let y=1;y<p;y++)h=et.addOrSubtract(b.multiply(l,h),d[y]);return h}addOrSubtract(l){if(!this.field.equals(l.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return l;if(l.isZero())return this;let d=this.coefficients,h=l.coefficients;if(d.length>h.length){const y=d;d=h,h=y}let p=new Int32Array(h.length);const b=h.length-d.length;A.arraycopy(h,0,p,0,b);for(let y=b;y<h.length;y++)p[y]=et.addOrSubtract(d[y-b],h[y]);return new ut(this.field,p)}multiply(l){if(!this.field.equals(l.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||l.isZero())return this.field.getZero();const d=this.coefficients,h=d.length,p=l.coefficients,b=p.length,y=new Int32Array(h+b-1),S=this.field;for(let j=0;j<h;j++){const M=d[j];for(let G=0;G<b;G++)y[j+G]=et.addOrSubtract(y[j+G],S.multiply(M,p[G]))}return new ut(S,y)}multiplyScalar(l){if(l===0)return this.field.getZero();if(l===1)return this;const d=this.coefficients.length,h=this.field,p=new Int32Array(d),b=this.coefficients;for(let y=0;y<d;y++)p[y]=h.multiply(b[y],l);return new ut(h,p)}multiplyByMonomial(l,d){if(l<0)throw new _;if(d===0)return this.field.getZero();const h=this.coefficients,p=h.length,b=new Int32Array(p+l),y=this.field;for(let S=0;S<p;S++)b[S]=y.multiply(h[S],d);return new ut(y,b)}divide(l){if(!this.field.equals(l.field))throw new _("GenericGFPolys do not have same GenericGF field");if(l.isZero())throw new _("Divide by 0");const d=this.field;let h=d.getZero(),p=this;const b=l.getCoefficient(l.getDegree()),y=d.inverse(b);for(;p.getDegree()>=l.getDegree()&&!p.isZero();){const S=p.getDegree()-l.getDegree(),j=d.multiply(p.getCoefficient(p.getDegree()),y),M=l.multiplyByMonomial(S,j),G=d.buildMonomial(S,j);h=h.addOrSubtract(G),p=p.addOrSubtract(M)}return[h,p]}toString(){let l="";for(let d=this.getDegree();d>=0;d--){let h=this.getCoefficient(d);if(h!==0){if(h<0?(l+=" - ",h=-h):l.length>0&&(l+=" + "),d===0||h!==1){const p=this.field.log(h);p===0?l+="1":p===1?l+="a":(l+="a^",l+=p)}d!==0&&(d===1?l+="x":(l+="x^",l+=d))}}return l}}class ve extends m{}ve.kind="ArithmeticException";class Ie extends et{constructor(l,d,h){super(),this.primitive=l,this.size=d,this.generatorBase=h;const p=new Int32Array(d);let b=1;for(let S=0;S<d;S++)p[S]=b,b*=2,b>=d&&(b^=l,b&=d-1);this.expTable=p;const y=new Int32Array(d);for(let S=0;S<d-1;S++)y[p[S]]=S;this.logTable=y,this.zero=new ut(this,Int32Array.from([0])),this.one=new ut(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,d){if(l<0)throw new _;if(d===0)return this.zero;const h=new Int32Array(l+1);return h[0]=d,new ut(this,h)}inverse(l){if(l===0)throw new ve;return this.expTable[this.size-this.logTable[l]-1]}multiply(l,d){return l===0||d===0?0:this.expTable[(this.logTable[l]+this.logTable[d])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+O.toHexString(this.primitive)+","+this.size+")"}equals(l){return l===this}}Ie.AZTEC_DATA_12=new Ie(4201,4096,1),Ie.AZTEC_DATA_10=new Ie(1033,1024,1),Ie.AZTEC_DATA_6=new Ie(67,64,1),Ie.AZTEC_PARAM=new Ie(19,16,1),Ie.QR_CODE_FIELD_256=new Ie(285,256,0),Ie.DATA_MATRIX_FIELD_256=new Ie(301,256,1),Ie.AZTEC_DATA_8=Ie.DATA_MATRIX_FIELD_256,Ie.MAXICODE_FIELD_64=Ie.AZTEC_DATA_6;class z extends m{}z.kind="ReedSolomonException";class De extends m{}De.kind="IllegalStateException";class Te{constructor(l){this.field=l}decode(l,d){const h=this.field,p=new ut(h,l),b=new Int32Array(d);let y=!0;for(let ke=0;ke<d;ke++){const Ce=p.evaluateAt(h.exp(ke+h.getGeneratorBase()));b[b.length-1-ke]=Ce,Ce!==0&&(y=!1)}if(y)return;const S=new ut(h,b),j=this.runEuclideanAlgorithm(h.buildMonomial(d,1),S,d),M=j[0],G=j[1],te=this.findErrorLocations(M),se=this.findErrorMagnitudes(G,te);for(let ke=0;ke<te.length;ke++){const Ce=l.length-1-h.log(te[ke]);if(Ce<0)throw new z("Bad error location");l[Ce]=Ie.addOrSubtract(l[Ce],se[ke])}}runEuclideanAlgorithm(l,d,h){if(l.getDegree()<d.getDegree()){const ke=l;l=d,d=ke}const p=this.field;let b=l,y=d,S=p.getZero(),j=p.getOne();for(;y.getDegree()>=(h/2|0);){let ke=b,Ce=S;if(b=y,S=j,b.isZero())throw new z("r_{i-1} was zero");y=ke;let Re=p.getZero();const Ge=b.getCoefficient(b.getDegree()),rt=p.inverse(Ge);for(;y.getDegree()>=b.getDegree()&&!y.isZero();){const Et=y.getDegree()-b.getDegree(),_t=p.multiply(y.getCoefficient(y.getDegree()),rt);Re=Re.addOrSubtract(p.buildMonomial(Et,_t)),y=y.addOrSubtract(b.multiplyByMonomial(Et,_t))}if(j=Re.multiply(S).addOrSubtract(Ce),y.getDegree()>=b.getDegree())throw new De("Division algorithm failed to reduce polynomial?")}const M=j.getCoefficient(0);if(M===0)throw new z("sigmaTilde(0) was zero");const G=p.inverse(M),te=j.multiplyScalar(G),se=y.multiplyScalar(G);return[te,se]}findErrorLocations(l){const d=l.getDegree();if(d===1)return Int32Array.from([l.getCoefficient(1)]);const h=new Int32Array(d);let p=0;const b=this.field;for(let y=1;y<b.getSize()&&p<d;y++)l.evaluateAt(y)===0&&(h[p]=b.inverse(y),p++);if(p!==d)throw new z("Error locator degree does not match number of roots");return h}findErrorMagnitudes(l,d){const h=d.length,p=new Int32Array(h),b=this.field;for(let y=0;y<h;y++){const S=b.inverse(d[y]);let j=1;for(let M=0;M<h;M++)if(y!==M){const G=b.multiply(d[M],S),te=(G&1)===0?G|1:G&-2;j=b.multiply(j,te)}p[y]=b.multiply(l.evaluateAt(S),b.inverse(j)),b.getGeneratorBase()!==0&&(p[y]=b.multiply(p[y],S))}return p}}var le;(function(ee){ee[ee.UPPER=0]="UPPER",ee[ee.LOWER=1]="LOWER",ee[ee.MIXED=2]="MIXED",ee[ee.DIGIT=3]="DIGIT",ee[ee.PUNCT=4]="PUNCT",ee[ee.BINARY=5]="BINARY"})(le||(le={}));class de{decode(l){this.ddata=l;let d=l.getBits(),h=this.extractBits(d),p=this.correctBits(h),b=de.convertBoolArrayToByteArray(p),y=de.getEncodedData(p),S=new Pe(b,y,null,null);return S.setNumBits(p.length),S}static highLevelDecode(l){return this.getEncodedData(l)}static getEncodedData(l){let d=l.length,h=le.UPPER,p=le.UPPER,b="",y=0;for(;y<d;)if(p===le.BINARY){if(d-y<5)break;let S=de.readCode(l,y,5);if(y+=5,S===0){if(d-y<11)break;S=de.readCode(l,y,11)+31,y+=11}for(let j=0;j<S;j++){if(d-y<8){y=d;break}const M=de.readCode(l,y,8);b+=V.castAsNonUtf8Char(M),y+=8}p=h}else{let S=p===le.DIGIT?4:5;if(d-y<S)break;let j=de.readCode(l,y,S);y+=S;let M=de.getCharacter(p,j);M.startsWith("CTRL_")?(h=p,p=de.getTable(M.charAt(5)),M.charAt(6)==="L"&&(h=p)):(b+=M,p=h)}return b}static getTable(l){switch(l){case"L":return le.LOWER;case"P":return le.PUNCT;case"M":return le.MIXED;case"D":return le.DIGIT;case"B":return le.BINARY;default:return le.UPPER}}static getCharacter(l,d){switch(l){case le.UPPER:return de.UPPER_TABLE[d];case le.LOWER:return de.LOWER_TABLE[d];case le.MIXED:return de.MIXED_TABLE[d];case le.PUNCT:return de.PUNCT_TABLE[d];case le.DIGIT:return de.DIGIT_TABLE[d];default:throw new De("Bad table")}}correctBits(l){let d,h;this.ddata.getNbLayers()<=2?(h=6,d=Ie.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(h=8,d=Ie.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(h=10,d=Ie.AZTEC_DATA_10):(h=12,d=Ie.AZTEC_DATA_12);let p=this.ddata.getNbDatablocks(),b=l.length/h;if(b<p)throw new F;let y=l.length%h,S=new Int32Array(b);for(let se=0;se<b;se++,y+=h)S[se]=de.readCode(l,y,h);try{new Te(d).decode(S,b-p)}catch(se){throw new F(se)}let j=(1<<h)-1,M=0;for(let se=0;se<p;se++){let ke=S[se];if(ke===0||ke===j)throw new F;(ke===1||ke===j-1)&&M++}let G=new Array(p*h-M),te=0;for(let se=0;se<p;se++){let ke=S[se];if(ke===1||ke===j-1)G.fill(ke>1,te,te+h-1),te+=h-1;else for(let Ce=h-1;Ce>=0;--Ce)G[te++]=(ke&1<<Ce)!==0}return G}extractBits(l){let d=this.ddata.isCompact(),h=this.ddata.getNbLayers(),p=(d?11:14)+h*4,b=new Int32Array(p),y=new Array(this.totalBitsInLayer(h,d));if(d)for(let S=0;S<b.length;S++)b[S]=S;else{let S=p+1+2*O.truncDivision(O.truncDivision(p,2)-1,15),j=p/2,M=O.truncDivision(S,2);for(let G=0;G<j;G++){let te=G+O.truncDivision(G,15);b[j-G-1]=M-te-1,b[j+G]=M+te+1}}for(let S=0,j=0;S<h;S++){let M=(h-S)*4+(d?9:12),G=S*2,te=p-1-G;for(let se=0;se<M;se++){let ke=se*2;for(let Ce=0;Ce<2;Ce++)y[j+ke+Ce]=l.get(b[G+Ce],b[G+se]),y[j+2*M+ke+Ce]=l.get(b[G+se],b[te-Ce]),y[j+4*M+ke+Ce]=l.get(b[te-Ce],b[te-se]),y[j+6*M+ke+Ce]=l.get(b[te-se],b[G+Ce])}j+=M*8}return y}static readCode(l,d,h){let p=0;for(let b=d;b<d+h;b++)p<<=1,l[b]&&(p|=1);return p}static readByte(l,d){let h=l.length-d;return h>=8?de.readCode(l,d,8):de.readCode(l,d,h)<<8-h}static convertBoolArrayToByteArray(l){let d=new Uint8Array((l.length+7)/8);for(let h=0;h<d.length;h++)d[h]=de.readByte(l,8*h);return d}totalBitsInLayer(l,d){return((d?88:112)+16*l)*l}}de.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],de.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],de.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],de.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],de.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ee{constructor(){}static round(l){return l===NaN?0:l<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:l>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:l+(l<0?-.5:.5)|0}static distance(l,d,h,p){const b=l-h,y=d-p;return Math.sqrt(b*b+y*y)}static sum(l){let d=0;for(let h=0,p=l.length;h!==p;h++){const b=l[h];d+=b}return d}}class at{static floatToIntBits(l){return l}}at.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Fe{constructor(l,d){this.x=l,this.y=d}getX(){return this.x}getY(){return this.y}equals(l){if(l instanceof Fe){const d=l;return this.x===d.x&&this.y===d.y}return!1}hashCode(){return 31*at.floatToIntBits(this.x)+at.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(l){const d=this.distance(l[0],l[1]),h=this.distance(l[1],l[2]),p=this.distance(l[0],l[2]);let b,y,S;if(h>=d&&h>=p?(y=l[0],b=l[1],S=l[2]):p>=h&&p>=d?(y=l[1],b=l[0],S=l[2]):(y=l[2],b=l[0],S=l[1]),this.crossProductZ(b,y,S)<0){const j=b;b=S,S=j}l[0]=b,l[1]=y,l[2]=S}static distance(l,d){return Ee.distance(l.x,l.y,d.x,d.y)}static crossProductZ(l,d,h){const p=d.x,b=d.y;return(h.x-p)*(l.y-b)-(h.y-b)*(l.x-p)}}class He{constructor(l,d){this.bits=l,this.points=d}getBits(){return this.bits}getPoints(){return this.points}}class je extends He{constructor(l,d,h,p,b){super(l,d),this.compact=h,this.nbDatablocks=p,this.nbLayers=b}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ke{constructor(l,d,h,p){this.image=l,this.height=l.getHeight(),this.width=l.getWidth(),d==null&&(d=Ke.INIT_SIZE),h==null&&(h=l.getWidth()/2|0),p==null&&(p=l.getHeight()/2|0);const b=d/2|0;if(this.leftInit=h-b,this.rightInit=h+b,this.upInit=p-b,this.downInit=p+b,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ne}detect(){let l=this.leftInit,d=this.rightInit,h=this.upInit,p=this.downInit,b=!1,y=!0,S=!1,j=!1,M=!1,G=!1,te=!1;const se=this.width,ke=this.height;for(;y;){y=!1;let Ce=!0;for(;(Ce||!j)&&d<se;)Ce=this.containsBlackPoint(h,p,d,!1),Ce?(d++,y=!0,j=!0):j||d++;if(d>=se){b=!0;break}let Re=!0;for(;(Re||!M)&&p<ke;)Re=this.containsBlackPoint(l,d,p,!0),Re?(p++,y=!0,M=!0):M||p++;if(p>=ke){b=!0;break}let Ge=!0;for(;(Ge||!G)&&l>=0;)Ge=this.containsBlackPoint(h,p,l,!1),Ge?(l--,y=!0,G=!0):G||l--;if(l<0){b=!0;break}let rt=!0;for(;(rt||!te)&&h>=0;)rt=this.containsBlackPoint(l,d,h,!0),rt?(h--,y=!0,te=!0):te||h--;if(h<0){b=!0;break}y&&(S=!0)}if(!b&&S){const Ce=d-l;let Re=null;for(let _t=1;Re===null&&_t<Ce;_t++)Re=this.getBlackPointOnSegment(l,p-_t,l+_t,p);if(Re==null)throw new ne;let Ge=null;for(let _t=1;Ge===null&&_t<Ce;_t++)Ge=this.getBlackPointOnSegment(l,h+_t,l+_t,h);if(Ge==null)throw new ne;let rt=null;for(let _t=1;rt===null&&_t<Ce;_t++)rt=this.getBlackPointOnSegment(d,h+_t,d-_t,h);if(rt==null)throw new ne;let Et=null;for(let _t=1;Et===null&&_t<Ce;_t++)Et=this.getBlackPointOnSegment(d,p-_t,d-_t,p);if(Et==null)throw new ne;return this.centerEdges(Et,Re,rt,Ge)}else throw new ne}getBlackPointOnSegment(l,d,h,p){const b=Ee.round(Ee.distance(l,d,h,p)),y=(h-l)/b,S=(p-d)/b,j=this.image;for(let M=0;M<b;M++){const G=Ee.round(l+M*y),te=Ee.round(d+M*S);if(j.get(G,te))return new Fe(G,te)}return null}centerEdges(l,d,h,p){const b=l.getX(),y=l.getY(),S=d.getX(),j=d.getY(),M=h.getX(),G=h.getY(),te=p.getX(),se=p.getY(),ke=Ke.CORR;return b<this.width/2?[new Fe(te-ke,se+ke),new Fe(S+ke,j+ke),new Fe(M-ke,G-ke),new Fe(b+ke,y-ke)]:[new Fe(te+ke,se+ke),new Fe(S+ke,j-ke),new Fe(M-ke,G+ke),new Fe(b-ke,y-ke)]}containsBlackPoint(l,d,h,p){const b=this.image;if(p){for(let y=l;y<=d;y++)if(b.get(y,h))return!0}else for(let y=l;y<=d;y++)if(b.get(h,y))return!0;return!1}}Ke.INIT_SIZE=10,Ke.CORR=1;class it{static checkAndNudgePoints(l,d){const h=l.getWidth(),p=l.getHeight();let b=!0;for(let y=0;y<d.length&&b;y+=2){const S=Math.floor(d[y]),j=Math.floor(d[y+1]);if(S<-1||S>h||j<-1||j>p)throw new ne;b=!1,S===-1?(d[y]=0,b=!0):S===h&&(d[y]=h-1,b=!0),j===-1?(d[y+1]=0,b=!0):j===p&&(d[y+1]=p-1,b=!0)}b=!0;for(let y=d.length-2;y>=0&&b;y-=2){const S=Math.floor(d[y]),j=Math.floor(d[y+1]);if(S<-1||S>h||j<-1||j>p)throw new ne;b=!1,S===-1?(d[y]=0,b=!0):S===h&&(d[y]=h-1,b=!0),j===-1?(d[y+1]=0,b=!0):j===p&&(d[y+1]=p-1,b=!0)}}}class qe{constructor(l,d,h,p,b,y,S,j,M){this.a11=l,this.a21=d,this.a31=h,this.a12=p,this.a22=b,this.a32=y,this.a13=S,this.a23=j,this.a33=M}static quadrilateralToQuadrilateral(l,d,h,p,b,y,S,j,M,G,te,se,ke,Ce,Re,Ge){const rt=qe.quadrilateralToSquare(l,d,h,p,b,y,S,j);return qe.squareToQuadrilateral(M,G,te,se,ke,Ce,Re,Ge).times(rt)}transformPoints(l){const d=l.length,h=this.a11,p=this.a12,b=this.a13,y=this.a21,S=this.a22,j=this.a23,M=this.a31,G=this.a32,te=this.a33;for(let se=0;se<d;se+=2){const ke=l[se],Ce=l[se+1],Re=b*ke+j*Ce+te;l[se]=(h*ke+y*Ce+M)/Re,l[se+1]=(p*ke+S*Ce+G)/Re}}transformPointsWithValues(l,d){const h=this.a11,p=this.a12,b=this.a13,y=this.a21,S=this.a22,j=this.a23,M=this.a31,G=this.a32,te=this.a33,se=l.length;for(let ke=0;ke<se;ke++){const Ce=l[ke],Re=d[ke],Ge=b*Ce+j*Re+te;l[ke]=(h*Ce+y*Re+M)/Ge,d[ke]=(p*Ce+S*Re+G)/Ge}}static squareToQuadrilateral(l,d,h,p,b,y,S,j){const M=l-h+b-S,G=d-p+y-j;if(M===0&&G===0)return new qe(h-l,b-h,l,p-d,y-p,d,0,0,1);{const te=h-b,se=S-b,ke=p-y,Ce=j-y,Re=te*Ce-se*ke,Ge=(M*Ce-se*G)/Re,rt=(te*G-M*ke)/Re;return new qe(h-l+Ge*h,S-l+rt*S,l,p-d+Ge*p,j-d+rt*j,d,Ge,rt,1)}}static quadrilateralToSquare(l,d,h,p,b,y,S,j){return qe.squareToQuadrilateral(l,d,h,p,b,y,S,j).buildAdjoint()}buildAdjoint(){return new qe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(l){return new qe(this.a11*l.a11+this.a21*l.a12+this.a31*l.a13,this.a11*l.a21+this.a21*l.a22+this.a31*l.a23,this.a11*l.a31+this.a21*l.a32+this.a31*l.a33,this.a12*l.a11+this.a22*l.a12+this.a32*l.a13,this.a12*l.a21+this.a22*l.a22+this.a32*l.a23,this.a12*l.a31+this.a22*l.a32+this.a32*l.a33,this.a13*l.a11+this.a23*l.a12+this.a33*l.a13,this.a13*l.a21+this.a23*l.a22+this.a33*l.a23,this.a13*l.a31+this.a23*l.a32+this.a33*l.a33)}}class Me extends it{sampleGrid(l,d,h,p,b,y,S,j,M,G,te,se,ke,Ce,Re,Ge,rt,Et,_t){const yt=qe.quadrilateralToQuadrilateral(p,b,y,S,j,M,G,te,se,ke,Ce,Re,Ge,rt,Et,_t);return this.sampleGridWithTransform(l,d,h,yt)}sampleGridWithTransform(l,d,h,p){if(d<=0||h<=0)throw new ne;const b=new W(d,h),y=new Float32Array(2*d);for(let S=0;S<h;S++){const j=y.length,M=S+.5;for(let G=0;G<j;G+=2)y[G]=G/2+.5,y[G+1]=M;p.transformPoints(y),it.checkAndNudgePoints(l,y);try{for(let G=0;G<j;G+=2)l.get(Math.floor(y[G]),Math.floor(y[G+1]))&&b.set(G/2,S)}catch{throw new ne}}return b}}class Xe{static setGridSampler(l){Xe.gridSampler=l}static getInstance(){return Xe.gridSampler}}Xe.gridSampler=new Me;class St{constructor(l,d){this.x=l,this.y=d}toResultPoint(){return new Fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class At{constructor(l){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=l}detect(){return this.detectMirror(!1)}detectMirror(l){let d=this.getMatrixCenter(),h=this.getBullsEyeCorners(d);if(l){let y=h[0];h[0]=h[2],h[2]=y}this.extractParameters(h);let p=this.sampleGrid(this.image,h[this.shift%4],h[(this.shift+1)%4],h[(this.shift+2)%4],h[(this.shift+3)%4]),b=this.getMatrixCornerPoints(h);return new je(p,b,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(l){if(!this.isValidPoint(l[0])||!this.isValidPoint(l[1])||!this.isValidPoint(l[2])||!this.isValidPoint(l[3]))throw new ne;let d=2*this.nbCenterLayers,h=new Int32Array([this.sampleLine(l[0],l[1],d),this.sampleLine(l[1],l[2],d),this.sampleLine(l[2],l[3],d),this.sampleLine(l[3],l[0],d)]);this.shift=this.getRotation(h,d);let p=0;for(let y=0;y<4;y++){let S=h[(this.shift+y)%4];this.compact?(p<<=7,p+=S>>1&127):(p<<=10,p+=(S>>2&992)+(S>>1&31))}let b=this.getCorrectedParameterData(p,this.compact);this.compact?(this.nbLayers=(b>>6)+1,this.nbDataBlocks=(b&63)+1):(this.nbLayers=(b>>11)+1,this.nbDataBlocks=(b&2047)+1)}getRotation(l,d){let h=0;l.forEach((p,b,y)=>{let S=(p>>d-2<<1)+(p&1);h=(h<<3)+S}),h=((h&1)<<11)+(h>>1);for(let p=0;p<4;p++)if(O.bitCount(h^this.EXPECTED_CORNER_BITS[p])<=2)return p;throw new ne}getCorrectedParameterData(l,d){let h,p;d?(h=7,p=2):(h=10,p=4);let b=h-p,y=new Int32Array(h);for(let j=h-1;j>=0;--j)y[j]=l&15,l>>=4;try{new Te(Ie.AZTEC_PARAM).decode(y,b)}catch{throw new ne}let S=0;for(let j=0;j<p;j++)S=(S<<4)+y[j];return S}getBullsEyeCorners(l){let d=l,h=l,p=l,b=l,y=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let te=this.getFirstDifferent(d,y,1,-1),se=this.getFirstDifferent(h,y,1,1),ke=this.getFirstDifferent(p,y,-1,1),Ce=this.getFirstDifferent(b,y,-1,-1);if(this.nbCenterLayers>2){let Re=this.distancePoint(Ce,te)*this.nbCenterLayers/(this.distancePoint(b,d)*(this.nbCenterLayers+2));if(Re<.75||Re>1.25||!this.isWhiteOrBlackRectangle(te,se,ke,Ce))break}d=te,h=se,p=ke,b=Ce,y=!y}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ne;this.compact=this.nbCenterLayers===5;let S=new Fe(d.getX()+.5,d.getY()-.5),j=new Fe(h.getX()+.5,h.getY()+.5),M=new Fe(p.getX()-.5,p.getY()+.5),G=new Fe(b.getX()-.5,b.getY()-.5);return this.expandSquare([S,j,M,G],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let l,d,h,p;try{let S=new Ke(this.image).detect();l=S[0],d=S[1],h=S[2],p=S[3]}catch{let j=this.image.getWidth()/2,M=this.image.getHeight()/2;l=this.getFirstDifferent(new St(j+7,M-7),!1,1,-1).toResultPoint(),d=this.getFirstDifferent(new St(j+7,M+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new St(j-7,M+7),!1,-1,1).toResultPoint(),p=this.getFirstDifferent(new St(j-7,M-7),!1,-1,-1).toResultPoint()}let b=Ee.round((l.getX()+p.getX()+d.getX()+h.getX())/4),y=Ee.round((l.getY()+p.getY()+d.getY()+h.getY())/4);try{let S=new Ke(this.image,15,b,y).detect();l=S[0],d=S[1],h=S[2],p=S[3]}catch{l=this.getFirstDifferent(new St(b+7,y-7),!1,1,-1).toResultPoint(),d=this.getFirstDifferent(new St(b+7,y+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new St(b-7,y+7),!1,-1,1).toResultPoint(),p=this.getFirstDifferent(new St(b-7,y-7),!1,-1,-1).toResultPoint()}return b=Ee.round((l.getX()+p.getX()+d.getX()+h.getX())/4),y=Ee.round((l.getY()+p.getY()+d.getY()+h.getY())/4),new St(b,y)}getMatrixCornerPoints(l){return this.expandSquare(l,2*this.nbCenterLayers,this.getDimension())}sampleGrid(l,d,h,p,b){let y=Xe.getInstance(),S=this.getDimension(),j=S/2-this.nbCenterLayers,M=S/2+this.nbCenterLayers;return y.sampleGrid(l,S,S,j,j,M,j,M,M,j,M,d.getX(),d.getY(),h.getX(),h.getY(),p.getX(),p.getY(),b.getX(),b.getY())}sampleLine(l,d,h){let p=0,b=this.distanceResultPoint(l,d),y=b/h,S=l.getX(),j=l.getY(),M=y*(d.getX()-l.getX())/b,G=y*(d.getY()-l.getY())/b;for(let te=0;te<h;te++)this.image.get(Ee.round(S+te*M),Ee.round(j+te*G))&&(p|=1<<h-te-1);return p}isWhiteOrBlackRectangle(l,d,h,p){let b=3;l=new St(l.getX()-b,l.getY()+b),d=new St(d.getX()-b,d.getY()-b),h=new St(h.getX()+b,h.getY()-b),p=new St(p.getX()+b,p.getY()+b);let y=this.getColor(p,l);if(y===0)return!1;let S=this.getColor(l,d);return S!==y||(S=this.getColor(d,h),S!==y)?!1:(S=this.getColor(h,p),S===y)}getColor(l,d){let h=this.distancePoint(l,d),p=(d.getX()-l.getX())/h,b=(d.getY()-l.getY())/h,y=0,S=l.getX(),j=l.getY(),M=this.image.get(l.getX(),l.getY()),G=Math.ceil(h);for(let se=0;se<G;se++)S+=p,j+=b,this.image.get(Ee.round(S),Ee.round(j))!==M&&y++;let te=y/h;return te>.1&&te<.9?0:te<=.1===M?1:-1}getFirstDifferent(l,d,h,p){let b=l.getX()+h,y=l.getY()+p;for(;this.isValid(b,y)&&this.image.get(b,y)===d;)b+=h,y+=p;for(b-=h,y-=p;this.isValid(b,y)&&this.image.get(b,y)===d;)b+=h;for(b-=h;this.isValid(b,y)&&this.image.get(b,y)===d;)y+=p;return y-=p,new St(b,y)}expandSquare(l,d,h){let p=h/(2*d),b=l[0].getX()-l[2].getX(),y=l[0].getY()-l[2].getY(),S=(l[0].getX()+l[2].getX())/2,j=(l[0].getY()+l[2].getY())/2,M=new Fe(S+p*b,j+p*y),G=new Fe(S-p*b,j-p*y);b=l[1].getX()-l[3].getX(),y=l[1].getY()-l[3].getY(),S=(l[1].getX()+l[3].getX())/2,j=(l[1].getY()+l[3].getY())/2;let te=new Fe(S+p*b,j+p*y),se=new Fe(S-p*b,j-p*y);return[M,te,G,se]}isValid(l,d){return l>=0&&l<this.image.getWidth()&&d>0&&d<this.image.getHeight()}isValidPoint(l){let d=Ee.round(l.getX()),h=Ee.round(l.getY());return this.isValid(d,h)}distancePoint(l,d){return Ee.distance(l.getX(),l.getY(),d.getX(),d.getY())}distanceResultPoint(l,d){return Ee.distance(l.getX(),l.getY(),d.getX(),d.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(O.truncDivision(this.nbLayers-4,8)+1)+15}}class Ot{decode(l,d=null){let h=null,p=new At(l.getBlackMatrix()),b=null,y=null;try{let G=p.detectMirror(!1);b=G.getPoints(),this.reportFoundResultPoints(d,b),y=new de().decode(G)}catch(G){h=G}if(y==null)try{let G=p.detectMirror(!0);b=G.getPoints(),this.reportFoundResultPoints(d,b),y=new de().decode(G)}catch(G){throw h??G}let S=new P(y.getText(),y.getRawBytes(),y.getNumBits(),b,pe.AZTEC,A.currentTimeMillis()),j=y.getByteSegments();j!=null&&S.putMetadata(Be.BYTE_SEGMENTS,j);let M=y.getECLevel();return M!=null&&S.putMetadata(Be.ERROR_CORRECTION_LEVEL,M),S}reportFoundResultPoints(l,d){if(l!=null){let h=l.get(X.NEED_RESULT_POINT_CALLBACK);h!=null&&d.forEach((p,b,y)=>{h.foundPossibleResultPoint(p)})}}reset(){}}class sr extends q{constructor(l=500){super(new Ot,l)}}class Nt{decode(l,d){try{return this.doDecode(l,d)}catch{if(d&&d.get(X.TRY_HARDER)===!0&&l.isRotateSupported()){const b=l.rotateCounterClockwise(),y=this.doDecode(b,d),S=y.getResultMetadata();let j=270;S!==null&&S.get(Be.ORIENTATION)===!0&&(j=j+S.get(Be.ORIENTATION)%360),y.putMetadata(Be.ORIENTATION,j);const M=y.getResultPoints();if(M!==null){const G=b.getHeight();for(let te=0;te<M.length;te++)M[te]=new Fe(G-M[te].getY()-1,M[te].getX())}return y}else throw new ne}}reset(){}doDecode(l,d){const h=l.getWidth(),p=l.getHeight();let b=new B(h);const y=d&&d.get(X.TRY_HARDER)===!0,S=Math.max(1,p>>(y?8:5));let j;y?j=p:j=15;const M=Math.trunc(p/2);for(let G=0;G<j;G++){const te=Math.trunc((G+1)/2),se=(G&1)===0,ke=M+S*(se?te:-te);if(ke<0||ke>=p)break;try{b=l.getBlackRow(ke,b)}catch{continue}for(let Ce=0;Ce<2;Ce++){if(Ce===1&&(b.reverse(),d&&d.get(X.NEED_RESULT_POINT_CALLBACK)===!0)){const Re=new Map;d.forEach((Ge,rt)=>Re.set(rt,Ge)),Re.delete(X.NEED_RESULT_POINT_CALLBACK),d=Re}try{const Re=this.decodeRow(ke,b,d);if(Ce===1){Re.putMetadata(Be.ORIENTATION,180);const Ge=Re.getResultPoints();Ge!==null&&(Ge[0]=new Fe(h-Ge[0].getX()-1,Ge[0].getY()),Ge[1]=new Fe(h-Ge[1].getX()-1,Ge[1].getY()))}return Re}catch{}}}throw new ne}static recordPattern(l,d,h){const p=h.length;for(let M=0;M<p;M++)h[M]=0;const b=l.getSize();if(d>=b)throw new ne;let y=!l.get(d),S=0,j=d;for(;j<b;){if(l.get(j)!==y)h[S]++;else{if(++S===p)break;h[S]=1,y=!y}j++}if(!(S===p||S===p-1&&j===b))throw new ne}static recordPatternInReverse(l,d,h){let p=h.length,b=l.get(d);for(;d>0&&p>=0;)l.get(--d)!==b&&(p--,b=!b);if(p>=0)throw new ne;Nt.recordPattern(l,d+1,h)}static patternMatchVariance(l,d,h){const p=l.length;let b=0,y=0;for(let M=0;M<p;M++)b+=l[M],y+=d[M];if(b<y)return Number.POSITIVE_INFINITY;const S=b/y;h*=S;let j=0;for(let M=0;M<p;M++){const G=l[M],te=d[M]*S,se=G>te?G-te:te-G;if(se>h)return Number.POSITIVE_INFINITY;j+=se}return j/b}}class mt extends Nt{static findStartPattern(l){const d=l.getSize(),h=l.getNextSet(0);let p=0,b=Int32Array.from([0,0,0,0,0,0]),y=h,S=!1;const j=6;for(let M=h;M<d;M++)if(l.get(M)!==S)b[p]++;else{if(p===j-1){let G=mt.MAX_AVG_VARIANCE,te=-1;for(let se=mt.CODE_START_A;se<=mt.CODE_START_C;se++){const ke=Nt.patternMatchVariance(b,mt.CODE_PATTERNS[se],mt.MAX_INDIVIDUAL_VARIANCE);ke<G&&(G=ke,te=se)}if(te>=0&&l.isRange(Math.max(0,y-(M-y)/2),y,!1))return Int32Array.from([y,M,te]);y+=b[0]+b[1],b=b.slice(2,b.length-1),b[p-1]=0,b[p]=0,p--}else p++;b[p]=1,S=!S}throw new ne}static decodeCode(l,d,h){Nt.recordPattern(l,h,d);let p=mt.MAX_AVG_VARIANCE,b=-1;for(let y=0;y<mt.CODE_PATTERNS.length;y++){const S=mt.CODE_PATTERNS[y],j=this.patternMatchVariance(d,S,mt.MAX_INDIVIDUAL_VARIANCE);j<p&&(p=j,b=y)}if(b>=0)return b;throw new ne}decodeRow(l,d,h){const p=h&&h.get(X.ASSUME_GS1)===!0,b=mt.findStartPattern(d),y=b[2];let S=0;const j=new Uint8Array(20);j[S++]=y;let M;switch(y){case mt.CODE_START_A:M=mt.CODE_CODE_A;break;case mt.CODE_START_B:M=mt.CODE_CODE_B;break;case mt.CODE_START_C:M=mt.CODE_CODE_C;break;default:throw new F}let G=!1,te=!1,se="",ke=b[0],Ce=b[1];const Re=Int32Array.from([0,0,0,0,0,0]);let Ge=0,rt=0,Et=y,_t=0,yt=!0,kr=!1,lr=!1;for(;!G;){const Ji=te;switch(te=!1,Ge=rt,rt=mt.decodeCode(d,Re,Ce),j[S++]=rt,rt!==mt.CODE_STOP&&(yt=!0),rt!==mt.CODE_STOP&&(_t++,Et+=_t*rt),ke=Ce,Ce+=Re.reduce((yf,cu)=>yf+cu,0),rt){case mt.CODE_START_A:case mt.CODE_START_B:case mt.CODE_START_C:throw new F}switch(M){case mt.CODE_CODE_A:if(rt<64)lr===kr?se+=String.fromCharCode(32+rt):se+=String.fromCharCode(32+rt+128),lr=!1;else if(rt<96)lr===kr?se+=String.fromCharCode(rt-64):se+=String.fromCharCode(rt+64),lr=!1;else switch(rt!==mt.CODE_STOP&&(yt=!1),rt){case mt.CODE_FNC_1:p&&(se.length===0?se+="]C1":se+="");break;case mt.CODE_FNC_2:case mt.CODE_FNC_3:break;case mt.CODE_FNC_4_A:!kr&&lr?(kr=!0,lr=!1):kr&&lr?(kr=!1,lr=!1):lr=!0;break;case mt.CODE_SHIFT:te=!0,M=mt.CODE_CODE_B;break;case mt.CODE_CODE_B:M=mt.CODE_CODE_B;break;case mt.CODE_CODE_C:M=mt.CODE_CODE_C;break;case mt.CODE_STOP:G=!0;break}break;case mt.CODE_CODE_B:if(rt<96)lr===kr?se+=String.fromCharCode(32+rt):se+=String.fromCharCode(32+rt+128),lr=!1;else switch(rt!==mt.CODE_STOP&&(yt=!1),rt){case mt.CODE_FNC_1:p&&(se.length===0?se+="]C1":se+="");break;case mt.CODE_FNC_2:case mt.CODE_FNC_3:break;case mt.CODE_FNC_4_B:!kr&&lr?(kr=!0,lr=!1):kr&&lr?(kr=!1,lr=!1):lr=!0;break;case mt.CODE_SHIFT:te=!0,M=mt.CODE_CODE_A;break;case mt.CODE_CODE_A:M=mt.CODE_CODE_A;break;case mt.CODE_CODE_C:M=mt.CODE_CODE_C;break;case mt.CODE_STOP:G=!0;break}break;case mt.CODE_CODE_C:if(rt<100)rt<10&&(se+="0"),se+=rt;else switch(rt!==mt.CODE_STOP&&(yt=!1),rt){case mt.CODE_FNC_1:p&&(se.length===0?se+="]C1":se+="");break;case mt.CODE_CODE_A:M=mt.CODE_CODE_A;break;case mt.CODE_CODE_B:M=mt.CODE_CODE_B;break;case mt.CODE_STOP:G=!0;break}break}Ji&&(M=M===mt.CODE_CODE_A?mt.CODE_CODE_B:mt.CODE_CODE_A)}const Fn=Ce-ke;if(Ce=d.getNextUnset(Ce),!d.isRange(Ce,Math.min(d.getSize(),Ce+(Ce-ke)/2),!1))throw new ne;if(Et-=_t*Ge,Et%103!==Ge)throw new k;const es=se.length;if(es===0)throw new ne;es>0&&yt&&(M===mt.CODE_CODE_C?se=se.substring(0,es-2):se=se.substring(0,es-1));const _a=(b[1]+b[0])/2,Jr=ke+Fn/2,da=j.length,Xa=new Uint8Array(da);for(let Ji=0;Ji<da;Ji++)Xa[Ji]=j[Ji];const Bl=[new Fe(_a,l),new Fe(Jr,l)];return new P(se,Xa,0,Bl,pe.CODE_128,new Date().getTime())}}mt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],mt.MAX_AVG_VARIANCE=.25,mt.MAX_INDIVIDUAL_VARIANCE=.7,mt.CODE_SHIFT=98,mt.CODE_CODE_C=99,mt.CODE_CODE_B=100,mt.CODE_CODE_A=101,mt.CODE_FNC_1=102,mt.CODE_FNC_2=97,mt.CODE_FNC_3=96,mt.CODE_FNC_4_A=101,mt.CODE_FNC_4_B=100,mt.CODE_START_A=103,mt.CODE_START_B=104,mt.CODE_START_C=105,mt.CODE_STOP=106;class Ht extends Nt{constructor(l=!1,d=!1){super(),this.usingCheckDigit=l,this.extendedMode=d,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(l,d,h){let p=this.counters;p.fill(0),this.decodeRowResult="";let b=Ht.findAsteriskPattern(d,p),y=d.getNextSet(b[1]),S=d.getSize(),j,M;do{Ht.recordPattern(d,y,p);let Re=Ht.toNarrowWidePattern(p);if(Re<0)throw new ne;j=Ht.patternToChar(Re),this.decodeRowResult+=j,M=y;for(let Ge of p)y+=Ge;y=d.getNextSet(y)}while(j!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let G=0;for(let Re of p)G+=Re;let te=y-M-G;if(y!==S&&te*2<G)throw new ne;if(this.usingCheckDigit){let Re=this.decodeRowResult.length-1,Ge=0;for(let rt=0;rt<Re;rt++)Ge+=Ht.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(rt));if(this.decodeRowResult.charAt(Re)!==Ht.ALPHABET_STRING.charAt(Ge%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,Re)}if(this.decodeRowResult.length===0)throw new ne;let se;this.extendedMode?se=Ht.decodeExtended(this.decodeRowResult):se=this.decodeRowResult;let ke=(b[1]+b[0])/2,Ce=M+G/2;return new P(se,null,0,[new Fe(ke,l),new Fe(Ce,l)],pe.CODE_39,new Date().getTime())}static findAsteriskPattern(l,d){let h=l.getSize(),p=l.getNextSet(0),b=0,y=p,S=!1,j=d.length;for(let M=p;M<h;M++)if(l.get(M)!==S)d[b]++;else{if(b===j-1){if(this.toNarrowWidePattern(d)===Ht.ASTERISK_ENCODING&&l.isRange(Math.max(0,y-Math.floor((M-y)/2)),y,!1))return[y,M];y+=d[0]+d[1],d.copyWithin(0,2,2+b-1),d[b-1]=0,d[b]=0,b--}else b++;d[b]=1,S=!S}throw new ne}static toNarrowWidePattern(l){let d=l.length,h=0,p;do{let b=2147483647;for(let j of l)j<b&&j>h&&(b=j);h=b,p=0;let y=0,S=0;for(let j=0;j<d;j++){let M=l[j];M>h&&(S|=1<<d-1-j,p++,y+=M)}if(p===3){for(let j=0;j<d&&p>0;j++){let M=l[j];if(M>h&&(p--,M*2>=y))return-1}return S}}while(p>3);return-1}static patternToChar(l){for(let d=0;d<Ht.CHARACTER_ENCODINGS.length;d++)if(Ht.CHARACTER_ENCODINGS[d]===l)return Ht.ALPHABET_STRING.charAt(d);if(l===Ht.ASTERISK_ENCODING)return"*";throw new ne}static decodeExtended(l){let d=l.length,h="";for(let p=0;p<d;p++){let b=l.charAt(p);if(b==="+"||b==="$"||b==="%"||b==="/"){let y=l.charAt(p+1),S="\0";switch(b){case"+":if(y>="A"&&y<="Z")S=String.fromCharCode(y.charCodeAt(0)+32);else throw new F;break;case"$":if(y>="A"&&y<="Z")S=String.fromCharCode(y.charCodeAt(0)-64);else throw new F;break;case"%":if(y>="A"&&y<="E")S=String.fromCharCode(y.charCodeAt(0)-38);else if(y>="F"&&y<="J")S=String.fromCharCode(y.charCodeAt(0)-11);else if(y>="K"&&y<="O")S=String.fromCharCode(y.charCodeAt(0)+16);else if(y>="P"&&y<="T")S=String.fromCharCode(y.charCodeAt(0)+43);else if(y==="U")S="\0";else if(y==="V")S="@";else if(y==="W")S="`";else if(y==="X"||y==="Y"||y==="Z")S="";else throw new F;break;case"/":if(y>="A"&&y<="O")S=String.fromCharCode(y.charCodeAt(0)-32);else if(y==="Z")S=":";else throw new F;break}h+=S,p++}else h+=b}return h}}Ht.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ht.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ht.ASTERISK_ENCODING=148;class Dt extends Nt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(l,d,h){let p=this.decodeStart(d),b=this.decodeEnd(d),y=new xe;Dt.decodeMiddle(d,p[1],b[0],y);let S=y.toString(),j=null;h!=null&&(j=h.get(X.ALLOWED_LENGTHS)),j==null&&(j=Dt.DEFAULT_ALLOWED_LENGTHS);let M=S.length,G=!1,te=0;for(let Ce of j){if(M===Ce){G=!0;break}Ce>te&&(te=Ce)}if(!G&&M>te&&(G=!0),!G)throw new F;const se=[new Fe(p[1],l),new Fe(b[0],l)];return new P(S,null,0,se,pe.ITF,new Date().getTime())}static decodeMiddle(l,d,h,p){let b=new Int32Array(10),y=new Int32Array(5),S=new Int32Array(5);for(b.fill(0),y.fill(0),S.fill(0);d<h;){Nt.recordPattern(l,d,b);for(let M=0;M<5;M++){let G=2*M;y[M]=b[G],S[M]=b[G+1]}let j=Dt.decodeDigit(y);p.append(j.toString()),j=this.decodeDigit(S),p.append(j.toString()),b.forEach(function(M){d+=M})}}decodeStart(l){let d=Dt.skipWhiteSpace(l),h=Dt.findGuardPattern(l,d,Dt.START_PATTERN);return this.narrowLineWidth=(h[1]-h[0])/4,this.validateQuietZone(l,h[0]),h}validateQuietZone(l,d){let h=this.narrowLineWidth*10;h=h<d?h:d;for(let p=d-1;h>0&&p>=0&&!l.get(p);p--)h--;if(h!==0)throw new ne}static skipWhiteSpace(l){const d=l.getSize(),h=l.getNextSet(0);if(h===d)throw new ne;return h}decodeEnd(l){l.reverse();try{let d=Dt.skipWhiteSpace(l),h;try{h=Dt.findGuardPattern(l,d,Dt.END_PATTERN_REVERSED[0])}catch(b){b instanceof ne&&(h=Dt.findGuardPattern(l,d,Dt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(l,h[0]);let p=h[0];return h[0]=l.getSize()-h[1],h[1]=l.getSize()-p,h}finally{l.reverse()}}static findGuardPattern(l,d,h){let p=h.length,b=new Int32Array(p),y=l.getSize(),S=!1,j=0,M=d;b.fill(0);for(let G=d;G<y;G++)if(l.get(G)!==S)b[j]++;else{if(j===p-1){if(Nt.patternMatchVariance(b,h,Dt.MAX_INDIVIDUAL_VARIANCE)<Dt.MAX_AVG_VARIANCE)return[M,G];M+=b[0]+b[1],A.arraycopy(b,2,b,0,j-1),b[j-1]=0,b[j]=0,j--}else j++;b[j]=1,S=!S}throw new ne}static decodeDigit(l){let d=Dt.MAX_AVG_VARIANCE,h=-1,p=Dt.PATTERNS.length;for(let b=0;b<p;b++){let y=Dt.PATTERNS[b],S=Nt.patternMatchVariance(l,y,Dt.MAX_INDIVIDUAL_VARIANCE);S<d?(d=S,h=b):S===d&&(h=-1)}if(h>=0)return h%10;throw new ne}}Dt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Dt.MAX_AVG_VARIANCE=.38,Dt.MAX_INDIVIDUAL_VARIANCE=.5,Dt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Dt.START_PATTERN=Int32Array.from([1,1,1,1]),Dt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Yt extends Nt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(l){let d=!1,h,p=0,b=Int32Array.from([0,0,0]);for(;!d;){b=Int32Array.from([0,0,0]),h=Yt.findGuardPattern(l,p,!1,this.START_END_PATTERN,b);let y=h[0];p=h[1];let S=y-(p-y);S>=0&&(d=l.isRange(S,y,!1))}return h}static checkChecksum(l){return Yt.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let d=l.length;if(d===0)return!1;let h=parseInt(l.charAt(d-1),10);return Yt.getStandardUPCEANChecksum(l.substring(0,d-1))===h}static getStandardUPCEANChecksum(l){let d=l.length,h=0;for(let p=d-1;p>=0;p-=2){let b=l.charAt(p).charCodeAt(0)-48;if(b<0||b>9)throw new F;h+=b}h*=3;for(let p=d-2;p>=0;p-=2){let b=l.charAt(p).charCodeAt(0)-48;if(b<0||b>9)throw new F;h+=b}return(1e3-h)%10}static decodeEnd(l,d){return Yt.findGuardPattern(l,d,!1,Yt.START_END_PATTERN,new Int32Array(Yt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(l,d,h,p){return this.findGuardPattern(l,d,h,p,new Int32Array(p.length))}static findGuardPattern(l,d,h,p,b){let y=l.getSize();d=h?l.getNextUnset(d):l.getNextSet(d);let S=0,j=d,M=p.length,G=h;for(let te=d;te<y;te++)if(l.get(te)!==G)b[S]++;else{if(S===M-1){if(Nt.patternMatchVariance(b,p,Yt.MAX_INDIVIDUAL_VARIANCE)<Yt.MAX_AVG_VARIANCE)return Int32Array.from([j,te]);j+=b[0]+b[1];let se=b.slice(2,b.length-1);for(let ke=0;ke<S-1;ke++)b[ke]=se[ke];b[S-1]=0,b[S]=0,S--}else S++;b[S]=1,G=!G}throw new ne}static decodeDigit(l,d,h,p){this.recordPattern(l,h,d);let b=this.MAX_AVG_VARIANCE,y=-1,S=p.length;for(let j=0;j<S;j++){let M=p[j],G=Nt.patternMatchVariance(d,M,Yt.MAX_INDIVIDUAL_VARIANCE);G<b&&(b=G,y=j)}if(y>=0)return y;throw new ne}}Yt.MAX_AVG_VARIANCE=.48,Yt.MAX_INDIVIDUAL_VARIANCE=.7,Yt.START_END_PATTERN=Int32Array.from([1,1,1]),Yt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Yt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Yt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class or{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,d,h){let p=this.decodeRowStringBuffer,b=this.decodeMiddle(d,h,p),y=p.toString(),S=or.parseExtensionString(y),j=[new Fe((h[0]+h[1])/2,l),new Fe(b,l)],M=new P(y,null,0,j,pe.UPC_EAN_EXTENSION,new Date().getTime());return S!=null&&M.putAllMetadata(S),M}decodeMiddle(l,d,h){let p=this.decodeMiddleCounters;p[0]=0,p[1]=0,p[2]=0,p[3]=0;let b=l.getSize(),y=d[1],S=0;for(let M=0;M<5&&y<b;M++){let G=Yt.decodeDigit(l,p,y,Yt.L_AND_G_PATTERNS);h+=String.fromCharCode(48+G%10);for(let te of p)y+=te;G>=10&&(S|=1<<4-M),M!==4&&(y=l.getNextSet(y),y=l.getNextUnset(y))}if(h.length!==5)throw new ne;let j=this.determineCheckDigit(S);if(or.extensionChecksum(h.toString())!==j)throw new ne;return y}static extensionChecksum(l){let d=l.length,h=0;for(let p=d-2;p>=0;p-=2)h+=l.charAt(p).charCodeAt(0)-48;h*=3;for(let p=d-1;p>=0;p-=2)h+=l.charAt(p).charCodeAt(0)-48;return h*=3,h%10}determineCheckDigit(l){for(let d=0;d<10;d++)if(l===this.CHECK_DIGIT_ENCODINGS[d])return d;throw new ne}static parseExtensionString(l){if(l.length!==5)return null;let d=or.parseExtension5String(l);return d==null?null:new Map([[Be.SUGGESTED_PRICE,d]])}static parseExtension5String(l){let d;switch(l.charAt(0)){case"0":d="";break;case"5":d="$";break;case"9":switch(l){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}d="";break;default:d="";break}let h=parseInt(l.substring(1)),p=(h/100).toString(),b=h%100,y=b<10?"0"+b:b.toString();return d+p+"."+y}}class _r{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,d,h){let p=this.decodeRowStringBuffer,b=this.decodeMiddle(d,h,p),y=p.toString(),S=_r.parseExtensionString(y),j=[new Fe((h[0]+h[1])/2,l),new Fe(b,l)],M=new P(y,null,0,j,pe.UPC_EAN_EXTENSION,new Date().getTime());return S!=null&&M.putAllMetadata(S),M}decodeMiddle(l,d,h){let p=this.decodeMiddleCounters;p[0]=0,p[1]=0,p[2]=0,p[3]=0;let b=l.getSize(),y=d[1],S=0;for(let j=0;j<2&&y<b;j++){let M=Yt.decodeDigit(l,p,y,Yt.L_AND_G_PATTERNS);h+=String.fromCharCode(48+M%10);for(let G of p)y+=G;M>=10&&(S|=1<<1-j),j!==1&&(y=l.getNextSet(y),y=l.getNextUnset(y))}if(h.length!==2)throw new ne;if(parseInt(h.toString())%4!==S)throw new ne;return y}static parseExtensionString(l){return l.length!==2?null:new Map([[Be.ISSUE_NUMBER,parseInt(l)]])}}class Qr{static decodeRow(l,d,h){let p=Yt.findGuardPattern(d,h,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new or().decodeRow(l,d,p)}catch{return new _r().decodeRow(l,d,p)}}}Qr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Xt extends Yt{constructor(){super(),this.decodeRowStringBuffer="",Xt.L_AND_G_PATTERNS=Xt.L_PATTERNS.map(l=>Int32Array.from(l));for(let l=10;l<20;l++){let d=Xt.L_PATTERNS[l-10],h=new Int32Array(d.length);for(let p=0;p<d.length;p++)h[p]=d[d.length-p-1];Xt.L_AND_G_PATTERNS[l]=h}}decodeRow(l,d,h){let p=Xt.findStartGuardPattern(d),b=h==null?null:h.get(X.NEED_RESULT_POINT_CALLBACK);if(b!=null){const yt=new Fe((p[0]+p[1])/2,l);b.foundPossibleResultPoint(yt)}let y=this.decodeMiddle(d,p,this.decodeRowStringBuffer),S=y.rowOffset,j=y.resultString;if(b!=null){const yt=new Fe(S,l);b.foundPossibleResultPoint(yt)}let M=this.decodeEnd(d,S);if(b!=null){const yt=new Fe((M[0]+M[1])/2,l);b.foundPossibleResultPoint(yt)}let G=M[1],te=G+(G-M[0]);if(te>=d.getSize()||!d.isRange(G,te,!1))throw new ne;let se=j.toString();if(se.length<8)throw new F;if(!Xt.checkChecksum(se))throw new k;let ke=(p[1]+p[0])/2,Ce=(M[1]+M[0])/2,Re=this.getBarcodeFormat(),Ge=[new Fe(ke,l),new Fe(Ce,l)],rt=new P(se,null,0,Ge,Re,new Date().getTime()),Et=0;try{let yt=Qr.decodeRow(l,d,M[1]);rt.putMetadata(Be.UPC_EAN_EXTENSION,yt.getText()),rt.putAllMetadata(yt.getResultMetadata()),rt.addResultPoints(yt.getResultPoints()),Et=yt.getText().length}catch{}let _t=h==null?null:h.get(X.ALLOWED_EAN_EXTENSIONS);if(_t!=null){let yt=!1;for(let kr in _t)if(Et.toString()===kr){yt=!0;break}if(!yt)throw new ne}return rt}decodeEnd(l,d){return Xt.findGuardPattern(l,d,!1,Xt.START_END_PATTERN,new Int32Array(Xt.START_END_PATTERN.length).fill(0))}static checkChecksum(l){return Xt.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let d=l.length;if(d===0)return!1;let h=parseInt(l.charAt(d-1),10);return Xt.getStandardUPCEANChecksum(l.substring(0,d-1))===h}static getStandardUPCEANChecksum(l){let d=l.length,h=0;for(let p=d-1;p>=0;p-=2){let b=l.charAt(p).charCodeAt(0)-48;if(b<0||b>9)throw new F;h+=b}h*=3;for(let p=d-2;p>=0;p-=2){let b=l.charAt(p).charCodeAt(0)-48;if(b<0||b>9)throw new F;h+=b}return(1e3-h)%10}}class Mr extends Xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,d,h){let p=this.decodeMiddleCounters;p[0]=0,p[1]=0,p[2]=0,p[3]=0;let b=l.getSize(),y=d[1],S=0;for(let M=0;M<6&&y<b;M++){let G=Xt.decodeDigit(l,p,y,Xt.L_AND_G_PATTERNS);h+=String.fromCharCode(48+G%10);for(let te of p)y+=te;G>=10&&(S|=1<<5-M)}h=Mr.determineFirstDigit(h,S),y=Xt.findGuardPattern(l,y,!0,Xt.MIDDLE_PATTERN,new Int32Array(Xt.MIDDLE_PATTERN.length).fill(0))[1];for(let M=0;M<6&&y<b;M++){let G=Xt.decodeDigit(l,p,y,Xt.L_PATTERNS);h+=String.fromCharCode(48+G);for(let te of p)y+=te}return{rowOffset:y,resultString:h}}getBarcodeFormat(){return pe.EAN_13}static determineFirstDigit(l,d){for(let h=0;h<10;h++)if(d===this.FIRST_DIGIT_ENCODINGS[h])return l=String.fromCharCode(48+h)+l,l;throw new ne}}Mr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class zr extends Xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,d,h){const p=this.decodeMiddleCounters;p[0]=0,p[1]=0,p[2]=0,p[3]=0;let b=l.getSize(),y=d[1];for(let j=0;j<4&&y<b;j++){let M=Xt.decodeDigit(l,p,y,Xt.L_PATTERNS);h+=String.fromCharCode(48+M);for(let G of p)y+=G}y=Xt.findGuardPattern(l,y,!0,Xt.MIDDLE_PATTERN,new Int32Array(Xt.MIDDLE_PATTERN.length).fill(0))[1];for(let j=0;j<4&&y<b;j++){let M=Xt.decodeDigit(l,p,y,Xt.L_PATTERNS);h+=String.fromCharCode(48+M);for(let G of p)y+=G}return{rowOffset:y,resultString:h}}getBarcodeFormat(){return pe.EAN_8}}class En extends Xt{constructor(){super(...arguments),this.ean13Reader=new Mr}getBarcodeFormat(){return pe.UPC_A}decode(l,d){return this.maybeReturnResult(this.ean13Reader.decode(l))}decodeRow(l,d,h){return this.maybeReturnResult(this.ean13Reader.decodeRow(l,d,h))}decodeMiddle(l,d,h){return this.ean13Reader.decodeMiddle(l,d,h)}maybeReturnResult(l){let d=l.getText();if(d.charAt(0)==="0"){let h=new P(d.substring(1),null,null,l.getResultPoints(),pe.UPC_A);return l.getResultMetadata()!=null&&h.putAllMetadata(l.getResultMetadata()),h}else throw new ne}reset(){this.ean13Reader.reset()}}class Wr extends Xt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(l,d,h){const p=this.decodeMiddleCounters.map(M=>M);p[0]=0,p[1]=0,p[2]=0,p[3]=0;const b=l.getSize();let y=d[1],S=0;for(let M=0;M<6&&y<b;M++){const G=Wr.decodeDigit(l,p,y,Wr.L_AND_G_PATTERNS);h+=String.fromCharCode(48+G%10);for(let te of p)y+=te;G>=10&&(S|=1<<5-M)}let j=Wr.determineNumSysAndCheckDigit(h,S);return{rowOffset:y,resultString:j}}decodeEnd(l,d){return Wr.findGuardPatternWithoutCounters(l,d,!0,Wr.MIDDLE_END_PATTERN)}checkChecksum(l){return Xt.checkChecksum(Wr.convertUPCEtoUPCA(l))}static determineNumSysAndCheckDigit(l,d){for(let h=0;h<=1;h++)for(let p=0;p<10;p++)if(d===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[h][p]){let b=String.fromCharCode(48+h),y=String.fromCharCode(48+p);return b+l+y}throw ne.getNotFoundInstance()}getBarcodeFormat(){return pe.UPC_E}static convertUPCEtoUPCA(l){const d=l.slice(1,7).split("").map(b=>b.charCodeAt(0)),h=new xe;h.append(l.charAt(0));let p=d[5];switch(p){case 0:case 1:case 2:h.appendChars(d,0,2),h.append(p),h.append("0000"),h.appendChars(d,2,3);break;case 3:h.appendChars(d,0,3),h.append("00000"),h.appendChars(d,3,2);break;case 4:h.appendChars(d,0,4),h.append("00000"),h.append(d[4]);break;default:h.appendChars(d,0,5),h.append("0000"),h.append(p);break}return l.length>=8&&h.append(l.charAt(7)),h.toString()}}Wr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Wr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Or extends Nt{constructor(l){super();let d=l==null?null:l.get(X.POSSIBLE_FORMATS),h=[];n(d)?(h.push(new Mr),h.push(new En),h.push(new zr),h.push(new Wr)):(d.indexOf(pe.EAN_13)>-1&&h.push(new Mr),d.indexOf(pe.UPC_A)>-1&&h.push(new En),d.indexOf(pe.EAN_8)>-1&&h.push(new zr),d.indexOf(pe.UPC_E)>-1&&h.push(new Wr)),this.readers=h}decodeRow(l,d,h){for(let p of this.readers)try{const b=p.decodeRow(l,d,h),y=b.getBarcodeFormat()===pe.EAN_13&&b.getText().charAt(0)==="0",S=h==null?null:h.get(X.POSSIBLE_FORMATS),j=S==null||S.includes(pe.UPC_A);if(y&&j){const M=b.getRawBytes(),G=new P(b.getText().substring(1),M,M?M.length:null,b.getResultPoints(),pe.UPC_A);return G.putAllMetadata(b.getResultMetadata()),G}return b}catch{}throw new ne}reset(){for(let l of this.readers)l.reset()}}class ze extends Nt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(l,d){for(let h=0;h<d.length;h++)if(Nt.patternMatchVariance(l,d[h],ze.MAX_INDIVIDUAL_VARIANCE)<ze.MAX_AVG_VARIANCE)return h;throw new ne}static count(l){return Ee.sum(new Int32Array(l))}static increment(l,d){let h=0,p=d[0];for(let b=1;b<l.length;b++)d[b]>p&&(p=d[b],h=b);l[h]++}static decrement(l,d){let h=0,p=d[0];for(let b=1;b<l.length;b++)d[b]<p&&(p=d[b],h=b);l[h]--}static isFinderPattern(l){let d=l[0]+l[1],h=d+l[2]+l[3],p=d/h;if(p>=ze.MIN_FINDER_PATTERN_RATIO&&p<=ze.MAX_FINDER_PATTERN_RATIO){let b=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;for(let S of l)S>y&&(y=S),S<b&&(b=S);return y<10*b}return!1}}ze.MAX_AVG_VARIANCE=.2,ze.MAX_INDIVIDUAL_VARIANCE=.45,ze.MIN_FINDER_PATTERN_RATIO=9.5/12,ze.MAX_FINDER_PATTERN_RATIO=12.5/14;class kt{constructor(l,d){this.value=l,this.checksumPortion=d}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(l){if(!(l instanceof kt))return!1;const d=l;return this.value===d.value&&this.checksumPortion===d.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Rt{constructor(l,d,h,p,b){this.value=l,this.startEnd=d,this.value=l,this.startEnd=d,this.resultPoints=new Array,this.resultPoints.push(new Fe(h,b)),this.resultPoints.push(new Fe(p,b))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(l){if(!(l instanceof Rt))return!1;const d=l;return this.value===d.value}hashCode(){return this.value}}class Mt{constructor(){}static getRSSvalue(l,d,h){let p=0;for(let j of l)p+=j;let b=0,y=0,S=l.length;for(let j=0;j<S-1;j++){let M;for(M=1,y|=1<<j;M<l[j];M++,y&=~(1<<j)){let G=Mt.combins(p-M-1,S-j-2);if(h&&y===0&&p-M-(S-j-1)>=S-j-1&&(G-=Mt.combins(p-M-(S-j),S-j-2)),S-j-1>1){let te=0;for(let se=p-M-(S-j-2);se>d;se--)te+=Mt.combins(p-M-se-1,S-j-3);G-=te*(S-1-j)}else p-M>d&&G--;b+=G}p-=M}return b}static combins(l,d){let h,p;l-d>d?(p=d,h=l-d):(p=l-d,h=d);let b=1,y=1;for(let S=l;S>h;S--)b*=S,y<=p&&(b/=y,y++);for(;y<=p;)b/=y,y++;return b}}class pr{static buildBitArray(l){let d=l.length*2-1;l[l.length-1].getRightChar()==null&&(d-=1);let h=12*d,p=new B(h),b=0,S=l[0].getRightChar().getValue();for(let j=11;j>=0;--j)(S&1<<j)!=0&&p.set(b),b++;for(let j=1;j<l.length;++j){let M=l[j],G=M.getLeftChar().getValue();for(let te=11;te>=0;--te)(G&1<<te)!=0&&p.set(b),b++;if(M.getRightChar()!=null){let te=M.getRightChar().getValue();for(let se=11;se>=0;--se)(te&1<<se)!=0&&p.set(b),b++}}return p}}class Fr{constructor(l,d){d?this.decodedInformation=null:(this.finished=l,this.decodedInformation=d)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class $r{constructor(l){this.newPosition=l}getNewPosition(){return this.newPosition}}class br extends $r{constructor(l,d){super(l),this.value=d}getValue(){return this.value}isFNC1(){return this.value===br.FNC1}}br.FNC1="$";class Wn extends $r{constructor(l,d,h){super(l),h?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=d}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ae extends $r{constructor(l,d,h){if(super(l),d<0||d>10||h<0||h>10)throw new F;this.firstDigit=d,this.secondDigit=h}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ae.FNC1}isSecondDigitFNC1(){return this.secondDigit===ae.FNC1}isAnyFNC1(){return this.firstDigit===ae.FNC1||this.secondDigit===ae.FNC1}}ae.FNC1=10;class ue{constructor(){}static parseFieldsInGeneralPurpose(l){if(!l)return null;if(l.length<2)throw new ne;let d=l.substring(0,2);for(let b of ue.TWO_DIGIT_DATA_LENGTH)if(b[0]===d)return b[1]===ue.VARIABLE_LENGTH?ue.processVariableAI(2,b[2],l):ue.processFixedAI(2,b[1],l);if(l.length<3)throw new ne;let h=l.substring(0,3);for(let b of ue.THREE_DIGIT_DATA_LENGTH)if(b[0]===h)return b[1]===ue.VARIABLE_LENGTH?ue.processVariableAI(3,b[2],l):ue.processFixedAI(3,b[1],l);for(let b of ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(b[0]===h)return b[1]===ue.VARIABLE_LENGTH?ue.processVariableAI(4,b[2],l):ue.processFixedAI(4,b[1],l);if(l.length<4)throw new ne;let p=l.substring(0,4);for(let b of ue.FOUR_DIGIT_DATA_LENGTH)if(b[0]===p)return b[1]===ue.VARIABLE_LENGTH?ue.processVariableAI(4,b[2],l):ue.processFixedAI(4,b[1],l);throw new ne}static processFixedAI(l,d,h){if(h.length<l)throw new ne;let p=h.substring(0,l);if(h.length<l+d)throw new ne;let b=h.substring(l,l+d),y=h.substring(l+d),S="("+p+")"+b,j=ue.parseFieldsInGeneralPurpose(y);return j==null?S:S+j}static processVariableAI(l,d,h){let p=h.substring(0,l),b;h.length<l+d?b=h.length:b=l+d;let y=h.substring(l,b),S=h.substring(b),j="("+p+")"+y,M=ue.parseFieldsInGeneralPurpose(S);return M==null?j:j+M}}ue.VARIABLE_LENGTH=[],ue.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ue.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ue.VARIABLE_LENGTH,20],["22",ue.VARIABLE_LENGTH,29],["30",ue.VARIABLE_LENGTH,8],["37",ue.VARIABLE_LENGTH,8],["90",ue.VARIABLE_LENGTH,30],["91",ue.VARIABLE_LENGTH,30],["92",ue.VARIABLE_LENGTH,30],["93",ue.VARIABLE_LENGTH,30],["94",ue.VARIABLE_LENGTH,30],["95",ue.VARIABLE_LENGTH,30],["96",ue.VARIABLE_LENGTH,30],["97",ue.VARIABLE_LENGTH,3],["98",ue.VARIABLE_LENGTH,30],["99",ue.VARIABLE_LENGTH,30]],ue.THREE_DIGIT_DATA_LENGTH=[["240",ue.VARIABLE_LENGTH,30],["241",ue.VARIABLE_LENGTH,30],["242",ue.VARIABLE_LENGTH,6],["250",ue.VARIABLE_LENGTH,30],["251",ue.VARIABLE_LENGTH,30],["253",ue.VARIABLE_LENGTH,17],["254",ue.VARIABLE_LENGTH,20],["400",ue.VARIABLE_LENGTH,30],["401",ue.VARIABLE_LENGTH,30],["402",17],["403",ue.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ue.VARIABLE_LENGTH,20],["421",ue.VARIABLE_LENGTH,15],["422",3],["423",ue.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ue.VARIABLE_LENGTH,15],["391",ue.VARIABLE_LENGTH,18],["392",ue.VARIABLE_LENGTH,15],["393",ue.VARIABLE_LENGTH,18],["703",ue.VARIABLE_LENGTH,30]],ue.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ue.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ue.VARIABLE_LENGTH,20],["8003",ue.VARIABLE_LENGTH,30],["8004",ue.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ue.VARIABLE_LENGTH,30],["8008",ue.VARIABLE_LENGTH,12],["8018",18],["8020",ue.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ue.VARIABLE_LENGTH,70],["8200",ue.VARIABLE_LENGTH,70]];class he{constructor(l){this.buffer=new xe,this.information=l}decodeAllCodes(l,d){let h=d,p=null;do{let b=this.decodeGeneralPurposeField(h,p),y=ue.parseFieldsInGeneralPurpose(b.getNewString());if(y!=null&&l.append(y),b.isRemaining()?p=""+b.getRemainingValue():p=null,h===b.getNewPosition())break;h=b.getNewPosition()}while(!0);return l.toString()}isStillNumeric(l){if(l+7>this.information.getSize())return l+4<=this.information.getSize();for(let d=l;d<l+3;++d)if(this.information.get(d))return!0;return this.information.get(l+3)}decodeNumeric(l){if(l+7>this.information.getSize()){let b=this.extractNumericValueFromBitArray(l,4);return b===0?new ae(this.information.getSize(),ae.FNC1,ae.FNC1):new ae(this.information.getSize(),b-1,ae.FNC1)}let d=this.extractNumericValueFromBitArray(l,7),h=(d-8)/11,p=(d-8)%11;return new ae(l+7,h,p)}extractNumericValueFromBitArray(l,d){return he.extractNumericValueFromBitArray(this.information,l,d)}static extractNumericValueFromBitArray(l,d,h){let p=0;for(let b=0;b<h;++b)l.get(d+b)&&(p|=1<<h-b-1);return p}decodeGeneralPurposeField(l,d){this.buffer.setLengthToZero(),d!=null&&this.buffer.append(d),this.current.setPosition(l);let h=this.parseBlocks();return h!=null&&h.isRemaining()?new Wn(this.current.getPosition(),this.buffer.toString(),h.getRemainingValue()):new Wn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let l,d;do{let h=this.current.getPosition();if(this.current.isAlpha()?(d=this.parseAlphaBlock(),l=d.isFinished()):this.current.isIsoIec646()?(d=this.parseIsoIec646Block(),l=d.isFinished()):(d=this.parseNumericBlock(),l=d.isFinished()),!(h!==this.current.getPosition())&&!l)break}while(!l);return d.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let l=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFirstDigitFNC1()){let d;return l.isSecondDigitFNC1()?d=new Wn(this.current.getPosition(),this.buffer.toString()):d=new Wn(this.current.getPosition(),this.buffer.toString(),l.getSecondDigit()),new Fr(!0,d)}if(this.buffer.append(l.getFirstDigit()),l.isSecondDigitFNC1()){let d=new Wn(this.current.getPosition(),this.buffer.toString());return new Fr(!0,d)}this.buffer.append(l.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Fr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let l=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let d=new Wn(this.current.getPosition(),this.buffer.toString());return new Fr(!0,d)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Fr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let l=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let d=new Wn(this.current.getPosition(),this.buffer.toString());return new Fr(!0,d)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Fr(!1)}isStillIsoIec646(l){if(l+5>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(l,5);if(d>=5&&d<16)return!0;if(l+7>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(l,7);if(h>=64&&h<116)return!0;if(l+8>this.information.getSize())return!1;let p=this.extractNumericValueFromBitArray(l,8);return p>=232&&p<253}decodeIsoIec646(l){let d=this.extractNumericValueFromBitArray(l,5);if(d===15)return new br(l+5,br.FNC1);if(d>=5&&d<15)return new br(l+5,"0"+(d-5));let h=this.extractNumericValueFromBitArray(l,7);if(h>=64&&h<90)return new br(l+7,""+(h+1));if(h>=90&&h<116)return new br(l+7,""+(h+7));let p=this.extractNumericValueFromBitArray(l,8),b;switch(p){case 232:b="!";break;case 233:b='"';break;case 234:b="%";break;case 235:b="&";break;case 236:b="'";break;case 237:b="(";break;case 238:b=")";break;case 239:b="*";break;case 240:b="+";break;case 241:b=",";break;case 242:b="-";break;case 243:b=".";break;case 244:b="/";break;case 245:b=":";break;case 246:b=";";break;case 247:b="<";break;case 248:b="=";break;case 249:b=">";break;case 250:b="?";break;case 251:b="_";break;case 252:b=" ";break;default:throw new F}return new br(l+8,b)}isStillAlpha(l){if(l+5>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(l,5);if(d>=5&&d<16)return!0;if(l+6>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(l,6);return h>=16&&h<63}decodeAlphanumeric(l){let d=this.extractNumericValueFromBitArray(l,5);if(d===15)return new br(l+5,br.FNC1);if(d>=5&&d<15)return new br(l+5,"0"+(d-5));let h=this.extractNumericValueFromBitArray(l,6);if(h>=32&&h<58)return new br(l+6,""+(h+33));let p;switch(h){case 58:p="*";break;case 59:p=",";break;case 60:p="-";break;case 61:p=".";break;case 62:p="/";break;default:throw new De("Decoding invalid alphanumeric value: "+h)}return new br(l+6,p)}isAlphaTo646ToAlphaLatch(l){if(l+1>this.information.getSize())return!1;for(let d=0;d<5&&d+l<this.information.getSize();++d)if(d===2){if(!this.information.get(l+2))return!1}else if(this.information.get(l+d))return!1;return!0}isAlphaOr646ToNumericLatch(l){if(l+3>this.information.getSize())return!1;for(let d=l;d<l+3;++d)if(this.information.get(d))return!1;return!0}isNumericToAlphaNumericLatch(l){if(l+1>this.information.getSize())return!1;for(let d=0;d<4&&d+l<this.information.getSize();++d)if(this.information.get(l+d))return!1;return!0}}class me{constructor(l){this.information=l,this.generalDecoder=new he(l)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class we extends me{constructor(l){super(l)}encodeCompressedGtin(l,d){l.append("(01)");let h=l.length();l.append("9"),this.encodeCompressedGtinWithoutAI(l,d,h)}encodeCompressedGtinWithoutAI(l,d,h){for(let p=0;p<4;++p){let b=this.getGeneralDecoder().extractNumericValueFromBitArray(d+10*p,10);b/100===0&&l.append("0"),b/10===0&&l.append("0"),l.append(b)}we.appendCheckDigit(l,h)}static appendCheckDigit(l,d){let h=0;for(let p=0;p<13;p++){let b=l.charAt(p+d).charCodeAt(0)-48;h+=(p&1)===0?3*b:b}h=10-h%10,h===10&&(h=0),l.append(h)}}we.GTIN_SIZE=40;class _e extends we{constructor(l){super(l)}parseInformation(){let l=new xe;l.append("(01)");let d=l.length(),h=this.getGeneralDecoder().extractNumericValueFromBitArray(_e.HEADER_SIZE,4);return l.append(h),this.encodeCompressedGtinWithoutAI(l,_e.HEADER_SIZE+4,d),this.getGeneralDecoder().decodeAllCodes(l,_e.HEADER_SIZE+44)}}_e.HEADER_SIZE=4;class Ye extends me{constructor(l){super(l)}parseInformation(){let l=new xe;return this.getGeneralDecoder().decodeAllCodes(l,Ye.HEADER_SIZE)}}Ye.HEADER_SIZE=5;class ct extends we{constructor(l){super(l)}encodeCompressedWeight(l,d,h){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(d,h);this.addWeightCode(l,p);let b=this.checkWeight(p),y=1e5;for(let S=0;S<5;++S)b/y===0&&l.append("0"),y/=10;l.append(b)}}class ie extends ct{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()!=ie.HEADER_SIZE+ct.GTIN_SIZE+ie.WEIGHT_SIZE)throw new ne;let l=new xe;return this.encodeCompressedGtin(l,ie.HEADER_SIZE),this.encodeCompressedWeight(l,ie.HEADER_SIZE+ct.GTIN_SIZE,ie.WEIGHT_SIZE),l.toString()}}ie.HEADER_SIZE=5,ie.WEIGHT_SIZE=15;class Se extends ie{constructor(l){super(l)}addWeightCode(l,d){l.append("(3103)")}checkWeight(l){return l}}class Ne extends ie{constructor(l){super(l)}addWeightCode(l,d){d<1e4?l.append("(3202)"):l.append("(3203)")}checkWeight(l){return l<1e4?l:l-1e4}}class Ze extends we{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<Ze.HEADER_SIZE+we.GTIN_SIZE)throw new ne;let l=new xe;this.encodeCompressedGtin(l,Ze.HEADER_SIZE);let d=this.getGeneralDecoder().extractNumericValueFromBitArray(Ze.HEADER_SIZE+we.GTIN_SIZE,Ze.LAST_DIGIT_SIZE);l.append("(392"),l.append(d),l.append(")");let h=this.getGeneralDecoder().decodeGeneralPurposeField(Ze.HEADER_SIZE+we.GTIN_SIZE+Ze.LAST_DIGIT_SIZE,null);return l.append(h.getNewString()),l.toString()}}Ze.HEADER_SIZE=8,Ze.LAST_DIGIT_SIZE=2;class dt extends we{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<dt.HEADER_SIZE+we.GTIN_SIZE)throw new ne;let l=new xe;this.encodeCompressedGtin(l,dt.HEADER_SIZE);let d=this.getGeneralDecoder().extractNumericValueFromBitArray(dt.HEADER_SIZE+we.GTIN_SIZE,dt.LAST_DIGIT_SIZE);l.append("(393"),l.append(d),l.append(")");let h=this.getGeneralDecoder().extractNumericValueFromBitArray(dt.HEADER_SIZE+we.GTIN_SIZE+dt.LAST_DIGIT_SIZE,dt.FIRST_THREE_DIGITS_SIZE);h/100==0&&l.append("0"),h/10==0&&l.append("0"),l.append(h);let p=this.getGeneralDecoder().decodeGeneralPurposeField(dt.HEADER_SIZE+we.GTIN_SIZE+dt.LAST_DIGIT_SIZE+dt.FIRST_THREE_DIGITS_SIZE,null);return l.append(p.getNewString()),l.toString()}}dt.HEADER_SIZE=8,dt.LAST_DIGIT_SIZE=2,dt.FIRST_THREE_DIGITS_SIZE=10;class gt extends ct{constructor(l,d,h){super(l),this.dateCode=h,this.firstAIdigits=d}parseInformation(){if(this.getInformation().getSize()!=gt.HEADER_SIZE+gt.GTIN_SIZE+gt.WEIGHT_SIZE+gt.DATE_SIZE)throw new ne;let l=new xe;return this.encodeCompressedGtin(l,gt.HEADER_SIZE),this.encodeCompressedWeight(l,gt.HEADER_SIZE+gt.GTIN_SIZE,gt.WEIGHT_SIZE),this.encodeCompressedDate(l,gt.HEADER_SIZE+gt.GTIN_SIZE+gt.WEIGHT_SIZE),l.toString()}encodeCompressedDate(l,d){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(d,gt.DATE_SIZE);if(h==38400)return;l.append("("),l.append(this.dateCode),l.append(")");let p=h%32;h/=32;let b=h%12+1;h/=12;let y=h;y/10==0&&l.append("0"),l.append(y),b/10==0&&l.append("0"),l.append(b),p/10==0&&l.append("0"),l.append(p)}addWeightCode(l,d){l.append("("),l.append(this.firstAIdigits),l.append(d/1e5),l.append(")")}checkWeight(l){return l%1e5}}gt.HEADER_SIZE=8,gt.WEIGHT_SIZE=20,gt.DATE_SIZE=16;function ht(ee){try{if(ee.get(1))return new _e(ee);if(!ee.get(2))return new Ye(ee);switch(he.extractNumericValueFromBitArray(ee,1,4)){case 4:return new Se(ee);case 5:return new Ne(ee)}switch(he.extractNumericValueFromBitArray(ee,1,5)){case 12:return new Ze(ee);case 13:return new dt(ee)}switch(he.extractNumericValueFromBitArray(ee,1,7)){case 56:return new gt(ee,"310","11");case 57:return new gt(ee,"320","11");case 58:return new gt(ee,"310","13");case 59:return new gt(ee,"320","13");case 60:return new gt(ee,"310","15");case 61:return new gt(ee,"320","15");case 62:return new gt(ee,"310","17");case 63:return new gt(ee,"320","17")}}catch(l){throw console.log(l),new De("unknown decoder: "+ee)}}class wt{constructor(l,d,h,p){this.leftchar=l,this.rightchar=d,this.finderpattern=h,this.maybeLast=p}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(l,d){return l instanceof wt?wt.equalsOrNull(l.leftchar,d.leftchar)&&wt.equalsOrNull(l.rightchar,d.rightchar)&&wt.equalsOrNull(l.finderpattern,d.finderpattern):!1}static equalsOrNull(l,d){return l===null?d===null:wt.equals(l,d)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class It{constructor(l,d,h){this.pairs=l,this.rowNumber=d,this.wasReversed=h}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(l){return this.checkEqualitity(this,l)}toString(){return"{ "+this.pairs+" }"}equals(l,d){return l instanceof It?this.checkEqualitity(l,d)&&l.wasReversed===d.wasReversed:!1}checkEqualitity(l,d){if(!l||!d)return;let h;return l.forEach((p,b)=>{d.forEach(y=>{p.getLeftChar().getValue()===y.getLeftChar().getValue()&&p.getRightChar().getValue()===y.getRightChar().getValue()&&p.getFinderPatter().getValue()===y.getFinderPatter().getValue()&&(h=!0)})}),h}}class ot extends ze{constructor(l){super(...arguments),this.pairs=new Array(ot.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=l===!0}decodeRow(l,d,h){this.pairs.length=0,this.startFromEven=!1;try{return ot.constructResult(this.decodeRow2pairs(l,d))}catch(p){this.verbose&&console.log(p)}return this.pairs.length=0,this.startFromEven=!0,ot.constructResult(this.decodeRow2pairs(l,d))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(l,d){let h=!1;for(;!h;)try{this.pairs.push(this.retrieveNextPair(d,this.pairs,l))}catch(b){if(b instanceof ne){if(!this.pairs.length)throw new ne;h=!0}}if(this.checkChecksum())return this.pairs;let p;if(this.rows.length?p=!0:p=!1,this.storeRow(l,!1),p){let b=this.checkRowsBoolean(!1);if(b!=null||(b=this.checkRowsBoolean(!0),b!=null))return b}throw new ne}checkRowsBoolean(l){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,l&&(this.rows=this.rows.reverse());let d=null;try{d=this.checkRows(new Array,0)}catch(h){this.verbose&&console.log(h)}return l&&(this.rows=this.rows.reverse()),d}checkRows(l,d){for(let h=d;h<this.rows.length;h++){let p=this.rows[h];this.pairs.length=0;for(let y of l)this.pairs.push(y.getPairs());if(this.pairs.push(p.getPairs()),!ot.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let b=new Array(l);b.push(p);try{return this.checkRows(b,h+1)}catch(y){this.verbose&&console.log(y)}}throw new ne}static isValidSequence(l){for(let d of ot.FINDER_PATTERN_SEQUENCES){if(l.length>d.length)continue;let h=!0;for(let p=0;p<l.length;p++)if(l[p].getFinderPattern().getValue()!=d[p]){h=!1;break}if(h)return!0}return!1}storeRow(l,d){let h=0,p=!1,b=!1;for(;h<this.rows.length;){let y=this.rows[h];if(y.getRowNumber()>l){b=y.isEquivalent(this.pairs);break}p=y.isEquivalent(this.pairs),h++}b||p||ot.isPartialRow(this.pairs,this.rows)||(this.rows.push(h,new It(this.pairs,l,d)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(l,d){for(let h of d)if(h.getPairs().length!==l.length){for(let p of h.getPairs())for(let b of l)if(wt.equals(p,b))break}}static isPartialRow(l,d){for(let h of d){let p=!0;for(let b of l){let y=!1;for(let S of h.getPairs())if(b.equals(S)){y=!0;break}if(!y){p=!1;break}}if(p)return!0}return!1}getRows(){return this.rows}static constructResult(l){let d=pr.buildBitArray(l),p=ht(d).parseInformation(),b=l[0].getFinderPattern().getResultPoints(),y=l[l.length-1].getFinderPattern().getResultPoints(),S=[b[0],b[1],y[0],y[1]];return new P(p,null,null,S,pe.RSS_EXPANDED,null)}checkChecksum(){let l=this.pairs.get(0),d=l.getLeftChar(),h=l.getRightChar();if(h==null)return!1;let p=h.getChecksumPortion(),b=2;for(let S=1;S<this.pairs.size();++S){let j=this.pairs.get(S);p+=j.getLeftChar().getChecksumPortion(),b++;let M=j.getRightChar();M!=null&&(p+=M.getChecksumPortion(),b++)}return p%=211,211*(b-4)+p==d.getValue()}static getNextSecondBar(l,d){let h;return l.get(d)?(h=l.getNextUnset(d),h=l.getNextSet(h)):(h=l.getNextSet(d),h=l.getNextUnset(h)),h}retrieveNextPair(l,d,h){let p=d.length%2==0;this.startFromEven&&(p=!p);let b,y=!0,S=-1;do this.findNextPair(l,d,S),b=this.parseFoundFinderPattern(l,h,p),b==null?S=ot.getNextSecondBar(l,this.startEnd[0]):y=!1;while(y);let j=this.decodeDataCharacter(l,b,p,!0);if(!this.isEmptyPair(d)&&d[d.length-1].mustBeLast())throw new ne;let M;try{M=this.decodeDataCharacter(l,b,p,!1)}catch(G){M=null,this.verbose&&console.log(G)}return new wt(j,M,b,!0)}isEmptyPair(l){return l.length===0}findNextPair(l,d,h){let p=this.getDecodeFinderCounters();p[0]=0,p[1]=0,p[2]=0,p[3]=0;let b=l.getSize(),y;h>=0?y=h:this.isEmptyPair(d)?y=0:y=d[d.length-1].getFinderPattern().getStartEnd()[1];let S=d.length%2!=0;this.startFromEven&&(S=!S);let j=!1;for(;y<b&&(j=!l.get(y),!!j);)y++;let M=0,G=y;for(let te=y;te<b;te++)if(l.get(te)!=j)p[M]++;else{if(M==3){if(S&&ot.reverseCounters(p),ot.isFinderPattern(p)){this.startEnd[0]=G,this.startEnd[1]=te;return}S&&ot.reverseCounters(p),G+=p[0]+p[1],p[0]=p[2],p[1]=p[3],p[2]=0,p[3]=0,M--}else M++;p[M]=1,j=!j}throw new ne}static reverseCounters(l){let d=l.length;for(let h=0;h<d/2;++h){let p=l[h];l[h]=l[d-h-1],l[d-h-1]=p}}parseFoundFinderPattern(l,d,h){let p,b,y;if(h){let M=this.startEnd[0]-1;for(;M>=0&&!l.get(M);)M--;M++,p=this.startEnd[0]-M,b=M,y=this.startEnd[1]}else b=this.startEnd[0],y=l.getNextUnset(this.startEnd[1]+1),p=y-this.startEnd[1];let S=this.getDecodeFinderCounters();A.arraycopy(S,0,S,1,S.length-1),S[0]=p;let j;try{j=this.parseFinderValue(S,ot.FINDER_PATTERNS)}catch{return null}return new Rt(j,[b,y],b,y,d)}decodeDataCharacter(l,d,h,p){let b=this.getDataCharacterCounters();for(let Jr=0;Jr<b.length;Jr++)b[Jr]=0;if(p)ot.recordPatternInReverse(l,d.getStartEnd()[0],b);else{ot.recordPattern(l,d.getStartEnd()[1],b);for(let Jr=0,da=b.length-1;Jr<da;Jr++,da--){let Xa=b[Jr];b[Jr]=b[da],b[da]=Xa}}let y=17,S=Ee.sum(new Int32Array(b))/y,j=(d.getStartEnd()[1]-d.getStartEnd()[0])/15;if(Math.abs(S-j)/j>.3)throw new ne;let M=this.getOddCounts(),G=this.getEvenCounts(),te=this.getOddRoundingErrors(),se=this.getEvenRoundingErrors();for(let Jr=0;Jr<b.length;Jr++){let da=1*b[Jr]/S,Xa=da+.5;if(Xa<1){if(da<.3)throw new ne;Xa=1}else if(Xa>8){if(da>8.7)throw new ne;Xa=8}let Bl=Jr/2;(Jr&1)==0?(M[Bl]=Xa,te[Bl]=da-Xa):(G[Bl]=Xa,se[Bl]=da-Xa)}this.adjustOddEvenCounts(y);let ke=4*d.getValue()+(h?0:2)+(p?0:1)-1,Ce=0,Re=0;for(let Jr=M.length-1;Jr>=0;Jr--){if(ot.isNotA1left(d,h,p)){let da=ot.WEIGHTS[ke][2*Jr];Re+=M[Jr]*da}Ce+=M[Jr]}let Ge=0;for(let Jr=G.length-1;Jr>=0;Jr--)if(ot.isNotA1left(d,h,p)){let da=ot.WEIGHTS[ke][2*Jr+1];Ge+=G[Jr]*da}let rt=Re+Ge;if((Ce&1)!=0||Ce>13||Ce<4)throw new ne;let Et=(13-Ce)/2,_t=ot.SYMBOL_WIDEST[Et],yt=9-_t,kr=Mt.getRSSvalue(M,_t,!0),lr=Mt.getRSSvalue(G,yt,!1),Fn=ot.EVEN_TOTAL_SUBSET[Et],es=ot.GSUM[Et],_a=kr*Fn+lr+es;return new kt(_a,rt)}static isNotA1left(l,d,h){return!(l.getValue()==0&&d&&h)}adjustOddEvenCounts(l){let d=Ee.sum(new Int32Array(this.getOddCounts())),h=Ee.sum(new Int32Array(this.getEvenCounts())),p=!1,b=!1;d>13?b=!0:d<4&&(p=!0);let y=!1,S=!1;h>13?S=!0:h<4&&(y=!0);let j=d+h-l,M=(d&1)==1,G=(h&1)==0;if(j==1)if(M){if(G)throw new ne;b=!0}else{if(!G)throw new ne;S=!0}else if(j==-1)if(M){if(G)throw new ne;p=!0}else{if(!G)throw new ne;y=!0}else if(j==0){if(M){if(!G)throw new ne;d<h?(p=!0,S=!0):(b=!0,y=!0)}else if(G)throw new ne}else throw new ne;if(p){if(b)throw new ne;ot.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&ot.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(S)throw new ne;ot.increment(this.getEvenCounts(),this.getOddRoundingErrors())}S&&ot.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.SYMBOL_WIDEST=[7,5,4,3,1],ot.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ot.GSUM=[0,348,1388,2948,3988],ot.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ot.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ot.FINDER_PAT_A=0,ot.FINDER_PAT_B=1,ot.FINDER_PAT_C=2,ot.FINDER_PAT_D=3,ot.FINDER_PAT_E=4,ot.FINDER_PAT_F=5,ot.FINDER_PATTERN_SEQUENCES=[[ot.FINDER_PAT_A,ot.FINDER_PAT_A],[ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B],[ot.FINDER_PAT_A,ot.FINDER_PAT_C,ot.FINDER_PAT_B,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_C],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F]],ot.MAX_PAIRS=11;class Br extends kt{constructor(l,d,h){super(l,d),this.count=0,this.finderPattern=h}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class $t extends ze{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(l,d,h){const p=this.decodePair(d,!1,l,h);$t.addOrTally(this.possibleLeftPairs,p),d.reverse();let b=this.decodePair(d,!0,l,h);$t.addOrTally(this.possibleRightPairs,b),d.reverse();for(let y of this.possibleLeftPairs)if(y.getCount()>1){for(let S of this.possibleRightPairs)if(S.getCount()>1&&$t.checkChecksum(y,S))return $t.constructResult(y,S)}throw new ne}static addOrTally(l,d){if(d==null)return;let h=!1;for(let p of l)if(p.getValue()===d.getValue()){p.incrementCount(),h=!0;break}h||l.push(d)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(l,d){let h=4537077*l.getValue()+d.getValue(),p=new String(h).toString(),b=new xe;for(let M=13-p.length;M>0;M--)b.append("0");b.append(p);let y=0;for(let M=0;M<13;M++){let G=b.charAt(M).charCodeAt(0)-48;y+=(M&1)===0?3*G:G}y=10-y%10,y===10&&(y=0),b.append(y.toString());let S=l.getFinderPattern().getResultPoints(),j=d.getFinderPattern().getResultPoints();return new P(b.toString(),null,0,[S[0],S[1],j[0],j[1]],pe.RSS_14,new Date().getTime())}static checkChecksum(l,d){let h=(l.getChecksumPortion()+16*d.getChecksumPortion())%79,p=9*l.getFinderPattern().getValue()+d.getFinderPattern().getValue();return p>72&&p--,p>8&&p--,h===p}decodePair(l,d,h,p){try{let b=this.findFinderPattern(l,d),y=this.parseFoundFinderPattern(l,h,d,b),S=p==null?null:p.get(X.NEED_RESULT_POINT_CALLBACK);if(S!=null){let G=(b[0]+b[1])/2;d&&(G=l.getSize()-1-G),S.foundPossibleResultPoint(new Fe(G,h))}let j=this.decodeDataCharacter(l,y,!0),M=this.decodeDataCharacter(l,y,!1);return new Br(1597*j.getValue()+M.getValue(),j.getChecksumPortion()+4*M.getChecksumPortion(),y)}catch{return null}}decodeDataCharacter(l,d,h){let p=this.getDataCharacterCounters();for(let Ge=0;Ge<p.length;Ge++)p[Ge]=0;if(h)Nt.recordPatternInReverse(l,d.getStartEnd()[0],p);else{Nt.recordPattern(l,d.getStartEnd()[1]+1,p);for(let Ge=0,rt=p.length-1;Ge<rt;Ge++,rt--){let Et=p[Ge];p[Ge]=p[rt],p[rt]=Et}}let b=h?16:15,y=Ee.sum(new Int32Array(p))/b,S=this.getOddCounts(),j=this.getEvenCounts(),M=this.getOddRoundingErrors(),G=this.getEvenRoundingErrors();for(let Ge=0;Ge<p.length;Ge++){let rt=p[Ge]/y,Et=Math.floor(rt+.5);Et<1?Et=1:Et>8&&(Et=8);let _t=Math.floor(Ge/2);(Ge&1)===0?(S[_t]=Et,M[_t]=rt-Et):(j[_t]=Et,G[_t]=rt-Et)}this.adjustOddEvenCounts(h,b);let te=0,se=0;for(let Ge=S.length-1;Ge>=0;Ge--)se*=9,se+=S[Ge],te+=S[Ge];let ke=0,Ce=0;for(let Ge=j.length-1;Ge>=0;Ge--)ke*=9,ke+=j[Ge],Ce+=j[Ge];let Re=se+3*ke;if(h){if((te&1)!==0||te>12||te<4)throw new ne;let Ge=(12-te)/2,rt=$t.OUTSIDE_ODD_WIDEST[Ge],Et=9-rt,_t=Mt.getRSSvalue(S,rt,!1),yt=Mt.getRSSvalue(j,Et,!0),kr=$t.OUTSIDE_EVEN_TOTAL_SUBSET[Ge],lr=$t.OUTSIDE_GSUM[Ge];return new kt(_t*kr+yt+lr,Re)}else{if((Ce&1)!==0||Ce>10||Ce<4)throw new ne;let Ge=(10-Ce)/2,rt=$t.INSIDE_ODD_WIDEST[Ge],Et=9-rt,_t=Mt.getRSSvalue(S,rt,!0),yt=Mt.getRSSvalue(j,Et,!1),kr=$t.INSIDE_ODD_TOTAL_SUBSET[Ge],lr=$t.INSIDE_GSUM[Ge];return new kt(yt*kr+_t+lr,Re)}}findFinderPattern(l,d){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let p=l.getSize(),b=!1,y=0;for(;y<p&&(b=!l.get(y),d!==b);)y++;let S=0,j=y;for(let M=y;M<p;M++)if(l.get(M)!==b)h[S]++;else{if(S===3){if(ze.isFinderPattern(h))return[j,M];j+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,S--}else S++;h[S]=1,b=!b}throw new ne}parseFoundFinderPattern(l,d,h,p){let b=l.get(p[0]),y=p[0]-1;for(;y>=0&&b!==l.get(y);)y--;y++;const S=p[0]-y,j=this.getDecodeFinderCounters(),M=new Int32Array(j.length);A.arraycopy(j,0,M,1,j.length-1),M[0]=S;const G=this.parseFinderValue(M,$t.FINDER_PATTERNS);let te=y,se=p[1];return h&&(te=l.getSize()-1-te,se=l.getSize()-1-se),new Rt(G,[y,p[1]],te,se,d)}adjustOddEvenCounts(l,d){let h=Ee.sum(new Int32Array(this.getOddCounts())),p=Ee.sum(new Int32Array(this.getEvenCounts())),b=!1,y=!1,S=!1,j=!1;l?(h>12?y=!0:h<4&&(b=!0),p>12?j=!0:p<4&&(S=!0)):(h>11?y=!0:h<5&&(b=!0),p>10?j=!0:p<4&&(S=!0));let M=h+p-d,G=(h&1)===(l?1:0),te=(p&1)===1;if(M===1)if(G){if(te)throw new ne;y=!0}else{if(!te)throw new ne;j=!0}else if(M===-1)if(G){if(te)throw new ne;b=!0}else{if(!te)throw new ne;S=!0}else if(M===0){if(G){if(!te)throw new ne;h<p?(b=!0,j=!0):(y=!0,S=!0)}else if(te)throw new ne}else throw new ne;if(b){if(y)throw new ne;ze.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&ze.decrement(this.getOddCounts(),this.getOddRoundingErrors()),S){if(j)throw new ne;ze.increment(this.getEvenCounts(),this.getOddRoundingErrors())}j&&ze.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],$t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],$t.OUTSIDE_GSUM=[0,161,961,2015,2715],$t.INSIDE_GSUM=[0,336,1036,1516],$t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],$t.INSIDE_ODD_WIDEST=[2,4,6,8],$t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class jn extends Nt{constructor(l,d){super(),this.readers=[],this.verbose=d===!0;const h=l?l.get(X.POSSIBLE_FORMATS):null,p=l&&l.get(X.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;h?((h.includes(pe.EAN_13)||h.includes(pe.UPC_A)||h.includes(pe.EAN_8)||h.includes(pe.UPC_E))&&this.readers.push(new Or(l)),h.includes(pe.CODE_39)&&this.readers.push(new Ht(p)),h.includes(pe.CODE_128)&&this.readers.push(new mt),h.includes(pe.ITF)&&this.readers.push(new Dt),h.includes(pe.RSS_14)&&this.readers.push(new $t),h.includes(pe.RSS_EXPANDED)&&this.readers.push(new ot(this.verbose))):(this.readers.push(new Or(l)),this.readers.push(new Ht),this.readers.push(new Or(l)),this.readers.push(new mt),this.readers.push(new Dt),this.readers.push(new $t),this.readers.push(new ot(this.verbose)))}decodeRow(l,d,h){for(let p=0;p<this.readers.length;p++)try{return this.readers[p].decodeRow(l,d,h)}catch{}throw new ne}reset(){this.readers.forEach(l=>l.reset())}}class si extends q{constructor(l=500,d){super(new jn(d),l,d)}}class cr{constructor(l,d,h){this.ecCodewords=l,this.ecBlocks=[d],h&&this.ecBlocks.push(h)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ir{constructor(l,d){this.count=l,this.dataCodewords=d}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ur{constructor(l,d,h,p,b,y){this.versionNumber=l,this.symbolSizeRows=d,this.symbolSizeColumns=h,this.dataRegionSizeRows=p,this.dataRegionSizeColumns=b,this.ecBlocks=y;let S=0;const j=y.getECCodewords(),M=y.getECBlocks();for(let G of M)S+=G.getCount()*(G.getDataCodewords()+j);this.totalCodewords=S}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(l,d){if((l&1)!==0||(d&1)!==0)throw new F;for(let h of ur.VERSIONS)if(h.symbolSizeRows===l&&h.symbolSizeColumns===d)return h;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new ur(1,10,10,8,8,new cr(5,new ir(1,3))),new ur(2,12,12,10,10,new cr(7,new ir(1,5))),new ur(3,14,14,12,12,new cr(10,new ir(1,8))),new ur(4,16,16,14,14,new cr(12,new ir(1,12))),new ur(5,18,18,16,16,new cr(14,new ir(1,18))),new ur(6,20,20,18,18,new cr(18,new ir(1,22))),new ur(7,22,22,20,20,new cr(20,new ir(1,30))),new ur(8,24,24,22,22,new cr(24,new ir(1,36))),new ur(9,26,26,24,24,new cr(28,new ir(1,44))),new ur(10,32,32,14,14,new cr(36,new ir(1,62))),new ur(11,36,36,16,16,new cr(42,new ir(1,86))),new ur(12,40,40,18,18,new cr(48,new ir(1,114))),new ur(13,44,44,20,20,new cr(56,new ir(1,144))),new ur(14,48,48,22,22,new cr(68,new ir(1,174))),new ur(15,52,52,24,24,new cr(42,new ir(2,102))),new ur(16,64,64,14,14,new cr(56,new ir(2,140))),new ur(17,72,72,16,16,new cr(36,new ir(4,92))),new ur(18,80,80,18,18,new cr(48,new ir(4,114))),new ur(19,88,88,20,20,new cr(56,new ir(4,144))),new ur(20,96,96,22,22,new cr(68,new ir(4,174))),new ur(21,104,104,24,24,new cr(56,new ir(6,136))),new ur(22,120,120,18,18,new cr(68,new ir(6,175))),new ur(23,132,132,20,20,new cr(62,new ir(8,163))),new ur(24,144,144,22,22,new cr(62,new ir(8,156),new ir(2,155))),new ur(25,8,18,6,16,new cr(7,new ir(1,5))),new ur(26,8,32,6,14,new cr(11,new ir(1,10))),new ur(27,12,26,10,24,new cr(14,new ir(1,16))),new ur(28,12,36,10,16,new cr(18,new ir(1,22))),new ur(29,16,36,14,16,new cr(24,new ir(1,32))),new ur(30,16,48,14,22,new cr(28,new ir(1,49)))]}}ur.VERSIONS=ur.buildVersions();class Dn{constructor(l){const d=l.getHeight();if(d<8||d>144||(d&1)!==0)throw new F;this.version=Dn.readVersion(l),this.mappingBitMatrix=this.extractDataRegion(l),this.readMappingMatrix=new W(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(l){const d=l.getHeight(),h=l.getWidth();return ur.getVersionForDimensions(d,h)}readCodewords(){const l=new Int8Array(this.version.getTotalCodewords());let d=0,h=4,p=0;const b=this.mappingBitMatrix.getHeight(),y=this.mappingBitMatrix.getWidth();let S=!1,j=!1,M=!1,G=!1;do if(h===b&&p===0&&!S)l[d++]=this.readCorner1(b,y)&255,h-=2,p+=2,S=!0;else if(h===b-2&&p===0&&(y&3)!==0&&!j)l[d++]=this.readCorner2(b,y)&255,h-=2,p+=2,j=!0;else if(h===b+4&&p===2&&(y&7)===0&&!M)l[d++]=this.readCorner3(b,y)&255,h-=2,p+=2,M=!0;else if(h===b-2&&p===0&&(y&7)===4&&!G)l[d++]=this.readCorner4(b,y)&255,h-=2,p+=2,G=!0;else{do h<b&&p>=0&&!this.readMappingMatrix.get(p,h)&&(l[d++]=this.readUtah(h,p,b,y)&255),h-=2,p+=2;while(h>=0&&p<y);h+=1,p+=3;do h>=0&&p<y&&!this.readMappingMatrix.get(p,h)&&(l[d++]=this.readUtah(h,p,b,y)&255),h+=2,p-=2;while(h<b&&p>=0);h+=3,p+=1}while(h<b||p<y);if(d!==this.version.getTotalCodewords())throw new F;return l}readModule(l,d,h,p){return l<0&&(l+=h,d+=4-(h+4&7)),d<0&&(d+=p,l+=4-(p+4&7)),this.readMappingMatrix.set(d,l),this.mappingBitMatrix.get(d,l)}readUtah(l,d,h,p){let b=0;return this.readModule(l-2,d-2,h,p)&&(b|=1),b<<=1,this.readModule(l-2,d-1,h,p)&&(b|=1),b<<=1,this.readModule(l-1,d-2,h,p)&&(b|=1),b<<=1,this.readModule(l-1,d-1,h,p)&&(b|=1),b<<=1,this.readModule(l-1,d,h,p)&&(b|=1),b<<=1,this.readModule(l,d-2,h,p)&&(b|=1),b<<=1,this.readModule(l,d-1,h,p)&&(b|=1),b<<=1,this.readModule(l,d,h,p)&&(b|=1),b}readCorner1(l,d){let h=0;return this.readModule(l-1,0,l,d)&&(h|=1),h<<=1,this.readModule(l-1,1,l,d)&&(h|=1),h<<=1,this.readModule(l-1,2,l,d)&&(h|=1),h<<=1,this.readModule(0,d-2,l,d)&&(h|=1),h<<=1,this.readModule(0,d-1,l,d)&&(h|=1),h<<=1,this.readModule(1,d-1,l,d)&&(h|=1),h<<=1,this.readModule(2,d-1,l,d)&&(h|=1),h<<=1,this.readModule(3,d-1,l,d)&&(h|=1),h}readCorner2(l,d){let h=0;return this.readModule(l-3,0,l,d)&&(h|=1),h<<=1,this.readModule(l-2,0,l,d)&&(h|=1),h<<=1,this.readModule(l-1,0,l,d)&&(h|=1),h<<=1,this.readModule(0,d-4,l,d)&&(h|=1),h<<=1,this.readModule(0,d-3,l,d)&&(h|=1),h<<=1,this.readModule(0,d-2,l,d)&&(h|=1),h<<=1,this.readModule(0,d-1,l,d)&&(h|=1),h<<=1,this.readModule(1,d-1,l,d)&&(h|=1),h}readCorner3(l,d){let h=0;return this.readModule(l-1,0,l,d)&&(h|=1),h<<=1,this.readModule(l-1,d-1,l,d)&&(h|=1),h<<=1,this.readModule(0,d-3,l,d)&&(h|=1),h<<=1,this.readModule(0,d-2,l,d)&&(h|=1),h<<=1,this.readModule(0,d-1,l,d)&&(h|=1),h<<=1,this.readModule(1,d-3,l,d)&&(h|=1),h<<=1,this.readModule(1,d-2,l,d)&&(h|=1),h<<=1,this.readModule(1,d-1,l,d)&&(h|=1),h}readCorner4(l,d){let h=0;return this.readModule(l-3,0,l,d)&&(h|=1),h<<=1,this.readModule(l-2,0,l,d)&&(h|=1),h<<=1,this.readModule(l-1,0,l,d)&&(h|=1),h<<=1,this.readModule(0,d-2,l,d)&&(h|=1),h<<=1,this.readModule(0,d-1,l,d)&&(h|=1),h<<=1,this.readModule(1,d-1,l,d)&&(h|=1),h<<=1,this.readModule(2,d-1,l,d)&&(h|=1),h<<=1,this.readModule(3,d-1,l,d)&&(h|=1),h}extractDataRegion(l){const d=this.version.getSymbolSizeRows(),h=this.version.getSymbolSizeColumns();if(l.getHeight()!==d)throw new _("Dimension of bitMatrix must match the version size");const p=this.version.getDataRegionSizeRows(),b=this.version.getDataRegionSizeColumns(),y=d/p|0,S=h/b|0,j=y*p,M=S*b,G=new W(M,j);for(let te=0;te<y;++te){const se=te*p;for(let ke=0;ke<S;++ke){const Ce=ke*b;for(let Re=0;Re<p;++Re){const Ge=te*(p+2)+1+Re,rt=se+Re;for(let Et=0;Et<b;++Et){const _t=ke*(b+2)+1+Et;if(l.get(_t,Ge)){const yt=Ce+Et;G.set(yt,rt)}}}}}return G}}class fs{constructor(l,d){this.numDataCodewords=l,this.codewords=d}static getDataBlocks(l,d){const h=d.getECBlocks();let p=0;const b=h.getECBlocks();for(let Re of b)p+=Re.getCount();const y=new Array(p);let S=0;for(let Re of b)for(let Ge=0;Ge<Re.getCount();Ge++){const rt=Re.getDataCodewords(),Et=h.getECCodewords()+rt;y[S++]=new fs(rt,new Uint8Array(Et))}const M=y[0].codewords.length-h.getECCodewords(),G=M-1;let te=0;for(let Re=0;Re<G;Re++)for(let Ge=0;Ge<S;Ge++)y[Ge].codewords[Re]=l[te++];const se=d.getVersionNumber()===24,ke=se?8:S;for(let Re=0;Re<ke;Re++)y[Re].codewords[M-1]=l[te++];const Ce=y[0].codewords.length;for(let Re=M;Re<Ce;Re++)for(let Ge=0;Ge<S;Ge++){const rt=se?(Ge+8)%S:Ge,Et=se&&rt>7?Re-1:Re;y[rt].codewords[Et]=l[te++]}if(te!==l.length)throw new _;return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Va{constructor(l){this.bytes=l,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(l){if(l<1||l>32||l>this.available())throw new _(""+l);let d=0,h=this.bitOffset,p=this.byteOffset;const b=this.bytes;if(h>0){const y=8-h,S=l<y?l:y,j=y-S,M=255>>8-S<<j;d=(b[p]&M)>>j,l-=S,h+=S,h===8&&(h=0,p++)}if(l>0){for(;l>=8;)d=d<<8|b[p]&255,p++,l-=8;if(l>0){const y=8-l,S=255>>y<<y;d=d<<l|(b[p]&S)>>y,h+=l}}return this.bitOffset=h,this.byteOffset=p,d}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Lr;(function(ee){ee[ee.PAD_ENCODE=0]="PAD_ENCODE",ee[ee.ASCII_ENCODE=1]="ASCII_ENCODE",ee[ee.C40_ENCODE=2]="C40_ENCODE",ee[ee.TEXT_ENCODE=3]="TEXT_ENCODE",ee[ee.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",ee[ee.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",ee[ee.BASE256_ENCODE=6]="BASE256_ENCODE"})(Lr||(Lr={}));class hs{static decode(l){const d=new Va(l),h=new xe,p=new xe,b=new Array;let y=Lr.ASCII_ENCODE;do if(y===Lr.ASCII_ENCODE)y=this.decodeAsciiSegment(d,h,p);else{switch(y){case Lr.C40_ENCODE:this.decodeC40Segment(d,h);break;case Lr.TEXT_ENCODE:this.decodeTextSegment(d,h);break;case Lr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(d,h);break;case Lr.EDIFACT_ENCODE:this.decodeEdifactSegment(d,h);break;case Lr.BASE256_ENCODE:this.decodeBase256Segment(d,h,b);break;default:throw new F}y=Lr.ASCII_ENCODE}while(y!==Lr.PAD_ENCODE&&d.available()>0);return p.length()>0&&h.append(p.toString()),new Pe(l,h.toString(),b.length===0?null:b,null)}static decodeAsciiSegment(l,d,h){let p=!1;do{let b=l.readBits(8);if(b===0)throw new F;if(b<=128)return p&&(b+=128),d.append(String.fromCharCode(b-1)),Lr.ASCII_ENCODE;if(b===129)return Lr.PAD_ENCODE;if(b<=229){const y=b-130;y<10&&d.append("0"),d.append(""+y)}else switch(b){case 230:return Lr.C40_ENCODE;case 231:return Lr.BASE256_ENCODE;case 232:d.append("");break;case 233:case 234:break;case 235:p=!0;break;case 236:d.append("[)>05"),h.insert(0,"");break;case 237:d.append("[)>06"),h.insert(0,"");break;case 238:return Lr.ANSIX12_ENCODE;case 239:return Lr.TEXT_ENCODE;case 240:return Lr.EDIFACT_ENCODE;case 241:break;default:if(b!==254||l.available()!==0)throw new F;break}}while(l.available()>0);return Lr.ASCII_ENCODE}static decodeC40Segment(l,d){let h=!1;const p=[];let b=0;do{if(l.available()===8)return;const y=l.readBits(8);if(y===254)return;this.parseTwoBytes(y,l.readBits(8),p);for(let S=0;S<3;S++){const j=p[S];switch(b){case 0:if(j<3)b=j+1;else if(j<this.C40_BASIC_SET_CHARS.length){const M=this.C40_BASIC_SET_CHARS[j];h?(d.append(String.fromCharCode(M.charCodeAt(0)+128)),h=!1):d.append(M)}else throw new F;break;case 1:h?(d.append(String.fromCharCode(j+128)),h=!1):d.append(String.fromCharCode(j)),b=0;break;case 2:if(j<this.C40_SHIFT2_SET_CHARS.length){const M=this.C40_SHIFT2_SET_CHARS[j];h?(d.append(String.fromCharCode(M.charCodeAt(0)+128)),h=!1):d.append(M)}else switch(j){case 27:d.append("");break;case 30:h=!0;break;default:throw new F}b=0;break;case 3:h?(d.append(String.fromCharCode(j+224)),h=!1):d.append(String.fromCharCode(j+96)),b=0;break;default:throw new F}}}while(l.available()>0)}static decodeTextSegment(l,d){let h=!1,p=[],b=0;do{if(l.available()===8)return;const y=l.readBits(8);if(y===254)return;this.parseTwoBytes(y,l.readBits(8),p);for(let S=0;S<3;S++){const j=p[S];switch(b){case 0:if(j<3)b=j+1;else if(j<this.TEXT_BASIC_SET_CHARS.length){const M=this.TEXT_BASIC_SET_CHARS[j];h?(d.append(String.fromCharCode(M.charCodeAt(0)+128)),h=!1):d.append(M)}else throw new F;break;case 1:h?(d.append(String.fromCharCode(j+128)),h=!1):d.append(String.fromCharCode(j)),b=0;break;case 2:if(j<this.TEXT_SHIFT2_SET_CHARS.length){const M=this.TEXT_SHIFT2_SET_CHARS[j];h?(d.append(String.fromCharCode(M.charCodeAt(0)+128)),h=!1):d.append(M)}else switch(j){case 27:d.append("");break;case 30:h=!0;break;default:throw new F}b=0;break;case 3:if(j<this.TEXT_SHIFT3_SET_CHARS.length){const M=this.TEXT_SHIFT3_SET_CHARS[j];h?(d.append(String.fromCharCode(M.charCodeAt(0)+128)),h=!1):d.append(M),b=0}else throw new F;break;default:throw new F}}}while(l.available()>0)}static decodeAnsiX12Segment(l,d){const h=[];do{if(l.available()===8)return;const p=l.readBits(8);if(p===254)return;this.parseTwoBytes(p,l.readBits(8),h);for(let b=0;b<3;b++){const y=h[b];switch(y){case 0:d.append("\r");break;case 1:d.append("*");break;case 2:d.append(">");break;case 3:d.append(" ");break;default:if(y<14)d.append(String.fromCharCode(y+44));else if(y<40)d.append(String.fromCharCode(y+51));else throw new F;break}}}while(l.available()>0)}static parseTwoBytes(l,d,h){let p=(l<<8)+d-1,b=Math.floor(p/1600);h[0]=b,p-=b*1600,b=Math.floor(p/40),h[1]=b,h[2]=p-b*40}static decodeEdifactSegment(l,d){do{if(l.available()<=16)return;for(let h=0;h<4;h++){let p=l.readBits(6);if(p===31){const b=8-l.getBitOffset();b!==8&&l.readBits(b);return}(p&32)===0&&(p|=64),d.append(String.fromCharCode(p))}}while(l.available()>0)}static decodeBase256Segment(l,d,h){let p=1+l.getByteOffset();const b=this.unrandomize255State(l.readBits(8),p++);let y;if(b===0?y=l.available()/8|0:b<250?y=b:y=250*(b-249)+this.unrandomize255State(l.readBits(8),p++),y<0)throw new F;const S=new Uint8Array(y);for(let j=0;j<y;j++){if(l.available()<8)throw new F;S[j]=this.unrandomize255State(l.readBits(8),p++)}h.push(S);try{d.append(J.decode(S,V.ISO88591))}catch(j){throw new De("Platform does not support required encoding: "+j.message)}}static unrandomize255State(l,d){const h=149*d%255+1,p=l-h;return p>=0?p:p+256}}hs.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],hs.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],hs.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],hs.TEXT_SHIFT2_SET_CHARS=hs.C40_SHIFT2_SET_CHARS,hs.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ki{constructor(){this.rsDecoder=new Te(Ie.DATA_MATRIX_FIELD_256)}decode(l){const d=new Dn(l),h=d.getVersion(),p=d.readCodewords(),b=fs.getDataBlocks(p,h);let y=0;for(let M of b)y+=M.getNumDataCodewords();const S=new Uint8Array(y),j=b.length;for(let M=0;M<j;M++){const G=b[M],te=G.getCodewords(),se=G.getNumDataCodewords();this.correctErrors(te,se);for(let ke=0;ke<se;ke++)S[ke*j+M]=te[ke]}return hs.decode(S)}correctErrors(l,d){const h=new Int32Array(l);try{this.rsDecoder.decode(h,l.length-d)}catch{throw new k}for(let p=0;p<d;p++)l[p]=h[p]}}class Ct{constructor(l){this.image=l,this.rectangleDetector=new Ke(this.image)}detect(){const l=this.rectangleDetector.detect();let d=this.detectSolid1(l);if(d=this.detectSolid2(d),d[3]=this.correctTopRight(d),!d[3])throw new ne;d=this.shiftToModuleCenter(d);const h=d[0],p=d[1],b=d[2],y=d[3];let S=this.transitionsBetween(h,y)+1,j=this.transitionsBetween(b,y)+1;(S&1)===1&&(S+=1),(j&1)===1&&(j+=1),4*S<7*j&&4*j<7*S&&(S=j=Math.max(S,j));let M=Ct.sampleGrid(this.image,h,p,b,y,S,j);return new He(M,[h,p,b,y])}static shiftPoint(l,d,h){let p=(d.getX()-l.getX())/(h+1),b=(d.getY()-l.getY())/(h+1);return new Fe(l.getX()+p,l.getY()+b)}static moveAway(l,d,h){let p=l.getX(),b=l.getY();return p<d?p-=1:p+=1,b<h?b-=1:b+=1,new Fe(p,b)}detectSolid1(l){let d=l[0],h=l[1],p=l[3],b=l[2],y=this.transitionsBetween(d,h),S=this.transitionsBetween(h,p),j=this.transitionsBetween(p,b),M=this.transitionsBetween(b,d),G=y,te=[b,d,h,p];return G>S&&(G=S,te[0]=d,te[1]=h,te[2]=p,te[3]=b),G>j&&(G=j,te[0]=h,te[1]=p,te[2]=b,te[3]=d),G>M&&(te[0]=p,te[1]=b,te[2]=d,te[3]=h),te}detectSolid2(l){let d=l[0],h=l[1],p=l[2],b=l[3],y=this.transitionsBetween(d,b),S=Ct.shiftPoint(h,p,(y+1)*4),j=Ct.shiftPoint(p,h,(y+1)*4),M=this.transitionsBetween(S,d),G=this.transitionsBetween(j,b);return M<G?(l[0]=d,l[1]=h,l[2]=p,l[3]=b):(l[0]=h,l[1]=p,l[2]=b,l[3]=d),l}correctTopRight(l){let d=l[0],h=l[1],p=l[2],b=l[3],y=this.transitionsBetween(d,b),S=this.transitionsBetween(h,b),j=Ct.shiftPoint(d,h,(S+1)*4),M=Ct.shiftPoint(p,h,(y+1)*4);y=this.transitionsBetween(j,b),S=this.transitionsBetween(M,b);let G=new Fe(b.getX()+(p.getX()-h.getX())/(y+1),b.getY()+(p.getY()-h.getY())/(y+1)),te=new Fe(b.getX()+(d.getX()-h.getX())/(S+1),b.getY()+(d.getY()-h.getY())/(S+1));if(!this.isValid(G))return this.isValid(te)?te:null;if(!this.isValid(te))return G;let se=this.transitionsBetween(j,G)+this.transitionsBetween(M,G),ke=this.transitionsBetween(j,te)+this.transitionsBetween(M,te);return se>ke?G:te}shiftToModuleCenter(l){let d=l[0],h=l[1],p=l[2],b=l[3],y=this.transitionsBetween(d,b)+1,S=this.transitionsBetween(p,b)+1,j=Ct.shiftPoint(d,h,S*4),M=Ct.shiftPoint(p,h,y*4);y=this.transitionsBetween(j,b)+1,S=this.transitionsBetween(M,b)+1,(y&1)===1&&(y+=1),(S&1)===1&&(S+=1);let G=(d.getX()+h.getX()+p.getX()+b.getX())/4,te=(d.getY()+h.getY()+p.getY()+b.getY())/4;d=Ct.moveAway(d,G,te),h=Ct.moveAway(h,G,te),p=Ct.moveAway(p,G,te),b=Ct.moveAway(b,G,te);let se,ke;return j=Ct.shiftPoint(d,h,S*4),j=Ct.shiftPoint(j,b,y*4),se=Ct.shiftPoint(h,d,S*4),se=Ct.shiftPoint(se,p,y*4),M=Ct.shiftPoint(p,b,S*4),M=Ct.shiftPoint(M,h,y*4),ke=Ct.shiftPoint(b,p,S*4),ke=Ct.shiftPoint(ke,d,y*4),[j,se,M,ke]}isValid(l){return l.getX()>=0&&l.getX()<this.image.getWidth()&&l.getY()>0&&l.getY()<this.image.getHeight()}static sampleGrid(l,d,h,p,b,y,S){return Xe.getInstance().sampleGrid(l,y,S,.5,.5,y-.5,.5,y-.5,S-.5,.5,S-.5,d.getX(),d.getY(),b.getX(),b.getY(),p.getX(),p.getY(),h.getX(),h.getY())}transitionsBetween(l,d){let h=Math.trunc(l.getX()),p=Math.trunc(l.getY()),b=Math.trunc(d.getX()),y=Math.trunc(d.getY()),S=Math.abs(y-p)>Math.abs(b-h);if(S){let Re=h;h=p,p=Re,Re=b,b=y,y=Re}let j=Math.abs(b-h),M=Math.abs(y-p),G=-j/2,te=p<y?1:-1,se=h<b?1:-1,ke=0,Ce=this.image.get(S?p:h,S?h:p);for(let Re=h,Ge=p;Re!==b;Re+=se){let rt=this.image.get(S?Ge:Re,S?Re:Ge);if(rt!==Ce&&(ke++,Ce=rt),G+=M,G>0){if(Ge===y)break;Ge+=te,G-=j}}return ke}}class Xr{constructor(){this.decoder=new ki}decode(l,d=null){let h,p;if(d!=null&&d.has(X.PURE_BARCODE)){const M=Xr.extractPureBits(l.getBlackMatrix());h=this.decoder.decode(M),p=Xr.NO_POINTS}else{const M=new Ct(l.getBlackMatrix()).detect();h=this.decoder.decode(M.getBits()),p=M.getPoints()}const b=h.getRawBytes(),y=new P(h.getText(),b,8*b.length,p,pe.DATA_MATRIX,A.currentTimeMillis()),S=h.getByteSegments();S!=null&&y.putMetadata(Be.BYTE_SEGMENTS,S);const j=h.getECLevel();return j!=null&&y.putMetadata(Be.ERROR_CORRECTION_LEVEL,j),y}reset(){}static extractPureBits(l){const d=l.getTopLeftOnBit(),h=l.getBottomRightOnBit();if(d==null||h==null)throw new ne;const p=this.moduleSize(d,l);let b=d[1];const y=h[1];let S=d[0];const M=(h[0]-S+1)/p,G=(y-b+1)/p;if(M<=0||G<=0)throw new ne;const te=p/2;b+=te,S+=te;const se=new W(M,G);for(let ke=0;ke<G;ke++){const Ce=b+ke*p;for(let Re=0;Re<M;Re++)l.get(S+Re*p,Ce)&&se.set(Re,ke)}return se}static moduleSize(l,d){const h=d.getWidth();let p=l[0];const b=l[1];for(;p<h&&d.get(p,b);)p++;if(p===h)throw new ne;const y=p-l[0];if(y===0)throw new ne;return y}}Xr.NO_POINTS=[];class nr extends q{constructor(l=500){super(new Xr,l)}}var xs;(function(ee){ee[ee.L=0]="L",ee[ee.M=1]="M",ee[ee.Q=2]="Q",ee[ee.H=3]="H"})(xs||(xs={}));class fr{constructor(l,d,h){this.value=l,this.stringValue=d,this.bits=h,fr.FOR_BITS.set(h,this),fr.FOR_VALUE.set(l,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(l){switch(l){case"L":return fr.L;case"M":return fr.M;case"Q":return fr.Q;case"H":return fr.H;default:throw new w(l+"not available")}}toString(){return this.stringValue}equals(l){if(!(l instanceof fr))return!1;const d=l;return this.value===d.value}static forBits(l){if(l<0||l>=fr.FOR_BITS.size)throw new _;return fr.FOR_BITS.get(l)}}fr.FOR_BITS=new Map,fr.FOR_VALUE=new Map,fr.L=new fr(xs.L,"L",1),fr.M=new fr(xs.M,"M",0),fr.Q=new fr(xs.Q,"Q",3),fr.H=new fr(xs.H,"H",2);class Mn{constructor(l){this.errorCorrectionLevel=fr.forBits(l>>3&3),this.dataMask=l&7}static numBitsDiffering(l,d){return O.bitCount(l^d)}static decodeFormatInformation(l,d){const h=Mn.doDecodeFormatInformation(l,d);return h!==null?h:Mn.doDecodeFormatInformation(l^Mn.FORMAT_INFO_MASK_QR,d^Mn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(l,d){let h=Number.MAX_SAFE_INTEGER,p=0;for(const b of Mn.FORMAT_INFO_DECODE_LOOKUP){const y=b[0];if(y===l||y===d)return new Mn(b[1]);let S=Mn.numBitsDiffering(l,y);S<h&&(p=b[1],h=S),l!==d&&(S=Mn.numBitsDiffering(d,y),S<h&&(p=b[1],h=S))}return h<=3?new Mn(p):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(l){if(!(l instanceof Mn))return!1;const d=l;return this.errorCorrectionLevel===d.errorCorrectionLevel&&this.dataMask===d.dataMask}}Mn.FORMAT_INFO_MASK_QR=21522,Mn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class $e{constructor(l,...d){this.ecCodewordsPerBlock=l,this.ecBlocks=d}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let l=0;const d=this.ecBlocks;for(const h of d)l+=h.getCount();return l}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ye{constructor(l,d){this.count=l,this.dataCodewords=d}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Bt{constructor(l,d,...h){this.versionNumber=l,this.alignmentPatternCenters=d,this.ecBlocks=h;let p=0;const b=h[0].getECCodewordsPerBlock(),y=h[0].getECBlocks();for(const S of y)p+=S.getCount()*(S.getDataCodewords()+b);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(l){return this.ecBlocks[l.getValue()]}static getProvisionalVersionForDimension(l){if(l%4!==1)throw new F;try{return this.getVersionForNumber((l-17)/4)}catch{throw new F}}static getVersionForNumber(l){if(l<1||l>40)throw new _;return Bt.VERSIONS[l-1]}static decodeVersionInformation(l){let d=Number.MAX_SAFE_INTEGER,h=0;for(let p=0;p<Bt.VERSION_DECODE_INFO.length;p++){const b=Bt.VERSION_DECODE_INFO[p];if(b===l)return Bt.getVersionForNumber(p+7);const y=Mn.numBitsDiffering(l,b);y<d&&(h=p+7,d=y)}return d<=3?Bt.getVersionForNumber(h):null}buildFunctionPattern(){const l=this.getDimensionForVersion(),d=new W(l);d.setRegion(0,0,9,9),d.setRegion(l-8,0,8,9),d.setRegion(0,l-8,9,8);const h=this.alignmentPatternCenters.length;for(let p=0;p<h;p++){const b=this.alignmentPatternCenters[p]-2;for(let y=0;y<h;y++)p===0&&(y===0||y===h-1)||p===h-1&&y===0||d.setRegion(this.alignmentPatternCenters[y]-2,b,5,5)}return d.setRegion(6,9,1,l-17),d.setRegion(9,6,l-17,1),this.versionNumber>6&&(d.setRegion(l-11,0,3,6),d.setRegion(0,l-11,6,3)),d}toString(){return""+this.versionNumber}}Bt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Bt.VERSIONS=[new Bt(1,new Int32Array(0),new $e(7,new ye(1,19)),new $e(10,new ye(1,16)),new $e(13,new ye(1,13)),new $e(17,new ye(1,9))),new Bt(2,Int32Array.from([6,18]),new $e(10,new ye(1,34)),new $e(16,new ye(1,28)),new $e(22,new ye(1,22)),new $e(28,new ye(1,16))),new Bt(3,Int32Array.from([6,22]),new $e(15,new ye(1,55)),new $e(26,new ye(1,44)),new $e(18,new ye(2,17)),new $e(22,new ye(2,13))),new Bt(4,Int32Array.from([6,26]),new $e(20,new ye(1,80)),new $e(18,new ye(2,32)),new $e(26,new ye(2,24)),new $e(16,new ye(4,9))),new Bt(5,Int32Array.from([6,30]),new $e(26,new ye(1,108)),new $e(24,new ye(2,43)),new $e(18,new ye(2,15),new ye(2,16)),new $e(22,new ye(2,11),new ye(2,12))),new Bt(6,Int32Array.from([6,34]),new $e(18,new ye(2,68)),new $e(16,new ye(4,27)),new $e(24,new ye(4,19)),new $e(28,new ye(4,15))),new Bt(7,Int32Array.from([6,22,38]),new $e(20,new ye(2,78)),new $e(18,new ye(4,31)),new $e(18,new ye(2,14),new ye(4,15)),new $e(26,new ye(4,13),new ye(1,14))),new Bt(8,Int32Array.from([6,24,42]),new $e(24,new ye(2,97)),new $e(22,new ye(2,38),new ye(2,39)),new $e(22,new ye(4,18),new ye(2,19)),new $e(26,new ye(4,14),new ye(2,15))),new Bt(9,Int32Array.from([6,26,46]),new $e(30,new ye(2,116)),new $e(22,new ye(3,36),new ye(2,37)),new $e(20,new ye(4,16),new ye(4,17)),new $e(24,new ye(4,12),new ye(4,13))),new Bt(10,Int32Array.from([6,28,50]),new $e(18,new ye(2,68),new ye(2,69)),new $e(26,new ye(4,43),new ye(1,44)),new $e(24,new ye(6,19),new ye(2,20)),new $e(28,new ye(6,15),new ye(2,16))),new Bt(11,Int32Array.from([6,30,54]),new $e(20,new ye(4,81)),new $e(30,new ye(1,50),new ye(4,51)),new $e(28,new ye(4,22),new ye(4,23)),new $e(24,new ye(3,12),new ye(8,13))),new Bt(12,Int32Array.from([6,32,58]),new $e(24,new ye(2,92),new ye(2,93)),new $e(22,new ye(6,36),new ye(2,37)),new $e(26,new ye(4,20),new ye(6,21)),new $e(28,new ye(7,14),new ye(4,15))),new Bt(13,Int32Array.from([6,34,62]),new $e(26,new ye(4,107)),new $e(22,new ye(8,37),new ye(1,38)),new $e(24,new ye(8,20),new ye(4,21)),new $e(22,new ye(12,11),new ye(4,12))),new Bt(14,Int32Array.from([6,26,46,66]),new $e(30,new ye(3,115),new ye(1,116)),new $e(24,new ye(4,40),new ye(5,41)),new $e(20,new ye(11,16),new ye(5,17)),new $e(24,new ye(11,12),new ye(5,13))),new Bt(15,Int32Array.from([6,26,48,70]),new $e(22,new ye(5,87),new ye(1,88)),new $e(24,new ye(5,41),new ye(5,42)),new $e(30,new ye(5,24),new ye(7,25)),new $e(24,new ye(11,12),new ye(7,13))),new Bt(16,Int32Array.from([6,26,50,74]),new $e(24,new ye(5,98),new ye(1,99)),new $e(28,new ye(7,45),new ye(3,46)),new $e(24,new ye(15,19),new ye(2,20)),new $e(30,new ye(3,15),new ye(13,16))),new Bt(17,Int32Array.from([6,30,54,78]),new $e(28,new ye(1,107),new ye(5,108)),new $e(28,new ye(10,46),new ye(1,47)),new $e(28,new ye(1,22),new ye(15,23)),new $e(28,new ye(2,14),new ye(17,15))),new Bt(18,Int32Array.from([6,30,56,82]),new $e(30,new ye(5,120),new ye(1,121)),new $e(26,new ye(9,43),new ye(4,44)),new $e(28,new ye(17,22),new ye(1,23)),new $e(28,new ye(2,14),new ye(19,15))),new Bt(19,Int32Array.from([6,30,58,86]),new $e(28,new ye(3,113),new ye(4,114)),new $e(26,new ye(3,44),new ye(11,45)),new $e(26,new ye(17,21),new ye(4,22)),new $e(26,new ye(9,13),new ye(16,14))),new Bt(20,Int32Array.from([6,34,62,90]),new $e(28,new ye(3,107),new ye(5,108)),new $e(26,new ye(3,41),new ye(13,42)),new $e(30,new ye(15,24),new ye(5,25)),new $e(28,new ye(15,15),new ye(10,16))),new Bt(21,Int32Array.from([6,28,50,72,94]),new $e(28,new ye(4,116),new ye(4,117)),new $e(26,new ye(17,42)),new $e(28,new ye(17,22),new ye(6,23)),new $e(30,new ye(19,16),new ye(6,17))),new Bt(22,Int32Array.from([6,26,50,74,98]),new $e(28,new ye(2,111),new ye(7,112)),new $e(28,new ye(17,46)),new $e(30,new ye(7,24),new ye(16,25)),new $e(24,new ye(34,13))),new Bt(23,Int32Array.from([6,30,54,78,102]),new $e(30,new ye(4,121),new ye(5,122)),new $e(28,new ye(4,47),new ye(14,48)),new $e(30,new ye(11,24),new ye(14,25)),new $e(30,new ye(16,15),new ye(14,16))),new Bt(24,Int32Array.from([6,28,54,80,106]),new $e(30,new ye(6,117),new ye(4,118)),new $e(28,new ye(6,45),new ye(14,46)),new $e(30,new ye(11,24),new ye(16,25)),new $e(30,new ye(30,16),new ye(2,17))),new Bt(25,Int32Array.from([6,32,58,84,110]),new $e(26,new ye(8,106),new ye(4,107)),new $e(28,new ye(8,47),new ye(13,48)),new $e(30,new ye(7,24),new ye(22,25)),new $e(30,new ye(22,15),new ye(13,16))),new Bt(26,Int32Array.from([6,30,58,86,114]),new $e(28,new ye(10,114),new ye(2,115)),new $e(28,new ye(19,46),new ye(4,47)),new $e(28,new ye(28,22),new ye(6,23)),new $e(30,new ye(33,16),new ye(4,17))),new Bt(27,Int32Array.from([6,34,62,90,118]),new $e(30,new ye(8,122),new ye(4,123)),new $e(28,new ye(22,45),new ye(3,46)),new $e(30,new ye(8,23),new ye(26,24)),new $e(30,new ye(12,15),new ye(28,16))),new Bt(28,Int32Array.from([6,26,50,74,98,122]),new $e(30,new ye(3,117),new ye(10,118)),new $e(28,new ye(3,45),new ye(23,46)),new $e(30,new ye(4,24),new ye(31,25)),new $e(30,new ye(11,15),new ye(31,16))),new Bt(29,Int32Array.from([6,30,54,78,102,126]),new $e(30,new ye(7,116),new ye(7,117)),new $e(28,new ye(21,45),new ye(7,46)),new $e(30,new ye(1,23),new ye(37,24)),new $e(30,new ye(19,15),new ye(26,16))),new Bt(30,Int32Array.from([6,26,52,78,104,130]),new $e(30,new ye(5,115),new ye(10,116)),new $e(28,new ye(19,47),new ye(10,48)),new $e(30,new ye(15,24),new ye(25,25)),new $e(30,new ye(23,15),new ye(25,16))),new Bt(31,Int32Array.from([6,30,56,82,108,134]),new $e(30,new ye(13,115),new ye(3,116)),new $e(28,new ye(2,46),new ye(29,47)),new $e(30,new ye(42,24),new ye(1,25)),new $e(30,new ye(23,15),new ye(28,16))),new Bt(32,Int32Array.from([6,34,60,86,112,138]),new $e(30,new ye(17,115)),new $e(28,new ye(10,46),new ye(23,47)),new $e(30,new ye(10,24),new ye(35,25)),new $e(30,new ye(19,15),new ye(35,16))),new Bt(33,Int32Array.from([6,30,58,86,114,142]),new $e(30,new ye(17,115),new ye(1,116)),new $e(28,new ye(14,46),new ye(21,47)),new $e(30,new ye(29,24),new ye(19,25)),new $e(30,new ye(11,15),new ye(46,16))),new Bt(34,Int32Array.from([6,34,62,90,118,146]),new $e(30,new ye(13,115),new ye(6,116)),new $e(28,new ye(14,46),new ye(23,47)),new $e(30,new ye(44,24),new ye(7,25)),new $e(30,new ye(59,16),new ye(1,17))),new Bt(35,Int32Array.from([6,30,54,78,102,126,150]),new $e(30,new ye(12,121),new ye(7,122)),new $e(28,new ye(12,47),new ye(26,48)),new $e(30,new ye(39,24),new ye(14,25)),new $e(30,new ye(22,15),new ye(41,16))),new Bt(36,Int32Array.from([6,24,50,76,102,128,154]),new $e(30,new ye(6,121),new ye(14,122)),new $e(28,new ye(6,47),new ye(34,48)),new $e(30,new ye(46,24),new ye(10,25)),new $e(30,new ye(2,15),new ye(64,16))),new Bt(37,Int32Array.from([6,28,54,80,106,132,158]),new $e(30,new ye(17,122),new ye(4,123)),new $e(28,new ye(29,46),new ye(14,47)),new $e(30,new ye(49,24),new ye(10,25)),new $e(30,new ye(24,15),new ye(46,16))),new Bt(38,Int32Array.from([6,32,58,84,110,136,162]),new $e(30,new ye(4,122),new ye(18,123)),new $e(28,new ye(13,46),new ye(32,47)),new $e(30,new ye(48,24),new ye(14,25)),new $e(30,new ye(42,15),new ye(32,16))),new Bt(39,Int32Array.from([6,26,54,82,110,138,166]),new $e(30,new ye(20,117),new ye(4,118)),new $e(28,new ye(40,47),new ye(7,48)),new $e(30,new ye(43,24),new ye(22,25)),new $e(30,new ye(10,15),new ye(67,16))),new Bt(40,Int32Array.from([6,30,58,86,114,142,170]),new $e(30,new ye(19,118),new ye(6,119)),new $e(28,new ye(18,47),new ye(31,48)),new $e(30,new ye(34,24),new ye(34,25)),new $e(30,new ye(20,15),new ye(61,16)))];var Xn;(function(ee){ee[ee.DATA_MASK_000=0]="DATA_MASK_000",ee[ee.DATA_MASK_001=1]="DATA_MASK_001",ee[ee.DATA_MASK_010=2]="DATA_MASK_010",ee[ee.DATA_MASK_011=3]="DATA_MASK_011",ee[ee.DATA_MASK_100=4]="DATA_MASK_100",ee[ee.DATA_MASK_101=5]="DATA_MASK_101",ee[ee.DATA_MASK_110=6]="DATA_MASK_110",ee[ee.DATA_MASK_111=7]="DATA_MASK_111"})(Xn||(Xn={}));class Ga{constructor(l,d){this.value=l,this.isMasked=d}unmaskBitMatrix(l,d){for(let h=0;h<d;h++)for(let p=0;p<d;p++)this.isMasked(h,p)&&l.flip(p,h)}}Ga.values=new Map([[Xn.DATA_MASK_000,new Ga(Xn.DATA_MASK_000,(ee,l)=>(ee+l&1)===0)],[Xn.DATA_MASK_001,new Ga(Xn.DATA_MASK_001,(ee,l)=>(ee&1)===0)],[Xn.DATA_MASK_010,new Ga(Xn.DATA_MASK_010,(ee,l)=>l%3===0)],[Xn.DATA_MASK_011,new Ga(Xn.DATA_MASK_011,(ee,l)=>(ee+l)%3===0)],[Xn.DATA_MASK_100,new Ga(Xn.DATA_MASK_100,(ee,l)=>(Math.floor(ee/2)+Math.floor(l/3)&1)===0)],[Xn.DATA_MASK_101,new Ga(Xn.DATA_MASK_101,(ee,l)=>ee*l%6===0)],[Xn.DATA_MASK_110,new Ga(Xn.DATA_MASK_110,(ee,l)=>ee*l%6<3)],[Xn.DATA_MASK_111,new Ga(Xn.DATA_MASK_111,(ee,l)=>(ee+l+ee*l%3&1)===0)]]);class jl{constructor(l){const d=l.getHeight();if(d<21||(d&3)!==1)throw new F;this.bitMatrix=l}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let l=0;for(let b=0;b<6;b++)l=this.copyBit(b,8,l);l=this.copyBit(7,8,l),l=this.copyBit(8,8,l),l=this.copyBit(8,7,l);for(let b=5;b>=0;b--)l=this.copyBit(8,b,l);const d=this.bitMatrix.getHeight();let h=0;const p=d-7;for(let b=d-1;b>=p;b--)h=this.copyBit(8,b,h);for(let b=d-8;b<d;b++)h=this.copyBit(b,8,h);if(this.parsedFormatInfo=Mn.decodeFormatInformation(l,h),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const l=this.bitMatrix.getHeight(),d=Math.floor((l-17)/4);if(d<=6)return Bt.getVersionForNumber(d);let h=0;const p=l-11;for(let y=5;y>=0;y--)for(let S=l-9;S>=p;S--)h=this.copyBit(S,y,h);let b=Bt.decodeVersionInformation(h);if(b!==null&&b.getDimensionForVersion()===l)return this.parsedVersion=b,b;h=0;for(let y=5;y>=0;y--)for(let S=l-9;S>=p;S--)h=this.copyBit(y,S,h);if(b=Bt.decodeVersionInformation(h),b!==null&&b.getDimensionForVersion()===l)return this.parsedVersion=b,b;throw new F}copyBit(l,d,h){return(this.isMirror?this.bitMatrix.get(d,l):this.bitMatrix.get(l,d))?h<<1|1:h<<1}readCodewords(){const l=this.readFormatInformation(),d=this.readVersion(),h=Ga.values.get(l.getDataMask()),p=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,p);const b=d.buildFunctionPattern();let y=!0;const S=new Uint8Array(d.getTotalCodewords());let j=0,M=0,G=0;for(let te=p-1;te>0;te-=2){te===6&&te--;for(let se=0;se<p;se++){const ke=y?p-1-se:se;for(let Ce=0;Ce<2;Ce++)b.get(te-Ce,ke)||(G++,M<<=1,this.bitMatrix.get(te-Ce,ke)&&(M|=1),G===8&&(S[j++]=M,G=0,M=0))}y=!y}if(j!==d.getTotalCodewords())throw new F;return S}remask(){if(this.parsedFormatInfo===null)return;const l=Ga.values[this.parsedFormatInfo.getDataMask()],d=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,d)}setMirror(l){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=l}mirror(){const l=this.bitMatrix;for(let d=0,h=l.getWidth();d<h;d++)for(let p=d+1,b=l.getHeight();p<b;p++)l.get(d,p)!==l.get(p,d)&&(l.flip(p,d),l.flip(d,p))}}class eu{constructor(l,d){this.numDataCodewords=l,this.codewords=d}static getDataBlocks(l,d,h){if(l.length!==d.getTotalCodewords())throw new _;const p=d.getECBlocksForLevel(h);let b=0;const y=p.getECBlocks();for(const Ce of y)b+=Ce.getCount();const S=new Array(b);let j=0;for(const Ce of y)for(let Re=0;Re<Ce.getCount();Re++){const Ge=Ce.getDataCodewords(),rt=p.getECCodewordsPerBlock()+Ge;S[j++]=new eu(Ge,new Uint8Array(rt))}const M=S[0].codewords.length;let G=S.length-1;for(;G>=0&&S[G].codewords.length!==M;)G--;G++;const te=M-p.getECCodewordsPerBlock();let se=0;for(let Ce=0;Ce<te;Ce++)for(let Re=0;Re<j;Re++)S[Re].codewords[Ce]=l[se++];for(let Ce=G;Ce<j;Ce++)S[Ce].codewords[te]=l[se++];const ke=S[0].codewords.length;for(let Ce=te;Ce<ke;Ce++)for(let Re=0;Re<j;Re++){const Ge=Re<G?Ce:Ce+1;S[Re].codewords[Ge]=l[se++]}return S}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Wa;(function(ee){ee[ee.TERMINATOR=0]="TERMINATOR",ee[ee.NUMERIC=1]="NUMERIC",ee[ee.ALPHANUMERIC=2]="ALPHANUMERIC",ee[ee.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",ee[ee.BYTE=4]="BYTE",ee[ee.ECI=5]="ECI",ee[ee.KANJI=6]="KANJI",ee[ee.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",ee[ee.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",ee[ee.HANZI=9]="HANZI"})(Wa||(Wa={}));class Vt{constructor(l,d,h,p){this.value=l,this.stringValue=d,this.characterCountBitsForVersions=h,this.bits=p,Vt.FOR_BITS.set(p,this),Vt.FOR_VALUE.set(l,this)}static forBits(l){const d=Vt.FOR_BITS.get(l);if(d===void 0)throw new _;return d}getCharacterCountBits(l){const d=l.getVersionNumber();let h;return d<=9?h=0:d<=26?h=1:h=2,this.characterCountBitsForVersions[h]}getValue(){return this.value}getBits(){return this.bits}equals(l){if(!(l instanceof Vt))return!1;const d=l;return this.value===d.value}toString(){return this.stringValue}}Vt.FOR_BITS=new Map,Vt.FOR_VALUE=new Map,Vt.TERMINATOR=new Vt(Wa.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Vt.NUMERIC=new Vt(Wa.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Vt.ALPHANUMERIC=new Vt(Wa.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Vt.STRUCTURED_APPEND=new Vt(Wa.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Vt.BYTE=new Vt(Wa.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Vt.ECI=new Vt(Wa.ECI,"ECI",Int32Array.from([0,0,0]),7),Vt.KANJI=new Vt(Wa.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Vt.FNC1_FIRST_POSITION=new Vt(Wa.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Vt.FNC1_SECOND_POSITION=new Vt(Wa.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Vt.HANZI=new Vt(Wa.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class un{static decode(l,d,h,p){const b=new Va(l);let y=new xe;const S=new Array;let j=-1,M=-1;try{let G=null,te=!1,se;do{if(b.available()<4)se=Vt.TERMINATOR;else{const ke=b.readBits(4);se=Vt.forBits(ke)}switch(se){case Vt.TERMINATOR:break;case Vt.FNC1_FIRST_POSITION:case Vt.FNC1_SECOND_POSITION:te=!0;break;case Vt.STRUCTURED_APPEND:if(b.available()<16)throw new F;j=b.readBits(8),M=b.readBits(8);break;case Vt.ECI:const ke=un.parseECIValue(b);if(G=H.getCharacterSetECIByValue(ke),G===null)throw new F;break;case Vt.HANZI:const Ce=b.readBits(4),Re=b.readBits(se.getCharacterCountBits(d));Ce===un.GB2312_SUBSET&&un.decodeHanziSegment(b,y,Re);break;default:const Ge=b.readBits(se.getCharacterCountBits(d));switch(se){case Vt.NUMERIC:un.decodeNumericSegment(b,y,Ge);break;case Vt.ALPHANUMERIC:un.decodeAlphanumericSegment(b,y,Ge,te);break;case Vt.BYTE:un.decodeByteSegment(b,y,Ge,G,S,p);break;case Vt.KANJI:un.decodeKanjiSegment(b,y,Ge);break;default:throw new F}break}}while(se!==Vt.TERMINATOR)}catch{throw new F}return new Pe(l,y.toString(),S.length===0?null:S,h===null?null:h.toString(),j,M)}static decodeHanziSegment(l,d,h){if(h*13>l.available())throw new F;const p=new Uint8Array(2*h);let b=0;for(;h>0;){const y=l.readBits(13);let S=y/96<<8&4294967295|y%96;S<959?S+=41377:S+=42657,p[b]=S>>8&255,p[b+1]=S&255,b+=2,h--}try{d.append(J.decode(p,V.GB2312))}catch(y){throw new F(y)}}static decodeKanjiSegment(l,d,h){if(h*13>l.available())throw new F;const p=new Uint8Array(2*h);let b=0;for(;h>0;){const y=l.readBits(13);let S=y/192<<8&4294967295|y%192;S<7936?S+=33088:S+=49472,p[b]=S>>8,p[b+1]=S,b+=2,h--}try{d.append(J.decode(p,V.SHIFT_JIS))}catch(y){throw new F(y)}}static decodeByteSegment(l,d,h,p,b,y){if(8*h>l.available())throw new F;const S=new Uint8Array(h);for(let M=0;M<h;M++)S[M]=l.readBits(8);let j;p===null?j=V.guessEncoding(S,y):j=p.getName();try{d.append(J.decode(S,j))}catch(M){throw new F(M)}b.push(S)}static toAlphaNumericChar(l){if(l>=un.ALPHANUMERIC_CHARS.length)throw new F;return un.ALPHANUMERIC_CHARS[l]}static decodeAlphanumericSegment(l,d,h,p){const b=d.length();for(;h>1;){if(l.available()<11)throw new F;const y=l.readBits(11);d.append(un.toAlphaNumericChar(Math.floor(y/45))),d.append(un.toAlphaNumericChar(y%45)),h-=2}if(h===1){if(l.available()<6)throw new F;d.append(un.toAlphaNumericChar(l.readBits(6)))}if(p)for(let y=b;y<d.length();y++)d.charAt(y)==="%"&&(y<d.length()-1&&d.charAt(y+1)==="%"?d.deleteCharAt(y+1):d.setCharAt(y,""))}static decodeNumericSegment(l,d,h){for(;h>=3;){if(l.available()<10)throw new F;const p=l.readBits(10);if(p>=1e3)throw new F;d.append(un.toAlphaNumericChar(Math.floor(p/100))),d.append(un.toAlphaNumericChar(Math.floor(p/10)%10)),d.append(un.toAlphaNumericChar(p%10)),h-=3}if(h===2){if(l.available()<7)throw new F;const p=l.readBits(7);if(p>=100)throw new F;d.append(un.toAlphaNumericChar(Math.floor(p/10))),d.append(un.toAlphaNumericChar(p%10))}else if(h===1){if(l.available()<4)throw new F;const p=l.readBits(4);if(p>=10)throw new F;d.append(un.toAlphaNumericChar(p))}}static parseECIValue(l){const d=l.readBits(8);if((d&128)===0)return d&127;if((d&192)===128){const h=l.readBits(8);return(d&63)<<8&4294967295|h}if((d&224)===192){const h=l.readBits(16);return(d&31)<<16&4294967295|h}throw new F}}un.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",un.GB2312_SUBSET=1;class uf{constructor(l){this.mirrored=l}isMirrored(){return this.mirrored}applyMirroredCorrection(l){if(!this.mirrored||l===null||l.length<3)return;const d=l[0];l[0]=l[2],l[2]=d}}class K1{constructor(){this.rsDecoder=new Te(Ie.QR_CODE_FIELD_256)}decodeBooleanArray(l,d){return this.decodeBitMatrix(W.parseFromBooleanArray(l),d)}decodeBitMatrix(l,d){const h=new jl(l);let p=null;try{return this.decodeBitMatrixParser(h,d)}catch(b){p=b}try{h.remask(),h.setMirror(!0),h.readVersion(),h.readFormatInformation(),h.mirror();const b=this.decodeBitMatrixParser(h,d);return b.setOther(new uf(!0)),b}catch(b){throw p!==null?p:b}}decodeBitMatrixParser(l,d){const h=l.readVersion(),p=l.readFormatInformation().getErrorCorrectionLevel(),b=l.readCodewords(),y=eu.getDataBlocks(b,h,p);let S=0;for(const G of y)S+=G.getNumDataCodewords();const j=new Uint8Array(S);let M=0;for(const G of y){const te=G.getCodewords(),se=G.getNumDataCodewords();this.correctErrors(te,se);for(let ke=0;ke<se;ke++)j[M++]=te[ke]}return un.decode(j,h,p,d)}correctErrors(l,d){const h=new Int32Array(l);try{this.rsDecoder.decode(h,l.length-d)}catch{throw new k}for(let p=0;p<d;p++)l[p]=h[p]}}class Rl extends Fe{constructor(l,d,h){super(l,d),this.estimatedModuleSize=h}aboutEquals(l,d,h){if(Math.abs(d-this.getY())<=l&&Math.abs(h-this.getX())<=l){const p=Math.abs(l-this.estimatedModuleSize);return p<=1||p<=this.estimatedModuleSize}return!1}combineEstimate(l,d,h){const p=(this.getX()+d)/2,b=(this.getY()+l)/2,y=(this.estimatedModuleSize+h)/2;return new Rl(p,b,y)}}class Ja{constructor(l,d,h,p,b,y,S){this.image=l,this.startX=d,this.startY=h,this.width=p,this.height=b,this.moduleSize=y,this.resultPointCallback=S,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const l=this.startX,d=this.height,h=this.width,p=l+h,b=this.startY+d/2,y=new Int32Array(3),S=this.image;for(let j=0;j<d;j++){const M=b+((j&1)===0?Math.floor((j+1)/2):-Math.floor((j+1)/2));y[0]=0,y[1]=0,y[2]=0;let G=l;for(;G<p&&!S.get(G,M);)G++;let te=0;for(;G<p;){if(S.get(G,M))if(te===1)y[1]++;else if(te===2){if(this.foundPatternCross(y)){const se=this.handlePossibleCenter(y,M,G);if(se!==null)return se}y[0]=y[2],y[1]=1,y[2]=0,te=1}else y[++te]++;else te===1&&te++,y[te]++;G++}if(this.foundPatternCross(y)){const se=this.handlePossibleCenter(y,M,p);if(se!==null)return se}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ne}static centerFromEnd(l,d){return d-l[2]-l[1]/2}foundPatternCross(l){const d=this.moduleSize,h=d/2;for(let p=0;p<3;p++)if(Math.abs(d-l[p])>=h)return!1;return!0}crossCheckVertical(l,d,h,p){const b=this.image,y=b.getHeight(),S=this.crossCheckStateCount;S[0]=0,S[1]=0,S[2]=0;let j=l;for(;j>=0&&b.get(d,j)&&S[1]<=h;)S[1]++,j--;if(j<0||S[1]>h)return NaN;for(;j>=0&&!b.get(d,j)&&S[0]<=h;)S[0]++,j--;if(S[0]>h)return NaN;for(j=l+1;j<y&&b.get(d,j)&&S[1]<=h;)S[1]++,j++;if(j===y||S[1]>h)return NaN;for(;j<y&&!b.get(d,j)&&S[2]<=h;)S[2]++,j++;if(S[2]>h)return NaN;const M=S[0]+S[1]+S[2];return 5*Math.abs(M-p)>=2*p?NaN:this.foundPatternCross(S)?Ja.centerFromEnd(S,j):NaN}handlePossibleCenter(l,d,h){const p=l[0]+l[1]+l[2],b=Ja.centerFromEnd(l,h),y=this.crossCheckVertical(d,b,2*l[1],p);if(!isNaN(y)){const S=(l[0]+l[1]+l[2])/3;for(const M of this.possibleCenters)if(M.aboutEquals(S,y,b))return M.combineEstimate(y,b,S);const j=new Rl(b,y,S);this.possibleCenters.push(j),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(j)}return null}}class Co extends Fe{constructor(l,d,h,p){super(l,d),this.estimatedModuleSize=h,this.count=p,p===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(l,d,h){if(Math.abs(d-this.getY())<=l&&Math.abs(h-this.getX())<=l){const p=Math.abs(l-this.estimatedModuleSize);return p<=1||p<=this.estimatedModuleSize}return!1}combineEstimate(l,d,h){const p=this.count+1,b=(this.count*this.getX()+d)/p,y=(this.count*this.getY()+l)/p,S=(this.count*this.estimatedModuleSize+h)/p;return new Co(b,y,S,p)}}class tu{constructor(l){this.bottomLeft=l[0],this.topLeft=l[1],this.topRight=l[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class gn{constructor(l,d){this.image=l,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=d}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(l){const d=l!=null&&l.get(X.TRY_HARDER)!==void 0,h=l!=null&&l.get(X.PURE_BARCODE)!==void 0,p=this.image,b=p.getHeight(),y=p.getWidth();let S=Math.floor(3*b/(4*gn.MAX_MODULES));(S<gn.MIN_SKIP||d)&&(S=gn.MIN_SKIP);let j=!1;const M=new Int32Array(5);for(let te=S-1;te<b&&!j;te+=S){M[0]=0,M[1]=0,M[2]=0,M[3]=0,M[4]=0;let se=0;for(let ke=0;ke<y;ke++)if(p.get(ke,te))(se&1)===1&&se++,M[se]++;else if((se&1)===0)if(se===4)if(gn.foundPatternCross(M)){if(this.handlePossibleCenter(M,te,ke,h)===!0)if(S=2,this.hasSkipped===!0)j=this.haveMultiplyConfirmedCenters();else{const Re=this.findRowSkip();Re>M[2]&&(te+=Re-M[2]-S,ke=y-1)}else{M[0]=M[2],M[1]=M[3],M[2]=M[4],M[3]=1,M[4]=0,se=3;continue}se=0,M[0]=0,M[1]=0,M[2]=0,M[3]=0,M[4]=0}else M[0]=M[2],M[1]=M[3],M[2]=M[4],M[3]=1,M[4]=0,se=3;else M[++se]++;else M[se]++;gn.foundPatternCross(M)&&this.handlePossibleCenter(M,te,y,h)===!0&&(S=M[0],this.hasSkipped&&(j=this.haveMultiplyConfirmedCenters()))}const G=this.selectBestPatterns();return Fe.orderBestPatterns(G),new tu(G)}static centerFromEnd(l,d){return d-l[4]-l[3]-l[2]/2}static foundPatternCross(l){let d=0;for(let b=0;b<5;b++){const y=l[b];if(y===0)return!1;d+=y}if(d<7)return!1;const h=d/7,p=h/2;return Math.abs(h-l[0])<p&&Math.abs(h-l[1])<p&&Math.abs(3*h-l[2])<3*p&&Math.abs(h-l[3])<p&&Math.abs(h-l[4])<p}getCrossCheckStateCount(){const l=this.crossCheckStateCount;return l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l}crossCheckDiagonal(l,d,h,p){const b=this.getCrossCheckStateCount();let y=0;const S=this.image;for(;l>=y&&d>=y&&S.get(d-y,l-y);)b[2]++,y++;if(l<y||d<y)return!1;for(;l>=y&&d>=y&&!S.get(d-y,l-y)&&b[1]<=h;)b[1]++,y++;if(l<y||d<y||b[1]>h)return!1;for(;l>=y&&d>=y&&S.get(d-y,l-y)&&b[0]<=h;)b[0]++,y++;if(b[0]>h)return!1;const j=S.getHeight(),M=S.getWidth();for(y=1;l+y<j&&d+y<M&&S.get(d+y,l+y);)b[2]++,y++;if(l+y>=j||d+y>=M)return!1;for(;l+y<j&&d+y<M&&!S.get(d+y,l+y)&&b[3]<h;)b[3]++,y++;if(l+y>=j||d+y>=M||b[3]>=h)return!1;for(;l+y<j&&d+y<M&&S.get(d+y,l+y)&&b[4]<h;)b[4]++,y++;if(b[4]>=h)return!1;const G=b[0]+b[1]+b[2]+b[3]+b[4];return Math.abs(G-p)<2*p&&gn.foundPatternCross(b)}crossCheckVertical(l,d,h,p){const b=this.image,y=b.getHeight(),S=this.getCrossCheckStateCount();let j=l;for(;j>=0&&b.get(d,j);)S[2]++,j--;if(j<0)return NaN;for(;j>=0&&!b.get(d,j)&&S[1]<=h;)S[1]++,j--;if(j<0||S[1]>h)return NaN;for(;j>=0&&b.get(d,j)&&S[0]<=h;)S[0]++,j--;if(S[0]>h)return NaN;for(j=l+1;j<y&&b.get(d,j);)S[2]++,j++;if(j===y)return NaN;for(;j<y&&!b.get(d,j)&&S[3]<h;)S[3]++,j++;if(j===y||S[3]>=h)return NaN;for(;j<y&&b.get(d,j)&&S[4]<h;)S[4]++,j++;if(S[4]>=h)return NaN;const M=S[0]+S[1]+S[2]+S[3]+S[4];return 5*Math.abs(M-p)>=2*p?NaN:gn.foundPatternCross(S)?gn.centerFromEnd(S,j):NaN}crossCheckHorizontal(l,d,h,p){const b=this.image,y=b.getWidth(),S=this.getCrossCheckStateCount();let j=l;for(;j>=0&&b.get(j,d);)S[2]++,j--;if(j<0)return NaN;for(;j>=0&&!b.get(j,d)&&S[1]<=h;)S[1]++,j--;if(j<0||S[1]>h)return NaN;for(;j>=0&&b.get(j,d)&&S[0]<=h;)S[0]++,j--;if(S[0]>h)return NaN;for(j=l+1;j<y&&b.get(j,d);)S[2]++,j++;if(j===y)return NaN;for(;j<y&&!b.get(j,d)&&S[3]<h;)S[3]++,j++;if(j===y||S[3]>=h)return NaN;for(;j<y&&b.get(j,d)&&S[4]<h;)S[4]++,j++;if(S[4]>=h)return NaN;const M=S[0]+S[1]+S[2]+S[3]+S[4];return 5*Math.abs(M-p)>=p?NaN:gn.foundPatternCross(S)?gn.centerFromEnd(S,j):NaN}handlePossibleCenter(l,d,h,p){const b=l[0]+l[1]+l[2]+l[3]+l[4];let y=gn.centerFromEnd(l,h),S=this.crossCheckVertical(d,Math.floor(y),l[2],b);if(!isNaN(S)&&(y=this.crossCheckHorizontal(Math.floor(y),Math.floor(S),l[2],b),!isNaN(y)&&(!p||this.crossCheckDiagonal(Math.floor(S),Math.floor(y),l[2],b)))){const j=b/7;let M=!1;const G=this.possibleCenters;for(let te=0,se=G.length;te<se;te++){const ke=G[te];if(ke.aboutEquals(j,S,y)){G[te]=ke.combineEstimate(S,y,j),M=!0;break}}if(!M){const te=new Co(y,S,j);G.push(te),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(te)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let d=null;for(const h of this.possibleCenters)if(h.getCount()>=gn.CENTER_QUORUM)if(d==null)d=h;else return this.hasSkipped=!0,Math.floor((Math.abs(d.getX()-h.getX())-Math.abs(d.getY()-h.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let l=0,d=0;const h=this.possibleCenters.length;for(const y of this.possibleCenters)y.getCount()>=gn.CENTER_QUORUM&&(l++,d+=y.getEstimatedModuleSize());if(l<3)return!1;const p=d/h;let b=0;for(const y of this.possibleCenters)b+=Math.abs(y.getEstimatedModuleSize()-p);return b<=.05*d}selectBestPatterns(){const l=this.possibleCenters.length;if(l<3)throw new ne;const d=this.possibleCenters;let h;if(l>3){let p=0,b=0;for(const j of this.possibleCenters){const M=j.getEstimatedModuleSize();p+=M,b+=M*M}h=p/l;let y=Math.sqrt(b/l-h*h);d.sort((j,M)=>{const G=Math.abs(M.getEstimatedModuleSize()-h),te=Math.abs(j.getEstimatedModuleSize()-h);return G<te?-1:G>te?1:0});const S=Math.max(.2*h,y);for(let j=0;j<d.length&&d.length>3;j++){const M=d[j];Math.abs(M.getEstimatedModuleSize()-h)>S&&(d.splice(j,1),j--)}}if(d.length>3){let p=0;for(const b of d)p+=b.getEstimatedModuleSize();h=p/d.length,d.sort((b,y)=>{if(y.getCount()===b.getCount()){const S=Math.abs(y.getEstimatedModuleSize()-h),j=Math.abs(b.getEstimatedModuleSize()-h);return S<j?1:S>j?-1:0}else return y.getCount()-b.getCount()}),d.splice(3)}return[d[0],d[1],d[2]]}}gn.CENTER_QUORUM=2,gn.MIN_SKIP=3,gn.MAX_MODULES=57;class Ls{constructor(l){this.image=l}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(l){this.resultPointCallback=l==null?null:l.get(X.NEED_RESULT_POINT_CALLBACK);const h=new gn(this.image,this.resultPointCallback).find(l);return this.processFinderPatternInfo(h)}processFinderPatternInfo(l){const d=l.getTopLeft(),h=l.getTopRight(),p=l.getBottomLeft(),b=this.calculateModuleSize(d,h,p);if(b<1)throw new ne("No pattern found in proccess finder.");const y=Ls.computeDimension(d,h,p,b),S=Bt.getProvisionalVersionForDimension(y),j=S.getDimensionForVersion()-7;let M=null;if(S.getAlignmentPatternCenters().length>0){const ke=h.getX()-d.getX()+p.getX(),Ce=h.getY()-d.getY()+p.getY(),Re=1-3/j,Ge=Math.floor(d.getX()+Re*(ke-d.getX())),rt=Math.floor(d.getY()+Re*(Ce-d.getY()));for(let Et=4;Et<=16;Et<<=1)try{M=this.findAlignmentInRegion(b,Ge,rt,Et);break}catch(_t){if(!(_t instanceof ne))throw _t}}const G=Ls.createTransform(d,h,p,M,y),te=Ls.sampleGrid(this.image,G,y);let se;return M===null?se=[p,d,h]:se=[p,d,h,M],new He(te,se)}static createTransform(l,d,h,p,b){const y=b-3.5;let S,j,M,G;return p!==null?(S=p.getX(),j=p.getY(),M=y-3,G=M):(S=d.getX()-l.getX()+h.getX(),j=d.getY()-l.getY()+h.getY(),M=y,G=y),qe.quadrilateralToQuadrilateral(3.5,3.5,y,3.5,M,G,3.5,y,l.getX(),l.getY(),d.getX(),d.getY(),S,j,h.getX(),h.getY())}static sampleGrid(l,d,h){return Xe.getInstance().sampleGridWithTransform(l,h,h,d)}static computeDimension(l,d,h,p){const b=Ee.round(Fe.distance(l,d)/p),y=Ee.round(Fe.distance(l,h)/p);let S=Math.floor((b+y)/2)+7;switch(S&3){case 0:S++;break;case 2:S--;break;case 3:throw new ne("Dimensions could be not found.")}return S}calculateModuleSize(l,d,h){return(this.calculateModuleSizeOneWay(l,d)+this.calculateModuleSizeOneWay(l,h))/2}calculateModuleSizeOneWay(l,d){const h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(d.getX()),Math.floor(d.getY())),p=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(d.getX()),Math.floor(d.getY()),Math.floor(l.getX()),Math.floor(l.getY()));return isNaN(h)?p/7:isNaN(p)?h/7:(h+p)/14}sizeOfBlackWhiteBlackRunBothWays(l,d,h,p){let b=this.sizeOfBlackWhiteBlackRun(l,d,h,p),y=1,S=l-(h-l);S<0?(y=l/(l-S),S=0):S>=this.image.getWidth()&&(y=(this.image.getWidth()-1-l)/(S-l),S=this.image.getWidth()-1);let j=Math.floor(d-(p-d)*y);return y=1,j<0?(y=d/(d-j),j=0):j>=this.image.getHeight()&&(y=(this.image.getHeight()-1-d)/(j-d),j=this.image.getHeight()-1),S=Math.floor(l+(S-l)*y),b+=this.sizeOfBlackWhiteBlackRun(l,d,S,j),b-1}sizeOfBlackWhiteBlackRun(l,d,h,p){const b=Math.abs(p-d)>Math.abs(h-l);if(b){let ke=l;l=d,d=ke,ke=h,h=p,p=ke}const y=Math.abs(h-l),S=Math.abs(p-d);let j=-y/2;const M=l<h?1:-1,G=d<p?1:-1;let te=0;const se=h+M;for(let ke=l,Ce=d;ke!==se;ke+=M){const Re=b?Ce:ke,Ge=b?ke:Ce;if(te===1===this.image.get(Re,Ge)){if(te===2)return Ee.distance(ke,Ce,l,d);te++}if(j+=S,j>0){if(Ce===p)break;Ce+=G,j-=y}}return te===2?Ee.distance(h+M,p,l,d):NaN}findAlignmentInRegion(l,d,h,p){const b=Math.floor(p*l),y=Math.max(0,d-b),S=Math.min(this.image.getWidth()-1,d+b);if(S-y<l*3)throw new ne("Alignment top exceeds estimated module size.");const j=Math.max(0,h-b),M=Math.min(this.image.getHeight()-1,h+b);if(M-j<l*3)throw new ne("Alignment bottom exceeds estimated module size.");return new Ja(this.image,y,j,S-y,M-j,l,this.resultPointCallback).find()}}class ii{constructor(){this.decoder=new K1}getDecoder(){return this.decoder}decode(l,d){let h,p;if(d!=null&&d.get(X.PURE_BARCODE)!==void 0){const j=ii.extractPureBits(l.getBlackMatrix());h=this.decoder.decodeBitMatrix(j,d),p=ii.NO_POINTS}else{const j=new Ls(l.getBlackMatrix()).detect(d);h=this.decoder.decodeBitMatrix(j.getBits(),d),p=j.getPoints()}h.getOther()instanceof uf&&h.getOther().applyMirroredCorrection(p);const b=new P(h.getText(),h.getRawBytes(),void 0,p,pe.QR_CODE,void 0),y=h.getByteSegments();y!==null&&b.putMetadata(Be.BYTE_SEGMENTS,y);const S=h.getECLevel();return S!==null&&b.putMetadata(Be.ERROR_CORRECTION_LEVEL,S),h.hasStructuredAppend()&&(b.putMetadata(Be.STRUCTURED_APPEND_SEQUENCE,h.getStructuredAppendSequenceNumber()),b.putMetadata(Be.STRUCTURED_APPEND_PARITY,h.getStructuredAppendParity())),b}reset(){}static extractPureBits(l){const d=l.getTopLeftOnBit(),h=l.getBottomRightOnBit();if(d===null||h===null)throw new ne;const p=this.moduleSize(d,l);let b=d[1],y=h[1],S=d[0],j=h[0];if(S>=j||b>=y)throw new ne;if(y-b!==j-S&&(j=S+(y-b),j>=l.getWidth()))throw new ne;const M=Math.round((j-S+1)/p),G=Math.round((y-b+1)/p);if(M<=0||G<=0)throw new ne;if(G!==M)throw new ne;const te=Math.floor(p/2);b+=te,S+=te;const se=S+Math.floor((M-1)*p)-j;if(se>0){if(se>te)throw new ne;S-=se}const ke=b+Math.floor((G-1)*p)-y;if(ke>0){if(ke>te)throw new ne;b-=ke}const Ce=new W(M,G);for(let Re=0;Re<G;Re++){const Ge=b+Math.floor(Re*p);for(let rt=0;rt<M;rt++)l.get(S+Math.floor(rt*p),Ge)&&Ce.set(rt,Re)}return Ce}static moduleSize(l,d){const h=d.getHeight(),p=d.getWidth();let b=l[0],y=l[1],S=!0,j=0;for(;b<p&&y<h;){if(S!==d.get(b,y)){if(++j===5)break;S=!S}b++,y++}if(b===p||y===h)throw new ne;return(b-l[0])/7}}ii.NO_POINTS=new Array;class Kt{PDF417Common(){}static getBitCountSum(l){return Ee.sum(l)}static toIntArray(l){if(l==null||!l.length)return Kt.EMPTY_INT_ARRAY;const d=new Int32Array(l.length);let h=0;for(const p of l)d[h++]=p;return d}static getCodeword(l){const d=D.binarySearch(Kt.SYMBOL_TABLE,l&262143);return d<0?-1:(Kt.CODEWORD_TABLE[d]-1)%Kt.NUMBER_OF_CODEWORDS}}Kt.NUMBER_OF_CODEWORDS=929,Kt.MAX_CODEWORDS_IN_BARCODE=Kt.NUMBER_OF_CODEWORDS-1,Kt.MIN_ROWS_IN_BARCODE=3,Kt.MAX_ROWS_IN_BARCODE=90,Kt.MODULES_IN_CODEWORD=17,Kt.MODULES_IN_STOP_PATTERN=18,Kt.BARS_IN_MODULE=8,Kt.EMPTY_INT_ARRAY=new Int32Array([]),Kt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Kt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class df{constructor(l,d){this.bits=l,this.points=d}getBits(){return this.bits}getPoints(){return this.points}}class ar{static detectMultiple(l,d,h){let p=l.getBlackMatrix(),b=ar.detect(h,p);return b.length||(p=p.clone(),p.rotate180(),b=ar.detect(h,p)),new df(p,b)}static detect(l,d){const h=new Array;let p=0,b=0,y=!1;for(;p<d.getHeight();){const S=ar.findVertices(d,p,b);if(S[0]==null&&S[3]==null){if(!y)break;y=!1,b=0;for(const j of h)j[1]!=null&&(p=Math.trunc(Math.max(p,j[1].getY()))),j[3]!=null&&(p=Math.max(p,Math.trunc(j[3].getY())));p+=ar.ROW_STEP;continue}if(y=!0,h.push(S),!l)break;S[2]!=null?(b=Math.trunc(S[2].getX()),p=Math.trunc(S[2].getY())):(b=Math.trunc(S[4].getX()),p=Math.trunc(S[4].getY()))}return h}static findVertices(l,d,h){const p=l.getHeight(),b=l.getWidth(),y=new Array(8);return ar.copyToResult(y,ar.findRowsWithPattern(l,p,b,d,h,ar.START_PATTERN),ar.INDEXES_START_PATTERN),y[4]!=null&&(h=Math.trunc(y[4].getX()),d=Math.trunc(y[4].getY())),ar.copyToResult(y,ar.findRowsWithPattern(l,p,b,d,h,ar.STOP_PATTERN),ar.INDEXES_STOP_PATTERN),y}static copyToResult(l,d,h){for(let p=0;p<h.length;p++)l[h[p]]=d[p]}static findRowsWithPattern(l,d,h,p,b,y){const S=new Array(4);let j=!1;const M=new Int32Array(y.length);for(;p<d;p+=ar.ROW_STEP){let te=ar.findGuardPattern(l,b,p,h,!1,y,M);if(te!=null){for(;p>0;){const se=ar.findGuardPattern(l,b,--p,h,!1,y,M);if(se!=null)te=se;else{p++;break}}S[0]=new Fe(te[0],p),S[1]=new Fe(te[1],p),j=!0;break}}let G=p+1;if(j){let te=0,se=Int32Array.from([Math.trunc(S[0].getX()),Math.trunc(S[1].getX())]);for(;G<d;G++){const ke=ar.findGuardPattern(l,se[0],G,h,!1,y,M);if(ke!=null&&Math.abs(se[0]-ke[0])<ar.MAX_PATTERN_DRIFT&&Math.abs(se[1]-ke[1])<ar.MAX_PATTERN_DRIFT)se=ke,te=0;else{if(te>ar.SKIPPED_ROW_COUNT_MAX)break;te++}}G-=te+1,S[2]=new Fe(se[0],G),S[3]=new Fe(se[1],G)}return G-p<ar.BARCODE_MIN_HEIGHT&&D.fill(S,null),S}static findGuardPattern(l,d,h,p,b,y,S){D.fillWithin(S,0,S.length,0);let j=d,M=0;for(;l.get(j,h)&&j>0&&M++<ar.MAX_PIXEL_DRIFT;)j--;let G=j,te=0,se=y.length;for(let ke=b;G<p;G++)if(l.get(G,h)!==ke)S[te]++;else{if(te===se-1){if(ar.patternMatchVariance(S,y,ar.MAX_INDIVIDUAL_VARIANCE)<ar.MAX_AVG_VARIANCE)return new Int32Array([j,G]);j+=S[0]+S[1],A.arraycopy(S,2,S,0,te-1),S[te-1]=0,S[te]=0,te--}else te++;S[te]=1,ke=!ke}return te===se-1&&ar.patternMatchVariance(S,y,ar.MAX_INDIVIDUAL_VARIANCE)<ar.MAX_AVG_VARIANCE?new Int32Array([j,G-1]):null}static patternMatchVariance(l,d,h){let p=l.length,b=0,y=0;for(let M=0;M<p;M++)b+=l[M],y+=d[M];if(b<y)return 1/0;let S=b/y;h*=S;let j=0;for(let M=0;M<p;M++){let G=l[M],te=d[M]*S,se=G>te?G-te:te-G;if(se>h)return 1/0;j+=se}return j/b}}ar.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ar.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ar.MAX_AVG_VARIANCE=.42,ar.MAX_INDIVIDUAL_VARIANCE=.8,ar.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ar.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ar.MAX_PIXEL_DRIFT=3,ar.MAX_PATTERN_DRIFT=5,ar.SKIPPED_ROW_COUNT_MAX=25,ar.ROW_STEP=5,ar.BARCODE_MIN_HEIGHT=10;class dn{constructor(l,d){if(d.length===0)throw new _;this.field=l;let h=d.length;if(h>1&&d[0]===0){let p=1;for(;p<h&&d[p]===0;)p++;p===h?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(h-p),A.arraycopy(d,p,this.coefficients,0,this.coefficients.length))}else this.coefficients=d}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);if(l===1){let p=0;for(let b of this.coefficients)p=this.field.add(p,b);return p}let d=this.coefficients[0],h=this.coefficients.length;for(let p=1;p<h;p++)d=this.field.add(this.field.multiply(l,d),this.coefficients[p]);return d}add(l){if(!this.field.equals(l.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return l;if(l.isZero())return this;let d=this.coefficients,h=l.coefficients;if(d.length>h.length){let y=d;d=h,h=y}let p=new Int32Array(h.length),b=h.length-d.length;A.arraycopy(h,0,p,0,b);for(let y=b;y<h.length;y++)p[y]=this.field.add(d[y-b],h[y]);return new dn(this.field,p)}subtract(l){if(!this.field.equals(l.field))throw new _("ModulusPolys do not have same ModulusGF field");return l.isZero()?this:this.add(l.negative())}multiply(l){return l instanceof dn?this.multiplyOther(l):this.multiplyScalar(l)}multiplyOther(l){if(!this.field.equals(l.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||l.isZero())return new dn(this.field,new Int32Array([0]));let d=this.coefficients,h=d.length,p=l.coefficients,b=p.length,y=new Int32Array(h+b-1);for(let S=0;S<h;S++){let j=d[S];for(let M=0;M<b;M++)y[S+M]=this.field.add(y[S+M],this.field.multiply(j,p[M]))}return new dn(this.field,y)}negative(){let l=this.coefficients.length,d=new Int32Array(l);for(let h=0;h<l;h++)d[h]=this.field.subtract(0,this.coefficients[h]);return new dn(this.field,d)}multiplyScalar(l){if(l===0)return new dn(this.field,new Int32Array([0]));if(l===1)return this;let d=this.coefficients.length,h=new Int32Array(d);for(let p=0;p<d;p++)h[p]=this.field.multiply(this.coefficients[p],l);return new dn(this.field,h)}multiplyByMonomial(l,d){if(l<0)throw new _;if(d===0)return new dn(this.field,new Int32Array([0]));let h=this.coefficients.length,p=new Int32Array(h+l);for(let b=0;b<h;b++)p[b]=this.field.multiply(this.coefficients[b],d);return new dn(this.field,p)}toString(){let l=new xe;for(let d=this.getDegree();d>=0;d--){let h=this.getCoefficient(d);h!==0&&(h<0?(l.append(" - "),h=-h):l.length()>0&&l.append(" + "),(d===0||h!==1)&&l.append(h),d!==0&&(d===1?l.append("x"):(l.append("x^"),l.append(d))))}return l.toString()}}class ru{add(l,d){return(l+d)%this.modulus}subtract(l,d){return(this.modulus+l-d)%this.modulus}exp(l){return this.expTable[l]}log(l){if(l===0)throw new _;return this.logTable[l]}inverse(l){if(l===0)throw new ve;return this.expTable[this.modulus-this.logTable[l]-1]}multiply(l,d){return l===0||d===0?0:this.expTable[(this.logTable[l]+this.logTable[d])%(this.modulus-1)]}getSize(){return this.modulus}equals(l){return l===this}}class Xi extends ru{constructor(l,d){super(),this.modulus=l,this.expTable=new Int32Array(l),this.logTable=new Int32Array(l);let h=1;for(let p=0;p<l;p++)this.expTable[p]=h,h=h*d%l;for(let p=0;p<l-1;p++)this.logTable[this.expTable[p]]=p;this.zero=new dn(this,new Int32Array([0])),this.one=new dn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,d){if(l<0)throw new _;if(d===0)return this.zero;let h=new Int32Array(l+1);return h[0]=d,new dn(this,h)}}Xi.PDF417_GF=new Xi(Kt.NUMBER_OF_CODEWORDS,3);class li{constructor(){this.field=Xi.PDF417_GF}decode(l,d,h){let p=new dn(this.field,l),b=new Int32Array(d),y=!1;for(let Ce=d;Ce>0;Ce--){let Re=p.evaluateAt(this.field.exp(Ce));b[d-Ce]=Re,Re!==0&&(y=!0)}if(!y)return 0;let S=this.field.getOne();if(h!=null)for(const Ce of h){let Re=this.field.exp(l.length-1-Ce),Ge=new dn(this.field,new Int32Array([this.field.subtract(0,Re),1]));S=S.multiply(Ge)}let j=new dn(this.field,b),M=this.runEuclideanAlgorithm(this.field.buildMonomial(d,1),j,d),G=M[0],te=M[1],se=this.findErrorLocations(G),ke=this.findErrorMagnitudes(te,G,se);for(let Ce=0;Ce<se.length;Ce++){let Re=l.length-1-this.field.log(se[Ce]);if(Re<0)throw k.getChecksumInstance();l[Re]=this.field.subtract(l[Re],ke[Ce])}return se.length}runEuclideanAlgorithm(l,d,h){if(l.getDegree()<d.getDegree()){let se=l;l=d,d=se}let p=l,b=d,y=this.field.getZero(),S=this.field.getOne();for(;b.getDegree()>=Math.round(h/2);){let se=p,ke=y;if(p=b,y=S,p.isZero())throw k.getChecksumInstance();b=se;let Ce=this.field.getZero(),Re=p.getCoefficient(p.getDegree()),Ge=this.field.inverse(Re);for(;b.getDegree()>=p.getDegree()&&!b.isZero();){let rt=b.getDegree()-p.getDegree(),Et=this.field.multiply(b.getCoefficient(b.getDegree()),Ge);Ce=Ce.add(this.field.buildMonomial(rt,Et)),b=b.subtract(p.multiplyByMonomial(rt,Et))}S=Ce.multiply(y).subtract(ke).negative()}let j=S.getCoefficient(0);if(j===0)throw k.getChecksumInstance();let M=this.field.inverse(j),G=S.multiply(M),te=b.multiply(M);return[G,te]}findErrorLocations(l){let d=l.getDegree(),h=new Int32Array(d),p=0;for(let b=1;b<this.field.getSize()&&p<d;b++)l.evaluateAt(b)===0&&(h[p]=this.field.inverse(b),p++);if(p!==d)throw k.getChecksumInstance();return h}findErrorMagnitudes(l,d,h){let p=d.getDegree(),b=new Int32Array(p);for(let M=1;M<=p;M++)b[p-M]=this.field.multiply(M,d.getCoefficient(M));let y=new dn(this.field,b),S=h.length,j=new Int32Array(S);for(let M=0;M<S;M++){let G=this.field.inverse(h[M]),te=this.field.subtract(0,l.evaluateAt(G)),se=this.field.inverse(y.evaluateAt(G));j[M]=this.field.multiply(te,se)}return j}}class oi{constructor(l,d,h,p,b){l instanceof oi?this.constructor_2(l):this.constructor_1(l,d,h,p,b)}constructor_1(l,d,h,p,b){const y=d==null||h==null,S=p==null||b==null;if(y&&S)throw new ne;y?(d=new Fe(0,p.getY()),h=new Fe(0,b.getY())):S&&(p=new Fe(l.getWidth()-1,d.getY()),b=new Fe(l.getWidth()-1,h.getY())),this.image=l,this.topLeft=d,this.bottomLeft=h,this.topRight=p,this.bottomRight=b,this.minX=Math.trunc(Math.min(d.getX(),h.getX())),this.maxX=Math.trunc(Math.max(p.getX(),b.getX())),this.minY=Math.trunc(Math.min(d.getY(),p.getY())),this.maxY=Math.trunc(Math.max(h.getY(),b.getY()))}constructor_2(l){this.image=l.image,this.topLeft=l.getTopLeft(),this.bottomLeft=l.getBottomLeft(),this.topRight=l.getTopRight(),this.bottomRight=l.getBottomRight(),this.minX=l.getMinX(),this.maxX=l.getMaxX(),this.minY=l.getMinY(),this.maxY=l.getMaxY()}static merge(l,d){return l==null?d:d==null?l:new oi(l.image,l.topLeft,l.bottomLeft,d.topRight,d.bottomRight)}addMissingRows(l,d,h){let p=this.topLeft,b=this.bottomLeft,y=this.topRight,S=this.bottomRight;if(l>0){let j=h?this.topLeft:this.topRight,M=Math.trunc(j.getY()-l);M<0&&(M=0);let G=new Fe(j.getX(),M);h?p=G:y=G}if(d>0){let j=h?this.bottomLeft:this.bottomRight,M=Math.trunc(j.getY()+d);M>=this.image.getHeight()&&(M=this.image.getHeight()-1);let G=new Fe(j.getX(),M);h?b=G:S=G}return new oi(this.image,p,b,y,S)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Rc{constructor(l,d,h,p){this.columnCount=l,this.errorCorrectionLevel=p,this.rowCountUpperPart=d,this.rowCountLowerPart=h,this.rowCount=d+h}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ol{constructor(){this.buffer=""}static form(l,d){let h=-1;function p(y,S,j,M,G,te){if(y==="%%")return"%";if(d[++h]===void 0)return;y=M?parseInt(M.substr(1)):void 0;let se=G?parseInt(G.substr(1)):void 0,ke;switch(te){case"s":ke=d[h];break;case"c":ke=d[h][0];break;case"f":ke=parseFloat(d[h]).toFixed(y);break;case"p":ke=parseFloat(d[h]).toPrecision(y);break;case"e":ke=parseFloat(d[h]).toExponential(y);break;case"x":ke=parseInt(d[h]).toString(se||16);break;case"d":ke=parseFloat(parseInt(d[h],se||10).toPrecision(y)).toFixed(0);break}ke=typeof ke=="object"?JSON.stringify(ke):(+ke).toString(se);let Ce=parseInt(j),Re=j&&j[0]+""=="0"?"0":" ";for(;ke.length<Ce;)ke=S!==void 0?ke+Re:Re+ke;return ke}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(b,p)}format(l,...d){this.buffer+=Ol.form(l,d)}toString(){return this.buffer}}class Ei{constructor(l){this.boundingBox=new oi(l),this.codewords=new Array(l.getMaxY()-l.getMinY()+1)}getCodewordNearby(l){let d=this.getCodeword(l);if(d!=null)return d;for(let h=1;h<Ei.MAX_NEARBY_DISTANCE;h++){let p=this.imageRowToCodewordIndex(l)-h;if(p>=0&&(d=this.codewords[p],d!=null)||(p=this.imageRowToCodewordIndex(l)+h,p<this.codewords.length&&(d=this.codewords[p],d!=null)))return d}return null}imageRowToCodewordIndex(l){return l-this.boundingBox.getMinY()}setCodeword(l,d){this.codewords[this.imageRowToCodewordIndex(l)]=d}getCodeword(l){return this.codewords[this.imageRowToCodewordIndex(l)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const l=new Ol;let d=0;for(const h of this.codewords){if(h==null){l.format("%3d:    |   %n",d++);continue}l.format("%3d: %3d|%3d%n",d++,h.getRowNumber(),h.getValue())}return l.toString()}}Ei.MAX_NEARBY_DISTANCE=5;class Si{constructor(){this.values=new Map}setValue(l){l=Math.trunc(l);let d=this.values.get(l);d==null&&(d=0),d++,this.values.set(l,d)}getValue(){let l=-1,d=new Array;for(const[h,p]of this.values.entries()){const b={getKey:()=>h,getValue:()=>p};b.getValue()>l?(l=b.getValue(),d=[],d.push(b.getKey())):b.getValue()===l&&d.push(b.getKey())}return Kt.toIntArray(d)}getConfidence(l){return this.values.get(l)}}class nu extends Ei{constructor(l,d){super(l),this._isLeft=d}setRowNumbers(){for(let l of this.getCodewords())l?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(l){let d=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(d,l);let h=this.getBoundingBox(),p=this._isLeft?h.getTopLeft():h.getTopRight(),b=this._isLeft?h.getBottomLeft():h.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(p.getY())),S=this.imageRowToCodewordIndex(Math.trunc(b.getY())),j=-1,M=1,G=0;for(let te=y;te<S;te++){if(d[te]==null)continue;let se=d[te],ke=se.getRowNumber()-j;if(ke===0)G++;else if(ke===1)M=Math.max(M,G),G=1,j=se.getRowNumber();else if(ke<0||se.getRowNumber()>=l.getRowCount()||ke>te)d[te]=null;else{let Ce;M>2?Ce=(M-2)*ke:Ce=ke;let Re=Ce>=te;for(let Ge=1;Ge<=Ce&&!Re;Ge++)Re=d[te-Ge]!=null;Re?d[te]=null:(j=se.getRowNumber(),G=1)}}}getRowHeights(){let l=this.getBarcodeMetadata();if(l==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(l);let d=new Int32Array(l.getRowCount());for(let h of this.getCodewords())if(h!=null){let p=h.getRowNumber();if(p>=d.length)continue;d[p]++}return d}adjustIncompleteIndicatorColumnRowNumbers(l){let d=this.getBoundingBox(),h=this._isLeft?d.getTopLeft():d.getTopRight(),p=this._isLeft?d.getBottomLeft():d.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.imageRowToCodewordIndex(Math.trunc(p.getY())),S=this.getCodewords(),j=-1;for(let M=b;M<y;M++){if(S[M]==null)continue;let G=S[M];G.setRowNumberAsRowIndicatorColumn();let te=G.getRowNumber()-j;te===0||(te===1?j=G.getRowNumber():G.getRowNumber()>=l.getRowCount()?S[M]=null:j=G.getRowNumber())}}getBarcodeMetadata(){let l=this.getCodewords(),d=new Si,h=new Si,p=new Si,b=new Si;for(let S of l){if(S==null)continue;S.setRowNumberAsRowIndicatorColumn();let j=S.getValue()%30,M=S.getRowNumber();switch(this._isLeft||(M+=2),M%3){case 0:h.setValue(j*3+1);break;case 1:b.setValue(j/3),p.setValue(j%3);break;case 2:d.setValue(j+1);break}}if(d.getValue().length===0||h.getValue().length===0||p.getValue().length===0||b.getValue().length===0||d.getValue()[0]<1||h.getValue()[0]+p.getValue()[0]<Kt.MIN_ROWS_IN_BARCODE||h.getValue()[0]+p.getValue()[0]>Kt.MAX_ROWS_IN_BARCODE)return null;let y=new Rc(d.getValue()[0],h.getValue()[0],p.getValue()[0],b.getValue()[0]);return this.removeIncorrectCodewords(l,y),y}removeIncorrectCodewords(l,d){for(let h=0;h<l.length;h++){let p=l[h];if(l[h]==null)continue;let b=p.getValue()%30,y=p.getRowNumber();if(y>d.getRowCount()){l[h]=null;continue}switch(this._isLeft||(y+=2),y%3){case 0:b*3+1!==d.getRowCountUpperPart()&&(l[h]=null);break;case 1:(Math.trunc(b/3)!==d.getErrorCorrectionLevel()||b%3!==d.getRowCountLowerPart())&&(l[h]=null);break;case 2:b+1!==d.getColumnCount()&&(l[h]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Qn{constructor(l,d){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=l,this.barcodeColumnCount=l.getColumnCount(),this.boundingBox=d,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let l=Kt.MAX_CODEWORDS_IN_BARCODE,d;do d=l,l=this.adjustRowNumbersAndGetCount();while(l>0&&l<d);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(l){l?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let l=this.adjustRowNumbersByRow();if(l===0)return 0;for(let d=1;d<this.barcodeColumnCount+1;d++){let h=this.detectionResultColumns[d].getCodewords();for(let p=0;p<h.length;p++)h[p]!=null&&(h[p].hasValidRowNumber()||this.adjustRowNumbers(d,p,h))}return l}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let l=this.detectionResultColumns[0].getCodewords(),d=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<l.length;h++)if(l[h]!=null&&d[h]!=null&&l[h].getRowNumber()===d[h].getRowNumber())for(let p=1;p<=this.barcodeColumnCount;p++){let b=this.detectionResultColumns[p].getCodewords()[h];b!=null&&(b.setRowNumber(l[h].getRowNumber()),b.hasValidRowNumber()||(this.detectionResultColumns[p].getCodewords()[h]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let l=0,d=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<d.length;h++){if(d[h]==null)continue;let p=d[h].getRowNumber(),b=0;for(let y=this.barcodeColumnCount+1;y>0&&b<this.ADJUST_ROW_NUMBER_SKIP;y--){let S=this.detectionResultColumns[y].getCodewords()[h];S!=null&&(b=Qn.adjustRowNumberIfValid(p,b,S),S.hasValidRowNumber()||l++)}}return l}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let l=0,d=this.detectionResultColumns[0].getCodewords();for(let h=0;h<d.length;h++){if(d[h]==null)continue;let p=d[h].getRowNumber(),b=0;for(let y=1;y<this.barcodeColumnCount+1&&b<this.ADJUST_ROW_NUMBER_SKIP;y++){let S=this.detectionResultColumns[y].getCodewords()[h];S!=null&&(b=Qn.adjustRowNumberIfValid(p,b,S),S.hasValidRowNumber()||l++)}}return l}static adjustRowNumberIfValid(l,d,h){return h==null||h.hasValidRowNumber()||(h.isValidRowNumber(l)?(h.setRowNumber(l),d=0):++d),d}adjustRowNumbers(l,d,h){if(!this.detectionResultColumns[l-1])return;let p=h[d],b=this.detectionResultColumns[l-1].getCodewords(),y=b;this.detectionResultColumns[l+1]!=null&&(y=this.detectionResultColumns[l+1].getCodewords());let S=new Array(14);S[2]=b[d],S[3]=y[d],d>0&&(S[0]=h[d-1],S[4]=b[d-1],S[5]=y[d-1]),d>1&&(S[8]=h[d-2],S[10]=b[d-2],S[11]=y[d-2]),d<h.length-1&&(S[1]=h[d+1],S[6]=b[d+1],S[7]=y[d+1]),d<h.length-2&&(S[9]=h[d+2],S[12]=b[d+2],S[13]=y[d+2]);for(let j of S)if(Qn.adjustRowNumber(p,j))return}static adjustRowNumber(l,d){return d==null?!1:d.hasValidRowNumber()&&d.getBucket()===l.getBucket()?(l.setRowNumber(d.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(l){this.boundingBox=l}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(l,d){this.detectionResultColumns[l]=d}getDetectionResultColumn(l){return this.detectionResultColumns[l]}toString(){let l=this.detectionResultColumns[0];l==null&&(l=this.detectionResultColumns[this.barcodeColumnCount+1]);let d=new Ol;for(let h=0;h<l.getCodewords().length;h++){d.format("CW %3d:",h);for(let p=0;p<this.barcodeColumnCount+2;p++){if(this.detectionResultColumns[p]==null){d.format("    |   ");continue}let b=this.detectionResultColumns[p].getCodewords()[h];if(b==null){d.format("    |   ");continue}d.format(" %3d|%3d",b.getRowNumber(),b.getValue())}d.format("%n")}return d.toString()}}class ms{constructor(l,d,h,p){this.rowNumber=ms.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(l),this.endX=Math.trunc(d),this.bucket=Math.trunc(h),this.value=Math.trunc(p)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(l){return l!==ms.BARCODE_ROW_UNKNOWN&&this.bucket===l%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(l){this.rowNumber=l}toString(){return this.rowNumber+"|"+this.value}}ms.BARCODE_ROW_UNKNOWN=-1;class ca{static initialize(){for(let l=0;l<Kt.SYMBOL_TABLE.length;l++){let d=Kt.SYMBOL_TABLE[l],h=d&1;for(let p=0;p<Kt.BARS_IN_MODULE;p++){let b=0;for(;(d&1)===h;)b+=1,d>>=1;h=d&1,ca.RATIOS_TABLE[l]||(ca.RATIOS_TABLE[l]=new Array(Kt.BARS_IN_MODULE)),ca.RATIOS_TABLE[l][Kt.BARS_IN_MODULE-p-1]=Math.fround(b/Kt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(l){let d=ca.getDecodedCodewordValue(ca.sampleBitCounts(l));return d!==-1?d:ca.getClosestDecodedValue(l)}static sampleBitCounts(l){let d=Ee.sum(l),h=new Int32Array(Kt.BARS_IN_MODULE),p=0,b=0;for(let y=0;y<Kt.MODULES_IN_CODEWORD;y++){let S=d/(2*Kt.MODULES_IN_CODEWORD)+y*d/Kt.MODULES_IN_CODEWORD;b+l[p]<=S&&(b+=l[p],p++),h[p]++}return h}static getDecodedCodewordValue(l){let d=ca.getBitValue(l);return Kt.getCodeword(d)===-1?-1:d}static getBitValue(l){let d=0;for(let h=0;h<l.length;h++)for(let p=0;p<l[h];p++)d=d<<1|(h%2===0?1:0);return Math.trunc(d)}static getClosestDecodedValue(l){let d=Ee.sum(l),h=new Array(Kt.BARS_IN_MODULE);if(d>1)for(let y=0;y<h.length;y++)h[y]=Math.fround(l[y]/d);let p=at.MAX_VALUE,b=-1;this.bSymbolTableReady||ca.initialize();for(let y=0;y<ca.RATIOS_TABLE.length;y++){let S=0,j=ca.RATIOS_TABLE[y];for(let M=0;M<Kt.BARS_IN_MODULE;M++){let G=Math.fround(j[M]-h[M]);if(S+=Math.fround(G*G),S>=p)break}S<p&&(p=S,b=Kt.SYMBOL_TABLE[y])}return b}}ca.bSymbolTableReady=!1,ca.RATIOS_TABLE=new Array(Kt.SYMBOL_TABLE.length).map(ee=>new Array(Kt.BARS_IN_MODULE));class Il{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(l){this.segmentIndex=l}getFileId(){return this.fileId}setFileId(l){this.fileId=l}getOptionalData(){return this.optionalData}setOptionalData(l){this.optionalData=l}isLastSegment(){return this.lastSegment}setLastSegment(l){this.lastSegment=l}getSegmentCount(){return this.segmentCount}setSegmentCount(l){this.segmentCount=l}getSender(){return this.sender||null}setSender(l){this.sender=l}getAddressee(){return this.addressee||null}setAddressee(l){this.addressee=l}getFileName(){return this.fileName}setFileName(l){this.fileName=l}getFileSize(){return this.fileSize}setFileSize(l){this.fileSize=l}getChecksum(){return this.checksum}setChecksum(l){this.checksum=l}getTimestamp(){return this.timestamp}setTimestamp(l){this.timestamp=l}}class ff{static parseLong(l,d=void 0){return parseInt(l,d)}}class Oc extends m{}Oc.kind="NullPointerException";class au{writeBytes(l){this.writeBytesOffset(l,0,l.length)}writeBytesOffset(l,d,h){if(l==null)throw new Oc;if(d<0||d>l.length||h<0||d+h>l.length||d+h<0)throw new C;if(h===0)return;for(let p=0;p<h;p++)this.write(l[d+p])}flush(){}close(){}}class To extends m{}class Ic extends au{constructor(l=32){if(super(),this.count=0,l<0)throw new _("Negative initial size: "+l);this.buf=new Uint8Array(l)}ensureCapacity(l){l-this.buf.length>0&&this.grow(l)}grow(l){let h=this.buf.length<<1;if(h-l<0&&(h=l),h<0){if(l<0)throw new To;h=O.MAX_VALUE}this.buf=D.copyOfUint8Array(this.buf,h)}write(l){this.ensureCapacity(this.count+1),this.buf[this.count]=l,this.count+=1}writeBytesOffset(l,d,h){if(d<0||d>l.length||h<0||d+h-l.length>0)throw new C;this.ensureCapacity(this.count+h),A.arraycopy(l,d,this.buf,this.count,h),this.count+=h}writeTo(l){l.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return D.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(l){return l?typeof l=="string"?this.toString_string(l):this.toString_number(l):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(l){return new String(this.buf).toString()}toString_number(l){return new String(this.buf).toString()}close(){}}var Kr;(function(ee){ee[ee.ALPHA=0]="ALPHA",ee[ee.LOWER=1]="LOWER",ee[ee.MIXED=2]="MIXED",ee[ee.PUNCT=3]="PUNCT",ee[ee.ALPHA_SHIFT=4]="ALPHA_SHIFT",ee[ee.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Kr||(Kr={}));function hf(){if(typeof window<"u")return window.BigInt||null;if(typeof ho<"u")return ho.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Dc;function Ai(ee){if(typeof Dc>"u"&&(Dc=hf()),Dc===null)throw new Error("BigInt is not supported!");return Dc(ee)}function su(){let ee=[];ee[0]=Ai(1);let l=Ai(900);ee[1]=l;for(let d=2;d<16;d++)ee[d]=ee[d-1]*l;return ee}class nt{static decode(l,d){let h=new xe(""),p=H.ISO8859_1;h.enableDecoding(p);let b=1,y=l[b++],S=new Il;for(;b<l[0];){switch(y){case nt.TEXT_COMPACTION_MODE_LATCH:b=nt.textCompaction(l,b,h);break;case nt.BYTE_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH_6:b=nt.byteCompaction(y,l,p,b,h);break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(l[b++]);break;case nt.NUMERIC_COMPACTION_MODE_LATCH:b=nt.numericCompaction(l,b,h);break;case nt.ECI_CHARSET:H.getCharacterSetECIByValue(l[b++]);break;case nt.ECI_GENERAL_PURPOSE:b+=2;break;case nt.ECI_USER_DEFINED:b++;break;case nt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:b=nt.decodeMacroBlock(l,b,S);break;case nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case nt.MACRO_PDF417_TERMINATOR:throw new F;default:b--,b=nt.textCompaction(l,b,h);break}if(b<l.length)y=l[b++];else throw F.getFormatInstance()}if(h.length()===0)throw F.getFormatInstance();let j=new Pe(null,h.toString(),null,d);return j.setOther(S),j}static decodeMacroBlock(l,d,h){if(d+nt.NUMBER_OF_SEQUENCE_CODEWORDS>l[0])throw F.getFormatInstance();let p=new Int32Array(nt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let S=0;S<nt.NUMBER_OF_SEQUENCE_CODEWORDS;S++,d++)p[S]=l[d];h.setSegmentIndex(O.parseInt(nt.decodeBase900toBase10(p,nt.NUMBER_OF_SEQUENCE_CODEWORDS)));let b=new xe;d=nt.textCompaction(l,d,b),h.setFileId(b.toString());let y=-1;for(l[d]===nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(y=d+1);d<l[0];)switch(l[d]){case nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(d++,l[d]){case nt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let S=new xe;d=nt.textCompaction(l,d+1,S),h.setFileName(S.toString());break;case nt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let j=new xe;d=nt.textCompaction(l,d+1,j),h.setSender(j.toString());break;case nt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let M=new xe;d=nt.textCompaction(l,d+1,M),h.setAddressee(M.toString());break;case nt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let G=new xe;d=nt.numericCompaction(l,d+1,G),h.setSegmentCount(O.parseInt(G.toString()));break;case nt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let te=new xe;d=nt.numericCompaction(l,d+1,te),h.setTimestamp(ff.parseLong(te.toString()));break;case nt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let se=new xe;d=nt.numericCompaction(l,d+1,se),h.setChecksum(O.parseInt(se.toString()));break;case nt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ke=new xe;d=nt.numericCompaction(l,d+1,ke),h.setFileSize(ff.parseLong(ke.toString()));break;default:throw F.getFormatInstance()}break;case nt.MACRO_PDF417_TERMINATOR:d++,h.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(y!==-1){let S=d-y;h.isLastSegment()&&S--,h.setOptionalData(D.copyOfRange(l,y,y+S))}return d}static textCompaction(l,d,h){let p=new Int32Array((l[0]-d)*2),b=new Int32Array((l[0]-d)*2),y=0,S=!1;for(;d<l[0]&&!S;){let j=l[d++];if(j<nt.TEXT_COMPACTION_MODE_LATCH)p[y]=j/30,p[y+1]=j%30,y+=2;else switch(j){case nt.TEXT_COMPACTION_MODE_LATCH:p[y++]=nt.TEXT_COMPACTION_MODE_LATCH;break;case nt.BYTE_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH_6:case nt.NUMERIC_COMPACTION_MODE_LATCH:case nt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case nt.MACRO_PDF417_TERMINATOR:d--,S=!0;break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p[y]=nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,j=l[d++],b[y]=j,y++;break}}return nt.decodeTextCompaction(p,b,y,h),d}static decodeTextCompaction(l,d,h,p){let b=Kr.ALPHA,y=Kr.ALPHA,S=0;for(;S<h;){let j=l[S],M="";switch(b){case Kr.ALPHA:if(j<26)M=String.fromCharCode(65+j);else switch(j){case 26:M=" ";break;case nt.LL:b=Kr.LOWER;break;case nt.ML:b=Kr.MIXED;break;case nt.PS:y=b,b=Kr.PUNCT_SHIFT;break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p.append(d[S]);break;case nt.TEXT_COMPACTION_MODE_LATCH:b=Kr.ALPHA;break}break;case Kr.LOWER:if(j<26)M=String.fromCharCode(97+j);else switch(j){case 26:M=" ";break;case nt.AS:y=b,b=Kr.ALPHA_SHIFT;break;case nt.ML:b=Kr.MIXED;break;case nt.PS:y=b,b=Kr.PUNCT_SHIFT;break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p.append(d[S]);break;case nt.TEXT_COMPACTION_MODE_LATCH:b=Kr.ALPHA;break}break;case Kr.MIXED:if(j<nt.PL)M=nt.MIXED_CHARS[j];else switch(j){case nt.PL:b=Kr.PUNCT;break;case 26:M=" ";break;case nt.LL:b=Kr.LOWER;break;case nt.AL:b=Kr.ALPHA;break;case nt.PS:y=b,b=Kr.PUNCT_SHIFT;break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p.append(d[S]);break;case nt.TEXT_COMPACTION_MODE_LATCH:b=Kr.ALPHA;break}break;case Kr.PUNCT:if(j<nt.PAL)M=nt.PUNCT_CHARS[j];else switch(j){case nt.PAL:b=Kr.ALPHA;break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p.append(d[S]);break;case nt.TEXT_COMPACTION_MODE_LATCH:b=Kr.ALPHA;break}break;case Kr.ALPHA_SHIFT:if(b=y,j<26)M=String.fromCharCode(65+j);else switch(j){case 26:M=" ";break;case nt.TEXT_COMPACTION_MODE_LATCH:b=Kr.ALPHA;break}break;case Kr.PUNCT_SHIFT:if(b=y,j<nt.PAL)M=nt.PUNCT_CHARS[j];else switch(j){case nt.PAL:b=Kr.ALPHA;break;case nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:p.append(d[S]);break;case nt.TEXT_COMPACTION_MODE_LATCH:b=Kr.ALPHA;break}break}M!==""&&p.append(M),S++}}static byteCompaction(l,d,h,p,b){let y=new Ic,S=0,j=0,M=!1;switch(l){case nt.BYTE_COMPACTION_MODE_LATCH:let G=new Int32Array(6),te=d[p++];for(;p<d[0]&&!M;)switch(G[S++]=te,j=900*j+te,te=d[p++],te){case nt.TEXT_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH:case nt.NUMERIC_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH_6:case nt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case nt.MACRO_PDF417_TERMINATOR:p--,M=!0;break;default:if(S%5===0&&S>0){for(let se=0;se<6;++se)y.write(Number(Ai(j)>>Ai(8*(5-se))));j=0,S=0}break}p===d[0]&&te<nt.TEXT_COMPACTION_MODE_LATCH&&(G[S++]=te);for(let se=0;se<S;se++)y.write(G[se]);break;case nt.BYTE_COMPACTION_MODE_LATCH_6:for(;p<d[0]&&!M;){let se=d[p++];if(se<nt.TEXT_COMPACTION_MODE_LATCH)S++,j=900*j+se;else switch(se){case nt.TEXT_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH:case nt.NUMERIC_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH_6:case nt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case nt.MACRO_PDF417_TERMINATOR:p--,M=!0;break}if(S%5===0&&S>0){for(let ke=0;ke<6;++ke)y.write(Number(Ai(j)>>Ai(8*(5-ke))));j=0,S=0}}break}return b.append(J.decode(y.toByteArray(),h)),p}static numericCompaction(l,d,h){let p=0,b=!1,y=new Int32Array(nt.MAX_NUMERIC_CODEWORDS);for(;d<l[0]&&!b;){let S=l[d++];if(d===l[0]&&(b=!0),S<nt.TEXT_COMPACTION_MODE_LATCH)y[p]=S,p++;else switch(S){case nt.TEXT_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH:case nt.BYTE_COMPACTION_MODE_LATCH_6:case nt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case nt.MACRO_PDF417_TERMINATOR:d--,b=!0;break}(p%nt.MAX_NUMERIC_CODEWORDS===0||S===nt.NUMERIC_COMPACTION_MODE_LATCH||b)&&p>0&&(h.append(nt.decodeBase900toBase10(y,p)),p=0)}return d}static decodeBase900toBase10(l,d){let h=Ai(0);for(let b=0;b<d;b++)h+=nt.EXP900[d-b-1]*Ai(l[b]);let p=h.toString();if(p.charAt(0)!=="1")throw new F;return p.substring(1)}}nt.TEXT_COMPACTION_MODE_LATCH=900,nt.BYTE_COMPACTION_MODE_LATCH=901,nt.NUMERIC_COMPACTION_MODE_LATCH=902,nt.BYTE_COMPACTION_MODE_LATCH_6=924,nt.ECI_USER_DEFINED=925,nt.ECI_GENERAL_PURPOSE=926,nt.ECI_CHARSET=927,nt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,nt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,nt.MACRO_PDF417_TERMINATOR=922,nt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,nt.MAX_NUMERIC_CODEWORDS=15,nt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,nt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,nt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,nt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,nt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,nt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,nt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,nt.PL=25,nt.LL=27,nt.AS=27,nt.ML=28,nt.AL=28,nt.PS=29,nt.PAL=29,nt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,nt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",nt.EXP900=hf()?su():[],nt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class wr{constructor(){}static decode(l,d,h,p,b,y,S){let j=new oi(l,d,h,p,b),M=null,G=null,te;for(let Ce=!0;;Ce=!1){if(d!=null&&(M=wr.getRowIndicatorColumn(l,j,d,!0,y,S)),p!=null&&(G=wr.getRowIndicatorColumn(l,j,p,!1,y,S)),te=wr.merge(M,G),te==null)throw ne.getNotFoundInstance();let Re=te.getBoundingBox();if(Ce&&Re!=null&&(Re.getMinY()<j.getMinY()||Re.getMaxY()>j.getMaxY()))j=Re;else break}te.setBoundingBox(j);let se=te.getBarcodeColumnCount()+1;te.setDetectionResultColumn(0,M),te.setDetectionResultColumn(se,G);let ke=M!=null;for(let Ce=1;Ce<=se;Ce++){let Re=ke?Ce:se-Ce;if(te.getDetectionResultColumn(Re)!==void 0)continue;let Ge;Re===0||Re===se?Ge=new nu(j,Re===0):Ge=new Ei(j),te.setDetectionResultColumn(Re,Ge);let rt=-1,Et=rt;for(let _t=j.getMinY();_t<=j.getMaxY();_t++){if(rt=wr.getStartColumn(te,Re,_t,ke),rt<0||rt>j.getMaxX()){if(Et===-1)continue;rt=Et}let yt=wr.detectCodeword(l,j.getMinX(),j.getMaxX(),ke,rt,_t,y,S);yt!=null&&(Ge.setCodeword(_t,yt),Et=rt,y=Math.min(y,yt.getWidth()),S=Math.max(S,yt.getWidth()))}}return wr.createDecoderResult(te)}static merge(l,d){if(l==null&&d==null)return null;let h=wr.getBarcodeMetadata(l,d);if(h==null)return null;let p=oi.merge(wr.adjustBoundingBox(l),wr.adjustBoundingBox(d));return new Qn(h,p)}static adjustBoundingBox(l){if(l==null)return null;let d=l.getRowHeights();if(d==null)return null;let h=wr.getMax(d),p=0;for(let S of d)if(p+=h-S,S>0)break;let b=l.getCodewords();for(let S=0;p>0&&b[S]==null;S++)p--;let y=0;for(let S=d.length-1;S>=0&&(y+=h-d[S],!(d[S]>0));S--);for(let S=b.length-1;y>0&&b[S]==null;S--)y--;return l.getBoundingBox().addMissingRows(p,y,l.isLeft())}static getMax(l){let d=-1;for(let h of l)d=Math.max(d,h);return d}static getBarcodeMetadata(l,d){let h;if(l==null||(h=l.getBarcodeMetadata())==null)return d==null?null:d.getBarcodeMetadata();let p;return d==null||(p=d.getBarcodeMetadata())==null?h:h.getColumnCount()!==p.getColumnCount()&&h.getErrorCorrectionLevel()!==p.getErrorCorrectionLevel()&&h.getRowCount()!==p.getRowCount()?null:h}static getRowIndicatorColumn(l,d,h,p,b,y){let S=new nu(d,p);for(let j=0;j<2;j++){let M=j===0?1:-1,G=Math.trunc(Math.trunc(h.getX()));for(let te=Math.trunc(Math.trunc(h.getY()));te<=d.getMaxY()&&te>=d.getMinY();te+=M){let se=wr.detectCodeword(l,0,l.getWidth(),p,G,te,b,y);se!=null&&(S.setCodeword(te,se),p?G=se.getStartX():G=se.getEndX())}}return S}static adjustCodewordCount(l,d){let h=d[0][1],p=h.getValue(),b=l.getBarcodeColumnCount()*l.getBarcodeRowCount()-wr.getNumberOfECCodeWords(l.getBarcodeECLevel());if(p.length===0){if(b<1||b>Kt.MAX_CODEWORDS_IN_BARCODE)throw ne.getNotFoundInstance();h.setValue(b)}else p[0]!==b&&h.setValue(b)}static createDecoderResult(l){let d=wr.createBarcodeMatrix(l);wr.adjustCodewordCount(l,d);let h=new Array,p=new Int32Array(l.getBarcodeRowCount()*l.getBarcodeColumnCount()),b=[],y=new Array;for(let j=0;j<l.getBarcodeRowCount();j++)for(let M=0;M<l.getBarcodeColumnCount();M++){let G=d[j][M+1].getValue(),te=j*l.getBarcodeColumnCount()+M;G.length===0?h.push(te):G.length===1?p[te]=G[0]:(y.push(te),b.push(G))}let S=new Array(b.length);for(let j=0;j<S.length;j++)S[j]=b[j];return wr.createDecoderResultFromAmbiguousValues(l.getBarcodeECLevel(),p,Kt.toIntArray(h),Kt.toIntArray(y),S)}static createDecoderResultFromAmbiguousValues(l,d,h,p,b){let y=new Int32Array(p.length),S=100;for(;S-- >0;){for(let j=0;j<y.length;j++)d[p[j]]=b[j][y[j]];try{return wr.decodeCodewords(d,l,h)}catch(j){if(!(j instanceof k))throw j}if(y.length===0)throw k.getChecksumInstance();for(let j=0;j<y.length;j++)if(y[j]<b[j].length-1){y[j]++;break}else if(y[j]=0,j===y.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(l){let d=Array.from({length:l.getBarcodeRowCount()},()=>new Array(l.getBarcodeColumnCount()+2));for(let p=0;p<d.length;p++)for(let b=0;b<d[p].length;b++)d[p][b]=new Si;let h=0;for(let p of l.getDetectionResultColumns()){if(p!=null){for(let b of p.getCodewords())if(b!=null){let y=b.getRowNumber();if(y>=0){if(y>=d.length)continue;d[y][h].setValue(b.getValue())}}}h++}return d}static isValidBarcodeColumn(l,d){return d>=0&&d<=l.getBarcodeColumnCount()+1}static getStartColumn(l,d,h,p){let b=p?1:-1,y=null;if(wr.isValidBarcodeColumn(l,d-b)&&(y=l.getDetectionResultColumn(d-b).getCodeword(h)),y!=null)return p?y.getEndX():y.getStartX();if(y=l.getDetectionResultColumn(d).getCodewordNearby(h),y!=null)return p?y.getStartX():y.getEndX();if(wr.isValidBarcodeColumn(l,d-b)&&(y=l.getDetectionResultColumn(d-b).getCodewordNearby(h)),y!=null)return p?y.getEndX():y.getStartX();let S=0;for(;wr.isValidBarcodeColumn(l,d-b);){d-=b;for(let j of l.getDetectionResultColumn(d).getCodewords())if(j!=null)return(p?j.getEndX():j.getStartX())+b*S*(j.getEndX()-j.getStartX());S++}return p?l.getBoundingBox().getMinX():l.getBoundingBox().getMaxX()}static detectCodeword(l,d,h,p,b,y,S,j){b=wr.adjustCodewordStartColumn(l,d,h,p,b,y);let M=wr.getModuleBitCount(l,d,h,p,b,y);if(M==null)return null;let G,te=Ee.sum(M);if(p)G=b+te;else{for(let Ce=0;Ce<M.length/2;Ce++){let Re=M[Ce];M[Ce]=M[M.length-1-Ce],M[M.length-1-Ce]=Re}G=b,b=G-te}if(!wr.checkCodewordSkew(te,S,j))return null;let se=ca.getDecodedValue(M),ke=Kt.getCodeword(se);return ke===-1?null:new ms(b,G,wr.getCodewordBucketNumber(se),ke)}static getModuleBitCount(l,d,h,p,b,y){let S=b,j=new Int32Array(8),M=0,G=p?1:-1,te=p;for(;(p?S<h:S>=d)&&M<j.length;)l.get(S,y)===te?(j[M]++,S+=G):(M++,te=!te);return M===j.length||S===(p?h:d)&&M===j.length-1?j:null}static getNumberOfECCodeWords(l){return 2<<l}static adjustCodewordStartColumn(l,d,h,p,b,y){let S=b,j=p?-1:1;for(let M=0;M<2;M++){for(;(p?S>=d:S<h)&&p===l.get(S,y);){if(Math.abs(b-S)>wr.CODEWORD_SKEW_SIZE)return b;S+=j}j=-j,p=!p}return S}static checkCodewordSkew(l,d,h){return d-wr.CODEWORD_SKEW_SIZE<=l&&l<=h+wr.CODEWORD_SKEW_SIZE}static decodeCodewords(l,d,h){if(l.length===0)throw F.getFormatInstance();let p=1<<d+1,b=wr.correctErrors(l,h,p);wr.verifyCodewordCount(l,p);let y=nt.decode(l,""+d);return y.setErrorsCorrected(b),y.setErasures(h.length),y}static correctErrors(l,d,h){if(d!=null&&d.length>h/2+wr.MAX_ERRORS||h<0||h>wr.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return wr.errorCorrection.decode(l,h,d)}static verifyCodewordCount(l,d){if(l.length<4)throw F.getFormatInstance();let h=l[0];if(h>l.length)throw F.getFormatInstance();if(h===0)if(d<l.length)l[0]=l.length-d;else throw F.getFormatInstance()}static getBitCountForCodeword(l){let d=new Int32Array(8),h=0,p=d.length-1;for(;!((l&1)!==h&&(h=l&1,p--,p<0));)d[p]++,l>>=1;return d}static getCodewordBucketNumber(l){return l instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(l):this.getCodewordBucketNumber_number(l)}static getCodewordBucketNumber_number(l){return wr.getCodewordBucketNumber(wr.getBitCountForCodeword(l))}static getCodewordBucketNumber_Int32Array(l){return(l[0]-l[2]+l[4]-l[6]+9)%9}static toString(l){let d=new Ol;for(let h=0;h<l.length;h++){d.format("Row %2d: ",h);for(let p=0;p<l[h].length;p++){let b=l[h][p];b.getValue().length===0?d.format("        ",null):d.format("%4d(%2d)",b.getValue()[0],b.getConfidence(b.getValue()[0]))}d.format("%n")}return d.toString()}}wr.CODEWORD_SKEW_SIZE=2,wr.MAX_ERRORS=3,wr.MAX_EC_CODEWORDS=512,wr.errorCorrection=new li;class ua{decode(l,d=null){let h=ua.decode(l,d,!1);if(h==null||h.length===0||h[0]==null)throw ne.getNotFoundInstance();return h[0]}decodeMultiple(l,d=null){try{return ua.decode(l,d,!0)}catch(h){throw h instanceof F||h instanceof k?ne.getNotFoundInstance():h}}static decode(l,d,h){const p=new Array,b=ar.detectMultiple(l,d,h);for(const y of b.getPoints()){const S=wr.decode(b.getBits(),y[4],y[5],y[6],y[7],ua.getMinCodewordWidth(y),ua.getMaxCodewordWidth(y)),j=new P(S.getText(),S.getRawBytes(),void 0,y,pe.PDF_417);j.putMetadata(Be.ERROR_CORRECTION_LEVEL,S.getECLevel());const M=S.getOther();M!=null&&j.putMetadata(Be.PDF417_EXTRA_METADATA,M),p.push(j)}return p.map(y=>y)}static getMaxWidth(l,d){return l==null||d==null?0:Math.trunc(Math.abs(l.getX()-d.getX()))}static getMinWidth(l,d){return l==null||d==null?O.MAX_VALUE:Math.trunc(Math.abs(l.getX()-d.getX()))}static getMaxCodewordWidth(l){return Math.floor(Math.max(Math.max(ua.getMaxWidth(l[0],l[4]),ua.getMaxWidth(l[6],l[2])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN),Math.max(ua.getMaxWidth(l[1],l[5]),ua.getMaxWidth(l[7],l[3])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(l){return Math.floor(Math.min(Math.min(ua.getMinWidth(l[0],l[4]),ua.getMinWidth(l[6],l[2])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN),Math.min(ua.getMinWidth(l[1],l[5]),ua.getMinWidth(l[7],l[3])*Kt.MODULES_IN_CODEWORD/Kt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Mc extends m{}Mc.kind="ReaderException";class xf{constructor(l,d){this.verbose=l===!0,d&&this.setHints(d)}decode(l,d){return d&&this.setHints(d),this.decodeInternal(l)}decodeWithState(l){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(l)}setHints(l){this.hints=l;const d=!n(l)&&l.get(X.TRY_HARDER)===!0,h=n(l)?null:l.get(X.POSSIBLE_FORMATS),p=new Array;if(!n(h)){const b=h.some(y=>y===pe.UPC_A||y===pe.UPC_E||y===pe.EAN_13||y===pe.EAN_8||y===pe.CODABAR||y===pe.CODE_39||y===pe.CODE_93||y===pe.CODE_128||y===pe.ITF||y===pe.RSS_14||y===pe.RSS_EXPANDED);b&&!d&&p.push(new jn(l,this.verbose)),h.includes(pe.QR_CODE)&&p.push(new ii),h.includes(pe.DATA_MATRIX)&&p.push(new Xr),h.includes(pe.AZTEC)&&p.push(new Ot),h.includes(pe.PDF_417)&&p.push(new ua),b&&d&&p.push(new jn(l,this.verbose))}p.length===0&&(d||p.push(new jn(l,this.verbose)),p.push(new ii),p.push(new Xr),p.push(new Ot),p.push(new ua),d&&p.push(new jn(l,this.verbose))),this.readers=p}reset(){if(this.readers!==null)for(const l of this.readers)l.reset()}decodeInternal(l){if(this.readers===null)throw new Mc("No readers where selected, nothing can be read.");for(const d of this.readers)try{return d.decode(l,this.hints)}catch(h){if(h instanceof Mc)continue}throw new ne("No MultiFormat Readers were able to detect the code.")}}class mf extends q{constructor(l=null,d=500){const h=new xf;h.setHints(l),super(h,d)}decodeBitmap(l){return this.reader.decodeWithState(l)}}class q1 extends q{constructor(l=500){super(new ua,l)}}class Y1 extends q{constructor(l=500){super(new ii,l)}}var iu;(function(ee){ee[ee.ERROR_CORRECTION=0]="ERROR_CORRECTION",ee[ee.CHARACTER_SET=1]="CHARACTER_SET",ee[ee.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",ee[ee.MIN_SIZE=3]="MIN_SIZE",ee[ee.MAX_SIZE=4]="MAX_SIZE",ee[ee.MARGIN=5]="MARGIN",ee[ee.PDF417_COMPACT=6]="PDF417_COMPACT",ee[ee.PDF417_COMPACTION=7]="PDF417_COMPACTION",ee[ee.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",ee[ee.AZTEC_LAYERS=9]="AZTEC_LAYERS",ee[ee.QR_VERSION=10]="QR_VERSION"})(iu||(iu={}));var Kn=iu;class jo{constructor(l){this.field=l,this.cachedGenerators=[],this.cachedGenerators.push(new ut(l,Int32Array.from([1])))}buildGenerator(l){const d=this.cachedGenerators;if(l>=d.length){let h=d[d.length-1];const p=this.field;for(let b=d.length;b<=l;b++){const y=h.multiply(new ut(p,Int32Array.from([1,p.exp(b-1+p.getGeneratorBase())])));d.push(y),h=y}}return d[l]}encode(l,d){if(d===0)throw new _("No error correction bytes");const h=l.length-d;if(h<=0)throw new _("No data bytes provided");const p=this.buildGenerator(d),b=new Int32Array(h);A.arraycopy(l,0,b,0,h);let y=new ut(this.field,b);y=y.multiplyByMonomial(d,1);const j=y.divide(p)[1].getCoefficients(),M=d-j.length;for(let G=0;G<M;G++)l[h+G]=0;A.arraycopy(j,0,l,h+M,j.length)}}class Sn{constructor(){}static applyMaskPenaltyRule1(l){return Sn.applyMaskPenaltyRule1Internal(l,!0)+Sn.applyMaskPenaltyRule1Internal(l,!1)}static applyMaskPenaltyRule2(l){let d=0;const h=l.getArray(),p=l.getWidth(),b=l.getHeight();for(let y=0;y<b-1;y++){const S=h[y];for(let j=0;j<p-1;j++){const M=S[j];M===S[j+1]&&M===h[y+1][j]&&M===h[y+1][j+1]&&d++}}return Sn.N2*d}static applyMaskPenaltyRule3(l){let d=0;const h=l.getArray(),p=l.getWidth(),b=l.getHeight();for(let y=0;y<b;y++)for(let S=0;S<p;S++){const j=h[y];S+6<p&&j[S]===1&&j[S+1]===0&&j[S+2]===1&&j[S+3]===1&&j[S+4]===1&&j[S+5]===0&&j[S+6]===1&&(Sn.isWhiteHorizontal(j,S-4,S)||Sn.isWhiteHorizontal(j,S+7,S+11))&&d++,y+6<b&&h[y][S]===1&&h[y+1][S]===0&&h[y+2][S]===1&&h[y+3][S]===1&&h[y+4][S]===1&&h[y+5][S]===0&&h[y+6][S]===1&&(Sn.isWhiteVertical(h,S,y-4,y)||Sn.isWhiteVertical(h,S,y+7,y+11))&&d++}return d*Sn.N3}static isWhiteHorizontal(l,d,h){d=Math.max(d,0),h=Math.min(h,l.length);for(let p=d;p<h;p++)if(l[p]===1)return!1;return!0}static isWhiteVertical(l,d,h,p){h=Math.max(h,0),p=Math.min(p,l.length);for(let b=h;b<p;b++)if(l[b][d]===1)return!1;return!0}static applyMaskPenaltyRule4(l){let d=0;const h=l.getArray(),p=l.getWidth(),b=l.getHeight();for(let j=0;j<b;j++){const M=h[j];for(let G=0;G<p;G++)M[G]===1&&d++}const y=l.getHeight()*l.getWidth();return Math.floor(Math.abs(d*2-y)*10/y)*Sn.N4}static getDataMaskBit(l,d,h){let p,b;switch(l){case 0:p=h+d&1;break;case 1:p=h&1;break;case 2:p=d%3;break;case 3:p=(h+d)%3;break;case 4:p=Math.floor(h/2)+Math.floor(d/3)&1;break;case 5:b=h*d,p=(b&1)+b%3;break;case 6:b=h*d,p=(b&1)+b%3&1;break;case 7:b=h*d,p=b%3+(h+d&1)&1;break;default:throw new _("Invalid mask pattern: "+l)}return p===0}static applyMaskPenaltyRule1Internal(l,d){let h=0;const p=d?l.getHeight():l.getWidth(),b=d?l.getWidth():l.getHeight(),y=l.getArray();for(let S=0;S<p;S++){let j=0,M=-1;for(let G=0;G<b;G++){const te=d?y[S][G]:y[G][S];te===M?j++:(j>=5&&(h+=Sn.N1+(j-5)),j=1,M=te)}j>=5&&(h+=Sn.N1+(j-5))}return h}}Sn.N1=3,Sn.N2=3,Sn.N3=40,Sn.N4=10;class Fc{constructor(l,d){this.width=l,this.height=d;const h=new Array(d);for(let p=0;p!==d;p++)h[p]=new Uint8Array(l);this.bytes=h}getHeight(){return this.height}getWidth(){return this.width}get(l,d){return this.bytes[d][l]}getArray(){return this.bytes}setNumber(l,d,h){this.bytes[d][l]=h}setBoolean(l,d,h){this.bytes[d][l]=h?1:0}clear(l){for(const d of this.bytes)D.fill(d,l)}equals(l){if(!(l instanceof Fc))return!1;const d=l;if(this.width!==d.width||this.height!==d.height)return!1;for(let h=0,p=this.height;h<p;++h){const b=this.bytes[h],y=d.bytes[h];for(let S=0,j=this.width;S<j;++S)if(b[S]!==y[S])return!1}return!0}toString(){const l=new xe;for(let d=0,h=this.height;d<h;++d){const p=this.bytes[d];for(let b=0,y=this.width;b<y;++b)switch(p[b]){case 0:l.append(" 0");break;case 1:l.append(" 1");break;default:l.append("  ");break}l.append(`
`)}return l.toString()}}class Ki{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const l=new xe;return l.append(`<<
`),l.append(" mode: "),l.append(this.mode?this.mode.toString():"null"),l.append(`
 ecLevel: `),l.append(this.ecLevel?this.ecLevel.toString():"null"),l.append(`
 version: `),l.append(this.version?this.version.toString():"null"),l.append(`
 maskPattern: `),l.append(this.maskPattern.toString()),this.matrix?(l.append(`
 matrix:
`),l.append(this.matrix.toString())):l.append(`
 matrix: null
`),l.append(`>>
`),l.toString()}setMode(l){this.mode=l}setECLevel(l){this.ecLevel=l}setVersion(l){this.version=l}setMaskPattern(l){this.maskPattern=l}setMatrix(l){this.matrix=l}static isValidMaskPattern(l){return l>=0&&l<Ki.NUM_MASK_PATTERNS}}Ki.NUM_MASK_PATTERNS=8;class Zr extends m{}Zr.kind="WriterException";class qt{constructor(){}static clearMatrix(l){l.clear(255)}static buildMatrix(l,d,h,p,b){qt.clearMatrix(b),qt.embedBasicPatterns(h,b),qt.embedTypeInfo(d,p,b),qt.maybeEmbedVersionInfo(h,b),qt.embedDataBits(l,p,b)}static embedBasicPatterns(l,d){qt.embedPositionDetectionPatternsAndSeparators(d),qt.embedDarkDotAtLeftBottomCorner(d),qt.maybeEmbedPositionAdjustmentPatterns(l,d),qt.embedTimingPatterns(d)}static embedTypeInfo(l,d,h){const p=new B;qt.makeTypeInfoBits(l,d,p);for(let b=0,y=p.getSize();b<y;++b){const S=p.get(p.getSize()-1-b),j=qt.TYPE_INFO_COORDINATES[b],M=j[0],G=j[1];if(h.setBoolean(M,G,S),b<8){const te=h.getWidth()-b-1;h.setBoolean(te,8,S)}else{const se=h.getHeight()-7+(b-8);h.setBoolean(8,se,S)}}}static maybeEmbedVersionInfo(l,d){if(l.getVersionNumber()<7)return;const h=new B;qt.makeVersionInfoBits(l,h);let p=17;for(let b=0;b<6;++b)for(let y=0;y<3;++y){const S=h.get(p);p--,d.setBoolean(b,d.getHeight()-11+y,S),d.setBoolean(d.getHeight()-11+y,b,S)}}static embedDataBits(l,d,h){let p=0,b=-1,y=h.getWidth()-1,S=h.getHeight()-1;for(;y>0;){for(y===6&&(y-=1);S>=0&&S<h.getHeight();){for(let j=0;j<2;++j){const M=y-j;if(!qt.isEmpty(h.get(M,S)))continue;let G;p<l.getSize()?(G=l.get(p),++p):G=!1,d!==255&&Sn.getDataMaskBit(d,M,S)&&(G=!G),h.setBoolean(M,S,G)}S+=b}b=-b,S+=b,y-=2}if(p!==l.getSize())throw new Zr("Not all bits consumed: "+p+"/"+l.getSize())}static findMSBSet(l){return 32-O.numberOfLeadingZeros(l)}static calculateBCHCode(l,d){if(d===0)throw new _("0 polynomial");const h=qt.findMSBSet(d);for(l<<=h-1;qt.findMSBSet(l)>=h;)l^=d<<qt.findMSBSet(l)-h;return l}static makeTypeInfoBits(l,d,h){if(!Ki.isValidMaskPattern(d))throw new Zr("Invalid mask pattern");const p=l.getBits()<<3|d;h.appendBits(p,5);const b=qt.calculateBCHCode(p,qt.TYPE_INFO_POLY);h.appendBits(b,10);const y=new B;if(y.appendBits(qt.TYPE_INFO_MASK_PATTERN,15),h.xor(y),h.getSize()!==15)throw new Zr("should not happen but we got: "+h.getSize())}static makeVersionInfoBits(l,d){d.appendBits(l.getVersionNumber(),6);const h=qt.calculateBCHCode(l.getVersionNumber(),qt.VERSION_INFO_POLY);if(d.appendBits(h,12),d.getSize()!==18)throw new Zr("should not happen but we got: "+d.getSize())}static isEmpty(l){return l===255}static embedTimingPatterns(l){for(let d=8;d<l.getWidth()-8;++d){const h=(d+1)%2;qt.isEmpty(l.get(d,6))&&l.setNumber(d,6,h),qt.isEmpty(l.get(6,d))&&l.setNumber(6,d,h)}}static embedDarkDotAtLeftBottomCorner(l){if(l.get(8,l.getHeight()-8)===0)throw new Zr;l.setNumber(8,l.getHeight()-8,1)}static embedHorizontalSeparationPattern(l,d,h){for(let p=0;p<8;++p){if(!qt.isEmpty(h.get(l+p,d)))throw new Zr;h.setNumber(l+p,d,0)}}static embedVerticalSeparationPattern(l,d,h){for(let p=0;p<7;++p){if(!qt.isEmpty(h.get(l,d+p)))throw new Zr;h.setNumber(l,d+p,0)}}static embedPositionAdjustmentPattern(l,d,h){for(let p=0;p<5;++p){const b=qt.POSITION_ADJUSTMENT_PATTERN[p];for(let y=0;y<5;++y)h.setNumber(l+y,d+p,b[y])}}static embedPositionDetectionPattern(l,d,h){for(let p=0;p<7;++p){const b=qt.POSITION_DETECTION_PATTERN[p];for(let y=0;y<7;++y)h.setNumber(l+y,d+p,b[y])}}static embedPositionDetectionPatternsAndSeparators(l){const d=qt.POSITION_DETECTION_PATTERN[0].length;qt.embedPositionDetectionPattern(0,0,l),qt.embedPositionDetectionPattern(l.getWidth()-d,0,l),qt.embedPositionDetectionPattern(0,l.getWidth()-d,l);const h=8;qt.embedHorizontalSeparationPattern(0,h-1,l),qt.embedHorizontalSeparationPattern(l.getWidth()-h,h-1,l),qt.embedHorizontalSeparationPattern(0,l.getWidth()-h,l);const p=7;qt.embedVerticalSeparationPattern(p,0,l),qt.embedVerticalSeparationPattern(l.getHeight()-p-1,0,l),qt.embedVerticalSeparationPattern(p,l.getHeight()-p,l)}static maybeEmbedPositionAdjustmentPatterns(l,d){if(l.getVersionNumber()<2)return;const h=l.getVersionNumber()-1,p=qt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[h];for(let b=0,y=p.length;b!==y;b++){const S=p[b];if(S>=0)for(let j=0;j!==y;j++){const M=p[j];M>=0&&qt.isEmpty(d.get(M,S))&&qt.embedPositionAdjustmentPattern(M-2,S-2,d)}}}}qt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),qt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),qt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),qt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),qt.VERSION_INFO_POLY=7973,qt.TYPE_INFO_POLY=1335,qt.TYPE_INFO_MASK_PATTERN=21522;class $1{constructor(l,d){this.dataBytes=l,this.errorCorrectionBytes=d}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class fn{constructor(){}static calculateMaskPenalty(l){return Sn.applyMaskPenaltyRule1(l)+Sn.applyMaskPenaltyRule2(l)+Sn.applyMaskPenaltyRule3(l)+Sn.applyMaskPenaltyRule4(l)}static encode(l,d,h=null){let p=fn.DEFAULT_BYTE_MODE_ENCODING;const b=h!==null&&h.get(Kn.CHARACTER_SET)!==void 0;b&&(p=h.get(Kn.CHARACTER_SET).toString());const y=this.chooseMode(l,p),S=new B;if(y===Vt.BYTE&&(b||fn.DEFAULT_BYTE_MODE_ENCODING!==p)){const _t=H.getCharacterSetECIByName(p);_t!==void 0&&this.appendECI(_t,S)}this.appendModeInfo(y,S);const j=new B;this.appendBytes(l,y,j,p);let M;if(h!==null&&h.get(Kn.QR_VERSION)!==void 0){const _t=Number.parseInt(h.get(Kn.QR_VERSION).toString(),10);M=Bt.getVersionForNumber(_t);const yt=this.calculateBitsNeeded(y,S,j,M);if(!this.willFit(yt,M,d))throw new Zr("Data too big for requested version")}else M=this.recommendVersion(d,y,S,j);const G=new B;G.appendBitArray(S);const te=y===Vt.BYTE?j.getSizeInBytes():l.length;this.appendLengthInfo(te,M,y,G),G.appendBitArray(j);const se=M.getECBlocksForLevel(d),ke=M.getTotalCodewords()-se.getTotalECCodewords();this.terminateBits(ke,G);const Ce=this.interleaveWithECBytes(G,M.getTotalCodewords(),ke,se.getNumBlocks()),Re=new Ki;Re.setECLevel(d),Re.setMode(y),Re.setVersion(M);const Ge=M.getDimensionForVersion(),rt=new Fc(Ge,Ge),Et=this.chooseMaskPattern(Ce,d,M,rt);return Re.setMaskPattern(Et),qt.buildMatrix(Ce,d,M,Et,rt),Re.setMatrix(rt),Re}static recommendVersion(l,d,h,p){const b=this.calculateBitsNeeded(d,h,p,Bt.getVersionForNumber(1)),y=this.chooseVersion(b,l),S=this.calculateBitsNeeded(d,h,p,y);return this.chooseVersion(S,l)}static calculateBitsNeeded(l,d,h,p){return d.getSize()+l.getCharacterCountBits(p)+h.getSize()}static getAlphanumericCode(l){return l<fn.ALPHANUMERIC_TABLE.length?fn.ALPHANUMERIC_TABLE[l]:-1}static chooseMode(l,d=null){if(H.SJIS.getName()===d&&this.isOnlyDoubleByteKanji(l))return Vt.KANJI;let h=!1,p=!1;for(let b=0,y=l.length;b<y;++b){const S=l.charAt(b);if(fn.isDigit(S))h=!0;else if(this.getAlphanumericCode(S.charCodeAt(0))!==-1)p=!0;else return Vt.BYTE}return p?Vt.ALPHANUMERIC:h?Vt.NUMERIC:Vt.BYTE}static isOnlyDoubleByteKanji(l){let d;try{d=J.encode(l,H.SJIS)}catch{return!1}const h=d.length;if(h%2!==0)return!1;for(let p=0;p<h;p+=2){const b=d[p]&255;if((b<129||b>159)&&(b<224||b>235))return!1}return!0}static chooseMaskPattern(l,d,h,p){let b=Number.MAX_SAFE_INTEGER,y=-1;for(let S=0;S<Ki.NUM_MASK_PATTERNS;S++){qt.buildMatrix(l,d,h,S,p);let j=this.calculateMaskPenalty(p);j<b&&(b=j,y=S)}return y}static chooseVersion(l,d){for(let h=1;h<=40;h++){const p=Bt.getVersionForNumber(h);if(fn.willFit(l,p,d))return p}throw new Zr("Data too big")}static willFit(l,d,h){const p=d.getTotalCodewords(),y=d.getECBlocksForLevel(h).getTotalECCodewords(),S=p-y,j=(l+7)/8;return S>=j}static terminateBits(l,d){const h=l*8;if(d.getSize()>h)throw new Zr("data bits cannot fit in the QR Code"+d.getSize()+" > "+h);for(let y=0;y<4&&d.getSize()<h;++y)d.appendBit(!1);const p=d.getSize()&7;if(p>0)for(let y=p;y<8;y++)d.appendBit(!1);const b=l-d.getSizeInBytes();for(let y=0;y<b;++y)d.appendBits((y&1)===0?236:17,8);if(d.getSize()!==h)throw new Zr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(l,d,h,p,b,y){if(p>=h)throw new Zr("Block ID too large");const S=l%h,j=h-S,M=Math.floor(l/h),G=M+1,te=Math.floor(d/h),se=te+1,ke=M-te,Ce=G-se;if(ke!==Ce)throw new Zr("EC bytes mismatch");if(h!==j+S)throw new Zr("RS blocks mismatch");if(l!==(te+ke)*j+(se+Ce)*S)throw new Zr("Total bytes mismatch");p<j?(b[0]=te,y[0]=ke):(b[0]=se,y[0]=Ce)}static interleaveWithECBytes(l,d,h,p){if(l.getSizeInBytes()!==h)throw new Zr("Number of bits and data bytes does not match");let b=0,y=0,S=0;const j=new Array;for(let G=0;G<p;++G){const te=new Int32Array(1),se=new Int32Array(1);fn.getNumDataBytesAndNumECBytesForBlockID(d,h,p,G,te,se);const ke=te[0],Ce=new Uint8Array(ke);l.toBytes(8*b,Ce,0,ke);const Re=fn.generateECBytes(Ce,se[0]);j.push(new $1(Ce,Re)),y=Math.max(y,ke),S=Math.max(S,Re.length),b+=te[0]}if(h!==b)throw new Zr("Data bytes does not match offset");const M=new B;for(let G=0;G<y;++G)for(const te of j){const se=te.getDataBytes();G<se.length&&M.appendBits(se[G],8)}for(let G=0;G<S;++G)for(const te of j){const se=te.getErrorCorrectionBytes();G<se.length&&M.appendBits(se[G],8)}if(d!==M.getSizeInBytes())throw new Zr("Interleaving error: "+d+" and "+M.getSizeInBytes()+" differ.");return M}static generateECBytes(l,d){const h=l.length,p=new Int32Array(h+d);for(let y=0;y<h;y++)p[y]=l[y]&255;new jo(Ie.QR_CODE_FIELD_256).encode(p,d);const b=new Uint8Array(d);for(let y=0;y<d;y++)b[y]=p[h+y];return b}static appendModeInfo(l,d){d.appendBits(l.getBits(),4)}static appendLengthInfo(l,d,h,p){const b=h.getCharacterCountBits(d);if(l>=1<<b)throw new Zr(l+" is bigger than "+((1<<b)-1));p.appendBits(l,b)}static appendBytes(l,d,h,p){switch(d){case Vt.NUMERIC:fn.appendNumericBytes(l,h);break;case Vt.ALPHANUMERIC:fn.appendAlphanumericBytes(l,h);break;case Vt.BYTE:fn.append8BitBytes(l,h,p);break;case Vt.KANJI:fn.appendKanjiBytes(l,h);break;default:throw new Zr("Invalid mode: "+d)}}static getDigit(l){return l.charCodeAt(0)-48}static isDigit(l){const d=fn.getDigit(l);return d>=0&&d<=9}static appendNumericBytes(l,d){const h=l.length;let p=0;for(;p<h;){const b=fn.getDigit(l.charAt(p));if(p+2<h){const y=fn.getDigit(l.charAt(p+1)),S=fn.getDigit(l.charAt(p+2));d.appendBits(b*100+y*10+S,10),p+=3}else if(p+1<h){const y=fn.getDigit(l.charAt(p+1));d.appendBits(b*10+y,7),p+=2}else d.appendBits(b,4),p++}}static appendAlphanumericBytes(l,d){const h=l.length;let p=0;for(;p<h;){const b=fn.getAlphanumericCode(l.charCodeAt(p));if(b===-1)throw new Zr;if(p+1<h){const y=fn.getAlphanumericCode(l.charCodeAt(p+1));if(y===-1)throw new Zr;d.appendBits(b*45+y,11),p+=2}else d.appendBits(b,6),p++}}static append8BitBytes(l,d,h){let p;try{p=J.encode(l,h)}catch(b){throw new Zr(b)}for(let b=0,y=p.length;b!==y;b++){const S=p[b];d.appendBits(S,8)}}static appendKanjiBytes(l,d){let h;try{h=J.encode(l,H.SJIS)}catch(b){throw new Zr(b)}const p=h.length;for(let b=0;b<p;b+=2){const y=h[b]&255,S=h[b+1]&255,j=y<<8&4294967295|S;let M=-1;if(j>=33088&&j<=40956?M=j-33088:j>=57408&&j<=60351&&(M=j-49472),M===-1)throw new Zr("Invalid byte sequence");const G=(M>>8)*192+(M&255);d.appendBits(G,13)}}static appendECI(l,d){d.appendBits(Vt.ECI.getBits(),4),d.appendBits(l.getValue(),8)}}fn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),fn.DEFAULT_BYTE_MODE_ENCODING=H.UTF8.getName();class qi{write(l,d,h,p=null){if(l.length===0)throw new _("Found empty contents");if(d<0||h<0)throw new _("Requested dimensions are too small: "+d+"x"+h);let b=fr.L,y=qi.QUIET_ZONE_SIZE;p!==null&&(p.get(Kn.ERROR_CORRECTION)!==void 0&&(b=fr.fromString(p.get(Kn.ERROR_CORRECTION).toString())),p.get(Kn.MARGIN)!==void 0&&(y=Number.parseInt(p.get(Kn.MARGIN).toString(),10)));const S=fn.encode(l,b,p);return this.renderResult(S,d,h,y)}writeToDom(l,d,h,p,b=null){typeof l=="string"&&(l=document.querySelector(l));const y=this.write(d,h,p,b);l&&l.appendChild(y)}renderResult(l,d,h,p){const b=l.getMatrix();if(b===null)throw new De;const y=b.getWidth(),S=b.getHeight(),j=y+p*2,M=S+p*2,G=Math.max(d,j),te=Math.max(h,M),se=Math.min(Math.floor(G/j),Math.floor(te/M)),ke=Math.floor((G-y*se)/2),Ce=Math.floor((te-S*se)/2),Re=this.createSVGElement(G,te);for(let Ge=0,rt=Ce;Ge<S;Ge++,rt+=se)for(let Et=0,_t=ke;Et<y;Et++,_t+=se)if(b.get(Et,Ge)===1){const yt=this.createSvgRectElement(_t,rt,se,se);Re.appendChild(yt)}return Re}createSVGElement(l,d){const h=document.createElementNS(qi.SVG_NS,"svg");return h.setAttributeNS(null,"height",l.toString()),h.setAttributeNS(null,"width",d.toString()),h}createSvgRectElement(l,d,h,p){const b=document.createElementNS(qi.SVG_NS,"rect");return b.setAttributeNS(null,"x",l.toString()),b.setAttributeNS(null,"y",d.toString()),b.setAttributeNS(null,"height",h.toString()),b.setAttributeNS(null,"width",p.toString()),b.setAttributeNS(null,"fill","#000000"),b}}qi.QUIET_ZONE_SIZE=4,qi.SVG_NS="http://www.w3.org/2000/svg";class Dl{encode(l,d,h,p,b){if(l.length===0)throw new _("Found empty contents");if(d!==pe.QR_CODE)throw new _("Can only encode QR_CODE, but got "+d);if(h<0||p<0)throw new _(`Requested dimensions are too small: ${h}x${p}`);let y=fr.L,S=Dl.QUIET_ZONE_SIZE;b!==null&&(b.get(Kn.ERROR_CORRECTION)!==void 0&&(y=fr.fromString(b.get(Kn.ERROR_CORRECTION).toString())),b.get(Kn.MARGIN)!==void 0&&(S=Number.parseInt(b.get(Kn.MARGIN).toString(),10)));const j=fn.encode(l,y,b);return Dl.renderResult(j,h,p,S)}static renderResult(l,d,h,p){const b=l.getMatrix();if(b===null)throw new De;const y=b.getWidth(),S=b.getHeight(),j=y+p*2,M=S+p*2,G=Math.max(d,j),te=Math.max(h,M),se=Math.min(Math.floor(G/j),Math.floor(te/M)),ke=Math.floor((G-y*se)/2),Ce=Math.floor((te-S*se)/2),Re=new W(G,te);for(let Ge=0,rt=Ce;Ge<S;Ge++,rt+=se)for(let Et=0,_t=ke;Et<y;Et++,_t+=se)b.get(Et,Ge)===1&&Re.setRegion(_t,rt,se,se);return Re}}Dl.QUIET_ZONE_SIZE=4;class Z1{encode(l,d,h,p,b){let y;if(d===pe.QR_CODE)y=new Dl;else throw new _("No encoder available for format "+d);return y.encode(l,d,h,p,b)}}class Bs extends Ve{constructor(l,d,h,p,b,y,S,j){if(super(y,S),this.yuvData=l,this.dataWidth=d,this.dataHeight=h,this.left=p,this.top=b,p+y>d||b+S>h)throw new _("Crop rectangle does not fit within image data.");j&&this.reverseHorizontal(y,S)}getRow(l,d){if(l<0||l>=this.getHeight())throw new _("Requested row is outside the image: "+l);const h=this.getWidth();(d==null||d.length<h)&&(d=new Uint8ClampedArray(h));const p=(l+this.top)*this.dataWidth+this.left;return A.arraycopy(this.yuvData,p,d,0,h),d}getMatrix(){const l=this.getWidth(),d=this.getHeight();if(l===this.dataWidth&&d===this.dataHeight)return this.yuvData;const h=l*d,p=new Uint8ClampedArray(h);let b=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return A.arraycopy(this.yuvData,b,p,0,h),p;for(let y=0;y<d;y++){const S=y*l;A.arraycopy(this.yuvData,b,p,S,l),b+=this.dataWidth}return p}isCropSupported(){return!0}crop(l,d,h,p){return new Bs(this.yuvData,this.dataWidth,this.dataHeight,this.left+l,this.top+d,h,p,!1)}renderThumbnail(){const l=this.getWidth()/Bs.THUMBNAIL_SCALE_FACTOR,d=this.getHeight()/Bs.THUMBNAIL_SCALE_FACTOR,h=new Int32Array(l*d),p=this.yuvData;let b=this.top*this.dataWidth+this.left;for(let y=0;y<d;y++){const S=y*l;for(let j=0;j<l;j++){const M=p[b+j*Bs.THUMBNAIL_SCALE_FACTOR]&255;h[S+j]=4278190080|M*65793}b+=this.dataWidth*Bs.THUMBNAIL_SCALE_FACTOR}return h}getThumbnailWidth(){return this.getWidth()/Bs.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Bs.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(l,d){const h=this.yuvData;for(let p=0,b=this.top*this.dataWidth+this.left;p<d;p++,b+=this.dataWidth){const y=b+l/2;for(let S=b,j=b+l-1;S<y;S++,j--){const M=h[S];h[S]=h[j],h[j]=M}}}invert(){return new ge(this)}}Bs.THUMBNAIL_SCALE_FACTOR=2;class lu extends Ve{constructor(l,d,h,p,b,y,S){if(super(d,h),this.dataWidth=p,this.dataHeight=b,this.left=y,this.top=S,l.BYTES_PER_ELEMENT===4){const j=d*h,M=new Uint8ClampedArray(j);for(let G=0;G<j;G++){const te=l[G],se=te>>16&255,ke=te>>7&510,Ce=te&255;M[G]=(se+ke+Ce)/4&255}this.luminances=M}else this.luminances=l;if(p===void 0&&(this.dataWidth=d),b===void 0&&(this.dataHeight=h),y===void 0&&(this.left=0),S===void 0&&(this.top=0),this.left+d>this.dataWidth||this.top+h>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(l,d){if(l<0||l>=this.getHeight())throw new _("Requested row is outside the image: "+l);const h=this.getWidth();(d==null||d.length<h)&&(d=new Uint8ClampedArray(h));const p=(l+this.top)*this.dataWidth+this.left;return A.arraycopy(this.luminances,p,d,0,h),d}getMatrix(){const l=this.getWidth(),d=this.getHeight();if(l===this.dataWidth&&d===this.dataHeight)return this.luminances;const h=l*d,p=new Uint8ClampedArray(h);let b=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return A.arraycopy(this.luminances,b,p,0,h),p;for(let y=0;y<d;y++){const S=y*l;A.arraycopy(this.luminances,b,p,S,l),b+=this.dataWidth}return p}isCropSupported(){return!0}crop(l,d,h,p){return new lu(this.luminances,h,p,this.dataWidth,this.dataHeight,this.left+l,this.top+d)}invert(){return new ge(this)}}class gf extends H{static forName(l){return this.getCharacterSetECIByName(l)}}class Ro{}Ro.ISO_8859_1=H.ISO8859_1;class Ml{isCompact(){return this.compact}setCompact(l){this.compact=l}getSize(){return this.size}setSize(l){this.size=l}getLayers(){return this.layers}setLayers(l){this.layers=l}getCodeWords(){return this.codeWords}setCodeWords(l){this.codeWords=l}getMatrix(){return this.matrix}setMatrix(l){this.matrix=l}}class pf{static singletonList(l){return[l]}static min(l,d){return l.sort(d)[0]}}class bf{constructor(l){this.previous=l}getPrevious(){return this.previous}}class Yi extends bf{constructor(l,d,h){super(l),this.value=d,this.bitCount=h}appendTo(l,d){l.appendBits(this.value,this.bitCount)}add(l,d){return new Yi(this,l,d)}addBinaryShift(l,d){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Yi(this,l,d)}toString(){let l=this.value&(1<<this.bitCount)-1;return l|=1<<this.bitCount,"<"+O.toBinaryString(l|1<<this.bitCount).substring(1)+">"}}class Lc extends Yi{constructor(l,d,h){super(l,0,0),this.binaryShiftStart=d,this.binaryShiftByteCount=h}appendTo(l,d){for(let h=0;h<this.binaryShiftByteCount;h++)(h===0||h===31&&this.binaryShiftByteCount<=62)&&(l.appendBits(31,5),this.binaryShiftByteCount>62?l.appendBits(this.binaryShiftByteCount-31,16):h===0?l.appendBits(Math.min(this.binaryShiftByteCount,31),5):l.appendBits(this.binaryShiftByteCount-31,5)),l.appendBits(d[this.binaryShiftStart+h],8)}addBinaryShift(l,d){return new Lc(this,l,d)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function wf(ee,l,d){return new Lc(ee,l,d)}function Fl(ee,l,d){return new Yi(ee,l,d)}const Ll=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ni=0,Bc=1,Qa=2,ou=3,gs=4,Oo=new Yi(null,0,0),$i=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function J1(ee){for(let l of ee)D.fill(l,-1);return ee[Ni][gs]=0,ee[Bc][gs]=0,ee[Bc][Ni]=28,ee[ou][gs]=0,ee[Qa][gs]=0,ee[Qa][Ni]=15,ee}const Io=J1(D.createInt32Array(6,6));class ps{constructor(l,d,h,p){this.token=l,this.mode=d,this.binaryShiftByteCount=h,this.bitCount=p}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(l,d){let h=this.bitCount,p=this.token;if(l!==this.mode){let y=$i[this.mode][l];p=Fl(p,y&65535,y>>16),h+=y>>16}let b=l===Qa?4:5;return p=Fl(p,d,b),new ps(p,l,0,h+b)}shiftAndAppend(l,d){let h=this.token,p=this.mode===Qa?4:5;return h=Fl(h,Io[this.mode][l],p),h=Fl(h,d,5),new ps(h,this.mode,0,this.bitCount+p+5)}addBinaryShiftChar(l){let d=this.token,h=this.mode,p=this.bitCount;if(this.mode===gs||this.mode===Qa){let S=$i[h][Ni];d=Fl(d,S&65535,S>>16),p+=S>>16,h=Ni}let b=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,y=new ps(d,h,this.binaryShiftByteCount+1,p+b);return y.binaryShiftByteCount===2078&&(y=y.endBinaryShift(l+1)),y}endBinaryShift(l){if(this.binaryShiftByteCount===0)return this;let d=this.token;return d=wf(d,l-this.binaryShiftByteCount,this.binaryShiftByteCount),new ps(d,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(l){let d=this.bitCount+($i[this.mode][l.mode]>>16);return this.binaryShiftByteCount<l.binaryShiftByteCount?d+=ps.calculateBinaryShiftCost(l)-ps.calculateBinaryShiftCost(this):this.binaryShiftByteCount>l.binaryShiftByteCount&&l.binaryShiftByteCount>0&&(d+=10),d<=l.bitCount}toBitArray(l){let d=[];for(let p=this.endBinaryShift(l.length).token;p!==null;p=p.getPrevious())d.unshift(p);let h=new B;for(const p of d)p.appendTo(h,l);return h}toString(){return V.format("%s bits=%d bytes=%d",Ll[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(l){return l.binaryShiftByteCount>62?21:l.binaryShiftByteCount>31?20:l.binaryShiftByteCount>0?10:0}}ps.INITIAL_STATE=new ps(Oo,Ni,0,0);function vf(ee){const l=V.getCharCode(" "),d=V.getCharCode("."),h=V.getCharCode(",");ee[Ni][l]=1;const p=V.getCharCode("Z"),b=V.getCharCode("A");for(let se=b;se<=p;se++)ee[Ni][se]=se-b+2;ee[Bc][l]=1;const y=V.getCharCode("z"),S=V.getCharCode("a");for(let se=S;se<=y;se++)ee[Bc][se]=se-S+2;ee[Qa][l]=1;const j=V.getCharCode("9"),M=V.getCharCode("0");for(let se=M;se<=j;se++)ee[Qa][se]=se-M+2;ee[Qa][h]=12,ee[Qa][d]=13;const G=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let se=0;se<G.length;se++)ee[ou][V.getCharCode(G[se])]=se;const te=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let se=0;se<te.length;se++)V.getCharCode(te[se])>0&&(ee[gs][V.getCharCode(te[se])]=se);return ee}const Do=vf(D.createInt32Array(5,256));class Zi{constructor(l){this.text=l}encode(){const l=V.getCharCode(" "),d=V.getCharCode(`
`);let h=pf.singletonList(ps.INITIAL_STATE);for(let b=0;b<this.text.length;b++){let y,S=b+1<this.text.length?this.text[b+1]:0;switch(this.text[b]){case V.getCharCode("\r"):y=S===d?2:0;break;case V.getCharCode("."):y=S===l?3:0;break;case V.getCharCode(","):y=S===l?4:0;break;case V.getCharCode(":"):y=S===l?5:0;break;default:y=0}y>0?(h=Zi.updateStateListForPair(h,b,y),b++):h=this.updateStateListForChar(h,b)}return pf.min(h,(b,y)=>b.getBitCount()-y.getBitCount()).toBitArray(this.text)}updateStateListForChar(l,d){const h=[];for(let p of l)this.updateStateForChar(p,d,h);return Zi.simplifyStates(h)}updateStateForChar(l,d,h){let p=this.text[d]&255,b=Do[l.getMode()][p]>0,y=null;for(let S=0;S<=gs;S++){let j=Do[S][p];if(j>0){if(y==null&&(y=l.endBinaryShift(d)),!b||S===l.getMode()||S===Qa){const M=y.latchAndAppend(S,j);h.push(M)}if(!b&&Io[l.getMode()][S]>=0){const M=y.shiftAndAppend(S,j);h.push(M)}}}if(l.getBinaryShiftByteCount()>0||Do[l.getMode()][p]===0){let S=l.addBinaryShiftChar(d);h.push(S)}}static updateStateListForPair(l,d,h){const p=[];for(let b of l)this.updateStateForPair(b,d,h,p);return this.simplifyStates(p)}static updateStateForPair(l,d,h,p){let b=l.endBinaryShift(d);if(p.push(b.latchAndAppend(gs,h)),l.getMode()!==gs&&p.push(b.shiftAndAppend(gs,h)),h===3||h===4){let y=b.latchAndAppend(Qa,16-h).latchAndAppend(Qa,1);p.push(y)}if(l.getBinaryShiftByteCount()>0){let y=l.addBinaryShiftChar(d).addBinaryShiftChar(d+1);p.push(y)}}static simplifyStates(l){let d=[];for(const h of l){let p=!0;for(const b of d){if(b.isBetterThanOrEqualTo(h)){p=!1;break}h.isBetterThanOrEqualTo(b)&&(d=d.filter(y=>y!==b))}p&&d.push(h)}return d}}class Tr{constructor(){}static encodeBytes(l){return Tr.encode(l,Tr.DEFAULT_EC_PERCENT,Tr.DEFAULT_AZTEC_LAYERS)}static encode(l,d,h){let p=new Zi(l).encode(),b=O.truncDivision(p.getSize()*d,100)+11,y=p.getSize()+b,S,j,M,G,te;if(h!==Tr.DEFAULT_AZTEC_LAYERS){if(S=h<0,j=Math.abs(h),j>(S?Tr.MAX_NB_BITS_COMPACT:Tr.MAX_NB_BITS))throw new _(V.format("Illegal value %s for layers",h));M=Tr.totalBitsInLayer(j,S),G=Tr.WORD_SIZE[j];let yt=M-M%G;if(te=Tr.stuffBits(p,G),te.getSize()+b>yt)throw new _("Data to large for user specified layer");if(S&&te.getSize()>G*64)throw new _("Data to large for user specified layer")}else{G=0,te=null;for(let yt=0;;yt++){if(yt>Tr.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(S=yt<=3,j=S?yt+1:yt,M=Tr.totalBitsInLayer(j,S),y>M)continue;(te==null||G!==Tr.WORD_SIZE[j])&&(G=Tr.WORD_SIZE[j],te=Tr.stuffBits(p,G));let kr=M-M%G;if(!(S&&te.getSize()>G*64)&&te.getSize()+b<=kr)break}}let se=Tr.generateCheckWords(te,M,G),ke=te.getSize()/G,Ce=Tr.generateModeMessage(S,j,ke),Re=(S?11:14)+j*4,Ge=new Int32Array(Re),rt;if(S){rt=Re;for(let yt=0;yt<Ge.length;yt++)Ge[yt]=yt}else{rt=Re+1+2*O.truncDivision(O.truncDivision(Re,2)-1,15);let yt=O.truncDivision(Re,2),kr=O.truncDivision(rt,2);for(let lr=0;lr<yt;lr++){let Fn=lr+O.truncDivision(lr,15);Ge[yt-lr-1]=kr-Fn-1,Ge[yt+lr]=kr+Fn+1}}let Et=new W(rt);for(let yt=0,kr=0;yt<j;yt++){let lr=(j-yt)*4+(S?9:12);for(let Fn=0;Fn<lr;Fn++){let es=Fn*2;for(let _a=0;_a<2;_a++)se.get(kr+es+_a)&&Et.set(Ge[yt*2+_a],Ge[yt*2+Fn]),se.get(kr+lr*2+es+_a)&&Et.set(Ge[yt*2+Fn],Ge[Re-1-yt*2-_a]),se.get(kr+lr*4+es+_a)&&Et.set(Ge[Re-1-yt*2-_a],Ge[Re-1-yt*2-Fn]),se.get(kr+lr*6+es+_a)&&Et.set(Ge[Re-1-yt*2-Fn],Ge[yt*2+_a])}kr+=lr*8}if(Tr.drawModeMessage(Et,S,rt,Ce),S)Tr.drawBullsEye(Et,O.truncDivision(rt,2),5);else{Tr.drawBullsEye(Et,O.truncDivision(rt,2),7);for(let yt=0,kr=0;yt<O.truncDivision(Re,2)-1;yt+=15,kr+=16)for(let lr=O.truncDivision(rt,2)&1;lr<rt;lr+=2)Et.set(O.truncDivision(rt,2)-kr,lr),Et.set(O.truncDivision(rt,2)+kr,lr),Et.set(lr,O.truncDivision(rt,2)-kr),Et.set(lr,O.truncDivision(rt,2)+kr)}let _t=new Ml;return _t.setCompact(S),_t.setSize(rt),_t.setLayers(j),_t.setCodeWords(ke),_t.setMatrix(Et),_t}static drawBullsEye(l,d,h){for(let p=0;p<h;p+=2)for(let b=d-p;b<=d+p;b++)l.set(b,d-p),l.set(b,d+p),l.set(d-p,b),l.set(d+p,b);l.set(d-h,d-h),l.set(d-h+1,d-h),l.set(d-h,d-h+1),l.set(d+h,d-h),l.set(d+h,d-h+1),l.set(d+h,d+h-1)}static generateModeMessage(l,d,h){let p=new B;return l?(p.appendBits(d-1,2),p.appendBits(h-1,6),p=Tr.generateCheckWords(p,28,4)):(p.appendBits(d-1,5),p.appendBits(h-1,11),p=Tr.generateCheckWords(p,40,4)),p}static drawModeMessage(l,d,h,p){let b=O.truncDivision(h,2);if(d)for(let y=0;y<7;y++){let S=b-3+y;p.get(y)&&l.set(S,b-5),p.get(y+7)&&l.set(b+5,S),p.get(20-y)&&l.set(S,b+5),p.get(27-y)&&l.set(b-5,S)}else for(let y=0;y<10;y++){let S=b-5+y+O.truncDivision(y,5);p.get(y)&&l.set(S,b-7),p.get(y+10)&&l.set(b+7,S),p.get(29-y)&&l.set(S,b+7),p.get(39-y)&&l.set(b-7,S)}}static generateCheckWords(l,d,h){let p=l.getSize()/h,b=new jo(Tr.getGF(h)),y=O.truncDivision(d,h),S=Tr.bitsToWords(l,h,y);b.encode(S,y-p);let j=d%h,M=new B;M.appendBits(0,j);for(const G of Array.from(S))M.appendBits(G,h);return M}static bitsToWords(l,d,h){let p=new Int32Array(h),b,y;for(b=0,y=l.getSize()/d;b<y;b++){let S=0;for(let j=0;j<d;j++)S|=l.get(b*d+j)?1<<d-j-1:0;p[b]=S}return p}static getGF(l){switch(l){case 4:return Ie.AZTEC_PARAM;case 6:return Ie.AZTEC_DATA_6;case 8:return Ie.AZTEC_DATA_8;case 10:return Ie.AZTEC_DATA_10;case 12:return Ie.AZTEC_DATA_12;default:throw new _("Unsupported word size "+l)}}static stuffBits(l,d){let h=new B,p=l.getSize(),b=(1<<d)-2;for(let y=0;y<p;y+=d){let S=0;for(let j=0;j<d;j++)(y+j>=p||l.get(y+j))&&(S|=1<<d-1-j);(S&b)===b?(h.appendBits(S&b,d),y--):(S&b)===0?(h.appendBits(S|1,d),y--):h.appendBits(S,d)}return h}static totalBitsInLayer(l,d){return((d?88:112)+16*l)*l}}Tr.DEFAULT_EC_PERCENT=33,Tr.DEFAULT_AZTEC_LAYERS=0,Tr.MAX_NB_BITS=32,Tr.MAX_NB_BITS_COMPACT=4,Tr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Mo{encode(l,d,h,p){return this.encodeWithHints(l,d,h,p,null)}encodeWithHints(l,d,h,p,b){let y=Ro.ISO_8859_1,S=Tr.DEFAULT_EC_PERCENT,j=Tr.DEFAULT_AZTEC_LAYERS;return b!=null&&(b.has(Kn.CHARACTER_SET)&&(y=gf.forName(b.get(Kn.CHARACTER_SET).toString())),b.has(Kn.ERROR_CORRECTION)&&(S=O.parseInt(b.get(Kn.ERROR_CORRECTION).toString())),b.has(Kn.AZTEC_LAYERS)&&(j=O.parseInt(b.get(Kn.AZTEC_LAYERS).toString()))),Mo.encodeLayers(l,d,h,p,y,S,j)}static encodeLayers(l,d,h,p,b,y,S){if(d!==pe.AZTEC)throw new _("Can only encode AZTEC, but got "+d);let j=Tr.encode(V.getBytes(l,b),y,S);return Mo.renderResult(j,h,p)}static renderResult(l,d,h){let p=l.getMatrix();if(p==null)throw new De;let b=p.getWidth(),y=p.getHeight(),S=Math.max(d,b),j=Math.max(h,y),M=Math.min(S/b,j/y),G=(S-b*M)/2,te=(j-y*M)/2,se=new W(S,j);for(let ke=0,Ce=te;ke<y;ke++,Ce+=M)for(let Re=0,Ge=G;Re<b;Re++,Ge+=M)p.get(Re,ke)&&se.setRegion(Ge,Ce,M,M);return se}}t.AbstractExpandedDecoder=me,t.ArgumentException=w,t.ArithmeticException=ve,t.AztecCode=Ml,t.AztecCodeReader=Ot,t.AztecCodeWriter=Mo,t.AztecDecoder=de,t.AztecDetector=At,t.AztecDetectorResult=je,t.AztecEncoder=Tr,t.AztecHighLevelEncoder=Zi,t.AztecPoint=St,t.BarcodeFormat=pe,t.Binarizer=N,t.BinaryBitmap=E,t.BitArray=B,t.BitMatrix=W,t.BitSource=Va,t.BrowserAztecCodeReader=sr,t.BrowserBarcodeReader=si,t.BrowserCodeReader=q,t.BrowserDatamatrixCodeReader=nr,t.BrowserMultiFormatReader=mf,t.BrowserPDF417Reader=q1,t.BrowserQRCodeReader=Y1,t.BrowserQRCodeSvgWriter=qi,t.CharacterSetECI=H,t.ChecksumException=k,t.Code128Reader=mt,t.Code39Reader=Ht,t.DataMatrixDecodedBitStreamParser=hs,t.DataMatrixReader=Xr,t.DecodeHintType=X,t.DecoderResult=Pe,t.DefaultGridSampler=Me,t.DetectorResult=He,t.EAN13Reader=Mr,t.EncodeHintType=Kn,t.Exception=m,t.FormatException=F,t.GenericGF=Ie,t.GenericGFPoly=ut,t.GlobalHistogramBinarizer=be,t.GridSampler=it,t.GridSamplerInstance=Xe,t.HTMLCanvasElementLuminanceSource=We,t.HybridBinarizer=fe,t.ITFReader=Dt,t.IllegalArgumentException=_,t.IllegalStateException=De,t.InvertedLuminanceSource=ge,t.LuminanceSource=Ve,t.MathUtils=Ee,t.MultiFormatOneDReader=jn,t.MultiFormatReader=xf,t.MultiFormatWriter=Z1,t.NotFoundException=ne,t.OneDReader=Nt,t.PDF417DecodedBitStreamParser=nt,t.PDF417DecoderErrorCorrection=li,t.PDF417Reader=ua,t.PDF417ResultMetadata=Il,t.PerspectiveTransform=qe,t.PlanarYUVLuminanceSource=Bs,t.QRCodeByteMatrix=Fc,t.QRCodeDataMask=Ga,t.QRCodeDecodedBitStreamParser=un,t.QRCodeDecoderErrorCorrectionLevel=fr,t.QRCodeDecoderFormatInformation=Mn,t.QRCodeEncoder=fn,t.QRCodeEncoderQRCode=Ki,t.QRCodeMaskUtil=Sn,t.QRCodeMatrixUtil=qt,t.QRCodeMode=Vt,t.QRCodeReader=ii,t.QRCodeVersion=Bt,t.QRCodeWriter=Dl,t.RGBLuminanceSource=lu,t.RSS14Reader=$t,t.RSSExpandedReader=ot,t.ReaderException=Mc,t.ReedSolomonDecoder=Te,t.ReedSolomonEncoder=jo,t.ReedSolomonException=z,t.Result=P,t.ResultMetadataType=Be,t.ResultPoint=Fe,t.StringUtils=V,t.UnsupportedOperationException=ce,t.VideoInputDevice=re,t.WhiteRectangleDetector=Ke,t.WriterException=Zr,t.ZXingArrays=D,t.ZXingCharset=gf,t.ZXingInteger=O,t.ZXingStandardCharsets=Ro,t.ZXingStringBuilder=xe,t.ZXingStringEncoding=J,t.ZXingSystem=A,t.createAbstractExpandedDecoder=ht,Object.defineProperty(t,"__esModule",{value:!0})}))})(Yu,Yu.exports)),Yu.exports}var wn=Rj();const Oj=X4(wn),Ij=m6({__proto__:null,default:Oj},[wn]);var zy=(function(){function e(r,t,n){if(this.formatMap=new Map([[Ft.QR_CODE,wn.BarcodeFormat.QR_CODE],[Ft.AZTEC,wn.BarcodeFormat.AZTEC],[Ft.CODABAR,wn.BarcodeFormat.CODABAR],[Ft.CODE_39,wn.BarcodeFormat.CODE_39],[Ft.CODE_93,wn.BarcodeFormat.CODE_93],[Ft.CODE_128,wn.BarcodeFormat.CODE_128],[Ft.DATA_MATRIX,wn.BarcodeFormat.DATA_MATRIX],[Ft.MAXICODE,wn.BarcodeFormat.MAXICODE],[Ft.ITF,wn.BarcodeFormat.ITF],[Ft.EAN_13,wn.BarcodeFormat.EAN_13],[Ft.EAN_8,wn.BarcodeFormat.EAN_8],[Ft.PDF_417,wn.BarcodeFormat.PDF_417],[Ft.RSS_14,wn.BarcodeFormat.RSS_14],[Ft.RSS_EXPANDED,wn.BarcodeFormat.RSS_EXPANDED],[Ft.UPC_A,wn.BarcodeFormat.UPC_A],[Ft.UPC_E,wn.BarcodeFormat.UPC_E],[Ft.UPC_EAN_EXTENSION,wn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Ij)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var a=this.createZXingFormats(r),i=new Map;i.set(wn.DecodeHintType.POSSIBLE_FORMATS,a),i.set(wn.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(r){var t=this;return new Promise(function(n,a){try{n(t.decode(r))}catch(i){a(i)}})},e.prototype.decode=function(r){var t=new wn.MultiFormatReader(this.verbose,this.hints),n=new wn.HTMLCanvasElementLuminanceSource(r),a=new wn.BinaryBitmap(new wn.HybridBinarizer(n)),i=t.decode(a);return{text:i.text,format:ak.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(t,n,a){r.set(t,n)}),r},e.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},e.prototype.createZXingFormats=function(r){for(var t=[],n=0,a=r;n<a.length;n++){var i=a[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),Dj=function(e,r,t,n){function a(i){return i instanceof t?i:new t(function(u){u(i)})}return new(t||(t=Promise))(function(i,u){function f(w){try{m(n.next(w))}catch(_){u(_)}}function g(w){try{m(n.throw(w))}catch(_){u(_)}}function m(w){w.done?i(w.value):a(w.value).then(f,g)}m((n=n.apply(e,r||[])).next())})},Mj=function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(w){return g([m,w])}}function g(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(t=0)),t;)try{if(n=1,a&&(i=m[0]&2?a.return:m[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,m[1])).done)return i;switch(a=0,i&&(m=[m[0]&2,i.value]),m[0]){case 0:case 1:i=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,a=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){t.label=m[1];break}if(m[0]===6&&t.label<i[1]){t.label=i[1],i=m;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(m);break}i[2]&&t.ops.pop(),t.trys.pop();continue}m=r.call(e,t)}catch(w){m=[6,w],a=0}finally{n=i=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Hy=(function(){function e(r,t,n){if(this.formatMap=new Map([[Ft.QR_CODE,"qr_code"],[Ft.AZTEC,"aztec"],[Ft.CODABAR,"codabar"],[Ft.CODE_39,"code_39"],[Ft.CODE_93,"code_93"],[Ft.CODE_128,"code_128"],[Ft.DATA_MATRIX,"data_matrix"],[Ft.ITF,"itf"],[Ft.EAN_13,"ean_13"],[Ft.EAN_8,"ean_8"],[Ft.PDF_417,"pdf417"],[Ft.UPC_A,"upc_a"],[Ft.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=n;var a=this.createBarcodeDetectorFormats(r);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var r=new BarcodeDetector({formats:["qr_code"]});return typeof r<"u"},e.prototype.decodeAsync=function(r){return Dj(this,void 0,void 0,function(){var t,n;return Mj(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(r)];case 1:if(t=a.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(t),[2,{text:n.rawValue,format:ak.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(r){for(var t=null,n=0,a=0,i=r;a<i.length;a++){var u=i[a],f=u.boundingBox.width*u.boundingBox.height;f>n&&(n=f,t=u)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(r){for(var t=[],n=0,a=r;n<a.length;n++){var i=a[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},e.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(t,n,a){r.set(t,n)}),r},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),Vy=function(e,r,t,n){function a(i){return i instanceof t?i:new t(function(u){u(i)})}return new(t||(t=Promise))(function(i,u){function f(w){try{m(n.next(w))}catch(_){u(_)}}function g(w){try{m(n.throw(w))}catch(_){u(_)}}function m(w){w.done?i(w.value):a(w.value).then(f,g)}m((n=n.apply(e,r||[])).next())})},Gy=function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(w){return g([m,w])}}function g(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(t=0)),t;)try{if(n=1,a&&(i=m[0]&2?a.return:m[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,m[1])).done)return i;switch(a=0,i&&(m=[m[0]&2,i.value]),m[0]){case 0:case 1:i=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,a=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){t.label=m[1];break}if(m[0]===6&&t.label<i[1]){t.label=i[1],i=m;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(m);break}i[2]&&t.ops.pop(),t.trys.pop();continue}m=r.call(e,t)}catch(w){m=[6,w],a=0}finally{n=i=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Fj=(function(){function e(r,t,n,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&Hy.isSupported()?(this.primaryDecoder=new Hy(r,n,a),this.secondaryDecoder=new zy(r,n,a)):this.primaryDecoder=new zy(r,n,a)}return e.prototype.decodeAsync=function(r){return Vy(this,void 0,void 0,function(){var t;return Gy(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(r)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(r){return Vy(this,void 0,void 0,function(){var t,n;return Gy(this,function(a){switch(a.label){case 0:t=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(r)];case 2:return[2,a.sent()];case 3:if(n=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(r)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(r){if(this.verbose){var t=performance.now()-r;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var r=0,t=0,n=this.executionResults;t<n.length;t++){var a=n[t];r+=a}var i=r/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),Pp=(function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),l1=function(e,r,t,n){function a(i){return i instanceof t?i:new t(function(u){u(i)})}return new(t||(t=Promise))(function(i,u){function f(w){try{m(n.next(w))}catch(_){u(_)}}function g(w){try{m(n.throw(w))}catch(_){u(_)}}function m(w){w.done?i(w.value):a(w.value).then(f,g)}m((n=n.apply(e,r||[])).next())})},o1=function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(w){return g([m,w])}}function g(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(t=0)),t;)try{if(n=1,a&&(i=m[0]&2?a.return:m[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,m[1])).done)return i;switch(a=0,i&&(m=[m[0]&2,i.value]),m[0]){case 0:case 1:i=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,a=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){t.label=m[1];break}if(m[0]===6&&t.label<i[1]){t.label=i[1],i=m;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(m);break}i[2]&&t.ops.pop(),t.trys.pop();continue}m=r.call(e,t)}catch(w){m=[6,w],a=0}finally{n=i=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},ik=(function(){function e(r,t){this.name=r,this.track=t}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(r){var t={};t[this.name]=r;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var r=this.track.getSettings();if(this.name in r){var t=r[this.name];return t}return null},e})(),Lj=(function(e){Pp(r,e);function r(t,n){return e.call(this,t,n)||this}return r.prototype.min=function(){return this.getCapabilities().min},r.prototype.max=function(){return this.getCapabilities().max},r.prototype.step=function(){return this.getCapabilities().step},r.prototype.apply=function(t){var n={};n[this.name]=t;var a={advanced:[n]};return this.track.applyConstraints(a)},r.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),n=t[this.name];return{min:n.min,max:n.max,step:n.step}},r.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},r})(ik),Bj=(function(e){Pp(r,e);function r(t){return e.call(this,"zoom",t)||this}return r})(Lj),Pj=(function(e){Pp(r,e);function r(t){return e.call(this,"torch",t)||this}return r})(ik),Uj=(function(){function e(r){this.track=r}return e.prototype.zoomFeature=function(){return new Bj(this.track)},e.prototype.torchFeature=function(){return new Pj(this.track)},e})(),zj=(function(){function e(r,t,n){this.isClosed=!1,this.parentElement=r,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),r.append(this.surface)}return e.prototype.createVideoElement=function(r){var t=document.createElement("video");return t.style.width="".concat(r,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var r=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=r.surface.clientWidth,a=r.surface.clientHeight;r.callbacks.onRenderSurfaceReady(n,a),r.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(r,t,n,a){return l1(this,void 0,void 0,function(){var i,u;return o1(this,function(f){switch(f.label){case 0:return i=new e(r,t,a),n.aspectRatio?(u={aspectRatio:n.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:f.sent(),f.label=2;case 2:return i.setupSurface(),[2,i]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(r){this.failIfClosed();var t=this,n=function(){setTimeout(r,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(r){return l1(this,void 0,void 0,function(){return o1(this,function(t){if("aspectRatio"in r)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(r)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var r=this;return new Promise(function(t,n){var a=r.mediaStream.getVideoTracks(),i=a.length,u=0;r.mediaStream.getVideoTracks().forEach(function(f){r.mediaStream.removeTrack(f),f.stop(),++u,u>=i&&(r.isClosed=!0,r.parentElement.removeChild(r.surface),t())})})},e.prototype.getCapabilities=function(){return new Uj(this.getFirstTrackOrFail())},e})(),Hj=(function(){function e(r){this.mediaStream=r}return e.prototype.render=function(r,t,n){return l1(this,void 0,void 0,function(){return o1(this,function(a){return[2,zj.create(r,this.mediaStream,t,n)]})})},e.create=function(r){return l1(this,void 0,void 0,function(){var t,n;return o1(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:r},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=a.sent(),[2,new e(n)]}})})},e})(),Wy=function(e,r,t,n){function a(i){return i instanceof t?i:new t(function(u){u(i)})}return new(t||(t=Promise))(function(i,u){function f(w){try{m(n.next(w))}catch(_){u(_)}}function g(w){try{m(n.throw(w))}catch(_){u(_)}}function m(w){w.done?i(w.value):a(w.value).then(f,g)}m((n=n.apply(e,r||[])).next())})},Xy=function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(w){return g([m,w])}}function g(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(t=0)),t;)try{if(n=1,a&&(i=m[0]&2?a.return:m[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,m[1])).done)return i;switch(a=0,i&&(m=[m[0]&2,i.value]),m[0]){case 0:case 1:i=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,a=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){t.label=m[1];break}if(m[0]===6&&t.label<i[1]){t.label=i[1],i=m;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(m);break}i[2]&&t.ops.pop(),t.trys.pop();continue}m=r.call(e,t)}catch(w){m=[6,w],a=0}finally{n=i=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Vj=(function(){function e(){}return e.failIfNotSupported=function(){return Wy(this,void 0,void 0,function(){return Xy(this,function(r){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(r){return Wy(this,void 0,void 0,function(){return Xy(this,function(t){return[2,Hj.create(r)]})})},e})(),Gj=function(e,r,t,n){function a(i){return i instanceof t?i:new t(function(u){u(i)})}return new(t||(t=Promise))(function(i,u){function f(w){try{m(n.next(w))}catch(_){u(_)}}function g(w){try{m(n.throw(w))}catch(_){u(_)}}function m(w){w.done?i(w.value):a(w.value).then(f,g)}m((n=n.apply(e,r||[])).next())})},Wj=function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(w){return g([m,w])}}function g(m){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(t=0)),t;)try{if(n=1,a&&(i=m[0]&2?a.return:m[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,m[1])).done)return i;switch(a=0,i&&(m=[m[0]&2,i.value]),m[0]){case 0:case 1:i=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,a=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!i||m[1]>i[0]&&m[1]<i[3])){t.label=m[1];break}if(m[0]===6&&t.label<i[1]){t.label=i[1],i=m;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(m);break}i[2]&&t.ops.pop(),t.trys.pop();continue}m=r.call(e,t)}catch(w){m=[6,w],a=0}finally{n=i=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Xj=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var r=MediaStreamTrack;return MediaStreamTrack&&r.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var r=N0.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(r=N0.insecureContextCameraQueryError()),Promise.reject(r)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var r=location.host.split(":")[0];return r==="127.0.0.1"||r==="localhost"},e.getCamerasFromMediaDevices=function(){return Gj(this,void 0,void 0,function(){var r,t,n,a,i,u,f;return Wj(this,function(g){switch(g.label){case 0:return r=function(m){for(var w=m.getVideoTracks(),_=0,E=w;_<E.length;_++){var k=E[_];k.enabled=!1,k.stop(),m.removeTrack(k)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=g.sent(),a=[],i=0,u=n;i<u.length;i++)f=u[i],f.kind==="videoinput"&&a.push({id:f.deviceId,label:f.label});return r(t),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(r,t){var n=function(i){for(var u=[],f=0,g=i;f<g.length;f++){var m=g[f];m.kind==="video"&&u.push({id:m.id,label:m.label})}r(u)},a=MediaStreamTrack;a.getSources(n)})},e})(),Pn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Pn||(Pn={}));var Kj=(function(){function e(){this.state=Pn.NOT_STARTED,this.onGoingTransactionNewState=Pn.UNKNOWN}return e.prototype.directTransition=function(r){this.failIfTransitionOngoing(),this.validateTransition(r),this.state=r},e.prototype.startTransition=function(r){return this.failIfTransitionOngoing(),this.validateTransition(r),this.onGoingTransactionNewState=r,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Pn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var r=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Pn.UNKNOWN,this.directTransition(r)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Pn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Pn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Pn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(r){switch(this.state){case Pn.UNKNOWN:throw"Transition from unknown is not allowed";case Pn.NOT_STARTED:this.failIfNewStateIs(r,[Pn.PAUSED]);break;case Pn.SCANNING:break;case Pn.PAUSED:break}},e.prototype.failIfNewStateIs=function(r,t){for(var n=0,a=t;n<a.length;n++){var i=a[n];if(r===i)throw"Cannot transition from ".concat(this.state," to ").concat(r)}},e})(),qj=(function(){function e(r){this.stateManager=r}return e.prototype.startTransition=function(r){return this.stateManager.startTransition(r)},e.prototype.directTransition=function(r){this.stateManager.directTransition(r)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Pn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Pn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Pn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Pn.PAUSED},e})(),Yj=(function(){function e(){}return e.create=function(){return new qj(new Kj)},e})(),$j=(function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),As=(function(e){$j(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.DEFAULT_WIDTH=300,r.DEFAULT_WIDTH_OFFSET=2,r.FILE_SCAN_MIN_HEIGHT=300,r.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,r.MIN_QR_BOX_SIZE=50,r.SHADED_LEFT=1,r.SHADED_RIGHT=2,r.SHADED_TOP=3,r.SHADED_BOTTOM=4,r.SHADED_REGION_ELEMENT_ID="qr-shaded-region",r.VERBOSE=!1,r.BORDER_SHADER_DEFAULT_COLOR="#ffffff",r.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",r})(Nj),Zj=(function(){function e(r,t){this.logger=t,this.fps=As.SCAN_DEFAULT_FPS,r?(r.fps&&(this.fps=r.fps),this.disableFlip=r.disableFlip===!0,this.qrbox=r.qrbox,this.aspectRatio=r.aspectRatio,this.videoConstraints=r.videoConstraints):this.disableFlip=As.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?sk.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!ml(this.qrbox)},e.create=function(r,t){return new e(r,t)},e})(),xc=(function(){function e(r,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.elementId=r,this.verbose=!1;var n;typeof t=="boolean"?this.verbose=t===!0:t&&(n=t,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new Tj(this.verbose),this.qrcode=new Fj(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Yj.create()}return e.prototype.start=function(r,t,n,a){var i=this;if(!r)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var u;a?u=a:u=this.verbose?this.logger.log:function(){};var f=Zj.create(t,this.logger);this.clearElement();var g=!1;f.videoConstraints&&(f.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=g,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:As.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var _=this,E=this.stateManagerProxy.startTransition(Pn.SCANNING);return new Promise(function(k,N){var A=m?f.videoConstraints:_.createVideoConstraints(r);if(!A){E.cancel(),N("videoConstraints should be defined");return}var C={};(!m||f.aspectRatio)&&(C.aspectRatio=f.aspectRatio);var I={onRenderSurfaceReady:function(D,O){_.setupUi(D,O,f),_.isScanning=!0,_.foreverScan(f,n,u)}};Vj.failIfNotSupported().then(function(D){D.create(A).then(function(O){return O.render(i.element,C,I).then(function(B){_.renderedCamera=B,E.execute(),k(null)}).catch(function(B){E.cancel(),N(B)})}).catch(function(O){E.cancel(),N(N0.errorGettingUserMedia(O))})}).catch(function(D){E.cancel(),N(N0.cameraStreamingNotSupported())})})},e.prototype.pause=function(r){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Pn.PAUSED),this.showPausedState(),(ml(r)||r!==!0)&&(r=!1),r&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var r=this,t=function(){r.stateManagerProxy.directTransition(Pn.SCANNING),r.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var r=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Pn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(r.element){var i=document.getElementById(As.SHADED_REGION_ELEMENT_ID);i&&r.element.removeChild(i)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),n(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),t.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(r,t){return this.scanFileV2(r,t).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(r,t){var n=this;if(!r||!(r instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ml(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(r);var u=new Image;u.onload=function(){var f=u.width,g=u.height,m=document.getElementById(n.elementId),w=m.clientWidth?m.clientWidth:As.DEFAULT_WIDTH,_=Math.max(m.clientHeight?m.clientHeight:g,As.FILE_SCAN_MIN_HEIGHT),E=n.computeCanvasDrawConfig(f,g,w,_);if(t){var k=n.createCanvasElement(w,_,"qr-canvas-visible");k.style.display="inline-block",m.appendChild(k);var N=k.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=w,N.canvas.height=_,N.drawImage(u,0,0,f,g,E.x,E.y,E.width,E.height)}var A=As.FILE_SCAN_HIDDEN_CANVAS_PADDING,C=Math.max(u.width,E.width),I=Math.max(u.height,E.height),D=C+2*A,O=I+2*A,B=n.createCanvasElement(D,O);m.appendChild(B);var U=B.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=D,U.canvas.height=O,U.drawImage(u,0,0,f,g,A,A,C,I);try{n.qrcode.decodeRobustlyAsync(B).then(function(X){a(Py.createFromQrcodeResult(X))}).catch(i)}catch(X){i("QR code parse error, error = ".concat(X))}},u.onerror=i,u.onabort=i,u.onstalled=i,u.onsuspend=i,u.src=URL.createObjectURL(r)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Xj.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(r){if(r){if(!sk.isMediaStreamConstraintsValid(r,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(r)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(r){var t=[Ft.QR_CODE,Ft.AZTEC,Ft.CODABAR,Ft.CODE_39,Ft.CODE_93,Ft.CODE_128,Ft.DATA_MATRIX,Ft.MAXICODE,Ft.ITF,Ft.EAN_13,Ft.EAN_8,Ft.PDF_417,Ft.RSS_14,Ft.RSS_EXPANDED,Ft.UPC_A,Ft.UPC_E,Ft.UPC_EAN_EXTENSION];if(!r||typeof r=="boolean"||!r.formatsToSupport)return t;if(!Array.isArray(r.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(r.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],a=0,i=r.formatsToSupport;a<i.length;a++){var u=i[a];Aj(u)?n.push(u):this.logger.warn("Invalid format: ".concat(u," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(r){if(ml(r))return!0;if(!ml(r.useBarCodeDetectorIfSupported))return r.useBarCodeDetectorIfSupported!==!1;if(ml(r.experimentalFeatures))return!0;var t=r.experimentalFeatures;return ml(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(r,t,n){var a=this,i=n.qrbox;this.validateQrboxConfig(i);var u=this.toQrdimensions(r,t,i),f=function(m){if(m<As.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(As.MIN_QR_BOX_SIZE,"px.")},g=function(m){return m>r&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=r),m};f(u.width),f(u.height),u.width=g(u.width)},e.prototype.validateQrboxConfig=function(r){if(typeof r!="number"&&typeof r!="function"&&(r.width===void 0||r.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(r,t,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(r,t)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return n},e.prototype.setupUi=function(r,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(r,t,n);var a=ml(n.qrbox)?{width:r,height:t}:n.qrbox;this.validateQrboxConfig(a);var i=this.toQrdimensions(r,t,a);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=n.isShadedBoxEnabled()&&i.height<=t,f={x:0,y:0,width:r,height:t},g=u?this.getShadedRegionBounds(r,t,i):f,m=this.createCanvasElement(g.width,g.height),w={willReadFrequently:!0},_=m.getContext("2d",w);_.canvas.width=g.width,_.canvas.height=g.height,this.element.append(m),u&&this.possiblyInsertShadingElement(this.element,r,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=_,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(r){var t=document.createElement("div");t.innerText=N0.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",r.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(r,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return r(a.text,Py.createFromQrcodeResult(a)),n.possiblyUpdateShaders(!0),!0}).catch(function(a){n.possiblyUpdateShaders(!1);var i=N0.codeParseError(a);return t(i,Cj.createFrom(i)),!1})},e.prototype.foreverScan=function(r,t,n){var a=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),u=i.videoWidth/i.clientWidth,f=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*u,m=this.qrRegion.height*f,w=this.qrRegion.x*u,_=this.qrRegion.y*f;this.context.drawImage(i,w,_,g,m,0,0,this.qrRegion.width,this.qrRegion.height);var E=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(r,t,n)},a.getTimeoutFps(r.fps))};this.scanContext(t,n).then(function(k){!k&&r.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(t,n).finally(function(){E()})):E()}).catch(function(k){a.logger.logError("Error happend while scanning context",k),E()})}},e.prototype.createVideoConstraints=function(r){if(typeof r=="string")return{deviceId:{exact:r}};if(typeof r=="object"){var t="facingMode",n="deviceId",a={user:!0,environment:!0},i="exact",u=function(N){if(N in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},f=Object.keys(r);if(f.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(f.length," keys");var g=Object.keys(r)[0];if(g!==t&&g!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(g===t){var m=r.facingMode;if(typeof m=="string"){if(u(m))return{facingMode:m}}else if(typeof m=="object")if(i in m){if(u(m["".concat(i)]))return{facingMode:{exact:m["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var w=typeof m;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var _=r.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(i in _)return{deviceId:{exact:_["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var E=typeof _;throw"Invalid type of 'deviceId' = ".concat(E)}}}var k=typeof r;throw"Invalid type of 'cameraIdOrConfig' = ".concat(k)},e.prototype.computeCanvasDrawConfig=function(r,t,n,a){if(r<=n&&t<=a){var i=(n-r)/2,u=(a-t)/2;return{x:i,y:u,width:r,height:t}}else{var f=r,g=t;return r>n&&(t=n/r*t,r=n),t>a&&(r=a/t*r,t=a),this.logger.log("Image downsampled from "+"".concat(f,"X").concat(g)+" to ".concat(r,"X").concat(t,".")),this.computeCanvasDrawConfig(r,t,n,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var r=document.getElementById(this.elementId);r&&(r.innerHTML="")},e.prototype.possiblyUpdateShaders=function(r){this.qrMatch!==r&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=r?As.BORDER_SHADER_MATCH_COLOR:As.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=r)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(r,t,n){var a=r,i=t,u=document.createElement("canvas");return u.style.width="".concat(a,"px"),u.style.height="".concat(i,"px"),u.style.display="none",u.id=ml(n)?"qr-canvas":n,u},e.prototype.getShadedRegionBounds=function(r,t,n){if(n.width>r||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(r-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(r,t,n,a){if(!(t-a.width<1||n-a.height<1)){var i=document.createElement("div");i.style.position="absolute";var u=(t-a.width)/2,f=(n-a.height)/2;if(i.style.borderLeft="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(As.SHADED_REGION_ELEMENT_ID),t-a.width<11||n-a.height<11)this.hasBorderShaders=!1;else{var g=5,m=40;this.insertShaderBorders(i,m,g,-g,null,0,!0),this.insertShaderBorders(i,m,g,-g,null,0,!1),this.insertShaderBorders(i,m,g,null,-g,0,!0),this.insertShaderBorders(i,m,g,null,-g,0,!1),this.insertShaderBorders(i,g,m+g,-g,null,-g,!0),this.insertShaderBorders(i,g,m+g,null,-g,-g,!0),this.insertShaderBorders(i,g,m+g,-g,null,-g,!1),this.insertShaderBorders(i,g,m+g,null,-g,-g,!1),this.hasBorderShaders=!0}r.append(i)}},e.prototype.insertShaderBorders=function(r,t,n,a,i,u,f){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=As.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(t,"px"),g.style.height="".concat(n,"px"),a!==null&&(g.style.top="".concat(a,"px")),i!==null&&(g.style.bottom="".concat(i,"px")),f?g.style.left="".concat(u,"px"):g.style.right="".concat(u,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),r.appendChild(g)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(r){return 1e3/r},e})(),Ky;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ky||(Ky={}));function Jj(){const{user:e,logout:r}=Vi(),[t,n]=Q.useState([]),[a,i]=Q.useState([]),[u,f]=Q.useState([]),[g,m]=Q.useState(["Tm"]),[w,_]=Q.useState("Tm"),[E,k]=Q.useState(""),[N,A]=Q.useState([]),[C,I]=Q.useState(null),[D,O]=Q.useState("Toptan Sat"),[B,U]=Q.useState(!1),[X,F]=Q.useState(!1),[Y,H]=Q.useState(!1),[ce,J]=Q.useState(!1),[V,xe]=Q.useState(!1),[W,ne]=Q.useState(!1),[be,fe]=Q.useState(!1),[Ve,ge]=Q.useState(!1),[We,re]=Q.useState(!1),[L,q]=Q.useState(null),[P,Z]=Q.useState(""),[pe,Le]=Q.useState(!1),Be=Q.useRef(null),[Pe,et]=Q.useState(!1),[ut,ve]=Q.useState(""),[Ie,z]=Q.useState(""),[De,Te]=Q.useState(1),[le,de]=Q.useState(1),[Ee,at]=Q.useState(""),[Fe,He]=Q.useState(null),[je,Ke]=Q.useState(1),[it,qe]=Q.useState(""),[Me,Xe]=Q.useState(""),St=Q.useRef(null);Q.useRef(null);const[At,Ot]=Q.useState(""),sr=Q.useRef("");Q.useEffect(()=>{Nt(),mt(),Ht()},[]);const Nt=async()=>{try{const kt=(await Cn.getAll()).data||{};n(kt.products||[])}catch(ze){console.error("rnler yklenirken hata:",ze)}},mt=async()=>{try{const ze=await Hn.getAll();i(ze.data?.customers||[])}catch(ze){console.error("Mteriler yklenirken hata:",ze)}},Ht=async()=>{try{const kt=(await xo.getAll()).data?.shortcuts||[];f(kt),m(["Tm",...kt.map(Rt=>Rt.name)])}catch(ze){console.error("Ksayollar yklenirken hata:",ze)}},Dt=(()=>{const kt=(w!=="Tm"?u.find(Mt=>Mt.name===w):null)?.items||[];let Rt=t.filter(Mt=>{let pr=!0;w!=="Tm"&&(pr=kt.includes(Mt.stock_code));const Fr=E.toLowerCase(),$r=!E||Mt.name?.toLowerCase().includes(Fr)||Mt.barcode?.toLowerCase().includes(Fr)||Mt.stock_code?.toLowerCase().includes(Fr);return pr&&$r});return w!=="Tm"&&kt.length>0&&Rt.sort((Mt,pr)=>{const Fr=kt.indexOf(Mt.stock_code),$r=kt.indexOf(pr.stock_code);return Fr-$r}),Rt})(),Yt=a.filter(ze=>ze.name?.toLowerCase().includes(At.toLowerCase())||ze.phone?.includes(At)),or=ze=>{He(ze),Ke(1),xe(!0)},_r=()=>{if(!Fe)return;const ze=parseFloat(je)||1,kt=N.findIndex(Rt=>Rt.stock_code===Fe.stock_code);if(kt>=0){const Rt=[...N];Rt[kt].quantity+=ze,A(Rt)}else A([...N,{...Fe,quantity:ze,discount_rate:0,final_price:Fe.price}]);xe(!1),He(null)},Qr=(ze,kt,Rt)=>{const Mt=[...N];Mt[ze][kt]=Rt,kt==="discount_rate"?Mt[ze].final_price=Mt[ze].price*(1-Rt/100):kt==="price"&&(Mt[ze].final_price=Rt*(1-(Mt[ze].discount_rate||0)/100)),A(Mt),J(!1),ne(!1),fe(!1)},Xt=ze=>{A(N.filter((kt,Rt)=>Rt!==ze)),I(null)},Mr=()=>N.reduce((ze,kt)=>ze+kt.final_price*kt.quantity,0),zr=async ze=>{if(N.length===0){alert("Sepet bo!");return}if(ze==="Ak Hesap"&&D==="Toptan Sat"){alert("Ak hesap iin bir mteri semelisiniz.");return}try{const kt="SLS-"+Date.now(),Rt=a.find(Mt=>Mt.name===D);await fc.complete({sale_code:kt,customer:Rt||null,customer_name:Rt?void 0:D,payment_method:ze,items:N.map(Mt=>({id:Mt.id,stock_code:Mt.stock_code,name:Mt.name,quantity:Mt.quantity,price:Mt.final_price,discount_rate:Mt.discount_rate||0,amount:Mt.quantity})),total:Mr()}),qe("Sat lemi Baarl"),setTimeout(()=>qe(""),2e3),A([]),O("Toptan Sat"),F(!1),Nt()}catch(kt){alert("Sat hatas: "+(kt.response?.data?.message||kt.message))}},En=Q.useCallback(ze=>{const kt=t.find(Rt=>Rt.barcode===ze||Rt.stock_code===ze||Rt.stock_code?.toLowerCase()===ze.toLowerCase());if(kt){const Rt=N.findIndex(Mt=>Mt.stock_code===kt.stock_code);if(Rt>=0){const Mt=[...N];Mt[Rt].quantity+=1,A(Mt)}else A(Mt=>[...Mt,{...kt,quantity:1,discount_rate:0,final_price:kt.price}]);return qe(`${kt.name} eklendi!`),setTimeout(()=>qe(""),1500),!0}else return Xe(`Barkod bulunamad: ${ze}`),setTimeout(()=>Xe(""),3e3),!1},[t,N]),Wr=async()=>{Xe(""),ge(!0),sr.current="",setTimeout(async()=>{try{const ze=new xc("barcode-scanner-container");St.current=ze,await ze.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150},aspectRatio:1},kt=>{kt!==sr.current&&(sr.current=kt,console.log("Barkod bulundu:",kt),En(kt),setTimeout(()=>{sr.current=""},2e3))},kt=>{})}catch(ze){console.error("Kamera balatma hatas:",ze),Xe("Kamera alamad. Ltfen kamera izni verin.")}},100)},Or=async()=>{if(St.current){try{await St.current.stop(),St.current.clear()}catch(ze){console.error("Scanner stop error:",ze)}St.current=null}ge(!1),Xe("")};return o.jsxs("div",{className:"flex flex-col w-screen h-screen bg-gray-100 overflow-hidden select-none",children:[it&&o.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] pointer-events-none",children:o.jsx("div",{className:"bg-green-500 text-white px-16 py-8 rounded-xl shadow-2xl text-3xl font-bold animate-pulse",children:it})}),o.jsxs("div",{className:`fixed top-0 left-0 h-full bg-slate-800 z-[1001] transition-all duration-500 overflow-hidden flex flex-col gap-2 pt-16 shadow-xl ${B?"w-64":"w-0"}`,children:[o.jsx("button",{onClick:()=>U(!1),className:"absolute top-2 right-4 text-4xl text-white bg-transparent border-none cursor-pointer",children:""}),o.jsx(hr,{to:"/",className:"px-8 py-3 text-lg text-gray-400 hover:text-white transition-colors no-underline",children:" Ana Sayfa"}),o.jsx(hr,{to:"/customers",className:"px-8 py-3 text-lg text-gray-400 hover:text-white transition-colors no-underline",children:" Mterileri Gr"}),o.jsx(hr,{to:"/sales",className:"px-8 py-3 text-lg text-gray-400 hover:text-white transition-colors no-underline",children:" Satlar Gr"}),o.jsx(hr,{to:"/products",className:"px-8 py-3 text-lg text-gray-400 hover:text-white transition-colors no-underline",children:" rnleri Gr"}),o.jsx("button",{onClick:()=>{r(),U(!1)},className:"mt-4 px-8 py-4 text-lg text-red-400 hover:text-red-300 hover:bg-red-900/20 transition-colors border-t border-slate-700 text-left",children:" k"})]}),o.jsxs("header",{className:"flex justify-between items-center p-2 bg-white shadow-md gap-2",children:[o.jsx("input",{type:"text",value:E,onChange:ze=>k(ze.target.value),placeholder:"Ara...",className:"flex-1 min-w-0 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-blue-500"}),o.jsx("button",{onClick:()=>et(!0),className:"bg-orange-500 text-white border-none rounded-lg px-3 py-2 text-xs font-bold cursor-pointer hover:bg-orange-600 transition-colors whitespace-nowrap",children:"Tanmsz"}),o.jsx("button",{onClick:Wr,className:"bg-blue-50 text-blue-600 border-none rounded-lg p-2 text-2xl cursor-pointer hover:bg-blue-600 hover:text-white transition-colors",children:""})]}),o.jsxs("div",{className:"flex-1 flex flex-col p-3 overflow-hidden",children:[o.jsx("div",{className:"flex gap-2 overflow-x-auto pb-3 mb-2",style:{WebkitOverflowScrolling:"touch"},children:g.map(ze=>o.jsx("button",{onClick:()=>_(ze),className:`flex-shrink-0 bg-white border-2 rounded-xl px-4 py-3 text-sm font-bold cursor-pointer transition-all
                                ${w===ze?"bg-blue-50 border-blue-500 text-blue-600":"border-gray-300 hover:border-blue-500 hover:text-blue-500"}`,children:ze},ze))}),o.jsx("div",{className:"flex-1 overflow-y-auto grid grid-cols-[repeat(auto-fill,minmax(120px,1fr))] gap-3 content-start pb-36",children:Dt.map(ze=>o.jsxs("div",{onClick:()=>or(ze),className:"bg-white border border-gray-200 rounded-xl p-3 text-center cursor-pointer transition-all hover:shadow-lg hover:-translate-y-1 flex flex-col justify-center min-h-[120px]",children:[ze.image_url?o.jsx("img",{src:ze.image_url,alt:ze.name,className:"w-20 h-20 object-cover rounded-md mx-auto mb-2"}):o.jsx("div",{className:"w-20 h-20 flex items-center justify-center text-4xl text-gray-300 mx-auto mb-2",children:""}),o.jsx("div",{className:"text-xs font-semibold mb-1 line-clamp-2",children:ze.name}),o.jsxs("div",{className:"text-green-600 text-base font-bold",children:[ze.price?.toFixed(2)," TL"]})]},ze.id||ze.stock_code))})]}),o.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white z-[500]",children:[o.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-gray-100",children:[o.jsxs("span",{className:"text-xl font-bold text-green-600",children:[Mr().toFixed(2)," TL"]}),o.jsxs("button",{onClick:()=>F(!0),className:"bg-gradient-to-r from-green-500 to-green-600 text-white border-none rounded-xl px-5 py-2 text-base font-bold cursor-pointer hover:shadow-lg transition-all flex items-center gap-2",children:[" ",o.jsx("span",{children:N.length})," Sepete Git"]})]}),o.jsxs("div",{className:"border-t border-gray-200 flex justify-around py-2 px-1",children:[o.jsxs(hr,{to:"/mobile-pos",className:"flex flex-col items-center text-blue-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px] font-bold",children:"Sat"})]}),o.jsxs("button",{onClick:()=>{re(!0),q(null),Z("")},className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Fiyat Gr"})]}),o.jsxs(hr,{to:"/mobile-products",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"rnler"})]}),o.jsxs(hr,{to:"/mobile-customers",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Bakiyeler"})]}),o.jsxs(hr,{to:"/mobile-sales",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Satlar"})]}),o.jsxs(hr,{to:"/mobile-invoices",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Faturalar"})]}),o.jsxs("button",{onClick:()=>r(),className:"flex flex-col items-center text-red-500 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"k"})]})]})]}),X&&o.jsxs("div",{className:"fixed inset-0 bg-white z-[1000] flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 bg-white border-b border-gray-200 shrink-0",children:[o.jsx("h3",{className:"text-2xl font-bold text-slate-800 m-0",children:"Sepetim"}),o.jsx("div",{className:"flex-1 text-center font-bold text-blue-600 truncate mx-4",children:D}),o.jsx("button",{onClick:()=>F(!1),className:"bg-gray-100 text-gray-700 border border-gray-200 px-4 py-2 rounded-lg cursor-pointer hover:bg-gray-200",children:"Geri Dn"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:N.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"Sepetinizde rn bulunmamaktadr."}):N.map((ze,kt)=>o.jsxs("div",{onClick:()=>I(kt),className:`flex justify-between items-center py-3 px-3 cursor-pointer rounded-lg mb-2 transition-colors shadow-sm
                                        ${C===kt?"bg-green-200 border-2 border-green-400":"bg-yellow-50 border border-gray-200"}`,children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"m-0 mb-1 text-base font-semibold",children:ze.name}),o.jsxs("p",{className:"m-0 text-sm text-gray-600 flex items-center gap-1",children:[o.jsx("span",{className:"text-blue-600 font-bold",children:ze.quantity}),o.jsx("span",{className:"font-black",children:"Adet x"}),o.jsxs("span",{className:"text-blue-600 font-bold",children:[ze.final_price?.toFixed(2)," TL"]})]})]}),o.jsxs("div",{className:"font-bold text-green-600 text-lg w-24 text-right",children:[(ze.final_price*ze.quantity).toFixed(2)," TL"]}),o.jsx("button",{onClick:Rt=>{Rt.stopPropagation(),Xt(kt)},className:"ml-3 bg-red-500 text-white border-none rounded-full w-9 h-9 text-lg cursor-pointer flex items-center justify-center hover:bg-red-600",children:""})]},kt))}),o.jsxs("div",{className:"shrink-0 bg-white border-t-2 border-gray-300 p-4",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[o.jsx("button",{onClick:()=>{C!==null&&N[C]&&(at(N[C].quantity),J(!0))},disabled:C===null,className:"py-3 rounded-lg font-semibold cursor-pointer transition-colors disabled:bg-gray-200 disabled:cursor-not-allowed bg-green-500 text-white hover:bg-green-600 disabled:hover:bg-gray-200",children:"Miktar Dzenle"}),o.jsx("button",{onClick:()=>{C!==null&&N[C]&&(at(N[C].discount_rate||0),ne(!0))},disabled:C===null,className:"py-3 rounded-lg font-semibold cursor-pointer transition-colors disabled:bg-gray-200 disabled:cursor-not-allowed bg-yellow-500 text-white hover:bg-yellow-600 disabled:hover:bg-gray-200",children:"skonto Ekle"}),o.jsx("button",{onClick:()=>{C!==null&&N[C]&&(at(N[C].price),fe(!0))},disabled:C===null,className:"py-3 rounded-lg font-semibold cursor-pointer transition-colors disabled:bg-gray-200 disabled:cursor-not-allowed bg-cyan-500 text-white hover:bg-cyan-600 disabled:hover:bg-gray-200",children:"Fiyat Dzenle"})]}),o.jsxs("div",{className:"flex justify-between items-center bg-yellow-300 rounded-lg p-4 mb-3",children:[o.jsx("span",{className:"text-lg",children:"Genel Toplam"}),o.jsxs("span",{className:"text-2xl font-bold",children:[Mr().toFixed(2)," TL"]})]}),o.jsx("button",{onClick:()=>H(!0),className:"w-full py-3 bg-cyan-400 text-white rounded-lg font-semibold cursor-pointer hover:bg-cyan-500 transition-colors mb-3",children:"Mteri Se"}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsx("button",{onClick:()=>zr("Nakit"),disabled:N.length===0,className:"py-4 rounded-lg font-semibold text-white cursor-pointer transition-colors bg-green-500 hover:bg-green-600 disabled:opacity-50",children:"Nakit"}),o.jsx("button",{onClick:()=>zr("POS"),disabled:N.length===0,className:"py-4 rounded-lg font-semibold text-white cursor-pointer transition-colors bg-blue-500 hover:bg-blue-600 disabled:opacity-50",children:"POS"}),o.jsx("button",{onClick:()=>zr("Ak Hesap"),disabled:N.length===0,className:"py-4 rounded-lg font-semibold text-white cursor-pointer transition-colors bg-orange-500 hover:bg-orange-600 disabled:opacity-50",children:"Ak Hesap"})]})]})]}),V&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[1000]",children:o.jsxs("div",{className:"bg-white rounded-xl p-6 w-80 shadow-2xl",children:[o.jsx("span",{onClick:()=>xe(!1),className:"float-right text-3xl text-gray-400 cursor-pointer hover:text-gray-600",children:""}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Miktar Girin"}),o.jsx("p",{className:"text-gray-600 mb-4",children:Fe?.name}),o.jsx("input",{type:"number",value:je,onChange:ze=>Ke(ze.target.value),className:"w-full p-4 text-2xl text-center border-2 border-blue-500 rounded-lg mb-4 focus:outline-none",min:"1",autoFocus:!0,onFocus:ze=>ze.target.select()}),o.jsx("button",{onClick:_r,className:"w-full py-4 bg-green-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-green-600 transition-colors",children:"Sepete Ekle"})]})}),ce&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[1000]",children:o.jsxs("div",{className:"bg-white rounded-xl p-6 w-80 shadow-2xl",children:[o.jsx("span",{onClick:()=>J(!1),className:"float-right text-3xl text-gray-400 cursor-pointer hover:text-gray-600",children:""}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Miktar Dzenle"}),o.jsx("p",{className:"text-gray-600 mb-4",children:N[C]?.name}),o.jsx("input",{type:"number",value:Ee,onChange:ze=>at(ze.target.value),className:"w-full p-4 text-2xl text-center border-2 border-blue-500 rounded-lg mb-4 focus:outline-none",min:"1",autoFocus:!0,onFocus:ze=>ze.target.select()}),o.jsx("button",{onClick:()=>Qr(C,"quantity",parseInt(Ee)||1),className:"w-full py-4 bg-blue-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-blue-600 transition-colors",children:"Kaydet"})]})}),W&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[1000]",children:o.jsxs("div",{className:"bg-white rounded-xl p-6 w-80 shadow-2xl",children:[o.jsx("span",{onClick:()=>ne(!1),className:"float-right text-3xl text-gray-400 cursor-pointer hover:text-gray-600",children:""}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"skonto Ekle (%)"}),o.jsx("p",{className:"text-gray-600 mb-4",children:N[C]?.name}),o.jsx("input",{type:"number",value:Ee,onChange:ze=>at(ze.target.value),className:"w-full p-4 text-2xl text-center border-2 border-blue-500 rounded-lg mb-4 focus:outline-none",min:"0",max:"100",autoFocus:!0,onFocus:ze=>ze.target.select()}),o.jsx("button",{onClick:()=>Qr(C,"discount_rate",parseFloat(Ee)||0),className:"w-full py-4 bg-blue-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-blue-600 transition-colors",children:"Kaydet"})]})}),be&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[1000]",children:o.jsxs("div",{className:"bg-white rounded-xl p-6 w-80 shadow-2xl",children:[o.jsx("span",{onClick:()=>fe(!1),className:"float-right text-3xl text-gray-400 cursor-pointer hover:text-gray-600",children:""}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Fiyat Dzenle"}),o.jsx("p",{className:"text-gray-600 mb-4",children:N[C]?.name}),o.jsx("input",{type:"number",step:"0.01",value:Ee,onChange:ze=>at(ze.target.value),className:"w-full p-4 text-2xl text-center border-2 border-blue-500 rounded-lg mb-4 focus:outline-none",min:"0",autoFocus:!0,onFocus:ze=>ze.target.select()}),o.jsx("button",{onClick:()=>Qr(C,"price",parseFloat(Ee)||0),className:"w-full py-4 bg-blue-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-blue-600 transition-colors",children:"Kaydet"})]})}),Y&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[1000] p-4",children:o.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-lg shadow-2xl max-h-[90vh] flex flex-col",children:[o.jsx("span",{onClick:()=>H(!1),className:"float-right text-3xl text-gray-400 cursor-pointer hover:text-gray-600",children:""}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"Mteri Ara ve Se"}),o.jsx("input",{type:"text",value:At,onChange:ze=>Ot(ze.target.value),placeholder:"Mteri ad veya numaras",className:"w-full p-3 border border-gray-300 rounded-lg text-base focus:outline-none focus:border-blue-500 mb-4",autoFocus:!0}),o.jsx("div",{className:"flex-1 overflow-y-auto border border-gray-200 rounded-lg mb-4 max-h-72",children:Yt.length===0?o.jsx("p",{className:"text-center text-gray-500 py-8",children:"Mteri bulunamad."}):Yt.map(ze=>o.jsxs("div",{onClick:()=>{O(ze.name),H(!1)},className:"flex flex-col p-4 border-b border-gray-100 cursor-pointer hover:bg-blue-50 transition-colors",children:[o.jsx("h4",{className:"m-0 text-lg text-slate-800 font-semibold",children:ze.name}),o.jsx("p",{className:"m-0 text-sm text-gray-500",children:ze.phone||"Telefon Yok"})]},ze.id))}),o.jsx("button",{onClick:()=>{O("Toptan Sat"),H(!1)},className:"w-full py-4 bg-blue-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-blue-600 transition-colors",children:"Misafir Mteri Olarak Devam Et"})]})}),Ve&&o.jsxs("div",{className:"fixed inset-0 bg-black z-[2000] flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:Or,className:"absolute top-5 right-5 text-4xl text-white bg-transparent border-none cursor-pointer z-10",children:""}),o.jsx("div",{id:"barcode-scanner-container",className:"w-[90%] max-w-[400px] rounded-xl overflow-hidden"}),o.jsx("p",{className:"text-white text-lg mt-4",children:"Barkodu kameraya gsterin..."}),Me&&o.jsx("div",{className:"mt-4 px-6 py-3 bg-red-500 text-white rounded-lg text-center",children:Me}),o.jsxs("div",{className:"mt-6 flex gap-2 w-[90%] max-w-[400px]",children:[o.jsx("input",{type:"text",placeholder:"Barkodu manuel girin...",className:"flex-1 px-4 py-3 rounded-lg text-lg",onKeyDown:ze=>{ze.key==="Enter"&&ze.target.value&&(En(ze.target.value),ze.target.value="")}}),o.jsx("button",{onClick:ze=>{const kt=ze.target.previousSibling;kt.value&&(En(kt.value),kt.value="")},className:"px-6 py-3 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600",children:"Ekle"})]})]}),We&&o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[2000] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-slide-up",children:[o.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 p-5 flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:" Fiyat Sorgula"}),o.jsx("button",{onClick:()=>{re(!1),q(null),Be.current&&(Be.current.stop().catch(()=>{}),Be.current=null),Le(!1)},className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl hover:bg-white/30 transition-colors",children:""})]}),o.jsxs("div",{className:"p-5 space-y-4",children:[pe?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{id:"price-check-scanner",className:"w-full rounded-2xl overflow-hidden"}),o.jsx("button",{onClick:()=>{Be.current&&(Be.current.stop().catch(()=>{}),Be.current=null),Le(!1)},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"ptal"})]}):o.jsx("button",{onClick:async()=>{Le(!0),q(null),setTimeout(async()=>{try{const ze=new xc("price-check-scanner");Be.current=ze,await ze.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},kt=>{const Rt=t.find(Mt=>Mt.barcode===kt||Mt.stock_code===kt||Mt.stock_code?.toLowerCase()===kt.toLowerCase());q(Rt||{notFound:!0,searchTerm:kt}),ze.stop().catch(()=>{}),Be.current=null,Le(!1)},()=>{})}catch(ze){console.error("Kamera hatas:",ze),Le(!1)}},100)},className:"w-full py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-2xl font-bold text-lg flex items-center justify-center gap-3 shadow-lg shadow-blue-500/30 hover:shadow-xl hover:scale-[1.02] transition-all",children:" Barkod Okut"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:P,onChange:ze=>Z(ze.target.value),placeholder:"Stok Kodu veya Barkod girin...",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-violet-500 text-lg",onKeyDown:ze=>{if(ze.key==="Enter"&&P.trim()){const kt=t.find(Rt=>Rt.barcode===P.trim()||Rt.stock_code===P.trim()||Rt.stock_code?.toLowerCase()===P.trim().toLowerCase());q(kt||{notFound:!0,searchTerm:P.trim()})}}}),o.jsx("button",{onClick:()=>{if(P.trim()){const ze=t.find(kt=>kt.barcode===P.trim()||kt.stock_code===P.trim()||kt.stock_code?.toLowerCase()===P.trim().toLowerCase());q(ze||{notFound:!0,searchTerm:P.trim()})}},className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg transition-all",children:"Ara"})]}),L&&o.jsx("div",{className:"mt-4 animate-slide-up",children:L.notFound?o.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-5 text-center",children:[o.jsx("span",{className:"text-4xl",children:""}),o.jsx("p",{className:"text-lg font-semibold text-red-600 mt-2",children:"rn Bulunamad"}),o.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:['"',L.searchTerm,'"']})]}):o.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-2xl p-5 space-y-3",children:[L.image_url&&o.jsx("div",{className:"flex justify-center",children:o.jsx("img",{src:L.image_url,alt:L.name,className:"w-24 h-24 object-cover rounded-xl shadow-md"})}),o.jsxs("div",{className:"space-y-2 text-center",children:[o.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"rn Ad"}),o.jsx("p",{className:"text-lg font-bold text-gray-800",children:L.name})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[o.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Stok Kodu"}),o.jsx("p",{className:"font-semibold text-gray-700",children:L.stock_code})]}),o.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Barkod"}),o.jsx("p",{className:"font-semibold text-gray-700 font-mono text-sm",children:L.barcode||"-"})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl p-5 text-center shadow-lg shadow-emerald-500/30",children:[o.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Sat Fiyat"}),o.jsxs("p",{className:"text-4xl font-black text-white",children:[L.price?.toFixed(2)," TL"]})]}),o.jsx("button",{onClick:()=>{q(null),Z("")},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:" Yeni Arama"})]})})]})]})}),Pe&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[1000]",children:o.jsxs("div",{className:"bg-white rounded-xl p-6 w-80 shadow-2xl",children:[o.jsx("span",{onClick:()=>{et(!1),ve(""),z(""),Te(1),de(1)},className:"float-right text-3xl text-gray-400 cursor-pointer hover:text-gray-600",children:""}),le===1&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:"rn Ad Girin"}),o.jsx("input",{type:"text",value:ut,onChange:ze=>ve(ze.target.value),placeholder:"rn Ad",className:"w-full p-4 text-lg border-2 border-blue-500 rounded-lg focus:outline-none mb-4",autoFocus:!0,onKeyDown:ze=>{ze.key==="Enter"&&ut.trim()&&de(2)}}),o.jsx("button",{onClick:()=>{if(!ut.trim()){alert("Ltfen rn ad girin.");return}de(2)},className:"w-full py-4 bg-blue-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-blue-600 transition-colors",children:"leri "})]}),le===2&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Miktar Girin"}),o.jsx("p",{className:"text-gray-600 mb-4",children:ut}),o.jsx("input",{type:"number",value:De,onChange:ze=>Te(ze.target.value),placeholder:"Miktar",className:"w-full p-4 text-2xl text-center border-2 border-blue-500 rounded-lg focus:outline-none mb-4",min:"1",autoFocus:!0,onFocus:ze=>ze.target.select(),onKeyDown:ze=>{ze.key==="Enter"&&de(3)}}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>de(1),className:"flex-1 py-4 bg-gray-300 text-gray-700 text-lg font-bold rounded-lg cursor-pointer hover:bg-gray-400 transition-colors",children:" Geri"}),o.jsx("button",{onClick:()=>de(3),className:"flex-1 py-4 bg-blue-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-blue-600 transition-colors",children:"leri "})]})]}),le===3&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Fiyat Girin (TL)"}),o.jsxs("p",{className:"text-gray-600 mb-4",children:[ut," - ",De," Adet"]}),o.jsx("input",{type:"number",step:"0.01",value:Ie,onChange:ze=>z(ze.target.value),placeholder:"Fiyat",className:"w-full p-4 text-2xl text-center border-2 border-blue-500 rounded-lg focus:outline-none mb-4",autoFocus:!0,onFocus:ze=>ze.target.select(),onKeyDown:ze=>{if(ze.key==="Enter"&&Ie){const kt=parseFloat(Ie)||0,Rt=parseFloat(De)||1,Mt={id:"UNDEFINED-"+Date.now(),stock_code:"TANIMSIZ-"+Date.now(),name:ut,price:kt,quantity:Rt,discount_rate:0,final_price:kt};A(pr=>[...pr,Mt]),qe(`${ut} eklendi!`),setTimeout(()=>qe(""),1500),et(!1),ve(""),z(""),Te(1),de(1)}}}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>de(2),className:"flex-1 py-4 bg-gray-300 text-gray-700 text-lg font-bold rounded-lg cursor-pointer hover:bg-gray-400 transition-colors",children:" Geri"}),o.jsx("button",{onClick:()=>{if(!Ie){alert("Ltfen fiyat girin.");return}const ze=parseFloat(Ie)||0,kt=parseFloat(De)||1,Rt={id:"UNDEFINED-"+Date.now(),stock_code:"TANIMSIZ-"+Date.now(),name:ut,price:ze,quantity:kt,discount_rate:0,final_price:ze};A(Mt=>[...Mt,Rt]),qe(`${ut} eklendi!`),setTimeout(()=>qe(""),1500),et(!1),ve(""),z(""),Te(1),de(1)},className:"flex-1 py-4 bg-orange-500 text-white text-lg font-bold rounded-lg cursor-pointer hover:bg-orange-600 transition-colors",children:"Sepete Ekle"})]})]})]})}),o.jsx("style",{children:`
                @keyframes slide-up {
                    from { transform: translateY(100%); }
                    to { transform: translateY(0); }
                }
                .animate-slide-up {
                    animation: slide-up 0.3s ease-out;
                }
                @keyframes slide-down {
                    from { transform: translateY(-100%); }
                    to { transform: translateY(0); }
                }
                .animate-slide-down {
                    animation: slide-down 0.3s ease-out;
                }
            `})]})}function Qj(){const{logout:e}=Vi(),[r,t]=Q.useState([]),[n,a]=Q.useState(!0),[i,u]=Q.useState(""),[f,g]=Q.useState(!1),[m,w]=Q.useState(null),[_,E]=Q.useState({name:"",stock_code:"",barcode:"",price:"",stock:"",image_url:""}),[k,N]=Q.useState(!1),[A,C]=Q.useState(!1),I=Q.useRef(null),D=Q.useRef(""),O=Q.useRef(null),[B,U]=Q.useState(!1),[X,F]=Q.useState(null),[Y,H]=Q.useState(""),[ce,J]=Q.useState(!1),V=Q.useRef(null);Q.useEffect(()=>{xe()},[]);const xe=async()=>{try{const L=await Cn.getAll();t(L.data?.products||[])}catch(L){console.error("rnler yklenirken hata:",L)}finally{a(!1)}},W=r.filter(L=>{const q=i.toLowerCase();return!i||L.name?.toLowerCase().includes(q)||L.barcode?.toLowerCase().includes(q)||L.stock_code?.toLowerCase().includes(q)}),ne=L=>{w(L),E({name:L.name||"",stock_code:L.stock_code||"",barcode:L.barcode||"",price:L.price?.toString()||"",stock:L.stock?.toString()||"0",image_url:L.image_url||""}),g(!0)},be=async()=>{if(m){N(!0);try{const L={name:_.name,barcode:_.barcode,price:parseFloat(_.price)||0,stock:parseInt(_.stock)||0,image_url:_.image_url};(await Cn.update(m.stock_code,L)).data?(alert("rn gncellendi!"),g(!1),xe()):alert("Hata: Gncelleme baarsz")}catch(L){console.error("Update error:",L),alert("Gncelleme hatas: "+(L.response?.data?.message||L.message||"Bilinmeyen hata"))}finally{N(!1)}}},fe=async()=>{C(!0),D.current="",setTimeout(async()=>{try{const L=new xc("product-barcode-scanner");I.current=L,await L.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},q=>{q!==D.current&&(D.current=q,E(P=>({...P,barcode:q})),Ve())},()=>{})}catch(L){console.error("Kamera hatas:",L),alert("Kamera alamad"),C(!1)}},100)},Ve=async()=>{if(I.current){try{await I.current.stop(),I.current.clear()}catch{}I.current=null}C(!1)},ge=async L=>{const q=L.target.files[0];if(q)try{const P=await We(q,300,.6);E(Z=>({...Z,image_url:P}))}catch(P){console.error("Resim sktrma hatas:",P),alert("Resim yklenirken hata olutu")}},We=(L,q,P)=>new Promise((Z,pe)=>{const Le=new FileReader;Le.onload=Be=>{const Pe=new Image;Pe.onload=()=>{const et=document.createElement("canvas");let ut=Pe.width,ve=Pe.height;ut>ve?ut>q&&(ve=Math.round(ve*q/ut),ut=q):ve>q&&(ut=Math.round(ut*q/ve),ve=q),et.width=ut,et.height=ve,et.getContext("2d").drawImage(Pe,0,0,ut,ve);const z=et.toDataURL("image/jpeg",P);Z(z)},Pe.onerror=pe,Pe.src=Be.target.result},Le.onerror=pe,Le.readAsDataURL(L)}),re=()=>{E(L=>({...L,image_url:""}))};return n?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:o.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):o.jsxs("div",{className:"min-h-screen bg-gray-100 pb-20",children:[o.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-10 px-4 py-3",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx(hr,{to:"/mobile-pos",className:"text-2xl",children:""}),o.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"rn Listesi"}),o.jsx("span",{className:"ml-auto bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-sm font-semibold",children:r.length})]}),o.jsx("input",{type:"text",value:i,onChange:L=>u(L.target.value),placeholder:"rn ara (ad, barkod, stok kodu)...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"})]}),o.jsx("div",{className:"p-4 space-y-3",children:W.length===0?o.jsx("div",{className:"text-center py-10 text-gray-500",children:"rn bulunamad."}):W.map(L=>o.jsxs("div",{onClick:()=>ne(L),className:"bg-white rounded-xl p-4 shadow-sm flex items-center gap-4 cursor-pointer active:bg-gray-50",children:[L.image_url?o.jsx("img",{src:L.image_url,alt:L.name,className:"w-16 h-16 object-cover rounded-lg"}):o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-2xl text-gray-400",children:""}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:L.name}),o.jsx("p",{className:"text-sm text-gray-500",children:L.stock_code}),o.jsx("p",{className:"text-xs text-gray-400",children:L.barcode||"-"})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-lg font-bold text-green-600",children:[L.price?.toFixed(2)," TL"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:["Stok: ",L.stock||0]})]})]},L.id||L.stock_code))}),f&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-t-3xl p-6 animate-slide-up max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"rn Dzenle"}),o.jsx("button",{onClick:()=>g(!1),className:"text-3xl text-gray-400 hover:text-gray-600",children:""})]}),o.jsxs("div",{className:"flex flex-col items-center mb-4",children:[_.image_url?o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:_.image_url,alt:"rn",className:"w-32 h-32 object-cover rounded-xl border-2 border-gray-200"}),o.jsx("button",{onClick:re,className:"absolute -top-2 -right-2 w-7 h-7 bg-red-500 text-white rounded-full text-lg flex items-center justify-center",children:""})]}):o.jsx("div",{className:"w-32 h-32 bg-gray-100 rounded-xl flex items-center justify-center text-5xl text-gray-300",children:""}),o.jsx("input",{type:"file",accept:"image/*",ref:O,onChange:ge,className:"hidden"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsxs("button",{onClick:()=>O.current?.click(),className:"px-4 py-2 bg-blue-100 text-blue-600 rounded-lg text-sm font-semibold",children:[" Resim ",_.image_url?"Deitir":"Ekle"]}),o.jsx("button",{onClick:fe,className:"px-4 py-2 bg-green-100 text-green-600 rounded-lg text-sm font-semibold",children:" Barkod Okut"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"rn Ad"}),o.jsx("input",{type:"text",value:_.name,onChange:L=>E({..._,name:L.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"Stok Kodu"}),o.jsx("input",{type:"text",value:_.stock_code,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none bg-gray-50 text-gray-500",readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"Barkod"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:_.barcode,onChange:L=>E({..._,barcode:L.target.value}),placeholder:"Barkod girin",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"}),o.jsx("button",{onClick:fe,className:"px-3 py-3 bg-blue-500 text-white rounded-xl text-xl",children:""})]})]})]}),_.barcode&&o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-center",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Mevcut Barkod"}),o.jsx("p",{className:"text-lg font-mono font-bold text-gray-800",children:_.barcode})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"Fiyat (TL)"}),o.jsx("input",{type:"number",step:"0.01",value:_.price,onChange:L=>E({..._,price:L.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 text-lg font-bold text-green-600"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-1",children:"Stok Adedi"}),o.jsx("input",{type:"number",value:_.stock,onChange:L=>E({..._,stock:L.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-4 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"ptal"}),o.jsx("button",{onClick:be,disabled:k,className:"flex-1 py-4 bg-blue-500 text-white rounded-xl font-bold disabled:opacity-50",children:k?"Kaydediliyor...":"Kaydet"})]})]})}),A&&o.jsxs("div",{className:"fixed inset-0 bg-black z-[100] flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:Ve,className:"absolute top-5 right-5 text-4xl text-white",children:""}),o.jsx("div",{id:"product-barcode-scanner",className:"w-[90%] max-w-[400px] rounded-xl overflow-hidden"}),o.jsx("p",{className:"text-white text-lg mt-4",children:"Barkodu okutun..."})]}),o.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 flex justify-around py-2 px-1",children:[o.jsxs(hr,{to:"/mobile-pos",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Sat"})]}),o.jsxs("button",{onClick:()=>{U(!0),F(null),H("")},className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Fiyat Gr"})]}),o.jsxs(hr,{to:"/mobile-products",className:"flex flex-col items-center text-blue-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px] font-bold",children:"rnler"})]}),o.jsxs(hr,{to:"/mobile-customers",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Bakiyeler"})]}),o.jsxs(hr,{to:"/mobile-sales",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Satlar"})]}),o.jsxs(hr,{to:"/mobile-invoices",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Faturalar"})]}),o.jsxs("button",{onClick:()=>e(),className:"flex flex-col items-center text-red-500 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"k"})]})]}),B&&o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[2000] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-slide-up",children:[o.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 p-5 flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:" Fiyat Sorgula"}),o.jsx("button",{onClick:()=>{U(!1),F(null),V.current&&(V.current.stop().catch(()=>{}),V.current=null),J(!1)},className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl",children:""})]}),o.jsxs("div",{className:"p-5 space-y-4",children:[ce?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{id:"products-price-scanner",className:"w-full rounded-2xl overflow-hidden"}),o.jsx("button",{onClick:()=>{V.current&&(V.current.stop().catch(()=>{}),V.current=null),J(!1)},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"ptal"})]}):o.jsx("button",{onClick:async()=>{J(!0),F(null),setTimeout(async()=>{try{const L=new xc("products-price-scanner");V.current=L,await L.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},q=>{const P=r.find(Z=>Z.barcode===q||Z.stock_code===q);F(P||{notFound:!0,searchTerm:q}),L.stop().catch(()=>{}),V.current=null,J(!1)},()=>{})}catch{J(!1)}},100)},className:"w-full py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-2xl font-bold text-lg",children:" Barkod Okut"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:Y,onChange:L=>H(L.target.value),placeholder:"Stok Kodu veya Barkod...",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl",onKeyDown:L=>{if(L.key==="Enter"&&Y.trim()){const q=r.find(P=>P.barcode===Y.trim()||P.stock_code===Y.trim());F(q||{notFound:!0,searchTerm:Y.trim()})}}}),o.jsx("button",{onClick:()=>{if(Y.trim()){const L=r.find(q=>q.barcode===Y.trim()||q.stock_code===Y.trim());F(L||{notFound:!0,searchTerm:Y.trim()})}},className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-bold",children:"Ara"})]}),X&&o.jsx("div",{className:"mt-4",children:X.notFound?o.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-5 text-center",children:[o.jsx("span",{className:"text-4xl",children:""}),o.jsx("p",{className:"text-lg font-semibold text-red-600 mt-2",children:"rn Bulunamad"})]}):o.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-2xl p-5 space-y-3",children:[o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg font-bold text-gray-800",children:X.name})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[o.jsxs("div",{className:"bg-white rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Stok Kodu"}),o.jsx("p",{className:"font-semibold",children:X.stock_code})]}),o.jsxs("div",{className:"bg-white rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Barkod"}),o.jsx("p",{className:"font-semibold font-mono text-sm",children:X.barcode||"-"})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl p-5 text-center",children:[o.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Sat Fiyat"}),o.jsxs("p",{className:"text-4xl font-black text-white",children:[X.price?.toFixed(2)," TL"]})]}),o.jsx("button",{onClick:()=>{F(null),H("")},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:" Yeni Arama"})]})})]})]})}),o.jsx("style",{children:`
                @keyframes slide-up {
                    from { transform: translateY(100%); }
                    to { transform: translateY(0); }
                }
                .animate-slide-up {
                    animation: slide-up 0.3s ease-out;
                }
            `})]})}function eR(){const{logout:e}=Vi(),[r,t]=Q.useState([]),[n,a]=Q.useState([]),[i,u]=Q.useState(!0),[f,g]=Q.useState(""),[m,w]=Q.useState(!1),[_,E]=Q.useState(null),[k,N]=Q.useState(""),[A,C]=Q.useState(!1),I=Q.useRef(null);Q.useEffect(()=>{D()},[]);const D=async()=>{try{const[X,F]=await Promise.all([Hn.getAll(),Cn.getAll()]);t(X.data?.customers||[]),a(F.data?.products||[])}catch(X){console.error("Veri yklenirken hata:",X)}finally{u(!1)}},O=r.filter(X=>{const F=f.toLowerCase();return!f||X.name?.toLowerCase().includes(F)||X.customer_code?.toLowerCase().includes(F)||X.phone?.includes(f)}),B=r.reduce((X,F)=>{const Y=parseFloat(F.balance)||0;return Y>0?X+Y:X},0),U=r.reduce((X,F)=>{const Y=parseFloat(F.balance)||0;return Y<0?X+Math.abs(Y):X},0);return i?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:o.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):o.jsxs("div",{className:"min-h-screen bg-gray-100 pb-20",children:[o.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-10 px-4 py-3",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx(hr,{to:"/mobile-pos",className:"text-2xl",children:""}),o.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Bakiyeler"}),o.jsx("span",{className:"ml-auto bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-sm font-semibold",children:r.length})]}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsxs("div",{className:"flex-1 bg-red-50 border border-red-200 rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-red-600",children:"Toplam Bor"}),o.jsxs("p",{className:"text-lg font-bold text-red-600",children:[B.toFixed(2)," TL"]})]}),o.jsxs("div",{className:"flex-1 bg-green-50 border border-green-200 rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-green-600",children:"Toplam Alacak"}),o.jsxs("p",{className:"text-lg font-bold text-green-600",children:[U.toFixed(2)," TL"]})]})]}),o.jsx("input",{type:"text",value:f,onChange:X=>g(X.target.value),placeholder:"Mteri ara...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"})]}),o.jsx("div",{className:"p-4 space-y-3",children:O.length===0?o.jsx("div",{className:"text-center py-10 text-gray-500",children:"Mteri bulunamad."}):O.map(X=>{const F=parseFloat(X.balance)||0;return o.jsxs(hr,{to:`/customer/${encodeURIComponent(X.name)}`,className:"bg-white rounded-xl p-4 shadow-sm flex items-center gap-4 no-underline",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:X.name?.charAt(0)?.toUpperCase()}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:X.name}),o.jsx("p",{className:"text-sm text-gray-500",children:X.customer_code||"-"})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:`text-lg font-bold ${F>0?"text-red-600":F<0?"text-green-600":"text-gray-600"}`,children:[Math.abs(F).toFixed(2)," TL"]}),o.jsx("p",{className:`text-xs ${F>0?"text-red-500":F<0?"text-green-500":"text-gray-500"}`,children:F>0?"Borlu":F<0?"Alacakl":"Ntr"})]})]},X.id)})}),o.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 flex justify-around py-2 px-1",children:[o.jsxs(hr,{to:"/mobile-pos",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Sat"})]}),o.jsxs("button",{onClick:()=>{w(!0),E(null),N("")},className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Fiyat Gr"})]}),o.jsxs(hr,{to:"/mobile-products",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"rnler"})]}),o.jsxs(hr,{to:"/mobile-customers",className:"flex flex-col items-center text-blue-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px] font-bold",children:"Bakiyeler"})]}),o.jsxs(hr,{to:"/mobile-sales",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Satlar"})]}),o.jsxs(hr,{to:"/mobile-invoices",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Faturalar"})]}),o.jsxs("button",{onClick:()=>e(),className:"flex flex-col items-center text-red-500 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"k"})]})]}),m&&o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[2000] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 p-5 flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:" Fiyat Sorgula"}),o.jsx("button",{onClick:()=>{w(!1),E(null),I.current&&(I.current.stop().catch(()=>{}),I.current=null),C(!1)},className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl",children:""})]}),o.jsxs("div",{className:"p-5 space-y-4",children:[A?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{id:"customers-price-scanner",className:"w-full rounded-2xl overflow-hidden"}),o.jsx("button",{onClick:()=>{I.current&&(I.current.stop().catch(()=>{}),I.current=null),C(!1)},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"ptal"})]}):o.jsx("button",{onClick:async()=>{C(!0),E(null),setTimeout(async()=>{try{const X=new xc("customers-price-scanner");I.current=X,await X.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},F=>{const Y=n.find(H=>H.barcode===F||H.stock_code===F);E(Y||{notFound:!0,searchTerm:F}),X.stop().catch(()=>{}),I.current=null,C(!1)},()=>{})}catch{C(!1)}},100)},className:"w-full py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-2xl font-bold text-lg",children:" Barkod Okut"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:k,onChange:X=>N(X.target.value),placeholder:"Stok Kodu veya Barkod...",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl",onKeyDown:X=>{if(X.key==="Enter"&&k.trim()){const F=n.find(Y=>Y.barcode===k.trim()||Y.stock_code===k.trim());E(F||{notFound:!0,searchTerm:k.trim()})}}}),o.jsx("button",{onClick:()=>{if(k.trim()){const X=n.find(F=>F.barcode===k.trim()||F.stock_code===k.trim());E(X||{notFound:!0,searchTerm:k.trim()})}},className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-bold",children:"Ara"})]}),_&&o.jsx("div",{className:"mt-4",children:_.notFound?o.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-5 text-center",children:[o.jsx("span",{className:"text-4xl",children:""}),o.jsx("p",{className:"text-lg font-semibold text-red-600 mt-2",children:"rn Bulunamad"})]}):o.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-2xl p-5 space-y-3",children:[o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg font-bold text-gray-800",children:_.name})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[o.jsxs("div",{className:"bg-white rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Stok Kodu"}),o.jsx("p",{className:"font-semibold",children:_.stock_code})]}),o.jsxs("div",{className:"bg-white rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Barkod"}),o.jsx("p",{className:"font-semibold font-mono text-sm",children:_.barcode||"-"})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl p-5 text-center",children:[o.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Sat Fiyat"}),o.jsxs("p",{className:"text-4xl font-black text-white",children:[_.price?.toFixed(2)," TL"]})]}),o.jsx("button",{onClick:()=>{E(null),N("")},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:" Yeni Arama"})]})})]})]})})]})}function tR(){const{logout:e}=Vi(),[r,t]=Q.useState([]),[n,a]=Q.useState([]),[i,u]=Q.useState(!0),[f,g]=Q.useState(""),[m,w]=Q.useState(!1),[_,E]=Q.useState(null),[k,N]=Q.useState(""),[A,C]=Q.useState(!1),I=Q.useRef(null);Q.useEffect(()=>{D()},[]);const D=async()=>{try{const[Y,H]=await Promise.all([fc.getAll(),Cn.getAll()]);t(Y.data?.sales||[]),a(H.data?.products||[])}catch(Y){console.error("Veri yklenirken hata:",Y)}finally{u(!1)}},O=r.filter(Y=>{const H=f.toLowerCase();return!f||Y.sale_code?.toLowerCase().includes(H)||Y.customer_name?.toLowerCase().includes(H)}),B=new Date().toDateString(),U=r.filter(Y=>new Date(Y.created_at).toDateString()===B),X=U.reduce((Y,H)=>Y+(parseFloat(H.total)||0),0),F=Y=>Y?new Date(Y).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):"-";return i?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:o.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):o.jsxs("div",{className:"min-h-screen bg-gray-100 pb-20",children:[o.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-10 px-4 py-3",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx(hr,{to:"/mobile-pos",className:"text-2xl",children:""}),o.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Sat Gemii"}),o.jsx("span",{className:"ml-auto bg-blue-100 text-blue-600 px-2 py-1 rounded-full text-sm font-semibold",children:r.length})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-4 mb-3 text-white",children:[o.jsx("p",{className:"text-sm opacity-80",children:"Bugnk Satlar"}),o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsxs("p",{className:"text-2xl font-bold",children:[X.toFixed(2)," TL"]}),o.jsxs("p",{className:"text-sm",children:[U.length," sat"]})]})]}),o.jsx("input",{type:"text",value:f,onChange:Y=>g(Y.target.value),placeholder:"Sat kodu veya mteri ara...",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-blue-500"})]}),o.jsx("div",{className:"p-4 space-y-3",children:O.length===0?o.jsx("div",{className:"text-center py-10 text-gray-500",children:"Sat bulunamad."}):O.map(Y=>o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:Y.sale_code}),o.jsx("p",{className:"text-sm text-gray-500",children:Y.customer_name||"Toptan Sat"})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-lg font-bold text-green-600",children:[parseFloat(Y.total||0).toFixed(2)," TL"]}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Y.payment_method==="Nakit"?"bg-green-100 text-green-700":Y.payment_method==="POS"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}`,children:Y.payment_method||"Nakit"})]})]}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[o.jsx("span",{children:F(Y.created_at)}),o.jsxs("span",{children:[Y.items?.length||0," rn"]})]})]},Y.id||Y.sale_code))}),o.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 flex justify-around py-2 px-1",children:[o.jsxs(hr,{to:"/mobile-pos",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Sat"})]}),o.jsxs("button",{onClick:()=>{w(!0),E(null),N("")},className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Fiyat Gr"})]}),o.jsxs(hr,{to:"/mobile-products",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"rnler"})]}),o.jsxs(hr,{to:"/mobile-customers",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Bakiyeler"})]}),o.jsxs(hr,{to:"/mobile-sales",className:"flex flex-col items-center text-blue-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px] font-bold",children:"Satlar"})]}),o.jsxs(hr,{to:"/mobile-invoices",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Faturalar"})]}),o.jsxs("button",{onClick:()=>e(),className:"flex flex-col items-center text-red-500 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"k"})]})]}),m&&o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[2000] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 p-5 flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:" Fiyat Sorgula"}),o.jsx("button",{onClick:()=>{w(!1),E(null),I.current&&(I.current.stop().catch(()=>{}),I.current=null),C(!1)},className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl",children:""})]}),o.jsxs("div",{className:"p-5 space-y-4",children:[A?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{id:"sales-price-scanner",className:"w-full rounded-2xl overflow-hidden"}),o.jsx("button",{onClick:()=>{I.current&&(I.current.stop().catch(()=>{}),I.current=null),C(!1)},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"ptal"})]}):o.jsx("button",{onClick:async()=>{C(!0),E(null),setTimeout(async()=>{try{const Y=new xc("sales-price-scanner");I.current=Y,await Y.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},H=>{const ce=n.find(J=>J.barcode===H||J.stock_code===H);E(ce||{notFound:!0,searchTerm:H}),Y.stop().catch(()=>{}),I.current=null,C(!1)},()=>{})}catch{C(!1)}},100)},className:"w-full py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-2xl font-bold text-lg",children:" Barkod Okut"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:k,onChange:Y=>N(Y.target.value),placeholder:"Stok Kodu veya Barkod...",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl",onKeyDown:Y=>{if(Y.key==="Enter"&&k.trim()){const H=n.find(ce=>ce.barcode===k.trim()||ce.stock_code===k.trim());E(H||{notFound:!0,searchTerm:k.trim()})}}}),o.jsx("button",{onClick:()=>{if(k.trim()){const Y=n.find(H=>H.barcode===k.trim()||H.stock_code===k.trim());E(Y||{notFound:!0,searchTerm:k.trim()})}},className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-bold",children:"Ara"})]}),_&&o.jsx("div",{className:"mt-4",children:_.notFound?o.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-5 text-center",children:[o.jsx("span",{className:"text-4xl",children:""}),o.jsx("p",{className:"text-lg font-semibold text-red-600 mt-2",children:"rn Bulunamad"})]}):o.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-2xl p-5 space-y-3",children:[o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg font-bold text-gray-800",children:_.name})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[o.jsxs("div",{className:"bg-white rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Stok Kodu"}),o.jsx("p",{className:"font-semibold",children:_.stock_code})]}),o.jsxs("div",{className:"bg-white rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Barkod"}),o.jsx("p",{className:"font-semibold font-mono text-sm",children:_.barcode||"-"})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl p-5 text-center",children:[o.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Sat Fiyat"}),o.jsxs("p",{className:"text-4xl font-black text-white",children:[_.price?.toFixed(2)," TL"]})]}),o.jsx("button",{onClick:()=>{E(null),N("")},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:" Yeni Arama"})]})})]})]})})]})}function Rh(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ig={exports:{}};var qy;function rR(){return qy||(qy=1,(function(e,r){(function(t){e.exports=t()})(function(){return(function t(n,a,i){function u(m,w){if(!a[m]){if(!n[m]){var _=typeof Rh=="function"&&Rh;if(!w&&_)return _(m,!0);if(f)return f(m,!0);var E=new Error("Cannot find module '"+m+"'");throw E.code="MODULE_NOT_FOUND",E}var k=a[m]={exports:{}};n[m][0].call(k.exports,function(N){var A=n[m][1][N];return u(A||N)},k,k.exports,t,n,a,i)}return a[m].exports}for(var f=typeof Rh=="function"&&Rh,g=0;g<i.length;g++)u(i[g]);return u})({1:[function(t,n,a){var i=t("./utils"),u=t("./support"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(g){for(var m,w,_,E,k,N,A,C=[],I=0,D=g.length,O=D,B=i.getTypeOf(g)!=="string";I<g.length;)O=D-I,_=B?(m=g[I++],w=I<D?g[I++]:0,I<D?g[I++]:0):(m=g.charCodeAt(I++),w=I<D?g.charCodeAt(I++):0,I<D?g.charCodeAt(I++):0),E=m>>2,k=(3&m)<<4|w>>4,N=1<O?(15&w)<<2|_>>6:64,A=2<O?63&_:64,C.push(f.charAt(E)+f.charAt(k)+f.charAt(N)+f.charAt(A));return C.join("")},a.decode=function(g){var m,w,_,E,k,N,A=0,C=0,I="data:";if(g.substr(0,I.length)===I)throw new Error("Invalid base64 input, it looks like a data url.");var D,O=3*(g=g.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(g.charAt(g.length-1)===f.charAt(64)&&O--,g.charAt(g.length-2)===f.charAt(64)&&O--,O%1!=0)throw new Error("Invalid base64 input, bad content length.");for(D=u.uint8array?new Uint8Array(0|O):new Array(0|O);A<g.length;)m=f.indexOf(g.charAt(A++))<<2|(E=f.indexOf(g.charAt(A++)))>>4,w=(15&E)<<4|(k=f.indexOf(g.charAt(A++)))>>2,_=(3&k)<<6|(N=f.indexOf(g.charAt(A++))),D[C++]=m,k!==64&&(D[C++]=w),N!==64&&(D[C++]=_);return D}},{"./support":30,"./utils":32}],2:[function(t,n,a){var i=t("./external"),u=t("./stream/DataWorker"),f=t("./stream/Crc32Probe"),g=t("./stream/DataLengthProbe");function m(w,_,E,k,N){this.compressedSize=w,this.uncompressedSize=_,this.crc32=E,this.compression=k,this.compressedContent=N}m.prototype={getContentWorker:function(){var w=new u(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),_=this;return w.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),w},getCompressedWorker:function(){return new u(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(w,_,E){return w.pipe(new f).pipe(new g("uncompressedSize")).pipe(_.compressWorker(E)).pipe(new g("compressedSize")).withStreamInfo("compression",_)},n.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,a){var i=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,a){var i=t("./utils"),u=(function(){for(var f,g=[],m=0;m<256;m++){f=m;for(var w=0;w<8;w++)f=1&f?3988292384^f>>>1:f>>>1;g[m]=f}return g})();n.exports=function(f,g){return f!==void 0&&f.length?i.getTypeOf(f)!=="string"?(function(m,w,_,E){var k=u,N=E+_;m^=-1;for(var A=E;A<N;A++)m=m>>>8^k[255&(m^w[A])];return-1^m})(0|g,f,f.length,0):(function(m,w,_,E){var k=u,N=E+_;m^=-1;for(var A=E;A<N;A++)m=m>>>8^k[255&(m^w.charCodeAt(A))];return-1^m})(0|g,f,f.length,0):0}},{"./utils":32}],5:[function(t,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,n,a){var i=null;i=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:i}},{lie:37}],7:[function(t,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=t("pako"),f=t("./utils"),g=t("./stream/GenericWorker"),m=i?"uint8array":"array";function w(_,E){g.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=E,this.meta={}}a.magic="\b\0",f.inherits(w,g),w.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(f.transformTo(m,_.data),!1)},w.prototype.flush=function(){g.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},w.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this._pako=null},w.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(E){_.push({data:E,meta:_.meta})}},a.compressWorker=function(_){return new w("Deflate",_)},a.uncompressWorker=function(){return new w("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,a){function i(k,N){var A,C="";for(A=0;A<N;A++)C+=String.fromCharCode(255&k),k>>>=8;return C}function u(k,N,A,C,I,D){var O,B,U=k.file,X=k.compression,F=D!==m.utf8encode,Y=f.transformTo("string",D(U.name)),H=f.transformTo("string",m.utf8encode(U.name)),ce=U.comment,J=f.transformTo("string",D(ce)),V=f.transformTo("string",m.utf8encode(ce)),xe=H.length!==U.name.length,W=V.length!==ce.length,ne="",be="",fe="",Ve=U.dir,ge=U.date,We={crc32:0,compressedSize:0,uncompressedSize:0};N&&!A||(We.crc32=k.crc32,We.compressedSize=k.compressedSize,We.uncompressedSize=k.uncompressedSize);var re=0;N&&(re|=8),F||!xe&&!W||(re|=2048);var L=0,q=0;Ve&&(L|=16),I==="UNIX"?(q=798,L|=(function(Z,pe){var Le=Z;return Z||(Le=pe?16893:33204),(65535&Le)<<16})(U.unixPermissions,Ve)):(q=20,L|=(function(Z){return 63&(Z||0)})(U.dosPermissions)),O=ge.getUTCHours(),O<<=6,O|=ge.getUTCMinutes(),O<<=5,O|=ge.getUTCSeconds()/2,B=ge.getUTCFullYear()-1980,B<<=4,B|=ge.getUTCMonth()+1,B<<=5,B|=ge.getUTCDate(),xe&&(be=i(1,1)+i(w(Y),4)+H,ne+="up"+i(be.length,2)+be),W&&(fe=i(1,1)+i(w(J),4)+V,ne+="uc"+i(fe.length,2)+fe);var P="";return P+=`
\0`,P+=i(re,2),P+=X.magic,P+=i(O,2),P+=i(B,2),P+=i(We.crc32,4),P+=i(We.compressedSize,4),P+=i(We.uncompressedSize,4),P+=i(Y.length,2),P+=i(ne.length,2),{fileRecord:_.LOCAL_FILE_HEADER+P+Y+ne,dirRecord:_.CENTRAL_FILE_HEADER+i(q,2)+P+i(J.length,2)+"\0\0\0\0"+i(L,4)+i(C,4)+Y+ne+J}}var f=t("../utils"),g=t("../stream/GenericWorker"),m=t("../utf8"),w=t("../crc32"),_=t("../signature");function E(k,N,A,C){g.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=N,this.zipPlatform=A,this.encodeFileName=C,this.streamFiles=k,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}f.inherits(E,g),E.prototype.push=function(k){var N=k.meta.percent||0,A=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(k):(this.bytesWritten+=k.data.length,g.prototype.push.call(this,{data:k.data,meta:{currentFile:this.currentFile,percent:A?(N+100*(A-C-1))/A:100}}))},E.prototype.openedSource=function(k){this.currentSourceOffset=this.bytesWritten,this.currentFile=k.file.name;var N=this.streamFiles&&!k.file.dir;if(N){var A=u(k,N,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:A.fileRecord,meta:{percent:0}})}else this.accumulate=!0},E.prototype.closedSource=function(k){this.accumulate=!1;var N=this.streamFiles&&!k.file.dir,A=u(k,N,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(A.dirRecord),N)this.push({data:(function(C){return _.DATA_DESCRIPTOR+i(C.crc32,4)+i(C.compressedSize,4)+i(C.uncompressedSize,4)})(k),meta:{percent:100}});else for(this.push({data:A.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},E.prototype.flush=function(){for(var k=this.bytesWritten,N=0;N<this.dirRecords.length;N++)this.push({data:this.dirRecords[N],meta:{percent:100}});var A=this.bytesWritten-k,C=(function(I,D,O,B,U){var X=f.transformTo("string",U(B));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(I,2)+i(I,2)+i(D,4)+i(O,4)+i(X.length,2)+X})(this.dirRecords.length,A,k,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},E.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},E.prototype.registerPrevious=function(k){this._sources.push(k);var N=this;return k.on("data",function(A){N.processChunk(A)}),k.on("end",function(){N.closedSource(N.previous.streamInfo),N._sources.length?N.prepareNextSource():N.end()}),k.on("error",function(A){N.error(A)}),this},E.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},E.prototype.error=function(k){var N=this._sources;if(!g.prototype.error.call(this,k))return!1;for(var A=0;A<N.length;A++)try{N[A].error(k)}catch{}return!0},E.prototype.lock=function(){g.prototype.lock.call(this);for(var k=this._sources,N=0;N<k.length;N++)k[N].lock()},n.exports=E},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,a){var i=t("../compressions"),u=t("./ZipFileWorker");a.generateWorker=function(f,g,m){var w=new u(g.streamFiles,m,g.platform,g.encodeFileName),_=0;try{f.forEach(function(E,k){_++;var N=(function(D,O){var B=D||O,U=i[B];if(!U)throw new Error(B+" is not a valid compression method !");return U})(k.options.compression,g.compression),A=k.options.compressionOptions||g.compressionOptions||{},C=k.dir,I=k.date;k._compressWorker(N,A).withStreamInfo("file",{name:E,dir:C,date:I,comment:k.comment||"",unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions}).pipe(w)}),w.entriesCount=_}catch(E){w.error(E)}return w}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new i;for(var f in this)typeof this[f]!="function"&&(u[f]=this[f]);return u}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(u,f){return new i().loadAsync(u,f)},i.external=t("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,a){var i=t("./utils"),u=t("./external"),f=t("./utf8"),g=t("./zipEntries"),m=t("./stream/Crc32Probe"),w=t("./nodejsUtils");function _(E){return new u.Promise(function(k,N){var A=E.decompressed.getContentWorker().pipe(new m);A.on("error",function(C){N(C)}).on("end",function(){A.streamInfo.crc32!==E.decompressed.crc32?N(new Error("Corrupted zip : CRC32 mismatch")):k()}).resume()})}n.exports=function(E,k){var N=this;return k=i.extend(k||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:f.utf8decode}),w.isNode&&w.isStream(E)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",E,!0,k.optimizedBinaryString,k.base64).then(function(A){var C=new g(k);return C.load(A),C}).then(function(A){var C=[u.Promise.resolve(A)],I=A.files;if(k.checkCRC32)for(var D=0;D<I.length;D++)C.push(_(I[D]));return u.Promise.all(C)}).then(function(A){for(var C=A.shift(),I=C.files,D=0;D<I.length;D++){var O=I[D],B=O.fileNameStr,U=i.resolve(O.fileNameStr);N.file(U,O.decompressed,{binary:!0,optimizedBinaryString:!0,date:O.date,dir:O.dir,comment:O.fileCommentStr.length?O.fileCommentStr:null,unixPermissions:O.unixPermissions,dosPermissions:O.dosPermissions,createFolders:k.createFolders}),O.dir||(N.file(U).unsafeOriginalName=B)}return C.zipComment.length&&(N.comment=C.zipComment),N})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,a){var i=t("../utils"),u=t("../stream/GenericWorker");function f(g,m){u.call(this,"Nodejs stream input adapter for "+g),this._upstreamEnded=!1,this._bindStream(m)}i.inherits(f,u),f.prototype._bindStream=function(g){var m=this;(this._stream=g).pause(),g.on("data",function(w){m.push({data:w,meta:{percent:0}})}).on("error",function(w){m.isPaused?this.generatedError=w:m.error(w)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},f.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},f.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=f},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,a){var i=t("readable-stream").Readable;function u(f,g,m){i.call(this,g),this._helper=f;var w=this;f.on("data",function(_,E){w.push(_)||w._helper.pause(),m&&m(E)}).on("error",function(_){w.emit("error",_)}).on("end",function(){w.push(null)})}t("../utils").inherits(u,i),u.prototype._read=function(){this._helper.resume()},n.exports=u},{"../utils":32,"readable-stream":16}],14:[function(t,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,u);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,u)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var u=new Buffer(i);return u.fill(0),u},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,n,a){function i(U,X,F){var Y,H=f.getTypeOf(X),ce=f.extend(F||{},w);ce.date=ce.date||new Date,ce.compression!==null&&(ce.compression=ce.compression.toUpperCase()),typeof ce.unixPermissions=="string"&&(ce.unixPermissions=parseInt(ce.unixPermissions,8)),ce.unixPermissions&&16384&ce.unixPermissions&&(ce.dir=!0),ce.dosPermissions&&16&ce.dosPermissions&&(ce.dir=!0),ce.dir&&(U=I(U)),ce.createFolders&&(Y=C(U))&&D.call(this,Y,!0);var J=H==="string"&&ce.binary===!1&&ce.base64===!1;F&&F.binary!==void 0||(ce.binary=!J),(X instanceof _&&X.uncompressedSize===0||ce.dir||!X||X.length===0)&&(ce.base64=!1,ce.binary=!0,X="",ce.compression="STORE",H="string");var V=null;V=X instanceof _||X instanceof g?X:N.isNode&&N.isStream(X)?new A(U,X):f.prepareContent(U,X,ce.binary,ce.optimizedBinaryString,ce.base64);var xe=new E(U,V,ce);this.files[U]=xe}var u=t("./utf8"),f=t("./utils"),g=t("./stream/GenericWorker"),m=t("./stream/StreamHelper"),w=t("./defaults"),_=t("./compressedObject"),E=t("./zipObject"),k=t("./generate"),N=t("./nodejsUtils"),A=t("./nodejs/NodejsStreamInputAdapter"),C=function(U){U.slice(-1)==="/"&&(U=U.substring(0,U.length-1));var X=U.lastIndexOf("/");return 0<X?U.substring(0,X):""},I=function(U){return U.slice(-1)!=="/"&&(U+="/"),U},D=function(U,X){return X=X!==void 0?X:w.createFolders,U=I(U),this.files[U]||i.call(this,U,null,{dir:!0,createFolders:X}),this.files[U]};function O(U){return Object.prototype.toString.call(U)==="[object RegExp]"}var B={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(U){var X,F,Y;for(X in this.files)Y=this.files[X],(F=X.slice(this.root.length,X.length))&&X.slice(0,this.root.length)===this.root&&U(F,Y)},filter:function(U){var X=[];return this.forEach(function(F,Y){U(F,Y)&&X.push(Y)}),X},file:function(U,X,F){if(arguments.length!==1)return U=this.root+U,i.call(this,U,X,F),this;if(O(U)){var Y=U;return this.filter(function(ce,J){return!J.dir&&Y.test(ce)})}var H=this.files[this.root+U];return H&&!H.dir?H:null},folder:function(U){if(!U)return this;if(O(U))return this.filter(function(H,ce){return ce.dir&&U.test(H)});var X=this.root+U,F=D.call(this,X),Y=this.clone();return Y.root=F.name,Y},remove:function(U){U=this.root+U;var X=this.files[U];if(X||(U.slice(-1)!=="/"&&(U+="/"),X=this.files[U]),X&&!X.dir)delete this.files[U];else for(var F=this.filter(function(H,ce){return ce.name.slice(0,U.length)===U}),Y=0;Y<F.length;Y++)delete this.files[F[Y].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(U){var X,F={};try{if((F=f.extend(U||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=F.type.toLowerCase(),F.compression=F.compression.toUpperCase(),F.type==="binarystring"&&(F.type="string"),!F.type)throw new Error("No output type specified.");f.checkSupport(F.type),F.platform!=="darwin"&&F.platform!=="freebsd"&&F.platform!=="linux"&&F.platform!=="sunos"||(F.platform="UNIX"),F.platform==="win32"&&(F.platform="DOS");var Y=F.comment||this.comment||"";X=k.generateWorker(this,F,Y)}catch(H){(X=new g("error")).error(H)}return new m(X,F.type||"string",F.mimeType)},generateAsync:function(U,X){return this.generateInternalStream(U).accumulate(X)},generateNodeStream:function(U,X){return(U=U||{}).type||(U.type="nodebuffer"),this.generateInternalStream(U).toNodejsStream(X)}};n.exports=B},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,a){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,a){var i=t("./DataReader");function u(f){i.call(this,f);for(var g=0;g<this.data.length;g++)f[g]=255&f[g]}t("../utils").inherits(u,i),u.prototype.byteAt=function(f){return this.data[this.zero+f]},u.prototype.lastIndexOfSignature=function(f){for(var g=f.charCodeAt(0),m=f.charCodeAt(1),w=f.charCodeAt(2),_=f.charCodeAt(3),E=this.length-4;0<=E;--E)if(this.data[E]===g&&this.data[E+1]===m&&this.data[E+2]===w&&this.data[E+3]===_)return E-this.zero;return-1},u.prototype.readAndCheckSignature=function(f){var g=f.charCodeAt(0),m=f.charCodeAt(1),w=f.charCodeAt(2),_=f.charCodeAt(3),E=this.readData(4);return g===E[0]&&m===E[1]&&w===E[2]&&_===E[3]},u.prototype.readData=function(f){if(this.checkOffset(f),f===0)return[];var g=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,g},n.exports=u},{"../utils":32,"./DataReader":18}],18:[function(t,n,a){var i=t("../utils");function u(f){this.data=f,this.length=f.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(f){this.checkIndex(this.index+f)},checkIndex:function(f){if(this.length<this.zero+f||f<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+f+"). Corrupted zip ?")},setIndex:function(f){this.checkIndex(f),this.index=f},skip:function(f){this.setIndex(this.index+f)},byteAt:function(){},readInt:function(f){var g,m=0;for(this.checkOffset(f),g=this.index+f-1;g>=this.index;g--)m=(m<<8)+this.byteAt(g);return this.index+=f,m},readString:function(f){return i.transformTo("string",this.readData(f))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var f=this.readInt(4);return new Date(Date.UTC(1980+(f>>25&127),(f>>21&15)-1,f>>16&31,f>>11&31,f>>5&63,(31&f)<<1))}},n.exports=u},{"../utils":32}],19:[function(t,n,a){var i=t("./Uint8ArrayReader");function u(f){i.call(this,f)}t("../utils").inherits(u,i),u.prototype.readData=function(f){this.checkOffset(f);var g=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,g},n.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,a){var i=t("./DataReader");function u(f){i.call(this,f)}t("../utils").inherits(u,i),u.prototype.byteAt=function(f){return this.data.charCodeAt(this.zero+f)},u.prototype.lastIndexOfSignature=function(f){return this.data.lastIndexOf(f)-this.zero},u.prototype.readAndCheckSignature=function(f){return f===this.readData(4)},u.prototype.readData=function(f){this.checkOffset(f);var g=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,g},n.exports=u},{"../utils":32,"./DataReader":18}],21:[function(t,n,a){var i=t("./ArrayReader");function u(f){i.call(this,f)}t("../utils").inherits(u,i),u.prototype.readData=function(f){if(this.checkOffset(f),f===0)return new Uint8Array(0);var g=this.data.subarray(this.zero+this.index,this.zero+this.index+f);return this.index+=f,g},n.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,a){var i=t("../utils"),u=t("../support"),f=t("./ArrayReader"),g=t("./StringReader"),m=t("./NodeBufferReader"),w=t("./Uint8ArrayReader");n.exports=function(_){var E=i.getTypeOf(_);return i.checkSupport(E),E!=="string"||u.uint8array?E==="nodebuffer"?new m(_):u.uint8array?new w(i.transformTo("uint8array",_)):new f(i.transformTo("array",_)):new g(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,a){var i=t("./GenericWorker"),u=t("../utils");function f(g){i.call(this,"ConvertWorker to "+g),this.destType=g}u.inherits(f,i),f.prototype.processChunk=function(g){this.push({data:u.transformTo(this.destType,g.data),meta:g.meta})},n.exports=f},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,a){var i=t("./GenericWorker"),u=t("../crc32");function f(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(f,i),f.prototype.processChunk=function(g){this.streamInfo.crc32=u(g.data,this.streamInfo.crc32||0),this.push(g)},n.exports=f},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,a){var i=t("../utils"),u=t("./GenericWorker");function f(g){u.call(this,"DataLengthProbe for "+g),this.propName=g,this.withStreamInfo(g,0)}i.inherits(f,u),f.prototype.processChunk=function(g){if(g){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+g.data.length}u.prototype.processChunk.call(this,g)},n.exports=f},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,a){var i=t("../utils"),u=t("./GenericWorker");function f(g){u.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,g.then(function(w){m.dataIsReady=!0,m.data=w,m.max=w&&w.length||0,m.type=i.getTypeOf(w),m.isPaused||m._tickAndRepeat()},function(w){m.error(w)})}i.inherits(f,u),f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},f.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},f.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},f.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var g=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":g=this.data.substring(this.index,m);break;case"uint8array":g=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":g=this.data.slice(this.index,m)}return this.index=m,this.push({data:g,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=f},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,a){function i(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,f){return this._listeners[u].push(f),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,f){if(this._listeners[u])for(var g=0;g<this._listeners[u].length;g++)this._listeners[u][g].call(this,f)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var f=this;return u.on("data",function(g){f.processChunk(g)}),u.on("end",function(){f.end()}),u.on("error",function(g){f.error(g)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,f){return this.extraStreamInfo[u]=f,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},n.exports=i},{}],29:[function(t,n,a){var i=t("../utils"),u=t("./ConvertWorker"),f=t("./GenericWorker"),g=t("../base64"),m=t("../support"),w=t("../external"),_=null;if(m.nodestream)try{_=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function E(N,A){return new w.Promise(function(C,I){var D=[],O=N._internalType,B=N._outputType,U=N._mimeType;N.on("data",function(X,F){D.push(X),A&&A(F)}).on("error",function(X){D=[],I(X)}).on("end",function(){try{var X=(function(F,Y,H){switch(F){case"blob":return i.newBlob(i.transformTo("arraybuffer",Y),H);case"base64":return g.encode(Y);default:return i.transformTo(F,Y)}})(B,(function(F,Y){var H,ce=0,J=null,V=0;for(H=0;H<Y.length;H++)V+=Y[H].length;switch(F){case"string":return Y.join("");case"array":return Array.prototype.concat.apply([],Y);case"uint8array":for(J=new Uint8Array(V),H=0;H<Y.length;H++)J.set(Y[H],ce),ce+=Y[H].length;return J;case"nodebuffer":return Buffer.concat(Y);default:throw new Error("concat : unsupported type '"+F+"'")}})(O,D),U);C(X)}catch(F){I(F)}D=[]}).resume()})}function k(N,A,C){var I=A;switch(A){case"blob":case"arraybuffer":I="uint8array";break;case"base64":I="string"}try{this._internalType=I,this._outputType=A,this._mimeType=C,i.checkSupport(I),this._worker=N.pipe(new u(I)),N.lock()}catch(D){this._worker=new f("error"),this._worker.error(D)}}k.prototype={accumulate:function(N){return E(this,N)},on:function(N,A){var C=this;return N==="data"?this._worker.on(N,function(I){A.call(C,I.data,I.meta)}):this._worker.on(N,function(){i.delay(A,arguments,C)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(N){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},N)}},n.exports=k},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(i),a.blob=u.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,a){for(var i=t("./utils"),u=t("./support"),f=t("./nodejsUtils"),g=t("./stream/GenericWorker"),m=new Array(256),w=0;w<256;w++)m[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;m[254]=m[254]=1;function _(){g.call(this,"utf-8 decode"),this.leftOver=null}function E(){g.call(this,"utf-8 encode")}a.utf8encode=function(k){return u.nodebuffer?f.newBufferFrom(k,"utf-8"):(function(N){var A,C,I,D,O,B=N.length,U=0;for(D=0;D<B;D++)(64512&(C=N.charCodeAt(D)))==55296&&D+1<B&&(64512&(I=N.charCodeAt(D+1)))==56320&&(C=65536+(C-55296<<10)+(I-56320),D++),U+=C<128?1:C<2048?2:C<65536?3:4;for(A=u.uint8array?new Uint8Array(U):new Array(U),D=O=0;O<U;D++)(64512&(C=N.charCodeAt(D)))==55296&&D+1<B&&(64512&(I=N.charCodeAt(D+1)))==56320&&(C=65536+(C-55296<<10)+(I-56320),D++),C<128?A[O++]=C:(C<2048?A[O++]=192|C>>>6:(C<65536?A[O++]=224|C>>>12:(A[O++]=240|C>>>18,A[O++]=128|C>>>12&63),A[O++]=128|C>>>6&63),A[O++]=128|63&C);return A})(k)},a.utf8decode=function(k){return u.nodebuffer?i.transformTo("nodebuffer",k).toString("utf-8"):(function(N){var A,C,I,D,O=N.length,B=new Array(2*O);for(A=C=0;A<O;)if((I=N[A++])<128)B[C++]=I;else if(4<(D=m[I]))B[C++]=65533,A+=D-1;else{for(I&=D===2?31:D===3?15:7;1<D&&A<O;)I=I<<6|63&N[A++],D--;1<D?B[C++]=65533:I<65536?B[C++]=I:(I-=65536,B[C++]=55296|I>>10&1023,B[C++]=56320|1023&I)}return B.length!==C&&(B.subarray?B=B.subarray(0,C):B.length=C),i.applyFromCharCode(B)})(k=i.transformTo(u.uint8array?"uint8array":"array",k))},i.inherits(_,g),_.prototype.processChunk=function(k){var N=i.transformTo(u.uint8array?"uint8array":"array",k.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var A=N;(N=new Uint8Array(A.length+this.leftOver.length)).set(this.leftOver,0),N.set(A,this.leftOver.length)}else N=this.leftOver.concat(N);this.leftOver=null}var C=(function(D,O){var B;for((O=O||D.length)>D.length&&(O=D.length),B=O-1;0<=B&&(192&D[B])==128;)B--;return B<0||B===0?O:B+m[D[B]]>O?B:O})(N),I=N;C!==N.length&&(u.uint8array?(I=N.subarray(0,C),this.leftOver=N.subarray(C,N.length)):(I=N.slice(0,C),this.leftOver=N.slice(C,N.length))),this.push({data:a.utf8decode(I),meta:k.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=_,i.inherits(E,g),E.prototype.processChunk=function(k){this.push({data:a.utf8encode(k.data),meta:k.meta})},a.Utf8EncodeWorker=E},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,a){var i=t("./support"),u=t("./base64"),f=t("./nodejsUtils"),g=t("./external");function m(A){return A}function w(A,C){for(var I=0;I<A.length;++I)C[I]=255&A.charCodeAt(I);return C}t("setimmediate"),a.newBlob=function(A,C){a.checkSupport("blob");try{return new Blob([A],{type:C})}catch{try{var I=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return I.append(A),I.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(A,C,I){var D=[],O=0,B=A.length;if(B<=I)return String.fromCharCode.apply(null,A);for(;O<B;)C==="array"||C==="nodebuffer"?D.push(String.fromCharCode.apply(null,A.slice(O,Math.min(O+I,B)))):D.push(String.fromCharCode.apply(null,A.subarray(O,Math.min(O+I,B)))),O+=I;return D.join("")},stringifyByChar:function(A){for(var C="",I=0;I<A.length;I++)C+=String.fromCharCode(A[I]);return C},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,f.allocBuffer(1)).length===1}catch{return!1}})()}};function E(A){var C=65536,I=a.getTypeOf(A),D=!0;if(I==="uint8array"?D=_.applyCanBeUsed.uint8array:I==="nodebuffer"&&(D=_.applyCanBeUsed.nodebuffer),D)for(;1<C;)try{return _.stringifyByChunk(A,I,C)}catch{C=Math.floor(C/2)}return _.stringifyByChar(A)}function k(A,C){for(var I=0;I<A.length;I++)C[I]=A[I];return C}a.applyFromCharCode=E;var N={};N.string={string:m,array:function(A){return w(A,new Array(A.length))},arraybuffer:function(A){return N.string.uint8array(A).buffer},uint8array:function(A){return w(A,new Uint8Array(A.length))},nodebuffer:function(A){return w(A,f.allocBuffer(A.length))}},N.array={string:E,array:m,arraybuffer:function(A){return new Uint8Array(A).buffer},uint8array:function(A){return new Uint8Array(A)},nodebuffer:function(A){return f.newBufferFrom(A)}},N.arraybuffer={string:function(A){return E(new Uint8Array(A))},array:function(A){return k(new Uint8Array(A),new Array(A.byteLength))},arraybuffer:m,uint8array:function(A){return new Uint8Array(A)},nodebuffer:function(A){return f.newBufferFrom(new Uint8Array(A))}},N.uint8array={string:E,array:function(A){return k(A,new Array(A.length))},arraybuffer:function(A){return A.buffer},uint8array:m,nodebuffer:function(A){return f.newBufferFrom(A)}},N.nodebuffer={string:E,array:function(A){return k(A,new Array(A.length))},arraybuffer:function(A){return N.nodebuffer.uint8array(A).buffer},uint8array:function(A){return k(A,new Uint8Array(A.length))},nodebuffer:m},a.transformTo=function(A,C){if(C=C||"",!A)return C;a.checkSupport(A);var I=a.getTypeOf(C);return N[I][A](C)},a.resolve=function(A){for(var C=A.split("/"),I=[],D=0;D<C.length;D++){var O=C[D];O==="."||O===""&&D!==0&&D!==C.length-1||(O===".."?I.pop():I.push(O))}return I.join("/")},a.getTypeOf=function(A){return typeof A=="string"?"string":Object.prototype.toString.call(A)==="[object Array]"?"array":i.nodebuffer&&f.isBuffer(A)?"nodebuffer":i.uint8array&&A instanceof Uint8Array?"uint8array":i.arraybuffer&&A instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(A){if(!i[A.toLowerCase()])throw new Error(A+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(A){var C,I,D="";for(I=0;I<(A||"").length;I++)D+="\\x"+((C=A.charCodeAt(I))<16?"0":"")+C.toString(16).toUpperCase();return D},a.delay=function(A,C,I){setImmediate(function(){A.apply(I||null,C||[])})},a.inherits=function(A,C){function I(){}I.prototype=C.prototype,A.prototype=new I},a.extend=function(){var A,C,I={};for(A=0;A<arguments.length;A++)for(C in arguments[A])Object.prototype.hasOwnProperty.call(arguments[A],C)&&I[C]===void 0&&(I[C]=arguments[A][C]);return I},a.prepareContent=function(A,C,I,D,O){return g.Promise.resolve(C).then(function(B){return i.blob&&(B instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(B))!==-1)&&typeof FileReader<"u"?new g.Promise(function(U,X){var F=new FileReader;F.onload=function(Y){U(Y.target.result)},F.onerror=function(Y){X(Y.target.error)},F.readAsArrayBuffer(B)}):B}).then(function(B){var U=a.getTypeOf(B);return U?(U==="arraybuffer"?B=a.transformTo("uint8array",B):U==="string"&&(O?B=u.decode(B):I&&D!==!0&&(B=(function(X){return w(X,i.uint8array?new Uint8Array(X.length):new Array(X.length))})(B))),B):g.Promise.reject(new Error("Can't read the data of '"+A+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,a){var i=t("./reader/readerFor"),u=t("./utils"),f=t("./signature"),g=t("./zipEntry"),m=t("./support");function w(_){this.files=[],this.loadOptions=_}w.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var E=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(E)+", expected "+u.pretty(_)+")")}},isSignature:function(_,E){var k=this.reader.index;this.reader.setIndex(_);var N=this.reader.readString(4)===E;return this.reader.setIndex(k),N},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),E=m.uint8array?"uint8array":"array",k=u.transformTo(E,_);this.zipComment=this.loadOptions.decodeFileName(k)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,E,k,N=this.zip64EndOfCentralSize-44;0<N;)_=this.reader.readInt(2),E=this.reader.readInt(4),k=this.reader.readData(E),this.zip64ExtensibleData[_]={id:_,length:E,value:k}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,E;for(_=0;_<this.files.length;_++)E=this.files[_],this.reader.setIndex(E.localHeaderOffset),this.checkSignature(f.LOCAL_FILE_HEADER),E.readLocalPart(this.reader),E.handleUTF8(),E.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(f.CENTRAL_FILE_HEADER);)(_=new g({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(f.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,f.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var E=_;if(this.checkSignature(f.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,f.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var k=this.centralDirOffset+this.centralDirSize;this.zip64&&(k+=20,k+=12+this.zip64EndOfCentralSize);var N=E-k;if(0<N)this.isSignature(E,f.CENTRAL_FILE_HEADER)||(this.reader.zero=N);else if(N<0)throw new Error("Corrupted zip: missing "+Math.abs(N)+" bytes.")},prepareReader:function(_){this.reader=i(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=w},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,a){var i=t("./reader/readerFor"),u=t("./utils"),f=t("./compressedObject"),g=t("./crc32"),m=t("./utf8"),w=t("./compressions"),_=t("./support");function E(k,N){this.options=k,this.loadOptions=N}E.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(k){var N,A;if(k.skip(22),this.fileNameLength=k.readInt(2),A=k.readInt(2),this.fileName=k.readData(this.fileNameLength),k.skip(A),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((N=(function(C){for(var I in w)if(Object.prototype.hasOwnProperty.call(w,I)&&w[I].magic===C)return w[I];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new f(this.compressedSize,this.uncompressedSize,this.crc32,N,k.readData(this.compressedSize))},readCentralPart:function(k){this.versionMadeBy=k.readInt(2),k.skip(2),this.bitFlag=k.readInt(2),this.compressionMethod=k.readString(2),this.date=k.readDate(),this.crc32=k.readInt(4),this.compressedSize=k.readInt(4),this.uncompressedSize=k.readInt(4);var N=k.readInt(2);if(this.extraFieldsLength=k.readInt(2),this.fileCommentLength=k.readInt(2),this.diskNumberStart=k.readInt(2),this.internalFileAttributes=k.readInt(2),this.externalFileAttributes=k.readInt(4),this.localHeaderOffset=k.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");k.skip(N),this.readExtraFields(k),this.parseZIP64ExtraField(k),this.fileComment=k.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var k=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),k==0&&(this.dosPermissions=63&this.externalFileAttributes),k==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var k=i(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=k.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=k.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=k.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=k.readInt(4))}},readExtraFields:function(k){var N,A,C,I=k.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});k.index+4<I;)N=k.readInt(2),A=k.readInt(2),C=k.readData(A),this.extraFields[N]={id:N,length:A,value:C};k.setIndex(I)},handleUTF8:function(){var k=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var N=this.findExtraFieldUnicodePath();if(N!==null)this.fileNameStr=N;else{var A=u.transformTo(k,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(A)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var I=u.transformTo(k,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(I)}}},findExtraFieldUnicodePath:function(){var k=this.extraFields[28789];if(k){var N=i(k.value);return N.readInt(1)!==1||g(this.fileName)!==N.readInt(4)?null:m.utf8decode(N.readData(k.length-5))}return null},findExtraFieldUnicodeComment:function(){var k=this.extraFields[25461];if(k){var N=i(k.value);return N.readInt(1)!==1||g(this.fileComment)!==N.readInt(4)?null:m.utf8decode(N.readData(k.length-5))}return null}},n.exports=E},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,a){function i(N,A,C){this.name=N,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=A,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var u=t("./stream/StreamHelper"),f=t("./stream/DataWorker"),g=t("./utf8"),m=t("./compressedObject"),w=t("./stream/GenericWorker");i.prototype={internalStream:function(N){var A=null,C="string";try{if(!N)throw new Error("No output type specified.");var I=(C=N.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),A=this._decompressWorker();var D=!this._dataBinary;D&&!I&&(A=A.pipe(new g.Utf8EncodeWorker)),!D&&I&&(A=A.pipe(new g.Utf8DecodeWorker))}catch(O){(A=new w("error")).error(O)}return new u(A,C,"")},async:function(N,A){return this.internalStream(N).accumulate(A)},nodeStream:function(N,A){return this.internalStream(N||"nodebuffer").toNodejsStream(A)},_compressWorker:function(N,A){if(this._data instanceof m&&this._data.compression.magic===N.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new g.Utf8EncodeWorker)),m.createWorkerFrom(C,N,A)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof w?this._data:new f(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],E=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},k=0;k<_.length;k++)i.prototype[_[k]]=E;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,a){(function(i){var u,f,g=i.MutationObserver||i.WebKitMutationObserver;if(g){var m=0,w=new g(N),_=i.document.createTextNode("");w.observe(_,{characterData:!0}),u=function(){_.data=m=++m%2}}else if(i.setImmediate||i.MessageChannel===void 0)u="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var A=i.document.createElement("script");A.onreadystatechange=function(){N(),A.onreadystatechange=null,A.parentNode.removeChild(A),A=null},i.document.documentElement.appendChild(A)}:function(){setTimeout(N,0)};else{var E=new i.MessageChannel;E.port1.onmessage=N,u=function(){E.port2.postMessage(0)}}var k=[];function N(){var A,C;f=!0;for(var I=k.length;I;){for(C=k,k=[],A=-1;++A<I;)C[A]();I=k.length}f=!1}n.exports=function(A){k.push(A)!==1||f||u()}}).call(this,typeof ho<"u"?ho:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,a){var i=t("immediate");function u(){}var f={},g=["REJECTED"],m=["FULFILLED"],w=["PENDING"];function _(I){if(typeof I!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,I!==u&&A(this,I)}function E(I,D,O){this.promise=I,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof O=="function"&&(this.onRejected=O,this.callRejected=this.otherCallRejected)}function k(I,D,O){i(function(){var B;try{B=D(O)}catch(U){return f.reject(I,U)}B===I?f.reject(I,new TypeError("Cannot resolve promise with itself")):f.resolve(I,B)})}function N(I){var D=I&&I.then;if(I&&(typeof I=="object"||typeof I=="function")&&typeof D=="function")return function(){D.apply(I,arguments)}}function A(I,D){var O=!1;function B(F){O||(O=!0,f.reject(I,F))}function U(F){O||(O=!0,f.resolve(I,F))}var X=C(function(){D(U,B)});X.status==="error"&&B(X.value)}function C(I,D){var O={};try{O.value=I(D),O.status="success"}catch(B){O.status="error",O.value=B}return O}(n.exports=_).prototype.finally=function(I){if(typeof I!="function")return this;var D=this.constructor;return this.then(function(O){return D.resolve(I()).then(function(){return O})},function(O){return D.resolve(I()).then(function(){throw O})})},_.prototype.catch=function(I){return this.then(null,I)},_.prototype.then=function(I,D){if(typeof I!="function"&&this.state===m||typeof D!="function"&&this.state===g)return this;var O=new this.constructor(u);return this.state!==w?k(O,this.state===m?I:D,this.outcome):this.queue.push(new E(O,I,D)),O},E.prototype.callFulfilled=function(I){f.resolve(this.promise,I)},E.prototype.otherCallFulfilled=function(I){k(this.promise,this.onFulfilled,I)},E.prototype.callRejected=function(I){f.reject(this.promise,I)},E.prototype.otherCallRejected=function(I){k(this.promise,this.onRejected,I)},f.resolve=function(I,D){var O=C(N,D);if(O.status==="error")return f.reject(I,O.value);var B=O.value;if(B)A(I,B);else{I.state=m,I.outcome=D;for(var U=-1,X=I.queue.length;++U<X;)I.queue[U].callFulfilled(D)}return I},f.reject=function(I,D){I.state=g,I.outcome=D;for(var O=-1,B=I.queue.length;++O<B;)I.queue[O].callRejected(D);return I},_.resolve=function(I){return I instanceof this?I:f.resolve(new this(u),I)},_.reject=function(I){var D=new this(u);return f.reject(D,I)},_.all=function(I){var D=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=I.length,B=!1;if(!O)return this.resolve([]);for(var U=new Array(O),X=0,F=-1,Y=new this(u);++F<O;)H(I[F],F);return Y;function H(ce,J){D.resolve(ce).then(function(V){U[J]=V,++X!==O||B||(B=!0,f.resolve(Y,U))},function(V){B||(B=!0,f.reject(Y,V))})}},_.race=function(I){var D=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=I.length,B=!1;if(!O)return this.resolve([]);for(var U=-1,X=new this(u);++U<O;)F=I[U],D.resolve(F).then(function(Y){B||(B=!0,f.resolve(X,Y))},function(Y){B||(B=!0,f.reject(X,Y))});var F;return X}},{immediate:36}],38:[function(t,n,a){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,a){var i=t("./zlib/deflate"),u=t("./utils/common"),f=t("./utils/strings"),g=t("./zlib/messages"),m=t("./zlib/zstream"),w=Object.prototype.toString,_=0,E=-1,k=0,N=8;function A(I){if(!(this instanceof A))return new A(I);this.options=u.assign({level:E,method:N,chunkSize:16384,windowBits:15,memLevel:8,strategy:k,to:""},I||{});var D=this.options;D.raw&&0<D.windowBits?D.windowBits=-D.windowBits:D.gzip&&0<D.windowBits&&D.windowBits<16&&(D.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var O=i.deflateInit2(this.strm,D.level,D.method,D.windowBits,D.memLevel,D.strategy);if(O!==_)throw new Error(g[O]);if(D.header&&i.deflateSetHeader(this.strm,D.header),D.dictionary){var B;if(B=typeof D.dictionary=="string"?f.string2buf(D.dictionary):w.call(D.dictionary)==="[object ArrayBuffer]"?new Uint8Array(D.dictionary):D.dictionary,(O=i.deflateSetDictionary(this.strm,B))!==_)throw new Error(g[O]);this._dict_set=!0}}function C(I,D){var O=new A(D);if(O.push(I,!0),O.err)throw O.msg||g[O.err];return O.result}A.prototype.push=function(I,D){var O,B,U=this.strm,X=this.options.chunkSize;if(this.ended)return!1;B=D===~~D?D:D===!0?4:0,typeof I=="string"?U.input=f.string2buf(I):w.call(I)==="[object ArrayBuffer]"?U.input=new Uint8Array(I):U.input=I,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new u.Buf8(X),U.next_out=0,U.avail_out=X),(O=i.deflate(U,B))!==1&&O!==_)return this.onEnd(O),!(this.ended=!0);U.avail_out!==0&&(U.avail_in!==0||B!==4&&B!==2)||(this.options.to==="string"?this.onData(f.buf2binstring(u.shrinkBuf(U.output,U.next_out))):this.onData(u.shrinkBuf(U.output,U.next_out)))}while((0<U.avail_in||U.avail_out===0)&&O!==1);return B===4?(O=i.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===_):B!==2||(this.onEnd(_),!(U.avail_out=0))},A.prototype.onData=function(I){this.chunks.push(I)},A.prototype.onEnd=function(I){I===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=I,this.msg=this.strm.msg},a.Deflate=A,a.deflate=C,a.deflateRaw=function(I,D){return(D=D||{}).raw=!0,C(I,D)},a.gzip=function(I,D){return(D=D||{}).gzip=!0,C(I,D)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,a){var i=t("./zlib/inflate"),u=t("./utils/common"),f=t("./utils/strings"),g=t("./zlib/constants"),m=t("./zlib/messages"),w=t("./zlib/zstream"),_=t("./zlib/gzheader"),E=Object.prototype.toString;function k(A){if(!(this instanceof k))return new k(A);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},A||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||A&&A.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&(15&C.windowBits)==0&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var I=i.inflateInit2(this.strm,C.windowBits);if(I!==g.Z_OK)throw new Error(m[I]);this.header=new _,i.inflateGetHeader(this.strm,this.header)}function N(A,C){var I=new k(C);if(I.push(A,!0),I.err)throw I.msg||m[I.err];return I.result}k.prototype.push=function(A,C){var I,D,O,B,U,X,F=this.strm,Y=this.options.chunkSize,H=this.options.dictionary,ce=!1;if(this.ended)return!1;D=C===~~C?C:C===!0?g.Z_FINISH:g.Z_NO_FLUSH,typeof A=="string"?F.input=f.binstring2buf(A):E.call(A)==="[object ArrayBuffer]"?F.input=new Uint8Array(A):F.input=A,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new u.Buf8(Y),F.next_out=0,F.avail_out=Y),(I=i.inflate(F,g.Z_NO_FLUSH))===g.Z_NEED_DICT&&H&&(X=typeof H=="string"?f.string2buf(H):E.call(H)==="[object ArrayBuffer]"?new Uint8Array(H):H,I=i.inflateSetDictionary(this.strm,X)),I===g.Z_BUF_ERROR&&ce===!0&&(I=g.Z_OK,ce=!1),I!==g.Z_STREAM_END&&I!==g.Z_OK)return this.onEnd(I),!(this.ended=!0);F.next_out&&(F.avail_out!==0&&I!==g.Z_STREAM_END&&(F.avail_in!==0||D!==g.Z_FINISH&&D!==g.Z_SYNC_FLUSH)||(this.options.to==="string"?(O=f.utf8border(F.output,F.next_out),B=F.next_out-O,U=f.buf2string(F.output,O),F.next_out=B,F.avail_out=Y-B,B&&u.arraySet(F.output,F.output,O,B,0),this.onData(U)):this.onData(u.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&(ce=!0)}while((0<F.avail_in||F.avail_out===0)&&I!==g.Z_STREAM_END);return I===g.Z_STREAM_END&&(D=g.Z_FINISH),D===g.Z_FINISH?(I=i.inflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===g.Z_OK):D!==g.Z_SYNC_FLUSH||(this.onEnd(g.Z_OK),!(F.avail_out=0))},k.prototype.onData=function(A){this.chunks.push(A)},k.prototype.onEnd=function(A){A===g.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},a.Inflate=k,a.inflate=N,a.inflateRaw=function(A,C){return(C=C||{}).raw=!0,N(A,C)},a.ungzip=N},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(g){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var w=m.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var _ in w)w.hasOwnProperty(_)&&(g[_]=w[_])}}return g},a.shrinkBuf=function(g,m){return g.length===m?g:g.subarray?g.subarray(0,m):(g.length=m,g)};var u={arraySet:function(g,m,w,_,E){if(m.subarray&&g.subarray)g.set(m.subarray(w,w+_),E);else for(var k=0;k<_;k++)g[E+k]=m[w+k]},flattenChunks:function(g){var m,w,_,E,k,N;for(m=_=0,w=g.length;m<w;m++)_+=g[m].length;for(N=new Uint8Array(_),m=E=0,w=g.length;m<w;m++)k=g[m],N.set(k,E),E+=k.length;return N}},f={arraySet:function(g,m,w,_,E){for(var k=0;k<_;k++)g[E+k]=m[w+k]},flattenChunks:function(g){return[].concat.apply([],g)}};a.setTyped=function(g){g?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,u)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,f))},a.setTyped(i)},{}],42:[function(t,n,a){var i=t("./common"),u=!0,f=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f=!1}for(var g=new i.Buf8(256),m=0;m<256;m++)g[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function w(_,E){if(E<65537&&(_.subarray&&f||!_.subarray&&u))return String.fromCharCode.apply(null,i.shrinkBuf(_,E));for(var k="",N=0;N<E;N++)k+=String.fromCharCode(_[N]);return k}g[254]=g[254]=1,a.string2buf=function(_){var E,k,N,A,C,I=_.length,D=0;for(A=0;A<I;A++)(64512&(k=_.charCodeAt(A)))==55296&&A+1<I&&(64512&(N=_.charCodeAt(A+1)))==56320&&(k=65536+(k-55296<<10)+(N-56320),A++),D+=k<128?1:k<2048?2:k<65536?3:4;for(E=new i.Buf8(D),A=C=0;C<D;A++)(64512&(k=_.charCodeAt(A)))==55296&&A+1<I&&(64512&(N=_.charCodeAt(A+1)))==56320&&(k=65536+(k-55296<<10)+(N-56320),A++),k<128?E[C++]=k:(k<2048?E[C++]=192|k>>>6:(k<65536?E[C++]=224|k>>>12:(E[C++]=240|k>>>18,E[C++]=128|k>>>12&63),E[C++]=128|k>>>6&63),E[C++]=128|63&k);return E},a.buf2binstring=function(_){return w(_,_.length)},a.binstring2buf=function(_){for(var E=new i.Buf8(_.length),k=0,N=E.length;k<N;k++)E[k]=_.charCodeAt(k);return E},a.buf2string=function(_,E){var k,N,A,C,I=E||_.length,D=new Array(2*I);for(k=N=0;k<I;)if((A=_[k++])<128)D[N++]=A;else if(4<(C=g[A]))D[N++]=65533,k+=C-1;else{for(A&=C===2?31:C===3?15:7;1<C&&k<I;)A=A<<6|63&_[k++],C--;1<C?D[N++]=65533:A<65536?D[N++]=A:(A-=65536,D[N++]=55296|A>>10&1023,D[N++]=56320|1023&A)}return w(D,N)},a.utf8border=function(_,E){var k;for((E=E||_.length)>_.length&&(E=_.length),k=E-1;0<=k&&(192&_[k])==128;)k--;return k<0||k===0?E:k+g[_[k]]>E?k:E}},{"./common":41}],43:[function(t,n,a){n.exports=function(i,u,f,g){for(var m=65535&i|0,w=i>>>16&65535|0,_=0;f!==0;){for(f-=_=2e3<f?2e3:f;w=w+(m=m+u[g++]|0)|0,--_;);m%=65521,w%=65521}return m|w<<16|0}},{}],44:[function(t,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,a){var i=(function(){for(var u,f=[],g=0;g<256;g++){u=g;for(var m=0;m<8;m++)u=1&u?3988292384^u>>>1:u>>>1;f[g]=u}return f})();n.exports=function(u,f,g,m){var w=i,_=m+g;u^=-1;for(var E=m;E<_;E++)u=u>>>8^w[255&(u^f[E])];return-1^u}},{}],46:[function(t,n,a){var i,u=t("../utils/common"),f=t("./trees"),g=t("./adler32"),m=t("./crc32"),w=t("./messages"),_=0,E=4,k=0,N=-2,A=-1,C=4,I=2,D=8,O=9,B=286,U=30,X=19,F=2*B+1,Y=15,H=3,ce=258,J=ce+H+1,V=42,xe=113,W=1,ne=2,be=3,fe=4;function Ve(z,De){return z.msg=w[De],De}function ge(z){return(z<<1)-(4<z?9:0)}function We(z){for(var De=z.length;0<=--De;)z[De]=0}function re(z){var De=z.state,Te=De.pending;Te>z.avail_out&&(Te=z.avail_out),Te!==0&&(u.arraySet(z.output,De.pending_buf,De.pending_out,Te,z.next_out),z.next_out+=Te,De.pending_out+=Te,z.total_out+=Te,z.avail_out-=Te,De.pending-=Te,De.pending===0&&(De.pending_out=0))}function L(z,De){f._tr_flush_block(z,0<=z.block_start?z.block_start:-1,z.strstart-z.block_start,De),z.block_start=z.strstart,re(z.strm)}function q(z,De){z.pending_buf[z.pending++]=De}function P(z,De){z.pending_buf[z.pending++]=De>>>8&255,z.pending_buf[z.pending++]=255&De}function Z(z,De){var Te,le,de=z.max_chain_length,Ee=z.strstart,at=z.prev_length,Fe=z.nice_match,He=z.strstart>z.w_size-J?z.strstart-(z.w_size-J):0,je=z.window,Ke=z.w_mask,it=z.prev,qe=z.strstart+ce,Me=je[Ee+at-1],Xe=je[Ee+at];z.prev_length>=z.good_match&&(de>>=2),Fe>z.lookahead&&(Fe=z.lookahead);do if(je[(Te=De)+at]===Xe&&je[Te+at-1]===Me&&je[Te]===je[Ee]&&je[++Te]===je[Ee+1]){Ee+=2,Te++;do;while(je[++Ee]===je[++Te]&&je[++Ee]===je[++Te]&&je[++Ee]===je[++Te]&&je[++Ee]===je[++Te]&&je[++Ee]===je[++Te]&&je[++Ee]===je[++Te]&&je[++Ee]===je[++Te]&&je[++Ee]===je[++Te]&&Ee<qe);if(le=ce-(qe-Ee),Ee=qe-ce,at<le){if(z.match_start=De,Fe<=(at=le))break;Me=je[Ee+at-1],Xe=je[Ee+at]}}while((De=it[De&Ke])>He&&--de!=0);return at<=z.lookahead?at:z.lookahead}function pe(z){var De,Te,le,de,Ee,at,Fe,He,je,Ke,it=z.w_size;do{if(de=z.window_size-z.lookahead-z.strstart,z.strstart>=it+(it-J)){for(u.arraySet(z.window,z.window,it,it,0),z.match_start-=it,z.strstart-=it,z.block_start-=it,De=Te=z.hash_size;le=z.head[--De],z.head[De]=it<=le?le-it:0,--Te;);for(De=Te=it;le=z.prev[--De],z.prev[De]=it<=le?le-it:0,--Te;);de+=it}if(z.strm.avail_in===0)break;if(at=z.strm,Fe=z.window,He=z.strstart+z.lookahead,je=de,Ke=void 0,Ke=at.avail_in,je<Ke&&(Ke=je),Te=Ke===0?0:(at.avail_in-=Ke,u.arraySet(Fe,at.input,at.next_in,Ke,He),at.state.wrap===1?at.adler=g(at.adler,Fe,Ke,He):at.state.wrap===2&&(at.adler=m(at.adler,Fe,Ke,He)),at.next_in+=Ke,at.total_in+=Ke,Ke),z.lookahead+=Te,z.lookahead+z.insert>=H)for(Ee=z.strstart-z.insert,z.ins_h=z.window[Ee],z.ins_h=(z.ins_h<<z.hash_shift^z.window[Ee+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[Ee+H-1])&z.hash_mask,z.prev[Ee&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=Ee,Ee++,z.insert--,!(z.lookahead+z.insert<H)););}while(z.lookahead<J&&z.strm.avail_in!==0)}function Le(z,De){for(var Te,le;;){if(z.lookahead<J){if(pe(z),z.lookahead<J&&De===_)return W;if(z.lookahead===0)break}if(Te=0,z.lookahead>=H&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+H-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),Te!==0&&z.strstart-Te<=z.w_size-J&&(z.match_length=Z(z,Te)),z.match_length>=H)if(le=f._tr_tally(z,z.strstart-z.match_start,z.match_length-H),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=H){for(z.match_length--;z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+H-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart,--z.match_length!=0;);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else le=f._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(le&&(L(z,!1),z.strm.avail_out===0))return W}return z.insert=z.strstart<H-1?z.strstart:H-1,De===E?(L(z,!0),z.strm.avail_out===0?be:fe):z.last_lit&&(L(z,!1),z.strm.avail_out===0)?W:ne}function Be(z,De){for(var Te,le,de;;){if(z.lookahead<J){if(pe(z),z.lookahead<J&&De===_)return W;if(z.lookahead===0)break}if(Te=0,z.lookahead>=H&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+H-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=H-1,Te!==0&&z.prev_length<z.max_lazy_match&&z.strstart-Te<=z.w_size-J&&(z.match_length=Z(z,Te),z.match_length<=5&&(z.strategy===1||z.match_length===H&&4096<z.strstart-z.match_start)&&(z.match_length=H-1)),z.prev_length>=H&&z.match_length<=z.prev_length){for(de=z.strstart+z.lookahead-H,le=f._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-H),z.lookahead-=z.prev_length-1,z.prev_length-=2;++z.strstart<=de&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+H-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),--z.prev_length!=0;);if(z.match_available=0,z.match_length=H-1,z.strstart++,le&&(L(z,!1),z.strm.avail_out===0))return W}else if(z.match_available){if((le=f._tr_tally(z,0,z.window[z.strstart-1]))&&L(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return W}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(le=f._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<H-1?z.strstart:H-1,De===E?(L(z,!0),z.strm.avail_out===0?be:fe):z.last_lit&&(L(z,!1),z.strm.avail_out===0)?W:ne}function Pe(z,De,Te,le,de){this.good_length=z,this.max_lazy=De,this.nice_length=Te,this.max_chain=le,this.func=de}function et(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=D,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*F),this.dyn_dtree=new u.Buf16(2*(2*U+1)),this.bl_tree=new u.Buf16(2*(2*X+1)),We(this.dyn_ltree),We(this.dyn_dtree),We(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(Y+1),this.heap=new u.Buf16(2*B+1),We(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*B+1),We(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ut(z){var De;return z&&z.state?(z.total_in=z.total_out=0,z.data_type=I,(De=z.state).pending=0,De.pending_out=0,De.wrap<0&&(De.wrap=-De.wrap),De.status=De.wrap?V:xe,z.adler=De.wrap===2?0:1,De.last_flush=_,f._tr_init(De),k):Ve(z,N)}function ve(z){var De=ut(z);return De===k&&(function(Te){Te.window_size=2*Te.w_size,We(Te.head),Te.max_lazy_match=i[Te.level].max_lazy,Te.good_match=i[Te.level].good_length,Te.nice_match=i[Te.level].nice_length,Te.max_chain_length=i[Te.level].max_chain,Te.strstart=0,Te.block_start=0,Te.lookahead=0,Te.insert=0,Te.match_length=Te.prev_length=H-1,Te.match_available=0,Te.ins_h=0})(z.state),De}function Ie(z,De,Te,le,de,Ee){if(!z)return N;var at=1;if(De===A&&(De=6),le<0?(at=0,le=-le):15<le&&(at=2,le-=16),de<1||O<de||Te!==D||le<8||15<le||De<0||9<De||Ee<0||C<Ee)return Ve(z,N);le===8&&(le=9);var Fe=new et;return(z.state=Fe).strm=z,Fe.wrap=at,Fe.gzhead=null,Fe.w_bits=le,Fe.w_size=1<<Fe.w_bits,Fe.w_mask=Fe.w_size-1,Fe.hash_bits=de+7,Fe.hash_size=1<<Fe.hash_bits,Fe.hash_mask=Fe.hash_size-1,Fe.hash_shift=~~((Fe.hash_bits+H-1)/H),Fe.window=new u.Buf8(2*Fe.w_size),Fe.head=new u.Buf16(Fe.hash_size),Fe.prev=new u.Buf16(Fe.w_size),Fe.lit_bufsize=1<<de+6,Fe.pending_buf_size=4*Fe.lit_bufsize,Fe.pending_buf=new u.Buf8(Fe.pending_buf_size),Fe.d_buf=1*Fe.lit_bufsize,Fe.l_buf=3*Fe.lit_bufsize,Fe.level=De,Fe.strategy=Ee,Fe.method=Te,ve(z)}i=[new Pe(0,0,0,0,function(z,De){var Te=65535;for(Te>z.pending_buf_size-5&&(Te=z.pending_buf_size-5);;){if(z.lookahead<=1){if(pe(z),z.lookahead===0&&De===_)return W;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var le=z.block_start+Te;if((z.strstart===0||z.strstart>=le)&&(z.lookahead=z.strstart-le,z.strstart=le,L(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-J&&(L(z,!1),z.strm.avail_out===0))return W}return z.insert=0,De===E?(L(z,!0),z.strm.avail_out===0?be:fe):(z.strstart>z.block_start&&(L(z,!1),z.strm.avail_out),W)}),new Pe(4,4,8,4,Le),new Pe(4,5,16,8,Le),new Pe(4,6,32,32,Le),new Pe(4,4,16,16,Be),new Pe(8,16,32,32,Be),new Pe(8,16,128,128,Be),new Pe(8,32,128,256,Be),new Pe(32,128,258,1024,Be),new Pe(32,258,258,4096,Be)],a.deflateInit=function(z,De){return Ie(z,De,D,15,8,0)},a.deflateInit2=Ie,a.deflateReset=ve,a.deflateResetKeep=ut,a.deflateSetHeader=function(z,De){return z&&z.state?z.state.wrap!==2?N:(z.state.gzhead=De,k):N},a.deflate=function(z,De){var Te,le,de,Ee;if(!z||!z.state||5<De||De<0)return z?Ve(z,N):N;if(le=z.state,!z.output||!z.input&&z.avail_in!==0||le.status===666&&De!==E)return Ve(z,z.avail_out===0?-5:N);if(le.strm=z,Te=le.last_flush,le.last_flush=De,le.status===V)if(le.wrap===2)z.adler=0,q(le,31),q(le,139),q(le,8),le.gzhead?(q(le,(le.gzhead.text?1:0)+(le.gzhead.hcrc?2:0)+(le.gzhead.extra?4:0)+(le.gzhead.name?8:0)+(le.gzhead.comment?16:0)),q(le,255&le.gzhead.time),q(le,le.gzhead.time>>8&255),q(le,le.gzhead.time>>16&255),q(le,le.gzhead.time>>24&255),q(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),q(le,255&le.gzhead.os),le.gzhead.extra&&le.gzhead.extra.length&&(q(le,255&le.gzhead.extra.length),q(le,le.gzhead.extra.length>>8&255)),le.gzhead.hcrc&&(z.adler=m(z.adler,le.pending_buf,le.pending,0)),le.gzindex=0,le.status=69):(q(le,0),q(le,0),q(le,0),q(le,0),q(le,0),q(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),q(le,3),le.status=xe);else{var at=D+(le.w_bits-8<<4)<<8;at|=(2<=le.strategy||le.level<2?0:le.level<6?1:le.level===6?2:3)<<6,le.strstart!==0&&(at|=32),at+=31-at%31,le.status=xe,P(le,at),le.strstart!==0&&(P(le,z.adler>>>16),P(le,65535&z.adler)),z.adler=1}if(le.status===69)if(le.gzhead.extra){for(de=le.pending;le.gzindex<(65535&le.gzhead.extra.length)&&(le.pending!==le.pending_buf_size||(le.gzhead.hcrc&&le.pending>de&&(z.adler=m(z.adler,le.pending_buf,le.pending-de,de)),re(z),de=le.pending,le.pending!==le.pending_buf_size));)q(le,255&le.gzhead.extra[le.gzindex]),le.gzindex++;le.gzhead.hcrc&&le.pending>de&&(z.adler=m(z.adler,le.pending_buf,le.pending-de,de)),le.gzindex===le.gzhead.extra.length&&(le.gzindex=0,le.status=73)}else le.status=73;if(le.status===73)if(le.gzhead.name){de=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>de&&(z.adler=m(z.adler,le.pending_buf,le.pending-de,de)),re(z),de=le.pending,le.pending===le.pending_buf_size)){Ee=1;break}Ee=le.gzindex<le.gzhead.name.length?255&le.gzhead.name.charCodeAt(le.gzindex++):0,q(le,Ee)}while(Ee!==0);le.gzhead.hcrc&&le.pending>de&&(z.adler=m(z.adler,le.pending_buf,le.pending-de,de)),Ee===0&&(le.gzindex=0,le.status=91)}else le.status=91;if(le.status===91)if(le.gzhead.comment){de=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>de&&(z.adler=m(z.adler,le.pending_buf,le.pending-de,de)),re(z),de=le.pending,le.pending===le.pending_buf_size)){Ee=1;break}Ee=le.gzindex<le.gzhead.comment.length?255&le.gzhead.comment.charCodeAt(le.gzindex++):0,q(le,Ee)}while(Ee!==0);le.gzhead.hcrc&&le.pending>de&&(z.adler=m(z.adler,le.pending_buf,le.pending-de,de)),Ee===0&&(le.status=103)}else le.status=103;if(le.status===103&&(le.gzhead.hcrc?(le.pending+2>le.pending_buf_size&&re(z),le.pending+2<=le.pending_buf_size&&(q(le,255&z.adler),q(le,z.adler>>8&255),z.adler=0,le.status=xe)):le.status=xe),le.pending!==0){if(re(z),z.avail_out===0)return le.last_flush=-1,k}else if(z.avail_in===0&&ge(De)<=ge(Te)&&De!==E)return Ve(z,-5);if(le.status===666&&z.avail_in!==0)return Ve(z,-5);if(z.avail_in!==0||le.lookahead!==0||De!==_&&le.status!==666){var Fe=le.strategy===2?(function(He,je){for(var Ke;;){if(He.lookahead===0&&(pe(He),He.lookahead===0)){if(je===_)return W;break}if(He.match_length=0,Ke=f._tr_tally(He,0,He.window[He.strstart]),He.lookahead--,He.strstart++,Ke&&(L(He,!1),He.strm.avail_out===0))return W}return He.insert=0,je===E?(L(He,!0),He.strm.avail_out===0?be:fe):He.last_lit&&(L(He,!1),He.strm.avail_out===0)?W:ne})(le,De):le.strategy===3?(function(He,je){for(var Ke,it,qe,Me,Xe=He.window;;){if(He.lookahead<=ce){if(pe(He),He.lookahead<=ce&&je===_)return W;if(He.lookahead===0)break}if(He.match_length=0,He.lookahead>=H&&0<He.strstart&&(it=Xe[qe=He.strstart-1])===Xe[++qe]&&it===Xe[++qe]&&it===Xe[++qe]){Me=He.strstart+ce;do;while(it===Xe[++qe]&&it===Xe[++qe]&&it===Xe[++qe]&&it===Xe[++qe]&&it===Xe[++qe]&&it===Xe[++qe]&&it===Xe[++qe]&&it===Xe[++qe]&&qe<Me);He.match_length=ce-(Me-qe),He.match_length>He.lookahead&&(He.match_length=He.lookahead)}if(He.match_length>=H?(Ke=f._tr_tally(He,1,He.match_length-H),He.lookahead-=He.match_length,He.strstart+=He.match_length,He.match_length=0):(Ke=f._tr_tally(He,0,He.window[He.strstart]),He.lookahead--,He.strstart++),Ke&&(L(He,!1),He.strm.avail_out===0))return W}return He.insert=0,je===E?(L(He,!0),He.strm.avail_out===0?be:fe):He.last_lit&&(L(He,!1),He.strm.avail_out===0)?W:ne})(le,De):i[le.level].func(le,De);if(Fe!==be&&Fe!==fe||(le.status=666),Fe===W||Fe===be)return z.avail_out===0&&(le.last_flush=-1),k;if(Fe===ne&&(De===1?f._tr_align(le):De!==5&&(f._tr_stored_block(le,0,0,!1),De===3&&(We(le.head),le.lookahead===0&&(le.strstart=0,le.block_start=0,le.insert=0))),re(z),z.avail_out===0))return le.last_flush=-1,k}return De!==E?k:le.wrap<=0?1:(le.wrap===2?(q(le,255&z.adler),q(le,z.adler>>8&255),q(le,z.adler>>16&255),q(le,z.adler>>24&255),q(le,255&z.total_in),q(le,z.total_in>>8&255),q(le,z.total_in>>16&255),q(le,z.total_in>>24&255)):(P(le,z.adler>>>16),P(le,65535&z.adler)),re(z),0<le.wrap&&(le.wrap=-le.wrap),le.pending!==0?k:1)},a.deflateEnd=function(z){var De;return z&&z.state?(De=z.state.status)!==V&&De!==69&&De!==73&&De!==91&&De!==103&&De!==xe&&De!==666?Ve(z,N):(z.state=null,De===xe?Ve(z,-3):k):N},a.deflateSetDictionary=function(z,De){var Te,le,de,Ee,at,Fe,He,je,Ke=De.length;if(!z||!z.state||(Ee=(Te=z.state).wrap)===2||Ee===1&&Te.status!==V||Te.lookahead)return N;for(Ee===1&&(z.adler=g(z.adler,De,Ke,0)),Te.wrap=0,Ke>=Te.w_size&&(Ee===0&&(We(Te.head),Te.strstart=0,Te.block_start=0,Te.insert=0),je=new u.Buf8(Te.w_size),u.arraySet(je,De,Ke-Te.w_size,Te.w_size,0),De=je,Ke=Te.w_size),at=z.avail_in,Fe=z.next_in,He=z.input,z.avail_in=Ke,z.next_in=0,z.input=De,pe(Te);Te.lookahead>=H;){for(le=Te.strstart,de=Te.lookahead-(H-1);Te.ins_h=(Te.ins_h<<Te.hash_shift^Te.window[le+H-1])&Te.hash_mask,Te.prev[le&Te.w_mask]=Te.head[Te.ins_h],Te.head[Te.ins_h]=le,le++,--de;);Te.strstart=le,Te.lookahead=H-1,pe(Te)}return Te.strstart+=Te.lookahead,Te.block_start=Te.strstart,Te.insert=Te.lookahead,Te.lookahead=0,Te.match_length=Te.prev_length=H-1,Te.match_available=0,z.next_in=Fe,z.input=He,z.avail_in=at,Te.wrap=Ee,k},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,a){n.exports=function(i,u){var f,g,m,w,_,E,k,N,A,C,I,D,O,B,U,X,F,Y,H,ce,J,V,xe,W,ne;f=i.state,g=i.next_in,W=i.input,m=g+(i.avail_in-5),w=i.next_out,ne=i.output,_=w-(u-i.avail_out),E=w+(i.avail_out-257),k=f.dmax,N=f.wsize,A=f.whave,C=f.wnext,I=f.window,D=f.hold,O=f.bits,B=f.lencode,U=f.distcode,X=(1<<f.lenbits)-1,F=(1<<f.distbits)-1;e:do{O<15&&(D+=W[g++]<<O,O+=8,D+=W[g++]<<O,O+=8),Y=B[D&X];t:for(;;){if(D>>>=H=Y>>>24,O-=H,(H=Y>>>16&255)===0)ne[w++]=65535&Y;else{if(!(16&H)){if((64&H)==0){Y=B[(65535&Y)+(D&(1<<H)-1)];continue t}if(32&H){f.mode=12;break e}i.msg="invalid literal/length code",f.mode=30;break e}ce=65535&Y,(H&=15)&&(O<H&&(D+=W[g++]<<O,O+=8),ce+=D&(1<<H)-1,D>>>=H,O-=H),O<15&&(D+=W[g++]<<O,O+=8,D+=W[g++]<<O,O+=8),Y=U[D&F];r:for(;;){if(D>>>=H=Y>>>24,O-=H,!(16&(H=Y>>>16&255))){if((64&H)==0){Y=U[(65535&Y)+(D&(1<<H)-1)];continue r}i.msg="invalid distance code",f.mode=30;break e}if(J=65535&Y,O<(H&=15)&&(D+=W[g++]<<O,(O+=8)<H&&(D+=W[g++]<<O,O+=8)),k<(J+=D&(1<<H)-1)){i.msg="invalid distance too far back",f.mode=30;break e}if(D>>>=H,O-=H,(H=w-_)<J){if(A<(H=J-H)&&f.sane){i.msg="invalid distance too far back",f.mode=30;break e}if(xe=I,(V=0)===C){if(V+=N-H,H<ce){for(ce-=H;ne[w++]=I[V++],--H;);V=w-J,xe=ne}}else if(C<H){if(V+=N+C-H,(H-=C)<ce){for(ce-=H;ne[w++]=I[V++],--H;);if(V=0,C<ce){for(ce-=H=C;ne[w++]=I[V++],--H;);V=w-J,xe=ne}}}else if(V+=C-H,H<ce){for(ce-=H;ne[w++]=I[V++],--H;);V=w-J,xe=ne}for(;2<ce;)ne[w++]=xe[V++],ne[w++]=xe[V++],ne[w++]=xe[V++],ce-=3;ce&&(ne[w++]=xe[V++],1<ce&&(ne[w++]=xe[V++]))}else{for(V=w-J;ne[w++]=ne[V++],ne[w++]=ne[V++],ne[w++]=ne[V++],2<(ce-=3););ce&&(ne[w++]=ne[V++],1<ce&&(ne[w++]=ne[V++]))}break}}break}}while(g<m&&w<E);g-=ce=O>>3,D&=(1<<(O-=ce<<3))-1,i.next_in=g,i.next_out=w,i.avail_in=g<m?m-g+5:5-(g-m),i.avail_out=w<E?E-w+257:257-(w-E),f.hold=D,f.bits=O}},{}],49:[function(t,n,a){var i=t("../utils/common"),u=t("./adler32"),f=t("./crc32"),g=t("./inffast"),m=t("./inftrees"),w=1,_=2,E=0,k=-2,N=1,A=852,C=592;function I(V){return(V>>>24&255)+(V>>>8&65280)+((65280&V)<<8)+((255&V)<<24)}function D(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function O(V){var xe;return V&&V.state?(xe=V.state,V.total_in=V.total_out=xe.total=0,V.msg="",xe.wrap&&(V.adler=1&xe.wrap),xe.mode=N,xe.last=0,xe.havedict=0,xe.dmax=32768,xe.head=null,xe.hold=0,xe.bits=0,xe.lencode=xe.lendyn=new i.Buf32(A),xe.distcode=xe.distdyn=new i.Buf32(C),xe.sane=1,xe.back=-1,E):k}function B(V){var xe;return V&&V.state?((xe=V.state).wsize=0,xe.whave=0,xe.wnext=0,O(V)):k}function U(V,xe){var W,ne;return V&&V.state?(ne=V.state,xe<0?(W=0,xe=-xe):(W=1+(xe>>4),xe<48&&(xe&=15)),xe&&(xe<8||15<xe)?k:(ne.window!==null&&ne.wbits!==xe&&(ne.window=null),ne.wrap=W,ne.wbits=xe,B(V))):k}function X(V,xe){var W,ne;return V?(ne=new D,(V.state=ne).window=null,(W=U(V,xe))!==E&&(V.state=null),W):k}var F,Y,H=!0;function ce(V){if(H){var xe;for(F=new i.Buf32(512),Y=new i.Buf32(32),xe=0;xe<144;)V.lens[xe++]=8;for(;xe<256;)V.lens[xe++]=9;for(;xe<280;)V.lens[xe++]=7;for(;xe<288;)V.lens[xe++]=8;for(m(w,V.lens,0,288,F,0,V.work,{bits:9}),xe=0;xe<32;)V.lens[xe++]=5;m(_,V.lens,0,32,Y,0,V.work,{bits:5}),H=!1}V.lencode=F,V.lenbits=9,V.distcode=Y,V.distbits=5}function J(V,xe,W,ne){var be,fe=V.state;return fe.window===null&&(fe.wsize=1<<fe.wbits,fe.wnext=0,fe.whave=0,fe.window=new i.Buf8(fe.wsize)),ne>=fe.wsize?(i.arraySet(fe.window,xe,W-fe.wsize,fe.wsize,0),fe.wnext=0,fe.whave=fe.wsize):(ne<(be=fe.wsize-fe.wnext)&&(be=ne),i.arraySet(fe.window,xe,W-ne,be,fe.wnext),(ne-=be)?(i.arraySet(fe.window,xe,W-ne,ne,0),fe.wnext=ne,fe.whave=fe.wsize):(fe.wnext+=be,fe.wnext===fe.wsize&&(fe.wnext=0),fe.whave<fe.wsize&&(fe.whave+=be))),0}a.inflateReset=B,a.inflateReset2=U,a.inflateResetKeep=O,a.inflateInit=function(V){return X(V,15)},a.inflateInit2=X,a.inflate=function(V,xe){var W,ne,be,fe,Ve,ge,We,re,L,q,P,Z,pe,Le,Be,Pe,et,ut,ve,Ie,z,De,Te,le,de=0,Ee=new i.Buf8(4),at=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!V||!V.state||!V.output||!V.input&&V.avail_in!==0)return k;(W=V.state).mode===12&&(W.mode=13),Ve=V.next_out,be=V.output,We=V.avail_out,fe=V.next_in,ne=V.input,ge=V.avail_in,re=W.hold,L=W.bits,q=ge,P=We,De=E;e:for(;;)switch(W.mode){case N:if(W.wrap===0){W.mode=13;break}for(;L<16;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}if(2&W.wrap&&re===35615){Ee[W.check=0]=255&re,Ee[1]=re>>>8&255,W.check=f(W.check,Ee,2,0),L=re=0,W.mode=2;break}if(W.flags=0,W.head&&(W.head.done=!1),!(1&W.wrap)||(((255&re)<<8)+(re>>8))%31){V.msg="incorrect header check",W.mode=30;break}if((15&re)!=8){V.msg="unknown compression method",W.mode=30;break}if(L-=4,z=8+(15&(re>>>=4)),W.wbits===0)W.wbits=z;else if(z>W.wbits){V.msg="invalid window size",W.mode=30;break}W.dmax=1<<z,V.adler=W.check=1,W.mode=512&re?10:12,L=re=0;break;case 2:for(;L<16;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}if(W.flags=re,(255&W.flags)!=8){V.msg="unknown compression method",W.mode=30;break}if(57344&W.flags){V.msg="unknown header flags set",W.mode=30;break}W.head&&(W.head.text=re>>8&1),512&W.flags&&(Ee[0]=255&re,Ee[1]=re>>>8&255,W.check=f(W.check,Ee,2,0)),L=re=0,W.mode=3;case 3:for(;L<32;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}W.head&&(W.head.time=re),512&W.flags&&(Ee[0]=255&re,Ee[1]=re>>>8&255,Ee[2]=re>>>16&255,Ee[3]=re>>>24&255,W.check=f(W.check,Ee,4,0)),L=re=0,W.mode=4;case 4:for(;L<16;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}W.head&&(W.head.xflags=255&re,W.head.os=re>>8),512&W.flags&&(Ee[0]=255&re,Ee[1]=re>>>8&255,W.check=f(W.check,Ee,2,0)),L=re=0,W.mode=5;case 5:if(1024&W.flags){for(;L<16;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}W.length=re,W.head&&(W.head.extra_len=re),512&W.flags&&(Ee[0]=255&re,Ee[1]=re>>>8&255,W.check=f(W.check,Ee,2,0)),L=re=0}else W.head&&(W.head.extra=null);W.mode=6;case 6:if(1024&W.flags&&(ge<(Z=W.length)&&(Z=ge),Z&&(W.head&&(z=W.head.extra_len-W.length,W.head.extra||(W.head.extra=new Array(W.head.extra_len)),i.arraySet(W.head.extra,ne,fe,Z,z)),512&W.flags&&(W.check=f(W.check,ne,Z,fe)),ge-=Z,fe+=Z,W.length-=Z),W.length))break e;W.length=0,W.mode=7;case 7:if(2048&W.flags){if(ge===0)break e;for(Z=0;z=ne[fe+Z++],W.head&&z&&W.length<65536&&(W.head.name+=String.fromCharCode(z)),z&&Z<ge;);if(512&W.flags&&(W.check=f(W.check,ne,Z,fe)),ge-=Z,fe+=Z,z)break e}else W.head&&(W.head.name=null);W.length=0,W.mode=8;case 8:if(4096&W.flags){if(ge===0)break e;for(Z=0;z=ne[fe+Z++],W.head&&z&&W.length<65536&&(W.head.comment+=String.fromCharCode(z)),z&&Z<ge;);if(512&W.flags&&(W.check=f(W.check,ne,Z,fe)),ge-=Z,fe+=Z,z)break e}else W.head&&(W.head.comment=null);W.mode=9;case 9:if(512&W.flags){for(;L<16;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}if(re!==(65535&W.check)){V.msg="header crc mismatch",W.mode=30;break}L=re=0}W.head&&(W.head.hcrc=W.flags>>9&1,W.head.done=!0),V.adler=W.check=0,W.mode=12;break;case 10:for(;L<32;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}V.adler=W.check=I(re),L=re=0,W.mode=11;case 11:if(W.havedict===0)return V.next_out=Ve,V.avail_out=We,V.next_in=fe,V.avail_in=ge,W.hold=re,W.bits=L,2;V.adler=W.check=1,W.mode=12;case 12:if(xe===5||xe===6)break e;case 13:if(W.last){re>>>=7&L,L-=7&L,W.mode=27;break}for(;L<3;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}switch(W.last=1&re,L-=1,3&(re>>>=1)){case 0:W.mode=14;break;case 1:if(ce(W),W.mode=20,xe!==6)break;re>>>=2,L-=2;break e;case 2:W.mode=17;break;case 3:V.msg="invalid block type",W.mode=30}re>>>=2,L-=2;break;case 14:for(re>>>=7&L,L-=7&L;L<32;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}if((65535&re)!=(re>>>16^65535)){V.msg="invalid stored block lengths",W.mode=30;break}if(W.length=65535&re,L=re=0,W.mode=15,xe===6)break e;case 15:W.mode=16;case 16:if(Z=W.length){if(ge<Z&&(Z=ge),We<Z&&(Z=We),Z===0)break e;i.arraySet(be,ne,fe,Z,Ve),ge-=Z,fe+=Z,We-=Z,Ve+=Z,W.length-=Z;break}W.mode=12;break;case 17:for(;L<14;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}if(W.nlen=257+(31&re),re>>>=5,L-=5,W.ndist=1+(31&re),re>>>=5,L-=5,W.ncode=4+(15&re),re>>>=4,L-=4,286<W.nlen||30<W.ndist){V.msg="too many length or distance symbols",W.mode=30;break}W.have=0,W.mode=18;case 18:for(;W.have<W.ncode;){for(;L<3;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}W.lens[at[W.have++]]=7&re,re>>>=3,L-=3}for(;W.have<19;)W.lens[at[W.have++]]=0;if(W.lencode=W.lendyn,W.lenbits=7,Te={bits:W.lenbits},De=m(0,W.lens,0,19,W.lencode,0,W.work,Te),W.lenbits=Te.bits,De){V.msg="invalid code lengths set",W.mode=30;break}W.have=0,W.mode=19;case 19:for(;W.have<W.nlen+W.ndist;){for(;Pe=(de=W.lencode[re&(1<<W.lenbits)-1])>>>16&255,et=65535&de,!((Be=de>>>24)<=L);){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}if(et<16)re>>>=Be,L-=Be,W.lens[W.have++]=et;else{if(et===16){for(le=Be+2;L<le;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}if(re>>>=Be,L-=Be,W.have===0){V.msg="invalid bit length repeat",W.mode=30;break}z=W.lens[W.have-1],Z=3+(3&re),re>>>=2,L-=2}else if(et===17){for(le=Be+3;L<le;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}L-=Be,z=0,Z=3+(7&(re>>>=Be)),re>>>=3,L-=3}else{for(le=Be+7;L<le;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}L-=Be,z=0,Z=11+(127&(re>>>=Be)),re>>>=7,L-=7}if(W.have+Z>W.nlen+W.ndist){V.msg="invalid bit length repeat",W.mode=30;break}for(;Z--;)W.lens[W.have++]=z}}if(W.mode===30)break;if(W.lens[256]===0){V.msg="invalid code -- missing end-of-block",W.mode=30;break}if(W.lenbits=9,Te={bits:W.lenbits},De=m(w,W.lens,0,W.nlen,W.lencode,0,W.work,Te),W.lenbits=Te.bits,De){V.msg="invalid literal/lengths set",W.mode=30;break}if(W.distbits=6,W.distcode=W.distdyn,Te={bits:W.distbits},De=m(_,W.lens,W.nlen,W.ndist,W.distcode,0,W.work,Te),W.distbits=Te.bits,De){V.msg="invalid distances set",W.mode=30;break}if(W.mode=20,xe===6)break e;case 20:W.mode=21;case 21:if(6<=ge&&258<=We){V.next_out=Ve,V.avail_out=We,V.next_in=fe,V.avail_in=ge,W.hold=re,W.bits=L,g(V,P),Ve=V.next_out,be=V.output,We=V.avail_out,fe=V.next_in,ne=V.input,ge=V.avail_in,re=W.hold,L=W.bits,W.mode===12&&(W.back=-1);break}for(W.back=0;Pe=(de=W.lencode[re&(1<<W.lenbits)-1])>>>16&255,et=65535&de,!((Be=de>>>24)<=L);){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}if(Pe&&(240&Pe)==0){for(ut=Be,ve=Pe,Ie=et;Pe=(de=W.lencode[Ie+((re&(1<<ut+ve)-1)>>ut)])>>>16&255,et=65535&de,!(ut+(Be=de>>>24)<=L);){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}re>>>=ut,L-=ut,W.back+=ut}if(re>>>=Be,L-=Be,W.back+=Be,W.length=et,Pe===0){W.mode=26;break}if(32&Pe){W.back=-1,W.mode=12;break}if(64&Pe){V.msg="invalid literal/length code",W.mode=30;break}W.extra=15&Pe,W.mode=22;case 22:if(W.extra){for(le=W.extra;L<le;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}W.length+=re&(1<<W.extra)-1,re>>>=W.extra,L-=W.extra,W.back+=W.extra}W.was=W.length,W.mode=23;case 23:for(;Pe=(de=W.distcode[re&(1<<W.distbits)-1])>>>16&255,et=65535&de,!((Be=de>>>24)<=L);){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}if((240&Pe)==0){for(ut=Be,ve=Pe,Ie=et;Pe=(de=W.distcode[Ie+((re&(1<<ut+ve)-1)>>ut)])>>>16&255,et=65535&de,!(ut+(Be=de>>>24)<=L);){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}re>>>=ut,L-=ut,W.back+=ut}if(re>>>=Be,L-=Be,W.back+=Be,64&Pe){V.msg="invalid distance code",W.mode=30;break}W.offset=et,W.extra=15&Pe,W.mode=24;case 24:if(W.extra){for(le=W.extra;L<le;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}W.offset+=re&(1<<W.extra)-1,re>>>=W.extra,L-=W.extra,W.back+=W.extra}if(W.offset>W.dmax){V.msg="invalid distance too far back",W.mode=30;break}W.mode=25;case 25:if(We===0)break e;if(Z=P-We,W.offset>Z){if((Z=W.offset-Z)>W.whave&&W.sane){V.msg="invalid distance too far back",W.mode=30;break}pe=Z>W.wnext?(Z-=W.wnext,W.wsize-Z):W.wnext-Z,Z>W.length&&(Z=W.length),Le=W.window}else Le=be,pe=Ve-W.offset,Z=W.length;for(We<Z&&(Z=We),We-=Z,W.length-=Z;be[Ve++]=Le[pe++],--Z;);W.length===0&&(W.mode=21);break;case 26:if(We===0)break e;be[Ve++]=W.length,We--,W.mode=21;break;case 27:if(W.wrap){for(;L<32;){if(ge===0)break e;ge--,re|=ne[fe++]<<L,L+=8}if(P-=We,V.total_out+=P,W.total+=P,P&&(V.adler=W.check=W.flags?f(W.check,be,P,Ve-P):u(W.check,be,P,Ve-P)),P=We,(W.flags?re:I(re))!==W.check){V.msg="incorrect data check",W.mode=30;break}L=re=0}W.mode=28;case 28:if(W.wrap&&W.flags){for(;L<32;){if(ge===0)break e;ge--,re+=ne[fe++]<<L,L+=8}if(re!==(4294967295&W.total)){V.msg="incorrect length check",W.mode=30;break}L=re=0}W.mode=29;case 29:De=1;break e;case 30:De=-3;break e;case 31:return-4;default:return k}return V.next_out=Ve,V.avail_out=We,V.next_in=fe,V.avail_in=ge,W.hold=re,W.bits=L,(W.wsize||P!==V.avail_out&&W.mode<30&&(W.mode<27||xe!==4))&&J(V,V.output,V.next_out,P-V.avail_out)?(W.mode=31,-4):(q-=V.avail_in,P-=V.avail_out,V.total_in+=q,V.total_out+=P,W.total+=P,W.wrap&&P&&(V.adler=W.check=W.flags?f(W.check,be,P,V.next_out-P):u(W.check,be,P,V.next_out-P)),V.data_type=W.bits+(W.last?64:0)+(W.mode===12?128:0)+(W.mode===20||W.mode===15?256:0),(q==0&&P===0||xe===4)&&De===E&&(De=-5),De)},a.inflateEnd=function(V){if(!V||!V.state)return k;var xe=V.state;return xe.window&&(xe.window=null),V.state=null,E},a.inflateGetHeader=function(V,xe){var W;return V&&V.state?(2&(W=V.state).wrap)==0?k:((W.head=xe).done=!1,E):k},a.inflateSetDictionary=function(V,xe){var W,ne=xe.length;return V&&V.state?(W=V.state).wrap!==0&&W.mode!==11?k:W.mode===11&&u(1,xe,ne,0)!==W.check?-3:J(V,xe,ne,ne)?(W.mode=31,-4):(W.havedict=1,E):k},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,a){var i=t("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(w,_,E,k,N,A,C,I){var D,O,B,U,X,F,Y,H,ce,J=I.bits,V=0,xe=0,W=0,ne=0,be=0,fe=0,Ve=0,ge=0,We=0,re=0,L=null,q=0,P=new i.Buf16(16),Z=new i.Buf16(16),pe=null,Le=0;for(V=0;V<=15;V++)P[V]=0;for(xe=0;xe<k;xe++)P[_[E+xe]]++;for(be=J,ne=15;1<=ne&&P[ne]===0;ne--);if(ne<be&&(be=ne),ne===0)return N[A++]=20971520,N[A++]=20971520,I.bits=1,0;for(W=1;W<ne&&P[W]===0;W++);for(be<W&&(be=W),V=ge=1;V<=15;V++)if(ge<<=1,(ge-=P[V])<0)return-1;if(0<ge&&(w===0||ne!==1))return-1;for(Z[1]=0,V=1;V<15;V++)Z[V+1]=Z[V]+P[V];for(xe=0;xe<k;xe++)_[E+xe]!==0&&(C[Z[_[E+xe]]++]=xe);if(F=w===0?(L=pe=C,19):w===1?(L=u,q-=257,pe=f,Le-=257,256):(L=g,pe=m,-1),V=W,X=A,Ve=xe=re=0,B=-1,U=(We=1<<(fe=be))-1,w===1&&852<We||w===2&&592<We)return 1;for(;;){for(Y=V-Ve,ce=C[xe]<F?(H=0,C[xe]):C[xe]>F?(H=pe[Le+C[xe]],L[q+C[xe]]):(H=96,0),D=1<<V-Ve,W=O=1<<fe;N[X+(re>>Ve)+(O-=D)]=Y<<24|H<<16|ce|0,O!==0;);for(D=1<<V-1;re&D;)D>>=1;if(D!==0?(re&=D-1,re+=D):re=0,xe++,--P[V]==0){if(V===ne)break;V=_[E+C[xe]]}if(be<V&&(re&U)!==B){for(Ve===0&&(Ve=be),X+=W,ge=1<<(fe=V-Ve);fe+Ve<ne&&!((ge-=P[fe+Ve])<=0);)fe++,ge<<=1;if(We+=1<<fe,w===1&&852<We||w===2&&592<We)return 1;N[B=re&U]=be<<24|fe<<16|X-A|0}}return re!==0&&(N[X+re]=V-Ve<<24|64<<16|0),I.bits=be,0}},{"../utils/common":41}],51:[function(t,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,a){var i=t("../utils/common"),u=0,f=1;function g(de){for(var Ee=de.length;0<=--Ee;)de[Ee]=0}var m=0,w=29,_=256,E=_+1+w,k=30,N=19,A=2*E+1,C=15,I=16,D=7,O=256,B=16,U=17,X=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(E+2));g(J);var V=new Array(2*k);g(V);var xe=new Array(512);g(xe);var W=new Array(256);g(W);var ne=new Array(w);g(ne);var be,fe,Ve,ge=new Array(k);function We(de,Ee,at,Fe,He){this.static_tree=de,this.extra_bits=Ee,this.extra_base=at,this.elems=Fe,this.max_length=He,this.has_stree=de&&de.length}function re(de,Ee){this.dyn_tree=de,this.max_code=0,this.stat_desc=Ee}function L(de){return de<256?xe[de]:xe[256+(de>>>7)]}function q(de,Ee){de.pending_buf[de.pending++]=255&Ee,de.pending_buf[de.pending++]=Ee>>>8&255}function P(de,Ee,at){de.bi_valid>I-at?(de.bi_buf|=Ee<<de.bi_valid&65535,q(de,de.bi_buf),de.bi_buf=Ee>>I-de.bi_valid,de.bi_valid+=at-I):(de.bi_buf|=Ee<<de.bi_valid&65535,de.bi_valid+=at)}function Z(de,Ee,at){P(de,at[2*Ee],at[2*Ee+1])}function pe(de,Ee){for(var at=0;at|=1&de,de>>>=1,at<<=1,0<--Ee;);return at>>>1}function Le(de,Ee,at){var Fe,He,je=new Array(C+1),Ke=0;for(Fe=1;Fe<=C;Fe++)je[Fe]=Ke=Ke+at[Fe-1]<<1;for(He=0;He<=Ee;He++){var it=de[2*He+1];it!==0&&(de[2*He]=pe(je[it]++,it))}}function Be(de){var Ee;for(Ee=0;Ee<E;Ee++)de.dyn_ltree[2*Ee]=0;for(Ee=0;Ee<k;Ee++)de.dyn_dtree[2*Ee]=0;for(Ee=0;Ee<N;Ee++)de.bl_tree[2*Ee]=0;de.dyn_ltree[2*O]=1,de.opt_len=de.static_len=0,de.last_lit=de.matches=0}function Pe(de){8<de.bi_valid?q(de,de.bi_buf):0<de.bi_valid&&(de.pending_buf[de.pending++]=de.bi_buf),de.bi_buf=0,de.bi_valid=0}function et(de,Ee,at,Fe){var He=2*Ee,je=2*at;return de[He]<de[je]||de[He]===de[je]&&Fe[Ee]<=Fe[at]}function ut(de,Ee,at){for(var Fe=de.heap[at],He=at<<1;He<=de.heap_len&&(He<de.heap_len&&et(Ee,de.heap[He+1],de.heap[He],de.depth)&&He++,!et(Ee,Fe,de.heap[He],de.depth));)de.heap[at]=de.heap[He],at=He,He<<=1;de.heap[at]=Fe}function ve(de,Ee,at){var Fe,He,je,Ke,it=0;if(de.last_lit!==0)for(;Fe=de.pending_buf[de.d_buf+2*it]<<8|de.pending_buf[de.d_buf+2*it+1],He=de.pending_buf[de.l_buf+it],it++,Fe===0?Z(de,He,Ee):(Z(de,(je=W[He])+_+1,Ee),(Ke=F[je])!==0&&P(de,He-=ne[je],Ke),Z(de,je=L(--Fe),at),(Ke=Y[je])!==0&&P(de,Fe-=ge[je],Ke)),it<de.last_lit;);Z(de,O,Ee)}function Ie(de,Ee){var at,Fe,He,je=Ee.dyn_tree,Ke=Ee.stat_desc.static_tree,it=Ee.stat_desc.has_stree,qe=Ee.stat_desc.elems,Me=-1;for(de.heap_len=0,de.heap_max=A,at=0;at<qe;at++)je[2*at]!==0?(de.heap[++de.heap_len]=Me=at,de.depth[at]=0):je[2*at+1]=0;for(;de.heap_len<2;)je[2*(He=de.heap[++de.heap_len]=Me<2?++Me:0)]=1,de.depth[He]=0,de.opt_len--,it&&(de.static_len-=Ke[2*He+1]);for(Ee.max_code=Me,at=de.heap_len>>1;1<=at;at--)ut(de,je,at);for(He=qe;at=de.heap[1],de.heap[1]=de.heap[de.heap_len--],ut(de,je,1),Fe=de.heap[1],de.heap[--de.heap_max]=at,de.heap[--de.heap_max]=Fe,je[2*He]=je[2*at]+je[2*Fe],de.depth[He]=(de.depth[at]>=de.depth[Fe]?de.depth[at]:de.depth[Fe])+1,je[2*at+1]=je[2*Fe+1]=He,de.heap[1]=He++,ut(de,je,1),2<=de.heap_len;);de.heap[--de.heap_max]=de.heap[1],(function(Xe,St){var At,Ot,sr,Nt,mt,Ht,Dt=St.dyn_tree,Yt=St.max_code,or=St.stat_desc.static_tree,_r=St.stat_desc.has_stree,Qr=St.stat_desc.extra_bits,Xt=St.stat_desc.extra_base,Mr=St.stat_desc.max_length,zr=0;for(Nt=0;Nt<=C;Nt++)Xe.bl_count[Nt]=0;for(Dt[2*Xe.heap[Xe.heap_max]+1]=0,At=Xe.heap_max+1;At<A;At++)Mr<(Nt=Dt[2*Dt[2*(Ot=Xe.heap[At])+1]+1]+1)&&(Nt=Mr,zr++),Dt[2*Ot+1]=Nt,Yt<Ot||(Xe.bl_count[Nt]++,mt=0,Xt<=Ot&&(mt=Qr[Ot-Xt]),Ht=Dt[2*Ot],Xe.opt_len+=Ht*(Nt+mt),_r&&(Xe.static_len+=Ht*(or[2*Ot+1]+mt)));if(zr!==0){do{for(Nt=Mr-1;Xe.bl_count[Nt]===0;)Nt--;Xe.bl_count[Nt]--,Xe.bl_count[Nt+1]+=2,Xe.bl_count[Mr]--,zr-=2}while(0<zr);for(Nt=Mr;Nt!==0;Nt--)for(Ot=Xe.bl_count[Nt];Ot!==0;)Yt<(sr=Xe.heap[--At])||(Dt[2*sr+1]!==Nt&&(Xe.opt_len+=(Nt-Dt[2*sr+1])*Dt[2*sr],Dt[2*sr+1]=Nt),Ot--)}})(de,Ee),Le(je,Me,de.bl_count)}function z(de,Ee,at){var Fe,He,je=-1,Ke=Ee[1],it=0,qe=7,Me=4;for(Ke===0&&(qe=138,Me=3),Ee[2*(at+1)+1]=65535,Fe=0;Fe<=at;Fe++)He=Ke,Ke=Ee[2*(Fe+1)+1],++it<qe&&He===Ke||(it<Me?de.bl_tree[2*He]+=it:He!==0?(He!==je&&de.bl_tree[2*He]++,de.bl_tree[2*B]++):it<=10?de.bl_tree[2*U]++:de.bl_tree[2*X]++,je=He,Me=(it=0)===Ke?(qe=138,3):He===Ke?(qe=6,3):(qe=7,4))}function De(de,Ee,at){var Fe,He,je=-1,Ke=Ee[1],it=0,qe=7,Me=4;for(Ke===0&&(qe=138,Me=3),Fe=0;Fe<=at;Fe++)if(He=Ke,Ke=Ee[2*(Fe+1)+1],!(++it<qe&&He===Ke)){if(it<Me)for(;Z(de,He,de.bl_tree),--it!=0;);else He!==0?(He!==je&&(Z(de,He,de.bl_tree),it--),Z(de,B,de.bl_tree),P(de,it-3,2)):it<=10?(Z(de,U,de.bl_tree),P(de,it-3,3)):(Z(de,X,de.bl_tree),P(de,it-11,7));je=He,Me=(it=0)===Ke?(qe=138,3):He===Ke?(qe=6,3):(qe=7,4)}}g(ge);var Te=!1;function le(de,Ee,at,Fe){P(de,(m<<1)+(Fe?1:0),3),(function(He,je,Ke,it){Pe(He),q(He,Ke),q(He,~Ke),i.arraySet(He.pending_buf,He.window,je,Ke,He.pending),He.pending+=Ke})(de,Ee,at)}a._tr_init=function(de){Te||((function(){var Ee,at,Fe,He,je,Ke=new Array(C+1);for(He=Fe=0;He<w-1;He++)for(ne[He]=Fe,Ee=0;Ee<1<<F[He];Ee++)W[Fe++]=He;for(W[Fe-1]=He,He=je=0;He<16;He++)for(ge[He]=je,Ee=0;Ee<1<<Y[He];Ee++)xe[je++]=He;for(je>>=7;He<k;He++)for(ge[He]=je<<7,Ee=0;Ee<1<<Y[He]-7;Ee++)xe[256+je++]=He;for(at=0;at<=C;at++)Ke[at]=0;for(Ee=0;Ee<=143;)J[2*Ee+1]=8,Ee++,Ke[8]++;for(;Ee<=255;)J[2*Ee+1]=9,Ee++,Ke[9]++;for(;Ee<=279;)J[2*Ee+1]=7,Ee++,Ke[7]++;for(;Ee<=287;)J[2*Ee+1]=8,Ee++,Ke[8]++;for(Le(J,E+1,Ke),Ee=0;Ee<k;Ee++)V[2*Ee+1]=5,V[2*Ee]=pe(Ee,5);be=new We(J,F,_+1,E,C),fe=new We(V,Y,0,k,C),Ve=new We(new Array(0),H,0,N,D)})(),Te=!0),de.l_desc=new re(de.dyn_ltree,be),de.d_desc=new re(de.dyn_dtree,fe),de.bl_desc=new re(de.bl_tree,Ve),de.bi_buf=0,de.bi_valid=0,Be(de)},a._tr_stored_block=le,a._tr_flush_block=function(de,Ee,at,Fe){var He,je,Ke=0;0<de.level?(de.strm.data_type===2&&(de.strm.data_type=(function(it){var qe,Me=4093624447;for(qe=0;qe<=31;qe++,Me>>>=1)if(1&Me&&it.dyn_ltree[2*qe]!==0)return u;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return f;for(qe=32;qe<_;qe++)if(it.dyn_ltree[2*qe]!==0)return f;return u})(de)),Ie(de,de.l_desc),Ie(de,de.d_desc),Ke=(function(it){var qe;for(z(it,it.dyn_ltree,it.l_desc.max_code),z(it,it.dyn_dtree,it.d_desc.max_code),Ie(it,it.bl_desc),qe=N-1;3<=qe&&it.bl_tree[2*ce[qe]+1]===0;qe--);return it.opt_len+=3*(qe+1)+5+5+4,qe})(de),He=de.opt_len+3+7>>>3,(je=de.static_len+3+7>>>3)<=He&&(He=je)):He=je=at+5,at+4<=He&&Ee!==-1?le(de,Ee,at,Fe):de.strategy===4||je===He?(P(de,2+(Fe?1:0),3),ve(de,J,V)):(P(de,4+(Fe?1:0),3),(function(it,qe,Me,Xe){var St;for(P(it,qe-257,5),P(it,Me-1,5),P(it,Xe-4,4),St=0;St<Xe;St++)P(it,it.bl_tree[2*ce[St]+1],3);De(it,it.dyn_ltree,qe-1),De(it,it.dyn_dtree,Me-1)})(de,de.l_desc.max_code+1,de.d_desc.max_code+1,Ke+1),ve(de,de.dyn_ltree,de.dyn_dtree)),Be(de),Fe&&Pe(de)},a._tr_tally=function(de,Ee,at){return de.pending_buf[de.d_buf+2*de.last_lit]=Ee>>>8&255,de.pending_buf[de.d_buf+2*de.last_lit+1]=255&Ee,de.pending_buf[de.l_buf+de.last_lit]=255&at,de.last_lit++,Ee===0?de.dyn_ltree[2*at]++:(de.matches++,Ee--,de.dyn_ltree[2*(W[at]+_+1)]++,de.dyn_dtree[2*L(Ee)]++),de.last_lit===de.lit_bufsize-1},a._tr_align=function(de){P(de,2,3),Z(de,O,J),(function(Ee){Ee.bi_valid===16?(q(Ee,Ee.bi_buf),Ee.bi_buf=0,Ee.bi_valid=0):8<=Ee.bi_valid&&(Ee.pending_buf[Ee.pending++]=255&Ee.bi_buf,Ee.bi_buf>>=8,Ee.bi_valid-=8)})(de)}},{"../utils/common":41}],53:[function(t,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,a){(function(i){(function(u,f){if(!u.setImmediate){var g,m,w,_,E=1,k={},N=!1,A=u.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(u);C=C&&C.setTimeout?C:u,g={}.toString.call(u.process)==="[object process]"?function(B){process.nextTick(function(){D(B)})}:(function(){if(u.postMessage&&!u.importScripts){var B=!0,U=u.onmessage;return u.onmessage=function(){B=!1},u.postMessage("","*"),u.onmessage=U,B}})()?(_="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",O,!1):u.attachEvent("onmessage",O),function(B){u.postMessage(_+B,"*")}):u.MessageChannel?((w=new MessageChannel).port1.onmessage=function(B){D(B.data)},function(B){w.port2.postMessage(B)}):A&&"onreadystatechange"in A.createElement("script")?(m=A.documentElement,function(B){var U=A.createElement("script");U.onreadystatechange=function(){D(B),U.onreadystatechange=null,m.removeChild(U),U=null},m.appendChild(U)}):function(B){setTimeout(D,0,B)},C.setImmediate=function(B){typeof B!="function"&&(B=new Function(""+B));for(var U=new Array(arguments.length-1),X=0;X<U.length;X++)U[X]=arguments[X+1];var F={callback:B,args:U};return k[E]=F,g(E),E++},C.clearImmediate=I}function I(B){delete k[B]}function D(B){if(N)setTimeout(D,0,B);else{var U=k[B];if(U){N=!0;try{(function(X){var F=X.callback,Y=X.args;switch(Y.length){case 0:F();break;case 1:F(Y[0]);break;case 2:F(Y[0],Y[1]);break;case 3:F(Y[0],Y[1],Y[2]);break;default:F.apply(f,Y)}})(U)}finally{I(B),N=!1}}}}function O(B){B.source===u&&typeof B.data=="string"&&B.data.indexOf(_)===0&&D(+B.data.slice(_.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ho<"u"?ho:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ig)),ig.exports}var nR=rR();const ep=X4(nR);function aR(){const{logout:e}=Vi(),[r,t]=Q.useState([]),[n,a]=Q.useState([]),[i,u]=Q.useState([]),[f,g]=Q.useState(!0),[m,w]=Q.useState(!1),[_,E]=Q.useState(""),[k,N]=Q.useState("Tm"),[A,C]=Q.useState(null),[I,D]=Q.useState(!1),[O,B]=Q.useState(!1),[U,X]=Q.useState(!1),[F,Y]=Q.useState(null),[H,ce]=Q.useState({}),[J,V]=Q.useState(null),[xe,W]=Q.useState(!1),[ne,be]=Q.useState(!1),[fe,Ve]=Q.useState(null),[ge,We]=Q.useState(""),[re,L]=Q.useState(!1),[q,P]=Q.useState(null),[Z,pe]=Q.useState(""),[Le,Be]=Q.useState(!1),Pe=Q.useRef(null);Q.useEffect(()=>{et()},[]);const et=async()=>{try{const[je,Ke,it]=await Promise.all([gi.getAll(),Cn.getAll(),Hn.getAll()]);t(je.data?.invoices||[]),a(Ke.data?.products||[]),u(it.data?.customers||[])}catch(je){console.error("Veri yklenirken hata:",je)}finally{g(!1)}},ut=async()=>{w(!0);try{if(!localStorage.getItem("birfatura_config")){alert("API ayarlar eksik. Ltfen ayarlardan BirFatura entegrasyonunu kontrol edin."),w(!1);return}alert("Senkronizasyon kontrol ediliyor..."),await et()}catch(je){alert("Senkronizasyon hatas: "+je.message)}finally{w(!1)}},ve=["Tm","Bekliyor","lendi","lenmeyecek"],Ie=r.filter(je=>{const Ke=!_||je.invoice_number?.toLowerCase().includes(_.toLowerCase())||je.supplier_name?.toLowerCase().includes(_.toLowerCase()),it=k==="Tm"||je.status===k;return Ke&&it}),z=je=>je?new Date(je).toLocaleDateString("tr-TR"):"-",De=je=>{switch(je){case"Bekliyor":return"bg-amber-100 text-amber-700";case"lendi":return"bg-green-100 text-green-700";case"lenmeyecek":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-600"}},Te={total:r.length,pending:r.filter(je=>je.status==="Bekliyor").length,processed:r.filter(je=>je.status==="lendi").length,totalAmount:r.reduce((je,Ke)=>je+(parseFloat(Ke.total)||0),0)},le=(je,Ke)=>{if(!je)return"";const it=je.getElementsByTagName("*");for(let qe=0;qe<it.length;qe++)if(it[qe].localName===Ke)return it[qe].textContent;return""},de=(je,Ke)=>{if(!je)return null;const it=je.getElementsByTagName("*");for(let qe=0;qe<it.length;qe++)if(it[qe].localName===Ke)return it[qe];return null},Ee=async je=>{C(je),D(!1),B(!0),X(!0),Y(null),ce({}),V(null);try{const[Ke,it,qe]=await Promise.all([oa.get("birfatura_api_key"),oa.get("birfatura_secret_key"),oa.get("birfatura_integration_key")]);if(!Ke.data||!it.data||!qe.data)throw new Error("API ayarlar veritabannda bulunamad. Ltfen Ayarlar > Entegrasyon Ayarlar blmnden bilgileri girin.");const Me={api_key:Ke.data,secret_key:it.data,integration_key:qe.data},Xe={documentUUID:je.uuid,inOutCode:"IN",systemTypeCodes:"EFATURA"},St=await xn.post("/api/birfatura-proxy",{endpoint:"OutEBelgeV2/DocumentDownloadByUUID",payload:Xe,apiKey:Me.api_key,secretKey:Me.secret_key,integrationKey:Me.integration_key});if(!St.data.Success)throw new Error(St.data.Message||"Fatura detay alnamad");const At=St.data.Result?.content;if(!At)throw new Error("Dosya ierii bo");const sr=await new ep().loadAsync(At,{base64:!0}),Nt=Object.keys(sr.files).find(Or=>Or.toLowerCase().endsWith(".xml"));if(!Nt)throw new Error("XML bulunamad");const mt=await sr.files[Nt].async("string"),Dt=new DOMParser().parseFromString(mt,"text/xml"),Yt=de(Dt,"AccountingSupplierParty"),or=de(Yt,"PartyIdentification"),_r=le(or,"ID"),Qr=de(Yt,"PartyName"),Xt=le(Qr,"Name"),Mr=i.find(Or=>Or.name.toLowerCase().includes(Xt.toLowerCase())||Xt.toLowerCase().includes(Or.name.toLowerCase()));Mr&&V(Mr.id);const En=Array.from(Dt.getElementsByTagName("*")).filter(Or=>Or.localName==="InvoiceLine").map(Or=>{const ze=de(Or,"Item"),kt=de(Or,"Price"),Rt=de(Or,"TaxTotal"),Mt=de(Rt,"TaxSubtotal"),pr=de(Mt,"TaxCategory"),Fr=parseFloat(le(Or,"InvoicedQuantity")||0),$r=parseFloat(le(kt,"PriceAmount")||0),br=parseFloat(le(Or,"LineExtensionAmount")||0),Wn=parseFloat(le(pr,"Percent")||0),ae=de(Or,"AllowanceCharge");let ue=0;ae&&le(ae,"ChargeIndicator")==="false"&&(ue=parseFloat(le(ae,"Amount")||0));const he=br*(Wn/100),me=br+he;return{name:le(ze,"Name"),quantity:Fr,unit_price:$r*(1+Wn/100),raw_unit_price:$r,line_net:me,vat_rate:Wn,discount:ue}});Y({lines:En,total_amount:parseFloat(je.total||0),supplier_name:Xt,supplier_tax:_r});const Wr={};En.forEach((Or,ze)=>{const kt=n.find(Rt=>Rt.name.toLowerCase()===Or.name.toLowerCase()||Rt.barcode&&Or.name.includes(Rt.barcode));kt&&(Wr[ze]=kt.id)}),ce(Wr)}catch(Ke){console.error("Detay hatas:",Ke),alert("Fatura detaylar alnamad: "+Ke.message),B(!1)}finally{X(!1)}},at=je=>{fe&&(ce(Ke=>({...Ke,[fe.index]:je.id})),be(!1),Ve(null))},Fe=async()=>{if(!F||!J){alert("Ltfen bir cari sein.");return}if(!F.lines.every((Ke,it)=>H[it])){alert("Ltfen tm rnleri eletirin.");return}if(confirm("Faturay ilemek istediinize emin misiniz?")){W(!0);try{for(let Ke=0;Ke<F.lines.length;Ke++){const it=F.lines[Ke],qe=H[Ke],Me=n.find(Xe=>Xe.id==qe);if(Me){const Xe=(Me.stock||0)+it.quantity;await Cn.updateStock(Me.stock_code,{stock:Xe})}}await Hn.addPurchaseTransaction({customer_id:J,amount:F.total_amount,description:`Fatura leme (${A.invoice_number})`}),await gi.updateStatus(A.id,"lendi"),alert("Fatura baaryla ilendi!"),B(!1),et()}catch(Ke){console.error(Ke);const it=Ke.response?.data?.message||Ke.message||"lem baarsz";alert("Hata: "+it)}finally{W(!1)}}},He=async()=>{if(F?.supplier_name&&confirm(`"${F.supplier_name}" sisteme yeni cari olarak eklensin mi?`))try{const je={name:F.supplier_name,tax_number:F.supplier_tax||"",phone:"-",email:"",address:"-",balance:0};if((await Hn.add(je)).data?.success){const qe=(await Hn.getAll()).data?.customers||[];u(qe);const Me=qe.find(Xe=>Xe.name===je.name);Me?(V(Me.id),alert("Cari eklendi ve seildi.")):alert("Cari eklendi ancak listede bulunamad.")}else alert("Ekleme baarsz.")}catch(je){console.error(je);const Ke=je.response?.data?.message||je.message||"Ekleme baarsz";alert("Hata: "+Ke)}};return f?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:o.jsx("div",{className:"w-10 h-10 border-4 border-violet-500 border-t-transparent rounded-full animate-spin"})}):o.jsxs("div",{className:"min-h-screen bg-gray-100 pb-24",children:[o.jsxs("header",{className:"bg-gradient-to-r from-violet-600 to-purple-600 text-white sticky top-0 z-20 px-4 py-4 shadow-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(hr,{to:"/mobile-pos",className:"text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold",children:" Gelen Faturalar"}),o.jsxs("p",{className:"text-violet-200 text-xs",children:[Te.total," fatura"]})]})]}),o.jsxs("button",{onClick:ut,disabled:m,className:"px-3 py-2 bg-white/20 rounded-xl text-sm font-semibold hover:bg-white/30 transition-colors disabled:opacity-50 flex items-center gap-1",children:[m?o.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"",m?"":"Senkronize"]})]}),o.jsx("input",{type:"text",value:_,onChange:je=>E(je.target.value),placeholder:"Fatura no veya tedariki ara...",className:"w-full px-4 py-2.5 bg-white/20 placeholder-violet-200 text-white rounded-xl focus:outline-none focus:bg-white/30"})]}),o.jsxs("div",{className:"px-4 py-3 grid grid-cols-3 gap-2",children:[o.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 text-center",children:[o.jsx("p",{className:"text-xs text-amber-600",children:"Bekleyen"}),o.jsx("p",{className:"text-xl font-bold text-amber-700",children:Te.pending})]}),o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 text-center",children:[o.jsx("p",{className:"text-xs text-green-600",children:"lendi"}),o.jsx("p",{className:"text-xl font-bold text-green-700",children:Te.processed})]}),o.jsxs("div",{className:"bg-violet-50 border border-violet-200 rounded-xl p-3 text-center",children:[o.jsx("p",{className:"text-xs text-violet-600",children:"Toplam"}),o.jsxs("p",{className:"text-lg font-bold text-violet-700",children:["",Te.totalAmount.toLocaleString("tr-TR")]})]})]}),o.jsx("div",{className:"px-4 pb-2 flex gap-2 overflow-x-auto",style:{WebkitOverflowScrolling:"touch"},children:ve.map(je=>o.jsx("button",{onClick:()=>N(je),className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-semibold transition-colors
                            ${k===je?"bg-violet-600 text-white":"bg-white text-gray-600 border border-gray-200"}`,children:je},je))}),o.jsx("div",{className:"px-4 py-2 space-y-3",children:Ie.length===0?o.jsx("div",{className:"text-center py-10 text-gray-500",children:r.length===0?"Fatura bulunamad.":"Arama sonucu bulunamad."}):Ie.map((je,Ke)=>o.jsxs("div",{onClick:()=>{C(je),D(!0)},className:"bg-white rounded-2xl p-4 shadow-sm active:bg-gray-50 cursor-pointer",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:je.supplier_name||"Bilinmeyen Tedariki"}),o.jsx("p",{className:"text-sm text-violet-600 font-mono",children:je.invoice_number||"-"})]}),o.jsx("div",{className:"text-right ml-3",children:o.jsxs("p",{className:"text-lg font-bold text-emerald-600",children:["",parseFloat(je.total||0).toLocaleString("tr-TR")]})})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-xs text-gray-400",children:z(je.date)}),o.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${De(je.status)}`,children:je.status||"Bekliyor"})]})]},je.id||Ke))}),I&&A&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:()=>D(!1),children:o.jsxs("div",{className:"absolute bottom-0 w-full bg-white rounded-t-3xl p-5 shadow-2xl max-h-[85vh] overflow-y-auto animate-slide-up",onClick:je=>je.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Fatura Detay"}),o.jsx("p",{className:"text-sm text-violet-600 font-mono",children:A.invoice_number})]}),o.jsx("button",{onClick:()=>D(!1),className:"p-2 bg-gray-100 rounded-full text-gray-600",children:""})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tedariki"}),o.jsx("p",{className:"font-semibold text-gray-800",children:A.supplier_name||"-"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tarih"}),o.jsx("p",{className:"font-semibold text-gray-800",children:z(A.date)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Durum"}),o.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${De(A.status)}`,children:A.status||"Bekliyor"})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl p-5 text-center",children:[o.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Toplam Tutar"}),o.jsxs("p",{className:"text-3xl font-black text-white",children:["",parseFloat(A.total||0).toLocaleString("tr-TR")]})]}),(!A.status||A.status==="Bekliyor")&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsx("button",{onClick:async()=>{try{await gi.updateStatus(A.id,"lenmeyecek"),D(!1),et()}catch(je){alert("Hata: "+je.message)}},className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"lenmeyecek"}),o.jsx("button",{onClick:async()=>{try{await gi.updateStatus(A.id,"lendi"),D(!1),et()}catch(je){alert("Hata: "+je.message)}},className:"flex-1 py-3 bg-gradient-to-r from-emerald-500 to-green-500 text-white rounded-xl font-bold",children:" lendi"})]}),o.jsx("button",{onClick:()=>Ee(A),className:"w-full mt-3 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-blue-500/30",children:" Cariye ve Stoklara le"})]})]})]})}),O&&o.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[1000] flex flex-col animate-slide-up bg-gray-50",children:[o.jsxs("div",{className:"bg-gradient-to-r from-violet-900 to-indigo-900 text-white p-4 shadow-lg flex-none z-10",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("h2",{className:"text-lg font-bold flex items-center gap-2",children:" Fatura le"}),o.jsx("button",{onClick:()=>B(!1),className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-lg",children:""})]}),F&&o.jsxs("div",{children:[o.jsx("p",{className:"text-indigo-200 text-xs",children:A?.invoice_number}),o.jsx("h3",{className:"font-semibold text-sm truncate",children:F.supplier_name})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:U?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsx("div",{className:"w-10 h-10 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),o.jsx("p",{className:"mt-3 text-gray-500 text-sm",children:"Fatura Analiz Ediliyor..."})]}):F?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-indigo-100",children:[o.jsx("h4",{className:"text-xs font-bold text-indigo-600 uppercase mb-2",children:"1. Cari Eletirme"}),o.jsxs("select",{value:J||"",onChange:je=>V(je.target.value),className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-lg text-sm font-semibold text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[o.jsx("option",{value:"",children:"-- Cari Seiniz --"}),i.map(je=>o.jsx("option",{value:je.id,children:je.name},je.id))]}),o.jsxs("button",{onClick:He,className:"mt-2 w-full py-2 bg-indigo-100 text-indigo-700 rounded-lg text-sm font-bold hover:bg-indigo-200 transition-colors flex items-center justify-center gap-2",children:[o.jsx("span",{children:""})," Yeni Cari Olarak Ekle"]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"text-xs font-bold text-indigo-600 uppercase px-1",children:"2. rn Eletirme"}),F.lines.map((je,Ke)=>{const it=H[Ke],qe=it?n.find(Me=>Me.id==it):null;return o.jsxs("div",{className:`bg-white rounded-xl p-3 shadow-sm border ${qe?"border-emerald-200":"border-red-200"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-bold text-gray-800 text-sm",children:je.name}),o.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-gray-700 font-bold",children:[je.quantity," Adet"]}),o.jsxs("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:["KDV %",je.vat_rate]})]}),o.jsxs("div",{className:"flex justify-between text-gray-500",children:[o.jsx("span",{children:"KDV Hari Fiyat:"}),o.jsxs("span",{className:"font-mono",children:[je.raw_unit_price.toFixed(2)," TL"]})]}),o.jsxs("div",{className:"flex justify-between text-gray-800 font-bold",children:[o.jsx("span",{children:"KDV Dahil Fiyat:"}),o.jsxs("span",{className:"font-mono",children:[je.unit_price.toFixed(2)," TL"]})]})]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("p",{className:"font-bold text-gray-900 text-sm",children:[je.line_net.toFixed(2)," TL"]})})]}),qe?o.jsxs("div",{className:"flex justify-between items-center bg-emerald-50 rounded-lg p-2 border border-emerald-100",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 text-xs",children:""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-emerald-700",children:qe.name}),o.jsx("p",{className:"text-[10px] text-emerald-600",children:qe.stock_code})]})]}),o.jsx("button",{onClick:()=>{Ve({index:Ke,line:je}),be(!0),We("")},className:"text-xs text-emerald-600 underline px-2",children:"Deitir"})]}):o.jsx("button",{onClick:()=>{Ve({index:Ke,line:je}),be(!0),We(je.name)},className:"w-full py-2 bg-red-50 text-red-600 rounded-lg text-sm font-bold border border-red-100 flex items-center justify-center gap-1",children:" Eletir"})]},Ke)})]})]}):o.jsx("div",{className:"text-center py-10 text-gray-500",children:"Fatura verisi yklenemedi."})}),F&&o.jsxs("div",{className:"bg-white border-t border-gray-200 p-4 shadow-[0_-4px_20px_rgba(0,0,0,0.1)] z-20",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("span",{className:"text-gray-500 text-sm",children:"Genel Toplam"}),o.jsxs("span",{className:"text-xl font-black text-gray-800",children:["",F.total_amount.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),o.jsx("button",{onClick:Fe,disabled:xe,className:"w-full py-4 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl font-bold text-lg shadow-lg shadow-emerald-500/30 flex items-center justify-center gap-2 disabled:opacity-70",children:xe?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"leniyor..."]}):o.jsx(o.Fragment,{children:" Kaydet ve Stoklara le"})})]})]}),ne&&o.jsxs("div",{className:"fixed inset-0 bg-white z-[1100] flex flex-col animate-slide-up",children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 p-3 flex gap-2 items-center shadow-sm",children:[o.jsx("button",{onClick:()=>be(!1),className:"w-10 h-10 flex items-center justify-center text-2xl text-gray-500",children:""}),o.jsxs("div",{className:"flex-1 relative",children:[o.jsx("input",{autoFocus:!0,type:"text",className:"w-full bg-gray-100 rounded-xl px-4 py-3 pl-10 focus:outline-none focus:ring-2 focus:ring-violet-500",placeholder:"rn ara...",value:ge,onChange:je=>We(je.target.value)}),o.jsx("span",{className:"absolute left-3 top-3.5 text-gray-400",children:""})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[fe&&o.jsxs("div",{className:"bg-violet-50 p-3 rounded-lg mb-2 text-sm text-violet-800 border border-violet-100",children:[o.jsx("span",{className:"font-bold",children:"Aranan:"})," ",fe.line.name]}),o.jsx("div",{className:"space-y-2",children:n.filter(je=>{const Ke=ge.toLowerCase();return!Ke||je.name.toLowerCase().includes(Ke)||je.stock_code?.toLowerCase().includes(Ke)||je.barcode?.includes(Ke)}).slice(0,50).map(je=>o.jsxs("button",{onClick:()=>at(je),className:"w-full text-left bg-white p-3 rounded-xl border border-gray-100 shadow-sm active:bg-gray-50 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-gray-800 text-sm",children:je.name}),o.jsx("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:je.stock_code})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"font-bold text-violet-600 text-sm",children:["",je.price]}),o.jsxs("p",{className:"text-[10px] text-gray-400",children:["Stok: ",je.stock]})]})]},je.id))})]})]}),re&&o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[2000] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-slide-up",children:[o.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-purple-600 p-5 flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:" Fiyat Sorgula"}),o.jsx("button",{onClick:()=>{L(!1),P(null),Pe.current&&(Pe.current.stop().catch(()=>{}),Pe.current=null),Be(!1)},className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white text-2xl hover:bg-white/30 transition-colors",children:""})]}),o.jsxs("div",{className:"p-5 space-y-4",children:[Le?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{id:"invoice-price-check-scanner",className:"w-full rounded-2xl overflow-hidden"}),o.jsx("button",{onClick:()=>{Pe.current&&(Pe.current.stop().catch(()=>{}),Pe.current=null),Be(!1)},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold",children:"ptal"})]}):o.jsx("button",{onClick:async()=>{Be(!0),P(null),setTimeout(async()=>{try{const je=new xc("invoice-price-check-scanner");Pe.current=je,await je.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150}},Ke=>{const it=n.find(qe=>qe.barcode===Ke||qe.stock_code===Ke||qe.stock_code?.toLowerCase()===Ke.toLowerCase());P(it||{notFound:!0,searchTerm:Ke}),je.stop().catch(()=>{}),Pe.current=null,Be(!1)},()=>{})}catch(je){console.error("Kamera hatas:",je),Be(!1)}},100)},className:"w-full py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-2xl font-bold text-lg flex items-center justify-center gap-3 shadow-lg shadow-blue-500/30 hover:shadow-xl hover:scale-[1.02] transition-all",children:" Barkod Okut"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:Z,onChange:je=>pe(je.target.value),placeholder:"Stok Kodu veya Barkod girin...",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-violet-500 text-lg",onKeyDown:je=>{if(je.key==="Enter"&&Z.trim()){const Ke=n.find(it=>it.barcode===Z.trim()||it.stock_code===Z.trim()||it.stock_code?.toLowerCase()===Z.trim().toLowerCase());P(Ke||{notFound:!0,searchTerm:Z.trim()})}}}),o.jsx("button",{onClick:()=>{if(Z.trim()){const je=n.find(Ke=>Ke.barcode===Z.trim()||Ke.stock_code===Z.trim()||Ke.stock_code?.toLowerCase()===Z.trim().toLowerCase());P(je||{notFound:!0,searchTerm:Z.trim()})}},className:"px-6 py-3 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg transition-all",children:"Ara"})]}),q&&o.jsx("div",{className:"mt-4 animate-slide-up",children:q.notFound?o.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-5 text-center",children:[o.jsx("span",{className:"text-4xl",children:""}),o.jsx("p",{className:"text-lg font-semibold text-red-600 mt-2",children:"rn Bulunamad"}),o.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:['"',q.searchTerm,'"']})]}):o.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-2xl p-5 space-y-3",children:[q.image_url&&o.jsx("div",{className:"flex justify-center",children:o.jsx("img",{src:q.image_url,alt:q.name,className:"w-24 h-24 object-cover rounded-xl shadow-md"})}),o.jsxs("div",{className:"space-y-2 text-center",children:[o.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"rn Ad"}),o.jsx("p",{className:"text-lg font-bold text-gray-800",children:q.name})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[o.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Stok Kodu"}),o.jsx("p",{className:"font-semibold text-gray-700",children:q.stock_code})]}),o.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Barkod"}),o.jsx("p",{className:"font-semibold text-gray-700 font-mono text-sm",children:q.barcode||"-"})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-2xl p-5 text-center shadow-lg shadow-emerald-500/30",children:[o.jsx("p",{className:"text-emerald-100 text-sm mb-1",children:"Sat Fiyat"}),o.jsxs("p",{className:"text-4xl font-black text-white",children:[q.price?.toFixed(2)," TL"]})]}),o.jsx("button",{onClick:()=>{P(null),pe("")},className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:" Yeni Arama"})]})})]})]})}),o.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 flex justify-around py-2 px-1 z-30",children:[o.jsxs(hr,{to:"/mobile-pos",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Sat"})]}),o.jsxs("button",{onClick:()=>{L(!0),P(null),pe("")},className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Fiyat Gr"})]}),o.jsxs(hr,{to:"/mobile-products",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"rnler"})]}),o.jsxs(hr,{to:"/mobile-customers",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Bakiyeler"})]}),o.jsxs(hr,{to:"/mobile-sales",className:"flex flex-col items-center text-gray-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"Satlar"})]}),o.jsxs(hr,{to:"/mobile-invoices",className:"flex flex-col items-center text-blue-600 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px] font-bold",children:"Faturalar"})]}),o.jsxs("button",{onClick:()=>e(),className:"flex flex-col items-center text-red-500 min-w-[40px]",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-[10px]",children:"k"})]})]}),o.jsx("style",{children:`
                @keyframes slide-up {
                    from { transform: translateY(100%); }
                    to { transform: translateY(0); }
                }
                .animate-slide-up {
                    animation: slide-up 0.3s ease-out;
                }
            `})]})}var c1={};c1.version="0.18.5";var lk=1252,sR=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Up={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},zp=function(e){sR.indexOf(e)!=-1&&(lk=Up[0]=e)};function iR(){zp(1252)}var pi=function(e){zp(e)};function Hp(){pi(1200),iR()}function Yy(e){for(var r=[],t=0,n=e.length;t<n;++t)r[t]=e.charCodeAt(t);return r}function lR(e){for(var r=[],t=0;t<e.length>>1;++t)r[t]=String.fromCharCode(e.charCodeAt(2*t)+(e.charCodeAt(2*t+1)<<8));return r.join("")}function ok(e){for(var r=[],t=0;t<e.length>>1;++t)r[t]=String.fromCharCode(e.charCodeAt(2*t+1)+(e.charCodeAt(2*t)<<8));return r.join("")}var $u=function(e){var r=e.charCodeAt(0),t=e.charCodeAt(1);return r==255&&t==254?lR(e.slice(2)):r==254&&t==255?ok(e.slice(2)):r==65279?e.slice(1):e},Oh=function(r){return String.fromCharCode(r)},$y=function(r){return String.fromCharCode(r)},yd,mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function _d(e){for(var r="",t=0,n=0,a=0,i=0,u=0,f=0,g=0,m=0;m<e.length;)t=e.charCodeAt(m++),i=t>>2,n=e.charCodeAt(m++),u=(t&3)<<4|n>>4,a=e.charCodeAt(m++),f=(n&15)<<2|a>>6,g=a&63,isNaN(n)?f=g=64:isNaN(a)&&(g=64),r+=mo.charAt(i)+mo.charAt(u)+mo.charAt(f)+mo.charAt(g);return r}function Ms(e){var r="",t=0,n=0,a=0,i=0,u=0,f=0,g=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var m=0;m<e.length;)i=mo.indexOf(e.charAt(m++)),u=mo.indexOf(e.charAt(m++)),t=i<<2|u>>4,r+=String.fromCharCode(t),f=mo.indexOf(e.charAt(m++)),n=(u&15)<<4|f>>2,f!==64&&(r+=String.fromCharCode(n)),g=mo.indexOf(e.charAt(m++)),a=(f&3)<<6|g,g!==64&&(r+=String.fromCharCode(a));return r}var Sr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Nl=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(r,t){return t?new Buffer(r,t):new Buffer(r)}:Buffer.from.bind(Buffer)}return function(){}})();function yo(e){return Sr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function Zy(e){return Sr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Os=function(r){return Sr?Nl(r,"binary"):r.split("").map(function(t){return t.charCodeAt(0)&255})};function M1(e){if(typeof ArrayBuffer>"u")return Os(e);for(var r=new ArrayBuffer(e.length),t=new Uint8Array(r),n=0;n!=e.length;++n)t[n]=e.charCodeAt(n)&255;return r}function So(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var r=[],t=0;t<e.length;++t)r[t]=String.fromCharCode(e[t]);return r.join("")}function oR(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function Vp(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return Vp(new Uint8Array(e));for(var r=new Array(e.length),t=0;t<e.length;++t)r[t]=e[t];return r}var va=Sr?function(e){return Buffer.concat(e.map(function(r){return Buffer.isBuffer(r)?r:Nl(r)}))}:function(e){if(typeof Uint8Array<"u"){var r=0,t=0;for(r=0;r<e.length;++r)t+=e[r].length;var n=new Uint8Array(t),a=0;for(r=0,t=0;r<e.length;t+=a,++r)if(a=e[r].length,e[r]instanceof Uint8Array)n.set(e[r],t);else{if(typeof e[r]=="string")throw"wtf";n.set(new Uint8Array(e[r]),t)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function cR(e){for(var r=[],t=0,n=e.length+250,a=yo(e.length+255),i=0;i<e.length;++i){var u=e.charCodeAt(i);if(u<128)a[t++]=u;else if(u<2048)a[t++]=192|u>>6&31,a[t++]=128|u&63;else if(u>=55296&&u<57344){u=(u&1023)+64;var f=e.charCodeAt(++i)&1023;a[t++]=240|u>>8&7,a[t++]=128|u>>2&63,a[t++]=128|f>>6&15|(u&3)<<4,a[t++]=128|f&63}else a[t++]=224|u>>12&15,a[t++]=128|u>>6&63,a[t++]=128|u&63;t>n&&(r.push(a.slice(0,t)),t=0,a=yo(65535),n=65530)}return r.push(a.slice(0,t)),va(r)}var Za=/\u0000/g,Zu=/[\u0001-\u0006]/g;function j0(e){for(var r="",t=e.length-1;t>=0;)r+=e.charAt(t--);return r}function bi(e,r){var t=""+e;return t.length>=r?t:zn("0",r-t.length)+t}function Gp(e,r){var t=""+e;return t.length>=r?t:zn(" ",r-t.length)+t}function u1(e,r){var t=""+e;return t.length>=r?t:t+zn(" ",r-t.length)}function uR(e,r){var t=""+Math.round(e);return t.length>=r?t:zn("0",r-t.length)+t}function dR(e,r){var t=""+e;return t.length>=r?t:zn("0",r-t.length)+t}var Jy=Math.pow(2,32);function p0(e,r){if(e>Jy||e<-Jy)return uR(e,r);var t=Math.round(e);return dR(t,r)}function d1(e,r){return r=r||0,e.length>=7+r&&(e.charCodeAt(r)|32)===103&&(e.charCodeAt(r+1)|32)===101&&(e.charCodeAt(r+2)|32)===110&&(e.charCodeAt(r+3)|32)===101&&(e.charCodeAt(r+4)|32)===114&&(e.charCodeAt(r+5)|32)===97&&(e.charCodeAt(r+6)|32)===108}var Qy=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],lg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function fR(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var er={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},e_={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},hR={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function f1(e,r,t){for(var n=e<0?-1:1,a=e*n,i=0,u=1,f=0,g=1,m=0,w=0,_=Math.floor(a);m<r&&(_=Math.floor(a),f=_*u+i,w=_*m+g,!(a-_<5e-8));)a=1/(a-_),i=u,u=f,g=m,m=w;if(w>r&&(m>r?(w=g,f=i):(w=m,f=u)),!t)return[0,n*f,w];var E=Math.floor(n*f/w);return[E,n*f-E*w,w]}function nc(e,r,t){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,u=[],f={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(f.u)<1e-6&&(f.u=0),r&&r.date1904&&(n+=1462),f.u>.9999&&(f.u=0,++a==86400&&(f.T=a=0,++n,++f.D)),n===60)u=t?[1317,10,29]:[1900,2,29],i=3;else if(n===0)u=t?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var g=new Date(1900,0,1);g.setDate(g.getDate()+n-1),u=[g.getFullYear(),g.getMonth()+1,g.getDate()],i=g.getDay(),n<60&&(i=(i+6)%7),t&&(i=wR(g,u))}return f.y=u[0],f.m=u[1],f.d=u[2],f.S=a%60,a=Math.floor(a/60),f.M=a%60,a=Math.floor(a/60),f.H=a,f.q=i,f}var ck=new Date(1899,11,31,0,0,0),xR=ck.getTime(),mR=new Date(1900,2,1,0,0,0);function uk(e,r){var t=e.getTime();return r?t-=1461*24*60*60*1e3:e>=mR&&(t+=1440*60*1e3),(t-(xR+(e.getTimezoneOffset()-ck.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Wp(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function gR(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function pR(e){var r=e<0?12:11,t=Wp(e.toFixed(12));return t.length<=r||(t=e.toPrecision(10),t.length<=r)?t:e.toExponential(5)}function bR(e){var r=Wp(e.toFixed(11));return r.length>(e<0?12:11)||r==="0"||r==="-0"?e.toPrecision(6):r}function kd(e){var r=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),t;return r>=-4&&r<=-1?t=e.toPrecision(10+r):Math.abs(r)<=9?t=pR(e):r===10?t=e.toFixed(10).substr(0,12):t=bR(e),Wp(gR(t.toUpperCase()))}function mc(e,r){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):kd(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return ri(14,uk(e,r&&r.date1904),r)}throw new Error("unsupported value in General format: "+e)}function wR(e,r){r[0]-=581;var t=e.getDay();return e<60&&(t=(t+6)%7),t}function vR(e,r,t,n){var a="",i=0,u=0,f=t.y,g,m=0;switch(e){case 98:f=t.y+543;case 121:switch(r.length){case 1:case 2:g=f%100,m=2;break;default:g=f%1e4,m=4;break}break;case 109:switch(r.length){case 1:case 2:g=t.m,m=r.length;break;case 3:return lg[t.m-1][1];case 5:return lg[t.m-1][0];default:return lg[t.m-1][2]}break;case 100:switch(r.length){case 1:case 2:g=t.d,m=r.length;break;case 3:return Qy[t.q][0];default:return Qy[t.q][1]}break;case 104:switch(r.length){case 1:case 2:g=1+(t.H+11)%12,m=r.length;break;default:throw"bad hour format: "+r}break;case 72:switch(r.length){case 1:case 2:g=t.H,m=r.length;break;default:throw"bad hour format: "+r}break;case 77:switch(r.length){case 1:case 2:g=t.M,m=r.length;break;default:throw"bad minute format: "+r}break;case 115:if(r!="s"&&r!="ss"&&r!=".0"&&r!=".00"&&r!=".000")throw"bad second format: "+r;return t.u===0&&(r=="s"||r=="ss")?bi(t.S,r.length):(n>=2?u=n===3?1e3:100:u=n===1?10:1,i=Math.round(u*(t.S+t.u)),i>=60*u&&(i=0),r==="s"?i===0?"0":""+i/u:(a=bi(i,2+n),r==="ss"?a.substr(0,2):"."+a.substr(2,r.length-1)));case 90:switch(r){case"[h]":case"[hh]":g=t.D*24+t.H;break;case"[m]":case"[mm]":g=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":g=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+r}m=r.length===3?1:2;break;case 101:g=f,m=1;break}var w=m>0?bi(g,m):"";return w}function go(e){var r=3;if(e.length<=r)return e;for(var t=e.length%r,n=e.substr(0,t);t!=e.length;t+=r)n+=(n.length>0?",":"")+e.substr(t,r);return n}var dk=/%/g;function yR(e,r,t){var n=r.replace(dk,""),a=r.length-n.length;return yl(e,n,t*Math.pow(10,2*a))+zn("%",a)}function _R(e,r,t){for(var n=r.length-1;r.charCodeAt(n-1)===44;)--n;return yl(e,r.substr(0,n),t/Math.pow(10,3*(r.length-n)))}function fk(e,r){var t,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(r==0)return"0.0E+0";if(r<0)return"-"+fk(e,-r);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(r)*Math.LOG10E)%a;if(i<0&&(i+=a),t=(r/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),t.indexOf("e")===-1){var u=Math.floor(Math.log(r)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(u-t.length+i):t+="E+"+(u-i);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,a)+"."+t.substr(2+a),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(f,g,m,w){return g+m+w.substr(0,(a+i)%a)+"."+w.substr(i)+"E"})}else t=r.toExponential(n);return e.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),e.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var hk=/# (\?+)( ?)\/( ?)(\d+)/;function kR(e,r,t){var n=parseInt(e[4],10),a=Math.round(r*n),i=Math.floor(a/n),u=a-i*n,f=n;return t+(i===0?"":""+i)+" "+(u===0?zn(" ",e[1].length+1+e[4].length):Gp(u,e[1].length)+e[2]+"/"+e[3]+bi(f,e[4].length))}function ER(e,r,t){return t+(r===0?"":""+r)+zn(" ",e[1].length+2+e[4].length)}var xk=/^#*0*\.([0#]+)/,mk=/\).*[0#]/,gk=/\(###\) ###\\?-####/;function qa(e){for(var r="",t,n=0;n!=e.length;++n)switch(t=e.charCodeAt(n)){case 35:break;case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(t)}return r}function t_(e,r){var t=Math.pow(10,r);return""+Math.round(e*t)/t}function r_(e,r){var t=e-Math.floor(e),n=Math.pow(10,r);return r<(""+Math.round(t*n)).length?0:Math.round(t*n)}function SR(e,r){return r<(""+Math.round((e-Math.floor(e))*Math.pow(10,r))).length?1:0}function AR(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function qs(e,r,t){if(e.charCodeAt(0)===40&&!r.match(mk)){var n=r.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?qs("n",n,t):"("+qs("n",n,-t)+")"}if(r.charCodeAt(r.length-1)===44)return _R(e,r,t);if(r.indexOf("%")!==-1)return yR(e,r,t);if(r.indexOf("E")!==-1)return fk(r,t);if(r.charCodeAt(0)===36)return"$"+qs(e,r.substr(r.charAt(1)==" "?2:1),t);var a,i,u,f,g=Math.abs(t),m=t<0?"-":"";if(r.match(/^00+$/))return m+p0(g,r.length);if(r.match(/^[#?]+$/))return a=p0(t,0),a==="0"&&(a=""),a.length>r.length?a:qa(r.substr(0,r.length-a.length))+a;if(i=r.match(hk))return kR(i,g,m);if(r.match(/^#+0+$/))return m+p0(g,r.length-r.indexOf("0"));if(i=r.match(xk))return a=t_(t,i[1].length).replace(/^([^\.]+)$/,"$1."+qa(i[1])).replace(/\.$/,"."+qa(i[1])).replace(/\.(\d*)$/,function(N,A){return"."+A+zn("0",qa(i[1]).length-A.length)}),r.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(r=r.replace(/^#+([0.])/,"$1"),i=r.match(/^(0*)\.(#*)$/))return m+t_(g,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=r.match(/^#{1,3},##0(\.?)$/))return m+go(p0(g,0));if(i=r.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+qs(e,r,-t):go(""+(Math.floor(t)+SR(t,i[1].length)))+"."+bi(r_(t,i[1].length),i[1].length);if(i=r.match(/^#,#*,#0/))return qs(e,r.replace(/^#,#*,/,""),t);if(i=r.match(/^([0#]+)(\\?-([0#]+))+$/))return a=j0(qs(e,r.replace(/[\\-]/g,""),t)),u=0,j0(j0(r.replace(/\\/g,"")).replace(/[0#]/g,function(N){return u<a.length?a.charAt(u++):N==="0"?"0":""}));if(r.match(gk))return a=qs(e,"##########",t),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var w="";if(i=r.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(i[4].length,7),f=f1(g,Math.pow(10,u)-1,!1),a=""+m,w=yl("n",i[1],f[1]),w.charAt(w.length-1)==" "&&(w=w.substr(0,w.length-1)+"0"),a+=w+i[2]+"/"+i[3],w=u1(f[2],u),w.length<i[4].length&&(w=qa(i[4].substr(i[4].length-w.length))+w),a+=w,a;if(i=r.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(i[1].length,i[4].length),7),f=f1(g,Math.pow(10,u)-1,!0),m+(f[0]||(f[1]?"":"0"))+" "+(f[1]?Gp(f[1],u)+i[2]+"/"+i[3]+u1(f[2],u):zn(" ",2*u+1+i[2].length+i[3].length));if(i=r.match(/^[#0?]+$/))return a=p0(t,0),r.length<=a.length?a:qa(r.substr(0,r.length-a.length))+a;if(i=r.match(/^([#0?]+)\.([#0]+)$/)){a=""+t.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),u=a.indexOf(".");var _=r.indexOf(".")-u,E=r.length-a.length-_;return qa(r.substr(0,_)+a+r.substr(r.length-E))}if(i=r.match(/^00,000\.([#0]*0)$/))return u=r_(t,i[1].length),t<0?"-"+qs(e,r,-t):go(AR(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?bi(0,3-N.length):"")+N})+"."+bi(u,i[1].length);switch(r){case"###,##0.00":return qs(e,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var k=go(p0(g,0));return k!=="0"?m+k:"";case"###,###.00":return qs(e,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return qs(e,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+r+"|")}function NR(e,r,t){for(var n=r.length-1;r.charCodeAt(n-1)===44;)--n;return yl(e,r.substr(0,n),t/Math.pow(10,3*(r.length-n)))}function CR(e,r,t){var n=r.replace(dk,""),a=r.length-n.length;return yl(e,n,t*Math.pow(10,2*a))+zn("%",a)}function pk(e,r){var t,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(r==0)return"0.0E+0";if(r<0)return"-"+pk(e,-r);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(r)*Math.LOG10E)%a;if(i<0&&(i+=a),t=(r/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!t.match(/[Ee]/)){var u=Math.floor(Math.log(r)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(u-t.length+i):t+="E+"+(u-i),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(f,g,m,w){return g+m+w.substr(0,(a+i)%a)+"."+w.substr(i)+"E"})}else t=r.toExponential(n);return e.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),e.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function Fi(e,r,t){if(e.charCodeAt(0)===40&&!r.match(mk)){var n=r.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Fi("n",n,t):"("+Fi("n",n,-t)+")"}if(r.charCodeAt(r.length-1)===44)return NR(e,r,t);if(r.indexOf("%")!==-1)return CR(e,r,t);if(r.indexOf("E")!==-1)return pk(r,t);if(r.charCodeAt(0)===36)return"$"+Fi(e,r.substr(r.charAt(1)==" "?2:1),t);var a,i,u,f,g=Math.abs(t),m=t<0?"-":"";if(r.match(/^00+$/))return m+bi(g,r.length);if(r.match(/^[#?]+$/))return a=""+t,t===0&&(a=""),a.length>r.length?a:qa(r.substr(0,r.length-a.length))+a;if(i=r.match(hk))return ER(i,g,m);if(r.match(/^#+0+$/))return m+bi(g,r.length-r.indexOf("0"));if(i=r.match(xk))return a=(""+t).replace(/^([^\.]+)$/,"$1."+qa(i[1])).replace(/\.$/,"."+qa(i[1])),a=a.replace(/\.(\d*)$/,function(N,A){return"."+A+zn("0",qa(i[1]).length-A.length)}),r.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(r=r.replace(/^#+([0.])/,"$1"),i=r.match(/^(0*)\.(#*)$/))return m+(""+g).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=r.match(/^#{1,3},##0(\.?)$/))return m+go(""+g);if(i=r.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Fi(e,r,-t):go(""+t)+"."+zn("0",i[1].length);if(i=r.match(/^#,#*,#0/))return Fi(e,r.replace(/^#,#*,/,""),t);if(i=r.match(/^([0#]+)(\\?-([0#]+))+$/))return a=j0(Fi(e,r.replace(/[\\-]/g,""),t)),u=0,j0(j0(r.replace(/\\/g,"")).replace(/[0#]/g,function(N){return u<a.length?a.charAt(u++):N==="0"?"0":""}));if(r.match(gk))return a=Fi(e,"##########",t),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var w="";if(i=r.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(i[4].length,7),f=f1(g,Math.pow(10,u)-1,!1),a=""+m,w=yl("n",i[1],f[1]),w.charAt(w.length-1)==" "&&(w=w.substr(0,w.length-1)+"0"),a+=w+i[2]+"/"+i[3],w=u1(f[2],u),w.length<i[4].length&&(w=qa(i[4].substr(i[4].length-w.length))+w),a+=w,a;if(i=r.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(i[1].length,i[4].length),7),f=f1(g,Math.pow(10,u)-1,!0),m+(f[0]||(f[1]?"":"0"))+" "+(f[1]?Gp(f[1],u)+i[2]+"/"+i[3]+u1(f[2],u):zn(" ",2*u+1+i[2].length+i[3].length));if(i=r.match(/^[#0?]+$/))return a=""+t,r.length<=a.length?a:qa(r.substr(0,r.length-a.length))+a;if(i=r.match(/^([#0]+)\.([#0]+)$/)){a=""+t.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),u=a.indexOf(".");var _=r.indexOf(".")-u,E=r.length-a.length-_;return qa(r.substr(0,_)+a+r.substr(r.length-E))}if(i=r.match(/^00,000\.([#0]*0)$/))return t<0?"-"+Fi(e,r,-t):go(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?bi(0,3-N.length):"")+N})+"."+bi(0,i[1].length);switch(r){case"###,###":case"##,###":case"#,###":var k=go(""+g);return k!=="0"?m+k:"";default:if(r.match(/\.[0#?]*$/))return Fi(e,r.slice(0,r.lastIndexOf(".")),t)+qa(r.slice(r.lastIndexOf(".")))}throw new Error("unsupported format |"+r+"|")}function yl(e,r,t){return(t|0)===t?Fi(e,r,t):qs(e,r,t)}function TR(e){for(var r=[],t=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:t=!t;break;case 95:case 42:case 92:++n;break;case 59:r[r.length]=e.substr(a,n-a),a=n+1}if(r[r.length]=e.substr(a),t===!0)throw new Error("Format |"+e+"| unterminated string ");return r}var bk=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function K0(e){for(var r=0,t="",n="";r<e.length;)switch(t=e.charAt(r)){case"G":d1(e,r)&&(r+=6),r++;break;case'"':for(;e.charCodeAt(++r)!==34&&r<e.length;);++r;break;case"\\":r+=2;break;case"_":r+=2;break;case"@":++r;break;case"B":case"b":if(e.charAt(r+1)==="1"||e.charAt(r+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(r,3).toUpperCase()==="A/P"||e.substr(r,5).toUpperCase()==="AM/PM"||e.substr(r,5).toUpperCase()==="/")return!0;++r;break;case"[":for(n=t;e.charAt(r++)!=="]"&&r<e.length;)n+=e.charAt(r);if(n.match(bk))return!0;break;case".":case"0":case"#":for(;r<e.length&&("0#?.,E+-%".indexOf(t=e.charAt(++r))>-1||t=="\\"&&e.charAt(r+1)=="-"&&"0#".indexOf(e.charAt(r+2))>-1););break;case"?":for(;e.charAt(++r)===t;);break;case"*":++r,(e.charAt(r)==" "||e.charAt(r)=="*")&&++r;break;case"(":case")":++r;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;r<e.length&&"0123456789".indexOf(e.charAt(++r))>-1;);break;case" ":++r;break;default:++r;break}return!1}function jR(e,r,t,n){for(var a=[],i="",u=0,f="",g="t",m,w,_,E="H";u<e.length;)switch(f=e.charAt(u)){case"G":if(!d1(e,u))throw new Error("unrecognized character "+f+" in "+e);a[a.length]={t:"G",v:"General"},u+=7;break;case'"':for(i="";(_=e.charCodeAt(++u))!==34&&u<e.length;)i+=String.fromCharCode(_);a[a.length]={t:"t",v:i},++u;break;case"\\":var k=e.charAt(++u),N=k==="("||k===")"?k:"t";a[a.length]={t:N,v:k},++u;break;case"_":a[a.length]={t:"t",v:" "},u+=2;break;case"@":a[a.length]={t:"T",v:r},++u;break;case"B":case"b":if(e.charAt(u+1)==="1"||e.charAt(u+1)==="2"){if(m==null&&(m=nc(r,t,e.charAt(u+1)==="2"),m==null))return"";a[a.length]={t:"X",v:e.substr(u,2)},g=f,u+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":f=f.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(r<0||m==null&&(m=nc(r,t),m==null))return"";for(i=f;++u<e.length&&e.charAt(u).toLowerCase()===f;)i+=f;f==="m"&&g.toLowerCase()==="h"&&(f="M"),f==="h"&&(f=E),a[a.length]={t:f,v:i},g=f;break;case"A":case"a":case"":var A={t:f,v:f};if(m==null&&(m=nc(r,t)),e.substr(u,3).toUpperCase()==="A/P"?(m!=null&&(A.v=m.H>=12?"P":"A"),A.t="T",E="h",u+=3):e.substr(u,5).toUpperCase()==="AM/PM"?(m!=null&&(A.v=m.H>=12?"PM":"AM"),A.t="T",u+=5,E="h"):e.substr(u,5).toUpperCase()==="/"?(m!=null&&(A.v=m.H>=12?"":""),A.t="T",u+=5,E="h"):(A.t="t",++u),m==null&&A.t==="T")return"";a[a.length]=A,g=f;break;case"[":for(i=f;e.charAt(u++)!=="]"&&u<e.length;)i+=e.charAt(u);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(bk)){if(m==null&&(m=nc(r,t),m==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},g=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",K0(e)||(a[a.length]={t:"t",v:i}));break;case".":if(m!=null){for(i=f;++u<e.length&&(f=e.charAt(u))==="0";)i+=f;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=f;++u<e.length&&"0#?.,E+-%".indexOf(f=e.charAt(u))>-1;)i+=f;a[a.length]={t:"n",v:i};break;case"?":for(i=f;e.charAt(++u)===f;)i+=f;a[a.length]={t:f,v:i},g=f;break;case"*":++u,(e.charAt(u)==" "||e.charAt(u)=="*")&&++u;break;case"(":case")":a[a.length]={t:n===1?"t":f,v:f},++u;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=f;u<e.length&&"0123456789".indexOf(e.charAt(++u))>-1;)i+=e.charAt(u);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:f,v:f},++u;break;case"$":a[a.length]={t:"t",v:"$"},++u;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(f)===-1)throw new Error("unrecognized character "+f+" in "+e);a[a.length]={t:"t",v:f},++u;break}var C=0,I=0,D;for(u=a.length-1,g="t";u>=0;--u)switch(a[u].t){case"h":case"H":a[u].t=E,g="h",C<1&&(C=1);break;case"s":(D=a[u].v.match(/\.0+$/))&&(I=Math.max(I,D[0].length-1)),C<3&&(C=3);case"d":case"y":case"M":case"e":g=a[u].t;break;case"m":g==="s"&&(a[u].t="M",C<2&&(C=2));break;case"X":break;case"Z":C<1&&a[u].v.match(/[Hh]/)&&(C=1),C<2&&a[u].v.match(/[Mm]/)&&(C=2),C<3&&a[u].v.match(/[Ss]/)&&(C=3)}switch(C){case 0:break;case 1:m.u>=.5&&(m.u=0,++m.S),m.S>=60&&(m.S=0,++m.M),m.M>=60&&(m.M=0,++m.H);break;case 2:m.u>=.5&&(m.u=0,++m.S),m.S>=60&&(m.S=0,++m.M);break}var O="",B;for(u=0;u<a.length;++u)switch(a[u].t){case"t":case"T":case" ":case"D":break;case"X":a[u].v="",a[u].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[u].v=vR(a[u].t.charCodeAt(0),a[u].v,m,I),a[u].t="t";break;case"n":case"?":for(B=u+1;a[B]!=null&&((f=a[B].t)==="?"||f==="D"||(f===" "||f==="t")&&a[B+1]!=null&&(a[B+1].t==="?"||a[B+1].t==="t"&&a[B+1].v==="/")||a[u].t==="("&&(f===" "||f==="n"||f===")")||f==="t"&&(a[B].v==="/"||a[B].v===" "&&a[B+1]!=null&&a[B+1].t=="?"));)a[u].v+=a[B].v,a[B]={v:"",t:";"},++B;O+=a[u].v,u=B-1;break;case"G":a[u].t="t",a[u].v=mc(r,t);break}var U="",X,F;if(O.length>0){O.charCodeAt(0)==40?(X=r<0&&O.charCodeAt(0)===45?-r:r,F=yl("n",O,X)):(X=r<0&&n>1?-r:r,F=yl("n",O,X),X<0&&a[0]&&a[0].t=="t"&&(F=F.substr(1),a[0].v="-"+a[0].v)),B=F.length-1;var Y=a.length;for(u=0;u<a.length;++u)if(a[u]!=null&&a[u].t!="t"&&a[u].v.indexOf(".")>-1){Y=u;break}var H=a.length;if(Y===a.length&&F.indexOf("E")===-1){for(u=a.length-1;u>=0;--u)a[u]==null||"n?".indexOf(a[u].t)===-1||(B>=a[u].v.length-1?(B-=a[u].v.length,a[u].v=F.substr(B+1,a[u].v.length)):B<0?a[u].v="":(a[u].v=F.substr(0,B+1),B=-1),a[u].t="t",H=u);B>=0&&H<a.length&&(a[H].v=F.substr(0,B+1)+a[H].v)}else if(Y!==a.length&&F.indexOf("E")===-1){for(B=F.indexOf(".")-1,u=Y;u>=0;--u)if(!(a[u]==null||"n?".indexOf(a[u].t)===-1)){for(w=a[u].v.indexOf(".")>-1&&u===Y?a[u].v.indexOf(".")-1:a[u].v.length-1,U=a[u].v.substr(w+1);w>=0;--w)B>=0&&(a[u].v.charAt(w)==="0"||a[u].v.charAt(w)==="#")&&(U=F.charAt(B--)+U);a[u].v=U,a[u].t="t",H=u}for(B>=0&&H<a.length&&(a[H].v=F.substr(0,B+1)+a[H].v),B=F.indexOf(".")+1,u=Y;u<a.length;++u)if(!(a[u]==null||"n?(".indexOf(a[u].t)===-1&&u!==Y)){for(w=a[u].v.indexOf(".")>-1&&u===Y?a[u].v.indexOf(".")+1:0,U=a[u].v.substr(0,w);w<a[u].v.length;++w)B<F.length&&(U+=F.charAt(B++));a[u].v=U,a[u].t="t",H=u}}}for(u=0;u<a.length;++u)a[u]!=null&&"n?".indexOf(a[u].t)>-1&&(X=n>1&&r<0&&u>0&&a[u-1].v==="-"?-r:r,a[u].v=yl(a[u].t,a[u].v,X),a[u].t="t");var ce="";for(u=0;u!==a.length;++u)a[u]!=null&&(ce+=a[u].v);return ce}var n_=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function a_(e,r){if(r==null)return!1;var t=parseFloat(r[2]);switch(r[1]){case"=":if(e==t)return!0;break;case">":if(e>t)return!0;break;case"<":if(e<t)return!0;break;case"<>":if(e!=t)return!0;break;case">=":if(e>=t)return!0;break;case"<=":if(e<=t)return!0;break}return!1}function RR(e,r){var t=TR(e),n=t.length,a=t[n-1].indexOf("@");if(n<4&&a>-1&&--n,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof r!="number")return[4,t.length===4||a>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=a>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=a>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=a>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var i=r>0?t[0]:r<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[n,i];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var u=t[0].match(n_),f=t[1].match(n_);return a_(r,u)?[n,t[0]]:a_(r,f)?[n,t[1]]:[n,t[u!=null&&f!=null?2:1]]}return[n,i]}function ri(e,r,t){t==null&&(t={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&t.dateNF?n=t.dateNF:n=e;break;case"number":e==14&&t.dateNF?n=t.dateNF:n=(t.table!=null?t.table:er)[e],n==null&&(n=t.table&&t.table[e_[e]]||er[e_[e]]),n==null&&(n=hR[e]||"General");break}if(d1(n,0))return mc(r,t);r instanceof Date&&(r=uk(r,t.date1904));var a=RR(n,r);if(d1(a[1]))return mc(r,t);if(r===!0)r="TRUE";else if(r===!1)r="FALSE";else if(r===""||r==null)return"";return jR(a[1],r,t,a[0])}function _l(e,r){if(typeof r!="number"){r=+r||-1;for(var t=0;t<392;++t){if(er[t]==null){r<0&&(r=t);continue}if(er[t]==e){r=t;break}}r<0&&(r=391)}return er[r]=e,r}function F1(e){for(var r=0;r!=392;++r)e[r]!==void 0&&_l(e[r],r)}function q0(){er=fR()}var OR={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},wk=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function IR(e){var r=typeof e=="number"?er[e]:e;return r=r.replace(wk,"(\\d+)"),new RegExp("^"+r+"$")}function DR(e,r,t){var n=-1,a=-1,i=-1,u=-1,f=-1,g=-1;(r.match(wk)||[]).forEach(function(_,E){var k=parseInt(t[E+1],10);switch(_.toLowerCase().charAt(0)){case"y":n=k;break;case"d":i=k;break;case"h":u=k;break;case"s":g=k;break;case"m":u>=0?f=k:a=k;break}}),g>=0&&f==-1&&a>=0&&(f=a,a=-1);var m=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);m.length==7&&(m="0"+m),m.length==8&&(m="20"+m);var w=("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(f>=0?f:0)).slice(-2)+":"+("00"+(g>=0?g:0)).slice(-2);return u==-1&&f==-1&&g==-1?m:n==-1&&a==-1&&i==-1?w:m+"T"+w}var MR=(function(){var e={};e.version="1.2.0";function r(){for(var F=0,Y=new Array(256),H=0;H!=256;++H)F=H,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,Y[H]=F;return typeof Int32Array<"u"?new Int32Array(Y):Y}var t=r();function n(F){var Y=0,H=0,ce=0,J=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ce=0;ce!=256;++ce)J[ce]=F[ce];for(ce=0;ce!=256;++ce)for(H=F[ce],Y=256+ce;Y<4096;Y+=256)H=J[Y]=H>>>8^F[H&255];var V=[];for(ce=1;ce!=16;++ce)V[ce-1]=typeof Int32Array<"u"?J.subarray(ce*256,ce*256+256):J.slice(ce*256,ce*256+256);return V}var a=n(t),i=a[0],u=a[1],f=a[2],g=a[3],m=a[4],w=a[5],_=a[6],E=a[7],k=a[8],N=a[9],A=a[10],C=a[11],I=a[12],D=a[13],O=a[14];function B(F,Y){for(var H=Y^-1,ce=0,J=F.length;ce<J;)H=H>>>8^t[(H^F.charCodeAt(ce++))&255];return~H}function U(F,Y){for(var H=Y^-1,ce=F.length-15,J=0;J<ce;)H=O[F[J++]^H&255]^D[F[J++]^H>>8&255]^I[F[J++]^H>>16&255]^C[F[J++]^H>>>24]^A[F[J++]]^N[F[J++]]^k[F[J++]]^E[F[J++]]^_[F[J++]]^w[F[J++]]^m[F[J++]]^g[F[J++]]^f[F[J++]]^u[F[J++]]^i[F[J++]]^t[F[J++]];for(ce+=15;J<ce;)H=H>>>8^t[(H^F[J++])&255];return~H}function X(F,Y){for(var H=Y^-1,ce=0,J=F.length,V=0,xe=0;ce<J;)V=F.charCodeAt(ce++),V<128?H=H>>>8^t[(H^V)&255]:V<2048?(H=H>>>8^t[(H^(192|V>>6&31))&255],H=H>>>8^t[(H^(128|V&63))&255]):V>=55296&&V<57344?(V=(V&1023)+64,xe=F.charCodeAt(ce++)&1023,H=H>>>8^t[(H^(240|V>>8&7))&255],H=H>>>8^t[(H^(128|V>>2&63))&255],H=H>>>8^t[(H^(128|xe>>6&15|(V&3)<<4))&255],H=H>>>8^t[(H^(128|xe&63))&255]):(H=H>>>8^t[(H^(224|V>>12&15))&255],H=H>>>8^t[(H^(128|V>>6&63))&255],H=H>>>8^t[(H^(128|V&63))&255]);return~H}return e.table=t,e.bstr=B,e.buf=U,e.str=X,e})(),Wt=(function(){var r={};r.version="1.2.1";function t(ae,ue){for(var he=ae.split("/"),me=ue.split("/"),we=0,_e=0,Ye=Math.min(he.length,me.length);we<Ye;++we){if(_e=he[we].length-me[we].length)return _e;if(he[we]!=me[we])return he[we]<me[we]?-1:1}return he.length-me.length}function n(ae){if(ae.charAt(ae.length-1)=="/")return ae.slice(0,-1).indexOf("/")===-1?ae:n(ae.slice(0,-1));var ue=ae.lastIndexOf("/");return ue===-1?ae:ae.slice(0,ue+1)}function a(ae){if(ae.charAt(ae.length-1)=="/")return a(ae.slice(0,-1));var ue=ae.lastIndexOf("/");return ue===-1?ae:ae.slice(ue+1)}function i(ae,ue){typeof ue=="string"&&(ue=new Date(ue));var he=ue.getHours();he=he<<6|ue.getMinutes(),he=he<<5|ue.getSeconds()>>>1,ae.write_shift(2,he);var me=ue.getFullYear()-1980;me=me<<4|ue.getMonth()+1,me=me<<5|ue.getDate(),ae.write_shift(2,me)}function u(ae){var ue=ae.read_shift(2)&65535,he=ae.read_shift(2)&65535,me=new Date,we=he&31;he>>>=5;var _e=he&15;he>>>=4,me.setMilliseconds(0),me.setFullYear(he+1980),me.setMonth(_e-1),me.setDate(we);var Ye=ue&31;ue>>>=5;var ct=ue&63;return ue>>>=6,me.setHours(ue),me.setMinutes(ct),me.setSeconds(Ye<<1),me}function f(ae){Ra(ae,0);for(var ue={},he=0;ae.l<=ae.length-4;){var me=ae.read_shift(2),we=ae.read_shift(2),_e=ae.l+we,Ye={};me===21589&&(he=ae.read_shift(1),he&1&&(Ye.mtime=ae.read_shift(4)),we>5&&(he&2&&(Ye.atime=ae.read_shift(4)),he&4&&(Ye.ctime=ae.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3))),ae.l=_e,ue[me]=Ye}return ue}var g;function m(){return g||(g={})}function w(ae,ue){if(ae[0]==80&&ae[1]==75)return Qr(ae,ue);if((ae[0]|32)==109&&(ae[1]|32)==105)return Rt(ae,ue);if(ae.length<512)throw new Error("CFB file size "+ae.length+" < 512");var he=3,me=512,we=0,_e=0,Ye=0,ct=0,ie=0,Se=[],Ne=ae.slice(0,512);Ra(Ne,0);var Ze=_(Ne);switch(he=Ze[0],he){case 3:me=512;break;case 4:me=4096;break;case 0:if(Ze[1]==0)return Qr(ae,ue);default:throw new Error("Major Version: Expected 3 or 4 saw "+he)}me!==512&&(Ne=ae.slice(0,me),Ra(Ne,28));var dt=ae.slice(0,me);E(Ne,he);var gt=Ne.read_shift(4,"i");if(he===3&&gt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+gt);Ne.l+=4,Ye=Ne.read_shift(4,"i"),Ne.l+=4,Ne.chk("00100000","Mini Stream Cutoff Size: "),ct=Ne.read_shift(4,"i"),we=Ne.read_shift(4,"i"),ie=Ne.read_shift(4,"i"),_e=Ne.read_shift(4,"i");for(var ht=-1,wt=0;wt<109&&(ht=Ne.read_shift(4,"i"),!(ht<0));++wt)Se[wt]=ht;var It=k(ae,me);C(ie,_e,It,me,Se);var ot=D(It,Ye,Se,me);ot[Ye].name="!Directory",we>0&&ct!==xe&&(ot[ct].name="!MiniFAT"),ot[Se[0]].name="!FAT",ot.fat_addrs=Se,ot.ssz=me;var Br={},$t=[],jn=[],si=[];O(Ye,ot,It,$t,we,Br,jn,ct),N(jn,si,$t),$t.shift();var cr={FileIndex:jn,FullPaths:si};return ue&&ue.raw&&(cr.raw={header:dt,sectors:It}),cr}function _(ae){if(ae[ae.l]==80&&ae[ae.l+1]==75)return[0,0];ae.chk(W,"Header Signature: "),ae.l+=16;var ue=ae.read_shift(2,"u");return[ae.read_shift(2,"u"),ue]}function E(ae,ue){var he=9;switch(ae.l+=2,he=ae.read_shift(2)){case 9:if(ue!=3)throw new Error("Sector Shift: Expected 9 saw "+he);break;case 12:if(ue!=4)throw new Error("Sector Shift: Expected 12 saw "+he);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+he)}ae.chk("0600","Mini Sector Shift: "),ae.chk("000000000000","Reserved: ")}function k(ae,ue){for(var he=Math.ceil(ae.length/ue)-1,me=[],we=1;we<he;++we)me[we-1]=ae.slice(we*ue,(we+1)*ue);return me[he-1]=ae.slice(he*ue),me}function N(ae,ue,he){for(var me=0,we=0,_e=0,Ye=0,ct=0,ie=he.length,Se=[],Ne=[];me<ie;++me)Se[me]=Ne[me]=me,ue[me]=he[me];for(;ct<Ne.length;++ct)me=Ne[ct],we=ae[me].L,_e=ae[me].R,Ye=ae[me].C,Se[me]===me&&(we!==-1&&Se[we]!==we&&(Se[me]=Se[we]),_e!==-1&&Se[_e]!==_e&&(Se[me]=Se[_e])),Ye!==-1&&(Se[Ye]=me),we!==-1&&me!=Se[me]&&(Se[we]=Se[me],Ne.lastIndexOf(we)<ct&&Ne.push(we)),_e!==-1&&me!=Se[me]&&(Se[_e]=Se[me],Ne.lastIndexOf(_e)<ct&&Ne.push(_e));for(me=1;me<ie;++me)Se[me]===me&&(_e!==-1&&Se[_e]!==_e?Se[me]=Se[_e]:we!==-1&&Se[we]!==we&&(Se[me]=Se[we]));for(me=1;me<ie;++me)if(ae[me].type!==0){if(ct=me,ct!=Se[ct])do ct=Se[ct],ue[me]=ue[ct]+"/"+ue[me];while(ct!==0&&Se[ct]!==-1&&ct!=Se[ct]);Se[me]=-1}for(ue[0]+="/",me=1;me<ie;++me)ae[me].type!==2&&(ue[me]+="/")}function A(ae,ue,he){for(var me=ae.start,we=ae.size,_e=[],Ye=me;he&&we>0&&Ye>=0;)_e.push(ue.slice(Ye*V,Ye*V+V)),we-=V,Ye=ec(he,Ye*4);return _e.length===0?ft(0):va(_e).slice(0,ae.size)}function C(ae,ue,he,me,we){var _e=xe;if(ae===xe){if(ue!==0)throw new Error("DIFAT chain shorter than expected")}else if(ae!==-1){var Ye=he[ae],ct=(me>>>2)-1;if(!Ye)return;for(var ie=0;ie<ct&&(_e=ec(Ye,ie*4))!==xe;++ie)we.push(_e);C(ec(Ye,me-4),ue-1,he,me,we)}}function I(ae,ue,he,me,we){var _e=[],Ye=[];we||(we=[]);var ct=me-1,ie=0,Se=0;for(ie=ue;ie>=0;){we[ie]=!0,_e[_e.length]=ie,Ye.push(ae[ie]);var Ne=he[Math.floor(ie*4/me)];if(Se=ie*4&ct,me<4+Se)throw new Error("FAT boundary crossed: "+ie+" 4 "+me);if(!ae[Ne])break;ie=ec(ae[Ne],Se)}return{nodes:_e,data:g_([Ye])}}function D(ae,ue,he,me){var we=ae.length,_e=[],Ye=[],ct=[],ie=[],Se=me-1,Ne=0,Ze=0,dt=0,gt=0;for(Ne=0;Ne<we;++Ne)if(ct=[],dt=Ne+ue,dt>=we&&(dt-=we),!Ye[dt]){ie=[];var ht=[];for(Ze=dt;Ze>=0;){ht[Ze]=!0,Ye[Ze]=!0,ct[ct.length]=Ze,ie.push(ae[Ze]);var wt=he[Math.floor(Ze*4/me)];if(gt=Ze*4&Se,me<4+gt)throw new Error("FAT boundary crossed: "+Ze+" 4 "+me);if(!ae[wt]||(Ze=ec(ae[wt],gt),ht[Ze]))break}_e[dt]={nodes:ct,data:g_([ie])}}return _e}function O(ae,ue,he,me,we,_e,Ye,ct){for(var ie=0,Se=me.length?2:0,Ne=ue[ae].data,Ze=0,dt=0,gt;Ze<Ne.length;Ze+=128){var ht=Ne.slice(Ze,Ze+128);Ra(ht,64),dt=ht.read_shift(2),gt=Jp(ht,0,dt-Se),me.push(gt);var wt={name:gt,type:ht.read_shift(1),color:ht.read_shift(1),L:ht.read_shift(4,"i"),R:ht.read_shift(4,"i"),C:ht.read_shift(4,"i"),clsid:ht.read_shift(16),state:ht.read_shift(4,"i"),start:0,size:0},It=ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2);It!==0&&(wt.ct=B(ht,ht.l-8));var ot=ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2);ot!==0&&(wt.mt=B(ht,ht.l-8)),wt.start=ht.read_shift(4,"i"),wt.size=ht.read_shift(4,"i"),wt.size<0&&wt.start<0&&(wt.size=wt.type=0,wt.start=xe,wt.name=""),wt.type===5?(ie=wt.start,we>0&&ie!==xe&&(ue[ie].name="!StreamData")):wt.size>=4096?(wt.storage="fat",ue[wt.start]===void 0&&(ue[wt.start]=I(he,wt.start,ue.fat_addrs,ue.ssz)),ue[wt.start].name=wt.name,wt.content=ue[wt.start].data.slice(0,wt.size)):(wt.storage="minifat",wt.size<0?wt.size=0:ie!==xe&&wt.start!==xe&&ue[ie]&&(wt.content=A(wt,ue[ie].data,(ue[ct]||{}).data))),wt.content&&Ra(wt.content,0),_e[gt]=wt,Ye.push(wt)}}function B(ae,ue){return new Date((Ts(ae,ue+4)/1e7*Math.pow(2,32)+Ts(ae,ue)/1e7-11644473600)*1e3)}function U(ae,ue){return m(),w(g.readFileSync(ae),ue)}function X(ae,ue){var he=ue&&ue.type;switch(he||Sr&&Buffer.isBuffer(ae)&&(he="buffer"),he||"base64"){case"file":return U(ae,ue);case"base64":return w(Os(Ms(ae)),ue);case"binary":return w(Os(ae),ue)}return w(ae,ue)}function F(ae,ue){var he=ue||{},me=he.root||"Root Entry";if(ae.FullPaths||(ae.FullPaths=[]),ae.FileIndex||(ae.FileIndex=[]),ae.FullPaths.length!==ae.FileIndex.length)throw new Error("inconsistent CFB structure");ae.FullPaths.length===0&&(ae.FullPaths[0]=me+"/",ae.FileIndex[0]={name:me,type:5}),he.CLSID&&(ae.FileIndex[0].clsid=he.CLSID),Y(ae)}function Y(ae){var ue="Sh33tJ5";if(!Wt.find(ae,"/"+ue)){var he=ft(4);he[0]=55,he[1]=he[3]=50,he[2]=54,ae.FileIndex.push({name:ue,type:2,content:he,size:4,L:69,R:69,C:69}),ae.FullPaths.push(ae.FullPaths[0]+ue),H(ae)}}function H(ae,ue){F(ae);for(var he=!1,me=!1,we=ae.FullPaths.length-1;we>=0;--we){var _e=ae.FileIndex[we];switch(_e.type){case 0:me?he=!0:(ae.FileIndex.pop(),ae.FullPaths.pop());break;case 1:case 2:case 5:me=!0,isNaN(_e.R*_e.L*_e.C)&&(he=!0),_e.R>-1&&_e.L>-1&&_e.R==_e.L&&(he=!0);break;default:he=!0;break}}if(!(!he&&!ue)){var Ye=new Date(1987,1,19),ct=0,ie=Object.create?Object.create(null):{},Se=[];for(we=0;we<ae.FullPaths.length;++we)ie[ae.FullPaths[we]]=!0,ae.FileIndex[we].type!==0&&Se.push([ae.FullPaths[we],ae.FileIndex[we]]);for(we=0;we<Se.length;++we){var Ne=n(Se[we][0]);me=ie[Ne],me||(Se.push([Ne,{name:a(Ne).replace("/",""),type:1,clsid:be,ct:Ye,mt:Ye,content:null}]),ie[Ne]=!0)}for(Se.sort(function(gt,ht){return t(gt[0],ht[0])}),ae.FullPaths=[],ae.FileIndex=[],we=0;we<Se.length;++we)ae.FullPaths[we]=Se[we][0],ae.FileIndex[we]=Se[we][1];for(we=0;we<Se.length;++we){var Ze=ae.FileIndex[we],dt=ae.FullPaths[we];if(Ze.name=a(dt).replace("/",""),Ze.L=Ze.R=Ze.C=-(Ze.color=1),Ze.size=Ze.content?Ze.content.length:0,Ze.start=0,Ze.clsid=Ze.clsid||be,we===0)Ze.C=Se.length>1?1:-1,Ze.size=0,Ze.type=5;else if(dt.slice(-1)=="/"){for(ct=we+1;ct<Se.length&&n(ae.FullPaths[ct])!=dt;++ct);for(Ze.C=ct>=Se.length?-1:ct,ct=we+1;ct<Se.length&&n(ae.FullPaths[ct])!=n(dt);++ct);Ze.R=ct>=Se.length?-1:ct,Ze.type=1}else n(ae.FullPaths[we+1]||"")==n(dt)&&(Ze.R=we+1),Ze.type=2}}}function ce(ae,ue){var he=ue||{};if(he.fileType=="mad")return Mt(ae,he);if(H(ae),he.fileType==="zip")return Mr(ae,he);var me=(function(gt){for(var ht=0,wt=0,It=0;It<gt.FileIndex.length;++It){var ot=gt.FileIndex[It];if(ot.content){var Br=ot.content.length;Br>0&&(Br<4096?ht+=Br+63>>6:wt+=Br+511>>9)}}for(var $t=gt.FullPaths.length+3>>2,jn=ht+7>>3,si=ht+127>>7,cr=jn+wt+$t+si,ir=cr+127>>7,ur=ir<=109?0:Math.ceil((ir-109)/127);cr+ir+ur+127>>7>ir;)ur=++ir<=109?0:Math.ceil((ir-109)/127);var Dn=[1,ur,ir,si,$t,wt,ht,0];return gt.FileIndex[0].size=ht<<6,Dn[7]=(gt.FileIndex[0].start=Dn[0]+Dn[1]+Dn[2]+Dn[3]+Dn[4]+Dn[5])+(Dn[6]+7>>3),Dn})(ae),we=ft(me[7]<<9),_e=0,Ye=0;{for(_e=0;_e<8;++_e)we.write_shift(1,ne[_e]);for(_e=0;_e<8;++_e)we.write_shift(2,0);for(we.write_shift(2,62),we.write_shift(2,3),we.write_shift(2,65534),we.write_shift(2,9),we.write_shift(2,6),_e=0;_e<3;++_e)we.write_shift(2,0);for(we.write_shift(4,0),we.write_shift(4,me[2]),we.write_shift(4,me[0]+me[1]+me[2]+me[3]-1),we.write_shift(4,0),we.write_shift(4,4096),we.write_shift(4,me[3]?me[0]+me[1]+me[2]-1:xe),we.write_shift(4,me[3]),we.write_shift(-4,me[1]?me[0]-1:xe),we.write_shift(4,me[1]),_e=0;_e<109;++_e)we.write_shift(-4,_e<me[2]?me[1]+_e:-1)}if(me[1])for(Ye=0;Ye<me[1];++Ye){for(;_e<236+Ye*127;++_e)we.write_shift(-4,_e<me[2]?me[1]+_e:-1);we.write_shift(-4,Ye===me[1]-1?xe:Ye+1)}var ct=function(gt){for(Ye+=gt;_e<Ye-1;++_e)we.write_shift(-4,_e+1);gt&&(++_e,we.write_shift(-4,xe))};for(Ye=_e=0,Ye+=me[1];_e<Ye;++_e)we.write_shift(-4,fe.DIFSECT);for(Ye+=me[2];_e<Ye;++_e)we.write_shift(-4,fe.FATSECT);ct(me[3]),ct(me[4]);for(var ie=0,Se=0,Ne=ae.FileIndex[0];ie<ae.FileIndex.length;++ie)Ne=ae.FileIndex[ie],Ne.content&&(Se=Ne.content.length,!(Se<4096)&&(Ne.start=Ye,ct(Se+511>>9)));for(ct(me[6]+7>>3);we.l&511;)we.write_shift(-4,fe.ENDOFCHAIN);for(Ye=_e=0,ie=0;ie<ae.FileIndex.length;++ie)Ne=ae.FileIndex[ie],Ne.content&&(Se=Ne.content.length,!(!Se||Se>=4096)&&(Ne.start=Ye,ct(Se+63>>6)));for(;we.l&511;)we.write_shift(-4,fe.ENDOFCHAIN);for(_e=0;_e<me[4]<<2;++_e){var Ze=ae.FullPaths[_e];if(!Ze||Ze.length===0){for(ie=0;ie<17;++ie)we.write_shift(4,0);for(ie=0;ie<3;++ie)we.write_shift(4,-1);for(ie=0;ie<12;++ie)we.write_shift(4,0);continue}Ne=ae.FileIndex[_e],_e===0&&(Ne.start=Ne.size?Ne.start-1:xe);var dt=_e===0&&he.root||Ne.name;if(Se=2*(dt.length+1),we.write_shift(64,dt,"utf16le"),we.write_shift(2,Se),we.write_shift(1,Ne.type),we.write_shift(1,Ne.color),we.write_shift(-4,Ne.L),we.write_shift(-4,Ne.R),we.write_shift(-4,Ne.C),Ne.clsid)we.write_shift(16,Ne.clsid,"hex");else for(ie=0;ie<4;++ie)we.write_shift(4,0);we.write_shift(4,Ne.state||0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,Ne.start),we.write_shift(4,Ne.size),we.write_shift(4,0)}for(_e=1;_e<ae.FileIndex.length;++_e)if(Ne=ae.FileIndex[_e],Ne.size>=4096)if(we.l=Ne.start+1<<9,Sr&&Buffer.isBuffer(Ne.content))Ne.content.copy(we,we.l,0,Ne.size),we.l+=Ne.size+511&-512;else{for(ie=0;ie<Ne.size;++ie)we.write_shift(1,Ne.content[ie]);for(;ie&511;++ie)we.write_shift(1,0)}for(_e=1;_e<ae.FileIndex.length;++_e)if(Ne=ae.FileIndex[_e],Ne.size>0&&Ne.size<4096)if(Sr&&Buffer.isBuffer(Ne.content))Ne.content.copy(we,we.l,0,Ne.size),we.l+=Ne.size+63&-64;else{for(ie=0;ie<Ne.size;++ie)we.write_shift(1,Ne.content[ie]);for(;ie&63;++ie)we.write_shift(1,0)}if(Sr)we.l=we.length;else for(;we.l<we.length;)we.write_shift(1,0);return we}function J(ae,ue){var he=ae.FullPaths.map(function(ie){return ie.toUpperCase()}),me=he.map(function(ie){var Se=ie.split("/");return Se[Se.length-(ie.slice(-1)=="/"?2:1)]}),we=!1;ue.charCodeAt(0)===47?(we=!0,ue=he[0].slice(0,-1)+ue):we=ue.indexOf("/")!==-1;var _e=ue.toUpperCase(),Ye=we===!0?he.indexOf(_e):me.indexOf(_e);if(Ye!==-1)return ae.FileIndex[Ye];var ct=!_e.match(Zu);for(_e=_e.replace(Za,""),ct&&(_e=_e.replace(Zu,"!")),Ye=0;Ye<he.length;++Ye)if((ct?he[Ye].replace(Zu,"!"):he[Ye]).replace(Za,"")==_e||(ct?me[Ye].replace(Zu,"!"):me[Ye]).replace(Za,"")==_e)return ae.FileIndex[Ye];return null}var V=64,xe=-2,W="d0cf11e0a1b11ae1",ne=[208,207,17,224,161,177,26,225],be="00000000000000000000000000000000",fe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:xe,FREESECT:-1,HEADER_SIGNATURE:W,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:be,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ve(ae,ue,he){m();var me=ce(ae,he);g.writeFileSync(ue,me)}function ge(ae){for(var ue=new Array(ae.length),he=0;he<ae.length;++he)ue[he]=String.fromCharCode(ae[he]);return ue.join("")}function We(ae,ue){var he=ce(ae,ue);switch(ue&&ue.type||"buffer"){case"file":return m(),g.writeFileSync(ue.filename,he),he;case"binary":return typeof he=="string"?he:ge(he);case"base64":return _d(typeof he=="string"?he:ge(he));case"buffer":if(Sr)return Buffer.isBuffer(he)?he:Nl(he);case"array":return typeof he=="string"?Os(he):he}return he}var re;function L(ae){try{var ue=ae.InflateRaw,he=new ue;if(he._processChunk(new Uint8Array([3,0]),he._finishFlushFlag),he.bytesRead)re=ae;else throw new Error("zlib does not expose bytesRead")}catch(me){console.error("cannot use native zlib: "+(me.message||me))}}function q(ae,ue){if(!re)return or(ae,ue);var he=re.InflateRaw,me=new he,we=me._processChunk(ae.slice(ae.l),me._finishFlushFlag);return ae.l+=me.bytesRead,we}function P(ae){return re?re.deflateRawSync(ae):At(ae)}var Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Be(ae){var ue=(ae<<1|ae<<11)&139536|(ae<<5|ae<<15)&558144;return(ue>>16|ue>>8|ue)&255}for(var Pe=typeof Uint8Array<"u",et=Pe?new Uint8Array(256):[],ut=0;ut<256;++ut)et[ut]=Be(ut);function ve(ae,ue){var he=et[ae&255];return ue<=8?he>>>8-ue:(he=he<<8|et[ae>>8&255],ue<=16?he>>>16-ue:(he=he<<8|et[ae>>16&255],he>>>24-ue))}function Ie(ae,ue){var he=ue&7,me=ue>>>3;return(ae[me]|(he<=6?0:ae[me+1]<<8))>>>he&3}function z(ae,ue){var he=ue&7,me=ue>>>3;return(ae[me]|(he<=5?0:ae[me+1]<<8))>>>he&7}function De(ae,ue){var he=ue&7,me=ue>>>3;return(ae[me]|(he<=4?0:ae[me+1]<<8))>>>he&15}function Te(ae,ue){var he=ue&7,me=ue>>>3;return(ae[me]|(he<=3?0:ae[me+1]<<8))>>>he&31}function le(ae,ue){var he=ue&7,me=ue>>>3;return(ae[me]|(he<=1?0:ae[me+1]<<8))>>>he&127}function de(ae,ue,he){var me=ue&7,we=ue>>>3,_e=(1<<he)-1,Ye=ae[we]>>>me;return he<8-me||(Ye|=ae[we+1]<<8-me,he<16-me)||(Ye|=ae[we+2]<<16-me,he<24-me)||(Ye|=ae[we+3]<<24-me),Ye&_e}function Ee(ae,ue,he){var me=ue&7,we=ue>>>3;return me<=5?ae[we]|=(he&7)<<me:(ae[we]|=he<<me&255,ae[we+1]=(he&7)>>8-me),ue+3}function at(ae,ue,he){var me=ue&7,we=ue>>>3;return he=(he&1)<<me,ae[we]|=he,ue+1}function Fe(ae,ue,he){var me=ue&7,we=ue>>>3;return he<<=me,ae[we]|=he&255,he>>>=8,ae[we+1]=he,ue+8}function He(ae,ue,he){var me=ue&7,we=ue>>>3;return he<<=me,ae[we]|=he&255,he>>>=8,ae[we+1]=he&255,ae[we+2]=he>>>8,ue+16}function je(ae,ue){var he=ae.length,me=2*he>ue?2*he:ue+5,we=0;if(he>=ue)return ae;if(Sr){var _e=Zy(me);if(ae.copy)ae.copy(_e);else for(;we<ae.length;++we)_e[we]=ae[we];return _e}else if(Pe){var Ye=new Uint8Array(me);if(Ye.set)Ye.set(ae);else for(;we<he;++we)Ye[we]=ae[we];return Ye}return ae.length=me,ae}function Ke(ae){for(var ue=new Array(ae),he=0;he<ae;++he)ue[he]=0;return ue}function it(ae,ue,he){var me=1,we=0,_e=0,Ye=0,ct=0,ie=ae.length,Se=Pe?new Uint16Array(32):Ke(32);for(_e=0;_e<32;++_e)Se[_e]=0;for(_e=ie;_e<he;++_e)ae[_e]=0;ie=ae.length;var Ne=Pe?new Uint16Array(ie):Ke(ie);for(_e=0;_e<ie;++_e)Se[we=ae[_e]]++,me<we&&(me=we),Ne[_e]=0;for(Se[0]=0,_e=1;_e<=me;++_e)Se[_e+16]=ct=ct+Se[_e-1]<<1;for(_e=0;_e<ie;++_e)ct=ae[_e],ct!=0&&(Ne[_e]=Se[ct+16]++);var Ze=0;for(_e=0;_e<ie;++_e)if(Ze=ae[_e],Ze!=0)for(ct=ve(Ne[_e],me)>>me-Ze,Ye=(1<<me+4-Ze)-1;Ye>=0;--Ye)ue[ct|Ye<<Ze]=Ze&15|_e<<4;return me}var qe=Pe?new Uint16Array(512):Ke(512),Me=Pe?new Uint16Array(32):Ke(32);if(!Pe){for(var Xe=0;Xe<512;++Xe)qe[Xe]=0;for(Xe=0;Xe<32;++Xe)Me[Xe]=0}(function(){for(var ae=[],ue=0;ue<32;ue++)ae.push(5);it(ae,Me,32);var he=[];for(ue=0;ue<=143;ue++)he.push(8);for(;ue<=255;ue++)he.push(9);for(;ue<=279;ue++)he.push(7);for(;ue<=287;ue++)he.push(8);it(he,qe,288)})();var St=(function(){for(var ue=Pe?new Uint8Array(32768):[],he=0,me=0;he<Le.length-1;++he)for(;me<Le[he+1];++me)ue[me]=he;for(;me<32768;++me)ue[me]=29;var we=Pe?new Uint8Array(259):[];for(he=0,me=0;he<pe.length-1;++he)for(;me<pe[he+1];++me)we[me]=he;function _e(ct,ie){for(var Se=0;Se<ct.length;){var Ne=Math.min(65535,ct.length-Se),Ze=Se+Ne==ct.length;for(ie.write_shift(1,+Ze),ie.write_shift(2,Ne),ie.write_shift(2,~Ne&65535);Ne-- >0;)ie[ie.l++]=ct[Se++]}return ie.l}function Ye(ct,ie){for(var Se=0,Ne=0,Ze=Pe?new Uint16Array(32768):[];Ne<ct.length;){var dt=Math.min(65535,ct.length-Ne);if(dt<10){for(Se=Ee(ie,Se,+(Ne+dt==ct.length)),Se&7&&(Se+=8-(Se&7)),ie.l=Se/8|0,ie.write_shift(2,dt),ie.write_shift(2,~dt&65535);dt-- >0;)ie[ie.l++]=ct[Ne++];Se=ie.l*8;continue}Se=Ee(ie,Se,+(Ne+dt==ct.length)+2);for(var gt=0;dt-- >0;){var ht=ct[Ne];gt=(gt<<5^ht)&32767;var wt=-1,It=0;if((wt=Ze[gt])&&(wt|=Ne&-32768,wt>Ne&&(wt-=32768),wt<Ne))for(;ct[wt+It]==ct[Ne+It]&&It<250;)++It;if(It>2){ht=we[It],ht<=22?Se=Fe(ie,Se,et[ht+1]>>1)-1:(Fe(ie,Se,3),Se+=5,Fe(ie,Se,et[ht-23]>>5),Se+=3);var ot=ht<8?0:ht-4>>2;ot>0&&(He(ie,Se,It-pe[ht]),Se+=ot),ht=ue[Ne-wt],Se=Fe(ie,Se,et[ht]>>3),Se-=3;var Br=ht<4?0:ht-2>>1;Br>0&&(He(ie,Se,Ne-wt-Le[ht]),Se+=Br);for(var $t=0;$t<It;++$t)Ze[gt]=Ne&32767,gt=(gt<<5^ct[Ne])&32767,++Ne;dt-=It-1}else ht<=143?ht=ht+48:Se=at(ie,Se,1),Se=Fe(ie,Se,et[ht]),Ze[gt]=Ne&32767,++Ne}Se=Fe(ie,Se,0)-1}return ie.l=(Se+7)/8|0,ie.l}return function(ie,Se){return ie.length<8?_e(ie,Se):Ye(ie,Se)}})();function At(ae){var ue=ft(50+Math.floor(ae.length*1.1)),he=St(ae,ue);return ue.slice(0,he)}var Ot=Pe?new Uint16Array(32768):Ke(32768),sr=Pe?new Uint16Array(32768):Ke(32768),Nt=Pe?new Uint16Array(128):Ke(128),mt=1,Ht=1;function Dt(ae,ue){var he=Te(ae,ue)+257;ue+=5;var me=Te(ae,ue)+1;ue+=5;var we=De(ae,ue)+4;ue+=4;for(var _e=0,Ye=Pe?new Uint8Array(19):Ke(19),ct=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ie=1,Se=Pe?new Uint8Array(8):Ke(8),Ne=Pe?new Uint8Array(8):Ke(8),Ze=Ye.length,dt=0;dt<we;++dt)Ye[Z[dt]]=_e=z(ae,ue),ie<_e&&(ie=_e),Se[_e]++,ue+=3;var gt=0;for(Se[0]=0,dt=1;dt<=ie;++dt)Ne[dt]=gt=gt+Se[dt-1]<<1;for(dt=0;dt<Ze;++dt)(gt=Ye[dt])!=0&&(ct[dt]=Ne[gt]++);var ht=0;for(dt=0;dt<Ze;++dt)if(ht=Ye[dt],ht!=0){gt=et[ct[dt]]>>8-ht;for(var wt=(1<<7-ht)-1;wt>=0;--wt)Nt[gt|wt<<ht]=ht&7|dt<<3}var It=[];for(ie=1;It.length<he+me;)switch(gt=Nt[le(ae,ue)],ue+=gt&7,gt>>>=3){case 16:for(_e=3+Ie(ae,ue),ue+=2,gt=It[It.length-1];_e-- >0;)It.push(gt);break;case 17:for(_e=3+z(ae,ue),ue+=3;_e-- >0;)It.push(0);break;case 18:for(_e=11+le(ae,ue),ue+=7;_e-- >0;)It.push(0);break;default:It.push(gt),ie<gt&&(ie=gt);break}var ot=It.slice(0,he),Br=It.slice(he);for(dt=he;dt<286;++dt)ot[dt]=0;for(dt=me;dt<30;++dt)Br[dt]=0;return mt=it(ot,Ot,286),Ht=it(Br,sr,30),ue}function Yt(ae,ue){if(ae[0]==3&&!(ae[1]&3))return[yo(ue),2];for(var he=0,me=0,we=Zy(ue||1<<18),_e=0,Ye=we.length>>>0,ct=0,ie=0;(me&1)==0;){if(me=z(ae,he),he+=3,me>>>1)me>>1==1?(ct=9,ie=5):(he=Dt(ae,he),ct=mt,ie=Ht);else{he&7&&(he+=8-(he&7));var Se=ae[he>>>3]|ae[(he>>>3)+1]<<8;if(he+=32,Se>0)for(!ue&&Ye<_e+Se&&(we=je(we,_e+Se),Ye=we.length);Se-- >0;)we[_e++]=ae[he>>>3],he+=8;continue}for(;;){!ue&&Ye<_e+32767&&(we=je(we,_e+32767),Ye=we.length);var Ne=de(ae,he,ct),Ze=me>>>1==1?qe[Ne]:Ot[Ne];if(he+=Ze&15,Ze>>>=4,(Ze>>>8&255)===0)we[_e++]=Ze;else{if(Ze==256)break;Ze-=257;var dt=Ze<8?0:Ze-4>>2;dt>5&&(dt=0);var gt=_e+pe[Ze];dt>0&&(gt+=de(ae,he,dt),he+=dt),Ne=de(ae,he,ie),Ze=me>>>1==1?Me[Ne]:sr[Ne],he+=Ze&15,Ze>>>=4;var ht=Ze<4?0:Ze-2>>1,wt=Le[Ze];for(ht>0&&(wt+=de(ae,he,ht),he+=ht),!ue&&Ye<gt&&(we=je(we,gt+100),Ye=we.length);_e<gt;)we[_e]=we[_e-wt],++_e}}}return ue?[we,he+7>>>3]:[we.slice(0,_e),he+7>>>3]}function or(ae,ue){var he=ae.slice(ae.l||0),me=Yt(he,ue);return ae.l+=me[1],me[0]}function _r(ae,ue){if(ae)typeof console<"u"&&console.error(ue);else throw new Error(ue)}function Qr(ae,ue){var he=ae;Ra(he,0);var me=[],we=[],_e={FileIndex:me,FullPaths:we};F(_e,{root:ue.root});for(var Ye=he.length-4;(he[Ye]!=80||he[Ye+1]!=75||he[Ye+2]!=5||he[Ye+3]!=6)&&Ye>=0;)--Ye;he.l=Ye+4,he.l+=4;var ct=he.read_shift(2);he.l+=6;var ie=he.read_shift(4);for(he.l=ie,Ye=0;Ye<ct;++Ye){he.l+=20;var Se=he.read_shift(4),Ne=he.read_shift(4),Ze=he.read_shift(2),dt=he.read_shift(2),gt=he.read_shift(2);he.l+=8;var ht=he.read_shift(4),wt=f(he.slice(he.l+Ze,he.l+Ze+dt));he.l+=Ze+dt+gt;var It=he.l;he.l=ht+4,Xt(he,Se,Ne,_e,wt),he.l=It}return _e}function Xt(ae,ue,he,me,we){ae.l+=2;var _e=ae.read_shift(2),Ye=ae.read_shift(2),ct=u(ae);if(_e&8257)throw new Error("Unsupported ZIP encryption");for(var ie=ae.read_shift(4),Se=ae.read_shift(4),Ne=ae.read_shift(4),Ze=ae.read_shift(2),dt=ae.read_shift(2),gt="",ht=0;ht<Ze;++ht)gt+=String.fromCharCode(ae[ae.l++]);if(dt){var wt=f(ae.slice(ae.l,ae.l+dt));(wt[21589]||{}).mt&&(ct=wt[21589].mt),((we||{})[21589]||{}).mt&&(ct=we[21589].mt)}ae.l+=dt;var It=ae.slice(ae.l,ae.l+Se);switch(Ye){case 8:It=q(ae,Ne);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var ot=!1;_e&8&&(ie=ae.read_shift(4),ie==134695760&&(ie=ae.read_shift(4),ot=!0),Se=ae.read_shift(4),Ne=ae.read_shift(4)),Se!=ue&&_r(ot,"Bad compressed size: "+ue+" != "+Se),Ne!=he&&_r(ot,"Bad uncompressed size: "+he+" != "+Ne),Fr(me,gt,It,{unsafe:!0,mt:ct})}function Mr(ae,ue){var he=ue||{},me=[],we=[],_e=ft(1),Ye=he.compression?8:0,ct=0,ie=0,Se=0,Ne=0,Ze=0,dt=ae.FullPaths[0],gt=dt,ht=ae.FileIndex[0],wt=[],It=0;for(ie=1;ie<ae.FullPaths.length;++ie)if(gt=ae.FullPaths[ie].slice(dt.length),ht=ae.FileIndex[ie],!(!ht.size||!ht.content||gt=="Sh33tJ5")){var ot=Ne,Br=ft(gt.length);for(Se=0;Se<gt.length;++Se)Br.write_shift(1,gt.charCodeAt(Se)&127);Br=Br.slice(0,Br.l),wt[Ze]=MR.buf(ht.content,0);var $t=ht.content;Ye==8&&($t=P($t)),_e=ft(30),_e.write_shift(4,67324752),_e.write_shift(2,20),_e.write_shift(2,ct),_e.write_shift(2,Ye),ht.mt?i(_e,ht.mt):_e.write_shift(4,0),_e.write_shift(-4,wt[Ze]),_e.write_shift(4,$t.length),_e.write_shift(4,ht.content.length),_e.write_shift(2,Br.length),_e.write_shift(2,0),Ne+=_e.length,me.push(_e),Ne+=Br.length,me.push(Br),Ne+=$t.length,me.push($t),_e=ft(46),_e.write_shift(4,33639248),_e.write_shift(2,0),_e.write_shift(2,20),_e.write_shift(2,ct),_e.write_shift(2,Ye),_e.write_shift(4,0),_e.write_shift(-4,wt[Ze]),_e.write_shift(4,$t.length),_e.write_shift(4,ht.content.length),_e.write_shift(2,Br.length),_e.write_shift(2,0),_e.write_shift(2,0),_e.write_shift(2,0),_e.write_shift(2,0),_e.write_shift(4,0),_e.write_shift(4,ot),It+=_e.l,we.push(_e),It+=Br.length,we.push(Br),++Ze}return _e=ft(22),_e.write_shift(4,101010256),_e.write_shift(2,0),_e.write_shift(2,0),_e.write_shift(2,Ze),_e.write_shift(2,Ze),_e.write_shift(4,It),_e.write_shift(4,Ne),_e.write_shift(2,0),va([va(me),va(we),_e])}var zr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function En(ae,ue){if(ae.ctype)return ae.ctype;var he=ae.name||"",me=he.match(/\.([^\.]+)$/);return me&&zr[me[1]]||ue&&(me=(he=ue).match(/[\.\\]([^\.\\])+$/),me&&zr[me[1]])?zr[me[1]]:"application/octet-stream"}function Wr(ae){for(var ue=_d(ae),he=[],me=0;me<ue.length;me+=76)he.push(ue.slice(me,me+76));return he.join(`\r
`)+`\r
`}function Or(ae){var ue=ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Se){var Ne=Se.charCodeAt(0).toString(16).toUpperCase();return"="+(Ne.length==1?"0"+Ne:Ne)});ue=ue.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ue.charAt(0)==`
`&&(ue="=0D"+ue.slice(1)),ue=ue.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var he=[],me=ue.split(`\r
`),we=0;we<me.length;++we){var _e=me[we];if(_e.length==0){he.push("");continue}for(var Ye=0;Ye<_e.length;){var ct=76,ie=_e.slice(Ye,Ye+ct);ie.charAt(ct-1)=="="?ct--:ie.charAt(ct-2)=="="?ct-=2:ie.charAt(ct-3)=="="&&(ct-=3),ie=_e.slice(Ye,Ye+ct),Ye+=ct,Ye<_e.length&&(ie+="="),he.push(ie)}}return he.join(`\r
`)}function ze(ae){for(var ue=[],he=0;he<ae.length;++he){for(var me=ae[he];he<=ae.length&&me.charAt(me.length-1)=="=";)me=me.slice(0,me.length-1)+ae[++he];ue.push(me)}for(var we=0;we<ue.length;++we)ue[we]=ue[we].replace(/[=][0-9A-Fa-f]{2}/g,function(_e){return String.fromCharCode(parseInt(_e.slice(1),16))});return Os(ue.join(`\r
`))}function kt(ae,ue,he){for(var me="",we="",_e="",Ye,ct=0;ct<10;++ct){var ie=ue[ct];if(!ie||ie.match(/^\s*$/))break;var Se=ie.match(/^(.*?):\s*([^\s].*)$/);if(Se)switch(Se[1].toLowerCase()){case"content-location":me=Se[2].trim();break;case"content-type":_e=Se[2].trim();break;case"content-transfer-encoding":we=Se[2].trim();break}}switch(++ct,we.toLowerCase()){case"base64":Ye=Os(Ms(ue.slice(ct).join("")));break;case"quoted-printable":Ye=ze(ue.slice(ct));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+we)}var Ne=Fr(ae,me.slice(he.length),Ye,{unsafe:!0});_e&&(Ne.ctype=_e)}function Rt(ae,ue){if(ge(ae.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var he=ue&&ue.root||"",me=(Sr&&Buffer.isBuffer(ae)?ae.toString("binary"):ge(ae)).split(`\r
`),we=0,_e="";for(we=0;we<me.length;++we)if(_e=me[we],!!/^Content-Location:/i.test(_e)&&(_e=_e.slice(_e.indexOf("file")),he||(he=_e.slice(0,_e.lastIndexOf("/")+1)),_e.slice(0,he.length)!=he))for(;he.length>0&&(he=he.slice(0,he.length-1),he=he.slice(0,he.lastIndexOf("/")+1),_e.slice(0,he.length)!=he););var Ye=(me[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var ct="--"+(Ye[1]||""),ie=[],Se=[],Ne={FileIndex:ie,FullPaths:Se};F(Ne);var Ze,dt=0;for(we=0;we<me.length;++we){var gt=me[we];gt!==ct&&gt!==ct+"--"||(dt++&&kt(Ne,me.slice(Ze,we),he),Ze=we)}return Ne}function Mt(ae,ue){var he=ue||{},me=he.boundary||"SheetJS";me="------="+me;for(var we=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+me.slice(2)+'"',"","",""],_e=ae.FullPaths[0],Ye=_e,ct=ae.FileIndex[0],ie=1;ie<ae.FullPaths.length;++ie)if(Ye=ae.FullPaths[ie].slice(_e.length),ct=ae.FileIndex[ie],!(!ct.size||!ct.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(It){return"_x"+It.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(It){return"_u"+It.charCodeAt(0).toString(16)+"_"});for(var Se=ct.content,Ne=Sr&&Buffer.isBuffer(Se)?Se.toString("binary"):ge(Se),Ze=0,dt=Math.min(1024,Ne.length),gt=0,ht=0;ht<=dt;++ht)(gt=Ne.charCodeAt(ht))>=32&&gt<128&&++Ze;var wt=Ze>=dt*4/5;we.push(me),we.push("Content-Location: "+(he.root||"file:///C:/SheetJS/")+Ye),we.push("Content-Transfer-Encoding: "+(wt?"quoted-printable":"base64")),we.push("Content-Type: "+En(ct,Ye)),we.push(""),we.push(wt?Or(Ne):Wr(Ne))}return we.push(me+`--\r
`),we.join(`\r
`)}function pr(ae){var ue={};return F(ue,ae),ue}function Fr(ae,ue,he,me){var we=me&&me.unsafe;we||F(ae);var _e=!we&&Wt.find(ae,ue);if(!_e){var Ye=ae.FullPaths[0];ue.slice(0,Ye.length)==Ye?Ye=ue:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+ue).replace("//","/")),_e={name:a(ue),type:2},ae.FileIndex.push(_e),ae.FullPaths.push(Ye),we||Wt.utils.cfb_gc(ae)}return _e.content=he,_e.size=he?he.length:0,me&&(me.CLSID&&(_e.clsid=me.CLSID),me.mt&&(_e.mt=me.mt),me.ct&&(_e.ct=me.ct)),_e}function $r(ae,ue){F(ae);var he=Wt.find(ae,ue);if(he){for(var me=0;me<ae.FileIndex.length;++me)if(ae.FileIndex[me]==he)return ae.FileIndex.splice(me,1),ae.FullPaths.splice(me,1),!0}return!1}function br(ae,ue,he){F(ae);var me=Wt.find(ae,ue);if(me){for(var we=0;we<ae.FileIndex.length;++we)if(ae.FileIndex[we]==me)return ae.FileIndex[we].name=a(he),ae.FullPaths[we]=he,!0}return!1}function Wn(ae){H(ae,!0)}return r.find=J,r.read=X,r.parse=w,r.write=We,r.writeFile=Ve,r.utils={cfb_new:pr,cfb_add:Fr,cfb_del:$r,cfb_mov:br,cfb_gc:Wn,ReadShift:nd,CheckField:zk,prep_blob:Ra,bconcat:va,use_zlib:L,_deflateRaw:At,_inflateRaw:or,consts:fe},r})();function FR(e){return typeof e=="string"?M1(e):Array.isArray(e)?oR(e):e}function $d(e,r,t){if(typeof Deno<"u"){if(t&&typeof r=="string")switch(t){case"utf8":r=new TextEncoder(t).encode(r);break;case"binary":r=M1(r);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(e,r)}var n=t=="utf8"?Pi(r):r;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([FR(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var u=document.createElement("a");if(u.download!=null)return u.download=e,u.href=i,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var f=File(e);return f.open("w"),f.encoding="binary",Array.isArray(r)&&(r=So(r)),f.write(r),f.close(),r}catch(g){if(!g.message||!g.message.match(/onstruct/))throw g}throw new Error("cannot save file "+e)}function LR(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var r=File(e);r.open("r"),r.encoding="binary";var t=r.read();return r.close(),t}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Gn(e){for(var r=Object.keys(e),t=[],n=0;n<r.length;++n)Object.prototype.hasOwnProperty.call(e,r[n])&&t.push(r[n]);return t}function s_(e,r){for(var t=[],n=Gn(e),a=0;a!==n.length;++a)t[e[n[a]][r]]==null&&(t[e[n[a]][r]]=n[a]);return t}function L1(e){for(var r=[],t=Gn(e),n=0;n!==t.length;++n)r[e[t[n]]]=t[n];return r}function B1(e){for(var r=[],t=Gn(e),n=0;n!==t.length;++n)r[e[t[n]]]=parseInt(t[n],10);return r}function BR(e){for(var r=[],t=Gn(e),n=0;n!==t.length;++n)r[e[t[n]]]==null&&(r[e[t[n]]]=[]),r[e[t[n]]].push(t[n]);return r}var h1=new Date(1899,11,30,0,0,0);function ma(e,r){var t=e.getTime(),n=h1.getTime()+(e.getTimezoneOffset()-h1.getTimezoneOffset())*6e4;return(t-n)/(1440*60*1e3)}var vk=new Date,PR=h1.getTime()+(vk.getTimezoneOffset()-h1.getTimezoneOffset())*6e4,i_=vk.getTimezoneOffset();function P1(e){var r=new Date;return r.setTime(e*24*60*60*1e3+PR),r.getTimezoneOffset()!==i_&&r.setTime(r.getTime()+(r.getTimezoneOffset()-i_)*6e4),r}function UR(e){var r=0,t=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=a.length;++i)if(a[i]){switch(t=1,i>3&&(n=!0),a[i].slice(a[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[i].slice(a[i].length-1));case"D":t*=24;case"H":t*=60;case"M":if(n)t*=60;else throw new Error("Unsupported ISO Duration Field: M")}r+=t*parseInt(a[i],10)}return r}var l_=new Date("2017-02-19T19:06:09.000Z"),yk=isNaN(l_.getFullYear())?new Date("2/19/17"):l_,zR=yk.getFullYear()==2017;function _n(e,r){var t=new Date(e);if(zR)return r>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):r<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(e instanceof Date)return e;if(yk.getFullYear()==1917&&!isNaN(t.getFullYear())){var n=t.getFullYear();return e.indexOf(""+n)>-1||t.setFullYear(t.getFullYear()+100),t}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function gc(e,r){if(Sr&&Buffer.isBuffer(e)){if(r){if(e[0]==255&&e[1]==254)return Pi(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Pi(ok(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(r){if(e[0]==255&&e[1]==254)return Pi(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Pi(new TextDecoder("utf-16be").decode(e.slice(2)))}var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return t[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function kn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=kn(e[t]));return r}function zn(e,r){for(var t="";t.length<r;)t+=e;return t}function wi(e){var r=Number(e);if(!isNaN(r))return isFinite(r)?r:NaN;if(!/\d/.test(e))return r;var t=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(r=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return t=-t,i}),!isNaN(r=Number(n)))?r/t:r}var HR=["january","february","march","april","may","june","july","august","september","october","november","december"];function F0(e){var r=new Date(e),t=new Date(NaN),n=r.getYear(),a=r.getMonth(),i=r.getDate();if(isNaN(i))return t;var u=e.toLowerCase();if(u.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(u=u.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),u.length>3&&HR.indexOf(u)==-1)return t}else if(u.match(/[a-z]/))return t;return n<0||n>8099?t:(a>0||i>1)&&n!=101?r:e.match(/[^-0-9:,\/\\]/)?t:r}var VR=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(t,n,a){if(e||typeof n=="string")return t.split(n);for(var i=t.split(n),u=[i[0]],f=1;f<i.length;++f)u.push(a),u.push(i[f]);return u}})();function _k(e){return e?e.content&&e.type?gc(e.content,!0):e.data?$u(e.data):e.asNodeBuffer&&Sr?$u(e.asNodeBuffer().toString("binary")):e.asBinary?$u(e.asBinary()):e._data&&e._data.getContent?$u(gc(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function kk(e){if(!e)return null;if(e.data)return Yy(e.data);if(e.asNodeBuffer&&Sr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var r=e._data.getContent();return typeof r=="string"?Yy(r):Array.prototype.slice.call(r)}return e.content&&e.type?e.content:null}function GR(e){return e&&e.name.slice(-4)===".bin"?kk(e):_k(e)}function Zs(e,r){for(var t=e.FullPaths||Gn(e.files),n=r.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),i=0;i<t.length;++i){var u=t[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==u||a==u)return e.files?e.files[t[i]]:e.FileIndex[i]}return null}function Xp(e,r){var t=Zs(e,r);if(t==null)throw new Error("Cannot find file "+r+" in zip");return t}function sa(e,r,t){if(!t)return GR(Xp(e,r));if(!r)return null;try{return sa(e,r)}catch{return null}}function Is(e,r,t){if(!t)return _k(Xp(e,r));if(!r)return null;try{return Is(e,r)}catch{return null}}function WR(e,r,t){return kk(Xp(e,r))}function o_(e){for(var r=e.FullPaths||Gn(e.files),t=[],n=0;n<r.length;++n)r[n].slice(-1)!="/"&&t.push(r[n].replace(/^Root Entry[\/]/,""));return t.sort()}function yr(e,r,t){if(e.FullPaths){if(typeof t=="string"){var n;return Sr?n=Nl(t):n=cR(t),Wt.utils.cfb_add(e,r,n)}Wt.utils.cfb_add(e,r,t)}else e.file(r,t)}function Kp(){return Wt.utils.cfb_new()}function Ek(e,r){switch(r.type){case"base64":return Wt.read(e,{type:"base64"});case"binary":return Wt.read(e,{type:"binary"});case"buffer":case"array":return Wt.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+r.type)}function Ju(e,r){if(e.charAt(0)=="/")return e.slice(1);var t=r.split("/");r.slice(-1)!="/"&&t.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?t.pop():a!=="."&&t.push(a)}return t.join("/")}var Jn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,XR=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,c_=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,KR=/<[^>]*>/g,Ha=Jn.match(c_)?c_:KR,qR=/<\w*:/,YR=/<(\/?)\w+:/;function rr(e,r,t){for(var n={},a=0,i=0;a!==e.length&&!((i=e.charCodeAt(a))===32||i===10||i===13);++a);if(r||(n[0]=e.slice(0,a)),a===e.length)return n;var u=e.match(XR),f=0,g="",m=0,w="",_="",E=1;if(u)for(m=0;m!=u.length;++m){for(_=u[m],i=0;i!=_.length&&_.charCodeAt(i)!==61;++i);for(w=_.slice(0,i).trim();_.charCodeAt(i+1)==32;)++i;for(E=(a=_.charCodeAt(i+1))==34||a==39?1:0,g=_.slice(i+1+E,_.length-E),f=0;f!=w.length&&w.charCodeAt(f)!==58;++f);if(f===w.length)w.indexOf("_")>0&&(w=w.slice(0,w.indexOf("_"))),n[w]=g,n[w.toLowerCase()]=g;else{var k=(f===5&&w.slice(0,5)==="xmlns"?"xmlns":"")+w.slice(f+1);if(n[k]&&w.slice(f-3,f)=="ext")continue;n[k]=g,n[k.toLowerCase()]=g}}return n}function Gi(e){return e.replace(YR,"<$1")}var Sk={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},qp=L1(Sk),Pr=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,r=/_x([\da-fA-F]{4})_/ig;return function t(n){var a=n+"",i=a.indexOf("<![CDATA[");if(i==-1)return a.replace(e,function(f,g){return Sk[f]||String.fromCharCode(parseInt(g,f.indexOf("x")>-1?16:10))||f}).replace(r,function(f,g){return String.fromCharCode(parseInt(g,16))});var u=a.indexOf("]]>");return t(a.slice(0,i))+a.slice(i+9,u)+t(a.slice(u+3))}})(),Yp=/[&<>'"]/g,$R=/[\u0000-\u0008\u000b-\u001f]/g;function an(e){var r=e+"";return r.replace(Yp,function(t){return qp[t]}).replace($R,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function u_(e){return an(e).replace(/ /g,"_x0020_")}var Ak=/[\u0000-\u001f]/g;function $p(e){var r=e+"";return r.replace(Yp,function(t){return qp[t]}).replace(/\n/g,"<br/>").replace(Ak,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function ZR(e){var r=e+"";return r.replace(Yp,function(t){return qp[t]}).replace(Ak,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}var d_=(function(){var e=/&#(\d+);/g;function r(t,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,r)}})();function JR(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function vn(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function og(e){for(var r="",t=0,n=0,a=0,i=0,u=0,f=0;t<e.length;){if(n=e.charCodeAt(t++),n<128){r+=String.fromCharCode(n);continue}if(a=e.charCodeAt(t++),n>191&&n<224){u=(n&31)<<6,u|=a&63,r+=String.fromCharCode(u);continue}if(i=e.charCodeAt(t++),n<240){r+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}u=e.charCodeAt(t++),f=((n&7)<<18|(a&63)<<12|(i&63)<<6|u&63)-65536,r+=String.fromCharCode(55296+(f>>>10&1023)),r+=String.fromCharCode(56320+(f&1023))}return r}function f_(e){var r=yo(2*e.length),t,n,a=1,i=0,u=0,f;for(n=0;n<e.length;n+=a)a=1,(f=e.charCodeAt(n))<128?t=f:f<224?(t=(f&31)*64+(e.charCodeAt(n+1)&63),a=2):f<240?(t=(f&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,t=(f&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),t-=65536,u=55296+(t>>>10&1023),t=56320+(t&1023)),u!==0&&(r[i++]=u&255,r[i++]=u>>>8,u=0),r[i++]=t%256,r[i++]=t>>>8;return r.slice(0,i).toString("ucs2")}function h_(e){return Nl(e,"binary").toString("utf8")}var Ih="foo bar baz",cn=Sr&&(h_(Ih)==og(Ih)&&h_||f_(Ih)==og(Ih)&&f_)||og,Pi=Sr?function(e){return Nl(e,"utf8").toString("binary")}:function(e){for(var r=[],t=0,n=0,a=0;t<e.length;)switch(n=e.charCodeAt(t++),!0){case n<128:r.push(String.fromCharCode(n));break;case n<2048:r.push(String.fromCharCode(192+(n>>6))),r.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(t++)-56320+(n<<10),r.push(String.fromCharCode(240+(a>>18&7))),r.push(String.fromCharCode(144+(a>>12&63))),r.push(String.fromCharCode(128+(a>>6&63))),r.push(String.fromCharCode(128+(a&63)));break;default:r.push(String.fromCharCode(224+(n>>12))),r.push(String.fromCharCode(128+(n>>6&63))),r.push(String.fromCharCode(128+(n&63)))}return r.join("")},Ed=(function(){var e={};return function(t,n){var a=t+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",n||"")}})(),Nk=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(r){return[new RegExp("&"+r[0]+";","ig"),r[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}})(),QR=(function(){var e={};return function(t){return e[t]!==void 0?e[t]:e[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}})(),eO=/<\/?(?:vt:)?variant>/g,tO=/<(?:vt:)([^>]*)>([\s\S]*)</;function x_(e,r){var t=rr(e),n=e.match(QR(t.baseType))||[],a=[];if(n.length!=t.size){if(r.WTF)throw new Error("unexpected vector length "+n.length+" != "+t.size);return a}return n.forEach(function(i){var u=i.replace(eO,"").match(tO);u&&a.push({v:cn(u[2]),t:u[1]})}),a}var Ck=/(^\s|\s$|\n)/;function Oa(e,r){return"<"+e+(r.match(Ck)?' xml:space="preserve"':"")+">"+r+"</"+e+">"}function Sd(e){return Gn(e).map(function(r){return" "+r+'="'+e[r]+'"'}).join("")}function Tt(e,r,t){return"<"+e+(t!=null?Sd(t):"")+(r!=null?(r.match(Ck)?' xml:space="preserve"':"")+">"+r+"</"+e:"/")+">"}function tp(e,r){try{return e.toISOString().replace(/\.\d*/,"")}catch(t){if(r)throw t}return""}function rO(e,r){switch(typeof e){case"string":var t=Tt("vt:lpwstr",an(e));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return Tt((e|0)==e?"vt:i4":"vt:r8",an(String(e)));case"boolean":return Tt("vt:bool",e?"true":"false")}if(e instanceof Date)return Tt("vt:filetime",tp(e));throw new Error("Unable to serialize "+e)}function Zp(e){if(Sr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return cn(So(Vp(e)));throw new Error("Bad input format: expected Buffer or string")}var Ad=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,xa={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ec=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Cs={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function nO(e,r){for(var t=1-2*(e[r+7]>>>7),n=((e[r+7]&127)<<4)+(e[r+6]>>>4&15),a=e[r+6]&15,i=5;i>=0;--i)a=a*256+e[r+i];return n==2047?a==0?t*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),t*Math.pow(2,n-52)*a)}function aO(e,r,t){var n=(r<0||1/r==-1/0?1:0)<<7,a=0,i=0,u=n?-r:r;isFinite(u)?u==0?a=i=0:(a=Math.floor(Math.log(u)/Math.LN2),i=u*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(r)?26985:0);for(var f=0;f<=5;++f,i/=256)e[t+f]=i&255;e[t+6]=(a&15)<<4|i&15,e[t+7]=a>>4|n}var m_=function(e){for(var r=[],t=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=t)r.push.apply(r,e[0][n].slice(a,a+t));return r},g_=Sr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(r){return Buffer.isBuffer(r)?r:Nl(r)})):m_(e)}:m_,p_=function(e,r,t){for(var n=[],a=r;a<t;a+=2)n.push(String.fromCharCode(wl(e,a)));return n.join("").replace(Za,"")},Jp=Sr?function(e,r,t){return Buffer.isBuffer(e)?e.toString("utf16le",r,t).replace(Za,""):p_(e,r,t)}:p_,b_=function(e,r,t){for(var n=[],a=r;a<r+t;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},Tk=Sr?function(e,r,t){return Buffer.isBuffer(e)?e.toString("hex",r,r+t):b_(e,r,t)}:b_,w_=function(e,r,t){for(var n=[],a=r;a<t;a++)n.push(String.fromCharCode(S0(e,a)));return n.join("")},Zd=Sr?function(r,t,n){return Buffer.isBuffer(r)?r.toString("utf8",t,n):w_(r,t,n)}:w_,jk=function(e,r){var t=Ts(e,r);return t>0?Zd(e,r+4,r+4+t-1):""},Rk=jk,Ok=function(e,r){var t=Ts(e,r);return t>0?Zd(e,r+4,r+4+t-1):""},Ik=Ok,Dk=function(e,r){var t=2*Ts(e,r);return t>0?Zd(e,r+4,r+4+t-1):""},Mk=Dk,Fk=function(r,t){var n=Ts(r,t);return n>0?Jp(r,t+4,t+4+n):""},Lk=Fk,Bk=function(e,r){var t=Ts(e,r);return t>0?Zd(e,r+4,r+4+t):""},Pk=Bk,Uk=function(e,r){return nO(e,r)},x1=Uk,Qp=function(r){return Array.isArray(r)||typeof Uint8Array<"u"&&r instanceof Uint8Array};Sr&&(Rk=function(r,t){if(!Buffer.isBuffer(r))return jk(r,t);var n=r.readUInt32LE(t);return n>0?r.toString("utf8",t+4,t+4+n-1):""},Ik=function(r,t){if(!Buffer.isBuffer(r))return Ok(r,t);var n=r.readUInt32LE(t);return n>0?r.toString("utf8",t+4,t+4+n-1):""},Mk=function(r,t){if(!Buffer.isBuffer(r))return Dk(r,t);var n=2*r.readUInt32LE(t);return r.toString("utf16le",t+4,t+4+n-1)},Lk=function(r,t){if(!Buffer.isBuffer(r))return Fk(r,t);var n=r.readUInt32LE(t);return r.toString("utf16le",t+4,t+4+n)},Pk=function(r,t){if(!Buffer.isBuffer(r))return Bk(r,t);var n=r.readUInt32LE(t);return r.toString("utf8",t+4,t+4+n)},x1=function(r,t){return Buffer.isBuffer(r)?r.readDoubleLE(t):Uk(r,t)},Qp=function(r){return Buffer.isBuffer(r)||Array.isArray(r)||typeof Uint8Array<"u"&&r instanceof Uint8Array});var S0=function(e,r){return e[r]},wl=function(e,r){return e[r+1]*256+e[r]},sO=function(e,r){var t=e[r+1]*256+e[r];return t<32768?t:(65535-t+1)*-1},Ts=function(e,r){return e[r+3]*(1<<24)+(e[r+2]<<16)+(e[r+1]<<8)+e[r]},ec=function(e,r){return e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]},iO=function(e,r){return e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]};function nd(e,r){var t="",n,a,i=[],u,f,g,m;switch(r){case"dbcs":if(m=this.l,Sr&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*e).toString("utf16le");else for(g=0;g<e;++g)t+=String.fromCharCode(wl(this,m)),m+=2;e*=2;break;case"utf8":t=Zd(this,this.l,this.l+e);break;case"utf16le":e*=2,t=Jp(this,this.l,this.l+e);break;case"wstr":return nd.call(this,e,"dbcs");case"lpstr-ansi":t=Rk(this,this.l),e=4+Ts(this,this.l);break;case"lpstr-cp":t=Ik(this,this.l),e=4+Ts(this,this.l);break;case"lpwstr":t=Mk(this,this.l),e=4+2*Ts(this,this.l);break;case"lpp4":e=4+Ts(this,this.l),t=Lk(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ts(this,this.l),t=Pk(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,t="";(u=S0(this,this.l+e++))!==0;)i.push(Oh(u));t=i.join("");break;case"_wstr":for(e=0,t="";(u=wl(this,this.l+e))!==0;)i.push(Oh(u)),e+=2;e+=2,t=i.join("");break;case"dbcs-cont":for(t="",m=this.l,g=0;g<e;++g){if(this.lens&&this.lens.indexOf(m)!==-1)return u=S0(this,m),this.l=m+1,f=nd.call(this,e-g,u?"dbcs-cont":"sbcs-cont"),i.join("")+f;i.push(Oh(wl(this,m))),m+=2}t=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(t="",m=this.l,g=0;g!=e;++g){if(this.lens&&this.lens.indexOf(m)!==-1)return u=S0(this,m),this.l=m+1,f=nd.call(this,e-g,u?"dbcs-cont":"sbcs-cont"),i.join("")+f;i.push(Oh(S0(this,m))),m+=1}t=i.join("");break;default:switch(e){case 1:return n=S0(this,this.l),this.l++,n;case 2:return n=(r==="i"?sO:wl)(this,this.l),this.l+=2,n;case 4:case-4:return r==="i"||(this[this.l+3]&128)===0?(n=(e>0?ec:iO)(this,this.l),this.l+=4,n):(a=Ts(this,this.l),this.l+=4,a);case 8:case-8:if(r==="f")return e==8?a=x1(this,this.l):a=x1([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:t=Tk(this,this.l,e);break}}return this.l+=e,t}var lO=function(e,r,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24&255},oO=function(e,r,t){e[t]=r&255,e[t+1]=r>>8&255,e[t+2]=r>>16&255,e[t+3]=r>>24&255},cO=function(e,r,t){e[t]=r&255,e[t+1]=r>>>8&255};function uO(e,r,t){var n=0,a=0;if(t==="dbcs"){for(a=0;a!=r.length;++a)cO(this,r.charCodeAt(a),this.l+2*a);n=2*r.length}else if(t==="sbcs"){for(r=r.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=r.length;++a)this[this.l+a]=r.charCodeAt(a)&255;n=r.length}else if(t==="hex"){for(;a<e;++a)this[this.l++]=parseInt(r.slice(2*a,2*a+2),16)||0;return this}else if(t==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(r.length,e);++a){var u=r.charCodeAt(a);this[this.l++]=u&255,this[this.l++]=u>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=r&255;break;case 2:n=2,this[this.l]=r&255,r>>>=8,this[this.l+1]=r&255;break;case 3:n=3,this[this.l]=r&255,r>>>=8,this[this.l+1]=r&255,r>>>=8,this[this.l+2]=r&255;break;case 4:n=4,lO(this,r,this.l);break;case 8:if(n=8,t==="f"){aO(this,r,this.l);break}case 16:break;case-4:n=4,oO(this,r,this.l);break}return this.l+=n,this}function zk(e,r){var t=Tk(this,this.l,e.length>>1);if(t!==e)throw new Error(r+"Expected "+e+" saw "+t);this.l+=e.length>>1}function Ra(e,r){e.l=r,e.read_shift=nd,e.chk=zk,e.write_shift=uO}function za(e,r){e.l+=r}function ft(e){var r=yo(e);return Ra(r,0),r}function Cl(e,r,t){if(e){var n,a,i;Ra(e,e.l||0);for(var u=e.length,f=0,g=0;e.l<u;){f=e.read_shift(1),f&128&&(f=(f&127)+((e.read_shift(1)&127)<<7));var m=Od[f]||Od[65535];for(n=e.read_shift(1),i=n&127,a=1;a<4&&n&128;++a)i+=((n=e.read_shift(1))&127)<<7*a;g=e.l+i;var w=m.f&&m.f(e,i,t);if(e.l=g,r(w,m,f))return}}}function us(){var e=[],r=Sr?256:2048,t=function(m){var w=ft(m);return Ra(w,0),w},n=t(r),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(m){return n&&m<n.length-n.l?n:(a(),n=t(Math.max(m+1,r)))},u=function(){return a(),va(e)},f=function(m){a(),n=m,n.l==null&&(n.l=n.length),i(r)};return{next:i,push:f,end:u,_bufs:e}}function vt(e,r,t,n){var a=+r,i;if(!isNaN(a)){n||(n=Od[a].p||(t||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var u=e.next(i);a<=127?u.write_shift(1,a):(u.write_shift(1,(a&127)+128),u.write_shift(1,a>>7));for(var f=0;f!=4;++f)if(n>=128)u.write_shift(1,(n&127)+128),n>>=7;else{u.write_shift(1,n);break}n>0&&Qp(t)&&e.push(t)}}function ad(e,r,t){var n=kn(e);if(r.s?(n.cRel&&(n.c+=r.s.c),n.rRel&&(n.r+=r.s.r)):(n.cRel&&(n.c+=r.c),n.rRel&&(n.r+=r.r)),!t||t.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function v_(e,r,t){var n=kn(e);return n.s=ad(n.s,r.s,t),n.e=ad(n.e,r.s,t),n}function sd(e,r){if(e.cRel&&e.c<0)for(e=kn(e);e.c<0;)e.c+=r>8?16384:256;if(e.rRel&&e.r<0)for(e=kn(e);e.r<0;)e.r+=r>8?1048576:r>5?65536:16384;var t=tr(e);return!e.cRel&&e.cRel!=null&&(t=hO(t)),!e.rRel&&e.rRel!=null&&(t=dO(t)),t}function cg(e,r){return e.s.r==0&&!e.s.rRel&&e.e.r==(r.biff>=12?1048575:r.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+On(e.s.c)+":"+(e.e.cRel?"":"$")+On(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(r.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Zn(e.s.r)+":"+(e.e.rRel?"":"$")+Zn(e.e.r):sd(e.s,r.biff)+":"+sd(e.e,r.biff)}function e2(e){return parseInt(fO(e),10)-1}function Zn(e){return""+(e+1)}function dO(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function fO(e){return e.replace(/\$(\d+)$/,"$1")}function t2(e){for(var r=xO(e),t=0,n=0;n!==r.length;++n)t=26*t+r.charCodeAt(n)-64;return t-1}function On(e){if(e<0)throw new Error("invalid column "+e);var r="";for(++e;e;e=Math.floor((e-1)/26))r=String.fromCharCode((e-1)%26+65)+r;return r}function hO(e){return e.replace(/^([A-Z])/,"$$$1")}function xO(e){return e.replace(/^\$([A-Z])/,"$1")}function mO(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function In(e){for(var r=0,t=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?r=10*r+(a-48):a>=65&&a<=90&&(t=26*t+(a-64))}return{c:t-1,r:r-1}}function tr(e){for(var r=e.c+1,t="";r;r=(r-1)/26|0)t=String.fromCharCode((r-1)%26+65)+t;return t+(e.r+1)}function ds(e){var r=e.indexOf(":");return r==-1?{s:In(e),e:In(e)}:{s:In(e.slice(0,r)),e:In(e.slice(r+1))}}function gr(e,r){return typeof r>"u"||typeof r=="number"?gr(e.s,e.e):(typeof e!="string"&&(e=tr(e)),typeof r!="string"&&(r=tr(r)),e==r?e:e+":"+r)}function Ur(e){var r={s:{c:0,r:0},e:{c:0,r:0}},t=0,n=0,a=0,i=e.length;for(t=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)t=26*t+a;for(r.s.c=--t,t=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)t=10*t+a;if(r.s.r=--t,n===i||a!=10)return r.e.c=r.s.c,r.e.r=r.s.r,r;for(++n,t=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)t=26*t+a;for(r.e.c=--t,t=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)t=10*t+a;return r.e.r=--t,r}function y_(e,r){var t=e.t=="d"&&r instanceof Date;if(e.z!=null)try{return e.w=ri(e.z,t?ma(r):r)}catch{}try{return e.w=ri((e.XF||{}).numFmtId||(t?14:0),t?ma(r):r)}catch{return""+r}}function Sl(e,r,t){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&t&&t.dateNF&&(e.z=t.dateNF),e.t=="e"?Tl[e.v]||e.v:r==null?y_(e,e.v):y_(e,r))}function Ao(e,r){var t=r&&r.sheet?r.sheet:"Sheet1",n={};return n[t]=e,{SheetNames:[t],Sheets:n}}function Hk(e,r,t){var n=t||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),u=0,f=0;if(i&&n.origin!=null){if(typeof n.origin=="number")u=n.origin;else{var g=typeof n.origin=="string"?In(n.origin):n.origin;u=g.r,f=g.c}i["!ref"]||(i["!ref"]="A1:A1")}var m={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var w=Ur(i["!ref"]);m.s.c=w.s.c,m.s.r=w.s.r,m.e.c=Math.max(m.e.c,w.e.c),m.e.r=Math.max(m.e.r,w.e.r),u==-1&&(m.e.r=u=w.e.r+1)}for(var _=0;_!=r.length;++_)if(r[_]){if(!Array.isArray(r[_]))throw new Error("aoa_to_sheet expects an array of arrays");for(var E=0;E!=r[_].length;++E)if(!(typeof r[_][E]>"u")){var k={v:r[_][E]},N=u+_,A=f+E;if(m.s.r>N&&(m.s.r=N),m.s.c>A&&(m.s.c=A),m.e.r<N&&(m.e.r=N),m.e.c<A&&(m.e.c=A),r[_][E]&&typeof r[_][E]=="object"&&!Array.isArray(r[_][E])&&!(r[_][E]instanceof Date))k=r[_][E];else if(Array.isArray(k.v)&&(k.f=r[_][E][1],k.v=k.v[0]),k.v===null)if(k.f)k.t="n";else if(n.nullError)k.t="e",k.v=0;else if(n.sheetStubs)k.t="z";else continue;else typeof k.v=="number"?k.t="n":typeof k.v=="boolean"?k.t="b":k.v instanceof Date?(k.z=n.dateNF||er[14],n.cellDates?(k.t="d",k.w=ri(k.z,ma(k.v))):(k.t="n",k.v=ma(k.v),k.w=ri(k.z,k.v))):k.t="s";if(a)i[N]||(i[N]=[]),i[N][A]&&i[N][A].z&&(k.z=i[N][A].z),i[N][A]=k;else{var C=tr({c:A,r:N});i[C]&&i[C].z&&(k.z=i[C].z),i[C]=k}}}return m.s.c<1e7&&(i["!ref"]=gr(m)),i}function Y0(e,r){return Hk(null,e,r)}function gO(e){return e.read_shift(4,"i")}function vi(e,r){return r||(r=ft(4)),r.write_shift(4,e),r}function Ua(e){var r=e.read_shift(4);return r===0?"":e.read_shift(r,"dbcs")}function ya(e,r){var t=!1;return r==null&&(t=!0,r=ft(4+2*e.length)),r.write_shift(4,e.length),e.length>0&&r.write_shift(0,e,"dbcs"),t?r.slice(0,r.l):r}function pO(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function bO(e,r){return r||(r=ft(4)),r.write_shift(2,0),r.write_shift(2,0),r}function r2(e,r){var t=e.l,n=e.read_shift(1),a=Ua(e),i=[],u={t:a,h:a};if((n&1)!==0){for(var f=e.read_shift(4),g=0;g!=f;++g)i.push(pO(e));u.r=i}else u.r=[{ich:0,ifnt:0}];return e.l=t+r,u}function wO(e,r){var t=!1;return r==null&&(t=!0,r=ft(15+4*e.t.length)),r.write_shift(1,0),ya(e.t,r),t?r.slice(0,r.l):r}var vO=r2;function yO(e,r){var t=!1;return r==null&&(t=!0,r=ft(23+4*e.t.length)),r.write_shift(1,1),ya(e.t,r),r.write_shift(4,1),bO({},r),t?r.slice(0,r.l):r}function ai(e){var r=e.read_shift(4),t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:r,iStyleRef:t}}function Sc(e,r){return r==null&&(r=ft(8)),r.write_shift(-4,e.c),r.write_shift(3,e.iStyleRef||e.s),r.write_shift(1,0),r}function Ac(e){var r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:r}}function Nc(e,r){return r==null&&(r=ft(4)),r.write_shift(3,e.iStyleRef||e.s),r.write_shift(1,0),r}var _O=Ua,Vk=ya;function n2(e){var r=e.read_shift(4);return r===0||r===4294967295?"":e.read_shift(r,"dbcs")}function m1(e,r){var t=!1;return r==null&&(t=!0,r=ft(127)),r.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&r.write_shift(0,e,"dbcs"),t?r.slice(0,r.l):r}var kO=Ua,rp=n2,a2=m1;function s2(e){var r=e.slice(e.l,e.l+4),t=r[0]&1,n=r[0]&2;e.l+=4;var a=n===0?x1([0,0,0,0,r[0]&252,r[1],r[2],r[3]],0):ec(r,0)>>2;return t?a/100:a}function Gk(e,r){r==null&&(r=ft(4));var t=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,t=1),n)r.write_shift(-4,((t?a:e)<<2)+(t+2));else throw new Error("unsupported RkNumber "+e)}function Wk(e){var r={s:{},e:{}};return r.s.r=e.read_shift(4),r.e.r=e.read_shift(4),r.s.c=e.read_shift(4),r.e.c=e.read_shift(4),r}function EO(e,r){return r||(r=ft(16)),r.write_shift(4,e.s.r),r.write_shift(4,e.e.r),r.write_shift(4,e.s.c),r.write_shift(4,e.e.c),r}var Cc=Wk,$0=EO;function Pa(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function pc(e,r){return(r||ft(8)).write_shift(8,e,"f")}function SO(e){var r={},t=e.read_shift(1),n=t>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),u=e.read_shift(1),f=e.read_shift(1),g=e.read_shift(1);switch(e.l++,n){case 0:r.auto=1;break;case 1:r.index=a;var m=oc[a];m&&(r.rgb=Cd(m));break;case 2:r.rgb=Cd([u,f,g]);break;case 3:r.theme=a;break}return i!=0&&(r.tint=i>0?i/32767:i/32768),r}function g1(e,r){if(r||(r=ft(8)),!e||e.auto)return r.write_shift(4,0),r.write_shift(4,0),r;e.index!=null?(r.write_shift(1,2),r.write_shift(1,e.index)):e.theme!=null?(r.write_shift(1,6),r.write_shift(1,e.theme)):(r.write_shift(1,5),r.write_shift(1,0));var t=e.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),r.write_shift(2,t),!e.rgb||e.theme!=null)r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),r.write_shift(1,parseInt(n.slice(0,2),16)),r.write_shift(1,parseInt(n.slice(2,4),16)),r.write_shift(1,parseInt(n.slice(4,6),16)),r.write_shift(1,255)}return r}function AO(e){var r=e.read_shift(1);e.l++;var t={fBold:r&1,fItalic:r&2,fUnderline:r&4,fStrikeout:r&8,fOutline:r&16,fShadow:r&32,fCondense:r&64,fExtend:r&128};return t}function NO(e,r){r||(r=ft(2));var t=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return r.write_shift(1,t),r.write_shift(1,0),r}function Xk(e,r){var t={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return t[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,r==1?"lpstr":"lpwstr")}function CO(e){return Xk(e,1)}function TO(e){return Xk(e,2)}var i2=2,is=3,Dh=11,__=12,p1=19,Mh=64,jO=65,RO=71,OO=4108,IO=4126,wa=80,Kk=81,DO=[wa,Kk],np={1:{n:"CodePage",t:i2},2:{n:"Category",t:wa},3:{n:"PresentationFormat",t:wa},4:{n:"ByteCount",t:is},5:{n:"LineCount",t:is},6:{n:"ParagraphCount",t:is},7:{n:"SlideCount",t:is},8:{n:"NoteCount",t:is},9:{n:"HiddenCount",t:is},10:{n:"MultimediaClipCount",t:is},11:{n:"ScaleCrop",t:Dh},12:{n:"HeadingPairs",t:OO},13:{n:"TitlesOfParts",t:IO},14:{n:"Manager",t:wa},15:{n:"Company",t:wa},16:{n:"LinksUpToDate",t:Dh},17:{n:"CharacterCount",t:is},19:{n:"SharedDoc",t:Dh},22:{n:"HyperlinksChanged",t:Dh},23:{n:"AppVersion",t:is,p:"version"},24:{n:"DigSig",t:jO},26:{n:"ContentType",t:wa},27:{n:"ContentStatus",t:wa},28:{n:"Language",t:wa},29:{n:"Version",t:wa},255:{},2147483648:{n:"Locale",t:p1},2147483651:{n:"Behavior",t:p1},1919054434:{}},ap={1:{n:"CodePage",t:i2},2:{n:"Title",t:wa},3:{n:"Subject",t:wa},4:{n:"Author",t:wa},5:{n:"Keywords",t:wa},6:{n:"Comments",t:wa},7:{n:"Template",t:wa},8:{n:"LastAuthor",t:wa},9:{n:"RevNumber",t:wa},10:{n:"EditTime",t:Mh},11:{n:"LastPrinted",t:Mh},12:{n:"CreatedDate",t:Mh},13:{n:"ModifiedDate",t:Mh},14:{n:"PageCount",t:is},15:{n:"WordCount",t:is},16:{n:"CharCount",t:is},17:{n:"Thumbnail",t:RO},18:{n:"Application",t:wa},19:{n:"DocSecurity",t:is},255:{},2147483648:{n:"Locale",t:p1},2147483651:{n:"Behavior",t:p1},1919054434:{}},k_={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},MO=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function FO(e){return e.map(function(r){return[r>>16&255,r>>8&255,r&255]})}var LO=FO([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),oc=kn(LO),Tl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},qk={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},sp={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Fh={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function l2(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function BO(e){var r=l2();if(!e||!e.match)return r;var t={};if((e.match(Ha)||[]).forEach(function(n){var a=rr(n);switch(a[0].replace(qR,"<")){case"<?xml":break;case"<Types":r.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":t[a.Extension]=a.ContentType;break;case"<Override":r[sp[a.ContentType]]!==void 0&&r[sp[a.ContentType]].push(a.PartName);break}}),r.xmlns!==xa.CT)throw new Error("Unknown Namespace: "+r.xmlns);return r.calcchain=r.calcchains.length>0?r.calcchains[0]:"",r.sst=r.strs.length>0?r.strs[0]:"",r.style=r.styles.length>0?r.styles[0]:"",r.defaults=t,delete r.calcchains,r}function Yk(e,r){var t=BR(sp),n=[],a;n[n.length]=Jn,n[n.length]=Tt("Types",null,{xmlns:xa.CT,"xmlns:xsd":xa.xsd,"xmlns:xsi":xa.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(g){return Tt("Default",null,{Extension:g[0],ContentType:g[1]})}));var i=function(g){e[g]&&e[g].length>0&&(a=e[g][0],n[n.length]=Tt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:Fh[g][r.bookType]||Fh[g].xlsx}))},u=function(g){(e[g]||[]).forEach(function(m){n[n.length]=Tt("Override",null,{PartName:(m[0]=="/"?"":"/")+m,ContentType:Fh[g][r.bookType]||Fh[g].xlsx})})},f=function(g){(e[g]||[]).forEach(function(m){n[n.length]=Tt("Override",null,{PartName:(m[0]=="/"?"":"/")+m,ContentType:t[g][0]})})};return i("workbooks"),u("sheets"),u("charts"),f("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(f),f("vba"),f("comments"),f("threadedcomments"),f("drawings"),u("metadata"),f("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Ar={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Nd(e){var r=e.lastIndexOf("/");return e.slice(0,r+1)+"_rels/"+e.slice(r+1)+".rels"}function id(e,r){var t={"!id":{}};if(!e)return t;r.charAt(0)!=="/"&&(r="/"+r);var n={};return(e.match(Ha)||[]).forEach(function(a){var i=rr(a);if(i[0]==="<Relationship"){var u={};u.Type=i.Type,u.Target=i.Target,u.Id=i.Id,i.TargetMode&&(u.TargetMode=i.TargetMode);var f=i.TargetMode==="External"?i.Target:Ju(i.Target,r);t[f]=u,n[i.Id]=u}}),t["!id"]=n,t}function R0(e){var r=[Jn,Tt("Relationships",null,{xmlns:xa.RELS})];return Gn(e["!id"]).forEach(function(t){r[r.length]=Tt("Relationship",null,e["!id"][t])}),r.length>2&&(r[r.length]="</Relationships>",r[1]=r[1].replace("/>",">")),r.join("")}function nn(e,r,t,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),r<0)for(r=e["!idx"];e["!id"]["rId"+r];++r);if(e["!idx"]=r+1,a.Id="rId"+r,a.Type=n,a.Target=t,[Ar.HLINK,Ar.XPATH,Ar.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+r);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,r}var PO="application/vnd.oasis.opendocument.spreadsheet";function UO(e,r){for(var t=Zp(e),n,a;n=Ad.exec(t);)switch(n[3]){case"manifest":break;case"file-entry":if(a=rr(n[0],!1),a.path=="/"&&a.type!==PO)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(r&&r.WTF)throw n}}function zO(e){var r=[Jn];r.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),r.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<e.length;++t)r.push('  <manifest:file-entry manifest:full-path="'+e[t][0]+'" manifest:media-type="'+e[t][1]+`"/>
`);return r.push("</manifest:manifest>"),r.join("")}function E_(e,r,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+r+`"/>
`,`  </rdf:Description>
`].join("")}function HO(e,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+r+`"/>
`,`  </rdf:Description>
`].join("")}function VO(e){var r=[Jn];r.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=e.length;++t)r.push(E_(e[t][0],e[t][1])),r.push(HO("",e[t][0]));return r.push(E_("","Document","pkg")),r.push("</rdf:RDF>"),r.join("")}function $k(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+c1.version+"</meta:generator></office:meta></office:document-meta>"}var ei=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],GO=(function(){for(var e=new Array(ei.length),r=0;r<ei.length;++r){var t=ei[r],n="(?:"+t[0].slice(0,t[0].indexOf(":"))+":)"+t[0].slice(t[0].indexOf(":")+1);e[r]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function Zk(e){var r={};e=cn(e);for(var t=0;t<ei.length;++t){var n=ei[t],a=e.match(GO[t]);a!=null&&a.length>0&&(r[n[1]]=Pr(a[1])),n[2]==="date"&&r[n[1]]&&(r[n[1]]=_n(r[n[1]]))}return r}function ug(e,r,t,n,a){a[e]!=null||r==null||r===""||(a[e]=r,r=an(r),n[n.length]=t?Tt(e,r,t):Oa(e,r))}function Jk(e,r){var t=r||{},n=[Jn,Tt("cp:coreProperties",null,{"xmlns:cp":xa.CORE_PROPS,"xmlns:dc":xa.dc,"xmlns:dcterms":xa.dcterms,"xmlns:dcmitype":xa.dcmitype,"xmlns:xsi":xa.xsi})],a={};if(!e&&!t.Props)return n.join("");e&&(e.CreatedDate!=null&&ug("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:tp(e.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&ug("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:tp(e.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=ei.length;++i){var u=ei[i],f=t.Props&&t.Props[u[1]]!=null?t.Props[u[1]]:e?e[u[1]]:null;f===!0?f="1":f===!1?f="0":typeof f=="number"&&(f=String(f)),f!=null&&ug(u[0],f,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var cc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Qk=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function eE(e,r,t,n){var a=[];if(typeof e=="string")a=x_(e,n);else for(var i=0;i<e.length;++i)a=a.concat(e[i].map(function(w){return{v:w}}));var u=typeof r=="string"?x_(r,n).map(function(w){return w.v}):r,f=0,g=0;if(u.length>0)for(var m=0;m!==a.length;m+=2){switch(g=+a[m+1].v,a[m].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":t.Worksheets=g,t.SheetNames=u.slice(f,f+g);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":t.NamedRanges=g,t.DefinedNames=u.slice(f,f+g);break;case"Charts":case"Diagramme":t.Chartsheets=g,t.ChartNames=u.slice(f,f+g);break}f+=g}}function WO(e,r,t){var n={};return r||(r={}),e=cn(e),cc.forEach(function(a){var i=(e.match(Ed(a[0]))||[])[1];switch(a[2]){case"string":i&&(r[a[1]]=Pr(i));break;case"bool":r[a[1]]=i==="true";break;case"raw":var u=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));u&&u.length>0&&(n[a[1]]=u[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&eE(n.HeadingPairs,n.TitlesOfParts,r,t),r}function tE(e){var r=[],t=Tt;return e||(e={}),e.Application="SheetJS",r[r.length]=Jn,r[r.length]=Tt("Properties",null,{xmlns:xa.EXT_PROPS,"xmlns:vt":xa.vt}),cc.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=an(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(r[r.length]=t(n[0],a))}}),r[r.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),r[r.length]=t("TitlesOfParts",t("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+an(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),r.length>2&&(r[r.length]="</Properties>",r[1]=r[1].replace("/>",">")),r.join("")}var XO=/<[^>]+>[^<]*/g;function KO(e,r){var t={},n="",a=e.match(XO);if(a)for(var i=0;i!=a.length;++i){var u=a[i],f=rr(u);switch(f[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Pr(f.name);break;case"</property>":n=null;break;default:if(u.indexOf("<vt:")===0){var g=u.split(">"),m=g[0].slice(4),w=g[1];switch(m){case"lpstr":case"bstr":case"lpwstr":t[n]=Pr(w);break;case"bool":t[n]=vn(w);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":t[n]=parseInt(w,10);break;case"r4":case"r8":case"decimal":t[n]=parseFloat(w);break;case"filetime":case"date":t[n]=_n(w);break;case"cy":case"error":t[n]=Pr(w);break;default:if(m.slice(-1)=="/")break;r.WTF&&typeof console<"u"&&console.warn("Unexpected",u,m,g)}}else if(u.slice(0,2)!=="</"){if(r.WTF)throw new Error(u)}}}return t}function rE(e){var r=[Jn,Tt("Properties",null,{xmlns:xa.CUST_PROPS,"xmlns:vt":xa.vt})];if(!e)return r.join("");var t=1;return Gn(e).forEach(function(a){++t,r[r.length]=Tt("property",rO(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:an(a)})}),r.length>2&&(r[r.length]="</Properties>",r[1]=r[1].replace("/>",">")),r.join("")}var ip={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},dg;function qO(e,r,t){dg||(dg=L1(ip)),r=dg[r]||r,e[r]=t}function YO(e,r){var t=[];return Gn(ip).map(function(n){for(var a=0;a<ei.length;++a)if(ei[a][1]==n)return ei[a];for(a=0;a<cc.length;++a)if(cc[a][1]==n)return cc[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=r&&r.Props&&r.Props[n[1]]!=null?r.Props[n[1]]:e[n[1]];n[2]==="date"&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"Z")),typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),t.push(Oa(ip[n[1]]||n[1],a))}}),Tt("DocumentProperties",t.join(""),{xmlns:Cs.o})}function $O(e,r){var t=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Gn(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var u=0;u<ei.length;++u)if(i==ei[u][1])return;for(u=0;u<cc.length;++u)if(i==cc[u][1])return;for(u=0;u<t.length;++u)if(i==t[u])return;var f=e[i],g="string";typeof f=="number"?(g="float",f=String(f)):f===!0||f===!1?(g="boolean",f=f?"1":"0"):f=String(f),a.push(Tt(u_(i),f,{"dt:dt":g}))}}),r&&Gn(r).forEach(function(i){if(Object.prototype.hasOwnProperty.call(r,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var u=r[i],f="string";typeof u=="number"?(f="float",u=String(u)):u===!0||u===!1?(f="boolean",u=u?"1":"0"):u instanceof Date?(f="dateTime.tz",u=u.toISOString()):u=String(u),a.push(Tt(u_(i),u,{"dt:dt":f}))}}),"<"+n+' xmlns="'+Cs.o+'">'+a.join("")+"</"+n+">"}function o2(e){var r=e.read_shift(4),t=e.read_shift(4);return new Date((t/1e7*Math.pow(2,32)+r/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function ZO(e){var r=typeof e=="string"?new Date(Date.parse(e)):e,t=r.getTime()/1e3+11644473600,n=t%Math.pow(2,32),a=(t-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var u=ft(8);return u.write_shift(4,n),u.write_shift(4,a),u}function nE(e,r,t){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(t)for(;e.l-n&3;)++e.l;return a}function aE(e,r,t){var n=e.read_shift(0,"lpwstr");return n}function sE(e,r,t){return r===31?aE(e):nE(e,r,t)}function lp(e,r,t){return sE(e,r,t===!1?0:4)}function JO(e,r){if(!r)throw new Error("VtUnalignedString must have positive length");return sE(e,r,0)}function QO(e){for(var r=e.read_shift(4),t=[],n=0;n!=r;++n){var a=e.l;t[n]=e.read_shift(0,"lpwstr").replace(Za,""),e.l-a&2&&(e.l+=2)}return t}function e7(e){for(var r=e.read_shift(4),t=[],n=0;n!=r;++n)t[n]=e.read_shift(0,"lpstr-cp").replace(Za,"");return t}function t7(e){var r=e.l,t=b1(e,Kk);e[e.l]==0&&e[e.l+1]==0&&e.l-r&2&&(e.l+=2);var n=b1(e,is);return[t,n]}function r7(e){for(var r=e.read_shift(4),t=[],n=0;n<r/2;++n)t.push(t7(e));return t}function S_(e,r){for(var t=e.read_shift(4),n={},a=0;a!=t;++a){var i=e.read_shift(4),u=e.read_shift(4);n[i]=e.read_shift(u,r===1200?"utf16le":"utf8").replace(Za,"").replace(Zu,"!"),r===1200&&u%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function iE(e){var r=e.read_shift(4),t=e.slice(e.l,e.l+r);return e.l+=r,(r&3)>0&&(e.l+=4-(r&3)&3),t}function n7(e){var r={};return r.Size=e.read_shift(4),e.l+=r.Size+3-(r.Size-1)%4,r}function b1(e,r,t){var n=e.read_shift(2),a,i=t||{};if(e.l+=2,r!==__&&n!==r&&DO.indexOf(r)===-1&&!((r&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+r+" saw "+n);switch(r===__?n:r){case 2:return a=e.read_shift(2,"i"),i.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return nE(e,n,4).replace(Za,"");case 31:return aE(e);case 64:return o2(e);case 65:return iE(e);case 71:return n7(e);case 80:return lp(e,n,!i.raw).replace(Za,"");case 81:return JO(e,n).replace(Za,"");case 4108:return r7(e);case 4126:case 4127:return n==4127?QO(e):e7(e);default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+n)}}function A_(e,r){var t=ft(4),n=ft(4);switch(t.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,r);break;case 5:n=ft(8),n.write_shift(8,r,"f");break;case 11:n.write_shift(4,r?1:0);break;case 64:n=ZO(r);break;case 31:case 80:for(n=ft(4+2*(r.length+1)+(r.length%2?0:2)),n.write_shift(4,r.length+1),n.write_shift(0,r,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+r)}return va([t,n])}function N_(e,r){var t=e.l,n=e.read_shift(4),a=e.read_shift(4),i=[],u=0,f=0,g=-1,m={};for(u=0;u!=a;++u){var w=e.read_shift(4),_=e.read_shift(4);i[u]=[w,_+t]}i.sort(function(D,O){return D[1]-O[1]});var E={};for(u=0;u!=a;++u){if(e.l!==i[u][1]){var k=!0;if(u>0&&r)switch(r[i[u-1][0]].t){case 2:e.l+2===i[u][1]&&(e.l+=2,k=!1);break;case 80:e.l<=i[u][1]&&(e.l=i[u][1],k=!1);break;case 4108:e.l<=i[u][1]&&(e.l=i[u][1],k=!1);break}if((!r||u==0)&&e.l<=i[u][1]&&(k=!1,e.l=i[u][1]),k)throw new Error("Read Error: Expected address "+i[u][1]+" at "+e.l+" :"+u)}if(r){var N=r[i[u][0]];if(E[N.n]=b1(e,N.t,{raw:!0}),N.p==="version"&&(E[N.n]=String(E[N.n]>>16)+"."+("0000"+String(E[N.n]&65535)).slice(-4)),N.n=="CodePage")switch(E[N.n]){case 0:E[N.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:pi(f=E[N.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+E[N.n])}}else if(i[u][0]===1){if(f=E.CodePage=b1(e,i2),pi(f),g!==-1){var A=e.l;e.l=i[g][1],m=S_(e,f),e.l=A}}else if(i[u][0]===0){if(f===0){g=u,e.l=i[u+1][1];continue}m=S_(e,f)}else{var C=m[i[u][0]],I;switch(e[e.l]){case 65:e.l+=4,I=iE(e);break;case 30:e.l+=4,I=lp(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,I=lp(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,I=e.read_shift(4,"i");break;case 19:e.l+=4,I=e.read_shift(4);break;case 5:e.l+=4,I=e.read_shift(8,"f");break;case 11:e.l+=4,I=$n(e,4);break;case 64:e.l+=4,I=_n(o2(e));break;default:throw new Error("unparsed value: "+e[e.l])}E[C]=I}}return e.l=t+n,E}var lE=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function a7(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function C_(e,r,t){var n=ft(8),a=[],i=[],u=8,f=0,g=ft(8),m=ft(8);if(g.write_shift(4,2),g.write_shift(4,1200),m.write_shift(4,1),i.push(g),a.push(m),u+=8+g.length,!r){m=ft(8),m.write_shift(4,0),a.unshift(m);var w=[ft(4)];for(w[0].write_shift(4,e.length),f=0;f<e.length;++f){var _=e[f][0];for(g=ft(8+2*(_.length+1)+(_.length%2?0:2)),g.write_shift(4,f+2),g.write_shift(4,_.length+1),g.write_shift(0,_,"dbcs");g.l!=g.length;)g.write_shift(1,0);w.push(g)}g=va(w),i.unshift(g),u+=8+g.length}for(f=0;f<e.length;++f)if(!(r&&!r[e[f][0]])&&!(lE.indexOf(e[f][0])>-1||Qk.indexOf(e[f][0])>-1)&&e[f][1]!=null){var E=e[f][1],k=0;if(r){k=+r[e[f][0]];var N=t[k];if(N.p=="version"&&typeof E=="string"){var A=E.split(".");E=(+A[0]<<16)+(+A[1]||0)}g=A_(N.t,E)}else{var C=a7(E);C==-1&&(C=31,E=String(E)),g=A_(C,E)}i.push(g),m=ft(8),m.write_shift(4,r?k:2+f),a.push(m),u+=8+g.length}var I=8*(i.length+1);for(f=0;f<i.length;++f)a[f].write_shift(4,I),I+=i[f].length;return n.write_shift(4,u),n.write_shift(4,i.length),va([n].concat(a).concat(i))}function T_(e,r,t){var n=e.content;if(!n)return{};Ra(n,0);var a,i,u,f,g=0;n.chk("feff","Byte Order: "),n.read_shift(2);var m=n.read_shift(4),w=n.read_shift(16);if(w!==Wt.utils.consts.HEADER_CLSID&&w!==t)throw new Error("Bad PropertySet CLSID "+w);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(i=n.read_shift(16),f=n.read_shift(4),a===1&&f!==n.l)throw new Error("Length mismatch: "+f+" !== "+n.l);a===2&&(u=n.read_shift(16),g=n.read_shift(4));var _=N_(n,r),E={SystemIdentifier:m};for(var k in _)E[k]=_[k];if(E.FMTID=i,a===1)return E;if(g-n.l==2&&(n.l+=2),n.l!==g)throw new Error("Length mismatch 2: "+n.l+" !== "+g);var N;try{N=N_(n,null)}catch{}for(k in N)E[k]=N[k];return E.FMTID=[i,u],E}function j_(e,r,t,n,a,i){var u=ft(a?68:48),f=[u];u.write_shift(2,65534),u.write_shift(2,0),u.write_shift(4,842412599),u.write_shift(16,Wt.utils.consts.HEADER_CLSID,"hex"),u.write_shift(4,a?2:1),u.write_shift(16,r,"hex"),u.write_shift(4,a?68:48);var g=C_(e,t,n);if(f.push(g),a){var m=C_(a,null,null);u.write_shift(16,i,"hex"),u.write_shift(4,68+g.length),f.push(m)}return va(f)}function oo(e,r){return e.read_shift(r),null}function s7(e,r){r||(r=ft(e));for(var t=0;t<e;++t)r.write_shift(1,0);return r}function i7(e,r,t){for(var n=[],a=e.l+r;e.l<a;)n.push(t(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function $n(e,r){return e.read_shift(r)===1}function Ya(e,r){return r||(r=ft(2)),r.write_shift(2,+!!e),r}function ia(e){return e.read_shift(2,"u")}function Js(e,r){return r||(r=ft(2)),r.write_shift(2,e),r}function oE(e,r){return i7(e,r,ia)}function l7(e){var r=e.read_shift(1),t=e.read_shift(1);return t===1?r:r===1}function cE(e,r,t){return t||(t=ft(2)),t.write_shift(1,r=="e"?+e:+!!e),t.write_shift(1,r=="e"?1:0),t}function Jd(e,r,t){var n=e.read_shift(t&&t.biff>=12?2:1),a="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else t.biff==12&&(a="wstr");t.biff>=2&&t.biff<=5&&(a="cpstr");var u=n?e.read_shift(n,a):"";return u}function o7(e){var r=e.read_shift(2),t=e.read_shift(1),n=t&4,a=t&8,i=1+(t&1),u=0,f,g={};a&&(u=e.read_shift(2)),n&&(f=e.read_shift(4));var m=i==2?"dbcs-cont":"sbcs-cont",w=r===0?"":e.read_shift(r,m);return a&&(e.l+=4*u),n&&(e.l+=f),g.t=w,a||(g.raw="<t>"+g.t+"</t>",g.r=g.t),g}function c7(e){var r=e.t||"",t=ft(3);t.write_shift(2,r.length),t.write_shift(1,1);var n=ft(2*r.length);n.write_shift(2*r.length,r,"utf16le");var a=[t,n];return va(a)}function bc(e,r,t){var n;if(t){if(t.biff>=2&&t.biff<=5)return e.read_shift(r,"cpstr");if(t.biff>=12)return e.read_shift(r,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(r,"sbcs-cont"):n=e.read_shift(r,"dbcs-cont"),n}function Qd(e,r,t){var n=e.read_shift(t&&t.biff==2?1:2);return n===0?(e.l++,""):bc(e,n,t)}function Tc(e,r,t){if(t.biff>5)return Qd(e,r,t);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,t.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function uE(e,r,t){return t||(t=ft(3+2*e.length)),t.write_shift(2,e.length),t.write_shift(1,1),t.write_shift(31,e,"utf16le"),t}function u7(e){var r=e.read_shift(1);e.l++;var t=e.read_shift(2);return e.l+=2,[r,t]}function d7(e){var r=e.read_shift(4),t=e.l,n=!1;r>24&&(e.l+=r-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=t);var a=e.read_shift((n?r-24:r)>>1,"utf16le").replace(Za,"");return n&&(e.l+=24),a}function f7(e){for(var r=e.read_shift(2),t="";r-- >0;)t+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return t+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var u=e.read_shift(i>>1,"utf16le").replace(Za,"");return t+u}function h7(e,r){var t=e.read_shift(16);switch(t){case"e0c9ea79f9bace118c8200aa004ba90b":return d7(e);case"0303000000000000c000000000000046":return f7(e);default:throw new Error("Unsupported Moniker "+t)}}function Lh(e){var r=e.read_shift(4),t=r>0?e.read_shift(r,"utf16le").replace(Za,""):"";return t}function R_(e,r){r||(r=ft(6+e.length*2)),r.write_shift(4,1+e.length);for(var t=0;t<e.length;++t)r.write_shift(2,e.charCodeAt(t));return r.write_shift(2,0),r}function x7(e,r){var t=e.l+r,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var i,u,f,g,m="",w,_;a&16&&(i=Lh(e,t-e.l)),a&128&&(u=Lh(e,t-e.l)),(a&257)===257&&(f=Lh(e,t-e.l)),(a&257)===1&&(g=h7(e,t-e.l)),a&8&&(m=Lh(e,t-e.l)),a&32&&(w=e.read_shift(16)),a&64&&(_=o2(e)),e.l=t;var E=u||f||g||"";E&&m&&(E+="#"+m),E||(E="#"+m),a&2&&E.charAt(0)=="/"&&E.charAt(1)!="/"&&(E="file://"+E);var k={Target:E};return w&&(k.guid=w),_&&(k.time=_),i&&(k.Tooltip=i),k}function m7(e){var r=ft(512),t=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}r.write_shift(4,2),r.write_shift(4,i);var u=[8,6815827,6619237,4849780,83];for(t=0;t<u.length;++t)r.write_shift(4,u[t]);if(i==28)n=n.slice(1),R_(n,r);else if(i&2){for(u="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<u.length;++t)r.write_shift(1,parseInt(u[t],16));var f=a>-1?n.slice(0,a):n;for(r.write_shift(4,2*(f.length+1)),t=0;t<f.length;++t)r.write_shift(2,f.charCodeAt(t));r.write_shift(2,0),i&8&&R_(a>-1?n.slice(a+1):"",r)}else{for(u="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<u.length;++t)r.write_shift(1,parseInt(u[t],16));for(var g=0;n.slice(g*3,g*3+3)=="../"||n.slice(g*3,g*3+3)=="..\\";)++g;for(r.write_shift(2,g),r.write_shift(4,n.length-3*g+1),t=0;t<n.length-3*g;++t)r.write_shift(1,n.charCodeAt(t+3*g)&255);for(r.write_shift(1,0),r.write_shift(2,65535),r.write_shift(2,57005),t=0;t<6;++t)r.write_shift(4,0)}return r.slice(0,r.l)}function dE(e){var r=e.read_shift(1),t=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[r,t,n,a]}function fE(e,r){var t=dE(e);return t[3]=0,t}function Wi(e){var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(2);return{r,c:t,ixfe:n}}function wc(e,r,t,n){return n||(n=ft(6)),n.write_shift(2,e),n.write_shift(2,r),n.write_shift(2,t||0),n}function g7(e){var r=e.read_shift(2),t=e.read_shift(2);return e.l+=8,{type:r,flags:t}}function p7(e,r,t){return r===0?"":Tc(e,r,t)}function b7(e,r,t){var n=t.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),u=e.read_shift(n,"i");return[a,i,u]}function hE(e){var r=e.read_shift(2),t=s2(e);return[r,t]}function w7(e,r,t){e.l+=4,r-=4;var n=e.l+r,a=Jd(e,r,t),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,a}function U1(e){var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r},e:{c:a,r:t}}}function xE(e,r){return r||(r=ft(8)),r.write_shift(2,e.s.r),r.write_shift(2,e.e.r),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c),r}function mE(e){var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r},e:{c:a,r:t}}}var v7=mE;function gE(e){e.l+=4;var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[t,r,n]}function y7(e){var r={};return e.l+=4,e.l+=16,r.fSharedNote=e.read_shift(2),e.l+=4,r}function _7(e){var r={};return e.l+=4,e.cf=e.read_shift(2),r}function Da(e){e.l+=2,e.l+=e.read_shift(2)}var k7={0:Da,4:Da,5:Da,6:Da,7:_7,8:Da,9:Da,10:Da,11:Da,12:Da,13:y7,14:Da,15:Da,16:Da,17:Da,18:Da,19:Da,20:Da,21:gE};function E7(e,r){for(var t=e.l+r,n=[];e.l<t;){var a=e.read_shift(2);e.l-=2;try{n.push(k7[a](e,t-e.l))}catch{return e.l=t,n}}return e.l!=t&&(e.l=t),n}function Bh(e,r){var t={BIFFVer:0,dt:0};switch(t.BIFFVer=e.read_shift(2),r-=2,r>=2&&(t.dt=e.read_shift(2),e.l-=2),t.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(r>6)throw new Error("Unexpected BIFF Ver "+t.BIFFVer)}return e.read_shift(r),t}function c2(e,r,t){var n=1536,a=16;switch(t.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=ft(a);return i.write_shift(2,n),i.write_shift(2,r),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function S7(e,r){return r===0||e.read_shift(2),1200}function A7(e,r,t){if(t.enc)return e.l+=r,"";var n=e.l,a=Tc(e,0,t);return e.read_shift(r+n-e.l),a}function N7(e,r){var t=!r||r.biff==8,n=ft(t?112:54);for(n.write_shift(r.biff==8?2:1,7),t&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(t?0:536870912));n.l<n.length;)n.write_shift(1,t?0:32);return n}function C7(e,r,t){var n=t&&t.biff==8||r==2?e.read_shift(2):(e.l+=r,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function T7(e,r,t){var n=e.read_shift(4),a=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var u=Jd(e,0,t);return u.length===0&&(u="Sheet1"),{pos:n,hs:a,dt:i,name:u}}function j7(e,r){var t=!r||r.biff>=8?2:1,n=ft(8+t*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),r.biff>=8&&n.write_shift(1,1),n.write_shift(t*e.name.length,e.name,r.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function R7(e,r){for(var t=e.l+r,n=e.read_shift(4),a=e.read_shift(4),i=[],u=0;u!=a&&e.l<t;++u)i.push(o7(e));return i.Count=n,i.Unique=a,i}function O7(e,r){var t=ft(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=c7(e[a]);var i=va([t].concat(n));return i.parts=[t.length].concat(n.map(function(u){return u.length})),i}function I7(e,r){var t={};return t.dsst=e.read_shift(2),e.l+=r-2,t}function D7(e){var r={};r.r=e.read_shift(2),r.c=e.read_shift(2),r.cnt=e.read_shift(2)-r.c;var t=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(r.level=n&7),n&32&&(r.hidden=!0),n&64&&(r.hpt=t/20),r}function M7(e){var r=g7(e);if(r.type!=2211)throw new Error("Invalid Future Record "+r.type);var t=e.read_shift(4);return t!==0}function F7(e){return e.read_shift(2),e.read_shift(4)}function O_(e,r,t){var n=0;t&&t.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);t&&t.biff==2&&(n=1-(a>>15),a&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,a]}function L7(e){var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),u=e.read_shift(2),f=e.read_shift(2),g=e.read_shift(2),m=e.read_shift(2);return{Pos:[r,t],Dim:[n,a],Flags:i,CurTab:u,FirstTab:f,Selected:g,TabRatio:m}}function B7(){var e=ft(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function P7(e,r,t){if(t&&t.biff>=2&&t.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function U7(e){var r=ft(18),t=1718;return e&&e.RTL&&(t|=64),r.write_shift(2,t),r.write_shift(4,0),r.write_shift(4,64),r.write_shift(4,0),r.write_shift(4,0),r}function z7(){}function H7(e,r,t){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(t&&t.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=Jd(e,0,t),n}function V7(e,r){var t=e.name||"Arial",n=r&&r.biff==5,a=n?15+t.length:16+2*t.length,i=ft(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,t.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le"),i}function G7(e){var r=Wi(e);return r.isst=e.read_shift(4),r}function W7(e,r,t,n){var a=ft(10);return wc(e,r,n,a),a.write_shift(4,t),a}function X7(e,r,t){t.biffguess&&t.biff==2&&(t.biff=5);var n=e.l+r,a=Wi(e);t.biff==2&&e.l++;var i=Qd(e,n-e.l,t);return a.val=i,a}function K7(e,r,t,n,a){var i=!a||a.biff==8,u=ft(8+ +i+(1+i)*t.length);return wc(e,r,n,u),u.write_shift(2,t.length),i&&u.write_shift(1,1),u.write_shift((1+i)*t.length,t,i?"utf16le":"sbcs"),u}function q7(e,r,t){var n=e.read_shift(2),a=Tc(e,0,t);return[n,a]}function Y7(e,r,t,n){var a=t&&t.biff==5;n||(n=ft(a?3+r.length:5+2*r.length)),n.write_shift(2,e),n.write_shift(a?1:2,r.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var $7=Tc;function I_(e,r,t){var n=e.l+r,a=t.biff==8||!t.biff?4:2,i=e.read_shift(a),u=e.read_shift(a),f=e.read_shift(2),g=e.read_shift(2);return e.l=n,{s:{r:i,c:f},e:{r:u,c:g}}}function Z7(e,r){var t=r.biff==8||!r.biff?4:2,n=ft(2*t+6);return n.write_shift(t,e.s.r),n.write_shift(t,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function J7(e){var r=e.read_shift(2),t=e.read_shift(2),n=hE(e);return{r,c:t,ixfe:n[0],rknum:n[1]}}function Q7(e,r){for(var t=e.l+r-2,n=e.read_shift(2),a=e.read_shift(2),i=[];e.l<t;)i.push(hE(e));if(e.l!==t)throw new Error("MulRK read error");var u=e.read_shift(2);if(i.length!=u-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:u,rkrec:i}}function eI(e,r){for(var t=e.l+r-2,n=e.read_shift(2),a=e.read_shift(2),i=[];e.l<t;)i.push(e.read_shift(2));if(e.l!==t)throw new Error("MulBlank read error");var u=e.read_shift(2);if(i.length!=u-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:u,ixfe:i}}function tI(e,r,t,n){var a={},i=e.read_shift(4),u=e.read_shift(4),f=e.read_shift(4),g=e.read_shift(2);return a.patternType=MO[f>>26],n.cellStyles&&(a.alc=i&7,a.fWrap=i>>3&1,a.alcV=i>>4&7,a.fJustLast=i>>7&1,a.trot=i>>8&255,a.cIndent=i>>16&15,a.fShrinkToFit=i>>20&1,a.iReadOrder=i>>22&2,a.fAtrNum=i>>26&1,a.fAtrFnt=i>>27&1,a.fAtrAlc=i>>28&1,a.fAtrBdr=i>>29&1,a.fAtrPat=i>>30&1,a.fAtrProt=i>>31&1,a.dgLeft=u&15,a.dgRight=u>>4&15,a.dgTop=u>>8&15,a.dgBottom=u>>12&15,a.icvLeft=u>>16&127,a.icvRight=u>>23&127,a.grbitDiag=u>>30&3,a.icvTop=f&127,a.icvBottom=f>>7&127,a.icvDiag=f>>14&127,a.dgDiag=f>>21&15,a.icvFore=g&127,a.icvBack=g>>7&127,a.fsxButton=g>>14&1),a}function rI(e,r,t){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,r-=6,n.data=tI(e,r,n.fStyle,t),n}function D_(e,r,t,n){var a=t&&t.biff==5;n||(n=ft(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,r<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function nI(e){e.l+=4;var r=[e.read_shift(2),e.read_shift(2)];if(r[0]!==0&&r[0]--,r[1]!==0&&r[1]--,r[0]>7||r[1]>7)throw new Error("Bad Gutters: "+r.join("|"));return r}function aI(e){var r=ft(8);return r.write_shift(4,0),r.write_shift(2,0),r.write_shift(2,0),r}function M_(e,r,t){var n=Wi(e);(t.biff==2||r==9)&&++e.l;var a=l7(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function sI(e,r,t,n,a,i){var u=ft(8);return wc(e,r,n,u),cE(t,i,u),u}function iI(e,r,t){t.biffguess&&t.biff==2&&(t.biff=5);var n=Wi(e),a=Pa(e);return n.val=a,n}function lI(e,r,t,n){var a=ft(14);return wc(e,r,n,a),pc(t,a),a}var F_=p7;function oI(e,r,t){var n=e.l+r,a=e.read_shift(2),i=e.read_shift(2);if(t.sbcch=i,i==1025||i==14849)return[i,a];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var u=bc(e,i),f=[];n>e.l;)f.push(Qd(e));return[i,a,u,f]}function L_(e,r,t){var n=e.read_shift(2),a,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return t.sbcch===14849&&(a=w7(e,r-2,t)),i.body=a||e.read_shift(r-2),typeof a=="string"&&(i.Name=a),i}var cI=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function B_(e,r,t){var n=e.l+r,a=e.read_shift(2),i=e.read_shift(1),u=e.read_shift(1),f=e.read_shift(t&&t.biff==2?1:2),g=0;(!t||t.biff>=5)&&(t.biff!=5&&(e.l+=2),g=e.read_shift(2),t.biff==5&&(e.l+=2),e.l+=4);var m=bc(e,u,t);a&32&&(m=cI[m.charCodeAt(0)]);var w=n-e.l;t&&t.biff==2&&--w;var _=n==e.l||f===0||!(w>0)?[]:EF(e,w,t,f);return{chKey:i,Name:m,itab:g,rgce:_}}function pE(e,r,t){if(t.biff<8)return uI(e,r,t);for(var n=[],a=e.l+r,i=e.read_shift(t.biff>8?4:2);i--!==0;)n.push(b7(e,t.biff>8?12:6,t));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function uI(e,r,t){e[e.l+1]==3&&e[e.l]++;var n=Jd(e,r,t);return n.charCodeAt(0)==3?n.slice(1):n}function dI(e,r,t){if(t.biff<8){e.l+=r;return}var n=e.read_shift(2),a=e.read_shift(2),i=bc(e,n,t),u=bc(e,a,t);return[i,u]}function fI(e,r,t){var n=mE(e);e.l++;var a=e.read_shift(1);return r-=8,[SF(e,r,t),a,n]}function P_(e,r,t){var n=v7(e);switch(t.biff){case 2:e.l++,r-=7;break;case 3:case 4:e.l+=2,r-=8;break;default:e.l+=6,r-=12}return[n,_F(e,r,t)]}function hI(e){var r=e.read_shift(4)!==0,t=e.read_shift(4)!==0,n=e.read_shift(4);return[r,t,n]}function xI(e,r,t){if(!(t.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),u=e.read_shift(2),f=Tc(e,0,t);return t.biff<8&&e.read_shift(1),[{r:n,c:a},f,u,i]}}function mI(e,r,t){return xI(e,r,t)}function gI(e,r){for(var t=[],n=e.read_shift(2);n--;)t.push(U1(e));return t}function pI(e){var r=ft(2+e.length*8);r.write_shift(2,e.length);for(var t=0;t<e.length;++t)xE(e[t],r);return r}function bI(e,r,t){if(t&&t.biff<8)return vI(e,r,t);var n=gE(e),a=E7(e,r-22,n[1]);return{cmo:n,ft:a}}var wI={8:function(e,r){var t=e.l+r;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=t,{fmt:n}}};function vI(e,r,t){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,r-=36;var u=[];return u.push((wI[n]||za)(e,r,t)),{cmo:[a,n,i],ft:u}}function yI(e,r,t){var n=e.l,a="";try{e.l+=4;var i=(t.lastobj||{cmo:[0,0]}).cmo[1],u;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:u=u7(e,6,t);var f=e.read_shift(2);e.read_shift(2),ia(e,2);var g=e.read_shift(2);e.l+=g;for(var m=1;m<e.lens.length-1;++m){if(e.l-n!=e.lens[m])throw new Error("TxO: bad continue record");var w=e[e.l],_=bc(e,e.lens[m+1]-e.lens[m]-1);if(a+=_,a.length>=(w?f:2*f))break}if(a.length!==f&&a.length!==f*2)throw new Error("cchText: "+f+" != "+a.length);return e.l=n+r,{t:a}}catch{return e.l=n+r,{t:a}}}function _I(e,r){var t=U1(e);e.l+=16;var n=x7(e,r-24);return[t,n]}function kI(e){var r=ft(24),t=In(e[0]);r.write_shift(2,t.r),r.write_shift(2,t.r),r.write_shift(2,t.c),r.write_shift(2,t.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)r.write_shift(1,parseInt(n[a],16));return va([r,m7(e[1])])}function EI(e,r){e.read_shift(2);var t=U1(e),n=e.read_shift((r-10)/2,"dbcs-cont");return n=n.replace(Za,""),[t,n]}function SI(e){var r=e[1].Tooltip,t=ft(10+2*(r.length+1));t.write_shift(2,2048);var n=In(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var a=0;a<r.length;++a)t.write_shift(2,r.charCodeAt(a));return t.write_shift(2,0),t}function AI(e){var r=[0,0],t;return t=e.read_shift(2),r[0]=k_[t]||t,t=e.read_shift(2),r[1]=k_[t]||t,r}function NI(e){return e||(e=ft(4)),e.write_shift(2,1),e.write_shift(2,1),e}function CI(e){for(var r=e.read_shift(2),t=[];r-- >0;)t.push(fE(e));return t}function TI(e){for(var r=e.read_shift(2),t=[];r-- >0;)t.push(fE(e));return t}function jI(e){e.l+=2;var r={cxfs:0,crc:0};return r.cxfs=e.read_shift(2),r.crc=e.read_shift(4),r}function bE(e,r,t){if(!t.cellStyles)return za(e,r);var n=t&&t.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),u=e.read_shift(n),f=e.read_shift(n),g=e.read_shift(2);n==2&&(e.l+=2);var m={s:a,e:i,w:u,ixfe:f,flags:g};return(t.biff>=5||!t.biff)&&(m.level=g>>8&7),m}function RI(e,r){var t=ft(12);t.write_shift(2,r),t.write_shift(2,r),t.write_shift(2,e.width*256),t.write_shift(2,0);var n=0;return e.hidden&&(n|=1),t.write_shift(1,n),n=e.level||0,t.write_shift(1,n),t.write_shift(2,0),t}function OI(e,r){var t={};return r<32||(e.l+=16,t.header=Pa(e),t.footer=Pa(e),e.l+=2),t}function II(e,r,t){var n={area:!1};if(t.biff!=5)return e.l+=r,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function DI(e){for(var r=ft(2*e),t=0;t<e;++t)r.write_shift(2,t+1);return r}var MI=Wi,FI=oE,LI=Qd;function BI(e){var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(4),a={fmt:r,env:t,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function PI(e,r,t){t.biffguess&&t.biff==5&&(t.biff=2);var n=Wi(e);++e.l;var a=Tc(e,r-7,t);return n.t="str",n.val=a,n}function UI(e){var r=Wi(e);++e.l;var t=Pa(e);return r.t="n",r.val=t,r}function zI(e,r,t){var n=ft(15);return nf(n,e,r),n.write_shift(8,t,"f"),n}function HI(e){var r=Wi(e);++e.l;var t=e.read_shift(2);return r.t="n",r.val=t,r}function VI(e,r,t){var n=ft(9);return nf(n,e,r),n.write_shift(2,t),n}function GI(e){var r=e.read_shift(1);return r===0?(e.l++,""):e.read_shift(r,"sbcs-cont")}function WI(e,r){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=r-13}function XI(e,r,t){var n=e.l+r,a=Wi(e),i=e.read_shift(2),u=bc(e,i,t);return e.l=n,a.t="str",a.val=u,a}var KI=[2,3,48,49,131,139,140,245],op=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},r=L1({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(f,g){var m=[],w=yo(1);switch(g.type){case"base64":w=Os(Ms(f));break;case"binary":w=Os(f);break;case"buffer":case"array":w=f;break}Ra(w,0);var _=w.read_shift(1),E=!!(_&136),k=!1,N=!1;switch(_){case 2:break;case 3:break;case 48:k=!0,E=!0;break;case 49:k=!0,E=!0;break;case 131:break;case 139:break;case 140:N=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+_.toString(16))}var A=0,C=521;_==2&&(A=w.read_shift(2)),w.l+=3,_!=2&&(A=w.read_shift(4)),A>1048576&&(A=1e6),_!=2&&(C=w.read_shift(2));var I=w.read_shift(2),D=g.codepage||1252;_!=2&&(w.l+=16,w.read_shift(1),w[w.l]!==0&&(D=e[w[w.l]]),w.l+=1,w.l+=2),N&&(w.l+=36);for(var O=[],B={},U=Math.min(w.length,_==2?521:C-10-(k?264:0)),X=N?32:11;w.l<U&&w[w.l]!=13;)switch(B={},B.name=yd.utils.decode(D,w.slice(w.l,w.l+X)).replace(/[\u0000\r\n].*$/g,""),w.l+=X,B.type=String.fromCharCode(w.read_shift(1)),_!=2&&!N&&(B.offset=w.read_shift(4)),B.len=w.read_shift(1),_==2&&(B.offset=w.read_shift(2)),B.dec=w.read_shift(1),B.name.length&&O.push(B),_!=2&&(w.l+=N?13:14),B.type){case"B":(!k||B.len!=8)&&g.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"G":case"P":g.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+B.type)}if(w[w.l]!==13&&(w.l=C-1),w.read_shift(1)!==13)throw new Error("DBF Terminator not found "+w.l+" "+w[w.l]);w.l=C;var F=0,Y=0;for(m[0]=[],Y=0;Y!=O.length;++Y)m[0][Y]=O[Y].name;for(;A-- >0;){if(w[w.l]===42){w.l+=I;continue}for(++w.l,m[++F]=[],Y=0,Y=0;Y!=O.length;++Y){var H=w.slice(w.l,w.l+O[Y].len);w.l+=O[Y].len,Ra(H,0);var ce=yd.utils.decode(D,H);switch(O[Y].type){case"C":ce.trim().length&&(m[F][Y]=ce.replace(/\s+$/,""));break;case"D":ce.length===8?m[F][Y]=new Date(+ce.slice(0,4),+ce.slice(4,6)-1,+ce.slice(6,8)):m[F][Y]=ce;break;case"F":m[F][Y]=parseFloat(ce.trim());break;case"+":case"I":m[F][Y]=N?H.read_shift(-4,"i")^2147483648:H.read_shift(4,"i");break;case"L":switch(ce.trim().toUpperCase()){case"Y":case"T":m[F][Y]=!0;break;case"N":case"F":m[F][Y]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+ce+"|")}break;case"M":if(!E)throw new Error("DBF Unexpected MEMO for type "+_.toString(16));m[F][Y]="##MEMO##"+(N?parseInt(ce.trim(),10):H.read_shift(4));break;case"N":ce=ce.replace(/\u0000/g,"").trim(),ce&&ce!="."&&(m[F][Y]=+ce||0);break;case"@":m[F][Y]=new Date(H.read_shift(-8,"f")-621356832e5);break;case"T":m[F][Y]=new Date((H.read_shift(4)-2440588)*864e5+H.read_shift(4));break;case"Y":m[F][Y]=H.read_shift(4,"i")/1e4+H.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":m[F][Y]=-H.read_shift(-8,"f");break;case"B":if(k&&O[Y].len==8){m[F][Y]=H.read_shift(8,"f");break}case"G":case"P":H.l+=O[Y].len;break;case"0":if(O[Y].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+O[Y].type)}}}if(_!=2&&w.l<w.length&&w[w.l++]!=26)throw new Error("DBF EOF Marker missing "+(w.l-1)+" of "+w.length+" "+w[w.l-1].toString(16));return g&&g.sheetRows&&(m=m.slice(0,g.sheetRows)),g.DBF=O,m}function n(f,g){var m=g||{};m.dateNF||(m.dateNF="yyyymmdd");var w=Y0(t(f,m),m);return w["!cols"]=m.DBF.map(function(_){return{wch:_.len,DBF:_}}),delete m.DBF,w}function a(f,g){try{return Ao(n(f,g),g)}catch(m){if(g&&g.WTF)throw m}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function u(f,g){var m=g||{};if(+m.codepage>=0&&pi(+m.codepage),m.type=="string")throw new Error("Cannot write DBF to JS string");var w=us(),_=y1(f,{header:1,raw:!0,cellDates:!0}),E=_[0],k=_.slice(1),N=f["!cols"]||[],A=0,C=0,I=0,D=1;for(A=0;A<E.length;++A){if(((N[A]||{}).DBF||{}).name){E[A]=N[A].DBF.name,++I;continue}if(E[A]!=null){if(++I,typeof E[A]=="number"&&(E[A]=E[A].toString(10)),typeof E[A]!="string")throw new Error("DBF Invalid column name "+E[A]+" |"+typeof E[A]+"|");if(E.indexOf(E[A])!==A){for(C=0;C<1024;++C)if(E.indexOf(E[A]+"_"+C)==-1){E[A]+="_"+C;break}}}}var O=Ur(f["!ref"]),B=[],U=[],X=[];for(A=0;A<=O.e.c-O.s.c;++A){var F="",Y="",H=0,ce=[];for(C=0;C<k.length;++C)k[C][A]!=null&&ce.push(k[C][A]);if(ce.length==0||E[A]==null){B[A]="?";continue}for(C=0;C<ce.length;++C){switch(typeof ce[C]){case"number":Y="B";break;case"string":Y="C";break;case"boolean":Y="L";break;case"object":Y=ce[C]instanceof Date?"D":"C";break;default:Y="C"}H=Math.max(H,String(ce[C]).length),F=F&&F!=Y?"C":Y}H>250&&(H=250),Y=((N[A]||{}).DBF||{}).type,Y=="C"&&N[A].DBF.len>H&&(H=N[A].DBF.len),F=="B"&&Y=="N"&&(F="N",X[A]=N[A].DBF.dec,H=N[A].DBF.len),U[A]=F=="C"||Y=="N"?H:i[F]||0,D+=U[A],B[A]=F}var J=w.next(32);for(J.write_shift(4,318902576),J.write_shift(4,k.length),J.write_shift(2,296+32*I),J.write_shift(2,D),A=0;A<4;++A)J.write_shift(4,0);for(J.write_shift(4,0|(+r[lk]||3)<<8),A=0,C=0;A<E.length;++A)if(E[A]!=null){var V=w.next(32),xe=(E[A].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);V.write_shift(1,xe,"sbcs"),V.write_shift(1,B[A]=="?"?"C":B[A],"sbcs"),V.write_shift(4,C),V.write_shift(1,U[A]||i[B[A]]||0),V.write_shift(1,X[A]||0),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(1,0),V.write_shift(4,0),V.write_shift(4,0),C+=U[A]||i[B[A]]||0}var W=w.next(264);for(W.write_shift(4,13),A=0;A<65;++A)W.write_shift(4,0);for(A=0;A<k.length;++A){var ne=w.next(D);for(ne.write_shift(1,0),C=0;C<E.length;++C)if(E[C]!=null)switch(B[C]){case"L":ne.write_shift(1,k[A][C]==null?63:k[A][C]?84:70);break;case"B":ne.write_shift(8,k[A][C]||0,"f");break;case"N":var be="0";for(typeof k[A][C]=="number"&&(be=k[A][C].toFixed(X[C]||0)),I=0;I<U[C]-be.length;++I)ne.write_shift(1,32);ne.write_shift(1,be,"sbcs");break;case"D":k[A][C]?(ne.write_shift(4,("0000"+k[A][C].getFullYear()).slice(-4),"sbcs"),ne.write_shift(2,("00"+(k[A][C].getMonth()+1)).slice(-2),"sbcs"),ne.write_shift(2,("00"+k[A][C].getDate()).slice(-2),"sbcs")):ne.write_shift(8,"00000000","sbcs");break;case"C":var fe=String(k[A][C]!=null?k[A][C]:"").slice(0,U[C]);for(ne.write_shift(1,fe,"sbcs"),I=0;I<U[C]-fe.length;++I)ne.write_shift(1,32);break}}return w.next(1).write_shift(1,26),w.end()}return{to_workbook:a,to_sheet:n,from_sheet:u}})(),wE=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},r=new RegExp("\x1BN("+Gn(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(E,k){var N=e[k];return typeof N=="number"?$y(N):N},n=function(E,k,N){var A=k.charCodeAt(0)-32<<4|N.charCodeAt(0)-48;return A==59?E:$y(A)};e["|"]=254;function a(E,k){switch(k.type){case"base64":return i(Ms(E),k);case"binary":return i(E,k);case"buffer":return i(Sr&&Buffer.isBuffer(E)?E.toString("binary"):So(E),k);case"array":return i(gc(E),k)}throw new Error("Unrecognized type "+k.type)}function i(E,k){var N=E.split(/[\n\r]+/),A=-1,C=-1,I=0,D=0,O=[],B=[],U=null,X={},F=[],Y=[],H=[],ce=0,J;for(+k.codepage>=0&&pi(+k.codepage);I!==N.length;++I){ce=0;var V=N[I].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(r,t),xe=V.replace(/;;/g,"\0").split(";").map(function(Z){return Z.replace(/\u0000/g,";")}),W=xe[0],ne;if(V.length>0)switch(W){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":xe[1].charAt(0)=="P"&&B.push(V.slice(3).replace(/;;/g,";"));break;case"C":var be=!1,fe=!1,Ve=!1,ge=!1,We=-1,re=-1;for(D=1;D<xe.length;++D)switch(xe[D].charAt(0)){case"A":break;case"X":C=parseInt(xe[D].slice(1))-1,fe=!0;break;case"Y":for(A=parseInt(xe[D].slice(1))-1,fe||(C=0),J=O.length;J<=A;++J)O[J]=[];break;case"K":ne=xe[D].slice(1),ne.charAt(0)==='"'?ne=ne.slice(1,ne.length-1):ne==="TRUE"?ne=!0:ne==="FALSE"?ne=!1:isNaN(wi(ne))?isNaN(F0(ne).getDate())||(ne=_n(ne)):(ne=wi(ne),U!==null&&K0(U)&&(ne=P1(ne))),be=!0;break;case"E":ge=!0;var L=O0(xe[D].slice(1),{r:A,c:C});O[A][C]=[O[A][C],L];break;case"S":Ve=!0,O[A][C]=[O[A][C],"S5S"];break;case"G":break;case"R":We=parseInt(xe[D].slice(1))-1;break;case"C":re=parseInt(xe[D].slice(1))-1;break;default:if(k&&k.WTF)throw new Error("SYLK bad record "+V)}if(be&&(O[A][C]&&O[A][C].length==2?O[A][C][0]=ne:O[A][C]=ne,U=null),Ve){if(ge)throw new Error("SYLK shared formula cannot have own formula");var q=We>-1&&O[We][re];if(!q||!q[1])throw new Error("SYLK shared formula cannot find base");O[A][C][1]=LE(q[1],{r:A-We,c:C-re})}break;case"F":var P=0;for(D=1;D<xe.length;++D)switch(xe[D].charAt(0)){case"X":C=parseInt(xe[D].slice(1))-1,++P;break;case"Y":for(A=parseInt(xe[D].slice(1))-1,J=O.length;J<=A;++J)O[J]=[];break;case"M":ce=parseInt(xe[D].slice(1))/20;break;case"F":break;case"G":break;case"P":U=B[parseInt(xe[D].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(H=xe[D].slice(1).split(" "),J=parseInt(H[0],10);J<=parseInt(H[1],10);++J)ce=parseInt(H[2],10),Y[J-1]=ce===0?{hidden:!0}:{wch:ce},_o(Y[J-1]);break;case"C":C=parseInt(xe[D].slice(1))-1,Y[C]||(Y[C]={});break;case"R":A=parseInt(xe[D].slice(1))-1,F[A]||(F[A]={}),ce>0?(F[A].hpt=ce,F[A].hpx=B0(ce)):ce===0&&(F[A].hidden=!0);break;default:if(k&&k.WTF)throw new Error("SYLK bad record "+V)}P<1&&(U=null);break;default:if(k&&k.WTF)throw new Error("SYLK bad record "+V)}}return F.length>0&&(X["!rows"]=F),Y.length>0&&(X["!cols"]=Y),k&&k.sheetRows&&(O=O.slice(0,k.sheetRows)),[O,X]}function u(E,k){var N=a(E,k),A=N[0],C=N[1],I=Y0(A,k);return Gn(C).forEach(function(D){I[D]=C[D]}),I}function f(E,k){return Ao(u(E,k),k)}function g(E,k,N,A){var C="C;Y"+(N+1)+";X"+(A+1)+";K";switch(E.t){case"n":C+=E.v||0,E.f&&!E.F&&(C+=";E"+m2(E.f,{r:N,c:A}));break;case"b":C+=E.v?"TRUE":"FALSE";break;case"e":C+=E.w||E.v;break;case"d":C+='"'+(E.w||E.v)+'"';break;case"s":C+='"'+E.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return C}function m(E,k){k.forEach(function(N,A){var C="F;W"+(A+1)+" "+(A+1)+" ";N.hidden?C+="0":(typeof N.width=="number"&&!N.wpx&&(N.wpx=Td(N.width)),typeof N.wpx=="number"&&!N.wch&&(N.wch=jd(N.wpx)),typeof N.wch=="number"&&(C+=Math.round(N.wch))),C.charAt(C.length-1)!=" "&&E.push(C)})}function w(E,k){k.forEach(function(N,A){var C="F;";N.hidden?C+="M0;":N.hpt?C+="M"+20*N.hpt+";":N.hpx&&(C+="M"+20*Rd(N.hpx)+";"),C.length>2&&E.push(C+"R"+(A+1))})}function _(E,k){var N=["ID;PWXL;N;E"],A=[],C=Ur(E["!ref"]),I,D=Array.isArray(E),O=`\r
`;N.push("P;PGeneral"),N.push("F;P0;DG0G8;M255"),E["!cols"]&&m(N,E["!cols"]),E["!rows"]&&w(N,E["!rows"]),N.push("B;Y"+(C.e.r-C.s.r+1)+";X"+(C.e.c-C.s.c+1)+";D"+[C.s.c,C.s.r,C.e.c,C.e.r].join(" "));for(var B=C.s.r;B<=C.e.r;++B)for(var U=C.s.c;U<=C.e.c;++U){var X=tr({r:B,c:U});I=D?(E[B]||[])[U]:E[X],!(!I||I.v==null&&(!I.f||I.F))&&A.push(g(I,E,B,U))}return N.join(O)+O+A.join(O)+O+"E"+O}return{to_workbook:f,to_sheet:u,from_sheet:_}})(),vE=(function(){function e(i,u){switch(u.type){case"base64":return r(Ms(i),u);case"binary":return r(i,u);case"buffer":return r(Sr&&Buffer.isBuffer(i)?i.toString("binary"):So(i),u);case"array":return r(gc(i),u)}throw new Error("Unrecognized type "+u.type)}function r(i,u){for(var f=i.split(`
`),g=-1,m=-1,w=0,_=[];w!==f.length;++w){if(f[w].trim()==="BOT"){_[++g]=[],m=0;continue}if(!(g<0)){var E=f[w].trim().split(","),k=E[0],N=E[1];++w;for(var A=f[w]||"";(A.match(/["]/g)||[]).length&1&&w<f.length-1;)A+=`
`+f[++w];switch(A=A.trim(),+k){case-1:if(A==="BOT"){_[++g]=[],m=0;continue}else if(A!=="EOD")throw new Error("Unrecognized DIF special command "+A);break;case 0:A==="TRUE"?_[g][m]=!0:A==="FALSE"?_[g][m]=!1:isNaN(wi(N))?isNaN(F0(N).getDate())?_[g][m]=N:_[g][m]=_n(N):_[g][m]=wi(N),++m;break;case 1:A=A.slice(1,A.length-1),A=A.replace(/""/g,'"'),A&&A.match(/^=".*"$/)&&(A=A.slice(2,-1)),_[g][m++]=A!==""?A:null;break}if(A==="EOD")break}}return u&&u.sheetRows&&(_=_.slice(0,u.sheetRows)),_}function t(i,u){return Y0(e(i,u),u)}function n(i,u){return Ao(t(i,u),u)}var a=(function(){var i=function(g,m,w,_,E){g.push(m),g.push(w+","+_),g.push('"'+E.replace(/"/g,'""')+'"')},u=function(g,m,w,_){g.push(m+","+w),g.push(m==1?'"'+_.replace(/"/g,'""')+'"':_)};return function(g){var m=[],w=Ur(g["!ref"]),_,E=Array.isArray(g);i(m,"TABLE",0,1,"sheetjs"),i(m,"VECTORS",0,w.e.r-w.s.r+1,""),i(m,"TUPLES",0,w.e.c-w.s.c+1,""),i(m,"DATA",0,0,"");for(var k=w.s.r;k<=w.e.r;++k){u(m,-1,0,"BOT");for(var N=w.s.c;N<=w.e.c;++N){var A=tr({r:k,c:N});if(_=E?(g[k]||[])[N]:g[A],!_){u(m,1,0,"");continue}switch(_.t){case"n":var C=_.w;!C&&_.v!=null&&(C=_.v),C==null?_.f&&!_.F?u(m,1,0,"="+_.f):u(m,1,0,""):u(m,0,C,"V");break;case"b":u(m,0,_.v?1:0,_.v?"TRUE":"FALSE");break;case"s":u(m,1,0,isNaN(_.v)?_.v:'="'+_.v+'"');break;case"d":_.w||(_.w=ri(_.z||er[14],ma(_n(_.v)))),u(m,0,_.w,"V");break;default:u(m,1,0,"")}}}u(m,-1,0,"EOD");var I=`\r
`,D=m.join(I);return D}})();return{to_workbook:n,to_sheet:t,from_sheet:a}})(),yE=(function(){function e(_){return _.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function r(_){return _.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(_,E){for(var k=_.split(`
`),N=-1,A=-1,C=0,I=[];C!==k.length;++C){var D=k[C].trim().split(":");if(D[0]==="cell"){var O=In(D[1]);if(I.length<=O.r)for(N=I.length;N<=O.r;++N)I[N]||(I[N]=[]);switch(N=O.r,A=O.c,D[2]){case"t":I[N][A]=e(D[3]);break;case"v":I[N][A]=+D[3];break;case"vtf":var B=D[D.length-1];case"vtc":D[3]==="nl"?I[N][A]=!!+D[4]:I[N][A]=+D[4],D[2]=="vtf"&&(I[N][A]=[I[N][A],B])}}}return E&&E.sheetRows&&(I=I.slice(0,E.sheetRows)),I}function n(_,E){return Y0(t(_,E),E)}function a(_,E){return Ao(n(_,E),E)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),u=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,f=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),g="--SocialCalcSpreadsheetControlSave--";function m(_){if(!_||!_["!ref"])return"";for(var E=[],k=[],N,A="",C=ds(_["!ref"]),I=Array.isArray(_),D=C.s.r;D<=C.e.r;++D)for(var O=C.s.c;O<=C.e.c;++O)if(A=tr({r:D,c:O}),N=I?(_[D]||[])[O]:_[A],!(!N||N.v==null||N.t==="z")){switch(k=["cell",A,"t"],N.t){case"s":case"str":k.push(r(N.v));break;case"n":N.f?(k[2]="vtf",k[3]="n",k[4]=N.v,k[5]=r(N.f)):(k[2]="v",k[3]=N.v);break;case"b":k[2]="vt"+(N.f?"f":"c"),k[3]="nl",k[4]=N.v?"1":"0",k[5]=r(N.f||(N.v?"TRUE":"FALSE"));break;case"d":var B=ma(_n(N.v));k[2]="vtc",k[3]="nd",k[4]=""+B,k[5]=N.w||ri(N.z||er[14],B);break;case"e":continue}E.push(k.join(":"))}return E.push("sheet:c:"+(C.e.c-C.s.c+1)+":r:"+(C.e.r-C.s.r+1)+":tvf:1"),E.push("valueformat:1:text-wiki"),E.join(`
`)}function w(_){return[i,u,f,u,m(_),g].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:w}})(),L0=(function(){function e(w,_,E,k,N){N.raw?_[E][k]=w:w===""||(w==="TRUE"?_[E][k]=!0:w==="FALSE"?_[E][k]=!1:isNaN(wi(w))?isNaN(F0(w).getDate())?_[E][k]=w:_[E][k]=_n(w):_[E][k]=wi(w))}function r(w,_){var E=_||{},k=[];if(!w||w.length===0)return k;for(var N=w.split(/[\r\n]/),A=N.length-1;A>=0&&N[A].length===0;)--A;for(var C=10,I=0,D=0;D<=A;++D)I=N[D].indexOf(" "),I==-1?I=N[D].length:I++,C=Math.max(C,I);for(D=0;D<=A;++D){k[D]=[];var O=0;for(e(N[D].slice(0,C).trim(),k,D,O,E),O=1;O<=(N[D].length-C)/10+1;++O)e(N[D].slice(C+(O-1)*10,C+O*10).trim(),k,D,O,E)}return E.sheetRows&&(k=k.slice(0,E.sheetRows)),k}var t={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(w){for(var _={},E=!1,k=0,N=0;k<w.length;++k)(N=w.charCodeAt(k))==34?E=!E:!E&&N in t&&(_[N]=(_[N]||0)+1);N=[];for(k in _)Object.prototype.hasOwnProperty.call(_,k)&&N.push([_[k],k]);if(!N.length){_=n;for(k in _)Object.prototype.hasOwnProperty.call(_,k)&&N.push([_[k],k])}return N.sort(function(A,C){return A[0]-C[0]||n[A[1]]-n[C[1]]}),t[N.pop()[1]]||44}function i(w,_){var E=_||{},k="",N=E.dense?[]:{},A={s:{c:0,r:0},e:{c:0,r:0}};w.slice(0,4)=="sep="?w.charCodeAt(5)==13&&w.charCodeAt(6)==10?(k=w.charAt(4),w=w.slice(7)):w.charCodeAt(5)==13||w.charCodeAt(5)==10?(k=w.charAt(4),w=w.slice(6)):k=a(w.slice(0,1024)):E&&E.FS?k=E.FS:k=a(w.slice(0,1024));var C=0,I=0,D=0,O=0,B=0,U=k.charCodeAt(0),X=!1,F=0,Y=w.charCodeAt(0);w=w.replace(/\r\n/mg,`
`);var H=E.dateNF!=null?IR(E.dateNF):null;function ce(){var J=w.slice(O,B),V={};if(J.charAt(0)=='"'&&J.charAt(J.length-1)=='"'&&(J=J.slice(1,-1).replace(/""/g,'"')),J.length===0)V.t="z";else if(E.raw)V.t="s",V.v=J;else if(J.trim().length===0)V.t="s",V.v=J;else if(J.charCodeAt(0)==61)J.charCodeAt(1)==34&&J.charCodeAt(J.length-1)==34?(V.t="s",V.v=J.slice(2,-1).replace(/""/g,'"')):oM(J)?(V.t="n",V.f=J.slice(1)):(V.t="s",V.v=J);else if(J=="TRUE")V.t="b",V.v=!0;else if(J=="FALSE")V.t="b",V.v=!1;else if(!isNaN(D=wi(J)))V.t="n",E.cellText!==!1&&(V.w=J),V.v=D;else if(!isNaN(F0(J).getDate())||H&&J.match(H)){V.z=E.dateNF||er[14];var xe=0;H&&J.match(H)&&(J=DR(J,E.dateNF,J.match(H)||[]),xe=1),E.cellDates?(V.t="d",V.v=_n(J,xe)):(V.t="n",V.v=ma(_n(J,xe))),E.cellText!==!1&&(V.w=ri(V.z,V.v instanceof Date?ma(V.v):V.v)),E.cellNF||delete V.z}else V.t="s",V.v=J;if(V.t=="z"||(E.dense?(N[C]||(N[C]=[]),N[C][I]=V):N[tr({c:I,r:C})]=V),O=B+1,Y=w.charCodeAt(O),A.e.c<I&&(A.e.c=I),A.e.r<C&&(A.e.r=C),F==U)++I;else if(I=0,++C,E.sheetRows&&E.sheetRows<=C)return!0}e:for(;B<w.length;++B)switch(F=w.charCodeAt(B)){case 34:Y===34&&(X=!X);break;case U:case 10:case 13:if(!X&&ce())break e;break}return B-O>0&&ce(),N["!ref"]=gr(A),N}function u(w,_){return!(_&&_.PRN)||_.FS||w.slice(0,4)=="sep="||w.indexOf("	")>=0||w.indexOf(",")>=0||w.indexOf(";")>=0?i(w,_):Y0(r(w,_),_)}function f(w,_){var E="",k=_.type=="string"?[0,0,0,0]:k2(w,_);switch(_.type){case"base64":E=Ms(w);break;case"binary":E=w;break;case"buffer":_.codepage==65001?E=w.toString("utf8"):_.codepage&&typeof yd<"u"||(E=Sr&&Buffer.isBuffer(w)?w.toString("binary"):So(w));break;case"array":E=gc(w);break;case"string":E=w;break;default:throw new Error("Unrecognized type "+_.type)}return k[0]==239&&k[1]==187&&k[2]==191?E=cn(E.slice(3)):_.type!="string"&&_.type!="buffer"&&_.codepage==65001?E=cn(E):_.type=="binary"&&typeof yd<"u",E.slice(0,19)=="socialcalc:version:"?yE.to_sheet(_.type=="string"?E:cn(E),_):u(E,_)}function g(w,_){return Ao(f(w,_),_)}function m(w){for(var _=[],E=Ur(w["!ref"]),k,N=Array.isArray(w),A=E.s.r;A<=E.e.r;++A){for(var C=[],I=E.s.c;I<=E.e.c;++I){var D=tr({r:A,c:I});if(k=N?(w[A]||[])[I]:w[D],!k||k.v==null){C.push("          ");continue}for(var O=(k.w||(Sl(k),k.w)||"").slice(0,10);O.length<10;)O+=" ";C.push(O+(I===0?" ":""))}_.push(C.join(""))}return _.join(`
`)}return{to_workbook:g,to_sheet:f,from_sheet:m}})();function qI(e,r){var t=r||{},n=!!t.WTF;t.WTF=!0;try{var a=wE.to_workbook(e,t);return t.WTF=n,a}catch(i){if(t.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return L0.to_workbook(e,r)}}var uc=(function(){function e(L,q,P){if(L){Ra(L,L.l||0);for(var Z=P.Enum||We;L.l<L.length;){var pe=L.read_shift(2),Le=Z[pe]||Z[65535],Be=L.read_shift(2),Pe=L.l+Be,et=Le.f&&Le.f(L,Be,P);if(L.l=Pe,q(et,Le,pe))return}}}function r(L,q){switch(q.type){case"base64":return t(Os(Ms(L)),q);case"binary":return t(Os(L),q);case"buffer":case"array":return t(L,q)}throw"Unsupported type "+q.type}function t(L,q){if(!L)return L;var P=q||{},Z=P.dense?[]:{},pe="Sheet1",Le="",Be=0,Pe={},et=[],ut=[],ve={s:{r:0,c:0},e:{r:0,c:0}},Ie=P.sheetRows||0;if(L[2]==0&&(L[3]==8||L[3]==9)&&L.length>=16&&L[14]==5&&L[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(L[2]==2)P.Enum=We,e(L,function(le,de,Ee){switch(Ee){case 0:P.vers=le,le>=4096&&(P.qpro=!0);break;case 6:ve=le;break;case 204:le&&(Le=le);break;case 222:Le=le;break;case 15:case 51:P.qpro||(le[1].v=le[1].v.slice(1));case 13:case 14:case 16:Ee==14&&(le[2]&112)==112&&(le[2]&15)>1&&(le[2]&15)<15&&(le[1].z=P.dateNF||er[14],P.cellDates&&(le[1].t="d",le[1].v=P1(le[1].v))),P.qpro&&le[3]>Be&&(Z["!ref"]=gr(ve),Pe[pe]=Z,et.push(pe),Z=P.dense?[]:{},ve={s:{r:0,c:0},e:{r:0,c:0}},Be=le[3],pe=Le||"Sheet"+(Be+1),Le="");var at=P.dense?(Z[le[0].r]||[])[le[0].c]:Z[tr(le[0])];if(at){at.t=le[1].t,at.v=le[1].v,le[1].z!=null&&(at.z=le[1].z),le[1].f!=null&&(at.f=le[1].f);break}P.dense?(Z[le[0].r]||(Z[le[0].r]=[]),Z[le[0].r][le[0].c]=le[1]):Z[tr(le[0])]=le[1];break}},P);else if(L[2]==26||L[2]==14)P.Enum=re,L[2]==14&&(P.qpro=!0,L.l=0),e(L,function(le,de,Ee){switch(Ee){case 204:pe=le;break;case 22:le[1].v=le[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(le[3]>Be&&(Z["!ref"]=gr(ve),Pe[pe]=Z,et.push(pe),Z=P.dense?[]:{},ve={s:{r:0,c:0},e:{r:0,c:0}},Be=le[3],pe="Sheet"+(Be+1)),Ie>0&&le[0].r>=Ie)break;P.dense?(Z[le[0].r]||(Z[le[0].r]=[]),Z[le[0].r][le[0].c]=le[1]):Z[tr(le[0])]=le[1],ve.e.c<le[0].c&&(ve.e.c=le[0].c),ve.e.r<le[0].r&&(ve.e.r=le[0].r);break;case 27:le[14e3]&&(ut[le[14e3][0]]=le[14e3][1]);break;case 1537:ut[le[0]]=le[1],le[0]==Be&&(pe=le[1]);break}},P);else throw new Error("Unrecognized LOTUS BOF "+L[2]);if(Z["!ref"]=gr(ve),Pe[Le||pe]=Z,et.push(Le||pe),!ut.length)return{SheetNames:et,Sheets:Pe};for(var z={},De=[],Te=0;Te<ut.length;++Te)Pe[et[Te]]?(De.push(ut[Te]||et[Te]),z[ut[Te]]=Pe[ut[Te]]||Pe[et[Te]]):(De.push(ut[Te]),z[ut[Te]]={"!ref":"A1"});return{SheetNames:De,Sheets:z}}function n(L,q){var P=q||{};if(+P.codepage>=0&&pi(+P.codepage),P.type=="string")throw new Error("Cannot write WK1 to JS string");var Z=us(),pe=Ur(L["!ref"]),Le=Array.isArray(L),Be=[];jt(Z,0,i(1030)),jt(Z,6,g(pe));for(var Pe=Math.min(pe.e.r,8191),et=pe.s.r;et<=Pe;++et)for(var ut=Zn(et),ve=pe.s.c;ve<=pe.e.c;++ve){et===pe.s.r&&(Be[ve]=On(ve));var Ie=Be[ve]+ut,z=Le?(L[et]||[])[ve]:L[Ie];if(!(!z||z.t=="z"))if(z.t=="n")(z.v|0)==z.v&&z.v>=-32768&&z.v<=32767?jt(Z,13,k(et,ve,z.v)):jt(Z,14,A(et,ve,z.v));else{var De=Sl(z);jt(Z,15,_(et,ve,De.slice(0,239)))}}return jt(Z,1),Z.end()}function a(L,q){var P=q||{};if(+P.codepage>=0&&pi(+P.codepage),P.type=="string")throw new Error("Cannot write WK3 to JS string");var Z=us();jt(Z,0,u(L));for(var pe=0,Le=0;pe<L.SheetNames.length;++pe)(L.Sheets[L.SheetNames[pe]]||{})["!ref"]&&jt(Z,27,ge(L.SheetNames[pe],Le++));var Be=0;for(pe=0;pe<L.SheetNames.length;++pe){var Pe=L.Sheets[L.SheetNames[pe]];if(!(!Pe||!Pe["!ref"])){for(var et=Ur(Pe["!ref"]),ut=Array.isArray(Pe),ve=[],Ie=Math.min(et.e.r,8191),z=et.s.r;z<=Ie;++z)for(var De=Zn(z),Te=et.s.c;Te<=et.e.c;++Te){z===et.s.r&&(ve[Te]=On(Te));var le=ve[Te]+De,de=ut?(Pe[z]||[])[Te]:Pe[le];if(!(!de||de.t=="z"))if(de.t=="n")jt(Z,23,ce(z,Te,Be,de.v));else{var Ee=Sl(de);jt(Z,22,F(z,Te,Be,Ee.slice(0,239)))}}++Be}}return jt(Z,1),Z.end()}function i(L){var q=ft(2);return q.write_shift(2,L),q}function u(L){var q=ft(26);q.write_shift(2,4096),q.write_shift(2,4),q.write_shift(4,0);for(var P=0,Z=0,pe=0,Le=0;Le<L.SheetNames.length;++Le){var Be=L.SheetNames[Le],Pe=L.Sheets[Be];if(!(!Pe||!Pe["!ref"])){++pe;var et=ds(Pe["!ref"]);P<et.e.r&&(P=et.e.r),Z<et.e.c&&(Z=et.e.c)}}return P>8191&&(P=8191),q.write_shift(2,P),q.write_shift(1,pe),q.write_shift(1,Z),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(1,1),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(4,0),q}function f(L,q,P){var Z={s:{c:0,r:0},e:{c:0,r:0}};return q==8&&P.qpro?(Z.s.c=L.read_shift(1),L.l++,Z.s.r=L.read_shift(2),Z.e.c=L.read_shift(1),L.l++,Z.e.r=L.read_shift(2),Z):(Z.s.c=L.read_shift(2),Z.s.r=L.read_shift(2),q==12&&P.qpro&&(L.l+=2),Z.e.c=L.read_shift(2),Z.e.r=L.read_shift(2),q==12&&P.qpro&&(L.l+=2),Z.s.c==65535&&(Z.s.c=Z.e.c=Z.s.r=Z.e.r=0),Z)}function g(L){var q=ft(8);return q.write_shift(2,L.s.c),q.write_shift(2,L.s.r),q.write_shift(2,L.e.c),q.write_shift(2,L.e.r),q}function m(L,q,P){var Z=[{c:0,r:0},{t:"n",v:0},0,0];return P.qpro&&P.vers!=20768?(Z[0].c=L.read_shift(1),Z[3]=L.read_shift(1),Z[0].r=L.read_shift(2),L.l+=2):(Z[2]=L.read_shift(1),Z[0].c=L.read_shift(2),Z[0].r=L.read_shift(2)),Z}function w(L,q,P){var Z=L.l+q,pe=m(L,q,P);if(pe[1].t="s",P.vers==20768){L.l++;var Le=L.read_shift(1);return pe[1].v=L.read_shift(Le,"utf8"),pe}return P.qpro&&L.l++,pe[1].v=L.read_shift(Z-L.l,"cstr"),pe}function _(L,q,P){var Z=ft(7+P.length);Z.write_shift(1,255),Z.write_shift(2,q),Z.write_shift(2,L),Z.write_shift(1,39);for(var pe=0;pe<Z.length;++pe){var Le=P.charCodeAt(pe);Z.write_shift(1,Le>=128?95:Le)}return Z.write_shift(1,0),Z}function E(L,q,P){var Z=m(L,q,P);return Z[1].v=L.read_shift(2,"i"),Z}function k(L,q,P){var Z=ft(7);return Z.write_shift(1,255),Z.write_shift(2,q),Z.write_shift(2,L),Z.write_shift(2,P,"i"),Z}function N(L,q,P){var Z=m(L,q,P);return Z[1].v=L.read_shift(8,"f"),Z}function A(L,q,P){var Z=ft(13);return Z.write_shift(1,255),Z.write_shift(2,q),Z.write_shift(2,L),Z.write_shift(8,P,"f"),Z}function C(L,q,P){var Z=L.l+q,pe=m(L,q,P);if(pe[1].v=L.read_shift(8,"f"),P.qpro)L.l=Z;else{var Le=L.read_shift(2);B(L.slice(L.l,L.l+Le),pe),L.l+=Le}return pe}function I(L,q,P){var Z=q&32768;return q&=-32769,q=(Z?L:0)+(q>=8192?q-16384:q),(Z?"":"$")+(P?On(q):Zn(q))}var D={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},O=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function B(L,q){Ra(L,0);for(var P=[],Z=0,pe="",Le="",Be="",Pe="";L.l<L.length;){var et=L[L.l++];switch(et){case 0:P.push(L.read_shift(8,"f"));break;case 1:Le=I(q[0].c,L.read_shift(2),!0),pe=I(q[0].r,L.read_shift(2),!1),P.push(Le+pe);break;case 2:{var ut=I(q[0].c,L.read_shift(2),!0),ve=I(q[0].r,L.read_shift(2),!1);Le=I(q[0].c,L.read_shift(2),!0),pe=I(q[0].r,L.read_shift(2),!1),P.push(ut+ve+":"+Le+pe)}break;case 3:if(L.l<L.length){console.error("WK1 premature formula end");return}break;case 4:P.push("("+P.pop()+")");break;case 5:P.push(L.read_shift(2));break;case 6:{for(var Ie="";et=L[L.l++];)Ie+=String.fromCharCode(et);P.push('"'+Ie.replace(/"/g,'""')+'"')}break;case 8:P.push("-"+P.pop());break;case 23:P.push("+"+P.pop());break;case 22:P.push("NOT("+P.pop()+")");break;case 20:case 21:Pe=P.pop(),Be=P.pop(),P.push(["AND","OR"][et-20]+"("+Be+","+Pe+")");break;default:if(et<32&&O[et])Pe=P.pop(),Be=P.pop(),P.push(Be+O[et]+Pe);else if(D[et]){if(Z=D[et][1],Z==69&&(Z=L[L.l++]),Z>P.length){console.error("WK1 bad formula parse 0x"+et.toString(16)+":|"+P.join("|")+"|");return}var z=P.slice(-Z);P.length-=Z,P.push(D[et][0]+"("+z.join(",")+")")}else return et<=7?console.error("WK1 invalid opcode "+et.toString(16)):et<=24?console.error("WK1 unsupported op "+et.toString(16)):et<=30?console.error("WK1 invalid opcode "+et.toString(16)):et<=115?console.error("WK1 unsupported function opcode "+et.toString(16)):console.error("WK1 unrecognized opcode "+et.toString(16))}}P.length==1?q[1].f=""+P[0]:console.error("WK1 bad formula parse |"+P.join("|")+"|")}function U(L){var q=[{c:0,r:0},{t:"n",v:0},0];return q[0].r=L.read_shift(2),q[3]=L[L.l++],q[0].c=L[L.l++],q}function X(L,q){var P=U(L);return P[1].t="s",P[1].v=L.read_shift(q-4,"cstr"),P}function F(L,q,P,Z){var pe=ft(6+Z.length);pe.write_shift(2,L),pe.write_shift(1,P),pe.write_shift(1,q),pe.write_shift(1,39);for(var Le=0;Le<Z.length;++Le){var Be=Z.charCodeAt(Le);pe.write_shift(1,Be>=128?95:Be)}return pe.write_shift(1,0),pe}function Y(L,q){var P=U(L);P[1].v=L.read_shift(2);var Z=P[1].v>>1;if(P[1].v&1)switch(Z&7){case 0:Z=(Z>>3)*5e3;break;case 1:Z=(Z>>3)*500;break;case 2:Z=(Z>>3)/20;break;case 3:Z=(Z>>3)/200;break;case 4:Z=(Z>>3)/2e3;break;case 5:Z=(Z>>3)/2e4;break;case 6:Z=(Z>>3)/16;break;case 7:Z=(Z>>3)/64;break}return P[1].v=Z,P}function H(L,q){var P=U(L),Z=L.read_shift(4),pe=L.read_shift(4),Le=L.read_shift(2);if(Le==65535)return Z===0&&pe===3221225472?(P[1].t="e",P[1].v=15):Z===0&&pe===3489660928?(P[1].t="e",P[1].v=42):P[1].v=0,P;var Be=Le&32768;return Le=(Le&32767)-16446,P[1].v=(1-Be*2)*(pe*Math.pow(2,Le+32)+Z*Math.pow(2,Le)),P}function ce(L,q,P,Z){var pe=ft(14);if(pe.write_shift(2,L),pe.write_shift(1,P),pe.write_shift(1,q),Z==0)return pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(2,65535),pe;var Le=0,Be=0,Pe=0,et=0;return Z<0&&(Le=1,Z=-Z),Be=Math.log2(Z)|0,Z/=Math.pow(2,Be-31),et=Z>>>0,(et&2147483648)==0&&(Z/=2,++Be,et=Z>>>0),Z-=et,et|=2147483648,et>>>=0,Z*=Math.pow(2,32),Pe=Z>>>0,pe.write_shift(4,Pe),pe.write_shift(4,et),Be+=16383+(Le?32768:0),pe.write_shift(2,Be),pe}function J(L,q){var P=H(L);return L.l+=q-14,P}function V(L,q){var P=U(L),Z=L.read_shift(4);return P[1].v=Z>>6,P}function xe(L,q){var P=U(L),Z=L.read_shift(8,"f");return P[1].v=Z,P}function W(L,q){var P=xe(L);return L.l+=q-10,P}function ne(L,q){return L[L.l+q-1]==0?L.read_shift(q,"cstr"):""}function be(L,q){var P=L[L.l++];P>q-1&&(P=q-1);for(var Z="";Z.length<P;)Z+=String.fromCharCode(L[L.l++]);return Z}function fe(L,q,P){if(!(!P.qpro||q<21)){var Z=L.read_shift(1);L.l+=17,L.l+=1,L.l+=2;var pe=L.read_shift(q-21,"cstr");return[Z,pe]}}function Ve(L,q){for(var P={},Z=L.l+q;L.l<Z;){var pe=L.read_shift(2);if(pe==14e3){for(P[pe]=[0,""],P[pe][0]=L.read_shift(2);L[L.l];)P[pe][1]+=String.fromCharCode(L[L.l]),L.l++;L.l++}}return P}function ge(L,q){var P=ft(5+L.length);P.write_shift(2,14e3),P.write_shift(2,q);for(var Z=0;Z<L.length;++Z){var pe=L.charCodeAt(Z);P[P.l++]=pe>127?95:pe}return P[P.l++]=0,P}var We={0:{n:"BOF",f:ia},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:E},14:{n:"NUMBER",f:N},15:{n:"LABEL",f:w},16:{n:"FORMULA",f:C},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:w},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ne},222:{n:"SHEETNAMELP",f:be},65535:{n:""}},re={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:X},23:{n:"NUMBER17",f:H},24:{n:"NUMBER18",f:Y},25:{n:"FORMULA19",f:J},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Ve},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:V},38:{n:"??"},39:{n:"NUMBER27",f:xe},40:{n:"FORMULA28",f:W},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ne},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:fe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:r}})();function YI(e){var r={},t=e.match(Ha),n=0,a=!1;if(t)for(;n!=t.length;++n){var i=rr(t[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":r.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;r.cp=Up[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":r.outline=1;break;case"</outline>":break;case"<rFont":r.name=i.val;break;case"<sz":r.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":r.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":r.uval="double";break;case"singleAccounting":r.uval="single-accounting";break;case"doubleAccounting":r.uval="double-accounting";break}case"<u>":case"<u/>":r.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":r.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":r.i=1;break;case"</i>":break;case"<color":i.rgb&&(r.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":r.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":r.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+i[0])}}return r}var $I=(function(){var e=Ed("t"),r=Ed("rPr");function t(i){var u=i.match(e);if(!u)return{t:"s",v:""};var f={t:"s",v:Pr(u[1])},g=i.match(r);return g&&(f.s=YI(g[1])),f}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(u){return u.replace(n,"").split(a).map(t).filter(function(f){return f.v})}})(),ZI=(function(){var r=/(\r\n|\n)/g;function t(a,i,u){var f=[];a.u&&f.push("text-decoration: underline;"),a.uval&&f.push("text-underline-style:"+a.uval+";"),a.sz&&f.push("font-size:"+a.sz+"pt;"),a.outline&&f.push("text-effect: outline;"),a.shadow&&f.push("text-shadow: auto;"),i.push('<span style="'+f.join("")+'">'),a.b&&(i.push("<b>"),u.push("</b>")),a.i&&(i.push("<i>"),u.push("</i>")),a.strike&&(i.push("<s>"),u.push("</s>"));var g=a.valign||"";return g=="superscript"||g=="super"?g="sup":g=="subscript"&&(g="sub"),g!=""&&(i.push("<"+g+">"),u.push("</"+g+">")),u.push("</span>"),a}function n(a){var i=[[],a.v,[]];return a.v?(a.s&&t(a.s,i[0],i[2]),i[0].join("")+i[1].replace(r,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}})(),JI=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,QI=/<(?:\w+:)?r>/,eD=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function u2(e,r){var t=r?r.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Pr(cn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=cn(e),t&&(n.h=$p(n.t))):e.match(QI)&&(n.r=cn(e),n.t=Pr(cn((e.replace(eD,"").match(JI)||[]).join("").replace(Ha,""))),t&&(n.h=ZI($I(n.r)))),n):{t:""}}var tD=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,rD=/<(?:\w+:)?(?:si|sstItem)>/g,nD=/<\/(?:\w+:)?(?:si|sstItem)>/;function aD(e,r){var t=[],n="";if(!e)return t;var a=e.match(tD);if(a){n=a[2].replace(rD,"").split(nD);for(var i=0;i!=n.length;++i){var u=u2(n[i].trim(),r);u!=null&&(t[t.length]=u)}a=rr(a[1]),t.Count=a.count,t.Unique=a.uniqueCount}return t}var sD=/^\s|\s$|[\t\n\r]/;function _E(e,r){if(!r.bookSST)return"";var t=[Jn];t[t.length]=Tt("sst",null,{xmlns:Ec[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(sD)&&(i+=' xml:space="preserve"'),i+=">"+an(a.t)+"</t>"),i+="</si>",t[t.length]=i}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function iD(e){return[e.read_shift(4),e.read_shift(4)]}function lD(e,r){var t=[],n=!1;return Cl(e,function(i,u,f){switch(f){case 159:t.Count=i[0],t.Unique=i[1];break;case 19:t.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(u.T,!n||r.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}),t}function oD(e,r){return r||(r=ft(8)),r.write_shift(4,e.Count),r.write_shift(4,e.Unique),r}var cD=wO;function uD(e){var r=us();vt(r,159,oD(e));for(var t=0;t<e.length;++t)vt(r,19,cD(e[t]));return vt(r,160),r.end()}function kE(e){for(var r=[],t=e.split(""),n=0;n<t.length;++n)r[n]=t[n].charCodeAt(0);return r}function kl(e,r){var t={};return t.Major=e.read_shift(2),t.Minor=e.read_shift(2),r>=4&&(e.l+=r-4),t}function dD(e){var r={};return r.id=e.read_shift(0,"lpp4"),r.R=kl(e,4),r.U=kl(e,4),r.W=kl(e,4),r}function fD(e){for(var r=e.read_shift(4),t=e.l+r-4,n={},a=e.read_shift(4),i=[];a-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=t)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+t);return n}function hD(e){var r=[];e.l+=4;for(var t=e.read_shift(4);t-- >0;)r.push(fD(e));return r}function xD(e){var r=[];e.l+=4;for(var t=e.read_shift(4);t-- >0;)r.push(e.read_shift(0,"lpp4"));return r}function mD(e){var r={};return e.read_shift(4),e.l+=4,r.id=e.read_shift(0,"lpp4"),r.name=e.read_shift(0,"lpp4"),r.R=kl(e,4),r.U=kl(e,4),r.W=kl(e,4),r}function gD(e){var r=mD(e);if(r.ename=e.read_shift(0,"8lpp4"),r.blksz=e.read_shift(4),r.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return r}function EE(e,r){var t=e.l+r,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(t-e.l>>1,"utf16le"),e.l=t,n}function SE(e,r){var t={},n=e.l+r;return e.l+=4,t.Salt=e.slice(e.l,e.l+16),e.l+=16,t.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),t.VerifierHash=e.slice(e.l,n),e.l=n,t}function pD(e){var r=kl(e);switch(r.Minor){case 2:return[r.Minor,bD(e)];case 3:return[r.Minor,wD()];case 4:return[r.Minor,vD(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+r.Minor)}function bD(e){var r=e.read_shift(4);if((r&63)!=36)throw new Error("EncryptionInfo mismatch");var t=e.read_shift(4),n=EE(e,t),a=SE(e,e.length-e.l);return{t:"Std",h:n,v:a}}function wD(){throw new Error("File is password-protected: ECMA-376 Extensible")}function vD(e){var r=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var t=e.read_shift(e.length-e.l,"utf8"),n={};return t.replace(Ha,function(i){var u=rr(i);switch(Gi(u[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":r.forEach(function(f){n[f]=u[f]});break;case"<dataIntegrity":n.encryptedHmacKey=u.encryptedHmacKey,n.encryptedHmacValue=u.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=u.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(u);break;default:throw u[0]}}),n}function yD(e,r){var t={},n=t.EncryptionVersionInfo=kl(e,4);if(r-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);t.Flags=e.read_shift(4),r-=4;var a=e.read_shift(4);return r-=4,t.EncryptionHeader=EE(e,a),r-=a,t.EncryptionVerifier=SE(e,r),t}function _D(e){var r={},t=r.EncryptionVersionInfo=kl(e,4);if(t.Major!=1||t.Minor!=1)throw"unrecognized version code "+t.Major+" : "+t.Minor;return r.Salt=e.read_shift(16),r.EncryptedVerifier=e.read_shift(16),r.EncryptedVerifierHash=e.read_shift(16),r}function d2(e){var r=0,t,n=kE(e),a=n.length+1,i,u,f,g,m;for(t=yo(a),t[0]=n.length,i=1;i!=a;++i)t[i]=n[i-1];for(i=a-1;i>=0;--i)u=t[i],f=(r&16384)===0?0:1,g=r<<1&32767,m=f|g,r=m^u;return r^52811}var AE=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],r=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],t=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(u){return(u/2|u*128)&255},a=function(u,f){return n(u^f)},i=function(u){for(var f=r[u.length-1],g=104,m=u.length-1;m>=0;--m)for(var w=u[m],_=0;_!=7;++_)w&64&&(f^=t[g]),w*=2,--g;return f};return function(u){for(var f=kE(u),g=i(f),m=f.length,w=yo(16),_=0;_!=16;++_)w[_]=0;var E,k,N;for((m&1)===1&&(E=g>>8,w[m]=a(e[0],E),--m,E=g&255,k=f[f.length-1],w[m]=a(k,E));m>0;)--m,E=g>>8,w[m]=a(f[m],E),--m,E=g&255,w[m]=a(f[m],E);for(m=15,N=15-f.length;N>0;)E=g>>8,w[m]=a(e[N],E),--m,--N,E=g&255,w[m]=a(f[m],E),--m,--N;return w}})(),kD=function(e,r,t,n,a){a||(a=r),n||(n=AE(e));var i,u;for(i=0;i!=r.length;++i)u=r[i],u^=n[t],u=(u>>5|u<<3)&255,a[i]=u,++t;return[a,t,n]},ED=function(e){var r=0,t=AE(e);return function(n){var a=kD("",n,r,t);return r=a[1],a[0]}};function SD(e,r,t,n){var a={key:ia(e),verificationBytes:ia(e)};return t.password&&(a.verifier=d2(t.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=ED(t.password)),a}function AD(e,r,t){var n=t||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=_D(e):n.Data=yD(e,r),n}function ND(e,r,t){var n={Type:t.biff>=8?e.read_shift(2):0};return n.Type?AD(e,r-2,n):SD(e,t.biff>=8?r:r-2,t,n),n}var NE=(function(){function e(a,i){switch(i.type){case"base64":return r(Ms(a),i);case"binary":return r(a,i);case"buffer":return r(Sr&&Buffer.isBuffer(a)?a.toString("binary"):So(a),i);case"array":return r(gc(a),i)}throw new Error("Unrecognized type "+i.type)}function r(a,i){var u=i||{},f=u.dense?[]:{},g=a.match(/\\trowd.*?\\row\b/g);if(!g.length)throw new Error("RTF missing table");var m={s:{c:0,r:0},e:{c:0,r:g.length-1}};return g.forEach(function(w,_){Array.isArray(f)&&(f[_]=[]);for(var E=/\\\w+\b/g,k=0,N,A=-1;N=E.exec(w);){switch(N[0]){case"\\cell":var C=w.slice(k,E.lastIndex-N[0].length);if(C[0]==" "&&(C=C.slice(1)),++A,C.length){var I={v:C,t:"s"};Array.isArray(f)?f[_][A]=I:f[tr({r:_,c:A})]=I}break}k=E.lastIndex}A>m.e.c&&(m.e.c=A)}),f["!ref"]=gr(m),f}function t(a,i){return Ao(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],u=Ur(a["!ref"]),f,g=Array.isArray(a),m=u.s.r;m<=u.e.r;++m){i.push("\\trowd\\trautofit1");for(var w=u.s.c;w<=u.e.c;++w)i.push("\\cellx"+(w+1));for(i.push("\\pard\\intbl"),w=u.s.c;w<=u.e.c;++w){var _=tr({r:m,c:w});f=g?(a[m]||[])[w]:a[_],!(!f||f.v==null&&(!f.f||f.F))&&(i.push(" "+(f.w||(Sl(f),f.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:t,to_sheet:e,from_sheet:n}})();function CD(e){var r=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(r.slice(0,2),16),parseInt(r.slice(2,4),16),parseInt(r.slice(4,6),16)]}function Cd(e){for(var r=0,t=1;r!=3;++r)t=t*256+(e[r]>255?255:e[r]<0?0:e[r]);return t.toString(16).toUpperCase().slice(1)}function TD(e){var r=e[0]/255,t=e[1]/255,n=e[2]/255,a=Math.max(r,t,n),i=Math.min(r,t,n),u=a-i;if(u===0)return[0,0,r];var f=0,g=0,m=a+i;switch(g=u/(m>1?2-m:m),a){case r:f=((t-n)/u+6)%6;break;case t:f=(n-r)/u+2;break;case n:f=(r-t)/u+4;break}return[f/6,g,m/2]}function jD(e){var r=e[0],t=e[1],n=e[2],a=t*2*(n<.5?n:1-n),i=n-a/2,u=[i,i,i],f=6*r,g;if(t!==0)switch(f|0){case 0:case 6:g=a*f,u[0]+=a,u[1]+=g;break;case 1:g=a*(2-f),u[0]+=g,u[1]+=a;break;case 2:g=a*(f-2),u[1]+=a,u[2]+=g;break;case 3:g=a*(4-f),u[1]+=g,u[2]+=a;break;case 4:g=a*(f-4),u[2]+=a,u[0]+=g;break;case 5:g=a*(6-f),u[2]+=g,u[0]+=a;break}for(var m=0;m!=3;++m)u[m]=Math.round(u[m]*255);return u}function w1(e,r){if(r===0)return e;var t=TD(CD(e));return r<0?t[2]=t[2]*(1+r):t[2]=1-(1-t[2])*(1-r),Cd(jD(t))}var CE=6,RD=15,OD=1,La=CE;function Td(e){return Math.floor((e+Math.round(128/La)/256)*La)}function jd(e){return Math.floor((e-5)/La*100+.5)/100}function v1(e){return Math.round((e*La+5)/La*256)/256}function fg(e){return v1(jd(Td(e)))}function f2(e){var r=Math.abs(e-fg(e)),t=La;if(r>.005)for(La=OD;La<RD;++La)Math.abs(e-fg(e))<=r&&(r=Math.abs(e-fg(e)),t=La);La=t}function _o(e){e.width?(e.wpx=Td(e.width),e.wch=jd(e.wpx),e.MDW=La):e.wpx?(e.wch=jd(e.wpx),e.width=v1(e.wch),e.MDW=La):typeof e.wch=="number"&&(e.width=v1(e.wch),e.wpx=Td(e.width),e.MDW=La),e.customWidth&&delete e.customWidth}var ID=96,TE=ID;function Rd(e){return e*96/TE}function B0(e){return e*TE/96}var DD={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function MD(e,r,t,n){r.Borders=[];var a={},i=!1;(e[0].match(Ha)||[]).forEach(function(u){var f=rr(u);switch(Gi(f[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},f.diagonalUp&&(a.diagonalUp=vn(f.diagonalUp)),f.diagonalDown&&(a.diagonalDown=vn(f.diagonalDown)),r.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+f[0]+" in borders")}})}function FD(e,r,t,n){r.Fills=[];var a={},i=!1;(e[0].match(Ha)||[]).forEach(function(u){var f=rr(u);switch(Gi(f[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},r.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":r.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":f.patternType&&(a.patternType=f.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),f.indexed&&(a.bgColor.indexed=parseInt(f.indexed,10)),f.theme&&(a.bgColor.theme=parseInt(f.theme,10)),f.tint&&(a.bgColor.tint=parseFloat(f.tint)),f.rgb&&(a.bgColor.rgb=f.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),f.theme&&(a.fgColor.theme=parseInt(f.theme,10)),f.tint&&(a.fgColor.tint=parseFloat(f.tint)),f.rgb!=null&&(a.fgColor.rgb=f.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+f[0]+" in fills")}})}function LD(e,r,t,n){r.Fonts=[];var a={},i=!1;(e[0].match(Ha)||[]).forEach(function(u){var f=rr(u);switch(Gi(f[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":r.Fonts.push(a),a={};break;case"<name":f.val&&(a.name=cn(f.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=f.val?vn(f.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=f.val?vn(f.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(f.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=f.val?vn(f.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=f.val?vn(f.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=f.val?vn(f.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=f.val?vn(f.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=f.val?vn(f.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":f.val&&(a.sz=+f.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":f.val&&(a.vertAlign=f.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":f.val&&(a.family=parseInt(f.val,10));break;case"<family/>":case"</family>":break;case"<scheme":f.val&&(a.scheme=f.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(f.val=="1")break;f.codepage=Up[parseInt(f.val,10)];break;case"<color":if(a.color||(a.color={}),f.auto&&(a.color.auto=vn(f.auto)),f.rgb)a.color.rgb=f.rgb.slice(-6);else if(f.indexed){a.color.index=parseInt(f.indexed,10);var g=oc[a.color.index];a.color.index==81&&(g=oc[1]),g||(g=oc[1]),a.color.rgb=g[0].toString(16)+g[1].toString(16)+g[2].toString(16)}else f.theme&&(a.color.theme=parseInt(f.theme,10),f.tint&&(a.color.tint=parseFloat(f.tint)),f.theme&&t.themeElements&&t.themeElements.clrScheme&&(a.color.rgb=w1(t.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+f[0]+" in fonts")}})}function BD(e,r,t){r.NumberFmt=[];for(var n=Gn(er),a=0;a<n.length;++a)r.NumberFmt[n[a]]=er[n[a]];var i=e[0].match(Ha);if(i)for(a=0;a<i.length;++a){var u=rr(i[a]);switch(Gi(u[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var f=Pr(cn(u.formatCode)),g=parseInt(u.numFmtId,10);if(r.NumberFmt[g]=f,g>0){if(g>392){for(g=392;g>60&&r.NumberFmt[g]!=null;--g);r.NumberFmt[g]=f}_l(f,g)}}break;case"</numFmt>":break;default:if(t.WTF)throw new Error("unrecognized "+u[0]+" in numFmts")}}}function PD(e){var r=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var n=t[0];n<=t[1];++n)e[n]!=null&&(r[r.length]=Tt("numFmt",null,{numFmtId:n,formatCode:an(e[n])}))}),r.length===1?"":(r[r.length]="</numFmts>",r[0]=Tt("numFmts",null,{count:r.length-2}).replace("/>",">"),r.join(""))}var Ph=["numFmtId","fillId","fontId","borderId","xfId"],Uh=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function UD(e,r,t){r.CellXf=[];var n,a=!1;(e[0].match(Ha)||[]).forEach(function(i){var u=rr(i),f=0;switch(Gi(u[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=u,delete n[0],f=0;f<Ph.length;++f)n[Ph[f]]&&(n[Ph[f]]=parseInt(n[Ph[f]],10));for(f=0;f<Uh.length;++f)n[Uh[f]]&&(n[Uh[f]]=vn(n[Uh[f]]));if(r.NumberFmt&&n.numFmtId>392){for(f=392;f>60;--f)if(r.NumberFmt[n.numFmtId]==r.NumberFmt[f]){n.numFmtId=f;break}}r.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var g={};u.vertical&&(g.vertical=u.vertical),u.horizontal&&(g.horizontal=u.horizontal),u.textRotation!=null&&(g.textRotation=u.textRotation),u.indent&&(g.indent=u.indent),u.wrapText&&(g.wrapText=vn(u.wrapText)),n.alignment=g;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(t&&t.WTF&&!a)throw new Error("unrecognized "+u[0]+" in cellXfs")}})}function zD(e){var r=[];return r[r.length]=Tt("cellXfs",null),e.forEach(function(t){r[r.length]=Tt("xf",null,t)}),r[r.length]="</cellXfs>",r.length===2?"":(r[0]=Tt("cellXfs",null,{count:r.length-2}).replace("/>",">"),r.join(""))}var HD=(function(){var r=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(f,g,m){var w={};if(!f)return w;f=f.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var _;return(_=f.match(r))&&BD(_,w,m),(_=f.match(a))&&LD(_,w,g,m),(_=f.match(n))&&FD(_,w,g,m),(_=f.match(i))&&MD(_,w,g,m),(_=f.match(t))&&UD(_,w,m),w}})();function jE(e,r){var t=[Jn,Tt("styleSheet",null,{xmlns:Ec[0],"xmlns:vt":xa.vt})],n;return e.SSF&&(n=PD(e.SSF))!=null&&(t[t.length]=n),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=zD(r.cellXfs))&&(t[t.length]=n),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function VD(e,r){var t=e.read_shift(2),n=Ua(e);return[t,n]}function GD(e,r,t){t||(t=ft(6+4*r.length)),t.write_shift(2,e),ya(r,t);var n=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),n}function WD(e,r,t){var n={};n.sz=e.read_shift(2)/20;var a=AO(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var u=e.read_shift(1);u!=0&&(n.underline=u);var f=e.read_shift(1);f>0&&(n.family=f);var g=e.read_shift(1);switch(g>0&&(n.charset=g),e.l++,n.color=SO(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Ua(e),n}function XD(e,r){r||(r=ft(153)),r.write_shift(2,e.sz*20),NO(e,r),r.write_shift(2,e.bold?700:400);var t=0;e.vertAlign=="superscript"?t=1:e.vertAlign=="subscript"&&(t=2),r.write_shift(2,t),r.write_shift(1,e.underline||0),r.write_shift(1,e.family||0),r.write_shift(1,e.charset||0),r.write_shift(1,0),g1(e.color,r);var n=0;return n=2,r.write_shift(1,n),ya(e.name,r),r.length>r.l?r.slice(0,r.l):r}var KD=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],hg,qD=za;function U_(e,r){r||(r=ft(84)),hg||(hg=L1(KD));var t=hg[e.patternType];t==null&&(t=40),r.write_shift(4,t);var n=0;if(t!=40)for(g1({auto:1},r),g1({auto:1},r);n<12;++n)r.write_shift(4,0);else{for(;n<4;++n)r.write_shift(4,0);for(;n<12;++n)r.write_shift(4,0)}return r.length>r.l?r.slice(0,r.l):r}function YD(e,r){var t=e.l+r,n=e.read_shift(2),a=e.read_shift(2);return e.l=t,{ixfe:n,numFmtId:a}}function RE(e,r,t){t||(t=ft(16)),t.write_shift(2,r||0),t.write_shift(2,e.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var n=0;return t.write_shift(1,n),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Xu(e,r){return r||(r=ft(10)),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(4,0),r}var $D=za;function ZD(e,r){return r||(r=ft(51)),r.write_shift(1,0),Xu(null,r),Xu(null,r),Xu(null,r),Xu(null,r),Xu(null,r),r.length>r.l?r.slice(0,r.l):r}function JD(e,r){return r||(r=ft(52)),r.write_shift(4,e.xfId),r.write_shift(2,1),r.write_shift(1,0),r.write_shift(1,0),m1(e.name||"",r),r.length>r.l?r.slice(0,r.l):r}function QD(e,r,t){var n=ft(2052);return n.write_shift(4,e),m1(r,n),m1(t,n),n.length>n.l?n.slice(0,n.l):n}function e9(e,r,t){var n={};n.NumberFmt=[];for(var a in er)n.NumberFmt[a]=er[a];n.CellXf=[],n.Fonts=[];var i=[],u=!1;return Cl(e,function(g,m,w){switch(w){case 44:n.NumberFmt[g[0]]=g[1],_l(g[1],g[0]);break;case 43:n.Fonts.push(g),g.color.theme!=null&&r&&r.themeElements&&r.themeElements.clrScheme&&(g.color.rgb=w1(r.themeElements.clrScheme[g.color.theme].rgb,g.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(g);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:u=!0;break;case 36:u=!1;break;case 37:i.push(w),u=!0;break;case 38:i.pop(),u=!1;break;default:if(m.T>0)i.push(w);else if(m.T<0)i.pop();else if(!u||t.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+w.toString(16))}}),n}function t9(e,r){if(r){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)r[a]!=null&&++t}),t!=0&&(vt(e,615,vi(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)r[a]!=null&&vt(e,44,GD(a,r[a]))}),vt(e,616))}}function r9(e){var r=1;vt(e,611,vi(r)),vt(e,43,XD({sz:12,color:{theme:1},name:"Calibri",family:2})),vt(e,612)}function n9(e){var r=2;vt(e,603,vi(r)),vt(e,45,U_({patternType:"none"})),vt(e,45,U_({patternType:"gray125"})),vt(e,604)}function a9(e){var r=1;vt(e,613,vi(r)),vt(e,46,ZD()),vt(e,614)}function s9(e){var r=1;vt(e,626,vi(r)),vt(e,47,RE({numFmtId:0},65535)),vt(e,627)}function i9(e,r){vt(e,617,vi(r.length)),r.forEach(function(t){vt(e,47,RE(t,0))}),vt(e,618)}function l9(e){var r=1;vt(e,619,vi(r)),vt(e,48,JD({xfId:0,name:"Normal"})),vt(e,620)}function o9(e){var r=0;vt(e,505,vi(r)),vt(e,506)}function c9(e){var r=0;vt(e,508,QD(r,"TableStyleMedium9","PivotStyleMedium4")),vt(e,509)}function u9(e,r){var t=us();return vt(t,278),t9(t,e.SSF),r9(t),n9(t),a9(t),s9(t),i9(t,r.cellXfs),l9(t),o9(t),c9(t),vt(t,279),t.end()}var d9=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function f9(e,r,t){r.themeElements.clrScheme=[];var n={};(e[0].match(Ha)||[]).forEach(function(a){var i=rr(a);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(r.themeElements.clrScheme[d9.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(t&&t.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function h9(){}function x9(){}var m9=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,g9=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,p9=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function b9(e,r,t){r.themeElements={};var n;[["clrScheme",m9,f9],["fontScheme",g9,h9],["fmtScheme",p9,x9]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,r,t)})}var w9=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function OE(e,r){(!e||e.length===0)&&(e=h2());var t,n={};if(!(t=e.match(w9)))throw new Error("themeElements not found in theme");return b9(t[0],n,r),n.raw=e,n}function h2(e,r){if(r&&r.themeXLSX)return r.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var t=[Jn];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function v9(e,r,t){var n=e.l+r,a=e.read_shift(4);if(a!==124226){if(!t.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var u;try{u=Ek(i,{type:"array"})}catch{return}var f=Is(u,"theme/theme/theme1.xml",!0);if(f)return OE(f,t)}}function y9(e){return e.read_shift(4)}function _9(e){var r={};switch(r.xclrType=e.read_shift(2),r.nTintShade=e.read_shift(2),r.xclrType){case 0:e.l+=4;break;case 1:r.xclrValue=k9(e,4);break;case 2:r.xclrValue=dE(e);break;case 3:r.xclrValue=y9(e);break;case 4:e.l+=4;break}return e.l+=8,r}function k9(e,r){return za(e,r)}function E9(e,r){return za(e,r)}function S9(e){var r=e.read_shift(2),t=e.read_shift(2)-4,n=[r];switch(r){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=_9(e);break;case 6:n[1]=E9(e,t);break;case 14:case 15:n[1]=e.read_shift(t===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+r+" "+t)}return n}function A9(e,r){var t=e.l+r;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),i=[];a-- >0;)i.push(S9(e,t-e.l));return{ixfe:n,ext:i}}function N9(e,r){r.forEach(function(t){t[0]})}function C9(e,r){return{flags:e.read_shift(4),version:e.read_shift(4),name:Ua(e)}}function T9(e){var r=ft(12+2*e.name.length);return r.write_shift(4,e.flags),r.write_shift(4,e.version),ya(e.name,r),r.slice(0,r.l)}function j9(e){for(var r=[],t=e.read_shift(4);t-- >0;)r.push([e.read_shift(4),e.read_shift(4)]);return r}function R9(e){var r=ft(4+8*e.length);r.write_shift(4,e.length);for(var t=0;t<e.length;++t)r.write_shift(4,e[t][0]),r.write_shift(4,e[t][1]);return r}function O9(e,r){var t=ft(8+2*r.length);return t.write_shift(4,e),ya(r,t),t.slice(0,t.l)}function I9(e){return e.l+=4,e.read_shift(4)!=0}function D9(e,r){var t=ft(8);return t.write_shift(4,e),t.write_shift(4,1),t}function M9(e,r,t){var n={Types:[],Cell:[],Value:[]},a=t||{},i=[],u=!1,f=2;return Cl(e,function(g,m,w){switch(w){case 335:n.Types.push({name:g.name});break;case 51:g.forEach(function(_){f==1?n.Cell.push({type:n.Types[_[0]-1].name,index:_[1]}):f==0&&n.Value.push({type:n.Types[_[0]-1].name,index:_[1]})});break;case 337:f=g?1:0;break;case 338:f=2;break;case 35:i.push(w),u=!0;break;case 36:i.pop(),u=!1;break;default:if(!m.T){if(!u||a.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+w.toString(16))}}}),n}function F9(){var e=us();return vt(e,332),vt(e,334,vi(1)),vt(e,335,T9({name:"XLDAPR",version:12e4,flags:3496657072})),vt(e,336),vt(e,339,O9(1,"XLDAPR")),vt(e,52),vt(e,35,vi(514)),vt(e,4096,vi(0)),vt(e,4097,Js(1)),vt(e,36),vt(e,53),vt(e,340),vt(e,337,D9(1)),vt(e,51,R9([[1,0]])),vt(e,338),vt(e,333),e.end()}function L9(e,r,t){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,i=2,u;return e.replace(Ha,function(f){var g=rr(f);switch(Gi(g[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:g.name});break;case"</metadataType>":break;case"<futureMetadata":for(var m=0;m<n.Types.length;++m)n.Types[m].name==g.name&&(u=n.Types[m]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[g.t-1].name,index:+g.v}):i==0&&n.Value.push({type:n.Types[g.t-1].name,index:+g.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!u)break;u.offsets||(u.offsets=[]),u.offsets.push(+g.i);break;default:if(!a&&t.WTF)throw new Error("unrecognized "+g[0]+" in metadata")}return f}),n}function IE(){var e=[Jn];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function B9(e){var r=[];if(!e)return r;var t=1;return(e.match(Ha)||[]).forEach(function(n){var a=rr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?t=a.i:a.i=t,r.push(a);break}}),r}function P9(e){var r={};r.i=e.read_shift(4);var t={};t.r=e.read_shift(4),t.c=e.read_shift(4),r.r=tr(t);var n=e.read_shift(1);return n&2&&(r.l="1"),n&8&&(r.a="1"),r}function U9(e,r,t){var n=[];return Cl(e,function(i,u,f){switch(f){case 63:n.push(i);break;default:if(!u.T)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}function z9(e,r,t,n){if(!e)return e;var a=n||{},i=!1;Cl(e,function(f,g,m){switch(m){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!g.T){if(!i||a.WTF)throw new Error("Unexpected record 0x"+m.toString(16))}}},a)}function H9(e,r){if(!e)return"??";var t=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return r["!id"][t].Target}var C0=1024;function DE(e,r){for(var t=[21600,21600],n=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),a=[Tt("xml",null,{"xmlns:v":Cs.v,"xmlns:o":Cs.o,"xmlns:x":Cs.x,"xmlns:mv":Cs.mv}).replace(/\/>/,">"),Tt("o:shapelayout",Tt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Tt("v:shapetype",[Tt("v:stroke",null,{joinstyle:"miter"}),Tt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:n})];C0<e*1e3;)C0+=1e3;return r.forEach(function(i){var u=In(i[0]),f={color2:"#BEFF82",type:"gradient"};f.type=="gradient"&&(f.angle="-180");var g=f.type=="gradient"?Tt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,m=Tt("v:fill",g,f),w={on:"t",obscured:"t"};++C0,a=a.concat(["<v:shape"+Sd({id:"_x0000_s"+C0,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",m,Tt("v:shadow",null,w),Tt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Oa("x:Anchor",[u.c+1,0,u.r+1,0,u.c+3,20,u.r+5,20].join(",")),Oa("x:AutoFill","False"),Oa("x:Row",String(u.r)),Oa("x:Column",String(u.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function z_(e,r,t,n){var a=Array.isArray(e),i;r.forEach(function(u){var f=In(u.ref);if(a?(e[f.r]||(e[f.r]=[]),i=e[f.r][f.c]):i=e[u.ref],!i){i={t:"z"},a?e[f.r][f.c]=i:e[u.ref]=i;var g=Ur(e["!ref"]||"BDWGO1000001:A1");g.s.r>f.r&&(g.s.r=f.r),g.e.r<f.r&&(g.e.r=f.r),g.s.c>f.c&&(g.s.c=f.c),g.e.c<f.c&&(g.e.c=f.c);var m=gr(g);m!==e["!ref"]&&(e["!ref"]=m)}i.c||(i.c=[]);var w={a:u.author,t:u.t,r:u.r,T:t};u.h&&(w.h=u.h);for(var _=i.c.length-1;_>=0;--_){if(!t&&i.c[_].T)return;t&&!i.c[_].T&&i.c.splice(_,1)}if(t&&n){for(_=0;_<n.length;++_)if(w.a==n[_].id){w.a=n[_].name||w.a;break}}i.c.push(w)})}function V9(e,r){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var t=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(u){if(!(u===""||u.trim()==="")){var f=u.match(/<(?:\w+:)?author[^>]*>(.*)/);f&&t.push(f[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(u){if(!(u===""||u.trim()==="")){var f=u.match(/<(?:\w+:)?comment[^>]*>/);if(f){var g=rr(f[0]),m={author:g.authorId&&t[g.authorId]||"sheetjsghost",ref:g.ref,guid:g.guid},w=In(g.ref);if(!(r.sheetRows&&r.sheetRows<=w.r)){var _=u.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),E=!!_&&!!_[1]&&u2(_[1])||{r:"",t:"",h:""};m.r=E.r,E.r=="<t></t>"&&(E.t=E.h=""),m.t=(E.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),r.cellHTML&&(m.h=E.h),n.push(m)}}}}),n}function ME(e){var r=[Jn,Tt("comments",null,{xmlns:Ec[0]})],t=[];return r.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=an(a.a);t.indexOf(i)==-1&&(t.push(i),r.push("<author>"+i+"</author>")),a.T&&a.ID&&t.indexOf("tc="+a.ID)==-1&&(t.push("tc="+a.ID),r.push("<author>tc="+a.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),r.push("<author>SheetJ5</author>")),r.push("</authors>"),r.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=t.indexOf("tc="+n[1][0].ID):n[1].forEach(function(g){g.a&&(a=t.indexOf(an(g.a))),i.push(g.t||"")}),r.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)r.push(Oa("t",an(i[0]||"")));else{for(var u=`Comment:
    `+i[0]+`
`,f=1;f<i.length;++f)u+=`Reply:
    `+i[f]+`
`;r.push(Oa("t",an(u)))}r.push("</text></comment>")}),r.push("</commentList>"),r.length>2&&(r[r.length]="</comments>",r[1]=r[1].replace("/>",">")),r.join("")}function G9(e,r){var t=[],n=!1,a={},i=0;return e.replace(Ha,function(f,g){var m=rr(f);switch(Gi(m[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:m.personId,guid:m.id,ref:m.ref,T:1};break;case"</threadedComment>":a.t!=null&&t.push(a);break;case"<text>":case"<text":i=g+f.length;break;case"</text>":a.t=e.slice(i,g).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&r.WTF)throw new Error("unrecognized "+m[0]+" in threaded comments")}return f}),t}function W9(e,r,t){var n=[Jn,Tt("ThreadedComments",null,{xmlns:xa.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(u,f){if(!u.T){delete u.ID;return}u.a&&r.indexOf(u.a)==-1&&r.push(u.a);var g={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};f==0?i=g.id:g.parentId=i,u.ID=g.id,u.a&&(g.personId="{54EE7950-7262-4200-6969-"+("000000000000"+r.indexOf(u.a)).slice(-12)+"}"),n.push(Tt("threadedComment",Oa("text",u.t||""),g))})}),n.push("</ThreadedComments>"),n.join("")}function X9(e,r){var t=[],n=!1;return e.replace(Ha,function(i){var u=rr(i);switch(Gi(u[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":t.push({name:u.displayname,id:u.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&r.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return i}),t}function K9(e){var r=[Jn,Tt("personList",null,{xmlns:xa.TCMNT,"xmlns:x":Ec[0]}).replace(/[\/]>/,">")];return e.forEach(function(t,n){r.push(Tt("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:t,providerId:"None"}))}),r.push("</personList>"),r.join("")}function q9(e){var r={};r.iauthor=e.read_shift(4);var t=Cc(e);return r.rfx=t.s,r.ref=tr(t.s),e.l+=16,r}function Y9(e,r){return r==null&&(r=ft(36)),r.write_shift(4,e[1].iauthor),$0(e[0],r),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r}var $9=Ua;function Z9(e){return ya(e.slice(0,54))}function J9(e,r){var t=[],n=[],a={},i=!1;return Cl(e,function(f,g,m){switch(m){case 632:n.push(f);break;case 635:a=f;break;case 637:a.t=f.t,a.h=f.h,a.r=f.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,r.sheetRows&&a.rfx&&r.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,t.push(a);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!g.T){if(!i||r.WTF)throw new Error("Unexpected record 0x"+m.toString(16))}}}),t}function Q9(e){var r=us(),t=[];return vt(r,628),vt(r,630),e.forEach(function(n){n[1].forEach(function(a){t.indexOf(a.a)>-1||(t.push(a.a.slice(0,54)),vt(r,632,Z9(a.a)))})}),vt(r,631),vt(r,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=t.indexOf(a.a);var i={s:In(n[0]),e:In(n[0])};vt(r,635,Y9([i,a])),a.t&&a.t.length>0&&vt(r,637,yO(a)),vt(r,636),delete a.iauthor})}),vt(r,634),vt(r,629),r.end()}var eM="application/vnd.ms-office.vbaProject";function tM(e){var r=Wt.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(t,n){if(!(t.slice(-1)==="/"||!t.match(/_VBA_PROJECT_CUR/))){var a=t.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Wt.utils.cfb_add(r,a,e.FileIndex[n].content)}}),Wt.write(r)}function rM(e,r){r.FullPaths.forEach(function(t,n){if(n!=0){var a=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Wt.utils.cfb_add(e,a,r.FileIndex[n].content)}})}var FE=["xlsb","xlsm","xlam","biff8","xla"];function nM(){return{"!type":"dialog"}}function aM(){return{"!type":"dialog"}}function sM(){return{"!type":"macro"}}function iM(){return{"!type":"macro"}}var O0=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,r={r:0,c:0};function t(n,a,i,u){var f=!1,g=!1;i.length==0?g=!0:i.charAt(0)=="["&&(g=!0,i=i.slice(1,-1)),u.length==0?f=!0:u.charAt(0)=="["&&(f=!0,u=u.slice(1,-1));var m=i.length>0?parseInt(i,10)|0:0,w=u.length>0?parseInt(u,10)|0:0;return f?w+=r.c:--w,g?m+=r.r:--m,a+(f?"":"$")+On(w)+(g?"":"$")+Zn(m)}return function(a,i){return r=i,a.replace(e,t)}})(),x2=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,m2=(function(){return function(r,t){return r.replace(x2,function(n,a,i,u,f,g){var m=t2(u)-(i?0:t.c),w=e2(g)-(f?0:t.r),_=w==0?"":f?w+1:"["+w+"]",E=m==0?"":i?m+1:"["+m+"]";return a+"R"+_+"C"+E})}})();function LE(e,r){return e.replace(x2,function(t,n,a,i,u,f){return n+(a=="$"?a+i:On(t2(i)+r.c))+(u=="$"?u+f:Zn(e2(f)+r.r))})}function lM(e,r,t){var n=ds(r),a=n.s,i=In(t),u={r:i.r-a.r,c:i.c-a.c};return LE(e,u)}function oM(e){return e.length!=1}function H_(e){return e.replace(/_xlfn\./g,"")}function aa(e){e.l+=1}function ko(e,r){var t=e.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function BE(e,r,t){var n=2;if(t){if(t.biff>=2&&t.biff<=5)return PE(e);t.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),u=ko(e),f=ko(e);return{s:{r:a,c:u[0],cRel:u[1],rRel:u[2]},e:{r:i,c:f[0],cRel:f[1],rRel:f[2]}}}function PE(e){var r=ko(e),t=ko(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:r[0],c:n,cRel:r[1],rRel:r[2]},e:{r:t[0],c:a,cRel:t[1],rRel:t[2]}}}function cM(e,r,t){if(t.biff<8)return PE(e);var n=e.read_shift(t.biff==12?4:2),a=e.read_shift(t.biff==12?4:2),i=ko(e),u=ko(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:u[0],cRel:u[1],rRel:u[2]}}}function UE(e,r,t){if(t&&t.biff>=2&&t.biff<=5)return uM(e);var n=e.read_shift(t&&t.biff==12?4:2),a=ko(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function uM(e){var r=ko(e),t=e.read_shift(1);return{r:r[0],c:t,cRel:r[1],rRel:r[2]}}function dM(e){var r=e.read_shift(2),t=e.read_shift(2);return{r,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function fM(e,r,t){var n=t&&t.biff?t.biff:8;if(n>=2&&n<=5)return hM(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),u=(i&16384)>>14,f=(i&32768)>>15;if(i&=16383,f==1)for(;a>524287;)a-=1048576;if(u==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:u,rRel:f}}function hM(e){var r=e.read_shift(2),t=e.read_shift(1),n=(r&32768)>>15,a=(r&16384)>>14;return r&=16383,n==1&&r>=8192&&(r=r-16384),a==1&&t>=128&&(t=t-256),{r,c:t,cRel:a,rRel:n}}function xM(e,r,t){var n=(e[e.l++]&96)>>5,a=BE(e,t.biff>=2&&t.biff<=5?6:8,t);return[n,a]}function mM(e,r,t){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(t)switch(t.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var u=BE(e,i,t);return[n,a,u]}function gM(e,r,t){var n=(e[e.l++]&96)>>5;return e.l+=t&&t.biff>8?12:t.biff<8?6:8,[n]}function pM(e,r,t){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(t)switch(t.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function bM(e,r,t){var n=(e[e.l++]&96)>>5,a=cM(e,r-1,t);return[n,a]}function wM(e,r,t){var n=(e[e.l++]&96)>>5;return e.l+=t.biff==2?6:t.biff==12?14:7,[n]}function V_(e){var r=e[e.l+1]&1,t=1;return e.l+=4,[r,t]}function vM(e,r,t){e.l+=2;for(var n=e.read_shift(t&&t.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(t&&t.biff==2?1:2));return a}function yM(e,r,t){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(t&&t.biff==2?1:2)]}function _M(e,r,t){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(t&&t.biff==2?1:2)]}function kM(e){var r=e[e.l+1]&255?1:0;return e.l+=2,[r,e.read_shift(2)]}function EM(e,r,t){var n=e[e.l+1]&255?1:0;return e.l+=t&&t.biff==2?3:4,[n]}function zE(e){var r=e.read_shift(1),t=e.read_shift(1);return[r,t]}function SM(e){return e.read_shift(2),zE(e)}function AM(e){return e.read_shift(2),zE(e)}function NM(e,r,t){var n=(e[e.l]&96)>>5;e.l+=1;var a=UE(e,0,t);return[n,a]}function CM(e,r,t){var n=(e[e.l]&96)>>5;e.l+=1;var a=fM(e,0,t);return[n,a]}function TM(e,r,t){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);t&&t.biff==5&&(e.l+=12);var i=UE(e,0,t);return[n,a,i]}function jM(e,r,t){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(t&&t.biff<=3?1:2);return[IF[a],GE[a],n]}function RM(e,r,t){var n=e[e.l++],a=e.read_shift(1),i=t&&t.biff<=3?[n==88?-1:0,e.read_shift(1)]:OM(e);return[a,(i[0]===0?GE:OF)[i[1]]]}function OM(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function IM(e,r,t){e.l+=t&&t.biff==2?3:4}function DM(e,r,t){if(e.l++,t&&t.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(t&&t.biff==2?1:2);return[n,a]}function MM(e){return e.l++,Tl[e.read_shift(1)]}function FM(e){return e.l++,e.read_shift(2)}function LM(e){return e.l++,e.read_shift(1)!==0}function BM(e){return e.l++,Pa(e)}function PM(e,r,t){return e.l++,Jd(e,r-1,t)}function UM(e,r){var t=[e.read_shift(1)];if(r==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=$n(e,1)?"TRUE":"FALSE",r!=12&&(e.l+=7);break;case 37:case 16:t[1]=Tl[e[e.l]],e.l+=r==12?4:8;break;case 0:e.l+=8;break;case 1:t[1]=Pa(e);break;case 2:t[1]=Tc(e,0,{biff:r>0&&r<8?2:r});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function zM(e,r,t){for(var n=e.read_shift(t.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((t.biff==12?Cc:U1)(e));return a}function HM(e,r,t){var n=0,a=0;t.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),t.biff>=2&&t.biff<8&&(--n,--a==0&&(a=256));for(var i=0,u=[];i!=n&&(u[i]=[]);++i)for(var f=0;f!=a;++f)u[i][f]=UM(e,t.biff);return u}function VM(e,r,t){var n=e.read_shift(1)>>>5&3,a=!t||t.biff>=8?4:2,i=e.read_shift(a);switch(t.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function GM(e,r,t){if(t.biff==5)return WM(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function WM(e){var r=e.read_shift(1)>>>5&3,t=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[r,t,n]}function XM(e,r,t){var n=e.read_shift(1)>>>5&3;e.l+=t&&t.biff==2?3:4;var a=e.read_shift(t&&t.biff==2?1:2);return[n,a]}function KM(e,r,t){var n=e.read_shift(1)>>>5&3,a=e.read_shift(t&&t.biff==2?1:2);return[n,a]}function qM(e,r,t){var n=e.read_shift(1)>>>5&3;return e.l+=4,t.biff<8&&e.l--,t.biff==12&&(e.l+=2),[n]}function YM(e,r,t){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(t)switch(t.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var $M=za,ZM=za,JM=za;function ef(e,r,t){return e.l+=2,[dM(e)]}function g2(e){return e.l+=6,[]}var QM=ef,eF=g2,tF=g2,rF=ef;function HE(e){return e.l+=2,[ia(e),e.read_shift(2)&1]}var nF=ef,aF=HE,sF=g2,iF=ef,lF=ef,oF=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function cF(e){e.l+=2;var r=e.read_shift(2),t=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),u=oF[t>>2&31];return{ixti:r,coltype:t&3,rt:u,idx:n,c:a,C:i}}function uF(e){return e.l+=2,[e.read_shift(4)]}function dF(e,r,t){return e.l+=5,e.l+=2,e.l+=t.biff==2?1:4,["PTGSHEET"]}function fF(e,r,t){return e.l+=t.biff==2?4:5,["PTGENDSHEET"]}function hF(e){var r=e.read_shift(1)>>>5&3,t=e.read_shift(2);return[r,t]}function xF(e){var r=e.read_shift(1)>>>5&3,t=e.read_shift(2);return[r,t]}function mF(e){return e.l+=4,[0,0]}var G_={1:{n:"PtgExp",f:DM},2:{n:"PtgTbl",f:JM},3:{n:"PtgAdd",f:aa},4:{n:"PtgSub",f:aa},5:{n:"PtgMul",f:aa},6:{n:"PtgDiv",f:aa},7:{n:"PtgPower",f:aa},8:{n:"PtgConcat",f:aa},9:{n:"PtgLt",f:aa},10:{n:"PtgLe",f:aa},11:{n:"PtgEq",f:aa},12:{n:"PtgGe",f:aa},13:{n:"PtgGt",f:aa},14:{n:"PtgNe",f:aa},15:{n:"PtgIsect",f:aa},16:{n:"PtgUnion",f:aa},17:{n:"PtgRange",f:aa},18:{n:"PtgUplus",f:aa},19:{n:"PtgUminus",f:aa},20:{n:"PtgPercent",f:aa},21:{n:"PtgParen",f:aa},22:{n:"PtgMissArg",f:aa},23:{n:"PtgStr",f:PM},26:{n:"PtgSheet",f:dF},27:{n:"PtgEndSheet",f:fF},28:{n:"PtgErr",f:MM},29:{n:"PtgBool",f:LM},30:{n:"PtgInt",f:FM},31:{n:"PtgNum",f:BM},32:{n:"PtgArray",f:wM},33:{n:"PtgFunc",f:jM},34:{n:"PtgFuncVar",f:RM},35:{n:"PtgName",f:VM},36:{n:"PtgRef",f:NM},37:{n:"PtgArea",f:xM},38:{n:"PtgMemArea",f:XM},39:{n:"PtgMemErr",f:$M},40:{n:"PtgMemNoMem",f:ZM},41:{n:"PtgMemFunc",f:KM},42:{n:"PtgRefErr",f:qM},43:{n:"PtgAreaErr",f:gM},44:{n:"PtgRefN",f:CM},45:{n:"PtgAreaN",f:bM},46:{n:"PtgMemAreaN",f:hF},47:{n:"PtgMemNoMemN",f:xF},57:{n:"PtgNameX",f:GM},58:{n:"PtgRef3d",f:TM},59:{n:"PtgArea3d",f:mM},60:{n:"PtgRefErr3d",f:YM},61:{n:"PtgAreaErr3d",f:pM},255:{}},gF={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},pF={1:{n:"PtgElfLel",f:HE},2:{n:"PtgElfRw",f:iF},3:{n:"PtgElfCol",f:QM},6:{n:"PtgElfRwV",f:lF},7:{n:"PtgElfColV",f:rF},10:{n:"PtgElfRadical",f:nF},11:{n:"PtgElfRadicalS",f:sF},13:{n:"PtgElfColS",f:eF},15:{n:"PtgElfColSV",f:tF},16:{n:"PtgElfRadicalLel",f:aF},25:{n:"PtgList",f:cF},29:{n:"PtgSxName",f:uF},255:{}},bF={0:{n:"PtgAttrNoop",f:mF},1:{n:"PtgAttrSemi",f:EM},2:{n:"PtgAttrIf",f:_M},4:{n:"PtgAttrChoose",f:vM},8:{n:"PtgAttrGoto",f:yM},16:{n:"PtgAttrSum",f:IM},32:{n:"PtgAttrBaxcel",f:V_},33:{n:"PtgAttrBaxcel",f:V_},64:{n:"PtgAttrSpace",f:SM},65:{n:"PtgAttrSpaceSemi",f:AM},128:{n:"PtgAttrIfError",f:kM},255:{}};function tf(e,r,t,n){if(n.biff<8)return za(e,r);for(var a=e.l+r,i=[],u=0;u!==t.length;++u)switch(t[u][0]){case"PtgArray":t[u][1]=HM(e,0,n),i.push(t[u][1]);break;case"PtgMemArea":t[u][2]=zM(e,t[u][1],n),i.push(t[u][2]);break;case"PtgExp":n&&n.biff==12&&(t[u][1][1]=e.read_shift(4),i.push(t[u][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[u][0]}return r=a-e.l,r!==0&&i.push(za(e,r)),i}function rf(e,r,t){for(var n=e.l+r,a,i,u=[];n!=e.l;)r=n-e.l,i=e[e.l],a=G_[i]||G_[gF[i]],(i===24||i===25)&&(a=(i===24?pF:bF)[e[e.l+1]]),!a||!a.f?za(e,r):u.push([a.n,a.f(e,r,t)]);return u}function wF(e){for(var r=[],t=0;t<e.length;++t){for(var n=e[t],a=[],i=0;i<n.length;++i){var u=n[i];u?u[0]===2?a.push('"'+u[1].replace(/"/g,'""')+'"'):a.push(u[1]):a.push("")}r.push(a.join(","))}return r.join(";")}var vF={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function yF(e,r){if(!e&&!(r&&r.biff<=5&&r.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function VE(e,r,t){if(!e)return"SH33TJSERR0";if(t.biff>8&&(!e.XTI||!e.XTI[r]))return e.SheetNames[r];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[r];if(t.biff<8)return r>1e4&&(r-=65536),r<0&&(r=-r),r==0?"":e.XTI[r-1];if(!n)return"SH33TJSERR1";var a="";if(t.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return t.SID!=null?e.SheetNames[t.SID]:"SH33TJSSAME"+e[n[0]][0];default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function W_(e,r,t){var n=VE(e,r,t);return n=="#REF"?n:yF(n,t)}function Fa(e,r,t,n,a){var i=a&&a.biff||8,u={s:{c:0,r:0}},f=[],g,m,w,_=0,E=0,k,N="";if(!e[0]||!e[0][0])return"";for(var A=-1,C="",I=0,D=e[0].length;I<D;++I){var O=e[0][I];switch(O[0]){case"PtgUminus":f.push("-"+f.pop());break;case"PtgUplus":f.push("+"+f.pop());break;case"PtgPercent":f.push(f.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(g=f.pop(),m=f.pop(),A>=0){switch(e[0][A][1][0]){case 0:C=zn(" ",e[0][A][1][1]);break;case 1:C=zn("\r",e[0][A][1][1]);break;default:if(C="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][A][1][0])}m=m+C,A=-1}f.push(m+vF[O[0]]+g);break;case"PtgIsect":g=f.pop(),m=f.pop(),f.push(m+" "+g);break;case"PtgUnion":g=f.pop(),m=f.pop(),f.push(m+","+g);break;case"PtgRange":g=f.pop(),m=f.pop(),f.push(m+":"+g);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":w=ad(O[1][1],u,a),f.push(sd(w,i));break;case"PtgRefN":w=t?ad(O[1][1],t,a):O[1][1],f.push(sd(w,i));break;case"PtgRef3d":_=O[1][1],w=ad(O[1][2],u,a),N=W_(n,_,a),f.push(N+"!"+sd(w,i));break;case"PtgFunc":case"PtgFuncVar":var B=O[1][0],U=O[1][1];B||(B=0),B&=127;var X=B==0?[]:f.slice(-B);f.length-=B,U==="User"&&(U=X.shift()),f.push(U+"("+X.join(",")+")");break;case"PtgBool":f.push(O[1]?"TRUE":"FALSE");break;case"PtgInt":f.push(O[1]);break;case"PtgNum":f.push(String(O[1]));break;case"PtgStr":f.push('"'+O[1].replace(/"/g,'""')+'"');break;case"PtgErr":f.push(O[1]);break;case"PtgAreaN":k=v_(O[1][1],t?{s:t}:u,a),f.push(cg(k,a));break;case"PtgArea":k=v_(O[1][1],u,a),f.push(cg(k,a));break;case"PtgArea3d":_=O[1][1],k=O[1][2],N=W_(n,_,a),f.push(N+"!"+cg(k,a));break;case"PtgAttrSum":f.push("SUM("+f.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":E=O[1][2];var F=(n.names||[])[E-1]||(n[0]||[])[E],Y=F?F.Name:"SH33TJSNAME"+String(E);Y&&Y.slice(0,6)=="_xlfn."&&!a.xlfn&&(Y=Y.slice(6)),f.push(Y);break;case"PtgNameX":var H=O[1][1];E=O[1][2];var ce;if(a.biff<=5)H<0&&(H=-H),n[H]&&(ce=n[H][E]);else{var J="";if(((n[H]||[])[0]||[])[0]==14849||(((n[H]||[])[0]||[])[0]==1025?n[H][E]&&n[H][E].itab>0&&(J=n.SheetNames[n[H][E].itab-1]+"!"):J=n.SheetNames[E-1]+"!"),n[H]&&n[H][E])J+=n[H][E].Name;else if(n[0]&&n[0][E])J+=n[0][E].Name;else{var V=(VE(n,H,a)||"").split(";;");V[E-1]?J=V[E-1]:J+="SH33TJSERRX"}f.push(J);break}ce||(ce={Name:"SH33TJSERRY"}),f.push(ce.Name);break;case"PtgParen":var xe="(",W=")";if(A>=0){switch(C="",e[0][A][1][0]){case 2:xe=zn(" ",e[0][A][1][1])+xe;break;case 3:xe=zn("\r",e[0][A][1][1])+xe;break;case 4:W=zn(" ",e[0][A][1][1])+W;break;case 5:W=zn("\r",e[0][A][1][1])+W;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][A][1][0])}A=-1}f.push(xe+f.pop()+W);break;case"PtgRefErr":f.push("#REF!");break;case"PtgRefErr3d":f.push("#REF!");break;case"PtgExp":w={c:O[1][1],r:O[1][0]};var ne={c:t.c,r:t.r};if(n.sharedf[tr(w)]){var be=n.sharedf[tr(w)];f.push(Fa(be,u,ne,n,a))}else{var fe=!1;for(g=0;g!=n.arrayf.length;++g)if(m=n.arrayf[g],!(w.c<m[0].s.c||w.c>m[0].e.c)&&!(w.r<m[0].s.r||w.r>m[0].e.r)){f.push(Fa(m[1],u,ne,n,a)),fe=!0;break}fe||f.push(O[1])}break;case"PtgArray":f.push("{"+wF(O[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":A=I;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":f.push("");break;case"PtgAreaErr":f.push("#REF!");break;case"PtgAreaErr3d":f.push("#REF!");break;case"PtgList":f.push("Table"+O[1].idx+"[#"+O[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(O));default:throw new Error("Unrecognized Formula Token: "+String(O))}var Ve=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&A>=0&&Ve.indexOf(e[0][I][0])==-1){O=e[0][A];var ge=!0;switch(O[1][0]){case 4:ge=!1;case 0:C=zn(" ",O[1][1]);break;case 5:ge=!1;case 1:C=zn("\r",O[1][1]);break;default:if(C="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+O[1][0])}f.push((ge?C:"")+f.pop()+(ge?"":C)),A=-1}}if(f.length>1&&a.WTF)throw new Error("bad formula stack");return f[0]}function _F(e,r,t){var n=e.l+r,a=t.biff==2?1:2,i,u=e.read_shift(a);if(u==65535)return[[],za(e,r-2)];var f=rf(e,u,t);return r!==u+a&&(i=tf(e,r-u-a,f,t)),e.l=n,[f,i]}function kF(e,r,t){var n=e.l+r,a=t.biff==2?1:2,i,u=e.read_shift(a);if(u==65535)return[[],za(e,r-2)];var f=rf(e,u,t);return r!==u+a&&(i=tf(e,r-u-a,f,t)),e.l=n,[f,i]}function EF(e,r,t,n){var a=e.l+r,i=rf(e,n,t),u;return a!==e.l&&(u=tf(e,a-e.l,i,t)),[i,u]}function SF(e,r,t){var n=e.l+r,a,i=e.read_shift(2),u=rf(e,i,t);return i==65535?[[],za(e,r-2)]:(r!==i+2&&(a=tf(e,n-i-2,u,t)),[u,a])}function AF(e){var r;if(wl(e,e.l+6)!==65535)return[Pa(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return r=e[e.l+2]===1,e.l+=8,[r,"b"];case 2:return r=e[e.l+2],e.l+=8,[r,"e"];case 3:return e.l+=8,["","s"]}return[]}function NF(e){if(e==null){var r=ft(8);return r.write_shift(1,3),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,65535),r}else if(typeof e=="number")return pc(e);return pc(0)}function xg(e,r,t){var n=e.l+r,a=Wi(e);t.biff==2&&++e.l;var i=AF(e),u=e.read_shift(1);t.biff!=2&&(e.read_shift(1),t.biff>=5&&e.read_shift(4));var f=kF(e,n-e.l,t);return{cell:a,val:i[0],formula:f,shared:u>>3&1,tt:i[1]}}function CF(e,r,t,n,a){var i=wc(r,t,a),u=NF(e.v),f=ft(6),g=33;f.write_shift(2,g),f.write_shift(4,0);for(var m=ft(e.bf.length),w=0;w<e.bf.length;++w)m[w]=e.bf[w];var _=va([i,u,f,m]);return _}function z1(e,r,t){var n=e.read_shift(4),a=rf(e,n,t),i=e.read_shift(4),u=i>0?tf(e,i,a,t):null;return[a,u]}var TF=z1,H1=z1,jF=z1,RF=z1,OF={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},GE={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},IF={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function X_(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(r,t){return t.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function DF(e){var r="of:="+e.replace(x2,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return r.replace(/;/g,"|").replace(/,/g,";")}function mg(e){var r=e.split(":"),t=r[0].split(".")[0];return[t,r[0].split(".")[1]+(r.length>1?":"+(r[1].split(".")[1]||r[1].split(".")[0]):"")]}function MF(e){return e.replace(/\./,"!")}var ld={},I0={},od=typeof Map<"u";function p2(e,r,t){var n=0,a=e.length;if(t){if(od?t.has(r):Object.prototype.hasOwnProperty.call(t,r)){for(var i=od?t.get(r):t[r];n<i.length;++n)if(e[i[n]].t===r)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===r)return e.Count++,n;return e[a]={t:r},e.Count++,e.Unique++,t&&(od?(t.has(r)||t.set(r,[]),t.get(r).push(a)):(Object.prototype.hasOwnProperty.call(t,r)||(t[r]=[]),t[r].push(a))),a}function V1(e,r){var t={min:e+1,max:e+1},n=-1;return r.MDW&&(La=r.MDW),r.width!=null?t.customWidth=1:r.wpx!=null?n=jd(r.wpx):r.wch!=null&&(n=r.wch),n>-1?(t.width=v1(n),t.customWidth=1):r.width!=null&&(t.width=r.width),r.hidden&&(t.hidden=!0),r.level!=null&&(t.outlineLevel=t.level=r.level),t}function dc(e,r){if(e){var t=[.7,.7,.75,.75,.3,.3];r=="xlml"&&(t=[1,1,1,1,.5,.5]),e.left==null&&(e.left=t[0]),e.right==null&&(e.right=t[1]),e.top==null&&(e.top=t[2]),e.bottom==null&&(e.bottom=t[3]),e.header==null&&(e.header=t[4]),e.footer==null&&(e.footer=t[5])}}function No(e,r,t){var n=t.revssf[r.z!=null?r.z:"General"],a=60,i=e.length;if(n==null&&t.ssf){for(;a<392;++a)if(t.ssf[a]==null){_l(r.z,a),t.ssf[a]=r.z,t.revssf[r.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function WE(e,r,t,n,a,i){try{n.cellNF&&(e.z=er[r])}catch(f){if(n.WTF)throw f}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=_n(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(er[r]==null&&_l(OR[r]||"General",r),e.t==="e")e.w=e.w||Tl[e.v];else if(r===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=kd(e.v);else if(e.t==="d"){var u=ma(e.v);(u|0)===u?e.w=u.toString(10):e.w=kd(u)}else{if(e.v===void 0)return"";e.w=mc(e.v,I0)}else e.t==="d"?e.w=ri(r,ma(e.v),I0):e.w=ri(r,e.v,I0)}catch(f){if(n.WTF)throw f}if(n.cellStyles&&t!=null)try{e.s=i.Fills[t],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=w1(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=w1(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(f){if(n.WTF&&i.Fills)throw f}}}function FF(e,r,t){if(e&&e["!ref"]){var n=Ur(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+t+"): "+e["!ref"])}}function LF(e,r){var t=Ur(r);t.s.r<=t.e.r&&t.s.c<=t.e.c&&t.s.r>=0&&t.s.c>=0&&(e["!ref"]=gr(t))}var BF=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,PF=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,UF=/<(?:\w:)?hyperlink [^>]*>/mg,zF=/"(\w*:\w*)"/,HF=/<(?:\w:)?col\b[^>]*[\/]?>/g,VF=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,GF=/<(?:\w:)?pageMargins[^>]*\/>/g,XE=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,WF=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,XF=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function KF(e,r,t,n,a,i,u){if(!e)return e;n||(n={"!id":{}});var f=r.dense?[]:{},g={s:{r:2e6,c:2e6},e:{r:0,c:0}},m="",w="",_=e.match(PF);_?(m=e.slice(0,_.index),w=e.slice(_.index+_[0].length)):m=w=e;var E=m.match(XE);E?b2(E[0],f,a,t):(E=m.match(WF))&&YF(E[0],E[1]||"",f,a,t);var k=(m.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(k>0){var N=m.slice(k,k+50).match(zF);N&&LF(f,N[1])}var A=m.match(XF);A&&A[1]&&oL(A[1],a);var C=[];if(r.cellStyles){var I=m.match(HF);I&&nL(C,I)}_&&dL(_[1],f,r,g,i,u);var D=w.match(VF);D&&(f["!autofilter"]=sL(D[0]));var O=[],B=w.match(BF);if(B)for(k=0;k!=B.length;++k)O[k]=Ur(B[k].slice(B[k].indexOf('"')+1));var U=w.match(UF);U&&eL(f,U,n);var X=w.match(GF);if(X&&(f["!margins"]=tL(rr(X[0]))),!f["!ref"]&&g.e.c>=g.s.c&&g.e.r>=g.s.r&&(f["!ref"]=gr(g)),r.sheetRows>0&&f["!ref"]){var F=Ur(f["!ref"]);r.sheetRows<=+F.e.r&&(F.e.r=r.sheetRows-1,F.e.r>g.e.r&&(F.e.r=g.e.r),F.e.r<F.s.r&&(F.s.r=F.e.r),F.e.c>g.e.c&&(F.e.c=g.e.c),F.e.c<F.s.c&&(F.s.c=F.e.c),f["!fullref"]=f["!ref"],f["!ref"]=gr(F))}return C.length>0&&(f["!cols"]=C),O.length>0&&(f["!merges"]=O),f}function qF(e){if(e.length===0)return"";for(var r='<mergeCells count="'+e.length+'">',t=0;t!=e.length;++t)r+='<mergeCell ref="'+gr(e[t])+'"/>';return r+"</mergeCells>"}function b2(e,r,t,n){var a=rr(e);t.Sheets[n]||(t.Sheets[n]={}),a.codeName&&(t.Sheets[n].CodeName=Pr(cn(a.codeName)))}function YF(e,r,t,n,a){b2(e.slice(0,e.indexOf(">")),t,n,a)}function $F(e,r,t,n,a){var i=!1,u={},f=null;if(n.bookType!=="xlsx"&&r.vbaraw){var g=r.SheetNames[t];try{r.Workbook&&(g=r.Workbook.Sheets[t].CodeName||g)}catch{}i=!0,u.codeName=Pi(an(g))}if(e&&e["!outline"]){var m={summaryBelow:1,summaryRight:1};e["!outline"].above&&(m.summaryBelow=0),e["!outline"].left&&(m.summaryRight=0),f=(f||"")+Tt("outlinePr",null,m)}!i&&!f||(a[a.length]=Tt("sheetPr",f,u))}var ZF=["objects","scenarios","selectLockedCells","selectUnlockedCells"],JF=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function QF(e){var r={sheet:1};return ZF.forEach(function(t){e[t]!=null&&e[t]&&(r[t]="1")}),JF.forEach(function(t){e[t]!=null&&!e[t]&&(r[t]="0")}),e.password&&(r.password=d2(e.password).toString(16).toUpperCase()),Tt("sheetProtection",null,r)}function eL(e,r,t){for(var n=Array.isArray(e),a=0;a!=r.length;++a){var i=rr(cn(r[a]),!0);if(!i.ref)return;var u=((t||{})["!id"]||[])[i.id];u?(i.Target=u.Target,i.location&&(i.Target+="#"+Pr(i.location))):(i.Target="#"+Pr(i.location),u={Target:i.Target,TargetMode:"Internal"}),i.Rel=u,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var f=Ur(i.ref),g=f.s.r;g<=f.e.r;++g)for(var m=f.s.c;m<=f.e.c;++m){var w=tr({c:m,r:g});n?(e[g]||(e[g]=[]),e[g][m]||(e[g][m]={t:"z",v:void 0}),e[g][m].l=i):(e[w]||(e[w]={t:"z",v:void 0}),e[w].l=i)}}}function tL(e){var r={};return["left","right","top","bottom","header","footer"].forEach(function(t){e[t]&&(r[t]=parseFloat(e[t]))}),r}function rL(e){return dc(e),Tt("pageMargins",null,e)}function nL(e,r){for(var t=!1,n=0;n!=r.length;++n){var a=rr(r[n],!0);a.hidden&&(a.hidden=vn(a.hidden));var i=parseInt(a.min,10)-1,u=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!t&&a.width&&(t=!0,f2(a.width)),_o(a);i<=u;)e[i++]=kn(a)}}function aL(e,r){for(var t=["<cols>"],n,a=0;a!=r.length;++a)(n=r[a])&&(t[t.length]=Tt("col",null,V1(a,n)));return t[t.length]="</cols>",t.join("")}function sL(e){var r={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return r}function iL(e,r,t,n){var a=typeof e.ref=="string"?e.ref:gr(e.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var i=t.Workbook.Names,u=ds(a);u.s.r==u.e.r&&(u.e.r=ds(r["!ref"]).e.r,a=gr(u));for(var f=0;f<i.length;++f){var g=i[f];if(g.Name=="_xlnm._FilterDatabase"&&g.Sheet==n){g.Ref="'"+t.SheetNames[n]+"'!"+a;break}}return f==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+a}),Tt("autoFilter",null,{ref:a})}var lL=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function oL(e,r){r.Views||(r.Views=[{}]),(e.match(lL)||[]).forEach(function(t,n){var a=rr(t);r.Views[n]||(r.Views[n]={}),+a.zoomScale&&(r.Views[n].zoom=+a.zoomScale),vn(a.rightToLeft)&&(r.Views[n].RTL=!0)})}function cL(e,r,t,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Tt("sheetViews",Tt("sheetView",null,a),{})}function uL(e,r,t,n){if(e.c&&t["!comments"].push([r,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,u=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Tl[e.v];break;case"d":n&&n.cellDates?a=_n(e.v,-1).toISOString():(e=kn(e),e.t="n",a=""+(e.v=ma(_n(e.v)))),typeof e.z>"u"&&(e.z=er[14]);break;default:a=e.v;break}var f=Oa("v",an(a)),g={r},m=No(n.cellXfs,e,n);switch(m!==0&&(g.s=m),e.t){case"n":break;case"d":g.t="d";break;case"b":g.t="b";break;case"e":g.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){f=Oa("v",""+p2(n.Strings,e.v,n.revStrings)),g.t="s";break}g.t="str";break}if(e.t!=i&&(e.t=i,e.v=u),typeof e.f=="string"&&e.f){var w=e.F&&e.F.slice(0,r.length)==r?{t:"array",ref:e.F}:null;f=Tt("f",an(e.f),w)+(e.v!=null?f:"")}return e.l&&t["!links"].push([r,e.l]),e.D&&(g.cm=1),Tt("c",f,g)}var dL=(function(){var e=/<(?:\w+:)?c[ \/>]/,r=/<\/(?:\w+:)?row>/,t=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,i=Ed("v"),u=Ed("f");return function(g,m,w,_,E,k){for(var N=0,A="",C=[],I=[],D=0,O=0,B=0,U="",X,F,Y=0,H=0,ce,J,V=0,xe=0,W=Array.isArray(k.CellXf),ne,be=[],fe=[],Ve=Array.isArray(m),ge=[],We={},re=!1,L=!!w.sheetStubs,q=g.split(r),P=0,Z=q.length;P!=Z;++P){A=q[P].trim();var pe=A.length;if(pe!==0){var Le=0;e:for(N=0;N<pe;++N)switch(A[N]){case">":if(A[N-1]!="/"){++N;break e}if(w&&w.cellStyles){if(F=rr(A.slice(Le,N),!0),Y=F.r!=null?parseInt(F.r,10):Y+1,H=-1,w.sheetRows&&w.sheetRows<Y)continue;We={},re=!1,F.ht&&(re=!0,We.hpt=parseFloat(F.ht),We.hpx=B0(We.hpt)),F.hidden=="1"&&(re=!0,We.hidden=!0),F.outlineLevel!=null&&(re=!0,We.level=+F.outlineLevel),re&&(ge[Y-1]=We)}break;case"<":Le=N;break}if(Le>=N)break;if(F=rr(A.slice(Le,N),!0),Y=F.r!=null?parseInt(F.r,10):Y+1,H=-1,!(w.sheetRows&&w.sheetRows<Y)){_.s.r>Y-1&&(_.s.r=Y-1),_.e.r<Y-1&&(_.e.r=Y-1),w&&w.cellStyles&&(We={},re=!1,F.ht&&(re=!0,We.hpt=parseFloat(F.ht),We.hpx=B0(We.hpt)),F.hidden=="1"&&(re=!0,We.hidden=!0),F.outlineLevel!=null&&(re=!0,We.level=+F.outlineLevel),re&&(ge[Y-1]=We)),C=A.slice(N).split(e);for(var Be=0;Be!=C.length&&C[Be].trim().charAt(0)=="<";++Be);for(C=C.slice(Be),N=0;N!=C.length;++N)if(A=C[N].trim(),A.length!==0){if(I=A.match(t),D=N,O=0,B=0,A="<c "+(A.slice(0,1)=="<"?">":"")+A,I!=null&&I.length===2){for(D=0,U=I[1],O=0;O!=U.length&&!((B=U.charCodeAt(O)-64)<1||B>26);++O)D=26*D+B;--D,H=D}else++H;for(O=0;O!=A.length&&A.charCodeAt(O)!==62;++O);if(++O,F=rr(A.slice(0,O),!0),F.r||(F.r=tr({r:Y-1,c:H})),U=A.slice(O),X={t:""},(I=U.match(i))!=null&&I[1]!==""&&(X.v=Pr(I[1])),w.cellFormula){if((I=U.match(u))!=null&&I[1]!==""){if(X.f=Pr(cn(I[1])).replace(/\r\n/g,`
`),w.xlfn||(X.f=H_(X.f)),I[0].indexOf('t="array"')>-1)X.F=(U.match(a)||[])[1],X.F.indexOf(":")>-1&&be.push([Ur(X.F),X.F]);else if(I[0].indexOf('t="shared"')>-1){J=rr(I[0]);var Pe=Pr(cn(I[1]));w.xlfn||(Pe=H_(Pe)),fe[parseInt(J.si,10)]=[J,Pe,F.r]}}else(I=U.match(/<f[^>]*\/>/))&&(J=rr(I[0]),fe[J.si]&&(X.f=lM(fe[J.si][1],fe[J.si][2],F.r)));var et=In(F.r);for(O=0;O<be.length;++O)et.r>=be[O][0].s.r&&et.r<=be[O][0].e.r&&et.c>=be[O][0].s.c&&et.c<=be[O][0].e.c&&(X.F=be[O][1])}if(F.t==null&&X.v===void 0)if(X.f||X.F)X.v=0,X.t="n";else if(L)X.t="z";else continue;else X.t=F.t||"n";switch(_.s.c>H&&(_.s.c=H),_.e.c<H&&(_.e.c=H),X.t){case"n":if(X.v==""||X.v==null){if(!L)continue;X.t="z"}else X.v=parseFloat(X.v);break;case"s":if(typeof X.v>"u"){if(!L)continue;X.t="z"}else ce=ld[parseInt(X.v,10)],X.v=ce.t,X.r=ce.r,w.cellHTML&&(X.h=ce.h);break;case"str":X.t="s",X.v=X.v!=null?cn(X.v):"",w.cellHTML&&(X.h=$p(X.v));break;case"inlineStr":I=U.match(n),X.t="s",I!=null&&(ce=u2(I[1]))?(X.v=ce.t,w.cellHTML&&(X.h=ce.h)):X.v="";break;case"b":X.v=vn(X.v);break;case"d":w.cellDates?X.v=_n(X.v,1):(X.v=ma(_n(X.v,1)),X.t="n");break;case"e":(!w||w.cellText!==!1)&&(X.w=X.v),X.v=qk[X.v];break}if(V=xe=0,ne=null,W&&F.s!==void 0&&(ne=k.CellXf[F.s],ne!=null&&(ne.numFmtId!=null&&(V=ne.numFmtId),w.cellStyles&&ne.fillId!=null&&(xe=ne.fillId))),WE(X,V,xe,w,E,k),w.cellDates&&W&&X.t=="n"&&K0(er[V])&&(X.t="d",X.v=P1(X.v)),F.cm&&w.xlmeta){var ut=(w.xlmeta.Cell||[])[+F.cm-1];ut&&ut.type=="XLDAPR"&&(X.D=!0)}if(Ve){var ve=In(F.r);m[ve.r]||(m[ve.r]=[]),m[ve.r][ve.c]=X}else m[F.r]=X}}}}ge.length>0&&(m["!rows"]=ge)}})();function fL(e,r,t,n){var a=[],i=[],u=Ur(e["!ref"]),f="",g,m="",w=[],_=0,E=0,k=e["!rows"],N=Array.isArray(e),A={r:m},C,I=-1;for(E=u.s.c;E<=u.e.c;++E)w[E]=On(E);for(_=u.s.r;_<=u.e.r;++_){for(i=[],m=Zn(_),E=u.s.c;E<=u.e.c;++E){g=w[E]+m;var D=N?(e[_]||[])[E]:e[g];D!==void 0&&(f=uL(D,g,e,r))!=null&&i.push(f)}(i.length>0||k&&k[_])&&(A={r:m},k&&k[_]&&(C=k[_],C.hidden&&(A.hidden=1),I=-1,C.hpx?I=Rd(C.hpx):C.hpt&&(I=C.hpt),I>-1&&(A.ht=I,A.customHeight=1),C.level&&(A.outlineLevel=C.level)),a[a.length]=Tt("row",i.join(""),A))}if(k)for(;_<k.length;++_)k&&k[_]&&(A={r:_+1},C=k[_],C.hidden&&(A.hidden=1),I=-1,C.hpx?I=Rd(C.hpx):C.hpt&&(I=C.hpt),I>-1&&(A.ht=I,A.customHeight=1),C.level&&(A.outlineLevel=C.level),a[a.length]=Tt("row","",A));return a.join("")}function KE(e,r,t,n){var a=[Jn,Tt("worksheet",null,{xmlns:Ec[0],"xmlns:r":xa.r})],i=t.SheetNames[e],u=0,f="",g=t.Sheets[i];g==null&&(g={});var m=g["!ref"]||"A1",w=Ur(m);if(w.e.c>16383||w.e.r>1048575){if(r.WTF)throw new Error("Range "+m+" exceeds format limit A1:XFD1048576");w.e.c=Math.min(w.e.c,16383),w.e.r=Math.min(w.e.c,1048575),m=gr(w)}n||(n={}),g["!comments"]=[];var _=[];$F(g,t,e,r,a),a[a.length]=Tt("dimension",null,{ref:m}),a[a.length]=cL(g,r,e,t),r.sheetFormat&&(a[a.length]=Tt("sheetFormatPr",null,{defaultRowHeight:r.sheetFormat.defaultRowHeight||"16",baseColWidth:r.sheetFormat.baseColWidth||"10",outlineLevelRow:r.sheetFormat.outlineLevelRow||"7"})),g["!cols"]!=null&&g["!cols"].length>0&&(a[a.length]=aL(g,g["!cols"])),a[u=a.length]="<sheetData/>",g["!links"]=[],g["!ref"]!=null&&(f=fL(g,r),f.length>0&&(a[a.length]=f)),a.length>u+1&&(a[a.length]="</sheetData>",a[u]=a[u].replace("/>",">")),g["!protect"]&&(a[a.length]=QF(g["!protect"])),g["!autofilter"]!=null&&(a[a.length]=iL(g["!autofilter"],g,t,e)),g["!merges"]!=null&&g["!merges"].length>0&&(a[a.length]=qF(g["!merges"]));var E=-1,k,N=-1;return g["!links"].length>0&&(a[a.length]="<hyperlinks>",g["!links"].forEach(function(A){A[1].Target&&(k={ref:A[0]},A[1].Target.charAt(0)!="#"&&(N=nn(n,-1,an(A[1].Target).replace(/#.*$/,""),Ar.HLINK),k["r:id"]="rId"+N),(E=A[1].Target.indexOf("#"))>-1&&(k.location=an(A[1].Target.slice(E+1))),A[1].Tooltip&&(k.tooltip=an(A[1].Tooltip)),a[a.length]=Tt("hyperlink",null,k))}),a[a.length]="</hyperlinks>"),delete g["!links"],g["!margins"]!=null&&(a[a.length]=rL(g["!margins"])),(!r||r.ignoreEC||r.ignoreEC==null)&&(a[a.length]=Oa("ignoredErrors",Tt("ignoredError",null,{numberStoredAsText:1,sqref:m}))),_.length>0&&(N=nn(n,-1,"../drawings/drawing"+(e+1)+".xml",Ar.DRAW),a[a.length]=Tt("drawing",null,{"r:id":"rId"+N}),g["!drawing"]=_),g["!comments"].length>0&&(N=nn(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Ar.VML),a[a.length]=Tt("legacyDrawing",null,{"r:id":"rId"+N}),g["!legacy"]=N),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function hL(e,r){var t={},n=e.l+r;t.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(t.level=i&7),i&16&&(t.hidden=!0),i&32&&(t.hpt=a/20),t}function xL(e,r,t){var n=ft(145),a=(t["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=Rd(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var u=0;a.level&&(u|=a.level),a.hidden&&(u|=16),(a.hpx||a.hpt)&&(u|=32),n.write_shift(1,u),n.write_shift(1,0);var f=0,g=n.l;n.l+=4;for(var m={r:e,c:0},w=0;w<16;++w)if(!(r.s.c>w+1<<10||r.e.c<w<<10)){for(var _=-1,E=-1,k=w<<10;k<w+1<<10;++k){m.c=k;var N=Array.isArray(t)?(t[m.r]||[])[m.c]:t[tr(m)];N&&(_<0&&(_=k),E=k)}_<0||(++f,n.write_shift(4,_),n.write_shift(4,E))}var A=n.l;return n.l=g,n.write_shift(4,f),n.l=A,n.length>n.l?n.slice(0,n.l):n}function mL(e,r,t,n){var a=xL(n,t,r);(a.length>17||(r["!rows"]||[])[n])&&vt(e,0,a)}var gL=Cc,pL=$0;function bL(){}function wL(e,r){var t={},n=e[e.l];return++e.l,t.above=!(n&64),t.left=!(n&128),e.l+=18,t.name=_O(e),t}function vL(e,r,t){t==null&&(t=ft(84+4*e.length));var n=192;r&&(r.above&&(n&=-65),r.left&&(n&=-129)),t.write_shift(1,n);for(var a=1;a<3;++a)t.write_shift(1,0);return g1({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),Vk(e,t),t.slice(0,t.l)}function yL(e){var r=ai(e);return[r]}function _L(e,r,t){return t==null&&(t=ft(8)),Sc(r,t)}function kL(e){var r=Ac(e);return[r]}function EL(e,r,t){return t==null&&(t=ft(4)),Nc(r,t)}function SL(e){var r=ai(e),t=e.read_shift(1);return[r,t,"b"]}function AL(e,r,t){return t==null&&(t=ft(9)),Sc(r,t),t.write_shift(1,e.v?1:0),t}function NL(e){var r=Ac(e),t=e.read_shift(1);return[r,t,"b"]}function CL(e,r,t){return t==null&&(t=ft(5)),Nc(r,t),t.write_shift(1,e.v?1:0),t}function TL(e){var r=ai(e),t=e.read_shift(1);return[r,t,"e"]}function jL(e,r,t){return t==null&&(t=ft(9)),Sc(r,t),t.write_shift(1,e.v),t}function RL(e){var r=Ac(e),t=e.read_shift(1);return[r,t,"e"]}function OL(e,r,t){return t==null&&(t=ft(8)),Nc(r,t),t.write_shift(1,e.v),t.write_shift(2,0),t.write_shift(1,0),t}function IL(e){var r=ai(e),t=e.read_shift(4);return[r,t,"s"]}function DL(e,r,t){return t==null&&(t=ft(12)),Sc(r,t),t.write_shift(4,r.v),t}function ML(e){var r=Ac(e),t=e.read_shift(4);return[r,t,"s"]}function FL(e,r,t){return t==null&&(t=ft(8)),Nc(r,t),t.write_shift(4,r.v),t}function LL(e){var r=ai(e),t=Pa(e);return[r,t,"n"]}function BL(e,r,t){return t==null&&(t=ft(16)),Sc(r,t),pc(e.v,t),t}function qE(e){var r=Ac(e),t=Pa(e);return[r,t,"n"]}function PL(e,r,t){return t==null&&(t=ft(12)),Nc(r,t),pc(e.v,t),t}function UL(e){var r=ai(e),t=s2(e);return[r,t,"n"]}function zL(e,r,t){return t==null&&(t=ft(12)),Sc(r,t),Gk(e.v,t),t}function HL(e){var r=Ac(e),t=s2(e);return[r,t,"n"]}function VL(e,r,t){return t==null&&(t=ft(8)),Nc(r,t),Gk(e.v,t),t}function GL(e){var r=ai(e),t=r2(e);return[r,t,"is"]}function WL(e){var r=ai(e),t=Ua(e);return[r,t,"str"]}function XL(e,r,t){return t==null&&(t=ft(12+4*e.v.length)),Sc(r,t),ya(e.v,t),t.length>t.l?t.slice(0,t.l):t}function KL(e){var r=Ac(e),t=Ua(e);return[r,t,"str"]}function qL(e,r,t){return t==null&&(t=ft(8+4*e.v.length)),Nc(r,t),ya(e.v,t),t.length>t.l?t.slice(0,t.l):t}function YL(e,r,t){var n=e.l+r,a=ai(e);a.r=t["!row"];var i=e.read_shift(1),u=[a,i,"b"];if(t.cellFormula){e.l+=2;var f=H1(e,n-e.l,t);u[3]=Fa(f,null,a,t.supbooks,t)}else e.l=n;return u}function $L(e,r,t){var n=e.l+r,a=ai(e);a.r=t["!row"];var i=e.read_shift(1),u=[a,i,"e"];if(t.cellFormula){e.l+=2;var f=H1(e,n-e.l,t);u[3]=Fa(f,null,a,t.supbooks,t)}else e.l=n;return u}function ZL(e,r,t){var n=e.l+r,a=ai(e);a.r=t["!row"];var i=Pa(e),u=[a,i,"n"];if(t.cellFormula){e.l+=2;var f=H1(e,n-e.l,t);u[3]=Fa(f,null,a,t.supbooks,t)}else e.l=n;return u}function JL(e,r,t){var n=e.l+r,a=ai(e);a.r=t["!row"];var i=Ua(e),u=[a,i,"str"];if(t.cellFormula){e.l+=2;var f=H1(e,n-e.l,t);u[3]=Fa(f,null,a,t.supbooks,t)}else e.l=n;return u}var QL=Cc,eB=$0;function tB(e,r){return r==null&&(r=ft(4)),r.write_shift(4,e),r}function rB(e,r){var t=e.l+r,n=Cc(e),a=n2(e),i=Ua(e),u=Ua(e),f=Ua(e);e.l=t;var g={rfx:n,relId:a,loc:i,display:f};return u&&(g.Tooltip=u),g}function nB(e,r){var t=ft(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));$0({s:In(e[0]),e:In(e[0])},t),a2("rId"+r,t);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return ya(a||"",t),ya(e[1].Tooltip||"",t),ya("",t),t.slice(0,t.l)}function aB(){}function sB(e,r,t){var n=e.l+r,a=Wk(e),i=e.read_shift(1),u=[a];if(u[2]=i,t.cellFormula){var f=TF(e,n-e.l,t);u[1]=f}else e.l=n;return u}function iB(e,r,t){var n=e.l+r,a=Cc(e),i=[a];if(t.cellFormula){var u=RF(e,n-e.l,t);i[1]=u,e.l=n}else e.l=n;return i}function lB(e,r,t){t==null&&(t=ft(18));var n=V1(e,r);t.write_shift(-4,e),t.write_shift(-4,e),t.write_shift(4,(n.width||10)*256),t.write_shift(4,0);var a=0;return r.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),r.level&&(a|=r.level<<8),t.write_shift(2,a),t}var YE=["left","right","top","bottom","header","footer"];function oB(e){var r={};return YE.forEach(function(t){r[t]=Pa(e)}),r}function cB(e,r){return r==null&&(r=ft(48)),dc(e),YE.forEach(function(t){pc(e[t],r)}),r}function uB(e){var r=e.read_shift(2);return e.l+=28,{RTL:r&32}}function dB(e,r,t){t==null&&(t=ft(30));var n=924;return(((r||{}).Views||[])[0]||{}).RTL&&(n|=32),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function fB(e){var r=ft(24);return r.write_shift(4,4),r.write_shift(4,1),$0(e,r),r}function hB(e,r){return r==null&&(r=ft(66)),r.write_shift(2,e.password?d2(e.password):0),r.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?r.write_shift(4,e[t[0]]!=null&&!e[t[0]]?1:0):r.write_shift(4,e[t[0]]!=null&&e[t[0]]?0:1)}),r}function xB(){}function mB(){}function gB(e,r,t,n,a,i,u){if(!e)return e;var f=r||{};n||(n={"!id":{}});var g=f.dense?[]:{},m,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=!1,E=!1,k,N,A,C,I,D,O,B,U,X=[];f.biff=12,f["!row"]=0;var F=0,Y=!1,H=[],ce={},J=f.supbooks||a.supbooks||[[]];if(J.sharedf=ce,J.arrayf=H,J.SheetNames=a.SheetNames||a.Sheets.map(function(Ve){return Ve.name}),!f.supbooks&&(f.supbooks=J,a.Names))for(var V=0;V<a.Names.length;++V)J[0][V+1]=a.Names[V];var xe=[],W=[],ne=!1;Od[16]={n:"BrtShortReal",f:qE};var be;if(Cl(e,function(ge,We,re){if(!E)switch(re){case 148:m=ge;break;case 0:k=ge,f.sheetRows&&f.sheetRows<=k.r&&(E=!0),B=Zn(C=k.r),f["!row"]=k.r,(ge.hidden||ge.hpt||ge.level!=null)&&(ge.hpt&&(ge.hpx=B0(ge.hpt)),W[ge.r]=ge);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(N={t:ge[2]},ge[2]){case"n":N.v=ge[1];break;case"s":O=ld[ge[1]],N.v=O.t,N.r=O.r;break;case"b":N.v=!!ge[1];break;case"e":N.v=ge[1],f.cellText!==!1&&(N.w=Tl[N.v]);break;case"str":N.t="s",N.v=ge[1];break;case"is":N.t="s",N.v=ge[1].t;break}if((A=u.CellXf[ge[0].iStyleRef])&&WE(N,A.numFmtId,null,f,i,u),I=ge[0].c==-1?I+1:ge[0].c,f.dense?(g[C]||(g[C]=[]),g[C][I]=N):g[On(I)+B]=N,f.cellFormula){for(Y=!1,F=0;F<H.length;++F){var L=H[F];k.r>=L[0].s.r&&k.r<=L[0].e.r&&I>=L[0].s.c&&I<=L[0].e.c&&(N.F=gr(L[0]),Y=!0)}!Y&&ge.length>3&&(N.f=ge[3])}if(w.s.r>k.r&&(w.s.r=k.r),w.s.c>I&&(w.s.c=I),w.e.r<k.r&&(w.e.r=k.r),w.e.c<I&&(w.e.c=I),f.cellDates&&A&&N.t=="n"&&K0(er[A.numFmtId])){var q=nc(N.v);q&&(N.t="d",N.v=new Date(q.y,q.m-1,q.d,q.H,q.M,q.S,q.u))}be&&(be.type=="XLDAPR"&&(N.D=!0),be=void 0);break;case 1:case 12:if(!f.sheetStubs||_)break;N={t:"z",v:void 0},I=ge[0].c==-1?I+1:ge[0].c,f.dense?(g[C]||(g[C]=[]),g[C][I]=N):g[On(I)+B]=N,w.s.r>k.r&&(w.s.r=k.r),w.s.c>I&&(w.s.c=I),w.e.r<k.r&&(w.e.r=k.r),w.e.c<I&&(w.e.c=I),be&&(be.type=="XLDAPR"&&(N.D=!0),be=void 0);break;case 176:X.push(ge);break;case 49:be=((f.xlmeta||{}).Cell||[])[ge-1];break;case 494:var P=n["!id"][ge.relId];for(P?(ge.Target=P.Target,ge.loc&&(ge.Target+="#"+ge.loc),ge.Rel=P):ge.relId==""&&(ge.Target="#"+ge.loc),C=ge.rfx.s.r;C<=ge.rfx.e.r;++C)for(I=ge.rfx.s.c;I<=ge.rfx.e.c;++I)f.dense?(g[C]||(g[C]=[]),g[C][I]||(g[C][I]={t:"z",v:void 0}),g[C][I].l=ge):(D=tr({c:I,r:C}),g[D]||(g[D]={t:"z",v:void 0}),g[D].l=ge);break;case 426:if(!f.cellFormula)break;H.push(ge),U=f.dense?g[C][I]:g[On(I)+B],U.f=Fa(ge[1],w,{r:k.r,c:I},J,f),U.F=gr(ge[0]);break;case 427:if(!f.cellFormula)break;ce[tr(ge[0].s)]=ge[1],U=f.dense?g[C][I]:g[On(I)+B],U.f=Fa(ge[1],w,{r:k.r,c:I},J,f);break;case 60:if(!f.cellStyles)break;for(;ge.e>=ge.s;)xe[ge.e--]={width:ge.w/256,hidden:!!(ge.flags&1),level:ge.level},ne||(ne=!0,f2(ge.w/256)),_o(xe[ge.e+1]);break;case 161:g["!autofilter"]={ref:gr(ge)};break;case 476:g["!margins"]=ge;break;case 147:a.Sheets[t]||(a.Sheets[t]={}),ge.name&&(a.Sheets[t].CodeName=ge.name),(ge.above||ge.left)&&(g["!outline"]={above:ge.above,left:ge.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),ge.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:_=!0;break;case 36:_=!1;break;case 37:_=!0;break;case 38:_=!1;break;default:if(!We.T){if(!_||f.WTF)throw new Error("Unexpected record 0x"+re.toString(16))}}},f),delete f.supbooks,delete f["!row"],!g["!ref"]&&(w.s.r<2e6||m&&(m.e.r>0||m.e.c>0||m.s.r>0||m.s.c>0))&&(g["!ref"]=gr(m||w)),f.sheetRows&&g["!ref"]){var fe=Ur(g["!ref"]);f.sheetRows<=+fe.e.r&&(fe.e.r=f.sheetRows-1,fe.e.r>w.e.r&&(fe.e.r=w.e.r),fe.e.r<fe.s.r&&(fe.s.r=fe.e.r),fe.e.c>w.e.c&&(fe.e.c=w.e.c),fe.e.c<fe.s.c&&(fe.s.c=fe.e.c),g["!fullref"]=g["!ref"],g["!ref"]=gr(fe))}return X.length>0&&(g["!merges"]=X),xe.length>0&&(g["!cols"]=xe),W.length>0&&(g["!rows"]=W),g}function pB(e,r,t,n,a,i,u){if(r.v===void 0)return!1;var f="";switch(r.t){case"b":f=r.v?"1":"0";break;case"d":r=kn(r),r.z=r.z||er[14],r.v=ma(_n(r.v)),r.t="n";break;case"n":case"e":f=""+r.v;break;default:f=r.v;break}var g={r:t,c:n};switch(g.s=No(a.cellXfs,r,a),r.l&&i["!links"].push([tr(g),r.l]),r.c&&i["!comments"].push([tr(g),r.c]),r.t){case"s":case"str":return a.bookSST?(f=p2(a.Strings,r.v,a.revStrings),g.t="s",g.v=f,u?vt(e,18,FL(r,g)):vt(e,7,DL(r,g))):(g.t="str",u?vt(e,17,qL(r,g)):vt(e,6,XL(r,g))),!0;case"n":return r.v==(r.v|0)&&r.v>-1e3&&r.v<1e3?u?vt(e,13,VL(r,g)):vt(e,2,zL(r,g)):u?vt(e,16,PL(r,g)):vt(e,5,BL(r,g)),!0;case"b":return g.t="b",u?vt(e,15,CL(r,g)):vt(e,4,AL(r,g)),!0;case"e":return g.t="e",u?vt(e,14,OL(r,g)):vt(e,3,jL(r,g)),!0}return u?vt(e,12,EL(r,g)):vt(e,1,_L(r,g)),!0}function bB(e,r,t,n){var a=Ur(r["!ref"]||"A1"),i,u="",f=[];vt(e,145);var g=Array.isArray(r),m=a.e.r;r["!rows"]&&(m=Math.max(a.e.r,r["!rows"].length-1));for(var w=a.s.r;w<=m;++w){u=Zn(w),mL(e,r,a,w);var _=!1;if(w<=a.e.r)for(var E=a.s.c;E<=a.e.c;++E){w===a.s.r&&(f[E]=On(E)),i=f[E]+u;var k=g?(r[w]||[])[E]:r[i];if(!k){_=!1;continue}_=pB(e,k,w,E,n,r,_)}}vt(e,146)}function wB(e,r){!r||!r["!merges"]||(vt(e,177,tB(r["!merges"].length)),r["!merges"].forEach(function(t){vt(e,176,eB(t))}),vt(e,178))}function vB(e,r){!r||!r["!cols"]||(vt(e,390),r["!cols"].forEach(function(t,n){t&&vt(e,60,lB(n,t))}),vt(e,391))}function yB(e,r){!r||!r["!ref"]||(vt(e,648),vt(e,649,fB(Ur(r["!ref"]))),vt(e,650))}function _B(e,r,t){r["!links"].forEach(function(n){if(n[1].Target){var a=nn(t,-1,n[1].Target.replace(/#.*$/,""),Ar.HLINK);vt(e,494,nB(n,a))}}),delete r["!links"]}function kB(e,r,t,n){if(r["!comments"].length>0){var a=nn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Ar.VML);vt(e,551,a2("rId"+a)),r["!legacy"]=a}}function EB(e,r,t,n){if(r["!autofilter"]){var a=r["!autofilter"],i=typeof a.ref=="string"?a.ref:gr(a.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var u=t.Workbook.Names,f=ds(i);f.s.r==f.e.r&&(f.e.r=ds(r["!ref"]).e.r,i=gr(f));for(var g=0;g<u.length;++g){var m=u[g];if(m.Name=="_xlnm._FilterDatabase"&&m.Sheet==n){m.Ref="'"+t.SheetNames[n]+"'!"+i;break}}g==u.length&&u.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+i}),vt(e,161,$0(Ur(i))),vt(e,162)}}function SB(e,r,t){vt(e,133),vt(e,137,dB(r,t)),vt(e,138),vt(e,134)}function AB(e,r){r["!protect"]&&vt(e,535,hB(r["!protect"]))}function NB(e,r,t,n){var a=us(),i=t.SheetNames[e],u=t.Sheets[i]||{},f=i;try{t&&t.Workbook&&(f=t.Workbook.Sheets[e].CodeName||f)}catch{}var g=Ur(u["!ref"]||"A1");if(g.e.c>16383||g.e.r>1048575){if(r.WTF)throw new Error("Range "+(u["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");g.e.c=Math.min(g.e.c,16383),g.e.r=Math.min(g.e.c,1048575)}return u["!links"]=[],u["!comments"]=[],vt(a,129),(t.vbaraw||u["!outline"])&&vt(a,147,vL(f,u["!outline"])),vt(a,148,pL(g)),SB(a,u,t.Workbook),vB(a,u),bB(a,u,e,r),AB(a,u),EB(a,u,t,e),wB(a,u),_B(a,u,n),u["!margins"]&&vt(a,476,cB(u["!margins"])),(!r||r.ignoreEC||r.ignoreEC==null)&&yB(a,u),kB(a,u,e,n),vt(a,130),a.end()}function CB(e){var r=[],t=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var u=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);u&&(r[+u[1]]=t?+u[2]:u[2])});var a=Pr((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[r,a,n]}function TB(e,r,t,n,a,i){var u=i||{"!type":"chart"};if(!e)return i;var f=0,g=0,m="A",w={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(_){var E=CB(_);w.s.r=w.s.c=0,w.e.c=f,m=On(f),E[0].forEach(function(k,N){u[m+Zn(N)]={t:"n",v:k,z:E[1]},g=N}),w.e.r<g&&(w.e.r=g),++f}),f>0&&(u["!ref"]=gr(w)),u}function jB(e,r,t,n,a){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},u,f=e.match(XE);return f&&b2(f[0],i,a,t),(u=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=u[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function RB(e,r){e.l+=10;var t=Ua(e);return{name:t}}function OB(e,r,t,n,a){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},u=!1;return Cl(e,function(g,m,w){switch(w){case 550:i["!rel"]=g;break;case 651:a.Sheets[t]||(a.Sheets[t]={}),g.name&&(a.Sheets[t].CodeName=g.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:u=!0;break;case 36:u=!1;break;case 37:break;case 38:break;default:if(!(m.T>0)){if(!(m.T<0)){if(!u||r.WTF)throw new Error("Unexpected record 0x"+w.toString(16))}}}},r),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var w2=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],IB=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],DB=[],MB=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function K_(e,r){for(var t=0;t!=e.length;++t)for(var n=e[t],a=0;a!=r.length;++a){var i=r[a];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=vn(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function q_(e,r){for(var t=0;t!=r.length;++t){var n=r[t];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=vn(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function $E(e){q_(e.WBProps,w2),q_(e.CalcPr,MB),K_(e.WBView,IB),K_(e.Sheets,DB),I0.date1904=vn(e.WBProps.date1904)}function FB(e){return!e.Workbook||!e.Workbook.WBProps?"false":vn(e.Workbook.WBProps.date1904)?"true":"false"}var LB="][*?/\\".split("");function ZE(e,r){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return LB.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function BB(e,r,t){e.forEach(function(n,a){ZE(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(t){var u=r&&r[a]&&r[a].CodeName||n;if(u.charCodeAt(0)==95&&u.length>22)throw new Error("Bad Code Name: Worksheet"+u)}})}function PB(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var r=e.Workbook&&e.Workbook.Sheets||[];BB(e.SheetNames,r,!!e.vbaraw);for(var t=0;t<e.SheetNames.length;++t)FF(e.Sheets[e.SheetNames[t]],e.SheetNames[t],t)}var UB=/<\w+:workbook/;function zB(e,r){if(!e)throw new Error("Could not find file");var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",i={},u=0;if(e.replace(Ha,function(g,m){var w=rr(g);switch(Gi(w[0])){case"<?xml":break;case"<workbook":g.match(UB)&&(a="xmlns"+g.match(/<(\w+):/)[1]),t.xmlns=w[a];break;case"</workbook>":break;case"<fileVersion":delete w[0],t.AppVersion=w;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":w2.forEach(function(_){if(w[_[0]]!=null)switch(_[2]){case"bool":t.WBProps[_[0]]=vn(w[_[0]]);break;case"int":t.WBProps[_[0]]=parseInt(w[_[0]],10);break;default:t.WBProps[_[0]]=w[_[0]]}}),w.codeName&&(t.WBProps.CodeName=cn(w.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete w[0],t.WBView.push(w);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(w.state){case"hidden":w.Hidden=1;break;case"veryHidden":w.Hidden=2;break;default:w.Hidden=0}delete w.state,w.name=Pr(cn(w.name)),delete w[0],t.Sheets.push(w);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=cn(w.name),w.comment&&(i.Comment=w.comment),w.localSheetId&&(i.Sheet=+w.localSheetId),vn(w.hidden||"0")&&(i.Hidden=!0),u=m+g.length;break;case"</definedName>":i.Ref=Pr(cn(e.slice(u,m))),t.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete w[0],t.CalcPr=w;break;case"<calcPr/>":delete w[0],t.CalcPr=w;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&r.WTF)throw new Error("unrecognized "+w[0]+" in workbook")}return g}),Ec.indexOf(t.xmlns)===-1)throw new Error("Unknown Namespace: "+t.xmlns);return $E(t),t}function JE(e){var r=[Jn];r[r.length]=Tt("workbook",null,{xmlns:Ec[0],"xmlns:r":xa.r});var t=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(w2.forEach(function(f){e.Workbook.WBProps[f[0]]!=null&&e.Workbook.WBProps[f[0]]!=f[1]&&(n[f[0]]=e.Workbook.WBProps[f[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),r[r.length]=Tt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(r[r.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),r[r.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',r[r.length]="</bookViews>"}for(r[r.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var u={name:an(e.SheetNames[i].slice(0,31))};if(u.sheetId=""+(i+1),u["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:u.state="hidden";break;case 2:u.state="veryHidden";break}r[r.length]=Tt("sheet",null,u)}return r[r.length]="</sheets>",t&&(r[r.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(f){var g={name:f.Name};f.Comment&&(g.comment=f.Comment),f.Sheet!=null&&(g.localSheetId=""+f.Sheet),f.Hidden&&(g.hidden="1"),f.Ref&&(r[r.length]=Tt("definedName",an(f.Ref),g))}),r[r.length]="</definedNames>"),r.length>2&&(r[r.length]="</workbook>",r[1]=r[1].replace("/>",">")),r.join("")}function HB(e,r){var t={};return t.Hidden=e.read_shift(4),t.iTabID=e.read_shift(4),t.strRelID=rp(e),t.name=Ua(e),t}function VB(e,r){return r||(r=ft(127)),r.write_shift(4,e.Hidden),r.write_shift(4,e.iTabID),a2(e.strRelID,r),ya(e.name.slice(0,31),r),r.length>r.l?r.slice(0,r.l):r}function GB(e,r){var t={},n=e.read_shift(4);t.defaultThemeVersion=e.read_shift(4);var a=r>8?Ua(e):"";return a.length>0&&(t.CodeName=a),t.autoCompressPictures=!!(n&65536),t.backupFile=!!(n&64),t.checkCompatibility=!!(n&4096),t.date1904=!!(n&1),t.filterPrivacy=!!(n&8),t.hidePivotFieldList=!!(n&1024),t.promptedSolutions=!!(n&16),t.publishItems=!!(n&2048),t.refreshAllConnections=!!(n&262144),t.saveExternalLinkValues=!!(n&128),t.showBorderUnselectedTables=!!(n&4),t.showInkAnnotation=!!(n&32),t.showObjects=["all","placeholders","none"][n>>13&3],t.showPivotChartFilter=!!(n&32768),t.updateLinks=["userSet","never","always"][n>>8&3],t}function WB(e,r){r||(r=ft(72));var t=0;return e&&e.filterPrivacy&&(t|=8),r.write_shift(4,t),r.write_shift(4,0),Vk(e&&e.CodeName||"ThisWorkbook",r),r.slice(0,r.l)}function XB(e,r){var t={};return e.read_shift(4),t.ArchID=e.read_shift(4),e.l+=r-8,t}function KB(e,r,t){var n=e.l+r;e.l+=4,e.l+=1;var a=e.read_shift(4),i=kO(e),u=jF(e,0,t),f=n2(e);e.l=n;var g={Name:i,Ptg:u};return a<268435455&&(g.Sheet=a),f&&(g.Comment=f),g}function qB(e,r){var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;r||(r={}),r.biff=12;var i=[],u=[[]];return u.SheetNames=[],u.XTI=[],Od[16]={n:"BrtFRTArchID$",f:XB},Cl(e,function(g,m,w){switch(w){case 156:u.SheetNames.push(g.name),t.Sheets.push(g);break;case 153:t.WBProps=g;break;case 39:g.Sheet!=null&&(r.SID=g.Sheet),g.Ref=Fa(g.Ptg,null,null,u,r),delete r.SID,delete g.Ptg,i.push(g);break;case 1036:break;case 357:case 358:case 355:case 667:u[0].length?u.push([w,g]):u[0]=[w,g],u[u.length-1].XTI=[];break;case 362:u.length===0&&(u[0]=[],u[0].XTI=[]),u[u.length-1].XTI=u[u.length-1].XTI.concat(g),u.XTI=u.XTI.concat(g);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(w),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(w),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!m.T){if(!a||r.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+w.toString(16))}}},r),$E(t),t.Names=i,t.supbooks=u,t}function YB(e,r){vt(e,143);for(var t=0;t!=r.SheetNames.length;++t){var n=r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t]&&r.Workbook.Sheets[t].Hidden||0,a={Hidden:n,iTabID:t+1,strRelID:"rId"+(t+1),name:r.SheetNames[t]};vt(e,156,VB(a))}vt(e,144)}function $B(e,r){r||(r=ft(127));for(var t=0;t!=4;++t)r.write_shift(4,0);return ya("SheetJS",r),ya(c1.version,r),ya(c1.version,r),ya("7262",r),r.length>r.l?r.slice(0,r.l):r}function ZB(e,r){r||(r=ft(29)),r.write_shift(-4,0),r.write_shift(-4,460),r.write_shift(4,28800),r.write_shift(4,17600),r.write_shift(4,500),r.write_shift(4,e),r.write_shift(4,e);var t=120;return r.write_shift(1,t),r.length>r.l?r.slice(0,r.l):r}function JB(e,r){if(!(!r.Workbook||!r.Workbook.Sheets)){for(var t=r.Workbook.Sheets,n=0,a=-1,i=-1;n<t.length;++n)!t[n]||!t[n].Hidden&&a==-1?a=n:t[n].Hidden==1&&i==-1&&(i=n);i>a||(vt(e,135),vt(e,158,ZB(a)),vt(e,136))}}function QB(e,r){var t=us();return vt(t,131),vt(t,128,$B()),vt(t,153,WB(e.Workbook&&e.Workbook.WBProps||null)),JB(t,e),YB(t,e),vt(t,132),t.end()}function eP(e,r,t){return r.slice(-4)===".bin"?qB(e,t):zB(e,t)}function tP(e,r,t,n,a,i,u,f){return r.slice(-4)===".bin"?gB(e,n,t,a,i,u,f):KF(e,n,t,a,i,u,f)}function rP(e,r,t,n,a,i,u,f){return r.slice(-4)===".bin"?OB(e,n,t,a,i):jB(e,n,t,a,i)}function nP(e,r,t,n,a,i,u,f){return r.slice(-4)===".bin"?sM():iM()}function aP(e,r,t,n,a,i,u,f){return r.slice(-4)===".bin"?nM():aM()}function sP(e,r,t,n){return r.slice(-4)===".bin"?e9(e,t,n):HD(e,t,n)}function iP(e,r,t){return OE(e,t)}function lP(e,r,t){return r.slice(-4)===".bin"?lD(e,t):aD(e,t)}function oP(e,r,t){return r.slice(-4)===".bin"?J9(e,t):V9(e,t)}function cP(e,r,t){return r.slice(-4)===".bin"?U9(e):B9(e)}function uP(e,r,t,n){return t.slice(-4)===".bin"?z9(e,r,t,n):void 0}function dP(e,r,t){return r.slice(-4)===".bin"?M9(e,r,t):L9(e,r,t)}function fP(e,r,t){return(r.slice(-4)===".bin"?QB:JE)(e)}function hP(e,r,t,n,a){return(r.slice(-4)===".bin"?NB:KE)(e,t,n,a)}function xP(e,r,t){return(r.slice(-4)===".bin"?u9:jE)(e,t)}function mP(e,r,t){return(r.slice(-4)===".bin"?uD:_E)(e,t)}function gP(e,r,t){return(r.slice(-4)===".bin"?Q9:ME)(e)}function pP(e){return(e.slice(-4)===".bin"?F9:IE)()}var QE=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,eS=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function fi(e,r){var t=e.split(/\s+/),n=[];if(n[0]=t[0],t.length===1)return n;var a=e.match(QE),i,u,f,g;if(a)for(g=0;g!=a.length;++g)i=a[g].match(eS),(u=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?f="xmlns"+i[1].slice(6):f=i[1].slice(u+1),n[f]=i[2].slice(1,i[2].length-1));return n}function bP(e){var r=e.split(/\s+/),t={};if(r.length===1)return t;var n=e.match(QE),a,i,u,f;if(n)for(f=0;f!=n.length;++f)a=n[f].match(eS),(i=a[1].indexOf(":"))===-1?t[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?u="xmlns"+a[1].slice(6):u=a[1].slice(i+1),t[u]=a[2].slice(1,a[2].length-1));return t}var cd;function wP(e,r){var t=cd[e]||Pr(e);return t==="General"?mc(r):ri(t,r)}function vP(e,r,t,n){var a=n;switch((t[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=vn(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=_n(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+t[0])}e[Pr(r)]=a}function yP(e,r,t){if(e.t!=="z"){if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Tl[e.v]:r==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=kd(e.v):e.w=mc(e.v):e.w=wP(r||"General",e.v)}catch(i){if(t.WTF)throw i}try{var n=cd[r]||r||"General";if(t.cellNF&&(e.z=n),t.cellDates&&e.t=="n"&&K0(n)){var a=nc(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(i){if(t.WTF)throw i}}}function _P(e,r,t){if(t.cellStyles&&r.Interior){var n=r.Interior;n.Pattern&&(n.patternType=DD[n.Pattern]||n.Pattern)}e[r.ID]=r}function kP(e,r,t,n,a,i,u,f,g,m){var w="General",_=n.StyleID,E={};m=m||{};var k=[],N=0;for(_===void 0&&f&&(_=f.StyleID),_===void 0&&u&&(_=u.StyleID);i[_]!==void 0&&(i[_].nf&&(w=i[_].nf),i[_].Interior&&k.push(i[_].Interior),!!i[_].Parent);)_=i[_].Parent;switch(t.Type){case"Boolean":n.t="b",n.v=vn(e);break;case"String":n.t="s",n.r=d_(Pr(e)),n.v=e.indexOf("<")>-1?Pr(r||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(_n(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Pr(e):n.v<60&&(n.v=n.v-1),(!w||w=="General")&&(w="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=qk[e],m.cellText!==!1&&(n.w=e);break;default:e==""&&r==""?n.t="z":(n.t="s",n.v=d_(r||e));break}if(yP(n,w,m),m.cellFormula!==!1)if(n.Formula){var A=Pr(n.Formula);A.charCodeAt(0)==61&&(A=A.slice(1)),n.f=O0(A,a),delete n.Formula,n.ArrayRange=="RC"?n.F=O0("RC:RC",a):n.ArrayRange&&(n.F=O0(n.ArrayRange,a),g.push([Ur(n.F),n.F]))}else for(N=0;N<g.length;++N)a.r>=g[N][0].s.r&&a.r<=g[N][0].e.r&&a.c>=g[N][0].s.c&&a.c<=g[N][0].e.c&&(n.F=g[N][1]);m.cellStyles&&(k.forEach(function(C){!E.patternType&&C.patternType&&(E.patternType=C.patternType)}),n.s=E),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function EP(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function gg(e,r){var t=r||{};q0();var n=$u(Zp(e));(t.type=="binary"||t.type=="array"||t.type=="base64")&&(n=cn(n));var a=n.slice(0,1024).toLowerCase(),i=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var u=kn(t);return u.type="string",L0.to_workbook(n,u)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(de){a.indexOf("<"+de)>=0&&(i=!0)}),i)return cU(n,t);cd={"General Number":"General","General Date":er[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":er[15],"Short Date":er[14],"Long Time":er[19],"Medium Time":er[18],"Short Time":er[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:er[2],Standard:er[4],Percent:er[10],Scientific:er[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var f,g=[],m,w={},_=[],E=t.dense?[]:{},k="",N={},A={},C=fi('<Data ss:Type="String">'),I=0,D=0,O=0,B={s:{r:2e6,c:2e6},e:{r:0,c:0}},U={},X={},F="",Y=0,H=[],ce={},J={},V=0,xe=[],W=[],ne={},be=[],fe,Ve=!1,ge=[],We=[],re={},L=0,q=0,P={Sheets:[],WBProps:{date1904:!1}},Z={};Ad.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var pe="";f=Ad.exec(n);)switch(f[3]=(pe=f[3]).toLowerCase()){case"data":if(pe=="data"){if(f[1]==="/"){if((m=g.pop())[0]!==f[3])throw new Error("Bad state: "+m.join("|"))}else f[0].charAt(f[0].length-2)!=="/"&&g.push([f[3],!0]);break}if(g[g.length-1][1])break;f[1]==="/"?kP(n.slice(I,f.index),F,C,g[g.length-1][0]=="comment"?ne:N,{c:D,r:O},U,be[D],A,ge,t):(F="",C=fi(f[0]),I=f.index+f[0].length);break;case"cell":if(f[1]==="/")if(W.length>0&&(N.c=W),(!t.sheetRows||t.sheetRows>O)&&N.v!==void 0&&(t.dense?(E[O]||(E[O]=[]),E[O][D]=N):E[On(D)+Zn(O)]=N),N.HRef&&(N.l={Target:Pr(N.HRef)},N.HRefScreenTip&&(N.l.Tooltip=N.HRefScreenTip),delete N.HRef,delete N.HRefScreenTip),(N.MergeAcross||N.MergeDown)&&(L=D+(parseInt(N.MergeAcross,10)|0),q=O+(parseInt(N.MergeDown,10)|0),H.push({s:{c:D,r:O},e:{c:L,r:q}})),!t.sheetStubs)N.MergeAcross?D=L+1:++D;else if(N.MergeAcross||N.MergeDown){for(var Le=D;Le<=L;++Le)for(var Be=O;Be<=q;++Be)(Le>D||Be>O)&&(t.dense?(E[Be]||(E[Be]=[]),E[Be][Le]={t:"z"}):E[On(Le)+Zn(Be)]={t:"z"});D=L+1}else++D;else N=bP(f[0]),N.Index&&(D=+N.Index-1),D<B.s.c&&(B.s.c=D),D>B.e.c&&(B.e.c=D),f[0].slice(-2)==="/>"&&++D,W=[];break;case"row":f[1]==="/"||f[0].slice(-2)==="/>"?(O<B.s.r&&(B.s.r=O),O>B.e.r&&(B.e.r=O),f[0].slice(-2)==="/>"&&(A=fi(f[0]),A.Index&&(O=+A.Index-1)),D=0,++O):(A=fi(f[0]),A.Index&&(O=+A.Index-1),re={},(A.AutoFitHeight=="0"||A.Height)&&(re.hpx=parseInt(A.Height,10),re.hpt=Rd(re.hpx),We[O]=re),A.Hidden=="1"&&(re.hidden=!0,We[O]=re));break;case"worksheet":if(f[1]==="/"){if((m=g.pop())[0]!==f[3])throw new Error("Bad state: "+m.join("|"));_.push(k),B.s.r<=B.e.r&&B.s.c<=B.e.c&&(E["!ref"]=gr(B),t.sheetRows&&t.sheetRows<=B.e.r&&(E["!fullref"]=E["!ref"],B.e.r=t.sheetRows-1,E["!ref"]=gr(B))),H.length&&(E["!merges"]=H),be.length>0&&(E["!cols"]=be),We.length>0&&(E["!rows"]=We),w[k]=E}else B={s:{r:2e6,c:2e6},e:{r:0,c:0}},O=D=0,g.push([f[3],!1]),m=fi(f[0]),k=Pr(m.Name),E=t.dense?[]:{},H=[],ge=[],We=[],Z={name:k,Hidden:0},P.Sheets.push(Z);break;case"table":if(f[1]==="/"){if((m=g.pop())[0]!==f[3])throw new Error("Bad state: "+m.join("|"))}else{if(f[0].slice(-2)=="/>")break;g.push([f[3],!1]),be=[],Ve=!1}break;case"style":f[1]==="/"?_P(U,X,t):X=fi(f[0]);break;case"numberformat":X.nf=Pr(fi(f[0]).Format||"General"),cd[X.nf]&&(X.nf=cd[X.nf]);for(var Pe=0;Pe!=392&&er[Pe]!=X.nf;++Pe);if(Pe==392){for(Pe=57;Pe!=392;++Pe)if(er[Pe]==null){_l(X.nf,Pe);break}}break;case"column":if(g[g.length-1][0]!=="table")break;if(fe=fi(f[0]),fe.Hidden&&(fe.hidden=!0,delete fe.Hidden),fe.Width&&(fe.wpx=parseInt(fe.Width,10)),!Ve&&fe.wpx>10){Ve=!0,La=CE;for(var et=0;et<be.length;++et)be[et]&&_o(be[et])}Ve&&_o(fe),be[fe.Index-1||be.length]=fe;for(var ut=0;ut<+fe.Span;++ut)be[be.length]=kn(fe);break;case"namedrange":if(f[1]==="/")break;P.Names||(P.Names=[]);var ve=rr(f[0]),Ie={Name:ve.Name,Ref:O0(ve.RefersTo.slice(1),{r:0,c:0})};P.Sheets.length>0&&(Ie.Sheet=P.Sheets.length-1),P.Names.push(Ie);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(f[0].slice(-2)==="/>")break;f[1]==="/"?F+=n.slice(Y,f.index):Y=f.index+f[0].length;break;case"interior":if(!t.cellStyles)break;X.Interior=fi(f[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(f[0].slice(-2)==="/>")break;f[1]==="/"?qO(ce,pe,n.slice(V,f.index)):V=f.index+f[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(f[1]==="/"){if((m=g.pop())[0]!==f[3])throw new Error("Bad state: "+m.join("|"))}else g.push([f[3],!1]);break;case"comment":if(f[1]==="/"){if((m=g.pop())[0]!==f[3])throw new Error("Bad state: "+m.join("|"));EP(ne),W.push(ne)}else g.push([f[3],!1]),m=fi(f[0]),ne={a:m.Author};break;case"autofilter":if(f[1]==="/"){if((m=g.pop())[0]!==f[3])throw new Error("Bad state: "+m.join("|"))}else if(f[0].charAt(f[0].length-2)!=="/"){var z=fi(f[0]);E["!autofilter"]={ref:O0(z.Range).replace(/\$/g,"")},g.push([f[3],!0])}break;case"name":break;case"datavalidation":if(f[1]==="/"){if((m=g.pop())[0]!==f[3])throw new Error("Bad state: "+m.join("|"))}else f[0].charAt(f[0].length-2)!=="/"&&g.push([f[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(f[1]==="/"){if((m=g.pop())[0]!==f[3])throw new Error("Bad state: "+m.join("|"))}else f[0].charAt(f[0].length-2)!=="/"&&g.push([f[3],!0]);break;case"null":break;default:if(g.length==0&&f[3]=="document"||g.length==0&&f[3]=="uof")return Q_(n,t);var De=!0;switch(g[g.length-1][0]){case"officedocumentsettings":switch(f[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:De=!1}break;case"componentoptions":switch(f[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:De=!1}break;case"excelworkbook":switch(f[3]){case"date1904":P.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:De=!1}break;case"workbookoptions":switch(f[3]){case"owcversion":break;case"height":break;case"width":break;default:De=!1}break;case"worksheetoptions":switch(f[3]){case"visible":if(f[0].slice(-2)!=="/>")if(f[1]==="/")switch(n.slice(V,f.index)){case"SheetHidden":Z.Hidden=1;break;case"SheetVeryHidden":Z.Hidden=2;break}else V=f.index+f[0].length;break;case"header":E["!margins"]||dc(E["!margins"]={},"xlml"),isNaN(+rr(f[0]).Margin)||(E["!margins"].header=+rr(f[0]).Margin);break;case"footer":E["!margins"]||dc(E["!margins"]={},"xlml"),isNaN(+rr(f[0]).Margin)||(E["!margins"].footer=+rr(f[0]).Margin);break;case"pagemargins":var Te=rr(f[0]);E["!margins"]||dc(E["!margins"]={},"xlml"),isNaN(+Te.Top)||(E["!margins"].top=+Te.Top),isNaN(+Te.Left)||(E["!margins"].left=+Te.Left),isNaN(+Te.Right)||(E["!margins"].right=+Te.Right),isNaN(+Te.Bottom)||(E["!margins"].bottom=+Te.Bottom);break;case"displayrighttoleft":P.Views||(P.Views=[]),P.Views[0]||(P.Views[0]={}),P.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":E["!outline"]||(E["!outline"]={}),E["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":E["!outline"]||(E["!outline"]={}),E["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:De=!1}break;case"pivottable":case"pivotcache":switch(f[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:De=!1}break;case"pagebreaks":switch(f[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:De=!1}break;case"autofilter":switch(f[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:De=!1}break;case"querytable":switch(f[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:De=!1}break;case"datavalidation":switch(f[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:De=!1}break;case"sorting":case"conditionalformatting":switch(f[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:De=!1}break;case"mapinfo":case"schema":case"data":switch(f[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:De=!1}break;case"smarttags":break;default:De=!1;break}if(De||f[3].match(/!\[CDATA/))break;if(!g[g.length-1][1])throw"Unrecognized tag: "+f[3]+"|"+g.join("|");if(g[g.length-1][0]==="customdocumentproperties"){if(f[0].slice(-2)==="/>")break;f[1]==="/"?vP(J,pe,xe,n.slice(V,f.index)):(xe=f,V=f.index+f[0].length);break}if(t.WTF)throw"Unrecognized tag: "+f[3]+"|"+g.join("|")}var le={};return!t.bookSheets&&!t.bookProps&&(le.Sheets=w),le.SheetNames=_,le.Workbook=P,le.SSF=kn(er),le.Props=ce,le.Custprops=J,le}function cp(e,r){switch(y2(r=r||{}),r.type||"base64"){case"base64":return gg(Ms(e),r);case"binary":case"buffer":case"file":return gg(e,r);case"array":return gg(So(e),r)}}function SP(e,r){var t=[];return e.Props&&t.push(YO(e.Props,r)),e.Custprops&&t.push($O(e.Props,e.Custprops)),t.join("")}function AP(){return""}function NP(e,r){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return r.cellXfs.forEach(function(n,a){var i=[];i.push(Tt("NumberFormat",null,{"ss:Format":an(er[n.numFmtId])}));var u={"ss:ID":"s"+(21+a)};t.push(Tt("Style",i.join(""),u))}),Tt("Styles",t.join(""))}function tS(e){return Tt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+m2(e.Ref,{r:0,c:0})})}function CP(e){if(!((e||{}).Workbook||{}).Names)return"";for(var r=e.Workbook.Names,t=[],n=0;n<r.length;++n){var a=r[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||t.push(tS(a)))}return Tt("Names",t.join(""))}function TP(e,r,t,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],u=0;u<a.length;++u){var f=a[u];f.Sheet==t&&(f.Name.match(/^_xlfn\./)||i.push(tS(f)))}return i.join("")}function jP(e,r,t,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Tt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Tt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Tt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[t])if(n.Workbook.Sheets[t].Hidden)a.push(Tt("Visible",n.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<t&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==t&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Oa("ProtectContents","True")),e["!protect"].objects&&a.push(Oa("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Oa("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Oa("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Oa("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(u){e["!protect"][u[0]]&&a.push("<"+u[1]+"/>")})),a.length==0?"":Tt("WorksheetOptions",a.join(""),{xmlns:Cs.x})}function RP(e){return e.map(function(r){var t=JR(r.t||""),n=Tt("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return Tt("Comment",n,{"ss:Author":r.a})}).join("")}function OP(e,r,t,n,a,i,u){if(!e||e.v==null&&e.f==null)return"";var f={};if(e.f&&(f["ss:Formula"]="="+an(m2(e.f,u))),e.F&&e.F.slice(0,r.length)==r){var g=In(e.F.slice(r.length+1));f["ss:ArrayRange"]="RC:R"+(g.r==u.r?"":"["+(g.r-u.r)+"]")+"C"+(g.c==u.c?"":"["+(g.c-u.c)+"]")}if(e.l&&e.l.Target&&(f["ss:HRef"]=an(e.l.Target),e.l.Tooltip&&(f["x:HRefScreenTip"]=an(e.l.Tooltip))),t["!merges"])for(var m=t["!merges"],w=0;w!=m.length;++w)m[w].s.c!=u.c||m[w].s.r!=u.r||(m[w].e.c>m[w].s.c&&(f["ss:MergeAcross"]=m[w].e.c-m[w].s.c),m[w].e.r>m[w].s.r&&(f["ss:MergeDown"]=m[w].e.r-m[w].s.r));var _="",E="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":_="Number",E=String(e.v);break;case"b":_="Boolean",E=e.v?"1":"0";break;case"e":_="Error",E=Tl[e.v];break;case"d":_="DateTime",E=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||er[14]);break;case"s":_="String",E=ZR(e.v||"");break}var k=No(n.cellXfs,e,n);f["ss:StyleID"]="s"+(21+k),f["ss:Index"]=u.c+1;var N=e.v!=null?E:"",A=e.t=="z"?"":'<Data ss:Type="'+_+'">'+N+"</Data>";return(e.c||[]).length>0&&(A+=RP(e.c)),Tt("Cell",A,f)}function IP(e,r){var t='<Row ss:Index="'+(e+1)+'"';return r&&(r.hpt&&!r.hpx&&(r.hpx=B0(r.hpt)),r.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+r.hpx+'"'),r.hidden&&(t+=' ss:Hidden="1"')),t+">"}function DP(e,r,t,n){if(!e["!ref"])return"";var a=Ur(e["!ref"]),i=e["!merges"]||[],u=0,f=[];e["!cols"]&&e["!cols"].forEach(function(C,I){_o(C);var D=!!C.width,O=V1(I,C),B={"ss:Index":I+1};D&&(B["ss:Width"]=Td(O.width)),C.hidden&&(B["ss:Hidden"]="1"),f.push(Tt("Column",null,B))});for(var g=Array.isArray(e),m=a.s.r;m<=a.e.r;++m){for(var w=[IP(m,(e["!rows"]||[])[m])],_=a.s.c;_<=a.e.c;++_){var E=!1;for(u=0;u!=i.length;++u)if(!(i[u].s.c>_)&&!(i[u].s.r>m)&&!(i[u].e.c<_)&&!(i[u].e.r<m)){(i[u].s.c!=_||i[u].s.r!=m)&&(E=!0);break}if(!E){var k={r:m,c:_},N=tr(k),A=g?(e[m]||[])[_]:e[N];w.push(OP(A,N,e,r,t,n,k))}}w.push("</Row>"),w.length>2&&f.push(w.join(""))}return f.join("")}function MP(e,r,t){var n=[],a=t.SheetNames[e],i=t.Sheets[a],u=i?TP(i,r,e,t):"";return u.length>0&&n.push("<Names>"+u+"</Names>"),u=i?DP(i,r,e,t):"",u.length>0&&n.push("<Table>"+u+"</Table>"),n.push(jP(i,r,e,t)),n.join("")}function FP(e,r){r||(r={}),e.SSF||(e.SSF=kn(er)),e.SSF&&(q0(),F1(e.SSF),r.revssf=B1(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF,r.cellXfs=[],No(r.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(SP(e,r)),t.push(AP()),t.push(""),t.push("");for(var n=0;n<e.SheetNames.length;++n)t.push(Tt("Worksheet",MP(n,r,e),{"ss:Name":an(e.SheetNames[n])}));return t[2]=NP(e,r),t[3]=CP(e),Jn+Tt("Workbook",t.join(""),{xmlns:Cs.ss,"xmlns:o":Cs.o,"xmlns:x":Cs.x,"xmlns:ss":Cs.ss,"xmlns:dt":Cs.dt,"xmlns:html":Cs.html})}function LP(e){var r={},t=e.content;if(t.l=28,r.AnsiUserType=t.read_shift(0,"lpstr-ansi"),r.AnsiClipboardFormat=CO(t),t.length-t.l<=4)return r;var n=t.read_shift(4);if(n==0||n>40||(t.l-=4,r.Reserved1=t.read_shift(0,"lpstr-ansi"),t.length-t.l<=4)||(n=t.read_shift(4),n!==1907505652)||(r.UnicodeClipboardFormat=TO(t),n=t.read_shift(4),n==0||n>40))return r;t.l-=4,r.Reserved2=t.read_shift(0,"lpwstr")}var BP=[60,1084,2066,2165,2175];function PP(e,r,t,n,a){var i=n,u=[],f=t.slice(t.l,t.l+i);if(a&&a.enc&&a.enc.insitu&&f.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(f)}u.push(f),t.l+=i;for(var g=wl(t,t.l),m=up[g],w=0;m!=null&&BP.indexOf(g)>-1;)i=wl(t,t.l+2),w=t.l+4,g==2066?w+=4:(g==2165||g==2175)&&(w+=12),f=t.slice(w,t.l+4+i),u.push(f),t.l+=4+i,m=up[g=wl(t,t.l)];var _=va(u);Ra(_,0);var E=0;_.lens=[];for(var k=0;k<u.length;++k)_.lens.push(E),E+=u[k].length;if(_.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+_.length+" < "+n;return r.f(_,_.length,a)}function Ii(e,r,t){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,r.cellNF&&(e.z=er[n])}catch(i){if(r.WTF)throw i}if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Tl[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=kd(e.v):e.w=mc(e.v):e.w=ri(n,e.v,{date1904:!!t,dateNF:r&&r.dateNF})}catch(i){if(r.WTF)throw i}if(r.cellDates&&n&&e.t=="n"&&K0(er[n]||String(n))){var a=nc(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function zh(e,r,t){return{v:e,ixfe:r,t}}function UP(e,r){var t={opts:{}},n={},a=r.dense?[]:{},i={},u={},f=null,g=[],m="",w={},_,E="",k,N,A,C,I={},D=[],O,B,U=[],X=[],F={Sheets:[],WBProps:{date1904:!1},Views:[{}]},Y={},H=function(At){return At<8?oc[At]:At<64&&X[At-8]||oc[At]},ce=function(At,Ot,sr){var Nt=Ot.XF.data;if(!(!Nt||!Nt.patternType||!sr||!sr.cellStyles)){Ot.s={},Ot.s.patternType=Nt.patternType;var mt;(mt=Cd(H(Nt.icvFore)))&&(Ot.s.fgColor={rgb:mt}),(mt=Cd(H(Nt.icvBack)))&&(Ot.s.bgColor={rgb:mt})}},J=function(At,Ot,sr){if(!(re>1)&&!(sr.sheetRows&&At.r>=sr.sheetRows)){if(sr.cellStyles&&Ot.XF&&Ot.XF.data&&ce(At,Ot,sr),delete Ot.ixfe,delete Ot.XF,_=At,E=tr(At),(!u||!u.s||!u.e)&&(u={s:{r:0,c:0},e:{r:0,c:0}}),At.r<u.s.r&&(u.s.r=At.r),At.c<u.s.c&&(u.s.c=At.c),At.r+1>u.e.r&&(u.e.r=At.r+1),At.c+1>u.e.c&&(u.e.c=At.c+1),sr.cellFormula&&Ot.f){for(var Nt=0;Nt<D.length;++Nt)if(!(D[Nt][0].s.c>At.c||D[Nt][0].s.r>At.r)&&!(D[Nt][0].e.c<At.c||D[Nt][0].e.r<At.r)){Ot.F=gr(D[Nt][0]),(D[Nt][0].s.c!=At.c||D[Nt][0].s.r!=At.r)&&delete Ot.f,Ot.f&&(Ot.f=""+Fa(D[Nt][1],u,At,ge,V));break}}sr.dense?(a[At.r]||(a[At.r]=[]),a[At.r][At.c]=Ot):a[E]=Ot}},V={enc:!1,sbcch:0,snames:[],sharedf:I,arrayf:D,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!r&&!!r.cellStyles,WTF:!!r&&!!r.wtf};r.password&&(V.password=r.password);var xe,W=[],ne=[],be=[],fe=[],Ve=!1,ge=[];ge.SheetNames=V.snames,ge.sharedf=V.sharedf,ge.arrayf=V.arrayf,ge.names=[],ge.XTI=[];var We=0,re=0,L=0,q=[],P=[],Z;V.codepage=1200,pi(1200);for(var pe=!1;e.l<e.length-1;){var Le=e.l,Be=e.read_shift(2);if(Be===0&&We===10)break;var Pe=e.l===e.length?0:e.read_shift(2),et=up[Be];if(et&&et.f){if(r.bookSheets&&We===133&&Be!==133)break;if(We=Be,et.r===2||et.r==12){var ut=e.read_shift(2);if(Pe-=2,!V.enc&&ut!==Be&&((ut&255)<<8|ut>>8)!==Be)throw new Error("rt mismatch: "+ut+"!="+Be);et.r==12&&(e.l+=10,Pe-=10)}var ve={};if(Be===10?ve=et.f(e,Pe,V):ve=PP(Be,et,e,Pe,V),re==0&&[9,521,1033,2057].indexOf(We)===-1)continue;switch(Be){case 34:t.opts.Date1904=F.WBProps.date1904=ve;break;case 134:t.opts.WriteProtect=!0;break;case 47:if(V.enc||(e.l=0),V.enc=ve,!r.password)throw new Error("File is password-protected");if(ve.valid==null)throw new Error("Encryption scheme unsupported");if(!ve.valid)throw new Error("Password is incorrect");break;case 92:V.lastuser=ve;break;case 66:var Ie=Number(ve);switch(Ie){case 21010:Ie=1200;break;case 32768:Ie=1e4;break;case 32769:Ie=1252;break}pi(V.codepage=Ie),pe=!0;break;case 317:V.rrtabid=ve;break;case 25:V.winlocked=ve;break;case 439:t.opts.RefreshAll=ve;break;case 12:t.opts.CalcCount=ve;break;case 16:t.opts.CalcDelta=ve;break;case 17:t.opts.CalcIter=ve;break;case 13:t.opts.CalcMode=ve;break;case 14:t.opts.CalcPrecision=ve;break;case 95:t.opts.CalcSaveRecalc=ve;break;case 15:V.CalcRefMode=ve;break;case 2211:t.opts.FullCalc=ve;break;case 129:ve.fDialog&&(a["!type"]="dialog"),ve.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ve.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:U.push(ve);break;case 430:ge.push([ve]),ge[ge.length-1].XTI=[];break;case 35:case 547:ge[ge.length-1].push(ve);break;case 24:case 536:Z={Name:ve.Name,Ref:Fa(ve.rgce,u,null,ge,V)},ve.itab>0&&(Z.Sheet=ve.itab-1),ge.names.push(Z),ge[0]||(ge[0]=[],ge[0].XTI=[]),ge[ge.length-1].push(ve),ve.Name=="_xlnm._FilterDatabase"&&ve.itab>0&&ve.rgce&&ve.rgce[0]&&ve.rgce[0][0]&&ve.rgce[0][0][0]=="PtgArea3d"&&(P[ve.itab-1]={ref:gr(ve.rgce[0][0][1][2])});break;case 22:V.ExternCount=ve;break;case 23:ge.length==0&&(ge[0]=[],ge[0].XTI=[]),ge[ge.length-1].XTI=ge[ge.length-1].XTI.concat(ve),ge.XTI=ge.XTI.concat(ve);break;case 2196:if(V.biff<8)break;Z!=null&&(Z.Comment=ve[1]);break;case 18:a["!protect"]=ve;break;case 19:ve!==0&&V.WTF&&console.error("Password verifier: "+ve);break;case 133:i[ve.pos]=ve,V.snames.push(ve.name);break;case 10:{if(--re)break;if(u.e){if(u.e.r>0&&u.e.c>0){if(u.e.r--,u.e.c--,a["!ref"]=gr(u),r.sheetRows&&r.sheetRows<=u.e.r){var z=u.e.r;u.e.r=r.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=gr(u),u.e.r=z}u.e.r++,u.e.c++}W.length>0&&(a["!merges"]=W),ne.length>0&&(a["!objects"]=ne),be.length>0&&(a["!cols"]=be),fe.length>0&&(a["!rows"]=fe),F.Sheets.push(Y)}m===""?w=a:n[m]=a,a=r.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(V.biff===8&&(V.biff={9:2,521:3,1033:4}[Be]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ve.BIFFVer]||8),V.biffguess=ve.BIFFVer==0,ve.BIFFVer==0&&ve.dt==4096&&(V.biff=5,pe=!0,pi(V.codepage=28591)),V.biff==8&&ve.BIFFVer==0&&ve.dt==16&&(V.biff=2),re++)break;if(a=r.dense?[]:{},V.biff<8&&!pe&&(pe=!0,pi(V.codepage=r.codepage||1252)),V.biff<5||ve.BIFFVer==0&&ve.dt==4096){m===""&&(m="Sheet1"),u={s:{r:0,c:0},e:{r:0,c:0}};var De={pos:e.l-Pe,name:m};i[De.pos]=De,V.snames.push(m)}else m=(i[Le]||{name:""}).name;ve.dt==32&&(a["!type"]="chart"),ve.dt==64&&(a["!type"]="macro"),W=[],ne=[],V.arrayf=D=[],be=[],fe=[],Ve=!1,Y={Hidden:(i[Le]||{hs:0}).hs,name:m}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(r.dense?(a[ve.r]||[])[ve.c]:a[tr({c:ve.c,r:ve.r})])&&++ve.c,O={ixfe:ve.ixfe,XF:U[ve.ixfe]||{},v:ve.val,t:"n"},L>0&&(O.z=q[O.ixfe>>8&63]),Ii(O,r,t.opts.Date1904),J({c:ve.c,r:ve.r},O,r);break;case 5:case 517:O={ixfe:ve.ixfe,XF:U[ve.ixfe],v:ve.val,t:ve.t},L>0&&(O.z=q[O.ixfe>>8&63]),Ii(O,r,t.opts.Date1904),J({c:ve.c,r:ve.r},O,r);break;case 638:O={ixfe:ve.ixfe,XF:U[ve.ixfe],v:ve.rknum,t:"n"},L>0&&(O.z=q[O.ixfe>>8&63]),Ii(O,r,t.opts.Date1904),J({c:ve.c,r:ve.r},O,r);break;case 189:for(var Te=ve.c;Te<=ve.C;++Te){var le=ve.rkrec[Te-ve.c][0];O={ixfe:le,XF:U[le],v:ve.rkrec[Te-ve.c][1],t:"n"},L>0&&(O.z=q[O.ixfe>>8&63]),Ii(O,r,t.opts.Date1904),J({c:Te,r:ve.r},O,r)}break;case 6:case 518:case 1030:{if(ve.val=="String"){f=ve;break}if(O=zh(ve.val,ve.cell.ixfe,ve.tt),O.XF=U[O.ixfe],r.cellFormula){var de=ve.formula;if(de&&de[0]&&de[0][0]&&de[0][0][0]=="PtgExp"){var Ee=de[0][0][1][0],at=de[0][0][1][1],Fe=tr({r:Ee,c:at});I[Fe]?O.f=""+Fa(ve.formula,u,ve.cell,ge,V):O.F=((r.dense?(a[Ee]||[])[at]:a[Fe])||{}).F}else O.f=""+Fa(ve.formula,u,ve.cell,ge,V)}L>0&&(O.z=q[O.ixfe>>8&63]),Ii(O,r,t.opts.Date1904),J(ve.cell,O,r),f=ve}break;case 7:case 519:if(f)f.val=ve,O=zh(ve,f.cell.ixfe,"s"),O.XF=U[O.ixfe],r.cellFormula&&(O.f=""+Fa(f.formula,u,f.cell,ge,V)),L>0&&(O.z=q[O.ixfe>>8&63]),Ii(O,r,t.opts.Date1904),J(f.cell,O,r),f=null;else throw new Error("String record expects Formula");break;case 33:case 545:{D.push(ve);var He=tr(ve[0].s);if(k=r.dense?(a[ve[0].s.r]||[])[ve[0].s.c]:a[He],r.cellFormula&&k){if(!f||!He||!k)break;k.f=""+Fa(ve[1],u,ve[0],ge,V),k.F=gr(ve[0])}}break;case 1212:{if(!r.cellFormula)break;if(E){if(!f)break;I[tr(f.cell)]=ve[0],k=r.dense?(a[f.cell.r]||[])[f.cell.c]:a[tr(f.cell)],(k||{}).f=""+Fa(ve[0],u,_,ge,V)}}break;case 253:O=zh(g[ve.isst].t,ve.ixfe,"s"),g[ve.isst].h&&(O.h=g[ve.isst].h),O.XF=U[O.ixfe],L>0&&(O.z=q[O.ixfe>>8&63]),Ii(O,r,t.opts.Date1904),J({c:ve.c,r:ve.r},O,r);break;case 513:r.sheetStubs&&(O={ixfe:ve.ixfe,XF:U[ve.ixfe],t:"z"},L>0&&(O.z=q[O.ixfe>>8&63]),Ii(O,r,t.opts.Date1904),J({c:ve.c,r:ve.r},O,r));break;case 190:if(r.sheetStubs)for(var je=ve.c;je<=ve.C;++je){var Ke=ve.ixfe[je-ve.c];O={ixfe:Ke,XF:U[Ke],t:"z"},L>0&&(O.z=q[O.ixfe>>8&63]),Ii(O,r,t.opts.Date1904),J({c:je,r:ve.r},O,r)}break;case 214:case 516:case 4:O=zh(ve.val,ve.ixfe,"s"),O.XF=U[O.ixfe],L>0&&(O.z=q[O.ixfe>>8&63]),Ii(O,r,t.opts.Date1904),J({c:ve.c,r:ve.r},O,r);break;case 0:case 512:re===1&&(u=ve);break;case 252:g=ve;break;case 1054:if(V.biff==4){q[L++]=ve[1];for(var it=0;it<L+163&&er[it]!=ve[1];++it);it>=163&&_l(ve[1],L+163)}else _l(ve[1],ve[0]);break;case 30:{q[L++]=ve;for(var qe=0;qe<L+163&&er[qe]!=ve;++qe);qe>=163&&_l(ve,L+163)}break;case 229:W=W.concat(ve);break;case 93:ne[ve.cmo[0]]=V.lastobj=ve;break;case 438:V.lastobj.TxO=ve;break;case 127:V.lastobj.ImData=ve;break;case 440:for(C=ve[0].s.r;C<=ve[0].e.r;++C)for(A=ve[0].s.c;A<=ve[0].e.c;++A)k=r.dense?(a[C]||[])[A]:a[tr({c:A,r:C})],k&&(k.l=ve[1]);break;case 2048:for(C=ve[0].s.r;C<=ve[0].e.r;++C)for(A=ve[0].s.c;A<=ve[0].e.c;++A)k=r.dense?(a[C]||[])[A]:a[tr({c:A,r:C})],k&&k.l&&(k.l.Tooltip=ve[1]);break;case 28:{if(V.biff<=5&&V.biff>=2)break;k=r.dense?(a[ve[0].r]||[])[ve[0].c]:a[tr(ve[0])];var Me=ne[ve[2]];k||(r.dense?(a[ve[0].r]||(a[ve[0].r]=[]),k=a[ve[0].r][ve[0].c]={t:"z"}):k=a[tr(ve[0])]={t:"z"},u.e.r=Math.max(u.e.r,ve[0].r),u.s.r=Math.min(u.s.r,ve[0].r),u.e.c=Math.max(u.e.c,ve[0].c),u.s.c=Math.min(u.s.c,ve[0].c)),k.c||(k.c=[]),N={a:ve[1],t:Me.TxO.t},k.c.push(N)}break;case 2173:N9(U[ve.ixfe],ve.ext);break;case 125:{if(!V.cellStyles)break;for(;ve.e>=ve.s;)be[ve.e--]={width:ve.w/256,level:ve.level||0,hidden:!!(ve.flags&1)},Ve||(Ve=!0,f2(ve.w/256)),_o(be[ve.e+1])}break;case 520:{var Xe={};ve.level!=null&&(fe[ve.r]=Xe,Xe.level=ve.level),ve.hidden&&(fe[ve.r]=Xe,Xe.hidden=!0),ve.hpt&&(fe[ve.r]=Xe,Xe.hpt=ve.hpt,Xe.hpx=B0(ve.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||dc(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Be]]=ve;break;case 161:a["!margins"]||dc(a["!margins"]={}),a["!margins"].header=ve.header,a["!margins"].footer=ve.footer;break;case 574:ve.RTL&&(F.Views[0].RTL=!0);break;case 146:X=ve;break;case 2198:xe=ve;break;case 140:B=ve;break;case 442:m?Y.CodeName=ve||Y.name:F.WBProps.CodeName=ve||"ThisWorkbook";break}}else et||console.error("Missing Info for XLS Record 0x"+Be.toString(16)),e.l+=Pe}return t.SheetNames=Gn(i).sort(function(St,At){return Number(St)-Number(At)}).map(function(St){return i[St].name}),r.bookSheets||(t.Sheets=n),!t.SheetNames.length&&w["!ref"]?(t.SheetNames.push("Sheet1"),t.Sheets&&(t.Sheets.Sheet1=w)):t.Preamble=w,t.Sheets&&P.forEach(function(St,At){t.Sheets[t.SheetNames[At]]["!autofilter"]=St}),t.Strings=g,t.SSF=kn(er),V.enc&&(t.Encryption=V.enc),xe&&(t.Themes=xe),t.Metadata={},B!==void 0&&(t.Metadata.Country=B),ge.names.length>0&&(F.Names=ge.names),t.Workbook=F,t}var ud={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function zP(e,r,t){var n=Wt.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=T_(n,np,ud.DSI);for(var i in a)r[i]=a[i]}catch(m){if(t.WTF)throw m}var u=Wt.find(e,"/!SummaryInformation");if(u&&u.size>0)try{var f=T_(u,ap,ud.SI);for(var g in f)r[g]==null&&(r[g]=f[g])}catch(m){if(t.WTF)throw m}r.HeadingPairs&&r.TitlesOfParts&&(eE(r.HeadingPairs,r.TitlesOfParts,r,t),delete r.HeadingPairs,delete r.TitlesOfParts)}function HP(e,r){var t=[],n=[],a=[],i=0,u,f=s_(np,"n"),g=s_(ap,"n");if(e.Props)for(u=Gn(e.Props),i=0;i<u.length;++i)(Object.prototype.hasOwnProperty.call(f,u[i])?t:Object.prototype.hasOwnProperty.call(g,u[i])?n:a).push([u[i],e.Props[u[i]]]);if(e.Custprops)for(u=Gn(e.Custprops),i=0;i<u.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},u[i])||(Object.prototype.hasOwnProperty.call(f,u[i])?t:Object.prototype.hasOwnProperty.call(g,u[i])?n:a).push([u[i],e.Custprops[u[i]]]);var m=[];for(i=0;i<a.length;++i)lE.indexOf(a[i][0])>-1||Qk.indexOf(a[i][0])>-1||a[i][1]!=null&&m.push(a[i]);n.length&&Wt.utils.cfb_add(r,"/SummaryInformation",j_(n,ud.SI,g,ap)),(t.length||m.length)&&Wt.utils.cfb_add(r,"/DocumentSummaryInformation",j_(t,ud.DSI,f,np,m.length?m:null,ud.UDI))}function rS(e,r){r||(r={}),y2(r),Hp(),r.codepage&&zp(r.codepage);var t,n;if(e.FullPaths){if(Wt.find(e,"/encryption"))throw new Error("File is password-protected");t=Wt.find(e,"!CompObj"),n=Wt.find(e,"/Workbook")||Wt.find(e,"/Book")}else{switch(r.type){case"base64":e=Os(Ms(e));break;case"binary":e=Os(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ra(e,0),n={content:e}}var a,i;if(t&&LP(t),r.bookProps&&!r.bookSheets)a={};else{var u=Sr?"buffer":"array";if(n&&n.content)a=UP(n.content,r);else if((i=Wt.find(e,"PerfectOffice_MAIN"))&&i.content)a=uc.to_workbook(i.content,(r.type=u,r));else if((i=Wt.find(e,"NativeContent_MAIN"))&&i.content)a=uc.to_workbook(i.content,(r.type=u,r));else throw(i=Wt.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");r.bookVBA&&e.FullPaths&&Wt.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=tM(e))}var f={};return e.FullPaths&&zP(e,f,r),a.Props=a.Custprops=f,r.bookFiles&&(a.cfb=e),a}function VP(e,r){var t=r||{},n=Wt.utils.cfb_new({root:"R"}),a="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":a="/Workbook",t.biff=8;break;case"biff5":a="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Wt.utils.cfb_add(n,a,nS(e,t)),t.biff==8&&(e.Props||e.Custprops)&&HP(e,n),t.biff==8&&e.vbaraw&&rM(n,Wt.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Od={0:{f:hL},1:{f:yL},2:{f:UL},3:{f:TL},4:{f:SL},5:{f:LL},6:{f:WL},7:{f:IL},8:{f:JL},9:{f:ZL},10:{f:YL},11:{f:$L},12:{f:kL},13:{f:HL},14:{f:RL},15:{f:NL},16:{f:qE},17:{f:KL},18:{f:ML},19:{f:r2},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:KB},40:{},42:{},43:{f:WD},44:{f:VD},45:{f:qD},46:{f:$D},47:{f:YD},48:{},49:{f:gO},50:{},51:{f:j9},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:bE},62:{f:GL},63:{f:P9},64:{f:xB},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:za,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:uB},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:wL},148:{f:gL,p:16},151:{f:aB},152:{},153:{f:GB},154:{},155:{},156:{f:HB},157:{},158:{},159:{T:1,f:iD},160:{T:-1},161:{T:1,f:Cc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:QL},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:C9},336:{T:-1},337:{f:I9,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:rp},357:{},358:{},359:{},360:{T:1},361:{},362:{f:pE},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:sB},427:{f:iB},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:oB},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:bL},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:rB},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:rp},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:$9},633:{T:1},634:{T:-1},635:{T:1,f:q9},636:{T:-1},637:{f:vO},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:RB},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:mB},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},up={6:{f:xg},10:{f:oo},12:{f:ia},13:{f:ia},14:{f:$n},15:{f:$n},16:{f:Pa},17:{f:$n},18:{f:$n},19:{f:ia},20:{f:F_},21:{f:F_},23:{f:pE},24:{f:B_},25:{f:$n},26:{},27:{},28:{f:mI},29:{},34:{f:$n},35:{f:L_},38:{f:Pa},39:{f:Pa},40:{f:Pa},41:{f:Pa},42:{f:$n},43:{f:$n},47:{f:ND},49:{f:H7},51:{f:ia},60:{},61:{f:L7},64:{f:$n},65:{f:z7},66:{f:ia},77:{},80:{},81:{},82:{},85:{f:ia},89:{},90:{},91:{},92:{f:A7},93:{f:bI},94:{},95:{f:$n},96:{},97:{},99:{f:$n},125:{f:bE},128:{f:nI},129:{f:C7},130:{f:ia},131:{f:$n},132:{f:$n},133:{f:T7},134:{},140:{f:AI},141:{f:ia},144:{},146:{f:TI},151:{},152:{},153:{},154:{},155:{},156:{f:ia},157:{},158:{},160:{f:FI},161:{f:OI},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Q7},190:{f:eI},193:{f:oo},197:{},198:{},199:{},200:{},201:{},202:{f:$n},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ia},220:{},221:{f:$n},222:{},224:{f:rI},225:{f:S7},226:{f:oo},227:{},229:{f:gI},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:R7},253:{f:G7},255:{f:I7},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:oE},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:$n},353:{f:oo},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:oI},431:{f:$n},432:{},433:{},434:{},437:{},438:{f:yI},439:{f:$n},440:{f:_I},441:{},442:{f:Qd},443:{},444:{f:ia},445:{},446:{},448:{f:oo},449:{f:F7,r:2},450:{f:oo},512:{f:I_},513:{f:MI},515:{f:iI},516:{f:X7},517:{f:M_},519:{f:LI},520:{f:D7},523:{},545:{f:P_},549:{f:O_},566:{},574:{f:P7},638:{f:J7},659:{},1048:{},1054:{f:q7},1084:{},1212:{f:fI},2048:{f:EI},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Bh},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:oo},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:jI,r:12},2173:{f:A9,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:$n,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:dI,r:12},2197:{},2198:{f:v9,r:12},2199:{},2200:{},2201:{},2202:{f:hI,r:12},2203:{f:oo},2204:{},2205:{},2206:{},2207:{},2211:{f:M7},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ia},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:II},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:CI},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:I_},1:{},2:{f:HI},3:{f:UI},4:{f:PI},5:{f:M_},7:{f:GI},8:{},9:{f:Bh},11:{},22:{f:ia},30:{f:$7},31:{},32:{},33:{f:P_},36:{},37:{f:O_},50:{f:WI},62:{},52:{},67:{},68:{f:ia},69:{},86:{},126:{},127:{f:BI},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:XI},223:{},234:{},354:{},421:{},518:{f:xg},521:{f:Bh},536:{f:B_},547:{f:L_},561:{},579:{},1030:{f:xg},1033:{f:Bh},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function jt(e,r,t,n){var a=r;if(!isNaN(a)){var i=n||(t||[]).length||0,u=e.next(4);u.write_shift(2,a),u.write_shift(2,i),i>0&&Qp(t)&&e.push(t)}}function GP(e,r,t,n){var a=(t||[]).length||0;if(a<=8224)return jt(e,r,t,a);var i=r;if(!isNaN(i)){for(var u=t.parts||[],f=0,g=0,m=0;m+(u[f]||8224)<=8224;)m+=u[f]||8224,f++;var w=e.next(4);for(w.write_shift(2,i),w.write_shift(2,m),e.push(t.slice(g,g+m)),g+=m;g<a;){for(w=e.next(4),w.write_shift(2,60),m=0;m+(u[f]||8224)<=8224;)m+=u[f]||8224,f++;w.write_shift(2,m),e.push(t.slice(g,g+m)),g+=m}}}function nf(e,r,t){return e||(e=ft(7)),e.write_shift(2,r),e.write_shift(2,t),e.write_shift(2,0),e.write_shift(1,0),e}function WP(e,r,t,n){var a=ft(9);return nf(a,e,r),cE(t,n||"b",a),a}function XP(e,r,t){var n=ft(8+2*t.length);return nf(n,e,r),n.write_shift(1,t.length),n.write_shift(t.length,t,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function KP(e,r,t,n){if(r.v!=null)switch(r.t){case"d":case"n":var a=r.t=="d"?ma(_n(r.v)):r.v;a==(a|0)&&a>=0&&a<65536?jt(e,2,VI(t,n,a)):jt(e,3,zI(t,n,a));return;case"b":case"e":jt(e,5,WP(t,n,r.v,r.t));return;case"s":case"str":jt(e,4,XP(t,n,(r.v||"").slice(0,255)));return}jt(e,1,nf(null,t,n))}function qP(e,r,t,n){var a=Array.isArray(r),i=Ur(r["!ref"]||"A1"),u,f="",g=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(r["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),u=gr(i)}for(var m=i.s.r;m<=i.e.r;++m){f=Zn(m);for(var w=i.s.c;w<=i.e.c;++w){m===i.s.r&&(g[w]=On(w)),u=g[w]+f;var _=a?(r[m]||[])[w]:r[u];_&&KP(e,_,m,w)}}}function YP(e,r){for(var t=r||{},n=us(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==t.sheet&&(a=i);if(a==0&&t.sheet&&e.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return jt(n,t.biff==4?1033:t.biff==3?521:9,c2(e,16,t)),qP(n,e.Sheets[e.SheetNames[a]],a,t),jt(n,10),n.end()}function $P(e,r,t){jt(e,49,V7({sz:12,name:"Arial"},t))}function ZP(e,r,t){r&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)r[a]!=null&&jt(e,1054,Y7(a,r[a],t))})}function JP(e,r){var t=ft(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),jt(e,2151,t),t=ft(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),xE(Ur(r["!ref"]||"A1"),t),t.write_shift(4,4),jt(e,2152,t)}function QP(e,r){for(var t=0;t<16;++t)jt(e,224,D_({numFmtId:0,style:!0},0,r));r.cellXfs.forEach(function(n){jt(e,224,D_(n,0,r))})}function eU(e,r){for(var t=0;t<r["!links"].length;++t){var n=r["!links"][t];jt(e,440,kI(n)),n[1].Tooltip&&jt(e,2048,SI(n))}delete r["!links"]}function tU(e,r){if(r){var t=0;r.forEach(function(n,a){++t<=256&&n&&jt(e,125,RI(V1(a,n),a))})}}function rU(e,r,t,n,a){var i=16+No(a.cellXfs,r,a);if(r.v==null&&!r.bf){jt(e,513,wc(t,n,i));return}if(r.bf)jt(e,6,CF(r,t,n,a,i));else switch(r.t){case"d":case"n":var u=r.t=="d"?ma(_n(r.v)):r.v;jt(e,515,lI(t,n,u,i));break;case"b":case"e":jt(e,517,sI(t,n,r.v,i,a,r.t));break;case"s":case"str":if(a.bookSST){var f=p2(a.Strings,r.v,a.revStrings);jt(e,253,W7(t,n,f,i))}else jt(e,516,K7(t,n,(r.v||"").slice(0,255),i,a));break;default:jt(e,513,wc(t,n,i))}}function nU(e,r,t){var n=us(),a=t.SheetNames[e],i=t.Sheets[a]||{},u=(t||{}).Workbook||{},f=(u.Sheets||[])[e]||{},g=Array.isArray(i),m=r.biff==8,w,_="",E=[],k=Ur(i["!ref"]||"A1"),N=m?65536:16384;if(k.e.c>255||k.e.r>=N){if(r.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");k.e.c=Math.min(k.e.c,255),k.e.r=Math.min(k.e.c,N-1)}jt(n,2057,c2(t,16,r)),jt(n,13,Js(1)),jt(n,12,Js(100)),jt(n,15,Ya(!0)),jt(n,17,Ya(!1)),jt(n,16,pc(.001)),jt(n,95,Ya(!0)),jt(n,42,Ya(!1)),jt(n,43,Ya(!1)),jt(n,130,Js(1)),jt(n,128,aI()),jt(n,131,Ya(!1)),jt(n,132,Ya(!1)),m&&tU(n,i["!cols"]),jt(n,512,Z7(k,r)),m&&(i["!links"]=[]);for(var A=k.s.r;A<=k.e.r;++A){_=Zn(A);for(var C=k.s.c;C<=k.e.c;++C){A===k.s.r&&(E[C]=On(C)),w=E[C]+_;var I=g?(i[A]||[])[C]:i[w];I&&(rU(n,I,A,C,r),m&&I.l&&i["!links"].push([w,I.l]))}}var D=f.CodeName||f.name||a;return m&&jt(n,574,U7((u.Views||[])[0])),m&&(i["!merges"]||[]).length&&jt(n,229,pI(i["!merges"])),m&&eU(n,i),jt(n,442,uE(D)),m&&JP(n,i),jt(n,10),n.end()}function aU(e,r,t){var n=us(),a=(e||{}).Workbook||{},i=a.Sheets||[],u=a.WBProps||{},f=t.biff==8,g=t.biff==5;if(jt(n,2057,c2(e,5,t)),t.bookType=="xla"&&jt(n,135),jt(n,225,f?Js(1200):null),jt(n,193,s7(2)),g&&jt(n,191),g&&jt(n,192),jt(n,226),jt(n,92,N7("SheetJS",t)),jt(n,66,Js(f?1200:1252)),f&&jt(n,353,Js(0)),f&&jt(n,448),jt(n,317,DI(e.SheetNames.length)),f&&e.vbaraw&&jt(n,211),f&&e.vbaraw){var m=u.CodeName||"ThisWorkbook";jt(n,442,uE(m))}jt(n,156,Js(17)),jt(n,25,Ya(!1)),jt(n,18,Ya(!1)),jt(n,19,Js(0)),f&&jt(n,431,Ya(!1)),f&&jt(n,444,Js(0)),jt(n,61,B7()),jt(n,64,Ya(!1)),jt(n,141,Js(0)),jt(n,34,Ya(FB(e)=="true")),jt(n,14,Ya(!0)),f&&jt(n,439,Ya(!1)),jt(n,218,Js(0)),$P(n,e,t),ZP(n,e.SSF,t),QP(n,t),f&&jt(n,352,Ya(!1));var w=n.end(),_=us();f&&jt(_,140,NI()),f&&t.Strings&&GP(_,252,O7(t.Strings)),jt(_,10);var E=_.end(),k=us(),N=0,A=0;for(A=0;A<e.SheetNames.length;++A)N+=(f?12:11)+(f?2:1)*e.SheetNames[A].length;var C=w.length+N+E.length;for(A=0;A<e.SheetNames.length;++A){var I=i[A]||{};jt(k,133,j7({pos:C,hs:I.Hidden||0,dt:0,name:e.SheetNames[A]},t)),C+=r[A].length}var D=k.end();if(N!=D.length)throw new Error("BS8 "+N+" != "+D.length);var O=[];return w.length&&O.push(w),D.length&&O.push(D),E.length&&O.push(E),va(O)}function sU(e,r){var t=r||{},n=[];e&&!e.SSF&&(e.SSF=kn(er)),e&&e.SSF&&(q0(),F1(e.SSF),t.revssf=B1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,_2(t),t.cellXfs=[],No(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=nU(a,t,e);return n.unshift(aU(e,n,t)),va(n)}function nS(e,r){for(var t=0;t<=e.SheetNames.length;++t){var n=e.Sheets[e.SheetNames[t]];if(!(!n||!n["!ref"])){var a=ds(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var i=r||{};switch(i.biff||2){case 8:case 5:return sU(e,r);case 4:case 3:case 2:return YP(e,r)}throw new Error("invalid type "+i.bookType+" for BIFF")}function Y_(e,r){var t=r||{},n=t.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),u=a.index,f=i&&i.index||e.length,g=VR(e.slice(u,f),/(:?<tr[^>]*>)/i,"<tr>"),m=-1,w=0,_=0,E=0,k={s:{r:1e7,c:1e7},e:{r:0,c:0}},N=[];for(u=0;u<g.length;++u){var A=g[u].trim(),C=A.slice(0,3).toLowerCase();if(C=="<tr"){if(++m,t.sheetRows&&t.sheetRows<=m){--m;break}w=0;continue}if(!(C!="<td"&&C!="<th")){var I=A.split(/<\/t[dh]>/i);for(f=0;f<I.length;++f){var D=I[f].trim();if(D.match(/<t[dh]/i)){for(var O=D,B=0;O.charAt(0)=="<"&&(B=O.indexOf(">"))>-1;)O=O.slice(B+1);for(var U=0;U<N.length;++U){var X=N[U];X.s.c==w&&X.s.r<m&&m<=X.e.r&&(w=X.e.c+1,U=-1)}var F=rr(D.slice(0,D.indexOf(">")));E=F.colspan?+F.colspan:1,((_=+F.rowspan)>1||E>1)&&N.push({s:{r:m,c:w},e:{r:m+(_||1)-1,c:w+E-1}});var Y=F.t||F["data-t"]||"";if(!O.length){w+=E;continue}if(O=Nk(O),k.s.r>m&&(k.s.r=m),k.e.r<m&&(k.e.r=m),k.s.c>w&&(k.s.c=w),k.e.c<w&&(k.e.c=w),!O.length){w+=E;continue}var H={t:"s",v:O};t.raw||!O.trim().length||Y=="s"||(O==="TRUE"?H={t:"b",v:!0}:O==="FALSE"?H={t:"b",v:!1}:isNaN(wi(O))?isNaN(F0(O).getDate())||(H={t:"d",v:_n(O)},t.cellDates||(H={t:"n",v:ma(H.v)}),H.z=t.dateNF||er[14]):H={t:"n",v:wi(O)}),t.dense?(n[m]||(n[m]=[]),n[m][w]=H):n[tr({r:m,c:w})]=H,w+=E}}}}return n["!ref"]=gr(k),N.length&&(n["!merges"]=N),n}function iU(e,r,t,n){for(var a=e["!merges"]||[],i=[],u=r.s.c;u<=r.e.c;++u){for(var f=0,g=0,m=0;m<a.length;++m)if(!(a[m].s.r>t||a[m].s.c>u)&&!(a[m].e.r<t||a[m].e.c<u)){if(a[m].s.r<t||a[m].s.c<u){f=-1;break}f=a[m].e.r-a[m].s.r+1,g=a[m].e.c-a[m].s.c+1;break}if(!(f<0)){var w=tr({r:t,c:u}),_=n.dense?(e[t]||[])[u]:e[w],E=_&&_.v!=null&&(_.h||$p(_.w||(Sl(_),_.w)||""))||"",k={};f>1&&(k.rowspan=f),g>1&&(k.colspan=g),n.editable?E='<span contenteditable="true">'+E+"</span>":_&&(k["data-t"]=_&&_.t||"z",_.v!=null&&(k["data-v"]=_.v),_.z!=null&&(k["data-z"]=_.z),_.l&&(_.l.Target||"#").charAt(0)!="#"&&(E='<a href="'+_.l.Target+'">'+E+"</a>")),k.id=(n.id||"sjs")+"-"+w,i.push(Tt("td",E,k))}}var N="<tr>";return N+i.join("")+"</tr>"}var lU='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',oU="</body></html>";function cU(e,r){var t=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!t||t.length==0)throw new Error("Invalid HTML: could not find <table>");if(t.length==1)return Ao(Y_(t[0],r),r);var n=S2();return t.forEach(function(a,i){A2(n,Y_(a,r),"Sheet"+(i+1))}),n}function uU(e,r,t){var n=[];return n.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function aS(e,r){var t=r||{},n=t.header!=null?t.header:lU,a=t.footer!=null?t.footer:oU,i=[n],u=ds(e["!ref"]);t.dense=Array.isArray(e),i.push(uU(e,u,t));for(var f=u.s.r;f<=u.e.r;++f)i.push(iU(e,u,f,t));return i.push("</table>"+a),i.join("")}function sS(e,r,t){var n=t||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var u=typeof n.origin=="string"?In(n.origin):n.origin;a=u.r,i=u.c}var f=r.getElementsByTagName("tr"),g=Math.min(n.sheetRows||1e7,f.length),m={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var w=ds(e["!ref"]);m.s.r=Math.min(m.s.r,w.s.r),m.s.c=Math.min(m.s.c,w.s.c),m.e.r=Math.max(m.e.r,w.e.r),m.e.c=Math.max(m.e.c,w.e.c),a==-1&&(m.e.r=a=w.e.r+1)}var _=[],E=0,k=e["!rows"]||(e["!rows"]=[]),N=0,A=0,C=0,I=0,D=0,O=0;for(e["!cols"]||(e["!cols"]=[]);N<f.length&&A<g;++N){var B=f[N];if($_(B)){if(n.display)continue;k[A]={hidden:!0}}var U=B.children;for(C=I=0;C<U.length;++C){var X=U[C];if(!(n.display&&$_(X))){var F=X.hasAttribute("data-v")?X.getAttribute("data-v"):X.hasAttribute("v")?X.getAttribute("v"):Nk(X.innerHTML),Y=X.getAttribute("data-z")||X.getAttribute("z");for(E=0;E<_.length;++E){var H=_[E];H.s.c==I+i&&H.s.r<A+a&&A+a<=H.e.r&&(I=H.e.c+1-i,E=-1)}O=+X.getAttribute("colspan")||1,((D=+X.getAttribute("rowspan")||1)>1||O>1)&&_.push({s:{r:A+a,c:I+i},e:{r:A+a+(D||1)-1,c:I+i+(O||1)-1}});var ce={t:"s",v:F},J=X.getAttribute("data-t")||X.getAttribute("t")||"";F!=null&&(F.length==0?ce.t=J||"z":n.raw||F.trim().length==0||J=="s"||(F==="TRUE"?ce={t:"b",v:!0}:F==="FALSE"?ce={t:"b",v:!1}:isNaN(wi(F))?isNaN(F0(F).getDate())||(ce={t:"d",v:_n(F)},n.cellDates||(ce={t:"n",v:ma(ce.v)}),ce.z=n.dateNF||er[14]):ce={t:"n",v:wi(F)})),ce.z===void 0&&Y!=null&&(ce.z=Y);var V="",xe=X.getElementsByTagName("A");if(xe&&xe.length)for(var W=0;W<xe.length&&!(xe[W].hasAttribute("href")&&(V=xe[W].getAttribute("href"),V.charAt(0)!="#"));++W);V&&V.charAt(0)!="#"&&(ce.l={Target:V}),n.dense?(e[A+a]||(e[A+a]=[]),e[A+a][I+i]=ce):e[tr({c:I+i,r:A+a})]=ce,m.e.c<I+i&&(m.e.c=I+i),I+=O}}++A}return _.length&&(e["!merges"]=(e["!merges"]||[]).concat(_)),m.e.r=Math.max(m.e.r,A-1+a),e["!ref"]=gr(m),A>=g&&(e["!fullref"]=gr((m.e.r=f.length-N+A-1+a,m))),e}function iS(e,r){var t=r||{},n=t.dense?[]:{};return sS(n,e,r)}function dU(e,r){return Ao(iS(e,r),r)}function $_(e){var r="",t=fU(e);return t&&(r=t(e).getPropertyValue("display")),r||(r=e.style&&e.style.display),r==="none"}function fU(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function hU(e){var r=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),t=Pr(r.replace(/<[^>]*>/g,""));return[t]}var Z_={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function lS(e,r){var t=r||{},n=Zp(e),a=[],i,u,f={name:""},g="",m=0,w,_,E={},k=[],N=t.dense?[]:{},A,C,I={value:""},D="",O=0,B=[],U=-1,X=-1,F={s:{r:1e6,c:1e7},e:{r:0,c:0}},Y=0,H={},ce=[],J={},V=0,xe=0,W=[],ne=1,be=1,fe=[],Ve={Names:[]},ge={},We=["",""],re=[],L={},q="",P=0,Z=!1,pe=!1,Le=0;for(Ad.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");A=Ad.exec(n);)switch(A[3]=A[3].replace(/_.*$/,"")){case"table":case"":A[1]==="/"?(F.e.c>=F.s.c&&F.e.r>=F.s.r?N["!ref"]=gr(F):N["!ref"]="A1:A1",t.sheetRows>0&&t.sheetRows<=F.e.r&&(N["!fullref"]=N["!ref"],F.e.r=t.sheetRows-1,N["!ref"]=gr(F)),ce.length&&(N["!merges"]=ce),W.length&&(N["!rows"]=W),w.name=w.||w.name,typeof JSON<"u"&&JSON.stringify(w),k.push(w.name),E[w.name]=N,pe=!1):A[0].charAt(A[0].length-2)!=="/"&&(w=rr(A[0],!1),U=X=-1,F.s.r=F.s.c=1e7,F.e.r=F.e.c=0,N=t.dense?[]:{},ce=[],W=[],pe=!0);break;case"table-row-group":A[1]==="/"?--Y:++Y;break;case"table-row":case"":if(A[1]==="/"){U+=ne,ne=1;break}if(_=rr(A[0],!1),_.?U=_.-1:U==-1&&(U=0),ne=+_["number-rows-repeated"]||1,ne<10)for(Le=0;Le<ne;++Le)Y>0&&(W[U+Le]={level:Y});X=-1;break;case"covered-table-cell":A[1]!=="/"&&++X,t.sheetStubs&&(t.dense?(N[U]||(N[U]=[]),N[U][X]={t:"z"}):N[tr({r:U,c:X})]={t:"z"}),D="",B=[];break;case"table-cell":case"":if(A[0].charAt(A[0].length-2)==="/")++X,I=rr(A[0],!1),be=parseInt(I["number-columns-repeated"]||"1",10),C={t:"z",v:null},I.formula&&t.cellFormula!=!1&&(C.f=X_(Pr(I.formula))),(I.||I["value-type"])=="string"&&(C.t="s",C.v=Pr(I["string-value"]||""),t.dense?(N[U]||(N[U]=[]),N[U][X]=C):N[tr({r:U,c:X})]=C),X+=be-1;else if(A[1]!=="/"){++X,D="",O=0,B=[],be=1;var Be=ne?U+ne-1:U;if(X>F.e.c&&(F.e.c=X),X<F.s.c&&(F.s.c=X),U<F.s.r&&(F.s.r=U),Be>F.e.r&&(F.e.r=Be),I=rr(A[0],!1),re=[],L={},C={t:I.||I["value-type"],v:null},t.cellFormula)if(I.formula&&(I.formula=Pr(I.formula)),I["number-matrix-columns-spanned"]&&I["number-matrix-rows-spanned"]&&(V=parseInt(I["number-matrix-rows-spanned"],10)||0,xe=parseInt(I["number-matrix-columns-spanned"],10)||0,J={s:{r:U,c:X},e:{r:U+V-1,c:X+xe-1}},C.F=gr(J),fe.push([J,C.F])),I.formula)C.f=X_(I.formula);else for(Le=0;Le<fe.length;++Le)U>=fe[Le][0].s.r&&U<=fe[Le][0].e.r&&X>=fe[Le][0].s.c&&X<=fe[Le][0].e.c&&(C.F=fe[Le][1]);switch((I["number-columns-spanned"]||I["number-rows-spanned"])&&(V=parseInt(I["number-rows-spanned"],10)||0,xe=parseInt(I["number-columns-spanned"],10)||0,J={s:{r:U,c:X},e:{r:U+V-1,c:X+xe-1}},ce.push(J)),I["number-columns-repeated"]&&(be=parseInt(I["number-columns-repeated"],10)),C.t){case"boolean":C.t="b",C.v=vn(I["boolean-value"]);break;case"float":C.t="n",C.v=parseFloat(I.value);break;case"percentage":C.t="n",C.v=parseFloat(I.value);break;case"currency":C.t="n",C.v=parseFloat(I.value);break;case"date":C.t="d",C.v=_n(I["date-value"]),t.cellDates||(C.t="n",C.v=ma(C.v)),C.z="m/d/yy";break;case"time":C.t="n",C.v=UR(I["time-value"])/86400,t.cellDates&&(C.t="d",C.v=P1(C.v)),C.z="HH:MM:SS";break;case"number":C.t="n",C.v=parseFloat(I.);break;default:if(C.t==="string"||C.t==="text"||!C.t)C.t="s",I["string-value"]!=null&&(D=Pr(I["string-value"]),B=[]);else throw new Error("Unsupported value type "+C.t)}}else{if(Z=!1,C.t==="s"&&(C.v=D||"",B.length&&(C.R=B),Z=O==0),ge.Target&&(C.l=ge),re.length>0&&(C.c=re,re=[]),D&&t.cellText!==!1&&(C.w=D),Z&&(C.t="z",delete C.v),(!Z||t.sheetStubs)&&!(t.sheetRows&&t.sheetRows<=U))for(var Pe=0;Pe<ne;++Pe){if(be=parseInt(I["number-columns-repeated"]||"1",10),t.dense)for(N[U+Pe]||(N[U+Pe]=[]),N[U+Pe][X]=Pe==0?C:kn(C);--be>0;)N[U+Pe][X+be]=kn(C);else for(N[tr({r:U+Pe,c:X})]=C;--be>0;)N[tr({r:U+Pe,c:X+be})]=kn(C);F.e.c<=X&&(F.e.c=X)}be=parseInt(I["number-columns-repeated"]||"1",10),X+=be-1,be=0,C={},D="",B=[]}ge={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(A[1]==="/"){if((i=a.pop())[0]!==A[3])throw"Bad state: "+i}else A[0].charAt(A[0].length-2)!=="/"&&a.push([A[3],!0]);break;case"annotation":if(A[1]==="/"){if((i=a.pop())[0]!==A[3])throw"Bad state: "+i;L.t=D,B.length&&(L.R=B),L.a=q,re.push(L)}else A[0].charAt(A[0].length-2)!=="/"&&a.push([A[3],!1]);q="",P=0,D="",O=0,B=[];break;case"creator":A[1]==="/"?q=n.slice(P,A.index):P=A.index+A[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(A[1]==="/"){if((i=a.pop())[0]!==A[3])throw"Bad state: "+i}else A[0].charAt(A[0].length-2)!=="/"&&a.push([A[3],!1]);D="",O=0,B=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(A[1]==="/"){if(H[f.name]=g,(i=a.pop())[0]!==A[3])throw"Bad state: "+i}else A[0].charAt(A[0].length-2)!=="/"&&(g="",f=rr(A[0],!1),a.push([A[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":u=rr(A[0],!1),g+=Z_[A[3]][u.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":u=rr(A[0],!1),g+=Z_[A[3]][u.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(A[0].slice(-2)==="/>")break;if(A[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":g+=n.slice(m,A.index);break}else m=A.index+A[0].length;break;case"named-range":u=rr(A[0],!1),We=mg(u["cell-range-address"]);var et={Name:u.name,Ref:We[0]+"!"+We[1]};pe&&(et.Sheet=k.length),Ve.Names.push(et);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(A[1]==="/"&&(!I||!I["string-value"])){var ut=hU(n.slice(O,A.index));D=(D.length>0?D+`
`:"")+ut[0]}else rr(A[0],!1),O=A.index+A[0].length;break;case"s":break;case"database-range":if(A[1]==="/")break;try{We=mg(rr(A[0])["target-range-address"]),E[We[0]]["!autofilter"]={ref:We[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(A[1]!=="/"){if(ge=rr(A[0],!1),!ge.href)break;ge.Target=Pr(ge.href),delete ge.href,ge.Target.charAt(0)=="#"&&ge.Target.indexOf(".")>-1?(We=mg(ge.Target.slice(1)),ge.Target="#"+We[0]+"!"+We[1]):ge.Target.match(/^\.\.[\\\/]/)&&(ge.Target=ge.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(A[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(t.WTF)throw new Error(A)}}var ve={Sheets:E,SheetNames:k,Workbook:Ve};return t.bookSheets&&delete ve.Sheets,ve}function J_(e,r){r=r||{},Zs(e,"META-INF/manifest.xml")&&UO(sa(e,"META-INF/manifest.xml"),r);var t=Is(e,"content.xml");if(!t)throw new Error("Missing content.xml in ODS / UOF file");var n=lS(cn(t),r);return Zs(e,"meta.xml")&&(n.Props=Zk(sa(e,"meta.xml"))),n}function Q_(e,r){return lS(e,r)}var xU=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),r="<office:document-styles "+Sd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Jn+r}})(),e4=(function(){var e=function(i){return an(i).replace(/  +/g,function(u){return'<text:s text:c="'+u.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},r=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,n=function(i,u,f){var g=[];g.push('      <table:table table:name="'+an(u.SheetNames[f])+`" table:style-name="ta1">
`);var m=0,w=0,_=ds(i["!ref"]||"A1"),E=i["!merges"]||[],k=0,N=Array.isArray(i);if(i["!cols"])for(w=0;w<=_.e.c;++w)g.push("        <table:table-column"+(i["!cols"][w]?' table:style-name="co'+i["!cols"][w].ods+'"':"")+`></table:table-column>
`);var A="",C=i["!rows"]||[];for(m=0;m<_.s.r;++m)A=C[m]?' table:style-name="ro'+C[m].ods+'"':"",g.push("        <table:table-row"+A+`></table:table-row>
`);for(;m<=_.e.r;++m){for(A=C[m]?' table:style-name="ro'+C[m].ods+'"':"",g.push("        <table:table-row"+A+`>
`),w=0;w<_.s.c;++w)g.push(r);for(;w<=_.e.c;++w){var I=!1,D={},O="";for(k=0;k!=E.length;++k)if(!(E[k].s.c>w)&&!(E[k].s.r>m)&&!(E[k].e.c<w)&&!(E[k].e.r<m)){(E[k].s.c!=w||E[k].s.r!=m)&&(I=!0),D["table:number-columns-spanned"]=E[k].e.c-E[k].s.c+1,D["table:number-rows-spanned"]=E[k].e.r-E[k].s.r+1;break}if(I){g.push(t);continue}var B=tr({r:m,c:w}),U=N?(i[m]||[])[w]:i[B];if(U&&U.f&&(D["table:formula"]=an(DF(U.f)),U.F&&U.F.slice(0,B.length)==B)){var X=ds(U.F);D["table:number-matrix-columns-spanned"]=X.e.c-X.s.c+1,D["table:number-matrix-rows-spanned"]=X.e.r-X.s.r+1}if(!U){g.push(r);continue}switch(U.t){case"b":O=U.v?"TRUE":"FALSE",D["office:value-type"]="boolean",D["office:boolean-value"]=U.v?"true":"false";break;case"n":O=U.w||String(U.v||0),D["office:value-type"]="float",D["office:value"]=U.v||0;break;case"s":case"str":O=U.v==null?"":U.v,D["office:value-type"]="string";break;case"d":O=U.w||_n(U.v).toISOString(),D["office:value-type"]="date",D["office:date-value"]=_n(U.v).toISOString(),D["table:style-name"]="ce1";break;default:g.push(r);continue}var F=e(O);if(U.l&&U.l.Target){var Y=U.l.Target;Y=Y.charAt(0)=="#"?"#"+MF(Y.slice(1)):Y,Y.charAt(0)!="#"&&!Y.match(/^\w+:/)&&(Y="../"+Y),F=Tt("text:a",F,{"xlink:href":Y.replace(/&/g,"&amp;")})}g.push("          "+Tt("table:table-cell",Tt("text:p",F,{}),D)+`
`)}g.push(`        </table:table-row>
`)}return g.push(`      </table:table>
`),g.join("")},a=function(i,u){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var f=0;u.SheetNames.map(function(m){return u.Sheets[m]}).forEach(function(m){if(m&&m["!cols"]){for(var w=0;w<m["!cols"].length;++w)if(m["!cols"][w]){var _=m["!cols"][w];if(_.width==null&&_.wpx==null&&_.wch==null)continue;_o(_),_.ods=f;var E=m["!cols"][w].wpx+"px";i.push('  <style:style style:name="co'+f+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+E+`"/>
`),i.push(`  </style:style>
`),++f}}});var g=0;u.SheetNames.map(function(m){return u.Sheets[m]}).forEach(function(m){if(m&&m["!rows"]){for(var w=0;w<m["!rows"].length;++w)if(m["!rows"][w]){m["!rows"][w].ods=g;var _=m["!rows"][w].hpx+"px";i.push('  <style:style style:name="ro'+g+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+_+`"/>
`),i.push(`  </style:style>
`),++g}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(u,f){var g=[Jn],m=Sd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),w=Sd({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});f.bookType=="fods"?(g.push("<office:document"+m+w+`>
`),g.push($k().replace(/office:document-meta/g,"office:meta"))):g.push("<office:document-content"+m+`>
`),a(g,u),g.push(`  <office:body>
`),g.push(`    <office:spreadsheet>
`);for(var _=0;_!=u.SheetNames.length;++_)g.push(n(u.Sheets[u.SheetNames[_]],u,_));return g.push(`    </office:spreadsheet>
`),g.push(`  </office:body>
`),f.bookType=="fods"?g.push("</office:document>"):g.push("</office:document-content>"),g.join("")}})();function oS(e,r){if(r.bookType=="fods")return e4(e,r);var t=Kp(),n="",a=[],i=[];return n="mimetype",yr(t,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",yr(t,n,e4(e,r)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",yr(t,n,xU(e,r)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",yr(t,n,Jn+$k()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",yr(t,n,VO(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",yr(t,n,zO(a)),t}function vc(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function dp(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):cn(So(e))}function mU(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Os(Pi(e))}function gU(e,r){e:for(var t=0;t<=e.length-r.length;++t){for(var n=0;n<r.length;++n)if(e[t+n]!=r[n])continue e;return!0}return!1}function Eo(e){var r=e.reduce(function(a,i){return a+i.length},0),t=new Uint8Array(r),n=0;return e.forEach(function(a){t.set(a,n),n+=a.length}),t}function t4(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function pU(e,r){for(var t=(e[r+15]&127)<<7|e[r+14]>>1,n=e[r+14]&1,a=r+13;a>=r;--a)n=n*256+e[a];return(e[r+15]&128?-n:n)*Math.pow(10,t-6176)}function bU(e,r,t){var n=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,a=t/Math.pow(10,n-6176);e[r+15]|=n>>7,e[r+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[r+i]=a&255;e[r+15]|=t>=0?0:128}function Id(e,r){var t=r?r[0]:0,n=e[t]&127;e:if(e[t++]>=128&&(n|=(e[t]&127)<<7,e[t++]<128||(n|=(e[t]&127)<<14,e[t++]<128)||(n|=(e[t]&127)<<21,e[t++]<128)||(n+=(e[t]&127)*Math.pow(2,28),++t,e[t++]<128)||(n+=(e[t]&127)*Math.pow(2,35),++t,e[t++]<128)||(n+=(e[t]&127)*Math.pow(2,42),++t,e[t++]<128)))break e;return r&&(r[0]=t),n}function rn(e){var r=new Uint8Array(7);r[0]=e&127;var t=1;e:if(e>127){if(r[t-1]|=128,r[t]=e>>7&127,++t,e<=16383||(r[t-1]|=128,r[t]=e>>14&127,++t,e<=2097151)||(r[t-1]|=128,r[t]=e>>21&127,++t,e<=268435455)||(r[t-1]|=128,r[t]=e/256>>>21&127,++t,e<=34359738367)||(r[t-1]|=128,r[t]=e/65536>>>21&127,++t,e<=4398046511103))break e;r[t-1]|=128,r[t]=e/16777216>>>21&127,++t}return r.slice(0,t)}function Vn(e){var r=0,t=e[r]&127;e:if(e[r++]>=128){if(t|=(e[r]&127)<<7,e[r++]<128||(t|=(e[r]&127)<<14,e[r++]<128)||(t|=(e[r]&127)<<21,e[r++]<128))break e;t|=(e[r]&127)<<28}return t}function Gr(e){for(var r=[],t=[0];t[0]<e.length;){var n=t[0],a=Id(e,t),i=a&7;a=Math.floor(a/8);var u=0,f;if(a==0)break;switch(i){case 0:{for(var g=t[0];e[t[0]++]>=128;);f=e.slice(g,t[0])}break;case 5:u=4,f=e.slice(t[0],t[0]+u),t[0]+=u;break;case 1:u=8,f=e.slice(t[0],t[0]+u),t[0]+=u;break;case 2:u=Id(e,t),f=e.slice(t[0],t[0]+u),t[0]+=u;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var m={data:f,type:i};r[a]==null?r[a]=[m]:r[a].push(m)}return r}function Ta(e){var r=[];return e.forEach(function(t,n){t.forEach(function(a){a.data&&(r.push(rn(n*8+a.type)),a.type==2&&r.push(rn(a.data.length)),r.push(a.data))})}),Eo(r)}function v2(e,r){return e?.map(function(t){return r(t.data)})||[]}function Ys(e){for(var r,t=[],n=[0];n[0]<e.length;){var a=Id(e,n),i=Gr(e.slice(n[0],n[0]+a));n[0]+=a;var u={id:Vn(i[1][0].data),messages:[]};i[2].forEach(function(f){var g=Gr(f.data),m=Vn(g[3][0].data);u.messages.push({meta:g,data:e.slice(n[0],n[0]+m)}),n[0]+=m}),(r=i[3])!=null&&r[0]&&(u.merge=Vn(i[3][0].data)>>>0>0),t.push(u)}return t}function b0(e){var r=[];return e.forEach(function(t){var n=[];n[1]=[{data:rn(t.id),type:0}],n[2]=[],t.merge!=null&&(n[3]=[{data:rn(+!!t.merge),type:0}]);var a=[];t.messages.forEach(function(u){a.push(u.data),u.meta[3]=[{type:0,data:rn(u.data.length)}],n[2].push({data:Ta(u.meta),type:2})});var i=Ta(n);r.push(rn(i.length)),r.push(i),a.forEach(function(u){return r.push(u)})}),Eo(r)}function wU(e,r){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var t=[0],n=Id(r,t),a=[];t[0]<r.length;){var i=r[t[0]]&3;if(i==0){var u=r[t[0]++]>>2;if(u<60)++u;else{var f=u-59;u=r[t[0]],f>1&&(u|=r[t[0]+1]<<8),f>2&&(u|=r[t[0]+2]<<16),f>3&&(u|=r[t[0]+3]<<24),u>>>=0,u++,t[0]+=f}a.push(r.slice(t[0],t[0]+u)),t[0]+=u;continue}else{var g=0,m=0;if(i==1?(m=(r[t[0]]>>2&7)+4,g=(r[t[0]++]&224)<<3,g|=r[t[0]++]):(m=(r[t[0]++]>>2)+1,i==2?(g=r[t[0]]|r[t[0]+1]<<8,t[0]+=2):(g=(r[t[0]]|r[t[0]+1]<<8|r[t[0]+2]<<16|r[t[0]+3]<<24)>>>0,t[0]+=4)),a=[Eo(a)],g==0)throw new Error("Invalid offset 0");if(g>a[0].length)throw new Error("Invalid offset beyond length");if(m>=g)for(a.push(a[0].slice(-g)),m-=g;m>=a[a.length-1].length;)a.push(a[a.length-1]),m-=a[a.length-1].length;a.push(a[0].slice(-g,-g+m))}}var w=Eo(a);if(w.length!=n)throw new Error("Unexpected length: ".concat(w.length," != ").concat(n));return w}function $s(e){for(var r=[],t=0;t<e.length;){var n=e[t++],a=e[t]|e[t+1]<<8|e[t+2]<<16;t+=3,r.push(wU(n,e.slice(t,t+a))),t+=a}if(t!==e.length)throw new Error("data is not a valid framed stream!");return Eo(r)}function w0(e){for(var r=[],t=0;t<e.length;){var n=Math.min(e.length-t,268435455),a=new Uint8Array(4);r.push(a);var i=rn(n),u=i.length;r.push(i),n<=60?(u++,r.push(new Uint8Array([n-1<<2]))):n<=256?(u+=2,r.push(new Uint8Array([240,n-1&255]))):n<=65536?(u+=3,r.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(u+=4,r.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(u+=5,r.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),r.push(e.slice(t,t+n)),u+=n,a[0]=0,a[1]=u&255,a[2]=u>>8&255,a[3]=u>>16&255,t+=n}return Eo(r)}function vU(e,r,t,n){var a=vc(e),i=a.getUint32(4,!0),u=(n>1?12:8)+t4(i&(n>1?3470:398))*4,f=-1,g=-1,m=NaN,w=new Date(2001,0,1);i&512&&(f=a.getUint32(u,!0),u+=4),u+=t4(i&(n>1?12288:4096))*4,i&16&&(g=a.getUint32(u,!0),u+=4),i&32&&(m=a.getFloat64(u,!0),u+=8),i&64&&(w.setTime(w.getTime()+a.getFloat64(u,!0)*1e3),u+=8);var _;switch(e[2]){case 0:break;case 2:_={t:"n",v:m};break;case 3:_={t:"s",v:r[g]};break;case 5:_={t:"d",v:w};break;case 6:_={t:"b",v:m>0};break;case 7:_={t:"n",v:m/86400};break;case 8:_={t:"e",v:0};break;case 9:if(f>-1)_={t:"s",v:t[f]};else if(g>-1)_={t:"s",v:r[g]};else if(!isNaN(m))_={t:"n",v:m};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return _}function yU(e,r,t){var n=vc(e),a=n.getUint32(8,!0),i=12,u=-1,f=-1,g=NaN,m=NaN,w=new Date(2001,0,1);a&1&&(g=pU(e,i),i+=16),a&2&&(m=n.getFloat64(i,!0),i+=8),a&4&&(w.setTime(w.getTime()+n.getFloat64(i,!0)*1e3),i+=8),a&8&&(f=n.getUint32(i,!0),i+=4),a&16&&(u=n.getUint32(i,!0),i+=4);var _;switch(e[1]){case 0:break;case 2:_={t:"n",v:g};break;case 3:_={t:"s",v:r[f]};break;case 5:_={t:"d",v:w};break;case 6:_={t:"b",v:m>0};break;case 7:_={t:"n",v:m/86400};break;case 8:_={t:"e",v:0};break;case 9:if(u>-1)_={t:"s",v:t[u]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:_={t:"n",v:g};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return _}function pg(e,r){var t=new Uint8Array(32),n=vc(t),a=12,i=0;switch(t[0]=5,e.t){case"n":t[1]=2,bU(t,a,e.v),i|=1,a+=16;break;case"b":t[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(r.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));t[1]=3,n.setUint32(a,r.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),t.slice(0,a)}function bg(e,r){var t=new Uint8Array(32),n=vc(t),a=12,i=0;switch(t[0]=3,e.t){case"n":t[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":t[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(r.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));t[2]=3,n.setUint32(a,r.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),t.slice(0,a)}function _U(e,r,t){switch(e[0]){case 0:case 1:case 2:case 3:return vU(e,r,t,e[0]);case 5:return yU(e,r,t);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Ma(e){var r=Gr(e);return Id(r[1][0].data)}function r4(e,r){var t=Gr(r.data),n=Vn(t[1][0].data),a=t[3],i=[];return(a||[]).forEach(function(u){var f=Gr(u.data),g=Vn(f[1][0].data)>>>0;switch(n){case 1:i[g]=dp(f[3][0].data);break;case 8:{var m=e[Ma(f[9][0].data)][0],w=Gr(m.data),_=e[Ma(w[1][0].data)][0],E=Vn(_.meta[1][0].data);if(E!=2001)throw new Error("2000 unexpected reference to ".concat(E));var k=Gr(_.data);i[g]=k[3].map(function(N){return dp(N.data)}).join("")}break}}),i}function kU(e,r){var t,n,a,i,u,f,g,m,w,_,E,k,N,A,C=Gr(e),I=Vn(C[1][0].data)>>>0,D=Vn(C[2][0].data)>>>0,O=((n=(t=C[8])==null?void 0:t[0])==null?void 0:n.data)&&Vn(C[8][0].data)>0||!1,B,U;if((i=(a=C[7])==null?void 0:a[0])!=null&&i.data&&r!=0)B=(f=(u=C[7])==null?void 0:u[0])==null?void 0:f.data,U=(m=(g=C[6])==null?void 0:g[0])==null?void 0:m.data;else if((_=(w=C[4])==null?void 0:w[0])!=null&&_.data&&r!=1)B=(k=(E=C[4])==null?void 0:E[0])==null?void 0:k.data,U=(A=(N=C[3])==null?void 0:N[0])==null?void 0:A.data;else throw"NUMBERS Tile missing ".concat(r," cell storage");for(var X=O?4:1,F=vc(B),Y=[],H=0;H<B.length/2;++H){var ce=F.getUint16(H*2,!0);ce<65535&&Y.push([H,ce])}if(Y.length!=D)throw"Expected ".concat(D," cells, found ").concat(Y.length);var J=[];for(H=0;H<Y.length-1;++H)J[Y[H][0]]=U.subarray(Y[H][1]*X,Y[H+1][1]*X);return Y.length>=1&&(J[Y[Y.length-1][0]]=U.subarray(Y[Y.length-1][1]*X)),{R:I,cells:J}}function EU(e,r){var t,n=Gr(r.data),a=(t=n?.[7])!=null&&t[0]?Vn(n[7][0].data)>>>0>0?1:0:-1,i=v2(n[5],function(u){return kU(u,a)});return{nrows:Vn(n[4][0].data)>>>0,data:i.reduce(function(u,f){return u[f.R]||(u[f.R]=[]),f.cells.forEach(function(g,m){if(u[f.R][m])throw new Error("Duplicate cell r=".concat(f.R," c=").concat(m));u[f.R][m]=g}),u},[])}}function SU(e,r,t){var n,a=Gr(r.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Vn(a[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(i.e.c=(Vn(a[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));t["!ref"]=gr(i);var u=Gr(a[4][0].data),f=r4(e,e[Ma(u[4][0].data)][0]),g=(n=u[17])!=null&&n[0]?r4(e,e[Ma(u[17][0].data)][0]):[],m=Gr(u[3][0].data),w=0;m[1].forEach(function(_){var E=Gr(_.data),k=e[Ma(E[2][0].data)][0],N=Vn(k.meta[1][0].data);if(N!=6002)throw new Error("6001 unexpected reference to ".concat(N));var A=EU(e,k);A.data.forEach(function(C,I){C.forEach(function(D,O){var B=tr({r:w+I,c:O}),U=_U(D,f,g);U&&(t[B]=U)})}),w+=A.nrows})}function AU(e,r){var t=Gr(r.data),n={"!ref":"A1"},a=e[Ma(t[2][0].data)],i=Vn(a[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return SU(e,a[0],n),n}function NU(e,r){var t,n=Gr(r.data),a={name:(t=n[1])!=null&&t[0]?dp(n[1][0].data):"",sheets:[]},i=v2(n[2],Ma);return i.forEach(function(u){e[u].forEach(function(f){var g=Vn(f.meta[1][0].data);g==6e3&&a.sheets.push(AU(e,f))})}),a}function CU(e,r){var t=S2(),n=Gr(r.data),a=v2(n[1],Ma);if(a.forEach(function(i){e[i].forEach(function(u){var f=Vn(u.meta[1][0].data);if(f==2){var g=NU(e,u);g.sheets.forEach(function(m,w){A2(t,m,w==0?g.name:g.name+"_"+w,!0)})}})}),t.SheetNames.length==0)throw new Error("Empty NUMBERS file");return t}function wg(e){var r,t,n,a,i={},u=[];if(e.FullPaths.forEach(function(g){if(g.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(g){if(g.name.match(/\.iwa$/)){var m;try{m=$s(g.content)}catch(_){return console.log("?? "+g.content.length+" "+(_.message||_))}var w;try{w=Ys(m)}catch(_){return console.log("## "+(_.message||_))}w.forEach(function(_){i[_.id]=_.messages,u.push(_.id)})}}),!u.length)throw new Error("File has no messages");var f=((a=(n=(t=(r=i?.[1])==null?void 0:r[0])==null?void 0:t.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Vn(i[1][0].meta[1][0].data)==1&&i[1][0];if(f||u.forEach(function(g){i[g].forEach(function(m){var w=Vn(m.meta[1][0].data)>>>0;if(w==1)if(!f)f=m;else throw new Error("Document has multiple roots")})}),!f)throw new Error("Cannot find Document root");return CU(i,f)}function TU(e,r,t){var n,a,i,u;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var f=((u=(i=e[8])==null?void 0:i[0])==null?void 0:u.data)&&Vn(e[8][0].data)>0||!1;if(f)throw"Math only works with normal offsets";for(var g=0,m=vc(e[7][0].data),w=0,_=[],E=vc(e[4][0].data),k=0,N=[],A=0;A<r.length;++A){if(r[A]==null){m.setUint16(A*2,65535,!0),E.setUint16(A*2,65535);continue}m.setUint16(A*2,w,!0),E.setUint16(A*2,k,!0);var C,I;switch(typeof r[A]){case"string":C=pg({t:"s",v:r[A]},t),I=bg({t:"s",v:r[A]},t);break;case"number":C=pg({t:"n",v:r[A]},t),I=bg({t:"n",v:r[A]},t);break;case"boolean":C=pg({t:"b",v:r[A]},t),I=bg({t:"b",v:r[A]},t);break;default:throw new Error("Unsupported value "+r[A])}_.push(C),w+=C.length,N.push(I),k+=I.length,++g}for(e[2][0].data=rn(g);A<e[7][0].data.length/2;++A)m.setUint16(A*2,65535,!0),E.setUint16(A*2,65535,!0);return e[6][0].data=Eo(_),e[3][0].data=Eo(N),g}function jU(e,r){if(!r||!r.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ds(t["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(gr(n)));var i=y1(t,{range:n,header:1}),u=["~Sh33tJ5~"];i.forEach(function(q){return q.forEach(function(P){typeof P=="string"&&u.push(P)})});var f={},g=[],m=Wt.read(r.numbers,{type:"base64"});m.FileIndex.map(function(q,P){return[q,m.FullPaths[P]]}).forEach(function(q){var P=q[0],Z=q[1];if(P.type==2&&P.name.match(/\.iwa/)){var pe=P.content,Le=$s(pe),Be=Ys(Le);Be.forEach(function(Pe){g.push(Pe.id),f[Pe.id]={deps:[],location:Z,type:Vn(Pe.messages[0].meta[1][0].data)}})}}),g.sort(function(q,P){return q-P});var w=g.filter(function(q){return q>1}).map(function(q){return[q,rn(q)]});m.FileIndex.map(function(q,P){return[q,m.FullPaths[P]]}).forEach(function(q){var P=q[0];if(q[1],!!P.name.match(/\.iwa/)){var Z=Ys($s(P.content));Z.forEach(function(pe){pe.messages.forEach(function(Le){w.forEach(function(Be){pe.messages.some(function(Pe){return Vn(Pe.meta[1][0].data)!=11006&&gU(Pe.data,Be[1])})&&f[Be[0]].deps.push(pe.id)})})})}});for(var _=Wt.find(m,f[1].location),E=Ys($s(_.content)),k,N=0;N<E.length;++N){var A=E[N];A.id==1&&(k=A)}var C=Ma(Gr(k.messages[0].data)[1][0].data);for(_=Wt.find(m,f[C].location),E=Ys($s(_.content)),N=0;N<E.length;++N)A=E[N],A.id==C&&(k=A);for(C=Ma(Gr(k.messages[0].data)[2][0].data),_=Wt.find(m,f[C].location),E=Ys($s(_.content)),N=0;N<E.length;++N)A=E[N],A.id==C&&(k=A);for(C=Ma(Gr(k.messages[0].data)[2][0].data),_=Wt.find(m,f[C].location),E=Ys($s(_.content)),N=0;N<E.length;++N)A=E[N],A.id==C&&(k=A);var I=Gr(k.messages[0].data);{I[6][0].data=rn(n.e.r+1),I[7][0].data=rn(n.e.c+1);var D=Ma(I[46][0].data),O=Wt.find(m,f[D].location),B=Ys($s(O.content));{for(var U=0;U<B.length&&B[U].id!=D;++U);if(B[U].id!=D)throw"Bad ColumnRowUIDMapArchive";var X=Gr(B[U].messages[0].data);X[1]=[],X[2]=[],X[3]=[];for(var F=0;F<=n.e.c;++F){var Y=[];Y[1]=Y[2]=[{type:0,data:rn(F+420690)}],X[1].push({type:2,data:Ta(Y)}),X[2].push({type:0,data:rn(F)}),X[3].push({type:0,data:rn(F)})}X[4]=[],X[5]=[],X[6]=[];for(var H=0;H<=n.e.r;++H)Y=[],Y[1]=Y[2]=[{type:0,data:rn(H+726270)}],X[4].push({type:2,data:Ta(Y)}),X[5].push({type:0,data:rn(H)}),X[6].push({type:0,data:rn(H)});B[U].messages[0].data=Ta(X)}O.content=w0(b0(B)),O.size=O.content.length,delete I[46];var ce=Gr(I[4][0].data);{ce[7][0].data=rn(n.e.r+1);var J=Gr(ce[1][0].data),V=Ma(J[2][0].data);O=Wt.find(m,f[V].location),B=Ys($s(O.content));{if(B[0].id!=V)throw"Bad HeaderStorageBucket";var xe=Gr(B[0].messages[0].data);for(H=0;H<i.length;++H){var W=Gr(xe[2][0].data);W[1][0].data=rn(H),W[4][0].data=rn(i[H].length),xe[2][H]={type:xe[2][0].type,data:Ta(W)}}B[0].messages[0].data=Ta(xe)}O.content=w0(b0(B)),O.size=O.content.length;var ne=Ma(ce[2][0].data);O=Wt.find(m,f[ne].location),B=Ys($s(O.content));{if(B[0].id!=ne)throw"Bad HeaderStorageBucket";for(xe=Gr(B[0].messages[0].data),F=0;F<=n.e.c;++F)W=Gr(xe[2][0].data),W[1][0].data=rn(F),W[4][0].data=rn(n.e.r+1),xe[2][F]={type:xe[2][0].type,data:Ta(W)};B[0].messages[0].data=Ta(xe)}O.content=w0(b0(B)),O.size=O.content.length;var be=Ma(ce[4][0].data);(function(){for(var q=Wt.find(m,f[be].location),P=Ys($s(q.content)),Z,pe=0;pe<P.length;++pe){var Le=P[pe];Le.id==be&&(Z=Le)}var Be=Gr(Z.messages[0].data);{Be[3]=[];var Pe=[];u.forEach(function(ve,Ie){Pe[1]=[{type:0,data:rn(Ie)}],Pe[2]=[{type:0,data:rn(1)}],Pe[3]=[{type:2,data:mU(ve)}],Be[3].push({type:2,data:Ta(Pe)})})}Z.messages[0].data=Ta(Be);var et=b0(P),ut=w0(et);q.content=ut,q.size=q.content.length})();var fe=Gr(ce[3][0].data);{var Ve=fe[1][0];delete fe[2];var ge=Gr(Ve.data);{var We=Ma(ge[2][0].data);(function(){for(var q=Wt.find(m,f[We].location),P=Ys($s(q.content)),Z,pe=0;pe<P.length;++pe){var Le=P[pe];Le.id==We&&(Z=Le)}var Be=Gr(Z.messages[0].data);{delete Be[6],delete fe[7];var Pe=new Uint8Array(Be[5][0].data);Be[5]=[];for(var et=0,ut=0;ut<=n.e.r;++ut){var ve=Gr(Pe);et+=TU(ve,i[ut],u),ve[1][0].data=rn(ut),Be[5].push({data:Ta(ve),type:2})}Be[1]=[{type:0,data:rn(n.e.c+1)}],Be[2]=[{type:0,data:rn(n.e.r+1)}],Be[3]=[{type:0,data:rn(et)}],Be[4]=[{type:0,data:rn(n.e.r+1)}]}Z.messages[0].data=Ta(Be);var Ie=b0(P),z=w0(Ie);q.content=z,q.size=q.content.length})()}Ve.data=Ta(ge)}ce[3][0].data=Ta(fe)}I[4][0].data=Ta(ce)}k.messages[0].data=Ta(I);var re=b0(E),L=w0(re);return _.content=L,_.size=_.content.length,m}function cS(e){return function(t){for(var n=0;n!=e.length;++n){var a=e[n];t[a[0]]===void 0&&(t[a[0]]=a[1]),a[2]==="n"&&(t[a[0]]=Number(t[a[0]]))}}}function y2(e){cS([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function _2(e){cS([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function RU(e){return Ar.WS.indexOf(e)>-1?"sheet":e==Ar.CS?"chart":e==Ar.DS?"dialog":e==Ar.MS?"macro":e&&e.length?e:"sheet"}function OU(e,r){if(!e)return 0;try{e=r.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,RU(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function IU(e,r,t,n,a,i,u,f,g,m,w,_){try{i[n]=id(Is(e,t,!0),r);var E=sa(e,r),k;switch(f){case"sheet":k=tP(E,r,a,g,i[n],m,w,_);break;case"chart":if(k=rP(E,r,a,g,i[n],m,w,_),!k||!k["!drawel"])break;var N=Ju(k["!drawel"].Target,r),A=Nd(N),C=H9(Is(e,N,!0),id(Is(e,A,!0),N)),I=Ju(C,N),D=Nd(I);k=TB(Is(e,I,!0),I,g,id(Is(e,D,!0),I),m,k);break;case"macro":k=nP(E,r,a,g,i[n],m,w,_);break;case"dialog":k=aP(E,r,a,g,i[n],m,w,_);break;default:throw new Error("Unrecognized sheet type "+f)}u[n]=k;var O=[];i&&i[n]&&Gn(i[n]).forEach(function(B){var U="";if(i[n][B].Type==Ar.CMNT){U=Ju(i[n][B].Target,r);var X=oP(sa(e,U,!0),U,g);if(!X||!X.length)return;z_(k,X,!1)}i[n][B].Type==Ar.TCMNT&&(U=Ju(i[n][B].Target,r),O=O.concat(G9(sa(e,U,!0),g)))}),O&&O.length&&z_(k,O,!0,g.people||[])}catch(B){if(g.WTF)throw B}}function Ks(e){return e.charAt(0)=="/"?e.slice(1):e}function DU(e,r){if(q0(),r=r||{},y2(r),Zs(e,"META-INF/manifest.xml")||Zs(e,"objectdata.xml"))return J_(e,r);if(Zs(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof wg<"u"){if(e.FileIndex)return wg(e);var t=Wt.utils.cfb_new();return o_(e).forEach(function(W){yr(t,W,WR(e,W))}),wg(t)}throw new Error("Unsupported NUMBERS file")}if(!Zs(e,"[Content_Types].xml"))throw Zs(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Zs(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=o_(e),a=BO(Is(e,"[Content_Types].xml")),i=!1,u,f;if(a.workbooks.length===0&&(f="xl/workbook.xml",sa(e,f,!0)&&a.workbooks.push(f)),a.workbooks.length===0){if(f="xl/workbook.bin",!sa(e,f,!0))throw new Error("Could not find workbook");a.workbooks.push(f),i=!0}a.workbooks[0].slice(-3)=="bin"&&(i=!0);var g={},m={};if(!r.bookSheets&&!r.bookProps){if(ld=[],a.sst)try{ld=lP(sa(e,Ks(a.sst)),a.sst,r)}catch(W){if(r.WTF)throw W}r.cellStyles&&a.themes.length&&(g=iP(Is(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],r)),a.style&&(m=sP(sa(e,Ks(a.style)),a.style,g,r))}a.links.map(function(W){try{var ne=id(Is(e,Nd(Ks(W))),W);return uP(sa(e,Ks(W)),ne,W,r)}catch{}});var w=eP(sa(e,Ks(a.workbooks[0])),a.workbooks[0],r),_={},E="";a.coreprops.length&&(E=sa(e,Ks(a.coreprops[0]),!0),E&&(_=Zk(E)),a.extprops.length!==0&&(E=sa(e,Ks(a.extprops[0]),!0),E&&WO(E,_,r)));var k={};(!r.bookSheets||r.bookProps)&&a.custprops.length!==0&&(E=Is(e,Ks(a.custprops[0]),!0),E&&(k=KO(E,r)));var N={};if((r.bookSheets||r.bookProps)&&(w.Sheets?u=w.Sheets.map(function(ne){return ne.name}):_.Worksheets&&_.SheetNames.length>0&&(u=_.SheetNames),r.bookProps&&(N.Props=_,N.Custprops=k),r.bookSheets&&typeof u<"u"&&(N.SheetNames=u),r.bookSheets?N.SheetNames:r.bookProps))return N;u={};var A={};r.bookDeps&&a.calcchain&&(A=cP(sa(e,Ks(a.calcchain)),a.calcchain));var C=0,I={},D,O;{var B=w.Sheets;_.Worksheets=B.length,_.SheetNames=[];for(var U=0;U!=B.length;++U)_.SheetNames[U]=B[U].name}var X=i?"bin":"xml",F=a.workbooks[0].lastIndexOf("/"),Y=(a.workbooks[0].slice(0,F+1)+"_rels/"+a.workbooks[0].slice(F+1)+".rels").replace(/^\//,"");Zs(e,Y)||(Y="xl/_rels/workbook."+X+".rels");var H=id(Is(e,Y,!0),Y.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(r.xlmeta=dP(sa(e,Ks(a.metadata[0])),a.metadata[0],r)),(a.people||[]).length>=1&&(r.people=X9(sa(e,Ks(a.people[0])),r)),H&&(H=OU(H,w.Sheets));var ce=sa(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(C=0;C!=_.Worksheets;++C){var J="sheet";if(H&&H[C]?(D="xl/"+H[C][1].replace(/[\/]?xl\//,""),Zs(e,D)||(D=H[C][1]),Zs(e,D)||(D=Y.replace(/_rels\/.*$/,"")+H[C][1]),J=H[C][2]):(D="xl/worksheets/sheet"+(C+1-ce)+"."+X,D=D.replace(/sheet0\./,"sheet.")),O=D.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),r&&r.sheets!=null)switch(typeof r.sheets){case"number":if(C!=r.sheets)continue e;break;case"string":if(_.SheetNames[C].toLowerCase()!=r.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(r.sheets)){for(var V=!1,xe=0;xe!=r.sheets.length;++xe)typeof r.sheets[xe]=="number"&&r.sheets[xe]==C&&(V=1),typeof r.sheets[xe]=="string"&&r.sheets[xe].toLowerCase()==_.SheetNames[C].toLowerCase()&&(V=1);if(!V)continue e}}IU(e,D,O,_.SheetNames[C],C,I,u,J,r,w,g,m)}return N={Directory:a,Workbook:w,Props:_,Custprops:k,Deps:A,Sheets:u,SheetNames:_.SheetNames,Strings:ld,Styles:m,Themes:g,SSF:kn(er)},r&&r.bookFiles&&(e.files?(N.keys=n,N.files=e.files):(N.keys=[],N.files={},e.FullPaths.forEach(function(W,ne){W=W.replace(/^Root Entry[\/]/,""),N.keys.push(W),N.files[W]=e.FileIndex[ne]}))),r&&r.bookVBA&&(a.vba.length>0?N.vbaraw=sa(e,Ks(a.vba[0]),!0):a.defaults&&a.defaults.bin===eM&&(N.vbaraw=sa(e,"xl/vbaProject.bin",!0))),N}function MU(e,r){var t=r||{},n="Workbook",a=Wt.find(e,n);try{if(n="/!DataSpaces/Version",a=Wt.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(dD(a.content),n="/!DataSpaces/DataSpaceMap",a=Wt.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=hD(a.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Wt.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var u=xD(a.content);if(u.length!=1||u[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Wt.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);gD(a.content)}catch{}if(n="/EncryptionInfo",a=Wt.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var f=pD(a.content);if(n="/EncryptedPackage",a=Wt.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(f[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(f[1],a.content,t.password||"",t);if(f[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(f[1],a.content,t.password||"",t);throw new Error("File is password-protected")}function FU(e,r){return r.bookType=="ods"?oS(e,r):r.bookType=="numbers"?jU(e,r):r.bookType=="xlsb"?LU(e,r):BU(e,r)}function LU(e,r){C0=1024,e&&!e.SSF&&(e.SSF=kn(er)),e&&e.SSF&&(q0(),F1(e.SSF),r.revssf=B1(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.rels={},r.wbrels={},r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,od?r.revStrings=new Map:(r.revStrings={},r.revStrings.foo=[],delete r.revStrings.foo);var t=r.bookType=="xlsb"?"bin":"xml",n=FE.indexOf(r.bookType)>-1,a=l2();_2(r=r||{});var i=Kp(),u="",f=0;if(r.cellXfs=[],No(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),u="docProps/core.xml",yr(i,u,Jk(e.Props,r)),a.coreprops.push(u),nn(r.rels,2,u,Ar.CORE_PROPS),u="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var g=[],m=0;m<e.SheetNames.length;++m)(e.Workbook.Sheets[m]||{}).Hidden!=2&&g.push(e.SheetNames[m]);e.Props.SheetNames=g}for(e.Props.Worksheets=e.Props.SheetNames.length,yr(i,u,tE(e.Props)),a.extprops.push(u),nn(r.rels,3,u,Ar.EXT_PROPS),e.Custprops!==e.Props&&Gn(e.Custprops||{}).length>0&&(u="docProps/custom.xml",yr(i,u,rE(e.Custprops)),a.custprops.push(u),nn(r.rels,4,u,Ar.CUST_PROPS)),f=1;f<=e.SheetNames.length;++f){var w={"!id":{}},_=e.Sheets[e.SheetNames[f-1]],E=(_||{})["!type"]||"sheet";if(u="xl/worksheets/sheet"+f+"."+t,yr(i,u,hP(f-1,u,r,e,w)),a.sheets.push(u),nn(r.wbrels,-1,"worksheets/sheet"+f+"."+t,Ar.WS[0]),_){var k=_["!comments"],N=!1,A="";k&&k.length>0&&(A="xl/comments"+f+"."+t,yr(i,A,gP(k,A)),a.comments.push(A),nn(w,-1,"../comments"+f+"."+t,Ar.CMNT),N=!0),_["!legacy"]&&N&&yr(i,"xl/drawings/vmlDrawing"+f+".vml",DE(f,_["!comments"])),delete _["!comments"],delete _["!legacy"]}w["!id"].rId1&&yr(i,Nd(u),R0(w))}return r.Strings!=null&&r.Strings.length>0&&(u="xl/sharedStrings."+t,yr(i,u,mP(r.Strings,u,r)),a.strs.push(u),nn(r.wbrels,-1,"sharedStrings."+t,Ar.SST)),u="xl/workbook."+t,yr(i,u,fP(e,u)),a.workbooks.push(u),nn(r.rels,1,u,Ar.WB),u="xl/theme/theme1.xml",yr(i,u,h2(e.Themes,r)),a.themes.push(u),nn(r.wbrels,-1,"theme/theme1.xml",Ar.THEME),u="xl/styles."+t,yr(i,u,xP(e,u,r)),a.styles.push(u),nn(r.wbrels,-1,"styles."+t,Ar.STY),e.vbaraw&&n&&(u="xl/vbaProject.bin",yr(i,u,e.vbaraw),a.vba.push(u),nn(r.wbrels,-1,"vbaProject.bin",Ar.VBA)),u="xl/metadata."+t,yr(i,u,pP(u)),a.metadata.push(u),nn(r.wbrels,-1,"metadata."+t,Ar.XLMETA),yr(i,"[Content_Types].xml",Yk(a,r)),yr(i,"_rels/.rels",R0(r.rels)),yr(i,"xl/_rels/workbook."+t+".rels",R0(r.wbrels)),delete r.revssf,delete r.ssf,i}function BU(e,r){C0=1024,e&&!e.SSF&&(e.SSF=kn(er)),e&&e.SSF&&(q0(),F1(e.SSF),r.revssf=B1(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.rels={},r.wbrels={},r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,od?r.revStrings=new Map:(r.revStrings={},r.revStrings.foo=[],delete r.revStrings.foo);var t="xml",n=FE.indexOf(r.bookType)>-1,a=l2();_2(r=r||{});var i=Kp(),u="",f=0;if(r.cellXfs=[],No(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),u="docProps/core.xml",yr(i,u,Jk(e.Props,r)),a.coreprops.push(u),nn(r.rels,2,u,Ar.CORE_PROPS),u="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var g=[],m=0;m<e.SheetNames.length;++m)(e.Workbook.Sheets[m]||{}).Hidden!=2&&g.push(e.SheetNames[m]);e.Props.SheetNames=g}e.Props.Worksheets=e.Props.SheetNames.length,yr(i,u,tE(e.Props)),a.extprops.push(u),nn(r.rels,3,u,Ar.EXT_PROPS),e.Custprops!==e.Props&&Gn(e.Custprops||{}).length>0&&(u="docProps/custom.xml",yr(i,u,rE(e.Custprops)),a.custprops.push(u),nn(r.rels,4,u,Ar.CUST_PROPS));var w=["SheetJ5"];for(r.tcid=0,f=1;f<=e.SheetNames.length;++f){var _={"!id":{}},E=e.Sheets[e.SheetNames[f-1]],k=(E||{})["!type"]||"sheet";if(u="xl/worksheets/sheet"+f+"."+t,yr(i,u,KE(f-1,r,e,_)),a.sheets.push(u),nn(r.wbrels,-1,"worksheets/sheet"+f+"."+t,Ar.WS[0]),E){var N=E["!comments"],A=!1,C="";if(N&&N.length>0){var I=!1;N.forEach(function(D){D[1].forEach(function(O){O.T==!0&&(I=!0)})}),I&&(C="xl/threadedComments/threadedComment"+f+"."+t,yr(i,C,W9(N,w,r)),a.threadedcomments.push(C),nn(_,-1,"../threadedComments/threadedComment"+f+"."+t,Ar.TCMNT)),C="xl/comments"+f+"."+t,yr(i,C,ME(N)),a.comments.push(C),nn(_,-1,"../comments"+f+"."+t,Ar.CMNT),A=!0}E["!legacy"]&&A&&yr(i,"xl/drawings/vmlDrawing"+f+".vml",DE(f,E["!comments"])),delete E["!comments"],delete E["!legacy"]}_["!id"].rId1&&yr(i,Nd(u),R0(_))}return r.Strings!=null&&r.Strings.length>0&&(u="xl/sharedStrings."+t,yr(i,u,_E(r.Strings,r)),a.strs.push(u),nn(r.wbrels,-1,"sharedStrings."+t,Ar.SST)),u="xl/workbook."+t,yr(i,u,JE(e)),a.workbooks.push(u),nn(r.rels,1,u,Ar.WB),u="xl/theme/theme1.xml",yr(i,u,h2(e.Themes,r)),a.themes.push(u),nn(r.wbrels,-1,"theme/theme1.xml",Ar.THEME),u="xl/styles."+t,yr(i,u,jE(e,r)),a.styles.push(u),nn(r.wbrels,-1,"styles."+t,Ar.STY),e.vbaraw&&n&&(u="xl/vbaProject.bin",yr(i,u,e.vbaraw),a.vba.push(u),nn(r.wbrels,-1,"vbaProject.bin",Ar.VBA)),u="xl/metadata."+t,yr(i,u,IE()),a.metadata.push(u),nn(r.wbrels,-1,"metadata."+t,Ar.XLMETA),w.length>1&&(u="xl/persons/person.xml",yr(i,u,K9(w)),a.people.push(u),nn(r.wbrels,-1,"persons/person.xml",Ar.PEOPLE)),yr(i,"[Content_Types].xml",Yk(a,r)),yr(i,"_rels/.rels",R0(r.rels)),yr(i,"xl/_rels/workbook."+t+".rels",R0(r.wbrels)),delete r.revssf,delete r.ssf,i}function k2(e,r){var t="";switch((r||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":t=Ms(e.slice(0,12));break;case"binary":t=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(r&&r.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function PU(e,r){return Wt.find(e,"EncryptedPackage")?MU(e,r):rS(e,r)}function UU(e,r){var t,n=e,a=r||{};return a.type||(a.type=Sr&&Buffer.isBuffer(e)?"buffer":"base64"),t=Ek(n,a),DU(t,a)}function uS(e,r){var t=0;e:for(;t<e.length;)switch(e.charCodeAt(t)){case 10:case 13:case 32:++t;break;case 60:return cp(e.slice(t),r);default:break e}return L0.to_workbook(e,r)}function zU(e,r){var t="",n=k2(e,r);switch(r.type){case"base64":t=Ms(e);break;case"binary":t=e;break;case"buffer":t=e.toString("binary");break;case"array":t=gc(e);break;default:throw new Error("Unrecognized type "+r.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(t=cn(t)),r.type="binary",uS(t,r)}function HU(e,r){var t=e;return r.type=="base64"&&(t=Ms(t)),t=yd.utils.decode(1200,t.slice(2),"str"),r.type="binary",uS(t,r)}function VU(e){return e.match(/[^\x00-\x7F]/)?Pi(e):e}function vg(e,r,t,n){return n?(t.type="string",L0.to_workbook(e,t)):L0.to_workbook(r,t)}function fp(e,r){Hp();var t=r||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return fp(new Uint8Array(e),(t=kn(t),t.type="array",t));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!t.type&&(t.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],i=!1;if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),I0={},t.dateNF&&(I0.dateNF=t.dateNF),t.type||(t.type=Sr&&Buffer.isBuffer(e)?"buffer":"base64"),t.type=="file"&&(t.type=Sr?"buffer":"binary",n=LR(e),typeof Uint8Array<"u"&&!Sr&&(t.type="array")),t.type=="string"&&(i=!0,t.type="binary",t.codepage=65001,n=VU(e)),t.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var u=new ArrayBuffer(3),f=new Uint8Array(u);if(f.foo="bar",!f.foo)return t=kn(t),t.type="array",fp(Vp(n),t)}switch((a=k2(n,t))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return PU(Wt.read(n,t),t);break;case 9:if(a[1]<=8)return rS(n,t);break;case 60:return cp(n,t);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return qI(n,t);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return vE.to_workbook(n,t);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?UU(n,t):vg(e,n,t,i);case 239:return a[3]===60?cp(n,t):vg(e,n,t,i);case 255:if(a[1]===254)return HU(n,t);if(a[1]===0&&a[2]===2&&a[3]===0)return uc.to_workbook(n,t);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return uc.to_workbook(n,t);break;case 3:case 131:case 139:case 140:return op.to_workbook(n,t);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return NE.to_workbook(n,t);break;case 10:case 13:case 32:return zU(n,t);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return KI.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?op.to_workbook(n,t):vg(e,n,t,i)}function dS(e,r){switch(r.type){case"base64":case"binary":break;case"buffer":case"array":r.type="";break;case"file":return $d(r.file,Wt.write(e,{type:Sr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+r.bookType+"' files");default:throw new Error("Unrecognized type "+r.type)}return Wt.write(e,r)}function GU(e,r){var t=kn(r||{}),n=FU(e,t);return WU(n,t)}function WU(e,r){var t={},n=Sr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(r.compression&&(t.compression="DEFLATE"),r.password)t.type=n;else switch(r.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+r.bookType+"' files");case"buffer":case"file":t.type=n;break;default:throw new Error("Unrecognized type "+r.type)}var a=e.FullPaths?Wt.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!r.compression}):e.generate(t);if(typeof Deno<"u"&&typeof a=="string"){if(r.type=="binary"||r.type=="base64")return a;a=new Uint8Array(M1(a))}return r.password&&typeof encrypt_agile<"u"?dS(encrypt_agile(a,r.password),r):r.type==="file"?$d(r.file,a):r.type=="string"?cn(a):a}function XU(e,r){var t=r||{},n=VP(e,t);return dS(n,t)}function Li(e,r,t){t||(t="");var n=t+e;switch(r.type){case"base64":return _d(Pi(n));case"binary":return Pi(n);case"string":return e;case"file":return $d(r.file,n,"utf8");case"buffer":return Sr?Nl(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Li(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+r.type)}function KU(e,r){switch(r.type){case"base64":return _d(e);case"binary":return e;case"string":return e;case"file":return $d(r.file,e,"binary");case"buffer":return Sr?Nl(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+r.type)}function Hh(e,r){switch(r.type){case"string":case"base64":case"binary":for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return r.type=="base64"?_d(t):r.type=="string"?cn(t):t;case"file":return $d(r.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+r.type)}}function fS(e,r){Hp(),PB(e);var t=kn(r||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var n=fS(e,t);return t.type="array",M1(n)}var a=0;if(t.sheet&&(typeof t.sheet=="number"?a=t.sheet:a=e.SheetNames.indexOf(t.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return Li(FP(e,t),t);case"slk":case"sylk":return Li(wE.from_sheet(e.Sheets[e.SheetNames[a]],t),t);case"htm":case"html":return Li(aS(e.Sheets[e.SheetNames[a]],t),t);case"txt":return KU(hS(e.Sheets[e.SheetNames[a]],t),t);case"csv":return Li(E2(e.Sheets[e.SheetNames[a]],t),t,"\uFEFF");case"dif":return Li(vE.from_sheet(e.Sheets[e.SheetNames[a]],t),t);case"dbf":return Hh(op.from_sheet(e.Sheets[e.SheetNames[a]],t),t);case"prn":return Li(L0.from_sheet(e.Sheets[e.SheetNames[a]],t),t);case"rtf":return Li(NE.from_sheet(e.Sheets[e.SheetNames[a]],t),t);case"eth":return Li(yE.from_sheet(e.Sheets[e.SheetNames[a]],t),t);case"fods":return Li(oS(e,t),t);case"wk1":return Hh(uc.sheet_to_wk1(e.Sheets[e.SheetNames[a]],t),t);case"wk3":return Hh(uc.book_to_wk3(e,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),Hh(nS(e,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),XU(e,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return GU(e,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function qU(e){if(!e.bookType){var r={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType=r[e.bookType]||e.bookType}}function YU(e,r,t){var n={};return n.type="file",n.file=r,qU(n),fS(e,n)}function $U(e,r,t,n,a,i,u,f){var g=Zn(t),m=f.defval,w=f.raw||!Object.prototype.hasOwnProperty.call(f,"raw"),_=!0,E=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(E,"__rowNum__",{value:t,enumerable:!1})}catch{E.__rowNum__=t}else E.__rowNum__=t;if(!u||e[t])for(var k=r.s.c;k<=r.e.c;++k){var N=u?e[t][k]:e[n[k]+g];if(N===void 0||N.t===void 0){if(m===void 0)continue;i[k]!=null&&(E[i[k]]=m);continue}var A=N.v;switch(N.t){case"z":if(A==null)break;continue;case"e":A=A==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+N.t)}if(i[k]!=null){if(A==null)if(N.t=="e"&&A===null)E[i[k]]=null;else if(m!==void 0)E[i[k]]=m;else if(w&&A===null)E[i[k]]=null;else continue;else E[i[k]]=w&&(N.t!=="n"||N.t==="n"&&f.rawNumbers!==!1)?A:Sl(N,A,f);A!=null&&(_=!1)}}return{row:E,isempty:_}}function y1(e,r){if(e==null||e["!ref"]==null)return[];var t={t:"n",v:0},n=0,a=1,i=[],u=0,f="",g={s:{r:0,c:0},e:{r:0,c:0}},m=r||{},w=m.range!=null?m.range:e["!ref"];switch(m.header===1?n=1:m.header==="A"?n=2:Array.isArray(m.header)?n=3:m.header==null&&(n=0),typeof w){case"string":g=Ur(w);break;case"number":g=Ur(e["!ref"]),g.s.r=w;break;default:g=w}n>0&&(a=0);var _=Zn(g.s.r),E=[],k=[],N=0,A=0,C=Array.isArray(e),I=g.s.r,D=0,O={};C&&!e[I]&&(e[I]=[]);var B=m.skipHidden&&e["!cols"]||[],U=m.skipHidden&&e["!rows"]||[];for(D=g.s.c;D<=g.e.c;++D)if(!(B[D]||{}).hidden)switch(E[D]=On(D),t=C?e[I][D]:e[E[D]+_],n){case 1:i[D]=D-g.s.c;break;case 2:i[D]=E[D];break;case 3:i[D]=m.header[D-g.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),f=u=Sl(t,null,m),A=O[u]||0,!A)O[u]=1;else{do f=u+"_"+A++;while(O[f]);O[u]=A,O[f]=1}i[D]=f}for(I=g.s.r+a;I<=g.e.r;++I)if(!(U[I]||{}).hidden){var X=$U(e,g,I,E,n,i,C,m);(X.isempty===!1||(n===1?m.blankrows!==!1:m.blankrows))&&(k[N++]=X.row)}return k.length=N,k}var n4=/"/g;function ZU(e,r,t,n,a,i,u,f){for(var g=!0,m=[],w="",_=Zn(t),E=r.s.c;E<=r.e.c;++E)if(n[E]){var k=f.dense?(e[t]||[])[E]:e[n[E]+_];if(k==null)w="";else if(k.v!=null){g=!1,w=""+(f.rawNumbers&&k.t=="n"?k.v:Sl(k,null,f));for(var N=0,A=0;N!==w.length;++N)if((A=w.charCodeAt(N))===a||A===i||A===34||f.forceQuotes){w='"'+w.replace(n4,'""')+'"';break}w=="ID"&&(w='"ID"')}else k.f!=null&&!k.F?(g=!1,w="="+k.f,w.indexOf(",")>=0&&(w='"'+w.replace(n4,'""')+'"')):w="";m.push(w)}return f.blankrows===!1&&g?null:m.join(u)}function E2(e,r){var t=[],n=r??{};if(e==null||e["!ref"]==null)return"";var a=Ur(e["!ref"]),i=n.FS!==void 0?n.FS:",",u=i.charCodeAt(0),f=n.RS!==void 0?n.RS:`
`,g=f.charCodeAt(0),m=new RegExp((i=="|"?"\\|":i)+"+$"),w="",_=[];n.dense=Array.isArray(e);for(var E=n.skipHidden&&e["!cols"]||[],k=n.skipHidden&&e["!rows"]||[],N=a.s.c;N<=a.e.c;++N)(E[N]||{}).hidden||(_[N]=On(N));for(var A=0,C=a.s.r;C<=a.e.r;++C)(k[C]||{}).hidden||(w=ZU(e,a,C,_,u,g,i,n),w!=null&&(n.strip&&(w=w.replace(m,"")),(w||n.blankrows!==!1)&&t.push((A++?f:"")+w)));return delete n.dense,t.join("")}function hS(e,r){r||(r={}),r.FS="	",r.RS=`
`;var t=E2(e,r);return t}function JU(e){var r="",t,n="";if(e==null||e["!ref"]==null)return[];var a=Ur(e["!ref"]),i="",u=[],f,g=[],m=Array.isArray(e);for(f=a.s.c;f<=a.e.c;++f)u[f]=On(f);for(var w=a.s.r;w<=a.e.r;++w)for(i=Zn(w),f=a.s.c;f<=a.e.c;++f)if(r=u[f]+i,t=m?(e[w]||[])[f]:e[r],n="",t!==void 0){if(t.F!=null){if(r=t.F,!t.f)continue;n=t.f,r.indexOf(":")==-1&&(r=r+":"+r)}if(t.f!=null)n=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)n=""+t.v;else if(t.t=="b")n=t.v?"TRUE":"FALSE";else if(t.w!==void 0)n="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?n="'"+t.v:n=""+t.v}}g[g.length]=r+"="+n}return g}function xS(e,r,t){var n=t||{},a=+!n.skipHeader,i=e||{},u=0,f=0;if(i&&n.origin!=null)if(typeof n.origin=="number")u=n.origin;else{var g=typeof n.origin=="string"?In(n.origin):n.origin;u=g.r,f=g.c}var m,w={s:{c:0,r:0},e:{c:f,r:u+r.length-1+a}};if(i["!ref"]){var _=Ur(i["!ref"]);w.e.c=Math.max(w.e.c,_.e.c),w.e.r=Math.max(w.e.r,_.e.r),u==-1&&(u=_.e.r+1,w.e.r=u+r.length-1+a)}else u==-1&&(u=0,w.e.r=r.length-1+a);var E=n.header||[],k=0;r.forEach(function(A,C){Gn(A).forEach(function(I){(k=E.indexOf(I))==-1&&(E[k=E.length]=I);var D=A[I],O="z",B="",U=tr({c:f+k,r:u+C+a});m=Dd(i,U),D&&typeof D=="object"&&!(D instanceof Date)?i[U]=D:(typeof D=="number"?O="n":typeof D=="boolean"?O="b":typeof D=="string"?O="s":D instanceof Date?(O="d",n.cellDates||(O="n",D=ma(D)),B=n.dateNF||er[14]):D===null&&n.nullError&&(O="e",D=0),m?(m.t=O,m.v=D,delete m.w,delete m.R,B&&(m.z=B)):i[U]=m={t:O,v:D},B&&(m.z=B))})}),w.e.c=Math.max(w.e.c,f+E.length-1);var N=Zn(u);if(a)for(k=0;k<E.length;++k)i[On(k+f)+N]={t:"s",v:E[k]};return i["!ref"]=gr(w),i}function QU(e,r){return xS(null,e,r)}function Dd(e,r,t){if(typeof r=="string"){if(Array.isArray(e)){var n=In(r);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[r]||(e[r]={t:"z"})}return typeof r!="number"?Dd(e,tr(r)):Dd(e,tr({r,c:t||0}))}function ez(e,r){if(typeof r=="number"){if(r>=0&&e.SheetNames.length>r)return r;throw new Error("Cannot find sheet # "+r)}else if(typeof r=="string"){var t=e.SheetNames.indexOf(r);if(t>-1)return t;throw new Error("Cannot find sheet name |"+r+"|")}else throw new Error("Cannot find sheet |"+r+"|")}function S2(){return{SheetNames:[],Sheets:{}}}function A2(e,r,t,n){var a=1;if(!t)for(;a<=65535&&e.SheetNames.indexOf(t="Sheet"+a)!=-1;++a,t=void 0);if(!t||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(t)>=0){var i=t.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var u=i&&i[1]||t;for(++a;a<=65535&&e.SheetNames.indexOf(t=u+a)!=-1;++a);}if(ZE(t),e.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return e.SheetNames.push(t),e.Sheets[t]=r,t}function tz(e,r,t){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=ez(e,r);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}e.Workbook.Sheets[n].Hidden=t}function rz(e,r){return e.z=r,e}function mS(e,r,t){return r?(e.l={Target:r},t&&(e.l.Tooltip=t)):delete e.l,e}function nz(e,r,t){return mS(e,"#"+r,t)}function az(e,r,t){e.c||(e.c=[]),e.c.push({t:r,a:t||"SheetJS"})}function sz(e,r,t,n){for(var a=typeof r!="string"?r:Ur(r),i=typeof r=="string"?r:gr(r),u=a.s.r;u<=a.e.r;++u)for(var f=a.s.c;f<=a.e.c;++f){var g=Dd(e,u,f);g.t="n",g.F=i,delete g.v,u==a.s.r&&f==a.s.c&&(g.f=t,n&&(g.D=!0))}return e}var Qh={encode_col:On,encode_row:Zn,encode_cell:tr,encode_range:gr,decode_col:t2,decode_row:e2,split_cell:mO,decode_cell:In,decode_range:ds,format_cell:Sl,sheet_add_aoa:Hk,sheet_add_json:xS,sheet_add_dom:sS,aoa_to_sheet:Y0,json_to_sheet:QU,table_to_sheet:iS,table_to_book:dU,sheet_to_csv:E2,sheet_to_txt:hS,sheet_to_json:y1,sheet_to_html:aS,sheet_to_formulae:JU,sheet_to_row_object_array:y1,sheet_get_cell:Dd,book_new:S2,book_append_sheet:A2,book_set_sheet_visibility:tz,cell_set_number_format:rz,cell_set_hyperlink:mS,cell_set_internal_link:nz,cell_add_comment:az,sheet_set_array_formula:sz,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function iz({isOpen:e,onClose:r,type:t="new",onSuccess:n}){const[a,i]=Q.useState("stock_code"),[u,f]=Q.useState(!1),[g,m]=Q.useState(0),[w,_]=Q.useState(""),[E,k]=Q.useState(!1),[N,A]=Q.useState({name:!0,price:!0,barcode:!0,group:!0,brand:!0}),C=Q.useRef(null);if(!e)return null;const I=t==="new"?"Excel le Yeni rn Ykle":"Excel le rn Gncelle",D=t==="new"?"Excel dosyanzdan yeni rnler ekleyin":"Mevcut rnlerinizi Excel ile gncelleyin",O=async X=>{const F=X.target.files?.[0]||X.dataTransfer?.files?.[0];if(F){f(!0);try{const Y=await F.arrayBuffer(),H=fp(Y),ce=H.Sheets[H.SheetNames[0]],V=Qh.sheet_to_json(ce,{header:1}).slice(1);let xe=0,W=[],ne=[];const{data:{products:be}}=await Cn.getAll(),fe=V.length;for(let ge=0;ge<fe;ge++){const We=V[ge],re=Math.round((ge+1)/fe*100);m(re),_(`${ge+1} / ${fe} rn leniyor...`),ge%5===0&&await new Promise(P=>setTimeout(P,10));const L=We[0]?.toString().trim();if(!L)continue;const q={name:We[1],price:We[2],barcode:We[3]?.toString().trim(),group:We[4],brand:We[5]};if(t==="new"){if(be.find(pe=>pe.stock_code===L)){ne.push(`Stok Kodu: ${L}`);continue}if(q.barcode&&be.find(Le=>Le.barcode===q.barcode)){ne.push(`Barkod: ${q.barcode} (${L})`);continue}const Z={stock_code:L,name:q.name||"Adsz",price:parseFloat(q.price)||0,barcode:q.barcode,group:q.group,brand:q.brand,stock:0};try{await Cn.add(Z),xe++,be.push(Z)}catch(pe){W.push(pe.message)}}else{const P=be.find(pe=>a==="stock_code"?pe.stock_code===L:pe.barcode===L);if(!P)continue;const Z={};N.name&&q.name&&(Z.name=q.name),N.price&&q.price&&(Z.price=parseFloat(q.price)),N.group&&q.group&&(Z.group=q.group),N.brand&&q.brand&&(Z.brand=q.brand),N.barcode&&q.barcode&&(Z.barcode=q.barcode);try{await Cn.update(P.stock_code,Z),xe++}catch(pe){W.push(pe.message)}}}let Ve=`lem Tamamland.
Baarl: ${xe}`;if(ne.length>0){Ve+=`

 ${ne.length} rn kaydedilemedi (zaten kaytl):
`;const ge=ne.slice(0,5);Ve+=ge.map(We=>` ${We}`).join(`
`),ne.length>5&&(Ve+=`
... ve ${ne.length-5} rn daha`)}alert(Ve),n(),r()}catch(Y){alert("Dosya okuma hatas: "+Y.message)}finally{f(!1),X.target?.value&&(X.target.value=null)}}},B=X=>{X.preventDefault(),X.stopPropagation(),X.type==="dragenter"||X.type==="dragover"?k(!0):X.type==="dragleave"&&k(!1)},U=X=>{X.preventDefault(),X.stopPropagation(),k(!1),O(X)};return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[o.jsx("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 px-8 py-6",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),I]}),o.jsx("p",{className:"text-white/80 mt-2 text-sm",children:D})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50/50 rounded-2xl p-6 border border-gray-100",children:[o.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide mb-4 flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),"Eletirme Anahtar (A Stunu)"]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("label",{className:`flex-1 flex items-center gap-3 p-4 rounded-xl cursor-pointer transition-all ${a==="stock_code"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-white border-2 border-gray-200 hover:border-blue-300 text-gray-700"}`,children:[o.jsx("input",{type:"radio",name:"key",className:"sr-only",checked:a==="stock_code",onChange:()=>i("stock_code")}),o.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${a==="stock_code"?"border-white":"border-gray-400"}`,children:a==="stock_code"&&o.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})}),o.jsx("span",{className:"font-semibold",children:"Stok Kodu"})]}),o.jsxs("label",{className:`flex-1 flex items-center gap-3 p-4 rounded-xl cursor-pointer transition-all ${a==="barcode"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-white border-2 border-gray-200 hover:border-blue-300 text-gray-700"}`,children:[o.jsx("input",{type:"radio",name:"key",className:"sr-only",checked:a==="barcode",onChange:()=>i("barcode")}),o.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${a==="barcode"?"border-white":"border-gray-400"}`,children:a==="barcode"&&o.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-white"})}),o.jsx("span",{className:"font-semibold",children:"Barkod"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-purple-50/50 rounded-2xl p-6 border border-gray-100",children:[o.jsxs("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide mb-4 flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Excel Stunlar"]}),o.jsx("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:o.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[o.jsx("span",{className:"w-8 h-8 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center font-bold text-sm",children:"A"}),o.jsx("span",{className:"font-medium",children:a==="stock_code"?"Stok Kodu":"Barkod"}),o.jsx("span",{className:"ml-auto px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-semibold",children:"ZORUNLU"})]})}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:"name",letter:"B",label:"rn Ad"},{key:"price",letter:"C",label:"Fiyat"},{key:"barcode",letter:"D",label:"Barkod"},{key:"group",letter:"E",label:"Grup"},{key:"brand",letter:"F",label:"Marka"}].map(({key:X,letter:F,label:Y})=>o.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all ${N[X]?"bg-purple-50 border-2 border-purple-200":"bg-gray-50 border-2 border-transparent hover:border-gray-200"}`,children:[o.jsx("input",{type:"checkbox",checked:N[X],onChange:H=>A({...N,[X]:H.target.checked}),className:"sr-only"}),o.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center transition-all ${N[X]?"bg-purple-500":"bg-gray-200"}`,children:N[X]&&o.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),o.jsx("span",{className:"w-7 h-7 bg-gray-200 text-gray-600 rounded-lg flex items-center justify-center font-bold text-xs",children:F}),o.jsx("span",{className:"font-medium text-gray-700",children:Y})]},X))})]}),o.jsxs("div",{onDragEnter:B,onDragLeave:B,onDragOver:B,onDrop:U,onClick:()=>C.current.click(),className:`relative border-2 border-dashed rounded-2xl p-8 text-center cursor-pointer transition-all ${E?"border-emerald-500 bg-emerald-50":"border-gray-300 hover:border-emerald-400 hover:bg-gray-50"}`,children:[o.jsx("input",{type:"file",ref:C,onChange:O,className:"hidden",accept:".xlsx, .xls"}),u?o.jsxs("div",{className:"flex flex-col items-center gap-4 w-full max-w-md mx-6 animate-in fade-in zoom-in duration-300",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-2xl flex items-center justify-center mb-2",children:o.jsx("div",{className:"w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"})}),o.jsxs("div",{className:"w-full space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm font-bold text-gray-700",children:[o.jsx("span",{children:"leniyor..."}),o.jsxs("span",{children:["%",g]})]}),o.jsx("div",{className:"w-full bg-gray-100 rounded-full h-3 overflow-hidden border border-gray-200",children:o.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-green-400 h-full rounded-full transition-all duration-300 ease-out shadow-[0_0_10px_rgba(16,185,129,0.5)]",style:{width:`${g}%`}})}),o.jsx("div",{className:"text-center text-xs font-medium text-gray-400",children:w})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-emerald-100 to-green-100 rounded-2xl flex items-center justify-center",children:o.jsx("svg",{className:"w-8 h-8 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),o.jsx("p",{className:"text-gray-700 font-semibold text-lg mb-1",children:"Excel dosyasn srkleyin veya tklayn"}),o.jsx("p",{className:"text-gray-500 text-sm",children:".xlsx veya .xls formatnda dosya sein"})]})]})]}),o.jsx("div",{className:"bg-gray-50 px-8 py-5 border-t border-gray-100 flex justify-end gap-3",children:o.jsx("button",{onClick:r,className:"px-6 py-3 bg-white hover:bg-gray-100 text-gray-700 border border-gray-200 rounded-xl font-semibold transition-all",children:"ptal"})})]})})}function lz({isOpen:e,onClose:r,products:t}){const[n,a]=Q.useState(()=>Array(6).fill(null).map(()=>({product:null,status:null}))),i=(_,E)=>{const k=[...n];k[_]={...k[_],...E},a(k)},u=_=>{const E=n.filter((k,N)=>N!==_);a(E)},f=(_,E)=>{if(!E){i(_,{product:null,status:null});return}const k=t.find(N=>N.stock_code===E);k&&i(_,{product:k,status:"waiting"})},g=async(_,E)=>{if(!E||!n[_].product)return;const k=n[_];i(_,{status:"uploading"});const N=new FormData;N.append("product_image",E);try{await Cn.updateImage(k.product.stock_code,N),i(_,{status:"success"})}catch(A){console.error(A),i(_,{status:"error"})}};if(!e)return null;const m=n.filter(_=>_.status==="success").length,w=n.filter(_=>_.product).length;return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-5xl h-[85vh] flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 px-8 py-6 flex-shrink-0",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),"Toplu rn Resmi Gncelleme"]}),o.jsx("p",{className:"text-white/80 mt-2 text-sm",children:"Birden fazla rn resmini ayn anda gncelleyin"})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w>0&&o.jsxs("div",{className:"mt-4 flex gap-4",children:[o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2",children:[o.jsx("span",{className:"text-white/70 text-sm",children:"Seilen:"}),o.jsx("span",{className:"text-white font-bold ml-2",children:w})]}),o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2",children:[o.jsx("span",{className:"text-white/70 text-sm",children:"Yklenen:"}),o.jsx("span",{className:"text-white font-bold ml-2",children:m})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-100 px-8 py-3 flex items-center gap-3 flex-shrink-0",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("p",{className:"text-blue-800 text-sm",children:"Her satr iin bir rn sein ve resmi ykleyin. lemler annda sunucuya kaydedilir."})]}),o.jsx("div",{className:"flex-1 overflow-auto p-6 bg-gradient-to-br from-gray-50 to-emerald-50/30",children:o.jsxs("div",{className:"space-y-3",children:[n.map((_,E)=>o.jsx(oz,{index:E,row:_,products:t,onProductSelect:f,onFileSelect:g,onDelete:()=>u(E)},E)),o.jsxs("button",{onClick:()=>a([...n,{product:null,status:null}]),className:"w-full py-4 border-2 border-dashed border-emerald-300 text-emerald-600 rounded-2xl hover:bg-emerald-50 hover:border-emerald-400 transition-all flex items-center justify-center gap-2 font-semibold",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Yeni Satr Ekle"]})]})}),o.jsxs("div",{className:"bg-gray-50 px-8 py-5 border-t border-gray-100 flex justify-between items-center flex-shrink-0",children:[o.jsx("p",{className:"text-gray-500 text-sm",children:m>0&&`${m} resim baaryla yklendi`}),o.jsx("button",{onClick:r,className:"px-8 py-3 bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all",children:"Kapat"})]})]})})}function oz({index:e,row:r,products:t,onProductSelect:n,onFileSelect:a,onDelete:i}){const u=Q.useRef(null),[f,g]=Q.useState(""),[m,w]=Q.useState(!1),_=f?t.filter(k=>k.name.toLowerCase().includes(f.toLowerCase())||k.stock_code.toLowerCase().includes(f.toLowerCase())).slice(0,8):[],E=()=>{if(!r.product)return null;switch(r.status){case"success":return o.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 bg-emerald-50 px-4 py-2 rounded-xl",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),o.jsx("span",{className:"font-semibold",children:"Yklendi!"})]});case"uploading":return o.jsxs("div",{className:"flex items-center gap-2 text-blue-600 bg-blue-50 px-4 py-2 rounded-xl",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),o.jsx("span",{className:"font-semibold",children:"Ykleniyor..."})]});case"error":return o.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 px-4 py-2 rounded-xl",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),o.jsx("span",{className:"font-semibold",children:"Hata!"})]});default:return o.jsx("div",{className:"text-gray-400 text-sm",children:"Resim yklenmeye hazr"})}};return o.jsxs("div",{className:"flex items-center gap-4 bg-white p-4 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-all group",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-100 to-green-100 rounded-xl flex items-center justify-center text-emerald-600 font-bold",children:e+1}),o.jsx("div",{className:"flex-1 relative",children:r.product?o.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-emerald-50/50 px-4 py-3 rounded-xl border border-gray-200",children:[o.jsx("div",{className:"w-10 h-10 bg-white rounded-lg border border-gray-200 flex items-center justify-center overflow-hidden",children:r.product.image_url?o.jsx("img",{src:r.product.image_url,alt:"",className:"w-full h-full object-cover"}):o.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-semibold text-gray-900 truncate",children:r.product.name}),o.jsx("p",{className:"text-sm text-emerald-600 font-mono",children:r.product.stock_code})]}),o.jsx("button",{onClick:()=>n(e,null),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>w(!0),className:"w-full text-left px-5 py-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-xl font-semibold hover:from-emerald-600 hover:to-green-700 transition-all flex justify-between items-center shadow-lg shadow-green-500/25",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"rn Se"]}),o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),m&&o.jsxs("div",{className:"absolute top-full left-0 w-full bg-white border border-gray-200 shadow-2xl rounded-2xl mt-2 z-20 overflow-hidden",children:[o.jsx("div",{className:"p-3 border-b border-gray-100",children:o.jsx("input",{autoFocus:!0,placeholder:"rn ad veya stok kodu ara...",className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500",value:f,onChange:k=>g(k.target.value)})}),o.jsxs("div",{className:"max-h-48 overflow-y-auto",children:[_.map(k=>o.jsxs("div",{className:"px-4 py-3 hover:bg-emerald-50 cursor-pointer flex items-center gap-3 transition-colors",onClick:()=>{n(e,k.stock_code),w(!1),g("")},children:[o.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:k.image_url?o.jsx("img",{src:k.image_url,alt:"",className:"w-full h-full object-cover rounded-lg"}):o.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-semibold text-gray-900 truncate",children:k.name}),o.jsx("p",{className:"text-sm text-emerald-600 font-mono",children:k.stock_code})]})]},k.stock_code)),_.length===0&&f&&o.jsxs("div",{className:"px-4 py-8 text-center text-gray-400",children:[o.jsx("svg",{className:"w-10 h-10 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"rn bulunamad"]}),!f&&o.jsx("div",{className:"px-4 py-6 text-center text-gray-400 text-sm",children:"Aramak iin yazmaya balayn..."})]}),o.jsx("div",{className:"p-3 border-t border-gray-100 text-center text-sm text-gray-500 hover:text-red-500 cursor-pointer transition-colors",onClick:()=>{w(!1),g("")},children:"Kapat"})]})]})}),o.jsx("div",{className:"w-40 flex justify-center",children:r.product?E():o.jsx("span",{className:"text-gray-400 text-sm italic",children:"rn seilmedi"})}),o.jsxs("div",{className:"w-36",children:[o.jsx("input",{type:"file",ref:u,onChange:k=>a(e,k.target.files[0]),hidden:!0,accept:"image/*"}),o.jsxs("button",{onClick:()=>u.current.click(),disabled:!r.product||r.status==="uploading",className:`w-full py-3 px-4 font-semibold rounded-xl transition-all flex items-center justify-center gap-2 ${r.product?r.status==="uploading"?"bg-blue-100 text-blue-500 cursor-wait":"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg shadow-green-500/25 hover:shadow-xl hover:-translate-y-0.5":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Ykle"]})]}),o.jsx("button",{onClick:i,className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}function cz({isOpen:e,onClose:r,products:t}){const[n,a]=Q.useState(""),[i,u]=Q.useState("Tm"),[f,g]=Q.useState([]),[m,w]=Q.useState([]);Q.useEffect(()=>{let D=t;n&&(D=D.filter(O=>O.name.toLowerCase().includes(n.toLowerCase()))),i&&i!=="Tm"&&(D=D.filter(O=>O.group===i)),g(D)},[t,n,i]);const _=D=>{w(O=>[...O,{...D,quantity:1}])},E=()=>{const D=f.slice(0,100).map(O=>({...O,quantity:1}));w(O=>[...O,...D])},k=D=>{w(O=>O.filter((B,U)=>U!==D))},N=(D,O)=>{const B=[...m];B[D].quantity=parseInt(O)||1,w(B)},A=()=>{if(m.length===0)return alert("Listeye rn ekleyin.");const D=window.open("","_blank"),O=`
            <html>
                <head>
                    <title>Etiket Yazdr</title>
                    <style>
                        body { font-family: sans-serif; margin: 0; padding: 10px; }
                        .label-container { display: flex; flex-wrap: wrap; gap: 5px; }
                        .label {
                            width: 200px; height: 100px;
                            border: 1px dotted #ccc;
                            display: flex; flex-direction: column; 
                            align-items: center; justify-content: center;
                            text-align: center;
                            page-break-inside: avoid;
                            padding: 5px;
                            box-sizing: border-box;
                        }
                        .name { font-size: 11px; font-weight: bold; overflow: hidden; max-height: 28px; line-height: 14px; margin-bottom: 4px; }
                        .price { font-size: 20px; font-weight: 900; color: #000; }
                        .barcode { font-family: monospace; font-size: 10px; margin-top: 5px; letter-spacing: 1px; }
                        @media print { .label { border: none; } }
                    </style>
                </head>
                <body>
                    <div class="label-container">
                        ${m.flatMap(B=>Array(B.quantity).fill(B)).map(B=>`
                            <div class="label">
                                <div class="name">${B.name}</div>
                                <div class="price">${parseFloat(B.price).toLocaleString("tr-TR",{minimumFractionDigits:2})}</div>
                                <div class="barcode">${B.barcode||B.stock_code}</div>
                            </div>
                        `).join("")}
                    </div>
                    <script>window.print();<\/script>
                </body>
            </html>
        `;D.document.write(O),D.document.close()};if(!e)return null;const C=["Tm",...new Set(t.map(D=>D.group).filter(Boolean))],I=m.reduce((D,O)=>D+O.quantity,0);return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[85vh] flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 px-8 py-6 flex-shrink-0",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),"rn Etiketi Yazdr"]}),o.jsx("p",{className:"text-white/80 mt-2 text-sm",children:"rnleriniz iin fiyat etiketi oluturun ve yazdrn"})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m.length>0&&o.jsxs("div",{className:"mt-4 flex gap-4",children:[o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2",children:[o.jsx("span",{className:"text-white/70 text-sm",children:"rn:"}),o.jsx("span",{className:"text-white font-bold ml-2",children:m.length})]}),o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2",children:[o.jsx("span",{className:"text-white/70 text-sm",children:"Toplam Etiket:"}),o.jsx("span",{className:"text-white font-bold ml-2",children:I})]})]})]}),o.jsxs("div",{className:"flex-1 flex min-h-0 bg-gradient-to-br from-gray-50 to-orange-50/30 p-4 gap-4",children:[o.jsxs("div",{className:"w-64 bg-white rounded-2xl border border-gray-100 shadow-sm flex flex-col p-5 gap-4",children:[o.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2 text-sm",children:[o.jsx("svg",{className:"w-5 h-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filtrele"]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"rn Ad"}),o.jsx("input",{className:"w-full mt-2 px-4 py-2.5 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all",placeholder:"Ara...",value:n,onChange:D=>a(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Grup"}),o.jsx("select",{className:"w-full mt-2 px-4 py-2.5 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all",value:i,onChange:D=>u(D.target.value),children:C.map(D=>o.jsx("option",{value:D,children:D},D))})]}),o.jsx("button",{onClick:()=>{a(""),u("Tm")},className:"px-4 py-2.5 bg-gray-100 text-gray-600 rounded-xl font-medium hover:bg-gray-200 transition-all text-sm",children:"Temizle"}),o.jsx("div",{className:"mt-auto pt-4 border-t border-gray-100",children:o.jsxs("button",{onClick:E,className:"w-full px-4 py-3 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-xl font-semibold shadow-lg shadow-orange-500/25 hover:shadow-xl hover:-translate-y-0.5 transition-all flex items-center justify-center gap-2",children:["Tmn Ekle",o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]}),o.jsxs("div",{className:"flex-1 bg-white rounded-2xl border border-gray-100 shadow-sm flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50 px-5 py-4 border-b border-gray-100 flex items-center justify-between",children:[o.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"rn Listesi"}),o.jsxs("span",{className:"text-gray-500 text-xs",children:[f.length," rn"]})]}),o.jsxs("div",{className:"flex-1 overflow-auto",children:[o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-500 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 w-16",children:"Ekle"}),o.jsx("th",{className:"px-4 py-3",children:"Stok Kodu"}),o.jsx("th",{className:"px-4 py-3",children:"rn Ad"}),o.jsx("th",{className:"px-4 py-3 text-right",children:"Fiyat"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-50",children:f.map(D=>o.jsxs("tr",{className:"hover:bg-orange-50/50 transition-colors",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsx("button",{onClick:()=>_(D),className:"p-2 bg-gradient-to-r from-orange-500 to-amber-500 text-white rounded-lg hover:shadow-md transition-all",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:"font-mono text-sm text-orange-600 bg-orange-50 px-2 py-1 rounded-lg",children:D.stock_code})}),o.jsx("td",{className:"px-4 py-3 font-medium text-gray-800 truncate max-w-[200px]",children:D.name}),o.jsxs("td",{className:"px-4 py-3 text-right font-bold text-gray-900",children:["",parseFloat(D.price).toLocaleString("tr-TR",{minimumFractionDigits:2})]})]},D.stock_code))})]}),f.length===0&&o.jsx("div",{className:"text-center py-12 text-gray-400",children:"rn bulunamad"})]})]}),o.jsxs("div",{className:"w-80 bg-white rounded-2xl border border-gray-100 shadow-sm flex flex-col overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50 px-5 py-4 border-b border-gray-100",children:o.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"Yazdrlacak Etiketler"})}),o.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-2",children:[m.map((D,O)=>o.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-50 to-orange-50/50 p-3 rounded-xl border border-gray-100 group",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-gray-800 text-sm truncate",children:D.name}),o.jsx("div",{className:"text-xs text-orange-600 font-mono",children:D.stock_code})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",value:D.quantity,min:"1",onChange:B=>N(O,B.target.value),className:"w-14 px-2 py-1.5 bg-white border border-gray-200 rounded-lg text-center text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-orange-500"}),o.jsx("button",{onClick:()=>k(O),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},O)),m.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Liste bo"}),o.jsx("p",{className:"text-gray-300 text-xs mt-1",children:'rn eklemek iin "+" butonuna tklayn'})]})]}),o.jsxs("div",{className:"p-4 border-t border-gray-100 space-y-2",children:[o.jsxs("button",{onClick:A,disabled:m.length===0,className:`w-full py-3.5 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${m.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg shadow-green-500/25 hover:shadow-xl hover:-translate-y-0.5"}`,children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Etiketleri Yazdr"]}),m.length>0&&o.jsx("button",{onClick:()=>w([]),className:"w-full py-2.5 bg-red-50 text-red-600 rounded-xl font-medium hover:bg-red-100 transition-all text-sm",children:"Listeyi Temizle"})]})]})]})]})})}function uz(){const[e,r]=Q.useState([]),[t,n]=Q.useState(!0),[a,i]=Q.useState(!1),[u,f]=Q.useState(!1),[g,m]=Q.useState(null),[w,_]=Q.useState(null),[E,k]=Q.useState({show:!1,title:"",message:""}),[N,A]=Q.useState(!1),[C,I]=Q.useState({name:"",stockCode:"",barcode:"",brand:"",group:"",priceMin:"",priceMax:"",displayLimit:"100"}),[D,O]=Q.useState({key:"name",direction:"asc"}),[B,U]=Q.useState({name:"",stock_code:"",barcode:"",price:"",stock:"",group:"",brand:""}),[X,F]=Q.useState(!1),[Y,H]=Q.useState("new"),[ce,J]=Q.useState(!1),[V,xe]=Q.useState(!1),W=()=>{H("new"),F(!0)},ne=()=>{H("update"),F(!0)},be=()=>{const Ie=e.map(Te=>({"Stok Kodu":Te.stock_code||"",Barkod:Te.barcode||"","rn Ad":Te.name||"",Marka:Te.brand||"",Grup:Te.group||"",Stok:Te.stock||0,Fiyat:Te.price||0})),z=Qh.json_to_sheet(Ie),De=Qh.book_new();Qh.book_append_sheet(De,z,"rnler"),YU(De,`urunler_${new Date().toISOString().slice(0,10)}.xlsx`)};Q.useEffect(()=>{fe()},[]);const fe=async()=>{try{const Ie=await Cn.getAll();r(Ie.data?.products||[])}catch(Ie){console.error("rnler yklenirken hata:",Ie)}finally{n(!1)}},Ve=Ie=>typeof Ie!="string"?"":Ie.toLowerCase().replace(//g,"g").replace(//g,"u").replace(//g,"s").replace(//g,"i").replace(//g,"o").replace(//g,"c"),ge=()=>{let Ie=[...e];if(C.name){const z=Ve(C.name);Ie=Ie.filter(De=>Ve(De.name).includes(z))}if(C.stockCode){const z=Ve(C.stockCode);Ie=Ie.filter(De=>Ve(De.stock_code).includes(z))}if(C.barcode){const z=Ve(C.barcode);Ie=Ie.filter(De=>Ve(De.barcode).includes(z))}if(C.brand){const z=Ve(C.brand);Ie=Ie.filter(De=>Ve(De.brand).includes(z))}if(C.group){const z=Ve(C.group);Ie=Ie.filter(De=>Ve(De.group).includes(z))}if(C.priceMin){const z=parseFloat(C.priceMin);isNaN(z)||(Ie=Ie.filter(De=>De.price>=z))}if(C.priceMax){const z=parseFloat(C.priceMax);isNaN(z)||(Ie=Ie.filter(De=>De.price<=z))}if(Ie.sort((z,De)=>{const Te=D.key;if(z[Te]==null||De[Te]==null)return 0;if(Te==="stock"||Te==="price"){const de=parseFloat(z[Te])||0,Ee=parseFloat(De[Te])||0;return D.direction==="asc"?de-Ee:Ee-de}const le=String(z[Te]).toLowerCase().localeCompare(String(De[Te]).toLowerCase(),"tr");return D.direction==="asc"?le:-le}),C.displayLimit!=="all"){const z=parseInt(C.displayLimit);return{products:Ie.slice(0,z),total:Ie.length}}return{products:Ie,total:Ie.length}},{products:We,total:re}=ge(),L=Ie=>{O(z=>({key:Ie,direction:z.key===Ie&&z.direction==="asc"?"desc":"asc"}))},q=Ie=>D.key!==Ie?"":D.direction==="asc"?"":"",P=()=>{I({name:"",stockCode:"",barcode:"",brand:"",group:"",priceMin:"",priceMax:"",displayLimit:"100"})},Z=()=>`STK-${Math.floor(1e5+Math.random()*9e5)}`,pe=()=>{m(null),U({name:"",stock_code:Z(),barcode:"",price:"",stock:"",group:"",brand:""}),i(!0)},Le=Ie=>{m(Ie),U({name:Ie.name||"",stock_code:Ie.stock_code||"",barcode:Ie.barcode||"",price:Ie.price?.toString()||"",stock:Ie.stock?.toString()||"",group:Ie.group||"",brand:Ie.brand||""}),i(!0)},Be=Ie=>{m(Ie),f(!0)},Pe=async Ie=>{Ie.preventDefault();try{const z={...B,price:parseFloat(B.price)||0,stock:parseInt(B.stock)||0};g?await Cn.update(g.stock_code,z):await Cn.add(z),i(!1),fe()}catch(z){const De=z.response?.data?.message||z.message||"";De.includes("products_stock_code")&&De.includes("unique")?k({show:!0,title:" Stok Kodu Kullanmda",message:`"${B.stock_code}" stok kodu sistemde zaten kaytldr. Ltfen farkl bir stok kodu giriniz.`}):k({show:!0,title:" Hata Olutu",message:De||"Bilinmeyen bir hata olutu."})}},et=async Ie=>{if(confirm("Bu rn silmek istediinizden emin misiniz?"))try{await Cn.delete(Ie),fe()}catch(z){alert("Silme hatas: "+(z.response?.data?.message||z.message))}},ut=async()=>{if(!w){alert(" Ltfen nce bir resim seiniz! (Dosya alglanmad)");return}alert("Resim ykleniyor... Ltfen bekleyin.");const Ie=new FormData;Ie.append("product_image",w);try{await Cn.updateImage(g.stock_code,Ie),alert("Resim baaryla gncellendi!"),f(!1),_(null),fe()}catch(z){console.error(z),alert("Resim ykleme hatas: "+(z.response?.data?.message||z.message))}},ve=Ie=>{const z=parseInt(Ie)||0;return z<=0?"text-red-600 font-bold":z<10?"text-amber-600 font-bold":"text-gray-800"};return t?o.jsx("div",{className:"flex items-center justify-center min-h-96 transition-all duration-300",children:o.jsx("div",{className:"spinner"})}):o.jsxs("div",{className:"flex h-[calc(100vh-0px)] transition-all duration-300",children:[N&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>A(!1)}),o.jsxs("aside",{className:`
                fixed lg:static inset-y-0 left-0 z-50
                w-72 bg-white/90 backdrop-blur-2xl border-r border-slate-200/60 p-5 overflow-y-auto
                transform transition-transform duration-500 cubic-bezier(0.4, 0, 0.2, 1) text-slate-700
                ${N?"translate-x-0 shadow-2xl":"-translate-x-full lg:translate-x-0 lg:shadow-none"}
            `,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 relative",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-blue-500/20 text-white",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),o.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Filtreleme"})]}),o.jsx("button",{onClick:()=>A(!1),className:"lg:hidden p-2 hover:bg-slate-100 rounded-xl transition-all active:scale-95",children:o.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"group",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1",children:"rn Ad"}),o.jsx("input",{type:"text",value:C.name,onChange:Ie=>I({...C,name:Ie.target.value}),placeholder:"rn ara...",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all text-slate-700 placeholder:text-slate-400 text-sm font-medium"})]}),o.jsxs("div",{className:"group",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1",children:"Stok Kodu"}),o.jsx("input",{type:"text",value:C.stockCode,onChange:Ie=>I({...C,stockCode:Ie.target.value}),placeholder:"Stok kodu ara...",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all text-slate-700 placeholder:text-slate-400 text-sm font-medium"})]}),o.jsxs("div",{className:"group",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1",children:"Barkod"}),o.jsx("input",{type:"text",value:C.barcode,onChange:Ie=>I({...C,barcode:Ie.target.value}),placeholder:"Barkod ara...",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 transition-all text-slate-700 placeholder:text-slate-400 text-sm font-medium"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"group",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1",children:"Marka"}),o.jsx("input",{type:"text",value:C.brand,onChange:Ie=>I({...C,brand:Ie.target.value}),placeholder:"Marka",className:"w-full px-3 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 transition-all text-slate-700 placeholder:text-slate-400 text-sm font-medium"})]}),o.jsxs("div",{className:"group",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1",children:"Grup"}),o.jsx("input",{type:"text",value:C.group,onChange:Ie=>I({...C,group:Ie.target.value}),placeholder:"Grup",className:"w-full px-3 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500/20 transition-all text-slate-700 placeholder:text-slate-400 text-sm font-medium"})]})]}),o.jsxs("div",{className:"p-3.5 rounded-xl bg-slate-50 border border-slate-200/60",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Fiyat Aral (TL)"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",value:C.priceMin,onChange:Ie=>I({...C,priceMin:Ie.target.value}),placeholder:"Min",className:"flex-1 px-3 py-2 bg-white rounded-lg border border-slate-200 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none text-sm transition-all text-center font-medium text-slate-700 placeholder:text-slate-400"}),o.jsx("span",{className:"text-slate-400 font-bold",children:"-"}),o.jsx("input",{type:"number",value:C.priceMax,onChange:Ie=>I({...C,priceMax:Ie.target.value}),placeholder:"Max",className:"flex-1 px-3 py-2 bg-white rounded-lg border border-slate-200 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none text-sm transition-all text-center font-medium text-slate-700 placeholder:text-slate-400"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1.5 ml-1",children:"Limit"}),o.jsxs("select",{value:C.displayLimit,onChange:Ie=>I({...C,displayLimit:Ie.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all font-medium text-slate-700 text-sm cursor-pointer",children:[o.jsx("option",{value:"50",children:"50 Urun Goster"}),o.jsx("option",{value:"100",children:"100 Urun Goster"}),o.jsx("option",{value:"1000",children:"1000 Urun Goster"}),o.jsx("option",{value:"all",children:"Hepsini Goster"})]})]})]}),o.jsx("div",{className:"mt-6 pt-5 border-t border-slate-100",children:o.jsxs("button",{onClick:P,className:"w-full py-3 bg-slate-800 text-white rounded-xl font-bold shadow-lg shadow-slate-300/50 hover:bg-slate-700 hover:shadow-xl hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2 group",children:[o.jsx("svg",{className:"w-4 h-4 group-hover:rotate-180 transition-transform duration-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Temizle"]})})]}),o.jsxs("main",{className:"flex-1 p-6 overflow-y-auto bg-gradient-to-br from-slate-50 via-white to-blue-50/30",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>A(!0),className:"lg:hidden p-3 bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all",children:o.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-gray-800 to-gray-700 bg-clip-text text-transparent",children:"rn Ynetimi"}),o.jsxs("p",{className:"text-gray-500 mt-1 flex items-center gap-2",children:[o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-blue-100 text-blue-600 rounded-full text-xs font-semibold",children:re}),"rn kaytl"]})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("button",{onClick:be,className:"group px-4 py-2.5 bg-gradient-to-r from-teal-500 to-cyan-600 text-white rounded-xl font-semibold shadow-lg shadow-cyan-500/25 hover:shadow-xl hover:shadow-cyan-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 whitespace-nowrap text-sm",children:[o.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Excel Dar Aktar"]}),o.jsxs("button",{onClick:W,className:"group px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-xl font-semibold shadow-lg shadow-green-500/25 hover:shadow-xl hover:shadow-green-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 whitespace-nowrap text-sm",children:[o.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Excel Yeni"]}),o.jsxs("button",{onClick:ne,className:"group px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/25 hover:shadow-xl hover:shadow-blue-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 whitespace-nowrap text-sm",children:[o.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Excel Gncelle"]}),o.jsxs("button",{onClick:()=>J(!0),className:"group px-4 py-2.5 bg-gradient-to-r from-violet-500 to-purple-600 text-white rounded-xl font-semibold shadow-lg shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 whitespace-nowrap text-sm",children:[o.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Toplu Resim"]}),o.jsxs("button",{onClick:()=>xe(!0),className:"group px-4 py-2.5 bg-gradient-to-r from-amber-500 to-orange-600 text-white rounded-xl font-semibold shadow-lg shadow-orange-500/25 hover:shadow-xl hover:shadow-orange-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 whitespace-nowrap text-sm",children:[o.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Etiket Yazdr"]}),o.jsxs("button",{onClick:pe,className:"px-4 py-2.5 bg-gradient-to-r from-gray-900 to-gray-800 text-white rounded-xl font-bold shadow-lg shadow-gray-900/25 hover:shadow-xl hover:shadow-gray-900/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2 whitespace-nowrap text-sm",children:[o.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Yeni rn"]})]})]})}),o.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-gray-100/80 shadow-xl shadow-gray-200/50 overflow-hidden",children:o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50 border-b border-gray-100",children:[o.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider w-16",children:"Resim"}),o.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>L("stock_code"),children:o.jsxs("span",{className:"flex items-center gap-1",children:["Stok Kodu ",q("stock_code")]})}),o.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Barkod"}),o.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>L("name"),children:o.jsxs("span",{className:"flex items-center gap-1",children:["rn Ad ",q("name")]})}),o.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>L("brand"),children:o.jsxs("span",{className:"flex items-center gap-1",children:["Marka ",q("brand")]})}),o.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>L("group"),children:o.jsxs("span",{className:"flex items-center gap-1",children:["Grup ",q("group")]})}),o.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>L("stock"),children:o.jsxs("span",{className:"flex items-center gap-1",children:["Stok ",q("stock")]})}),o.jsx("th",{className:"px-5 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>L("price"),children:o.jsxs("span",{className:"flex items-center gap-1",children:["Fiyat ",q("price")]})}),o.jsx("th",{className:"px-5 py-4 text-right text-xs font-bold text-gray-500 uppercase tracking-wider",children:"lemler"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-50",children:We.map((Ie,z)=>o.jsxs("tr",{className:`group hover:bg-blue-50/50 transition-all duration-150 ${z%2===0?"bg-white":"bg-gray-50/30"}`,children:[o.jsx("td",{className:"px-5 py-4",children:Ie.image_url?o.jsx("img",{src:Ie.image_url,alt:"",className:"w-12 h-12 object-cover rounded-xl border-2 border-gray-100 shadow-sm group-hover:shadow-md group-hover:scale-105 transition-all"}):o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-100 to-gray-50 rounded-xl flex items-center justify-center border-2 border-dashed border-gray-200",children:o.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),o.jsx("td",{className:"px-5 py-4",children:o.jsx("span",{className:"font-mono text-sm font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded-lg",children:Ie.stock_code})}),o.jsx("td",{className:"px-5 py-4 font-mono text-sm text-gray-500",children:Ie.barcode||"-"}),o.jsx("td",{className:"px-5 py-4",children:o.jsx("span",{className:"font-medium text-gray-900",children:Ie.name})}),o.jsx("td",{className:"px-5 py-4 text-gray-600",children:Ie.brand||"-"}),o.jsx("td",{className:"px-5 py-4",children:Ie.group&&o.jsx("span",{className:"px-2.5 py-1 bg-gradient-to-r from-gray-100 to-gray-50 text-gray-700 rounded-lg text-xs font-semibold border border-gray-200/50",children:Ie.group})}),o.jsx("td",{className:`px-5 py-4 font-bold ${ve(Ie.stock)}`,children:Ie.stock}),o.jsx("td",{className:"px-5 py-4",children:o.jsxs("span",{className:"font-bold text-gray-900",children:["",parseFloat(Ie.price).toLocaleString("tr-TR",{minimumFractionDigits:2})]})}),o.jsx("td",{className:"px-5 py-4 text-right",children:o.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>Be(Ie),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-100 rounded-lg transition-all hover:scale-110",title:"Resim Ykle",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),o.jsx("button",{onClick:()=>Le(Ie),className:"p-2 text-gray-500 hover:text-amber-600 hover:bg-amber-100 rounded-lg transition-all hover:scale-110",title:"Dzenle",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),o.jsx("button",{onClick:()=>et(Ie.stock_code),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-100 rounded-lg transition-all hover:scale-110",title:"Sil",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},Ie.stock_code))})]}),We.length===0&&o.jsxs("div",{className:"text-center py-16",children:[o.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),o.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"Henz rn yok"}),o.jsx("p",{className:"text-gray-400 text-sm mt-1",children:'lk rnnz eklemek iin "Yeni rn" butonuna tklayn'})]})]})})]}),a&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-3xl max-h-[90vh] overflow-hidden shadow-2xl",children:[o.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-10 py-8",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}):o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight",children:g?"rn Dzenle":"Yeni rn Ekle"}),o.jsx("p",{className:"text-slate-400 text-base mt-1",children:"rn bilgilerini doldurun"})]})]}),o.jsx("button",{onClick:()=>i(!1),className:"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition-all",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsxs("form",{onSubmit:Pe,className:"p-10 space-y-8 overflow-y-auto max-h-[calc(90vh-140px)] bg-gradient-to-b from-slate-50 to-white",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["rn Ad ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsx("input",{type:"text",value:B.name,onChange:Ie=>U({...B,name:Ie.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"rn adn giriniz...",required:!0,autoFocus:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["Stok Kodu ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsx("input",{type:"text",value:B.stock_code,onChange:Ie=>U({...B,stock_code:Ie.target.value}),className:`w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400 font-mono ${g?"opacity-50 cursor-not-allowed bg-slate-100":""}`,placeholder:"STK-001",required:!0,disabled:!!g})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Barkod"}),o.jsx("input",{type:"text",value:B.barcode,onChange:Ie=>U({...B,barcode:Ie.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400 font-mono",placeholder:"8690123456789"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["Fiyat () ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsx("input",{type:"number",step:"0.01",value:B.price,onChange:Ie=>U({...B,price:Ie.target.value}),className:"w-full px-6 py-5 text-2xl font-bold rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"0.00",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Stok Miktar"}),o.jsx("input",{type:"number",value:B.stock,onChange:Ie=>U({...B,stock:Ie.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"0"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Marka"}),o.jsx("input",{type:"text",value:B.brand,onChange:Ie=>U({...B,brand:Ie.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Marka ad..."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Grup"}),o.jsx("input",{type:"text",value:B.group,onChange:Ie=>U({...B,group:Ie.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"rn grubu..."})]}),o.jsxs("div",{className:"flex gap-4 pt-8",children:[o.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 py-5 text-lg font-bold text-slate-600 bg-slate-100 rounded-2xl hover:bg-slate-200 transition-all active:scale-[0.98]",children:"ptal"}),o.jsxs("button",{type:"submit",className:"flex-[2] py-5 text-xl font-bold text-white bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl hover:from-emerald-600 hover:to-teal-600 shadow-xl shadow-emerald-500/30 transition-all hover:scale-[1.01] active:scale-[0.99]",children:[" ",g?"Gncelle":"Kaydet"]})]})]})]})}),u&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:" Resim Gncelle"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:Ie=>_(Ie.target.files[0]),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),o.jsx("div",{className:"text-xs text-center text-gray-400",children:w?` Seilen: ${w.name}`:" Dosya seilmedi"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:()=>f(!1),className:"flex-1 px-4 py-2 border border-gray-200 rounded-xl hover:bg-gray-50",children:"ptal"}),o.jsx("button",{type:"button",onClick:ut,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors",children:"Ykle"})]})]})]})}),o.jsx(iz,{isOpen:X,onClose:()=>F(!1),type:Y,onSuccess:fe}),o.jsx(lz,{isOpen:ce,onClose:()=>J(!1),products:e}),o.jsx(cz,{isOpen:V,onClose:()=>xe(!1),products:e}),E.show&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in zoom-in-95 duration-200",children:[o.jsx("div",{className:"bg-gradient-to-r from-red-500 to-rose-600 px-6 py-4",children:o.jsx("h3",{className:"text-xl font-bold text-white",children:E.title})}),o.jsx("div",{className:"p-6",children:o.jsx("p",{className:"text-gray-700 text-base leading-relaxed",children:E.message})}),o.jsx("div",{className:"px-6 pb-6",children:o.jsx("button",{onClick:()=>k({show:!1,title:"",message:""}),className:"w-full py-3 bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-800 hover:to-gray-900 text-white font-bold rounded-xl transition-all shadow-lg",children:"Tamam"})})]})})]})}function dz(){const[e,r]=Q.useState([]),[t,n]=Q.useState(!0),[a,i]=Q.useState(""),[u,f]=Q.useState("Tm"),[g,m]=Q.useState("Aktif"),[w,_]=Q.useState(null),[E,k]=Q.useState("asc"),[N,A]=Q.useState(!1),[C,I]=Q.useState(!1),[D,O]=Q.useState(null),[B,U]=Q.useState({customer_code:"",name:"",company:"",group:"Cari",is_active:!0,address:"",city:"",district:"",zip_code:"",country:"",tax_office:"",tax_number:""}),[X,F]=Q.useState(!1),[Y,H]=Q.useState({customer_id:"",amount:"",description:"deme",payment_type:"Nakit"});Q.useEffect(()=>{ce()},[]);const ce=async()=>{try{const P=await Hn.getAll();r(P.data?.customers||[])}catch(P){console.error("Mteriler yklenirken hata:",P)}finally{n(!1)}},J=["Tm","Cari","Perakende","Firmalar"],V=["Tm","Aktif","Pasif"],xe=e.filter(P=>{const Z=P.is_active!==!1;return!(g==="Aktif"&&!Z||g==="Pasif"&&Z||u!=="Tm"&&(P.group||"Cari")!==u||a&&!`${P.customer_code||""} ${P.name} ${P.city} ${P.district}`.toLowerCase().includes(a.toLowerCase()))}).sort((P,Z)=>{if(!w)return 0;let pe=P[w],Le=Z[w];return w==="balance"?(pe=parseFloat(P.balance)||0,Le=parseFloat(Z.balance)||0,E==="asc"?pe-Le:Le-pe):(pe=(pe||"").toString(),Le=(Le||"").toString(),E==="asc"?pe.localeCompare(Le,"tr"):Le.localeCompare(pe,"tr"))}),W=P=>{w===P?k(E==="asc"?"desc":"asc"):(_(P),k("asc"))},ne=()=>{U({customer_code:"",name:"",company:"",group:"Cari",is_active:!0,address:"",city:"",district:"",zip_code:"",country:"",tax_office:"",tax_number:""}),A(!0)},be=P=>{O(P),U({customer_code:P.customer_code||"",name:P.name||"",company:P.company||"",group:P.group||"Cari",is_active:P.is_active!==!1,address:P.address||"",city:P.city||"",district:P.district||"",zip_code:P.zip_code||"",country:P.country||"",tax_office:P.tax_office||"",tax_number:P.tax_number||""}),I(!0)},fe=()=>{const P=e.map(Le=>Le.customer_code).filter(Le=>Le&&/^M\d+$/.test(Le)).map(Le=>parseInt(Le.substring(1),10));return`M${((P.length>0?Math.max(...P):0)+1).toString().padStart(4,"0")}`},Ve=async()=>{if(!B.name.trim()){alert("Mteri ad bo braklamaz.");return}const P={...B};P.customer_code.trim()||(P.customer_code=fe());try{const Z=await Hn.add(P);Z.data?.success?(alert(Z.data.message),A(!1),ce()):alert("Hata: "+Z.data?.message)}catch(Z){alert("Mteri eklenirken hata: "+(Z.response?.data?.message||Z.message))}},ge=async()=>{if(D)try{const P=await Hn.update(D.id,B);P.data?.success?(alert(P.data.message),I(!1),ce()):alert("Gncelleme hatas: "+P.data?.message)}catch(P){alert("Gncelleme hatas: "+(P.response?.data?.message||P.message))}},We=async P=>{if(confirm("Kalc olarak silmek istediinize emin misiniz?"))try{const Z=await Hn.delete(P);alert(Z.data?.message),Z.data?.success&&ce()}catch(Z){alert("Silme hatas: "+(Z.response?.data?.message||Z.message))}},re=async()=>{if(!Y.customer_id||!Y.amount){alert("Ltfen mteri sein ve tutar girin.");return}try{const P=await Hn.addPayment(Y);P.data?.success?(alert("deme baaryla alnd."),F(!1),ce(),H({customer_id:"",amount:"",description:"deme",payment_type:"Nakit"})):alert("Hata: "+P.data?.message)}catch(P){alert("deme hatas: "+(P.response?.data?.message||P.message))}},L=()=>{const P=["Mteri Kodu","Ksa Ad","Firma","Grubu","Durum","Bakiye","ehir","le","Adres","Vergi Dairesi","Vergi No"],Z=xe.map(ut=>[ut.customer_code||"",ut.name||"",ut.company||"",ut.group||"Cari",ut.is_active!==!1?"Aktif":"Pasif",(parseFloat(ut.balance)||0).toFixed(2),ut.city||"",ut.district||"",ut.address||"",ut.tax_office||"",ut.tax_number||""]),Le="\uFEFF"+[P,...Z].map(ut=>ut.map(ve=>`"${String(ve).replace(/"/g,'""')}"`).join(";")).join(`
`),Be=new Blob([Le],{type:"text/csv;charset=utf-8"}),Pe=URL.createObjectURL(Be),et=document.createElement("a");et.href=Pe,et.download=`Musteriler_${new Date().toISOString().split("T")[0]}.csv`,et.click(),URL.revokeObjectURL(Pe)},q=P=>P?new Date(P).toLocaleString("tr-TR"):"-";return t?o.jsx("div",{className:"flex items-center justify-center min-h-96",children:o.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):o.jsxs("div",{className:"h-[calc(100vh-64px)] bg-gray-100 flex flex-col overflow-hidden",children:[o.jsx("header",{className:"bg-gradient-to-r from-slate-50 via-white to-blue-50/30 px-6 py-5 shadow-sm border-b border-gray-100",children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-gray-800 to-gray-700 bg-clip-text text-transparent",children:"Mteriler"}),o.jsxs("p",{className:"text-gray-500 mt-1 flex items-center gap-2",children:[o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-blue-100 text-blue-600 rounded-full text-xs font-semibold",children:e.length}),"mteri kaytl"]})]}),o.jsxs("div",{className:"flex flex-wrap gap-3 w-full lg:w-auto",children:[o.jsxs("button",{onClick:()=>F(!0),className:"flex-1 lg:flex-none min-w-fit px-6 py-3 bg-gradient-to-r from-violet-500 to-purple-600 text-white rounded-xl font-semibold shadow-lg shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2 whitespace-nowrap",children:[o.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"deme Al"]}),o.jsxs("button",{onClick:L,className:"flex-1 lg:flex-none min-w-fit px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/25 hover:shadow-xl hover:shadow-blue-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2 whitespace-nowrap",children:[o.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Excel ndir"]}),o.jsxs("button",{onClick:ne,className:"flex-1 lg:flex-none min-w-fit px-6 py-3 bg-gradient-to-r from-gray-900 to-gray-800 text-white rounded-xl font-bold shadow-lg shadow-gray-900/25 hover:shadow-xl hover:shadow-gray-900/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2 whitespace-nowrap",children:[o.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Yeni Mteri"]}),o.jsxs("button",{className:"flex-1 lg:flex-none min-w-fit px-6 py-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-xl font-semibold shadow-lg shadow-green-500/25 hover:shadow-xl hover:shadow-green-500/30 hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2 whitespace-nowrap",children:[o.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Excel Ykle"]})]})]})}),o.jsx("div",{className:"flex-1 overflow-hidden p-5 flex flex-col",children:o.jsxs("div",{className:"flex gap-5 h-full",children:[o.jsxs("div",{className:"w-64 bg-white rounded-lg shadow-md p-5 h-full overflow-y-auto flex-shrink-0",children:[o.jsx("h3",{className:"text-lg font-semibold border-b-2 border-gray-100 pb-2 mb-4",children:"Filtreleme"}),o.jsxs("div",{className:"mb-5",children:[o.jsx("label",{className:"block mb-1 font-bold text-gray-600 text-sm",children:"Hesap Durumu:"}),o.jsx("select",{value:g,onChange:P=>m(P.target.value),className:"w-full p-2 border border-gray-300 rounded",children:V.map(P=>o.jsx("option",{value:P,children:P==="Aktif"?"Sadece Aktifler":P==="Pasif"?"Sadece Pasifler":P},P))})]}),o.jsxs("div",{className:"mb-5",children:[o.jsx("label",{className:"block mb-1 font-bold text-gray-600 text-sm",children:"Mteri Grubu:"}),o.jsx("select",{value:u,onChange:P=>f(P.target.value),className:"w-full p-2 border border-gray-300 rounded",children:J.map(P=>o.jsx("option",{value:P,children:P},P))})]}),o.jsxs("div",{className:"mb-5",children:[o.jsx("label",{className:"block mb-1 font-bold text-gray-600 text-sm",children:"Arama:"}),o.jsx("input",{type:"text",value:a,onChange:P=>i(P.target.value),placeholder:"Ad, Kod, ehir vb. ara...",className:"w-full p-2 border border-gray-300 rounded"})]})]}),o.jsx("div",{className:"flex-1 bg-white rounded-lg shadow-md p-5 overflow-auto h-full",children:o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{onClick:()=>W("customer_code"),className:"border border-gray-200 p-2 text-left bg-gray-50 cursor-pointer hover:bg-gray-100 font-semibold",children:"Mteri Kodu"}),o.jsx("th",{onClick:()=>W("name"),className:"border border-gray-200 p-2 text-left bg-gray-50 cursor-pointer hover:bg-gray-100 font-semibold",children:"Ksa Ad"}),o.jsx("th",{onClick:()=>W("group"),className:"border border-gray-200 p-2 text-left bg-gray-50 cursor-pointer hover:bg-gray-100 font-semibold",children:"Grubu"}),o.jsx("th",{className:"border border-gray-200 p-2 text-left bg-gray-50 font-semibold",children:"Durum"}),o.jsx("th",{onClick:()=>W("balance"),className:"border border-gray-200 p-2 text-left bg-gray-50 cursor-pointer hover:bg-gray-100 font-semibold",children:"Bakiye"}),o.jsx("th",{className:"border border-gray-200 p-2 text-left bg-gray-50 font-semibold",children:"Bakiye Durumu"}),o.jsx("th",{className:"border border-gray-200 p-2 text-left bg-gray-50 font-semibold",children:"Son lem Tarihi"}),o.jsx("th",{className:"border border-gray-200 p-2 text-left bg-gray-50 font-semibold",children:"lemler"})]})}),o.jsx("tbody",{children:xe.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"border border-gray-200 p-4 text-center text-gray-500",children:"Kriterlere uygun kayt bulunamad."})}):xe.map(P=>{const Z=parseFloat(P.balance)||0,pe=P.is_active!==!1;return o.jsxs("tr",{className:pe?"":"opacity-60 bg-gray-50",children:[o.jsx("td",{className:"border border-gray-200 p-2 font-bold",children:P.customer_code||"-"}),o.jsx("td",{className:"border border-gray-200 p-2",children:P.name}),o.jsx("td",{className:"border border-gray-200 p-2",children:P.group||"Cari"}),o.jsx("td",{className:"border border-gray-200 p-2",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold text-white ${pe?"bg-green-500":"bg-gray-500"}`,children:pe?"Aktif":"Pasif"})}),o.jsxs("td",{className:`border border-gray-200 p-2 font-bold ${Z>0?"text-red-500":Z<0?"text-green-500":""}`,children:[Z.toFixed(2)," TL"]}),o.jsx("td",{className:`border border-gray-200 p-2 ${Z>0?"text-red-500":Z<0?"text-green-500":""}`,children:Z>0?"Borlu":Z<0?"Alacakl":"Ntr"}),o.jsx("td",{className:"border border-gray-200 p-2",children:q(P.last_transaction_date)}),o.jsx("td",{className:"border border-gray-200 p-2",children:o.jsxs("div",{className:"flex items-center justify-start gap-2",children:[o.jsx(hr,{to:`/customer/${encodeURIComponent(P.name)}`,className:"group p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md border border-gray-100 hover:border-blue-200",title:"Detaylar",children:o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),o.jsx("button",{onClick:()=>be(P),className:"group p-2 text-amber-500 hover:bg-amber-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md border border-gray-100 hover:border-amber-200",title:"Dzenle",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),o.jsx("button",{onClick:()=>We(P.id),className:"group p-2 text-red-500 hover:bg-red-50 rounded-lg transition-all duration-200 hover:scale-110 shadow-sm hover:shadow-md border border-gray-100 hover:border-red-200",title:"Sil",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},P.id)})})]})})]})}),N&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center p-4 z-50 overflow-y-auto",children:o.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-3xl max-h-[90vh] overflow-hidden shadow-2xl my-8",children:[o.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-10 py-8",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight",children:"Yeni Mteri Ekle"}),o.jsx("p",{className:"text-slate-400 text-base mt-1",children:"Mteri bilgilerini doldurun"})]})]}),o.jsx("button",{onClick:()=>A(!1),className:"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition-all",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsxs("div",{className:"p-10 space-y-7 overflow-y-auto max-h-[calc(90vh-200px)] bg-gradient-to-b from-slate-50 to-white",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["Mteri Ad ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsx("input",{type:"text",value:B.name,onChange:P=>U({...B,name:P.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Mteri adn giriniz...",required:!0,autoFocus:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Mteri Kodu"}),o.jsx("input",{type:"text",value:B.customer_code,onChange:P=>U({...B,customer_code:P.target.value}),placeholder:"Otomatik retilir",className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400 font-mono"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Firma Bilgileri"}),o.jsx("input",{type:"text",value:B.company,onChange:P=>U({...B,company:P.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Firma ad..."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Grubu"}),o.jsxs("select",{value:B.group,onChange:P=>U({...B,group:P.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all",children:[o.jsx("option",{value:"Cari",children:"Cari"}),o.jsx("option",{value:"Perakende",children:"Perakende"}),o.jsx("option",{value:"Firmalar",children:"Firmalar"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Durumu"}),o.jsxs("select",{value:B.is_active.toString(),onChange:P=>U({...B,is_active:P.target.value==="true"}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all",children:[o.jsx("option",{value:"true",children:"Aktif"}),o.jsx("option",{value:"false",children:"Pasif"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Adres"}),o.jsx("textarea",{value:B.address,onChange:P=>U({...B,address:P.target.value}),rows:"3",className:"w-full px-6 py-5 text-lg rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all resize-none placeholder:text-slate-400",placeholder:"Adres bilgisi..."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"l"}),o.jsx("input",{type:"text",value:B.city,onChange:P=>U({...B,city:P.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"l"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"le"}),o.jsx("input",{type:"text",value:B.district,onChange:P=>U({...B,district:P.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"le"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Vergi Dairesi"}),o.jsx("input",{type:"text",value:B.tax_office,onChange:P=>U({...B,tax_office:P.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Vergi dairesi"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Vergi Numaras"}),o.jsx("input",{type:"text",value:B.tax_number,onChange:P=>U({...B,tax_number:P.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-emerald-500/20 focus:border-emerald-500 outline-none transition-all placeholder:text-slate-400 font-mono",placeholder:"11111111111"})]})]})]}),o.jsxs("div",{className:"bg-slate-50 px-10 py-6 border-t border-slate-100 flex gap-4",children:[o.jsx("button",{onClick:()=>A(!1),className:"flex-1 py-5 text-lg font-bold text-slate-600 bg-slate-100 rounded-2xl hover:bg-slate-200 transition-all active:scale-[0.98]",children:"ptal"}),o.jsx("button",{onClick:Ve,className:"flex-[2] py-5 text-xl font-bold text-white bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl hover:from-emerald-600 hover:to-teal-600 shadow-xl shadow-emerald-500/30 transition-all hover:scale-[1.01] active:scale-[0.99]",children:" Kaydet"})]})]})}),C&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 z-50 overflow-y-auto",children:o.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl max-h-[90vh] overflow-hidden shadow-2xl my-8",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-indigo-500 to-violet-500 px-8 py-6",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),"Mteri Dzenle"]}),o.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsxs("div",{className:"p-8 space-y-5 overflow-y-auto max-h-[calc(90vh-180px)]",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Durumu"}),o.jsxs("select",{value:B.is_active.toString(),onChange:P=>U({...B,is_active:P.target.value==="true"}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",children:[o.jsx("option",{value:"true",children:"Aktif"}),o.jsx("option",{value:"false",children:"Pasif"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Mteri Kodu"}),o.jsx("input",{type:"text",value:B.customer_code,onChange:P=>U({...B,customer_code:P.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Ksa Ad *"}),o.jsx("input",{type:"text",value:B.name,onChange:P=>U({...B,name:P.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Firma Bilgileri"}),o.jsx("input",{type:"text",value:B.company,onChange:P=>U({...B,company:P.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Grubu"}),o.jsxs("select",{value:B.group,onChange:P=>U({...B,group:P.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",children:[o.jsx("option",{value:"Cari",children:"Cari"}),o.jsx("option",{value:"Perakende",children:"Perakende"}),o.jsx("option",{value:"Firmalar",children:"Firmalar"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Adresi"}),o.jsx("input",{type:"text",value:B.address,onChange:P=>U({...B,address:P.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"l"}),o.jsx("input",{type:"text",value:B.city,onChange:P=>U({...B,city:P.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"le"}),o.jsx("input",{type:"text",value:B.district,onChange:P=>U({...B,district:P.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Posta Kodu"}),o.jsx("input",{type:"text",value:B.zip_code,onChange:P=>U({...B,zip_code:P.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"lke"}),o.jsx("input",{type:"text",value:B.country,onChange:P=>U({...B,country:P.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Vergi Dairesi"}),o.jsx("input",{type:"text",value:B.tax_office,onChange:P=>U({...B,tax_office:P.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Vergi Numaras"}),o.jsx("input",{type:"text",value:B.tax_number,onChange:P=>U({...B,tax_number:P.target.value}),className:"w-full px-4 py-3 bg-gray-50 border-0 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 px-8 py-5 border-t border-gray-100 flex gap-3",children:[o.jsx("button",{onClick:()=>I(!1),className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-all",children:"ptal"}),o.jsx("button",{onClick:ge,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-blue-500/25 hover:shadow-xl hover:-translate-y-0.5 transition-all",children:"Gncelle"})]})]})}),X&&o.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl overflow-hidden shadow-2xl",children:[o.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-10 py-8",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-violet-400 to-purple-500 rounded-2xl flex items-center justify-center shadow-lg shadow-purple-500/30",children:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight",children:"deme Al"}),o.jsx("p",{className:"text-slate-400 text-base mt-1",children:"Mteriden deme tahsil et"})]})]}),o.jsx("button",{onClick:()=>F(!1),className:"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition-all",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsxs("div",{className:"p-10 space-y-8 bg-gradient-to-b from-slate-50 to-white",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["Mteri Se ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsxs("select",{value:Y.customer_id,onChange:P=>H({...Y,customer_id:P.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-purple-500/20 focus:border-purple-500 outline-none transition-all",children:[o.jsx("option",{value:"",children:"Mteri seiniz..."}),e.map(P=>o.jsxs("option",{value:P.id,children:[P.name," ",P.customer_code?`(${P.customer_code})`:""]},P.id))]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-base font-semibold text-slate-700",children:["deme Tutar () ",o.jsx("span",{className:"text-rose-500",children:"*"})]}),o.jsx("input",{type:"number",min:"0",step:"0.01",value:Y.amount,onChange:P=>H({...Y,amount:P.target.value}),className:"w-full px-6 py-6 text-3xl font-bold rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-purple-500/20 focus:border-purple-500 outline-none transition-all text-center placeholder:text-slate-300",placeholder:"0.00"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"deme Yntemi"}),o.jsx("div",{className:"flex gap-4",children:["Nakit","Kredi Kart","Havale"].map(P=>o.jsx("button",{onClick:()=>H({...Y,payment_type:P}),className:`flex-1 py-5 px-4 rounded-2xl font-bold text-lg transition-all ${Y.payment_type===P?"bg-gradient-to-r from-purple-500 to-violet-600 text-white shadow-xl shadow-purple-500/30":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:P},P))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-base font-semibold text-slate-700",children:"Aklama"}),o.jsx("input",{type:"text",value:Y.description,onChange:P=>H({...Y,description:P.target.value}),className:"w-full px-6 py-5 text-xl rounded-2xl border-2 border-slate-200 bg-white focus:ring-4 focus:ring-purple-500/20 focus:border-purple-500 outline-none transition-all placeholder:text-slate-400",placeholder:"rn: Kasm ay demesi"})]})]}),o.jsxs("div",{className:"bg-slate-50 px-10 py-6 border-t border-slate-100 flex gap-4",children:[o.jsx("button",{onClick:()=>F(!1),className:"flex-1 py-5 text-lg font-bold text-slate-600 bg-slate-100 rounded-2xl hover:bg-slate-200 transition-all active:scale-[0.98]",children:"ptal"}),o.jsx("button",{onClick:re,className:"flex-[2] py-5 text-xl font-bold text-white bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl hover:from-emerald-600 hover:to-teal-600 shadow-xl shadow-emerald-500/30 transition-all hover:scale-[1.01] active:scale-[0.99]",children:" demeyi Onayla"})]})]})})]})}function gS({sale:e,onClose:r,onUpdate:t,onDelete:n}){const[a,i]=Q.useState([]),[u,f]=Q.useState(!1),[g,m]=Q.useState(!1),[w,_]=Q.useState([]),[E,k]=Q.useState(""),[N,A]=Q.useState({show:!1,action:null});Q.useEffect(()=>{if(e){const J=e.items||e.products||[];i(JSON.parse(JSON.stringify(J)))}},[e]);const C=()=>a.reduce((J,V)=>{const xe=V.price*V.quantity*(1-(V.discount_rate||0)/100);return J+xe},0),I=J=>J?new Date(J).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",D=(J,V,xe)=>{i(W=>{const ne=[...W];return ne[J]={...ne[J],[V]:xe},ne})},O=J=>{confirm("Bu rn sattan kaldrmak istediinize emin misiniz?")&&i(V=>V.filter((xe,W)=>W!==J))},B=async()=>{try{const J=await Cn.getAll();_(J.data?.products||[])}catch(J){console.error("rnler yklenirken hata:",J)}},U=async()=>{await B(),k(""),m(!0)},X=J=>{const V={id:J.id,name:J.name,stock_code:J.stock_code,barcode:J.barcode,price:J.price,quantity:1,discount_rate:0};i(xe=>[...xe,V]),m(!1)},F=w.filter(J=>J.name?.toLowerCase().includes(E.toLowerCase())||J.stock_code?.toLowerCase().includes(E.toLowerCase())||J.barcode?.includes(E)),Y=J=>{const V=localStorage.getItem(J)||"123456";return prompt("lem iin parolay girin:")===V},H=async()=>{if(!Y("sales_edit_password")){alert("Hatal parola!");return}f(!0);try{const J=C();await fc.update(e.sale_code,{products:a,total:J}),alert("Sat baaryla gncellendi!"),t&&t(),r()}catch(J){alert("Gncelleme hatas: "+(J.message||"Bilinmeyen hata"))}finally{f(!1)}},ce=async()=>{if(!Y("sales_cancel_password")){alert("Hatal parola!");return}if(confirm("Bu sat iptal etmek istediinize emin misiniz?"))try{await fc.delete(e.sale_code),alert("Sat baaryla iptal edildi."),n&&n(),r()}catch(J){alert("Hata: "+(J.response?.data?.message||J.message))}};return e?o.jsxs("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center p-4 z-50",children:[o.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[o.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-10 py-8",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-3xl font-bold text-white tracking-tight",children:"Sat Detay"}),o.jsx("p",{className:"text-slate-400 text-base font-mono mt-1",children:e.sale_code})]})]}),o.jsx("button",{onClick:r,className:"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition-all",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-10 bg-gradient-to-b from-slate-50 to-white",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-100 p-5 shadow-sm",children:[o.jsx("p",{className:"text-slate-500 text-sm font-medium mb-1",children:"Mteri"}),o.jsx("p",{className:"font-bold text-slate-800 text-lg",children:e.customer})]}),o.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-100 p-5 shadow-sm",children:[o.jsx("p",{className:"text-slate-500 text-sm font-medium mb-1",children:"deme"}),o.jsx("p",{className:"font-bold text-slate-800 text-lg",children:e.payment_method})]}),o.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-100 p-5 shadow-sm",children:[o.jsx("p",{className:"text-slate-500 text-sm font-medium mb-1",children:"Tarih"}),o.jsx("p",{className:"font-bold text-slate-800 text-lg",children:I(e.date)})]}),o.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl p-5 text-white shadow-xl shadow-emerald-500/30",children:[o.jsx("p",{className:"text-emerald-100 text-sm font-medium mb-1",children:"Toplam"}),o.jsxs("p",{className:"text-3xl font-bold",children:["",C().toFixed(2)]})]})]}),o.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[o.jsx("h3",{className:"font-bold text-slate-800 text-xl",children:"rnler"}),o.jsxs("button",{onClick:U,className:"px-5 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg shadow-blue-500/25 flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"rn Ekle"]})]}),o.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-100 shadow-sm overflow-hidden",children:[o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Stok Kodu"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"rn Ad"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase w-24",children:"Miktar"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase w-32",children:"Fiyat"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase w-24",children:"skonto %"}),o.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-500 uppercase",children:"Toplam"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase w-16",children:"Sil"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-50",children:a.map((J,V)=>{const xe=J.price*J.quantity*(1-(J.discount_rate||0)/100);return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-3 text-gray-500 text-sm font-mono",children:J.stock_code||"-"}),o.jsx("td",{className:"px-4 py-3 font-medium text-gray-800",children:J.name}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("input",{type:"number",value:J.quantity,onChange:W=>D(V,"quantity",parseFloat(W.target.value)||0),className:"w-full px-2 py-1.5 text-center border border-gray-200  focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("input",{type:"number",value:J.price,onChange:W=>D(V,"price",parseFloat(W.target.value)||0),className:"w-full px-2 py-1.5 text-center border border-gray-200  focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("input",{type:"number",value:J.discount_rate||0,onChange:W=>D(V,"discount_rate",parseFloat(W.target.value)||0),className:"w-full px-2 py-1.5 text-center border border-gray-200  focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",max:"100"})}),o.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-gray-800",children:["",xe.toFixed(2)]}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("button",{onClick:()=>O(V),className:"p-2 text-red-500 hover:bg-red-50  transition-colors",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},V)})})]}),a.length===0&&o.jsx("div",{className:"text-center py-8 text-gray-500",children:"Henz rn eklenmedi"})]})]}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50/80",children:o.jsxs("div",{className:"flex items-center justify-between gap-4",children:[!e.is_deleted&&o.jsxs("button",{onClick:ce,className:"px-6 py-3 bg-red-50 text-red-600  font-bold hover:bg-red-100 transition-colors flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Sat ptal Et"]}),o.jsx("div",{className:"flex-1"}),o.jsx("button",{onClick:r,className:"px-6 py-3 bg-gray-200 text-gray-700  font-bold hover:bg-gray-300 transition-colors",children:"ptal"}),o.jsx("button",{onClick:H,disabled:u,className:"px-8 py-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white  font-bold hover:from-emerald-600 hover:to-green-700 transition-all shadow-lg shadow-emerald-500/30 flex items-center gap-2 disabled:opacity-50",children:u?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent -full animate-spin"}),"Kaydediliyor..."]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Deiiklikleri Kaydet"]})})]})})]}),g&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center p-4 z-[60]",children:o.jsxs("div",{className:"bg-white  w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col shadow-2xl",children:[o.jsxs("div",{className:"bg-gradient-to-r from-purple-500 via-purple-600 to-indigo-600 px-6 py-5",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm  flex items-center justify-center",children:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-white",children:"rn Ekle"}),o.jsxs("p",{className:"text-white/80 text-sm",children:[F.length," bulunabilir rn"]})]})]}),o.jsx("button",{onClick:()=>m(!1),className:"w-10 h-10 bg-white/20 hover:bg-white/30  flex items-center justify-center transition-all",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"mt-4 relative",children:[o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2",children:o.jsx("svg",{className:"w-5 h-5 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsx("input",{type:"text",value:E,onChange:J=>k(J.target.value),placeholder:"rn ad, stok kodu veya barkod...",className:"w-full pl-12 pr-4 py-3 bg-white/20 backdrop-blur-sm text-white placeholder-purple-200  border border-white/30 focus:outline-none focus:bg-white/30 focus:border-white/50 transition-all",autoFocus:!0})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gradient-to-b from-gray-50 to-white",children:F.length===0?o.jsx("div",{className:"text-center py-12 text-gray-500",children:"rn bulunamad"}):o.jsx("div",{className:"grid grid-cols-1 gap-2",children:F.slice(0,50).map(J=>o.jsxs("div",{onClick:()=>X(J),className:"bg-white  border border-gray-100 shadow-sm hover:shadow-lg hover:border-purple-200 transition-all duration-300 cursor-pointer overflow-hidden group p-4 flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-500  flex items-center justify-center flex-shrink-0",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-bold text-gray-800 truncate group-hover:text-purple-600 transition-colors",children:J.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[J.stock_code," | ",J.barcode]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-lg font-bold text-purple-600",children:["",J.price?.toFixed(2)]}),o.jsxs("p",{className:"text-xs text-gray-500",children:["Stok: ",J.stock]})]}),o.jsx("svg",{className:"w-5 h-5 text-gray-300 group-hover:text-purple-500 transition-colors flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]},J.id))})}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50/80",children:o.jsx("button",{onClick:()=>m(!1),className:"w-full py-3 bg-gray-200 text-gray-700  font-bold hover:bg-gray-300 transition-colors",children:"ptal"})})]})})]}):null}function fz(){const{customerName:e}=oA(),[r,t]=Q.useState(null),[n,a]=Q.useState([]),[i,u]=Q.useState(!0),[f,g]=Q.useState(null),m=D=>{if(D.transactionType==="Fatura"||D.transactionType==="Nakit"||D.transactionType==="K.Kart"||D.transactionType==="Veresiye"){const O={sale_code:D.sale_code||D.id,customer:r.name,payment_method:D.payment_method,date:D.created_at,total:D.total,items:D.items||D.products||[],is_deleted:!1};g(O)}},w=async(D,O)=>{if(D.stopPropagation(),!!confirm("Bu demeyi silmek mterinin borcunu artracaktr. Emin misiniz?"))try{await Hn.deletePayment(O.id,r.id,O.total),alert("deme silindi."),_()}catch(B){console.error(B),alert("Hata: "+(B.message||"deme silinemedi"))}};Q.useEffect(()=>{_()},[e]);const _=async()=>{try{const{data:D}=await Hn.getAll(),B=(D?.customers||[]).find(U=>U.name===decodeURIComponent(e));if(B){t(B);const{data:U}=await Hn.getTransactions(B.id);a(U?.transactions||[])}}catch(D){console.error("Mteri verileri yklenirken hata:",D)}finally{u(!1)}},E=D=>{if(!D)return"-";const O=new Date(D);return O.toLocaleDateString("tr-TR")+" "+O.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})},k=D=>(parseFloat(D)||0).toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}),N=n.map((D,O)=>{const B=parseFloat(D.total)||0;parseFloat(D.paid_amount);let U=0,X=0;D.type==="payment"?(X=B,U=0):D.payment_method==="veresiye"?(U=B,X=0):(U=B,X=B);let F="Fatura";D.type==="payment"?F="deme":D.payment_method==="nakit"?F="Nakit":D.payment_method==="kredi_karti"?F="K.Kart":D.payment_method==="veresiye"&&(F="Veresiye");const Y=U-X;let H="bg-green-100";return Y>0?H="bg-yellow-100":Y<0&&(H="bg-cyan-100"),{...D,debtAmount:U,creditAmount:X,transactionType:F,rowColor:H}}),A=N.reduce((D,O)=>({debt:D.debt+O.debtAmount,credit:D.credit+O.creditAmount}),{debt:0,credit:0}),C=parseFloat(r?.balance)||0;A.debt-A.credit;const I=C;return i?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:o.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):r?o.jsxs("div",{className:"min-h-screen bg-gray-100",children:[o.jsx("header",{className:"bg-white px-6 py-4 shadow-md",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(hr,{to:"/customers",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Cari Hareket Raporu"}),o.jsxs("p",{className:"text-gray-500 text-sm",children:[r.customer_code," - ",r.name]})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"px-4 py-2 bg-red-50 rounded-lg border border-red-200",children:[o.jsx("span",{className:"text-sm text-red-600",children:"Toplam Bor:"}),o.jsxs("span",{className:"ml-2 font-bold text-red-700",children:[k(A.debt)," TL"]})]}),o.jsxs("div",{className:"px-4 py-2 bg-green-50 rounded-lg border border-green-200",children:[o.jsx("span",{className:"text-sm text-green-600",children:"Toplam Alacak:"}),o.jsxs("span",{className:"ml-2 font-bold text-green-700",children:[k(A.credit)," TL"]})]}),o.jsxs("div",{className:`px-4 py-2 rounded-lg border ${I>0?"bg-red-100 border-red-300":I<0?"bg-green-100 border-green-300":"bg-gray-100 border-gray-300"}`,children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Net Bakiye:"}),o.jsxs("span",{className:`ml-2 font-bold ${I>0?"text-red-700":I<0?"text-green-700":"text-gray-700"}`,children:[k(Math.abs(I))," TL ",I>0?"(Borlu)":I<0?"(Alacakl)":""]})]})]})]})}),o.jsx("div",{className:"p-4",children:o.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-blue-600 text-white",children:[o.jsx("th",{className:"px-3 py-2 text-left font-semibold border-r border-blue-500",children:"Cari Kodu"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold border-r border-blue-500",children:"Ticari nvan"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold border-r border-blue-500",children:"Evrak No"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold border-r border-blue-500",children:"lem Tarihi"}),o.jsx("th",{className:"px-3 py-2 text-right font-semibold border-r border-blue-500",children:"Bor Tutar"}),o.jsx("th",{className:"px-3 py-2 text-right font-semibold border-r border-blue-500",children:"Alacak Tutar"}),o.jsx("th",{className:"px-3 py-2 text-right font-semibold border-r border-blue-500",children:"KPB Bakiyesi"}),o.jsx("th",{className:"px-3 py-2 text-center font-semibold border-r border-blue-500",children:"KPB B/A/S"}),o.jsx("th",{className:"px-3 py-2 text-center font-semibold border-r border-blue-500",children:"lem Tr"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold border-r border-blue-500",children:"Aklama"}),o.jsx("th",{className:"px-3 py-2 text-center font-semibold w-16",children:"Sil"})]})}),o.jsxs("tbody",{children:[N.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"px-4 py-8 text-center text-gray-500",children:"Bu mteriye ait hareket bulunmamaktadr."})}):N.map((D,O)=>{const B=N.slice(0,O+1).reduce((U,X)=>U+X.debtAmount-X.creditAmount,0);return o.jsxs("tr",{className:`${D.rowColor} border-b border-gray-200 hover:opacity-80 cursor-pointer transition-colors`,onClick:()=>m(D),children:[o.jsx("td",{className:"px-3 py-2 border-r border-gray-200 font-medium",children:r.customer_code}),o.jsx("td",{className:"px-3 py-2 border-r border-gray-200",children:r.name}),o.jsx("td",{className:"px-3 py-2 border-r border-gray-200 font-mono text-xs",children:D.sale_code||D.id?.substring(0,8)||"-"}),o.jsx("td",{className:"px-3 py-2 border-r border-gray-200 whitespace-nowrap",children:E(D.created_at)}),o.jsx("td",{className:"px-3 py-2 border-r border-gray-200 text-right font-medium",children:D.debtAmount>0?k(D.debtAmount):""}),o.jsx("td",{className:"px-3 py-2 border-r border-gray-200 text-right font-medium",children:D.creditAmount>0?k(D.creditAmount):""}),o.jsx("td",{className:"px-3 py-2 border-r border-gray-200 text-right font-bold",children:k(Math.abs(B))}),o.jsx("td",{className:`px-3 py-2 border-r border-gray-200 text-center font-bold ${B>0?"text-red-600":B<0?"text-green-600":"text-gray-600"}`,children:B>0?"Bor":B<0?"Alacak":"Sfr"}),o.jsx("td",{className:`px-3 py-2 border-r border-gray-200 text-center font-semibold ${D.transactionType==="Fatura"?"text-blue-600":D.transactionType==="Nakit"?"text-green-600":D.transactionType==="deme"?"text-purple-600":"text-gray-600"}`,children:D.transactionType}),o.jsx("td",{className:"px-3 py-2 text-left max-w-md truncate border-r border-gray-200",children:o.jsx("span",{className:"truncate",title:D.description||"",children:(D.items||D.products)?.map(U=>U.name).join(", ")||D.description||"-"})}),o.jsx("td",{className:"px-3 py-2 text-center",children:D.transactionType==="deme"&&o.jsx("button",{onClick:U=>w(U,D),className:"px-2 py-1 bg-red-100 text-red-600 rounded text-xs font-bold hover:bg-red-200 transition-colors",title:"demeyi Sil",children:"Sil"})})]},D.id||O)}),N.length>0&&o.jsxs("tr",{className:`font-bold text-base ${I>0?"bg-red-200":I<0?"bg-green-200":"bg-gray-200"}`,children:[o.jsx("td",{colSpan:4,className:"px-3 py-3 border-r border-gray-300 text-right uppercase",children:"Toplam:"}),o.jsx("td",{className:"px-3 py-3 border-r border-gray-300 text-right text-red-700",children:k(A.debt)}),o.jsx("td",{className:"px-3 py-3 border-r border-gray-300 text-right text-green-700",children:k(A.credit)}),o.jsx("td",{className:"px-3 py-3 border-r border-gray-300 text-right",children:k(Math.abs(I))}),o.jsx("td",{className:`px-3 py-3 border-r border-gray-300 text-center ${I>0?"text-red-700":I<0?"text-green-700":""}`,children:I>0?"YKSEL":I<0?"ALACAK":"SIFIR"}),o.jsx("td",{colSpan:3,className:"px-3 py-3"})]})]})]})})})}),f&&o.jsx(gS,{sale:f,onClose:()=>g(null),onUpdate:()=>{_(),g(null)},onDelete:()=>{_(),g(null)}})]}):o.jsx("div",{className:"min-h-screen bg-gray-100 p-6",children:o.jsxs("div",{className:"bg-white rounded-lg p-8 text-center shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-700",children:"Mteri Bulunamad"}),o.jsx(hr,{to:"/customers",className:"mt-4 inline-block px-6 py-2 bg-blue-500 text-white rounded-lg",children:"Mterilere Dn"})]})})}function hz(){const[e,r]=Q.useState([]),[t,n]=Q.useState(!0),[a,i]=Q.useState(!1),[u,f]=Q.useState(!1),[g,m]=Q.useState(!1),[w,_]=Q.useState(!1),[E,k]=Q.useState(null),[N,A]=Q.useState([]),[C,I]=Q.useState({saleCode:"",customerName:"",product:"",barcode:"",startDate:"",endDate:"",showDeleted:!1}),[D,O]=Q.useState({key:"date",direction:"desc"});Q.useEffect(()=>{const L=new Date,q=new Date;q.setDate(q.getDate()-30),I(pe=>({...pe,endDate:L.toISOString().split("T")[0],startDate:q.toISOString().split("T")[0]}));const P=localStorage.getItem("sales_show_total_sales");P!==null&&U(P==="true");const Z=localStorage.getItem("sales_show_total_revenue");Z!==null&&F(Z==="true")},[]);const[B,U]=Q.useState(!0),[X,F]=Q.useState(!0);Q.useEffect(()=>{C.startDate&&C.endDate&&Y()},[C.startDate,C.endDate,C.showDeleted,C.customerName,C.saleCode]);const Y=async()=>{n(!0);try{const L={start_date:C.startDate,end_date:C.endDate,show_deleted:C.showDeleted};C.saleCode&&(L.sale_code=C.saleCode),C.customerName&&(L.customer_name=C.customerName),(C.product||C.barcode)&&(L.search_term=C.product||C.barcode);const q=await fc.getAll(L);r(q.data?.sales||[])}catch(L){console.error("Satlar yklenirken hata:",L)}finally{n(!1)}},H=async()=>{try{const L=await Hn.getAll();A(L.data?.customers||[])}catch(L){console.error("Mteriler yklenirken hata:",L)}},ce=async()=>{await H(),setCustomerSearch(""),m(!0)},J=L=>{I(q=>({...q,customerName:L.name})),m(!1)},V=N.filter(L=>L.name?.toLowerCase().includes(customerSearch.toLowerCase())),xe=L=>typeof L!="string"?"":L.toLowerCase(),ne=[...e].sort((q,P)=>{let Z=q[D.key],pe=P[D.key];if(D.key==="total")return Z=parseFloat(Z)||0,pe=parseFloat(pe)||0,D.direction==="asc"?Z-pe:pe-Z;if(D.key==="date")return Z=new Date(Z||0),pe=new Date(pe||0),D.direction==="asc"?Z-pe:pe-Z;const Le=xe(Z).localeCompare(xe(pe),"tr");return D.direction==="asc"?Le:-Le}),be=L=>{O(q=>({key:L,direction:q.key===L&&q.direction==="asc"?"desc":"asc"}))},fe=L=>D.key!==L?"":D.direction==="asc"?"":"",Ve=()=>{const L=new Date,q=new Date;q.setDate(q.getDate()-30),I({saleCode:"",customerName:"",product:"",barcode:"",startDate:q.toISOString().split("T")[0],endDate:L.toISOString().split("T")[0],showDeleted:!1})},ge=L=>{k(L),f(!0)},We=L=>L?new Date(L).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",re=ne.reduce((L,q)=>L+(q.total||0),0);return o.jsxs("div",{className:"flex h-[calc(100vh-64px)] transition-all duration-300 overflow-hidden",children:[a&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>i(!1)}),o.jsxs("aside",{className:`
                fixed lg:static inset-y-0 left-0 z-50
                w-72 bg-white border-r border-gray-200 overflow-y-auto
                transform transition-transform duration-300 flex flex-col
                ${a?"translate-x-0":"-translate-x-full lg:translate-x-0"}
            `,children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-600 px-5 py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:o.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"Filtreler"}),o.jsx("p",{className:"text-white/70 text-xs",children:"Satis arama kriterleri"})]})]})}),o.jsxs("div",{className:"p-5 space-y-4 flex-1",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Satis Kodu"}),o.jsx("input",{type:"text",value:C.saleCode,onChange:L=>I({...C,saleCode:L.target.value}),placeholder:"Satis kodu...",className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-1 flex justify-between items-center",children:[o.jsx("span",{children:"Musteri Adi"}),o.jsx("button",{onClick:ce,className:"px-2 py-1 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 text-xs font-medium",title:"Mteri Listesinden Se",children:"+ Listeden Sec"})]}),o.jsx("input",{type:"text",value:C.customerName,onChange:L=>I({...C,customerName:L.target.value}),placeholder:"Musteri adi...",className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Urun/Stok"}),o.jsx("input",{type:"text",value:C.product,onChange:L=>I({...C,product:L.target.value}),placeholder:"Urun, stok kodu...",className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Barkod"}),o.jsx("input",{type:"text",value:C.barcode,onChange:L=>I({...C,barcode:L.target.value}),placeholder:"Barkod...",className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tarih Araligi"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"date",value:C.startDate,onChange:L=>I({...C,startDate:L.target.value}),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),o.jsx("input",{type:"date",value:C.endDate,onChange:L=>I({...C,endDate:L.target.value}),className:"w-full px-3 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[o.jsx("input",{type:"checkbox",id:"showDeleted",checked:C.showDeleted,onChange:L=>I({...C,showDeleted:L.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),o.jsx("label",{htmlFor:"showDeleted",className:"text-sm text-gray-600",children:"Silinen Satlar Gster"})]})]}),o.jsxs("div",{className:"p-5 border-t border-gray-200 space-y-2",children:[o.jsxs("button",{onClick:Y,className:"w-full py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg font-bold hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg shadow-blue-500/30 flex items-center justify-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Filtrele"]}),o.jsxs("button",{onClick:Ve,className:"w-full py-2.5 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Temizle"]})]})]}),o.jsxs("main",{className:"flex-1 p-5 overflow-y-auto bg-gray-50",children:[o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-5",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>i(!0),className:"lg:hidden p-2 bg-white rounded-lg hover:bg-gray-100 shadow-sm",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Satis Raporu"}),o.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[ne.length," satis, toplam ",re.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-5",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg p-4 text-white shadow-lg shadow-blue-500/20 text-center",children:[o.jsx("p",{className:"text-blue-100 text-sm",children:"Toplam Satis"}),o.jsx("p",{className:"text-2xl font-bold",children:B?ne.length:"******"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-green-600 rounded-lg p-4 text-white shadow-lg shadow-emerald-500/20 text-center",children:[o.jsx("p",{className:"text-emerald-100 text-sm",children:"Toplam Ciro"}),o.jsx("p",{className:"text-2xl font-bold",children:X?`${re.toLocaleString("tr-TR")}`:"******"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-500 rounded-lg p-4 text-white shadow-lg shadow-amber-500/20 text-center",children:[o.jsx("p",{className:"text-amber-100 text-sm",children:"Nakit"}),o.jsx("p",{className:"text-2xl font-bold",children:ne.filter(L=>L.payment_method==="Nakit").length})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg p-4 text-white shadow-lg shadow-purple-500/20 text-center",children:[o.jsx("p",{className:"text-purple-100 text-sm",children:"Kart"}),o.jsx("p",{className:"text-2xl font-bold",children:ne.filter(L=>L.payment_method==="POS").length})]})]}),t?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):o.jsx("div",{className:"bg-white rounded-lg border border-gray-100 shadow-sm overflow-hidden",children:o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:o.jsxs("tr",{children:[o.jsxs("th",{onClick:()=>be("sale_code"),className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase cursor-pointer hover:bg-gray-100 whitespace-nowrap",children:["Satis Kodu ",fe("sale_code")]}),o.jsxs("th",{onClick:()=>be("customer"),className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase cursor-pointer hover:bg-gray-100 whitespace-nowrap",children:["Musteri Adi ",fe("customer")]}),o.jsxs("th",{onClick:()=>be("date"),className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase cursor-pointer hover:bg-gray-100 whitespace-nowrap",children:["Tarih ",fe("date")]}),o.jsxs("th",{onClick:()=>be("total"),className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase cursor-pointer hover:bg-gray-100 whitespace-nowrap",children:["Toplam Fiyat ",fe("total")]}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Aciklama"}),o.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-500 uppercase",children:"Islemler"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-50",children:ne.map(L=>o.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${L.is_deleted?"opacity-50 line-through bg-red-50":""}`,children:[o.jsx("td",{className:"px-4 py-3 font-mono text-sm text-blue-600",children:L.sale_code}),o.jsx("td",{className:"px-4 py-3 text-gray-800",children:L.customer}),o.jsx("td",{className:"px-4 py-3 text-gray-600 text-sm whitespace-nowrap",children:We(L.date)}),o.jsxs("td",{className:"px-4 py-3 font-semibold text-gray-800",children:["",L.total?.toFixed(2)]}),o.jsx("td",{className:"px-4 py-3 text-gray-500 text-sm max-w-xs truncate",title:L.description,children:L.description||"-"}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsx("button",{onClick:()=>ge(L),className:"px-4 py-2 text-sm bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all shadow-md font-medium",children:"Detay"})})]},L.sale_code))})]}),ne.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),o.jsx("p",{className:"text-gray-500",children:"Satis bulunamadi."})]})]})})]}),g&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col shadow-2xl",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-600 px-6 py-5",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-white",children:"Musteri Sec"}),o.jsxs("p",{className:"text-white/80 text-sm",children:[N.length," kayitli musteri"]})]})]}),o.jsx("button",{onClick:()=>m(!1),className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-all",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"mt-4 relative",children:[o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2",children:o.jsx("svg",{className:"w-5 h-5 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsx("input",{type:"text",value:customerSearch,onChange:L=>setCustomerSearch(L.target.value),placeholder:"Musteri ara...",className:"w-full pl-12 pr-4 py-3 bg-white/20 backdrop-blur-sm text-white placeholder-blue-200 rounded-lg border border-white/30 focus:outline-none focus:bg-white/30 focus:border-white/50 transition-all",autoFocus:!0})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gradient-to-b from-gray-50 to-white",children:V.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),o.jsx("p",{className:"text-gray-500",children:"Musteri bulunamadi"})]}):o.jsx("div",{className:"space-y-2",children:V.map(L=>o.jsx("div",{onClick:()=>J(L),className:"bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg hover:border-blue-200 transition-all duration-300 cursor-pointer overflow-hidden group",children:o.jsxs("div",{className:"p-4 flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg flex items-center justify-center flex-shrink-0 shadow-lg shadow-blue-500/20",children:o.jsx("span",{className:"text-white font-bold text-lg",children:L.name?.charAt(0)?.toUpperCase()||"?"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-bold text-gray-800 text-lg truncate group-hover:text-blue-600 transition-colors",children:L.name}),L.phone&&o.jsx("p",{className:"text-sm text-gray-500",children:L.phone})]}),o.jsx("svg",{className:"w-5 h-5 text-gray-300 group-hover:text-blue-500 group-hover:translate-x-1 transition-all flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},L.id||L.name))})}),o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50/80",children:o.jsx("button",{onClick:()=>m(!1),className:"w-full py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg shadow-blue-500/30",children:"Kapat"})})]})}),u&&E&&o.jsx(gS,{sale:E,onClose:()=>f(!1),onUpdate:()=>{Y(),f(!1)},onDelete:()=>{Y(),f(!1)}})]})}const xz=4,a4=0,s4=1,mz=2;function Z0(e){let r=e.length;for(;--r>=0;)e[r]=0}const gz=0,pS=1,pz=2,bz=3,wz=258,N2=29,af=256,Md=af+1+N2,D0=30,C2=19,bS=2*Md+1,ac=15,yg=16,vz=7,T2=256,wS=16,vS=17,yS=18,hp=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),e1=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),yz=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),_S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_z=512,pl=new Array((Md+2)*2);Z0(pl);const dd=new Array(D0*2);Z0(dd);const Fd=new Array(_z);Z0(Fd);const Ld=new Array(wz-bz+1);Z0(Ld);const j2=new Array(N2);Z0(j2);const _1=new Array(D0);Z0(_1);function _g(e,r,t,n,a){this.static_tree=e,this.extra_bits=r,this.extra_base=t,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}let kS,ES,SS;function kg(e,r){this.dyn_tree=e,this.max_code=0,this.stat_desc=r}const AS=e=>e<256?Fd[e]:Fd[256+(e>>>7)],Bd=(e,r)=>{e.pending_buf[e.pending++]=r&255,e.pending_buf[e.pending++]=r>>>8&255},ls=(e,r,t)=>{e.bi_valid>yg-t?(e.bi_buf|=r<<e.bi_valid&65535,Bd(e,e.bi_buf),e.bi_buf=r>>yg-e.bi_valid,e.bi_valid+=t-yg):(e.bi_buf|=r<<e.bi_valid&65535,e.bi_valid+=t)},Bi=(e,r,t)=>{ls(e,t[r*2],t[r*2+1])},NS=(e,r)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--r>0);return t>>>1},kz=e=>{e.bi_valid===16?(Bd(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Ez=(e,r)=>{const t=r.dyn_tree,n=r.max_code,a=r.stat_desc.static_tree,i=r.stat_desc.has_stree,u=r.stat_desc.extra_bits,f=r.stat_desc.extra_base,g=r.stat_desc.max_length;let m,w,_,E,k,N,A=0;for(E=0;E<=ac;E++)e.bl_count[E]=0;for(t[e.heap[e.heap_max]*2+1]=0,m=e.heap_max+1;m<bS;m++)w=e.heap[m],E=t[t[w*2+1]*2+1]+1,E>g&&(E=g,A++),t[w*2+1]=E,!(w>n)&&(e.bl_count[E]++,k=0,w>=f&&(k=u[w-f]),N=t[w*2],e.opt_len+=N*(E+k),i&&(e.static_len+=N*(a[w*2+1]+k)));if(A!==0){do{for(E=g-1;e.bl_count[E]===0;)E--;e.bl_count[E]--,e.bl_count[E+1]+=2,e.bl_count[g]--,A-=2}while(A>0);for(E=g;E!==0;E--)for(w=e.bl_count[E];w!==0;)_=e.heap[--m],!(_>n)&&(t[_*2+1]!==E&&(e.opt_len+=(E-t[_*2+1])*t[_*2],t[_*2+1]=E),w--)}},CS=(e,r,t)=>{const n=new Array(ac+1);let a=0,i,u;for(i=1;i<=ac;i++)a=a+t[i-1]<<1,n[i]=a;for(u=0;u<=r;u++){let f=e[u*2+1];f!==0&&(e[u*2]=NS(n[f]++,f))}},Sz=()=>{let e,r,t,n,a;const i=new Array(ac+1);for(t=0,n=0;n<N2-1;n++)for(j2[n]=t,e=0;e<1<<hp[n];e++)Ld[t++]=n;for(Ld[t-1]=n,a=0,n=0;n<16;n++)for(_1[n]=a,e=0;e<1<<e1[n];e++)Fd[a++]=n;for(a>>=7;n<D0;n++)for(_1[n]=a<<7,e=0;e<1<<e1[n]-7;e++)Fd[256+a++]=n;for(r=0;r<=ac;r++)i[r]=0;for(e=0;e<=143;)pl[e*2+1]=8,e++,i[8]++;for(;e<=255;)pl[e*2+1]=9,e++,i[9]++;for(;e<=279;)pl[e*2+1]=7,e++,i[7]++;for(;e<=287;)pl[e*2+1]=8,e++,i[8]++;for(CS(pl,Md+1,i),e=0;e<D0;e++)dd[e*2+1]=5,dd[e*2]=NS(e,5);kS=new _g(pl,hp,af+1,Md,ac),ES=new _g(dd,e1,0,D0,ac),SS=new _g(new Array(0),yz,0,C2,vz)},TS=e=>{let r;for(r=0;r<Md;r++)e.dyn_ltree[r*2]=0;for(r=0;r<D0;r++)e.dyn_dtree[r*2]=0;for(r=0;r<C2;r++)e.bl_tree[r*2]=0;e.dyn_ltree[T2*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},jS=e=>{e.bi_valid>8?Bd(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},i4=(e,r,t,n)=>{const a=r*2,i=t*2;return e[a]<e[i]||e[a]===e[i]&&n[r]<=n[t]},Eg=(e,r,t)=>{const n=e.heap[t];let a=t<<1;for(;a<=e.heap_len&&(a<e.heap_len&&i4(r,e.heap[a+1],e.heap[a],e.depth)&&a++,!i4(r,n,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=n},l4=(e,r,t)=>{let n,a,i=0,u,f;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+i++]&255,n+=(e.pending_buf[e.sym_buf+i++]&255)<<8,a=e.pending_buf[e.sym_buf+i++],n===0?Bi(e,a,r):(u=Ld[a],Bi(e,u+af+1,r),f=hp[u],f!==0&&(a-=j2[u],ls(e,a,f)),n--,u=AS(n),Bi(e,u,t),f=e1[u],f!==0&&(n-=_1[u],ls(e,n,f)));while(i<e.sym_next);Bi(e,T2,r)},xp=(e,r)=>{const t=r.dyn_tree,n=r.stat_desc.static_tree,a=r.stat_desc.has_stree,i=r.stat_desc.elems;let u,f,g=-1,m;for(e.heap_len=0,e.heap_max=bS,u=0;u<i;u++)t[u*2]!==0?(e.heap[++e.heap_len]=g=u,e.depth[u]=0):t[u*2+1]=0;for(;e.heap_len<2;)m=e.heap[++e.heap_len]=g<2?++g:0,t[m*2]=1,e.depth[m]=0,e.opt_len--,a&&(e.static_len-=n[m*2+1]);for(r.max_code=g,u=e.heap_len>>1;u>=1;u--)Eg(e,t,u);m=i;do u=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Eg(e,t,1),f=e.heap[1],e.heap[--e.heap_max]=u,e.heap[--e.heap_max]=f,t[m*2]=t[u*2]+t[f*2],e.depth[m]=(e.depth[u]>=e.depth[f]?e.depth[u]:e.depth[f])+1,t[u*2+1]=t[f*2+1]=m,e.heap[1]=m++,Eg(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Ez(e,r),CS(t,g,e.bl_count)},o4=(e,r,t)=>{let n,a=-1,i,u=r[1],f=0,g=7,m=4;for(u===0&&(g=138,m=3),r[(t+1)*2+1]=65535,n=0;n<=t;n++)i=u,u=r[(n+1)*2+1],!(++f<g&&i===u)&&(f<m?e.bl_tree[i*2]+=f:i!==0?(i!==a&&e.bl_tree[i*2]++,e.bl_tree[wS*2]++):f<=10?e.bl_tree[vS*2]++:e.bl_tree[yS*2]++,f=0,a=i,u===0?(g=138,m=3):i===u?(g=6,m=3):(g=7,m=4))},c4=(e,r,t)=>{let n,a=-1,i,u=r[1],f=0,g=7,m=4;for(u===0&&(g=138,m=3),n=0;n<=t;n++)if(i=u,u=r[(n+1)*2+1],!(++f<g&&i===u)){if(f<m)do Bi(e,i,e.bl_tree);while(--f!==0);else i!==0?(i!==a&&(Bi(e,i,e.bl_tree),f--),Bi(e,wS,e.bl_tree),ls(e,f-3,2)):f<=10?(Bi(e,vS,e.bl_tree),ls(e,f-3,3)):(Bi(e,yS,e.bl_tree),ls(e,f-11,7));f=0,a=i,u===0?(g=138,m=3):i===u?(g=6,m=3):(g=7,m=4)}},Az=e=>{let r;for(o4(e,e.dyn_ltree,e.l_desc.max_code),o4(e,e.dyn_dtree,e.d_desc.max_code),xp(e,e.bl_desc),r=C2-1;r>=3&&e.bl_tree[_S[r]*2+1]===0;r--);return e.opt_len+=3*(r+1)+5+5+4,r},Nz=(e,r,t,n)=>{let a;for(ls(e,r-257,5),ls(e,t-1,5),ls(e,n-4,4),a=0;a<n;a++)ls(e,e.bl_tree[_S[a]*2+1],3);c4(e,e.dyn_ltree,r-1),c4(e,e.dyn_dtree,t-1)},Cz=e=>{let r=4093624447,t;for(t=0;t<=31;t++,r>>>=1)if(r&1&&e.dyn_ltree[t*2]!==0)return a4;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return s4;for(t=32;t<af;t++)if(e.dyn_ltree[t*2]!==0)return s4;return a4};let u4=!1;const Tz=e=>{u4||(Sz(),u4=!0),e.l_desc=new kg(e.dyn_ltree,kS),e.d_desc=new kg(e.dyn_dtree,ES),e.bl_desc=new kg(e.bl_tree,SS),e.bi_buf=0,e.bi_valid=0,TS(e)},RS=(e,r,t,n)=>{ls(e,(gz<<1)+(n?1:0),3),jS(e),Bd(e,t),Bd(e,~t),t&&e.pending_buf.set(e.window.subarray(r,r+t),e.pending),e.pending+=t},jz=e=>{ls(e,pS<<1,3),Bi(e,T2,pl),kz(e)},Rz=(e,r,t,n)=>{let a,i,u=0;e.level>0?(e.strm.data_type===mz&&(e.strm.data_type=Cz(e)),xp(e,e.l_desc),xp(e,e.d_desc),u=Az(e),a=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=a&&(a=i)):a=i=t+5,t+4<=a&&r!==-1?RS(e,r,t,n):e.strategy===xz||i===a?(ls(e,(pS<<1)+(n?1:0),3),l4(e,pl,dd)):(ls(e,(pz<<1)+(n?1:0),3),Nz(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1),l4(e,e.dyn_ltree,e.dyn_dtree)),TS(e),n&&jS(e)},Oz=(e,r,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=r,e.pending_buf[e.sym_buf+e.sym_next++]=r>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,r===0?e.dyn_ltree[t*2]++:(e.matches++,r--,e.dyn_ltree[(Ld[t]+af+1)*2]++,e.dyn_dtree[AS(r)*2]++),e.sym_next===e.sym_end);var Iz=Tz,Dz=RS,Mz=Rz,Fz=Oz,Lz=jz,Bz={_tr_init:Iz,_tr_stored_block:Dz,_tr_flush_block:Mz,_tr_tally:Fz,_tr_align:Lz};const Pz=(e,r,t,n)=>{let a=e&65535|0,i=e>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+r[n++]|0,i=i+a|0;while(--u);a%=65521,i%=65521}return a|i<<16|0};var Pd=Pz;const Uz=()=>{let e,r=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r},zz=new Uint32Array(Uz()),Hz=(e,r,t,n)=>{const a=zz,i=n+t;e^=-1;for(let u=n;u<i;u++)e=e>>>8^a[(e^r[u])&255];return e^-1};var ba=Hz,yc={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},sf={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Vz,_tr_stored_block:mp,_tr_flush_block:Gz,_tr_tally:bo,_tr_align:Wz}=Bz,{Z_NO_FLUSH:wo,Z_PARTIAL_FLUSH:Xz,Z_FULL_FLUSH:Kz,Z_FINISH:Qs,Z_BLOCK:d4,Z_OK:ja,Z_STREAM_END:f4,Z_STREAM_ERROR:Ui,Z_DATA_ERROR:qz,Z_BUF_ERROR:Sg,Z_DEFAULT_COMPRESSION:Yz,Z_FILTERED:$z,Z_HUFFMAN_ONLY:Vh,Z_RLE:Zz,Z_FIXED:Jz,Z_DEFAULT_STRATEGY:Qz,Z_UNKNOWN:eH,Z_DEFLATED:G1}=sf,tH=9,rH=15,nH=8,aH=29,sH=256,gp=sH+1+aH,iH=30,lH=19,oH=2*gp+1,cH=15,Dr=3,po=258,zi=po+Dr+1,uH=32,P0=42,R2=57,pp=69,bp=73,wp=91,vp=103,sc=113,Qu=666,$a=1,J0=2,_c=3,Q0=4,dH=3,ic=(e,r)=>(e.msg=yc[r],r),h4=e=>e*2-(e>4?9:0),fo=e=>{let r=e.length;for(;--r>=0;)e[r]=0},fH=e=>{let r,t,n,a=e.w_size;r=e.hash_size,n=r;do t=e.head[--n],e.head[n]=t>=a?t-a:0;while(--r);r=a,n=r;do t=e.prev[--n],e.prev[n]=t>=a?t-a:0;while(--r)};let hH=(e,r,t)=>(r<<e.hash_shift^t)&e.hash_mask,vo=hH;const Ns=e=>{const r=e.state;let t=r.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(r.pending_buf.subarray(r.pending_out,r.pending_out+t),e.next_out),e.next_out+=t,r.pending_out+=t,e.total_out+=t,e.avail_out-=t,r.pending-=t,r.pending===0&&(r.pending_out=0))},Ds=(e,r)=>{Gz(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r),e.block_start=e.strstart,Ns(e.strm)},Yr=(e,r)=>{e.pending_buf[e.pending++]=r},Ku=(e,r)=>{e.pending_buf[e.pending++]=r>>>8&255,e.pending_buf[e.pending++]=r&255},yp=(e,r,t,n)=>{let a=e.avail_in;return a>n&&(a=n),a===0?0:(e.avail_in-=a,r.set(e.input.subarray(e.next_in,e.next_in+a),t),e.state.wrap===1?e.adler=Pd(e.adler,r,a,t):e.state.wrap===2&&(e.adler=ba(e.adler,r,a,t)),e.next_in+=a,e.total_in+=a,a)},OS=(e,r)=>{let t=e.max_chain_length,n=e.strstart,a,i,u=e.prev_length,f=e.nice_match;const g=e.strstart>e.w_size-zi?e.strstart-(e.w_size-zi):0,m=e.window,w=e.w_mask,_=e.prev,E=e.strstart+po;let k=m[n+u-1],N=m[n+u];e.prev_length>=e.good_match&&(t>>=2),f>e.lookahead&&(f=e.lookahead);do if(a=r,!(m[a+u]!==N||m[a+u-1]!==k||m[a]!==m[n]||m[++a]!==m[n+1])){n+=2,a++;do;while(m[++n]===m[++a]&&m[++n]===m[++a]&&m[++n]===m[++a]&&m[++n]===m[++a]&&m[++n]===m[++a]&&m[++n]===m[++a]&&m[++n]===m[++a]&&m[++n]===m[++a]&&n<E);if(i=po-(E-n),n=E-po,i>u){if(e.match_start=r,u=i,i>=f)break;k=m[n+u-1],N=m[n+u]}}while((r=_[r&w])>g&&--t!==0);return u<=e.lookahead?u:e.lookahead},U0=e=>{const r=e.w_size;let t,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-zi)&&(e.window.set(e.window.subarray(r,r+r-n),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),fH(e),n+=r),e.strm.avail_in===0)break;if(t=yp(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=Dr)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=vo(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=vo(e,e.ins_h,e.window[a+Dr-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<Dr)););}while(e.lookahead<zi&&e.strm.avail_in!==0)},IS=(e,r)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,i,u=0,f=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>i&&(n=i),n<t&&(n===0&&r!==Qs||r===wo||n!==a+e.strm.avail_in)))break;u=r===Qs&&n===a+e.strm.avail_in?1:0,mp(e,0,0,u),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Ns(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(yp(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(u===0);return f-=e.strm.avail_in,f&&(f>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=f&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-f,e.strm.next_in),e.strstart),e.strstart+=f,e.insert+=f>e.w_size-e.insert?e.w_size-e.insert:f),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),u?Q0:r!==wo&&r!==Qs&&e.strm.avail_in===0&&e.strstart===e.block_start?J0:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(yp(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,t=i>e.w_size?e.w_size:i,a=e.strstart-e.block_start,(a>=t||(a||r===Qs)&&r!==wo&&e.strm.avail_in===0&&a<=i)&&(n=a>i?i:a,u=r===Qs&&e.strm.avail_in===0&&n===a?1:0,mp(e,e.block_start,n,u),e.block_start+=n,Ns(e.strm)),u?_c:$a)},Ag=(e,r)=>{let t,n;for(;;){if(e.lookahead<zi){if(U0(e),e.lookahead<zi&&r===wo)return $a;if(e.lookahead===0)break}if(t=0,e.lookahead>=Dr&&(e.ins_h=vo(e,e.ins_h,e.window[e.strstart+Dr-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-zi&&(e.match_length=OS(e,t)),e.match_length>=Dr)if(n=bo(e,e.strstart-e.match_start,e.match_length-Dr),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Dr){e.match_length--;do e.strstart++,e.ins_h=vo(e,e.ins_h,e.window[e.strstart+Dr-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=vo(e,e.ins_h,e.window[e.strstart+1]);else n=bo(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Ds(e,!1),e.strm.avail_out===0))return $a}return e.insert=e.strstart<Dr-1?e.strstart:Dr-1,r===Qs?(Ds(e,!0),e.strm.avail_out===0?_c:Q0):e.sym_next&&(Ds(e,!1),e.strm.avail_out===0)?$a:J0},v0=(e,r)=>{let t,n,a;for(;;){if(e.lookahead<zi){if(U0(e),e.lookahead<zi&&r===wo)return $a;if(e.lookahead===0)break}if(t=0,e.lookahead>=Dr&&(e.ins_h=vo(e,e.ins_h,e.window[e.strstart+Dr-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Dr-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-zi&&(e.match_length=OS(e,t),e.match_length<=5&&(e.strategy===$z||e.match_length===Dr&&e.strstart-e.match_start>4096)&&(e.match_length=Dr-1)),e.prev_length>=Dr&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-Dr,n=bo(e,e.strstart-1-e.prev_match,e.prev_length-Dr),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=vo(e,e.ins_h,e.window[e.strstart+Dr-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Dr-1,e.strstart++,n&&(Ds(e,!1),e.strm.avail_out===0))return $a}else if(e.match_available){if(n=bo(e,0,e.window[e.strstart-1]),n&&Ds(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return $a}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=bo(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Dr-1?e.strstart:Dr-1,r===Qs?(Ds(e,!0),e.strm.avail_out===0?_c:Q0):e.sym_next&&(Ds(e,!1),e.strm.avail_out===0)?$a:J0},xH=(e,r)=>{let t,n,a,i;const u=e.window;for(;;){if(e.lookahead<=po){if(U0(e),e.lookahead<=po&&r===wo)return $a;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Dr&&e.strstart>0&&(a=e.strstart-1,n=u[a],n===u[++a]&&n===u[++a]&&n===u[++a])){i=e.strstart+po;do;while(n===u[++a]&&n===u[++a]&&n===u[++a]&&n===u[++a]&&n===u[++a]&&n===u[++a]&&n===u[++a]&&n===u[++a]&&a<i);e.match_length=po-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Dr?(t=bo(e,1,e.match_length-Dr),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=bo(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(Ds(e,!1),e.strm.avail_out===0))return $a}return e.insert=0,r===Qs?(Ds(e,!0),e.strm.avail_out===0?_c:Q0):e.sym_next&&(Ds(e,!1),e.strm.avail_out===0)?$a:J0},mH=(e,r)=>{let t;for(;;){if(e.lookahead===0&&(U0(e),e.lookahead===0)){if(r===wo)return $a;break}if(e.match_length=0,t=bo(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(Ds(e,!1),e.strm.avail_out===0))return $a}return e.insert=0,r===Qs?(Ds(e,!0),e.strm.avail_out===0?_c:Q0):e.sym_next&&(Ds(e,!1),e.strm.avail_out===0)?$a:J0};function Di(e,r,t,n,a){this.good_length=e,this.max_lazy=r,this.nice_length=t,this.max_chain=n,this.func=a}const ed=[new Di(0,0,0,0,IS),new Di(4,4,8,4,Ag),new Di(4,5,16,8,Ag),new Di(4,6,32,32,Ag),new Di(4,4,16,16,v0),new Di(8,16,32,32,v0),new Di(8,16,128,128,v0),new Di(8,32,128,256,v0),new Di(32,128,258,1024,v0),new Di(32,258,258,4096,v0)],gH=e=>{e.window_size=2*e.w_size,fo(e.head),e.max_lazy_match=ed[e.level].max_lazy,e.good_match=ed[e.level].good_length,e.nice_match=ed[e.level].nice_length,e.max_chain_length=ed[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Dr-1,e.match_available=0,e.ins_h=0};function pH(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=G1,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(oH*2),this.dyn_dtree=new Uint16Array((2*iH+1)*2),this.bl_tree=new Uint16Array((2*lH+1)*2),fo(this.dyn_ltree),fo(this.dyn_dtree),fo(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(cH+1),this.heap=new Uint16Array(2*gp+1),fo(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*gp+1),fo(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const lf=e=>{if(!e)return 1;const r=e.state;return!r||r.strm!==e||r.status!==P0&&r.status!==R2&&r.status!==pp&&r.status!==bp&&r.status!==wp&&r.status!==vp&&r.status!==sc&&r.status!==Qu?1:0},DS=e=>{if(lf(e))return ic(e,Ui);e.total_in=e.total_out=0,e.data_type=eH;const r=e.state;return r.pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap===2?R2:r.wrap?P0:sc,e.adler=r.wrap===2?0:1,r.last_flush=-2,Vz(r),ja},MS=e=>{const r=DS(e);return r===ja&&gH(e.state),r},bH=(e,r)=>lf(e)||e.state.wrap!==2?Ui:(e.state.gzhead=r,ja),FS=(e,r,t,n,a,i)=>{if(!e)return Ui;let u=1;if(r===Yz&&(r=6),n<0?(u=0,n=-n):n>15&&(u=2,n-=16),a<1||a>tH||t!==G1||n<8||n>15||r<0||r>9||i<0||i>Jz||n===8&&u!==1)return ic(e,Ui);n===8&&(n=9);const f=new pH;return e.state=f,f.strm=e,f.status=P0,f.wrap=u,f.gzhead=null,f.w_bits=n,f.w_size=1<<f.w_bits,f.w_mask=f.w_size-1,f.hash_bits=a+7,f.hash_size=1<<f.hash_bits,f.hash_mask=f.hash_size-1,f.hash_shift=~~((f.hash_bits+Dr-1)/Dr),f.window=new Uint8Array(f.w_size*2),f.head=new Uint16Array(f.hash_size),f.prev=new Uint16Array(f.w_size),f.lit_bufsize=1<<a+6,f.pending_buf_size=f.lit_bufsize*4,f.pending_buf=new Uint8Array(f.pending_buf_size),f.sym_buf=f.lit_bufsize,f.sym_end=(f.lit_bufsize-1)*3,f.level=r,f.strategy=i,f.method=t,MS(e)},wH=(e,r)=>FS(e,r,G1,rH,nH,Qz),vH=(e,r)=>{if(lf(e)||r>d4||r<0)return e?ic(e,Ui):Ui;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Qu&&r!==Qs)return ic(e,e.avail_out===0?Sg:Ui);const n=t.last_flush;if(t.last_flush=r,t.pending!==0){if(Ns(e),e.avail_out===0)return t.last_flush=-1,ja}else if(e.avail_in===0&&h4(r)<=h4(n)&&r!==Qs)return ic(e,Sg);if(t.status===Qu&&e.avail_in!==0)return ic(e,Sg);if(t.status===P0&&t.wrap===0&&(t.status=sc),t.status===P0){let a=G1+(t.w_bits-8<<4)<<8,i=-1;if(t.strategy>=Vh||t.level<2?i=0:t.level<6?i=1:t.level===6?i=2:i=3,a|=i<<6,t.strstart!==0&&(a|=uH),a+=31-a%31,Ku(t,a),t.strstart!==0&&(Ku(t,e.adler>>>16),Ku(t,e.adler&65535)),e.adler=1,t.status=sc,Ns(e),t.pending!==0)return t.last_flush=-1,ja}if(t.status===R2){if(e.adler=0,Yr(t,31),Yr(t,139),Yr(t,8),t.gzhead)Yr(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Yr(t,t.gzhead.time&255),Yr(t,t.gzhead.time>>8&255),Yr(t,t.gzhead.time>>16&255),Yr(t,t.gzhead.time>>24&255),Yr(t,t.level===9?2:t.strategy>=Vh||t.level<2?4:0),Yr(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Yr(t,t.gzhead.extra.length&255),Yr(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=ba(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=pp;else if(Yr(t,0),Yr(t,0),Yr(t,0),Yr(t,0),Yr(t,0),Yr(t,t.level===9?2:t.strategy>=Vh||t.level<2?4:0),Yr(t,dH),t.status=sc,Ns(e),t.pending!==0)return t.last_flush=-1,ja}if(t.status===pp){if(t.gzhead.extra){let a=t.pending,i=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+i>t.pending_buf_size;){let f=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+f),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>a&&(e.adler=ba(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex+=f,Ns(e),t.pending!==0)return t.last_flush=-1,ja;a=0,i-=f}let u=new Uint8Array(t.gzhead.extra);t.pending_buf.set(u.subarray(t.gzindex,t.gzindex+i),t.pending),t.pending+=i,t.gzhead.hcrc&&t.pending>a&&(e.adler=ba(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=bp}if(t.status===bp){if(t.gzhead.name){let a=t.pending,i;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=ba(e.adler,t.pending_buf,t.pending-a,a)),Ns(e),t.pending!==0)return t.last_flush=-1,ja;a=0}t.gzindex<t.gzhead.name.length?i=t.gzhead.name.charCodeAt(t.gzindex++)&255:i=0,Yr(t,i)}while(i!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=ba(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=wp}if(t.status===wp){if(t.gzhead.comment){let a=t.pending,i;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=ba(e.adler,t.pending_buf,t.pending-a,a)),Ns(e),t.pending!==0)return t.last_flush=-1,ja;a=0}t.gzindex<t.gzhead.comment.length?i=t.gzhead.comment.charCodeAt(t.gzindex++)&255:i=0,Yr(t,i)}while(i!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=ba(e.adler,t.pending_buf,t.pending-a,a))}t.status=vp}if(t.status===vp){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Ns(e),t.pending!==0))return t.last_flush=-1,ja;Yr(t,e.adler&255),Yr(t,e.adler>>8&255),e.adler=0}if(t.status=sc,Ns(e),t.pending!==0)return t.last_flush=-1,ja}if(e.avail_in!==0||t.lookahead!==0||r!==wo&&t.status!==Qu){let a=t.level===0?IS(t,r):t.strategy===Vh?mH(t,r):t.strategy===Zz?xH(t,r):ed[t.level].func(t,r);if((a===_c||a===Q0)&&(t.status=Qu),a===$a||a===_c)return e.avail_out===0&&(t.last_flush=-1),ja;if(a===J0&&(r===Xz?Wz(t):r!==d4&&(mp(t,0,0,!1),r===Kz&&(fo(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Ns(e),e.avail_out===0))return t.last_flush=-1,ja}return r!==Qs?ja:t.wrap<=0?f4:(t.wrap===2?(Yr(t,e.adler&255),Yr(t,e.adler>>8&255),Yr(t,e.adler>>16&255),Yr(t,e.adler>>24&255),Yr(t,e.total_in&255),Yr(t,e.total_in>>8&255),Yr(t,e.total_in>>16&255),Yr(t,e.total_in>>24&255)):(Ku(t,e.adler>>>16),Ku(t,e.adler&65535)),Ns(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?ja:f4)},yH=e=>{if(lf(e))return Ui;const r=e.state.status;return e.state=null,r===sc?ic(e,qz):ja},_H=(e,r)=>{let t=r.length;if(lf(e))return Ui;const n=e.state,a=n.wrap;if(a===2||a===1&&n.status!==P0||n.lookahead)return Ui;if(a===1&&(e.adler=Pd(e.adler,r,t,0)),n.wrap=0,t>=n.w_size){a===0&&(fo(n.head),n.strstart=0,n.block_start=0,n.insert=0);let g=new Uint8Array(n.w_size);g.set(r.subarray(t-n.w_size,t),0),r=g,t=n.w_size}const i=e.avail_in,u=e.next_in,f=e.input;for(e.avail_in=t,e.next_in=0,e.input=r,U0(n);n.lookahead>=Dr;){let g=n.strstart,m=n.lookahead-(Dr-1);do n.ins_h=vo(n,n.ins_h,n.window[g+Dr-1]),n.prev[g&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=g,g++;while(--m);n.strstart=g,n.lookahead=Dr-1,U0(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Dr-1,n.match_available=0,e.next_in=u,e.input=f,e.avail_in=i,n.wrap=a,ja};var kH=wH,EH=FS,SH=MS,AH=DS,NH=bH,CH=vH,TH=yH,jH=_H,RH="pako deflate (from Nodeca project)",fd={deflateInit:kH,deflateInit2:EH,deflateReset:SH,deflateResetKeep:AH,deflateSetHeader:NH,deflate:CH,deflateEnd:TH,deflateSetDictionary:jH,deflateInfo:RH};const OH=(e,r)=>Object.prototype.hasOwnProperty.call(e,r);var IH=function(e){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const t=r.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)OH(t,n)&&(e[n]=t[n])}}return e},DH=e=>{let r=0;for(let n=0,a=e.length;n<a;n++)r+=e[n].length;const t=new Uint8Array(r);for(let n=0,a=0,i=e.length;n<i;n++){let u=e[n];t.set(u,a),a+=u.length}return t},W1={assign:IH,flattenChunks:DH};let LS=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{LS=!1}const Ud=new Uint8Array(256);for(let e=0;e<256;e++)Ud[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ud[254]=Ud[254]=1;var MH=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let r,t,n,a,i,u=e.length,f=0;for(a=0;a<u;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<u&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),f+=t<128?1:t<2048?2:t<65536?3:4;for(r=new Uint8Array(f),i=0,a=0;i<f;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<u&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),t<128?r[i++]=t:t<2048?(r[i++]=192|t>>>6,r[i++]=128|t&63):t<65536?(r[i++]=224|t>>>12,r[i++]=128|t>>>6&63,r[i++]=128|t&63):(r[i++]=240|t>>>18,r[i++]=128|t>>>12&63,r[i++]=128|t>>>6&63,r[i++]=128|t&63);return r};const FH=(e,r)=>{if(r<65534&&e.subarray&&LS)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let t="";for(let n=0;n<r;n++)t+=String.fromCharCode(e[n]);return t};var LH=(e,r)=>{const t=r||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,r));let n,a;const i=new Array(t*2);for(a=0,n=0;n<t;){let u=e[n++];if(u<128){i[a++]=u;continue}let f=Ud[u];if(f>4){i[a++]=65533,n+=f-1;continue}for(u&=f===2?31:f===3?15:7;f>1&&n<t;)u=u<<6|e[n++]&63,f--;if(f>1){i[a++]=65533;continue}u<65536?i[a++]=u:(u-=65536,i[a++]=55296|u>>10&1023,i[a++]=56320|u&1023)}return FH(i,a)},BH=(e,r)=>{r=r||e.length,r>e.length&&(r=e.length);let t=r-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+Ud[e[t]]>r?t:r},zd={string2buf:MH,buf2string:LH,utf8border:BH};function PH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var BS=PH;const PS=Object.prototype.toString,{Z_NO_FLUSH:UH,Z_SYNC_FLUSH:zH,Z_FULL_FLUSH:HH,Z_FINISH:VH,Z_OK:k1,Z_STREAM_END:GH,Z_DEFAULT_COMPRESSION:WH,Z_DEFAULT_STRATEGY:XH,Z_DEFLATED:KH}=sf;function of(e){this.options=W1.assign({level:WH,method:KH,chunkSize:16384,windowBits:15,memLevel:8,strategy:XH},e||{});let r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new BS,this.strm.avail_out=0;let t=fd.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(t!==k1)throw new Error(yc[t]);if(r.header&&fd.deflateSetHeader(this.strm,r.header),r.dictionary){let n;if(typeof r.dictionary=="string"?n=zd.string2buf(r.dictionary):PS.call(r.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(r.dictionary):n=r.dictionary,t=fd.deflateSetDictionary(this.strm,n),t!==k1)throw new Error(yc[t]);this._dict_set=!0}}of.prototype.push=function(e,r){const t=this.strm,n=this.options.chunkSize;let a,i;if(this.ended)return!1;for(r===~~r?i=r:i=r===!0?VH:UH,typeof e=="string"?t.input=zd.string2buf(e):PS.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(i===zH||i===HH)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(a=fd.deflate(t,i),a===GH)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),a=fd.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===k1;if(t.avail_out===0){this.onData(t.output);continue}if(i>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};of.prototype.onData=function(e){this.chunks.push(e)};of.prototype.onEnd=function(e){e===k1&&(this.result=W1.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function O2(e,r){const t=new of(r);if(t.push(e,!0),t.err)throw t.msg||yc[t.err];return t.result}function qH(e,r){return r=r||{},r.raw=!0,O2(e,r)}function YH(e,r){return r=r||{},r.gzip=!0,O2(e,r)}var $H=of,ZH=O2,JH=qH,QH=YH,eV={Deflate:$H,deflate:ZH,deflateRaw:JH,gzip:QH};const Gh=16209,tV=16191;var rV=function(r,t){let n,a,i,u,f,g,m,w,_,E,k,N,A,C,I,D,O,B,U,X,F,Y,H,ce;const J=r.state;n=r.next_in,H=r.input,a=n+(r.avail_in-5),i=r.next_out,ce=r.output,u=i-(t-r.avail_out),f=i+(r.avail_out-257),g=J.dmax,m=J.wsize,w=J.whave,_=J.wnext,E=J.window,k=J.hold,N=J.bits,A=J.lencode,C=J.distcode,I=(1<<J.lenbits)-1,D=(1<<J.distbits)-1;e:do{N<15&&(k+=H[n++]<<N,N+=8,k+=H[n++]<<N,N+=8),O=A[k&I];t:for(;;){if(B=O>>>24,k>>>=B,N-=B,B=O>>>16&255,B===0)ce[i++]=O&65535;else if(B&16){U=O&65535,B&=15,B&&(N<B&&(k+=H[n++]<<N,N+=8),U+=k&(1<<B)-1,k>>>=B,N-=B),N<15&&(k+=H[n++]<<N,N+=8,k+=H[n++]<<N,N+=8),O=C[k&D];r:for(;;){if(B=O>>>24,k>>>=B,N-=B,B=O>>>16&255,B&16){if(X=O&65535,B&=15,N<B&&(k+=H[n++]<<N,N+=8,N<B&&(k+=H[n++]<<N,N+=8)),X+=k&(1<<B)-1,X>g){r.msg="invalid distance too far back",J.mode=Gh;break e}if(k>>>=B,N-=B,B=i-u,X>B){if(B=X-B,B>w&&J.sane){r.msg="invalid distance too far back",J.mode=Gh;break e}if(F=0,Y=E,_===0){if(F+=m-B,B<U){U-=B;do ce[i++]=E[F++];while(--B);F=i-X,Y=ce}}else if(_<B){if(F+=m+_-B,B-=_,B<U){U-=B;do ce[i++]=E[F++];while(--B);if(F=0,_<U){B=_,U-=B;do ce[i++]=E[F++];while(--B);F=i-X,Y=ce}}}else if(F+=_-B,B<U){U-=B;do ce[i++]=E[F++];while(--B);F=i-X,Y=ce}for(;U>2;)ce[i++]=Y[F++],ce[i++]=Y[F++],ce[i++]=Y[F++],U-=3;U&&(ce[i++]=Y[F++],U>1&&(ce[i++]=Y[F++]))}else{F=i-X;do ce[i++]=ce[F++],ce[i++]=ce[F++],ce[i++]=ce[F++],U-=3;while(U>2);U&&(ce[i++]=ce[F++],U>1&&(ce[i++]=ce[F++]))}}else if((B&64)===0){O=C[(O&65535)+(k&(1<<B)-1)];continue r}else{r.msg="invalid distance code",J.mode=Gh;break e}break}}else if((B&64)===0){O=A[(O&65535)+(k&(1<<B)-1)];continue t}else if(B&32){J.mode=tV;break e}else{r.msg="invalid literal/length code",J.mode=Gh;break e}break}}while(n<a&&i<f);U=N>>3,n-=U,N-=U<<3,k&=(1<<N)-1,r.next_in=n,r.next_out=i,r.avail_in=n<a?5+(a-n):5-(n-a),r.avail_out=i<f?257+(f-i):257-(i-f),J.hold=k,J.bits=N};const y0=15,x4=852,m4=592,g4=0,Ng=1,p4=2,nV=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),aV=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),sV=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iV=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),lV=(e,r,t,n,a,i,u,f)=>{const g=f.bits;let m=0,w=0,_=0,E=0,k=0,N=0,A=0,C=0,I=0,D=0,O,B,U,X,F,Y=null,H;const ce=new Uint16Array(y0+1),J=new Uint16Array(y0+1);let V=null,xe,W,ne;for(m=0;m<=y0;m++)ce[m]=0;for(w=0;w<n;w++)ce[r[t+w]]++;for(k=g,E=y0;E>=1&&ce[E]===0;E--);if(k>E&&(k=E),E===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,f.bits=1,0;for(_=1;_<E&&ce[_]===0;_++);for(k<_&&(k=_),C=1,m=1;m<=y0;m++)if(C<<=1,C-=ce[m],C<0)return-1;if(C>0&&(e===g4||E!==1))return-1;for(J[1]=0,m=1;m<y0;m++)J[m+1]=J[m]+ce[m];for(w=0;w<n;w++)r[t+w]!==0&&(u[J[r[t+w]]++]=w);if(e===g4?(Y=V=u,H=20):e===Ng?(Y=nV,V=aV,H=257):(Y=sV,V=iV,H=0),D=0,w=0,m=_,F=i,N=k,A=0,U=-1,I=1<<k,X=I-1,e===Ng&&I>x4||e===p4&&I>m4)return 1;for(;;){xe=m-A,u[w]+1<H?(W=0,ne=u[w]):u[w]>=H?(W=V[u[w]-H],ne=Y[u[w]-H]):(W=96,ne=0),O=1<<m-A,B=1<<N,_=B;do B-=O,a[F+(D>>A)+B]=xe<<24|W<<16|ne|0;while(B!==0);for(O=1<<m-1;D&O;)O>>=1;if(O!==0?(D&=O-1,D+=O):D=0,w++,--ce[m]===0){if(m===E)break;m=r[t+u[w]]}if(m>k&&(D&X)!==U){for(A===0&&(A=k),F+=_,N=m-A,C=1<<N;N+A<E&&(C-=ce[N+A],!(C<=0));)N++,C<<=1;if(I+=1<<N,e===Ng&&I>x4||e===p4&&I>m4)return 1;U=D&X,a[U]=k<<24|N<<16|F-i|0}}return D!==0&&(a[F+D]=m-A<<24|64<<16|0),f.bits=k,0};var hd=lV;const oV=0,US=1,zS=2,{Z_FINISH:b4,Z_BLOCK:cV,Z_TREES:Wh,Z_OK:kc,Z_STREAM_END:uV,Z_NEED_DICT:dV,Z_STREAM_ERROR:ni,Z_DATA_ERROR:HS,Z_MEM_ERROR:VS,Z_BUF_ERROR:fV,Z_DEFLATED:w4}=sf,X1=16180,v4=16181,y4=16182,_4=16183,k4=16184,E4=16185,S4=16186,A4=16187,N4=16188,C4=16189,E1=16190,xl=16191,Cg=16192,T4=16193,Tg=16194,j4=16195,R4=16196,O4=16197,I4=16198,Xh=16199,Kh=16200,D4=16201,M4=16202,F4=16203,L4=16204,B4=16205,jg=16206,P4=16207,U4=16208,Nn=16209,GS=16210,WS=16211,hV=852,xV=592,mV=15,gV=mV,z4=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function pV(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const jc=e=>{if(!e)return 1;const r=e.state;return!r||r.strm!==e||r.mode<X1||r.mode>WS?1:0},XS=e=>{if(jc(e))return ni;const r=e.state;return e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=X1,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(hV),r.distcode=r.distdyn=new Int32Array(xV),r.sane=1,r.back=-1,kc},KS=e=>{if(jc(e))return ni;const r=e.state;return r.wsize=0,r.whave=0,r.wnext=0,XS(e)},qS=(e,r)=>{let t;if(jc(e))return ni;const n=e.state;return r<0?(t=0,r=-r):(t=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?ni:(n.window!==null&&n.wbits!==r&&(n.window=null),n.wrap=t,n.wbits=r,KS(e))},YS=(e,r)=>{if(!e)return ni;const t=new pV;e.state=t,t.strm=e,t.window=null,t.mode=X1;const n=qS(e,r);return n!==kc&&(e.state=null),n},bV=e=>YS(e,gV);let H4=!0,Rg,Og;const wV=e=>{if(H4){Rg=new Int32Array(512),Og=new Int32Array(32);let r=0;for(;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(hd(US,e.lens,0,288,Rg,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;hd(zS,e.lens,0,32,Og,0,e.work,{bits:5}),H4=!1}e.lencode=Rg,e.lenbits=9,e.distcode=Og,e.distbits=5},$S=(e,r,t,n)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(r.subarray(t-i.wsize,t),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(r.subarray(t-n,t-n+a),i.wnext),n-=a,n?(i.window.set(r.subarray(t-n,t),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},vV=(e,r)=>{let t,n,a,i,u,f,g,m,w,_,E,k,N,A,C=0,I,D,O,B,U,X,F,Y;const H=new Uint8Array(4);let ce,J;const V=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(jc(e)||!e.output||!e.input&&e.avail_in!==0)return ni;t=e.state,t.mode===xl&&(t.mode=Cg),u=e.next_out,a=e.output,g=e.avail_out,i=e.next_in,n=e.input,f=e.avail_in,m=t.hold,w=t.bits,_=f,E=g,Y=kc;e:for(;;)switch(t.mode){case X1:if(t.wrap===0){t.mode=Cg;break}for(;w<16;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}if(t.wrap&2&&m===35615){t.wbits===0&&(t.wbits=15),t.check=0,H[0]=m&255,H[1]=m>>>8&255,t.check=ba(t.check,H,2,0),m=0,w=0,t.mode=v4;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((m&255)<<8)+(m>>8))%31){e.msg="incorrect header check",t.mode=Nn;break}if((m&15)!==w4){e.msg="unknown compression method",t.mode=Nn;break}if(m>>>=4,w-=4,F=(m&15)+8,t.wbits===0&&(t.wbits=F),F>15||F>t.wbits){e.msg="invalid window size",t.mode=Nn;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=m&512?C4:xl,m=0,w=0;break;case v4:for(;w<16;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}if(t.flags=m,(t.flags&255)!==w4){e.msg="unknown compression method",t.mode=Nn;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=Nn;break}t.head&&(t.head.text=m>>8&1),t.flags&512&&t.wrap&4&&(H[0]=m&255,H[1]=m>>>8&255,t.check=ba(t.check,H,2,0)),m=0,w=0,t.mode=y4;case y4:for(;w<32;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}t.head&&(t.head.time=m),t.flags&512&&t.wrap&4&&(H[0]=m&255,H[1]=m>>>8&255,H[2]=m>>>16&255,H[3]=m>>>24&255,t.check=ba(t.check,H,4,0)),m=0,w=0,t.mode=_4;case _4:for(;w<16;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}t.head&&(t.head.xflags=m&255,t.head.os=m>>8),t.flags&512&&t.wrap&4&&(H[0]=m&255,H[1]=m>>>8&255,t.check=ba(t.check,H,2,0)),m=0,w=0,t.mode=k4;case k4:if(t.flags&1024){for(;w<16;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}t.length=m,t.head&&(t.head.extra_len=m),t.flags&512&&t.wrap&4&&(H[0]=m&255,H[1]=m>>>8&255,t.check=ba(t.check,H,2,0)),m=0,w=0}else t.head&&(t.head.extra=null);t.mode=E4;case E4:if(t.flags&1024&&(k=t.length,k>f&&(k=f),k&&(t.head&&(F=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(i,i+k),F)),t.flags&512&&t.wrap&4&&(t.check=ba(t.check,n,k,i)),f-=k,i+=k,t.length-=k),t.length))break e;t.length=0,t.mode=S4;case S4:if(t.flags&2048){if(f===0)break e;k=0;do F=n[i+k++],t.head&&F&&t.length<65536&&(t.head.name+=String.fromCharCode(F));while(F&&k<f);if(t.flags&512&&t.wrap&4&&(t.check=ba(t.check,n,k,i)),f-=k,i+=k,F)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=A4;case A4:if(t.flags&4096){if(f===0)break e;k=0;do F=n[i+k++],t.head&&F&&t.length<65536&&(t.head.comment+=String.fromCharCode(F));while(F&&k<f);if(t.flags&512&&t.wrap&4&&(t.check=ba(t.check,n,k,i)),f-=k,i+=k,F)break e}else t.head&&(t.head.comment=null);t.mode=N4;case N4:if(t.flags&512){for(;w<16;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}if(t.wrap&4&&m!==(t.check&65535)){e.msg="header crc mismatch",t.mode=Nn;break}m=0,w=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=xl;break;case C4:for(;w<32;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}e.adler=t.check=z4(m),m=0,w=0,t.mode=E1;case E1:if(t.havedict===0)return e.next_out=u,e.avail_out=g,e.next_in=i,e.avail_in=f,t.hold=m,t.bits=w,dV;e.adler=t.check=1,t.mode=xl;case xl:if(r===cV||r===Wh)break e;case Cg:if(t.last){m>>>=w&7,w-=w&7,t.mode=jg;break}for(;w<3;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}switch(t.last=m&1,m>>>=1,w-=1,m&3){case 0:t.mode=T4;break;case 1:if(wV(t),t.mode=Xh,r===Wh){m>>>=2,w-=2;break e}break;case 2:t.mode=R4;break;case 3:e.msg="invalid block type",t.mode=Nn}m>>>=2,w-=2;break;case T4:for(m>>>=w&7,w-=w&7;w<32;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}if((m&65535)!==(m>>>16^65535)){e.msg="invalid stored block lengths",t.mode=Nn;break}if(t.length=m&65535,m=0,w=0,t.mode=Tg,r===Wh)break e;case Tg:t.mode=j4;case j4:if(k=t.length,k){if(k>f&&(k=f),k>g&&(k=g),k===0)break e;a.set(n.subarray(i,i+k),u),f-=k,i+=k,g-=k,u+=k,t.length-=k;break}t.mode=xl;break;case R4:for(;w<14;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}if(t.nlen=(m&31)+257,m>>>=5,w-=5,t.ndist=(m&31)+1,m>>>=5,w-=5,t.ncode=(m&15)+4,m>>>=4,w-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=Nn;break}t.have=0,t.mode=O4;case O4:for(;t.have<t.ncode;){for(;w<3;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}t.lens[V[t.have++]]=m&7,m>>>=3,w-=3}for(;t.have<19;)t.lens[V[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,ce={bits:t.lenbits},Y=hd(oV,t.lens,0,19,t.lencode,0,t.work,ce),t.lenbits=ce.bits,Y){e.msg="invalid code lengths set",t.mode=Nn;break}t.have=0,t.mode=I4;case I4:for(;t.have<t.nlen+t.ndist;){for(;C=t.lencode[m&(1<<t.lenbits)-1],I=C>>>24,D=C>>>16&255,O=C&65535,!(I<=w);){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}if(O<16)m>>>=I,w-=I,t.lens[t.have++]=O;else{if(O===16){for(J=I+2;w<J;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}if(m>>>=I,w-=I,t.have===0){e.msg="invalid bit length repeat",t.mode=Nn;break}F=t.lens[t.have-1],k=3+(m&3),m>>>=2,w-=2}else if(O===17){for(J=I+3;w<J;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}m>>>=I,w-=I,F=0,k=3+(m&7),m>>>=3,w-=3}else{for(J=I+7;w<J;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}m>>>=I,w-=I,F=0,k=11+(m&127),m>>>=7,w-=7}if(t.have+k>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=Nn;break}for(;k--;)t.lens[t.have++]=F}}if(t.mode===Nn)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=Nn;break}if(t.lenbits=9,ce={bits:t.lenbits},Y=hd(US,t.lens,0,t.nlen,t.lencode,0,t.work,ce),t.lenbits=ce.bits,Y){e.msg="invalid literal/lengths set",t.mode=Nn;break}if(t.distbits=6,t.distcode=t.distdyn,ce={bits:t.distbits},Y=hd(zS,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,ce),t.distbits=ce.bits,Y){e.msg="invalid distances set",t.mode=Nn;break}if(t.mode=Xh,r===Wh)break e;case Xh:t.mode=Kh;case Kh:if(f>=6&&g>=258){e.next_out=u,e.avail_out=g,e.next_in=i,e.avail_in=f,t.hold=m,t.bits=w,rV(e,E),u=e.next_out,a=e.output,g=e.avail_out,i=e.next_in,n=e.input,f=e.avail_in,m=t.hold,w=t.bits,t.mode===xl&&(t.back=-1);break}for(t.back=0;C=t.lencode[m&(1<<t.lenbits)-1],I=C>>>24,D=C>>>16&255,O=C&65535,!(I<=w);){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}if(D&&(D&240)===0){for(B=I,U=D,X=O;C=t.lencode[X+((m&(1<<B+U)-1)>>B)],I=C>>>24,D=C>>>16&255,O=C&65535,!(B+I<=w);){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}m>>>=B,w-=B,t.back+=B}if(m>>>=I,w-=I,t.back+=I,t.length=O,D===0){t.mode=B4;break}if(D&32){t.back=-1,t.mode=xl;break}if(D&64){e.msg="invalid literal/length code",t.mode=Nn;break}t.extra=D&15,t.mode=D4;case D4:if(t.extra){for(J=t.extra;w<J;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}t.length+=m&(1<<t.extra)-1,m>>>=t.extra,w-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=M4;case M4:for(;C=t.distcode[m&(1<<t.distbits)-1],I=C>>>24,D=C>>>16&255,O=C&65535,!(I<=w);){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}if((D&240)===0){for(B=I,U=D,X=O;C=t.distcode[X+((m&(1<<B+U)-1)>>B)],I=C>>>24,D=C>>>16&255,O=C&65535,!(B+I<=w);){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}m>>>=B,w-=B,t.back+=B}if(m>>>=I,w-=I,t.back+=I,D&64){e.msg="invalid distance code",t.mode=Nn;break}t.offset=O,t.extra=D&15,t.mode=F4;case F4:if(t.extra){for(J=t.extra;w<J;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}t.offset+=m&(1<<t.extra)-1,m>>>=t.extra,w-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=Nn;break}t.mode=L4;case L4:if(g===0)break e;if(k=E-g,t.offset>k){if(k=t.offset-k,k>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=Nn;break}k>t.wnext?(k-=t.wnext,N=t.wsize-k):N=t.wnext-k,k>t.length&&(k=t.length),A=t.window}else A=a,N=u-t.offset,k=t.length;k>g&&(k=g),g-=k,t.length-=k;do a[u++]=A[N++];while(--k);t.length===0&&(t.mode=Kh);break;case B4:if(g===0)break e;a[u++]=t.length,g--,t.mode=Kh;break;case jg:if(t.wrap){for(;w<32;){if(f===0)break e;f--,m|=n[i++]<<w,w+=8}if(E-=g,e.total_out+=E,t.total+=E,t.wrap&4&&E&&(e.adler=t.check=t.flags?ba(t.check,a,E,u-E):Pd(t.check,a,E,u-E)),E=g,t.wrap&4&&(t.flags?m:z4(m))!==t.check){e.msg="incorrect data check",t.mode=Nn;break}m=0,w=0}t.mode=P4;case P4:if(t.wrap&&t.flags){for(;w<32;){if(f===0)break e;f--,m+=n[i++]<<w,w+=8}if(t.wrap&4&&m!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=Nn;break}m=0,w=0}t.mode=U4;case U4:Y=uV;break e;case Nn:Y=HS;break e;case GS:return VS;case WS:default:return ni}return e.next_out=u,e.avail_out=g,e.next_in=i,e.avail_in=f,t.hold=m,t.bits=w,(t.wsize||E!==e.avail_out&&t.mode<Nn&&(t.mode<jg||r!==b4))&&$S(e,e.output,e.next_out,E-e.avail_out),_-=e.avail_in,E-=e.avail_out,e.total_in+=_,e.total_out+=E,t.total+=E,t.wrap&4&&E&&(e.adler=t.check=t.flags?ba(t.check,a,E,e.next_out-E):Pd(t.check,a,E,e.next_out-E)),e.data_type=t.bits+(t.last?64:0)+(t.mode===xl?128:0)+(t.mode===Xh||t.mode===Tg?256:0),(_===0&&E===0||r===b4)&&Y===kc&&(Y=fV),Y},yV=e=>{if(jc(e))return ni;let r=e.state;return r.window&&(r.window=null),e.state=null,kc},_V=(e,r)=>{if(jc(e))return ni;const t=e.state;return(t.wrap&2)===0?ni:(t.head=r,r.done=!1,kc)},kV=(e,r)=>{const t=r.length;let n,a,i;return jc(e)||(n=e.state,n.wrap!==0&&n.mode!==E1)?ni:n.mode===E1&&(a=1,a=Pd(a,r,t,0),a!==n.check)?HS:(i=$S(e,r,t,t),i?(n.mode=GS,VS):(n.havedict=1,kc))};var EV=KS,SV=qS,AV=XS,NV=bV,CV=YS,TV=vV,jV=yV,RV=_V,OV=kV,IV="pako inflate (from Nodeca project)",bl={inflateReset:EV,inflateReset2:SV,inflateResetKeep:AV,inflateInit:NV,inflateInit2:CV,inflate:TV,inflateEnd:jV,inflateGetHeader:RV,inflateSetDictionary:OV,inflateInfo:IV};function DV(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var MV=DV;const ZS=Object.prototype.toString,{Z_NO_FLUSH:FV,Z_FINISH:LV,Z_OK:Hd,Z_STREAM_END:Ig,Z_NEED_DICT:Dg,Z_STREAM_ERROR:BV,Z_DATA_ERROR:V4,Z_MEM_ERROR:PV}=sf;function cf(e){this.options=W1.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new BS,this.strm.avail_out=0;let t=bl.inflateInit2(this.strm,r.windowBits);if(t!==Hd)throw new Error(yc[t]);if(this.header=new MV,bl.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=zd.string2buf(r.dictionary):ZS.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=bl.inflateSetDictionary(this.strm,r.dictionary),t!==Hd)))throw new Error(yc[t])}cf.prototype.push=function(e,r){const t=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,u,f;if(this.ended)return!1;for(r===~~r?u=r:u=r===!0?LV:FV,ZS.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),i=bl.inflate(t,u),i===Dg&&a&&(i=bl.inflateSetDictionary(t,a),i===Hd?i=bl.inflate(t,u):i===V4&&(i=Dg));t.avail_in>0&&i===Ig&&t.state.wrap>0&&e[t.next_in]!==0;)bl.inflateReset(t),i=bl.inflate(t,u);switch(i){case BV:case V4:case Dg:case PV:return this.onEnd(i),this.ended=!0,!1}if(f=t.avail_out,t.next_out&&(t.avail_out===0||i===Ig))if(this.options.to==="string"){let g=zd.utf8border(t.output,t.next_out),m=t.next_out-g,w=zd.buf2string(t.output,g);t.next_out=m,t.avail_out=n-m,m&&t.output.set(t.output.subarray(g,g+m),0),this.onData(w)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(i===Hd&&f===0)){if(i===Ig)return i=bl.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};cf.prototype.onData=function(e){this.chunks.push(e)};cf.prototype.onEnd=function(e){e===Hd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=W1.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function I2(e,r){const t=new cf(r);if(t.push(e),t.err)throw t.msg||yc[t.err];return t.result}function UV(e,r){return r=r||{},r.raw=!0,I2(e,r)}var zV=cf,HV=I2,VV=UV,GV=I2,WV={Inflate:zV,inflate:HV,inflateRaw:VV,ungzip:GV};const{Deflate:XV,deflate:KV,deflateRaw:qV,gzip:YV}=eV,{Inflate:$V,inflate:ZV,inflateRaw:JV,ungzip:QV}=WV;var eG=XV,tG=KV,rG=qV,nG=YV,aG=$V,sG=ZV,iG=JV,lG=QV,oG=sf,G4={Deflate:eG,deflate:tG,deflateRaw:rG,gzip:nG,Inflate:aG,inflate:sG,inflateRaw:iG,ungzip:lG,constants:oG};function cG({isOpen:e,onClose:r,invoiceLine:t,products:n,onSelect:a,onCreateNew:i}){if(!e)return null;const[u,f]=Q.useState({name:"",stockCode:"",barcode:""}),[g,m]=Q.useState(n);return Q.useEffect(()=>{let w=n;const _=(E,k)=>(E||"").toLocaleLowerCase("tr-TR").includes((k||"").toLocaleLowerCase("tr-TR"));u.name&&(w=w.filter(E=>_(E.name,u.name))),u.stockCode&&(w=w.filter(E=>_(E.stock_code,u.stockCode))),u.barcode&&(w=w.filter(E=>_(E.barcode,u.barcode))),m(w)},[u,n]),o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/90 via-indigo-900/80 to-purple-900/90 backdrop-blur-md animate-in fade-in duration-300",onClick:r}),o.jsxs("div",{className:"relative bg-white/95 backdrop-blur-xl rounded-none shadow-[0_25px_50px_-12px_rgba(0,0,0,0.5)] w-full max-w-7xl flex flex-col h-[95vh] overflow-hidden ring-1 ring-white/20 animate-in zoom-in-95 duration-300",children:[o.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 bg-gradient-to-br from-blue-400 to-cyan-400 rounded-full blur-3xl opacity-20 pointer-events-none"}),o.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full blur-3xl opacity-20 pointer-events-none"}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800 via-slate-900 to-indigo-900 p-6 border-b border-white/10 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-10",children:o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_30%_20%,rgba(255,255,255,0.1)_0%,transparent_50%)]"})}),o.jsxs("div",{className:"flex justify-between items-center relative z-10",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/30 flex-shrink-0",children:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-indigo-300 text-xs font-bold uppercase tracking-widest mb-1 block",children:"RN ELETRME"}),o.jsx("h3",{className:"text-white font-extrabold text-2xl leading-tight",children:"Stok Kart Seimi"}),o.jsx("div",{className:"flex items-center gap-2 mt-2",children:o.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-slate-400 bg-white/5 px-3 py-1 rounded-full border border-white/10",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),t?.name]})})]})]}),o.jsx("button",{onClick:r,className:"p-3 rounded-xl bg-white/10 hover:bg-red-500/20 border border-white/20 transition-all duration-200",children:o.jsx("svg",{className:"w-6 h-6 text-white hover:text-red-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),o.jsx("div",{className:"p-6 bg-gradient-to-br from-slate-50 via-white to-indigo-50/30 border-b border-gray-200",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{label:"rn Ad",key:"name",icon:"M4 6h16M4 12h16m-7 6h7"},{label:"Stok Kodu",key:"stockCode",icon:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"},{label:"Barkod",key:"barcode",icon:"M12 4v16m8-8H4"}].map(w=>o.jsxs("div",{className:"relative group",children:[o.jsx("label",{className:"text-xs font-bold text-indigo-600 uppercase tracking-widest mb-2 block",children:w.label}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400 group-focus-within:text-indigo-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:w.icon})})}),o.jsx("input",{type:"text",className:"w-full bg-white border-2 border-gray-200 text-gray-800 text-base font-medium rounded-xl pl-12 pr-4 py-3.5 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all shadow-sm",placeholder:`${w.label} ile ara...`,value:u[w.key],onChange:_=>f({...u,[w.key]:_.target.value}),autoComplete:"off"})]})]},w.key))})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gradient-to-br from-slate-50 via-white to-indigo-50/30",children:o.jsx("div",{className:"bg-white rounded-xl shadow-xl border border-gray-200/50 overflow-hidden ring-1 ring-black/5",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gradient-to-r from-slate-800 to-indigo-900 text-white font-bold text-sm uppercase tracking-wide",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-5 w-16 text-center",children:"#"}),o.jsx("th",{className:"px-6 py-5 text-left w-48",children:"Stok Kodu"}),o.jsx("th",{className:"px-6 py-5 text-left",children:"rn Ad"}),o.jsx("th",{className:"px-6 py-5 text-left w-48",children:"Barkod"}),o.jsx("th",{className:"px-6 py-5 text-right w-36",children:"Sat Fiyat"}),o.jsx("th",{className:"px-6 py-5 w-10"})]})}),o.jsxs("tbody",{className:"divide-y divide-gray-100",children:[g.map((w,_)=>o.jsxs("tr",{onClick:()=>a(w),className:"hover:bg-indigo-50/50 cursor-pointer transition-all duration-200 group",children:[o.jsx("td",{className:"px-6 py-5 text-center",children:o.jsx("span",{className:"font-bold text-gray-400 text-base group-hover:text-indigo-500",children:_+1})}),o.jsx("td",{className:"px-6 py-5",children:o.jsx("span",{className:"font-mono font-bold text-base bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg",children:w.stock_code})}),o.jsx("td",{className:"px-6 py-5 font-semibold text-gray-800 text-base group-hover:text-gray-900",children:w.name}),o.jsx("td",{className:"px-6 py-5 text-gray-500 text-sm font-mono",children:w.barcode||"-"}),o.jsx("td",{className:"px-6 py-5 text-right",children:o.jsxs("span",{className:"font-bold text-lg text-emerald-700 bg-emerald-100 px-4 py-2 rounded-xl border border-emerald-200",children:[w.sale_price?.toLocaleString("tr-TR",{minimumFractionDigits:2})," "]})}),o.jsx("td",{className:"px-6 py-5 text-center",children:o.jsx("svg",{className:"w-6 h-6 text-gray-300 group-hover:text-indigo-500 transform group-hover:translate-x-1 transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]},w.id)),g.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:"6",className:"px-6 py-16 text-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-3",children:[o.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsx("h4",{className:"text-gray-900 font-bold text-lg",children:"Sonu Bulunamad"}),o.jsx("p",{className:"text-gray-500 text-base",children:"Aradnz kriterlere uygun rn mevcut deil."})]})})})]})]})})}),o.jsxs("div",{className:"p-6 bg-gradient-to-r from-slate-800 via-slate-900 to-indigo-900 border-t border-white/10 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.1)_0%,transparent_50%)]"})}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("button",{onClick:i,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white font-bold text-lg py-4 px-8 rounded-xl shadow-lg shadow-emerald-500/30 transition-all transform hover:-translate-y-1 hover:shadow-2xl flex items-center justify-center gap-3",children:[o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})," Bu rn Yeni Olarak Ekle"]}),o.jsx("p",{className:"text-center text-xs text-slate-400 mt-3 font-medium",children:"Seili fatura satrndaki veriler kullanlarak yeni bir stok kart oluturulacaktr."})]})]})]})]})}function uG(){const[e,r]=Q.useState([]),[t,n]=Q.useState(!0),[a,i]=Q.useState(!1),[u,f]=Q.useState(!1),[g,m]=Q.useState(!1),[w,_]=Q.useState(null),[E,k]=Q.useState(null),[N,A]=Q.useState(!1),[C,I]=Q.useState(!1),[D,O]=Q.useState(null),[B,U]=Q.useState(!1),[X,F]=Q.useState(null),[Y,H]=Q.useState([]),[ce,J]=Q.useState([]),[V,xe]=Q.useState({}),[W,ne]=Q.useState(null),[be,fe]=Q.useState(!1),[Ve,ge]=Q.useState(""),[We,re]=Q.useState(!1),[L,q]=Q.useState(null);Q.useEffect(()=>{ut(),P()},[]);const P=async()=>{try{const[Me,Xe]=await Promise.all([Cn.getAll(),Hn.getAll()]);H(Me.data?.products||[]),J(Xe.data?.customers||[])}catch(Me){console.error("Eletirme verileri yklenemedi",Me)}},[Z,pe]=Q.useState({search:"",status:"Tm",startDate:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[Le,Be]=Q.useState({key:"date",direction:"desc"}),[Pe,et]=Q.useState(!0);Q.useEffect(()=>{ut(),(async()=>{try{const Xe=await oa.get("invoices_show_total");if(Xe.data!==null&&Xe.data!==void 0){const St=Xe.data;et(St===!0||St==="true")}}catch(Xe){console.error("Error loading settings",Xe)}})()},[]);const ut=async()=>{try{const Me=await gi.getAll();r(Me.data?.invoices||[])}catch(Me){console.error("Faturalar yklenirken hata:",Me)}finally{n(!1)}},ve=async()=>{const[Me,Xe,St]=await Promise.all([oa.get("birfatura_api_key"),oa.get("birfatura_secret_key"),oa.get("birfatura_integration_key")]);return!Me.data||!Xe.data||!St.data?null:{api_key:Me.data,secret_key:Xe.data,integration_key:St.data}},Ie=async Me=>{if(!Me.uuid){alert("Fatura UUID bulunamad.");return}I(!0),O(null),F(null);try{const Xe=await ve();if(!Xe){alert("API ayarlar eksik. Ltfen ayarlardan BirFatura entegrasyonunu kontrol edin."),I(!1);return}const St={documentUUID:Me.uuid,inOutCode:"IN",systemTypeCodes:"EFATURA"},At=await xn.post("/api/birfatura-proxy",{endpoint:"OutEBelgeV2/DocumentDownloadByUUID",payload:St,apiKey:Xe.api_key,secretKey:Xe.secret_key,integrationKey:Xe.integration_key},{timeout:3e4});if(!At.data?.Success)throw new Error("ndirme Baarsz: "+(At.data?.Message||"Bilinmeyen hata"));const Ot=At.data.Result?.content;if(!Ot)throw new Error("Fatura ierii bo geldi.");const sr={documentBytes:Ot,systemTypeCodes:"EFATURA"},Nt=await xn.post("/api/birfatura-proxy",{endpoint:"OutEBelgeV2/PreviewDocumentReturnHTML",payload:sr,apiKey:Xe.api_key,secretKey:Xe.secret_key,integrationKey:Xe.integration_key},{timeout:3e4});if(!Nt.data?.Success)throw new Error("nizleme Baarsz: "+(Nt.data?.Message||"Bilinmeyen hata"));const mt=Nt.data.Result?.zipped;if(!mt)throw new Error("HTML verisi oluturulamad.");const Ht=atob(mt),Dt=new Uint8Array(Ht.length);for(let or=0;or<Ht.length;or++)Dt[or]=Ht.charCodeAt(or);let Yt="";try{Yt=G4.ungzip(Dt,{to:"string"})}catch{try{Yt=G4.inflate(Dt,{to:"string"})}catch(_r){console.warn("Decompression failed, using raw bytes as string",_r),Yt=new TextDecoder("utf-8").decode(Dt)}}F(Yt),U(!0),I(!1)}catch(Xe){console.error("Grntleme Hatas:",Xe);const St="Balant Hatas: "+(Xe.message||"Sunucuya ulalamad.");O(St),I(!1)}},z=async()=>{i(!0);try{const Me=await ve();if(!Me){alert("Ltfen nce Ayarlar > Entegrasyon Ayarlar blmnden API anahtarlarn girin."),i(!1);return}const Xe=Z.startDate?`${Z.startDate}T00:00:00Z`:new Date(new Date().setDate(new Date().getDate()-30)).toISOString(),St=Z.endDate?`${Z.endDate}T23:59:59Z`:new Date().toISOString(),At={systemType:"EFATURA",startDateTime:Xe,endDateTime:St,documentType:"INVOICE",readUnReadStatus:"ALL",pageNumber:0},Ot=await xn.post("/api/birfatura-proxy",{endpoint:"OutEBelgeV2/GetInBoxDocumentsWithDetail",payload:At,apiKey:Me.api_key,secretKey:Me.secret_key,integrationKey:Me.integration_key});if(Ot.data?.Success){const Nt=(Ot.data.Result?.InBoxInvoices?.objects||[]).map(mt=>{const Ht=mt.inBoxInvoice,Dt=e.find(Yt=>Yt.uuid===Ht.UUID);return{uuid:Ht.UUID,invoice_number:Ht.InvoiceNo,supplier_name:Ht.SenderName,date:(Ht.IssueDate||"").split("T")[0]+" 00:00:00",total:Ht.PayableAmount||0,status:Dt?Dt.status:"Bekliyor"}});Nt.length>0?(await gi.syncBatch(Nt)).data?.success?(alert(`${Nt.length} fatura baaryla senkronize edildi.`),ut()):alert("Faturalar ekildi fakat veritabanna kaydedilemedi."):alert("Seilen tarih aralnda yeni fatura bulunamad.")}else alert(`BirFatura Hatas: ${Ot.data?.Message||"Bilinmeyen hata"}`)}catch(Me){console.error("Sync Error Full Object:",Me);const Xe=Me.response?.data?.Message||Me.response?.data?.message||Me.message||"Bilinmeyen hata";alert("Senkronizasyon hatas: "+Xe)}finally{i(!1)}},De=async Me=>{_(Me),m(!0),A(!0),k(null),xe({}),ne(null);try{const Xe=await ve();if(!Xe){confirm("Fatura detaylarn grntlemek iin API anahtarlarn girmeniz gerekmektedir. Ayarlara gitmek ister misiniz?")&&(window.location.href="/settings"),m(!1),A(!1);return}const St={documentUUID:Me.uuid,inOutCode:"IN",systemTypeCodes:"EFATURA"},At=await xn.post("/api/birfatura-proxy",{endpoint:"OutEBelgeV2/DocumentDownloadByUUID",payload:St,apiKey:Xe.api_key,secretKey:Xe.secret_key,integrationKey:Xe.integration_key});if(!At.data.Success)throw new Error(At.data.Message||"erik alnamad");const Ot=At.data.Result?.content;if(!Ot)throw new Error("Dosya ierii bo.");const Nt=await new ep().loadAsync(Ot,{base64:!0}),mt=Object.keys(Nt.files).find(pr=>pr.toLowerCase().endsWith(".xml"));if(!mt)throw new Error("ZIP iinde XML dosyas bulunamad.");const Ht=await Nt.files[mt].async("string"),Yt=new DOMParser().parseFromString(Ht,"text/xml"),or=(pr,Fr)=>{if(!pr)return"";const $r=pr.getElementsByTagName("*");for(let br=0;br<$r.length;br++)if($r[br].localName===Fr)return $r[br].textContent;return""},_r=(pr,Fr)=>{if(!pr)return null;const $r=pr.getElementsByTagName("*");for(let br=0;br<$r.length;br++)if($r[br].localName===Fr)return $r[br];return null},Qr=_r(Yt,"AccountingSupplierParty"),Xt=_r(Qr,"PartyIdentification"),Mr=or(Xt,"ID"),zr=_r(Qr,"PartyName"),En=or(zr,"Name"),Wr=ce.find(pr=>pr.tax_number===Mr)||ce.find(pr=>pr.name.toLowerCase()===En?.toLowerCase());Wr&&ne(Wr.id);const ze=Array.from(Yt.getElementsByTagName("*")).filter(pr=>pr.localName==="InvoiceLine").map(pr=>{const Fr=_r(pr,"Item"),$r=_r(pr,"Price"),br=parseFloat(or(pr,"InvoicedQuantity")||0),Wn=parseFloat(or($r,"PriceAmount")||0),ae=parseFloat(or(pr,"LineExtensionAmount")||0);let ue=0;const he=Array.from(pr.getElementsByTagName("*")).filter(_e=>_e.localName==="AllowanceCharge");for(const _e of he)or(_e,"ChargeIndicator")==="false"&&(ue+=parseFloat(or(_e,"Amount")||0));let me=0;const we=_r(pr,"TaxTotal");if(we){const _e=_r(we,"TaxSubtotal");if(_e){const Ye=or(_e,"Percent");if(Ye)me=parseFloat(Ye);else{const ct=_r(_e,"TaxCategory");ct&&(me=parseFloat(or(ct,"Percent")||0))}}}if(me===0){const _e=_r(Fr,"ClassifiedTaxCategory");_e&&(me=parseFloat(or(_e,"Percent")||0))}return{name:or(Fr,"Name"),description:or(Fr,"Description"),quantity:br,unit_price:Wn,line_net:ae,discount:ue,vat_rate:me,total_inc_vat:ae+ae*me/100-ue}}),kt={};ze.forEach((pr,Fr)=>{const $r=Y.find(br=>br.name.toLowerCase()===pr.name.toLowerCase());$r&&(kt[Fr]=$r.id)}),xe(kt);const Rt=_r(Yt,"LegalMonetaryTotal"),Mt=parseFloat(or(Rt,"PayableAmount")||0);k({supplier_name:En,supplier_tax_no:Mr,total_amount:Mt,lines:ze})}catch(Xe){console.error("Fatura detay yklenirken hata:",Xe),alert("Detay hatas: "+(Xe.message||"Bilinmiyor"))}finally{A(!1)}},Te=async()=>{try{await gi.updateStatus(w.id,"lenmeyecek"),m(!1),ut()}catch(Me){alert("Hata: "+(Me.response?.data?.message||Me.message))}},le=["Tm","Bekliyor","lendi","lenmeyecek","ptal Edildi"],Ee=(()=>{let Me=[...e];if(Z.search){const Xe=Z.search.toLowerCase();Me=Me.filter(St=>St.invoice_number?.toLowerCase().includes(Xe)||St.supplier_name?.toLowerCase().includes(Xe))}return Z.status!=="Tm"&&(Me=Me.filter(Xe=>Xe.status===Z.status)),Z.startDate&&(Me=Me.filter(Xe=>new Date(Xe.date)>=new Date(Z.startDate))),Z.endDate&&(Me=Me.filter(Xe=>new Date(Xe.date)<=new Date(Z.endDate))),Me.sort((Xe,St)=>{let At=Xe[Le.key],Ot=St[Le.key];if(Le.key==="total")return At=parseFloat(At)||0,Ot=parseFloat(Ot)||0,Le.direction==="asc"?At-Ot:Ot-At;if(Le.key==="date")return At=new Date(At||0),Ot=new Date(Ot||0),Le.direction==="asc"?At-Ot:Ot-At;const sr=String(At||"").toLowerCase().localeCompare(String(Ot||"").toLowerCase(),"tr");return Le.direction==="asc"?sr:-sr}),Me})(),at=Me=>{Be(Xe=>({key:Me,direction:Xe.key===Me&&Xe.direction==="asc"?"desc":"asc"}))},Fe=Me=>Le.key!==Me?"":Le.direction==="asc"?"":"",He=()=>{pe({search:"",status:"Tm",startDate:"",endDate:""})},je=Me=>Me?new Date(Me).toLocaleDateString("tr-TR"):"-",Ke=Ee.reduce((Me,Xe)=>Me+(Xe.total||0),0);if(t)return o.jsx("div",{className:"flex items-center justify-center min-h-96",children:o.jsx("div",{className:"spinner"})});const it=async()=>{if(!E)return;if(!W){alert("Ltfen faturay ilemek iin bir cari (tedariki) sein.");return}if(!E.lines.every((Xe,St)=>V[St])){alert("Ltfen tm satrlar stoktaki bir rnle eletirin.");return}if(confirm("Bu faturay ilemek istediinize emin misiniz? Stoklar artacak ve cari alaca gncellenecek.")){fe(!0);try{for(let Xe=0;Xe<E.lines.length;Xe++){const St=E.lines[Xe],At=V[Xe],Ot=Y.find(sr=>sr.id==At);if(Ot){const sr=(Ot.stock||0)+St.quantity;await Cn.updateStock(Ot.stock_code,{stock:sr,buying_price:St.unit_price})}}await Hn.addPurchaseTransaction({customer_id:W,amount:E.total_amount,description:`${Ve||"Fatura leme"} (${w.invoice_number})`}),await gi.updateStatus(w.id,"lendi"),alert("Fatura baaryla ilendi ve stoklara alnd!"),m(!1),ut()}catch(Xe){console.error(Xe),alert("lem srasnda hata olutu: "+Xe.message)}finally{fe(!1)}}},qe=async Me=>{if(!Me||Me.status!=="lendi"){alert("Sadece 'lendi' durumundaki faturalar iptal edilebilir.");return}if(confirm(`"${Me.invoice_number}" numaral faturay iptal etmek istediinize emin misiniz?

Bu ilem:
 Stoklara eklenen rnleri geri decek
 Cariye ilenen borcu iptal edecek
 Fatura durumunu deitirecek`)){fe(!0);try{const Xe=await ve();if(!Xe){alert("API ayarlar bulunamad. Stok ve cari iptali manuel yaplmaldr."),await gi.updateStatus(Me.id,"lendi ancak iptal edildi"),ut(),fe(!1);return}const St={documentUUID:Me.uuid,inOutCode:"IN",systemTypeCodes:"EFATURA"},At=await xn.post("/api/birfatura-proxy",{endpoint:"OutEBelgeV2/DocumentDownloadByUUID",payload:St,apiKey:Xe.api_key,secretKey:Xe.secret_key,integrationKey:Xe.integration_key});if(!At.data.Success)throw new Error(At.data.Message||"Fatura detay alnamad");const Ot=At.data.Result?.content;if(!Ot){await gi.updateStatus(Me.id,"lendi ancak iptal edildi"),alert("Fatura detaylar alnamad ama durum gncellendi. Stok ve cari iptali manuel yaplmaldr."),ut(),fe(!1);return}const Nt=await new ep().loadAsync(Ot,{base64:!0}),mt=Object.keys(Nt.files).find(ze=>ze.toLowerCase().endsWith(".xml"));if(!mt)throw new Error("XML bulunamad");const Ht=await Nt.files[mt].async("string"),Yt=new DOMParser().parseFromString(Ht,"text/xml"),or=(ze,kt)=>{if(!ze)return"";const Rt=ze.getElementsByTagName("*");for(let Mt=0;Mt<Rt.length;Mt++)if(Rt[Mt].localName===kt)return Rt[Mt].textContent;return""},_r=(ze,kt)=>{if(!ze)return null;const Rt=ze.getElementsByTagName("*");for(let Mt=0;Mt<Rt.length;Mt++)if(Rt[Mt].localName===kt)return Rt[Mt];return null},Xt=Array.from(Yt.getElementsByTagName("*")).filter(ze=>ze.localName==="InvoiceLine").map(ze=>{const kt=_r(ze,"Item"),Rt=parseFloat(or(ze,"InvoicedQuantity")||0);return{name:or(kt,"Name"),quantity:Rt}}),Mr=Me.total||0;for(const ze of Xt){const kt=Y.find(Rt=>Rt.name.toLowerCase()===ze.name.toLowerCase());if(kt){const Rt=Math.max(0,(kt.stock||0)-ze.quantity);await Cn.updateStock(kt.stock_code,{stock:Rt})}}const zr=_r(Yt,"AccountingSupplierParty"),En=_r(zr,"PartyName"),Wr=or(En,"Name"),Or=ce.find(ze=>ze.name.toLowerCase()===Wr?.toLowerCase());Or&&await Hn.cancelPurchaseTransaction({customer_id:Or.id,amount:Mr,description:`Fatura ptali (${Me.invoice_number})`}),await gi.updateStatus(Me.id,"lendi ancak iptal edildi"),alert(`Fatura baaryla iptal edildi!
 Stoklar dld
 Cari borcu silindi
 Durum gncellendi`),ut(),P()}catch(Xe){console.error("ptal Hatas:",Xe),alert("ptal srasnda hata olutu: "+Xe.message)}finally{fe(!1)}}};return o.jsxs("div",{className:"flex h-[calc(100vh-64px)] transition-all duration-300 overflow-hidden",children:[B&&X&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[70] flex items-center justify-center p-4 animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-5xl h-[90vh] flex flex-col shadow-2xl overflow-hidden ring-1 ring-gray-600",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[o.jsx("span",{className:"bg-blue-100 text-blue-600 p-1.5 rounded-lg",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),"Fatura nizleme"]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>{const Me=window.open("","_blank");Me.document.write(X),Me.document.close(),Me.onload=()=>{Me.print()}},className:"px-5 py-2.5 text-base font-semibold text-white bg-gradient-to-r from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 transform hover:scale-105",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Yazdr"]}),o.jsxs("button",{onClick:()=>{const Me=new Blob([X],{type:"text/html;charset=utf-8"}),Xe=URL.createObjectURL(Me),St=document.createElement("a");St.href=Xe,St.download=`fatura_${Date.now()}.html`,St.click()},className:"px-5 py-2.5 text-base font-semibold text-white bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 transform hover:scale-105",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"ndir"]}),o.jsxs("button",{onClick:()=>U(!1),className:"px-5 py-2.5 text-base font-semibold text-white bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 transform hover:scale-105",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Kapat"]})]})]}),o.jsx("div",{className:"flex-1 bg-gray-100 relative",children:o.jsx("iframe",{title:"Invoice Preview",srcDoc:X,className:"w-full h-full border-none"})})]})}),C&&o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[60] flex items-center justify-center flex-col animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl flex flex-col items-center max-w-sm w-full mx-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 animate-pulse"}),o.jsxs("div",{className:"w-20 h-20 mb-6 relative",children:[o.jsx("div",{className:"absolute inset-0 border-4 border-blue-100 rounded-full"}),o.jsx("div",{className:"absolute inset-0 border-4 border-blue-600 rounded-full border-t-transparent animate-spin"}),o.jsx("svg",{className:"w-8 h-8 text-blue-600 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]}),o.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Faturanz Alyor..."}),o.jsx("p",{className:"text-gray-500 text-center text-sm",children:"Belge sunucudan indiriliyor ve nizleme hazrlanyor."}),o.jsxs("div",{className:"mt-6 flex gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0s"}}),o.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),o.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})}),u&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>f(!1)}),o.jsxs("aside",{className:`
                fixed lg:static inset-y-0 left-0 z-50
                w-72 bg-white border-r border-gray-200 p-5 overflow-y-auto
                transform transition-transform duration-300 flex flex-col
                ${u?"translate-x-0":"-translate-x-full lg:translate-x-0"}
            `,children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-5 flex items-center gap-2",children:[o.jsx("span",{children:""})," Filtreler"]}),o.jsxs("div",{className:"space-y-4 flex-1",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Fatura No / Tedariki"}),o.jsx("input",{type:"text",value:Z.search,onChange:Me=>pe({...Z,search:Me.target.value}),placeholder:"Ara...",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Durum"}),o.jsx("select",{value:Z.status,onChange:Me=>pe({...Z,status:Me.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500",children:le.map(Me=>o.jsx("option",{value:Me,children:Me},Me))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tarih Aral"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"date",value:Z.startDate,onChange:Me=>pe({...Z,startDate:Me.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500"}),o.jsx("input",{type:"date",value:Z.endDate,onChange:Me=>pe({...Z,endDate:Me.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500"})]})]})]}),o.jsx("div",{className:"mt-auto pt-4 border-t border-gray-200 space-y-2",children:o.jsx("button",{onClick:He,className:"w-full py-2.5 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:" Temizle"})})]}),o.jsxs("main",{className:"flex-1 p-5 overflow-y-auto",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-5",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>f(!0),className:"lg:hidden p-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" Gelen Faturalar"}),o.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[Ee.length," fatura"]})]})]}),o.jsx("button",{onClick:z,disabled:a,className:"px-4 py-2 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-xl font-medium hover:from-violet-700 hover:to-purple-700 transition-all flex items-center gap-2 justify-center disabled:opacity-50",children:a?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Senkronize ediliyor..."]}):o.jsx(o.Fragment,{children:" Faturalar Senkronize Et"})})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-5",children:[o.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-500 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-amber-100 text-sm",children:"Bekleyen"}),o.jsx("p",{className:"text-2xl font-bold",children:e.filter(Me=>Me.status==="Bekliyor").length})]}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-emerald-100 text-sm",children:"lendi"}),o.jsx("p",{className:"text-2xl font-bold",children:e.filter(Me=>Me.status==="lendi").length})]}),o.jsxs("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-gray-100 text-sm",children:"lenmeyecek"}),o.jsx("p",{className:"text-2xl font-bold",children:e.filter(Me=>Me.status==="lenmeyecek").length})]}),o.jsxs("div",{className:"bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-violet-100 text-sm",children:"Toplam Tutar"}),o.jsx("p",{className:"text-2xl font-bold",children:Pe?`${Ke.toLocaleString("tr-TR")}`:"*************"})]})]}),o.jsx("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:o.jsxs("tr",{children:[o.jsxs("th",{onClick:()=>at("date"),className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase cursor-pointer hover:bg-gray-100",children:["Tarih ",Fe("date")]}),o.jsxs("th",{onClick:()=>at("invoice_number"),className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase cursor-pointer hover:bg-gray-100",children:["Fatura No ",Fe("invoice_number")]}),o.jsxs("th",{onClick:()=>at("supplier_name"),className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase cursor-pointer hover:bg-gray-100",children:["Tedariki ",Fe("supplier_name")]}),o.jsxs("th",{onClick:()=>at("total"),className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase cursor-pointer hover:bg-gray-100",children:["Tutar ",Fe("total")]}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Durum"}),o.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-500 uppercase",children:"lemler"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-50",children:Ee.map(Me=>o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsx("td",{className:"px-4 py-4 font-mono text-base text-gray-600",children:je(Me.date)}),o.jsx("td",{className:"px-4 py-4 font-mono text-base text-gray-800 font-bold",children:Me.invoice_number}),o.jsx("td",{className:"px-4 py-4 font-medium text-gray-800 text-base truncate max-w-xs",title:Me.supplier_name,children:Me.supplier_name||"-"}),o.jsxs("td",{className:"px-4 py-4 font-bold text-gray-900 text-lg",children:["",Me.total?.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),o.jsx("td",{className:"px-4 py-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`px-3 py-1.5 rounded-lg text-sm font-bold ${Me.status==="Bekliyor"?"bg-amber-100 text-amber-600":Me.status==="lendi"?"bg-green-100 text-green-600":Me.status==="lendi ancak iptal edildi"?"bg-orange-100 text-orange-600":(Me.status==="lenmeyecek","bg-gray-100 text-gray-600")}`,children:Me.status||"Bekliyor"}),Me.status==="lendi"&&o.jsxs("button",{onClick:()=>qe(Me),disabled:be,className:"flex items-center gap-1 px-2 py-1 bg-red-100 text-red-600 hover:bg-red-200 rounded-lg text-xs font-bold transition-colors disabled:opacity-50",title:"Fatura ilemini iptal et",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"ptal"]})]})}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-2 relative z-10",children:[o.jsxs("button",{onClick:()=>Ie(Me),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-slate-600 to-gray-700 text-white rounded-xl hover:from-slate-700 hover:to-gray-800 text-sm font-semibold transition-all shadow-md hover:shadow-lg transform hover:scale-105",children:[o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Grntle"]}),o.jsxs("button",{onClick:()=>De(Me),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 text-sm font-semibold transition-all shadow-md hover:shadow-lg transform hover:scale-105",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Cariye ve Stoklara le"]}),o.jsxs("button",{onClick:()=>{_(Me),Te()},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:from-amber-600 hover:to-orange-600 text-sm font-semibold transition-all shadow-md hover:shadow-lg transform hover:scale-105",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"lenmeyecek"]})]})})]},Me.id))})]}),Ee.length===0&&o.jsx("div",{className:"text-center py-12 text-gray-500",children:"Fatura bulunamad."})]})})]}),g&&w&&o.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-900/90 via-indigo-900/80 to-purple-900/90 backdrop-blur-md flex items-center justify-center p-4 z-50 animate-in fade-in duration-300",children:o.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-none shadow-[0_25px_50px_-12px_rgba(0,0,0,0.5)] w-full max-w-7xl max-h-[95vh] flex flex-col overflow-hidden ring-1 ring-white/20 relative",children:[o.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 bg-gradient-to-br from-blue-400 to-cyan-400 rounded-full blur-3xl opacity-20 pointer-events-none"}),o.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full blur-3xl opacity-20 pointer-events-none"}),o.jsxs("div",{className:"bg-gradient-to-r from-slate-800 via-slate-900 to-indigo-900 p-8 border-b border-white/10 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_30%_20%,rgba(255,255,255,0.1)_0%,transparent_50%)]"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-full h-full bg-[radial-gradient(circle_at_70%_80%,rgba(79,70,229,0.2)_0%,transparent_50%)]"})]}),o.jsxs("div",{className:"grid grid-cols-12 gap-8 items-start relative z-10",children:[o.jsxs("div",{className:"col-span-12 md:col-span-5",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/30 flex-shrink-0",children:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("span",{className:"text-indigo-300 text-xs font-bold uppercase tracking-widest mb-1 block",children:"TEDARK"}),o.jsx("h2",{className:"text-white font-extrabold text-2xl leading-tight truncate",children:E?.supplier_name||w.supplier_name}),o.jsx("div",{className:"flex items-center gap-2 mt-2",children:o.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-slate-400 bg-white/5 px-3 py-1 rounded-full border border-white/10",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"VKN: ",E?.supplier_tax_no||"-"]})})]})]}),o.jsxs("div",{className:"mt-5 bg-white/5 backdrop-blur-sm rounded-2xl p-4 border border-white/10",children:[o.jsx("span",{className:"text-xs font-bold text-indigo-300 uppercase tracking-wider mb-3 block",children:" CAR ELETRME"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 bg-white/10 border border-white/20 text-white text-sm font-semibold rounded-xl px-4 py-2.5 outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white/20 transition-all cursor-pointer",value:W||"",onChange:Me=>ne(Me.target.value),children:[o.jsx("option",{value:"",className:"text-gray-900",children:"-- Bir Cari Seiniz --"}),ce.map(Me=>o.jsx("option",{value:Me.id,className:"text-gray-900",children:Me.name},Me.id))]}),!W&&E?.supplier_name&&o.jsxs("button",{onClick:async()=>{if(confirm(`"${E.supplier_name}" adnda yeni bir cari oluturulacak. Onaylyor musunuz?`)){fe(!0);try{const Me={name:E.supplier_name,tax_number:E.supplier_tax_no,address:"-",phone:"-",balance:0},Xe=await Hn.add(Me);if(Xe.data?.success){const St=await Hn.getAll();J(St.data?.customers||[]),ne(Xe.data.id),alert("Cari baaryla oluturuldu ve seildi.")}}catch(Me){alert("Hata: "+Me.message)}finally{fe(!1)}}},className:"bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white text-sm font-bold px-4 py-2.5 rounded-xl shadow-lg shadow-emerald-500/25 transition-all flex items-center gap-2 whitespace-nowrap",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Yeni Cari Ekle"]})]})]})]}),o.jsxs("div",{className:"col-span-12 md:col-span-3 text-center",children:[o.jsx("span",{className:"text-indigo-300 text-xs font-bold uppercase tracking-widest mb-1 block",children:"FATURA NO"}),o.jsx("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl px-5 py-4 border border-white/10 inline-block",children:o.jsx("span",{className:"text-white font-bold text-2xl font-mono tracking-wide",children:w.invoice_number})}),o.jsx("div",{className:"mt-3 text-slate-400 text-sm",children:je(w.date)})]}),o.jsxs("div",{className:"col-span-12 md:col-span-4 text-right",children:[o.jsx("span",{className:"text-indigo-300 text-xs font-bold uppercase tracking-widest mb-1 block",children:"GENEL TOPLAM"}),o.jsx("div",{className:"bg-gradient-to-r from-emerald-500/10 to-teal-500/10 backdrop-blur-sm rounded-2xl px-6 py-4 border border-emerald-500/20 inline-block",children:o.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300 font-black text-4xl tracking-tight",children:E?`${E.total_amount.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})}`:"..."})})]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto bg-gradient-to-br from-slate-50 via-white to-indigo-50/30 p-8",children:N?o.jsxs("div",{className:"flex flex-col items-center justify-center py-24 space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-20 h-20 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full animate-pulse"})})]}),o.jsx("p",{className:"text-slate-600 font-semibold text-lg animate-pulse",children:"Fatura detaylar analiz ediliyor..."})]}):E?o.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200/50 overflow-hidden ring-1 ring-black/5",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gradient-to-r from-slate-800 to-indigo-900 text-white font-bold text-xs uppercase tracking-wide",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-4 text-center w-12",children:"#"}),o.jsx("th",{className:"px-4 py-4 text-left min-w-[200px]",children:"rn / Hizmet"}),o.jsx("th",{className:"px-4 py-4 text-center w-20",children:"Miktar"}),o.jsxs("th",{className:"px-4 py-4 text-right w-40",children:["Birim Fiyat",o.jsx("br",{}),o.jsx("span",{className:"text-[10px] text-indigo-300 font-normal",children:"(KDV Dahil)"})]}),o.jsx("th",{className:"px-4 py-4 text-center w-16",children:"sk.%"}),o.jsx("th",{className:"px-4 py-4 text-center w-16",children:"KDV%"}),o.jsxs("th",{className:"px-4 py-4 text-right w-40",children:["Net Tutar",o.jsx("br",{}),o.jsx("span",{className:"text-[10px] text-indigo-300 font-normal",children:"(KDV Dahil)"})]}),o.jsx("th",{className:"px-4 py-4 text-center w-24",children:"Durum"}),o.jsx("th",{className:"px-4 py-4 text-center w-32",children:"Eletirme"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:E.lines.map((Me,Xe)=>{const St=!!V[Xe],At=Y.find(Ot=>Ot.id==V[Xe]);return o.jsxs("tr",{className:`hover:bg-indigo-50/50 transition-all duration-200 group ${St?"bg-emerald-50/50 hover:bg-emerald-50/70":""}`,children:[o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:"text-gray-400 font-bold text-sm",children:Xe+1})}),o.jsxs("td",{className:"px-4 py-3",children:[o.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:Me.name}),o.jsx("div",{className:"flex items-center gap-2 mt-1",children:At?o.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-emerald-700 bg-emerald-100 px-2 py-0.5 rounded-full border border-emerald-200",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),At.stock_code]}):o.jsx("span",{className:"text-[10px] font-bold text-gray-500 bg-gray-200 px-2 py-0.5 rounded-full",children:" Elemedi"})})]}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:"font-bold text-gray-800 text-sm bg-indigo-100 px-3 py-1 rounded-lg",children:Me.quantity})}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsxs("span",{className:"font-mono text-gray-700 text-sm font-semibold",children:["",Me.unit_price.toFixed(2)]})}),o.jsx("td",{className:"px-4 py-3 text-center",children:Me.discount>0?o.jsxs("span",{className:"text-red-600 font-bold text-xs bg-red-100 px-2 py-0.5 rounded",children:["%",(Me.discount/(Me.quantity*Me.unit_price)*100).toFixed(0)]}):o.jsx("span",{className:"text-gray-400 text-sm",children:"-"})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsxs("span",{className:"font-bold text-indigo-700 text-xs bg-indigo-100 px-2 py-0.5 rounded",children:["%",Me.vat_rate]})}),o.jsx("td",{className:"px-4 py-3 text-right",children:o.jsxs("span",{className:"font-bold text-gray-900 text-sm",children:["",Me.line_net.toFixed(2)]})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-bold bg-gradient-to-r from-amber-100 to-orange-100 text-amber-800 border border-amber-200",children:" Bekliyor"})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("div",{className:"flex justify-center",children:St?o.jsxs("button",{onClick:()=>{q({index:Xe,line:Me}),re(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-lg hover:from-emerald-600 hover:to-green-700 shadow-md transition-all text-xs font-bold",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Deitir"]}):o.jsxs("button",{onClick:()=>{q({index:Xe,line:Me}),re(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg hover:from-indigo-600 hover:to-purple-700 shadow-md transition-all text-xs font-bold",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Eletir"]})})})]},Xe)})}),o.jsx("tfoot",{className:"bg-gray-50 border-t border-gray-200",children:o.jsx("tr",{children:o.jsxs("td",{colSpan:"9",className:"px-6 py-3 text-right text-xs text-gray-500 italic",children:["* Toplam ",E.lines.length," kalem rn listelenmektedir."]})})})]})}):o.jsxs("div",{className:"text-center py-20 bg-white rounded-xl border border-dashed border-gray-300 shadow-sm",children:[o.jsx("svg",{className:"w-16 h-16 text-gray-200 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Grntlenecek Detay Yok"}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Fatura ierii henz yklenmedi veya ayrtrlamad."})]})}),o.jsxs("div",{className:"p-8 bg-gradient-to-r from-slate-800 via-slate-900 to-indigo-900 border-t border-white/10 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-5",children:o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.1)_0%,transparent_50%)]"})}),o.jsxs("div",{className:"grid grid-cols-12 gap-6 items-center relative z-10",children:[o.jsx("div",{className:"col-span-12 md:col-span-7",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),o.jsx("input",{type:"text",placeholder:" Fatura Aklamas / lem Notu (stee Bal)",className:"w-full bg-white/10 border border-white/20 text-white placeholder-slate-400 text-base font-medium rounded-2xl pl-12 pr-4 py-4 outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white/20 transition-all backdrop-blur-sm",value:Ve,onChange:Me=>ge(Me.target.value)})]})}),o.jsxs("div",{className:"col-span-12 md:col-span-5 flex justify-end gap-4",children:[o.jsxs("button",{onClick:()=>m(!1),className:"px-8 py-4 bg-white/10 border border-white/20 text-white font-bold rounded-2xl hover:bg-white/20 transition-all text-base flex items-center gap-2 backdrop-blur-sm",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Kapat"]}),o.jsx("button",{onClick:it,disabled:be||w.status==="lendi",className:`px-10 py-4 font-bold rounded-2xl shadow-lg hover:shadow-2xl transition-all flex items-center gap-3 text-base transform hover:-translate-y-1
                                            ${w.status==="lendi"?"bg-slate-700 text-slate-400 cursor-not-allowed shadow-none hover:translate-y-0":"bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:from-emerald-600 hover:to-green-700 shadow-emerald-500/30"}`,children:be?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"leniyor..."]}):w.status==="lendi"?o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Bu Fatura lendi"]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})," Faturay Kaydet"]})})]})]})]})]})}),o.jsx(cG,{isOpen:We,onClose:()=>re(!1),invoiceLine:L?.line,products:Y,onSelect:Me=>{xe({...V,[L.index]:Me.id}),re(!1)},onCreateNew:async()=>{if(!L?.line)return;const Me=L.line;if(confirm(`"${Me.name}" iin yeni stok kart oluturulacak. Onaylyor musunuz?`)){fe(!0);try{const Xe={stock_code:`GEN-${Date.now().toString().slice(-6)}`,name:Me.name,brand:"Genel",group:"Genel",price:Me.unit_price*1.5,buying_price:Me.unit_price,stock:0,vat_rate:Me.vat_rate,image_url:""},St=await Cn.add(Xe);if(St.data){const At=await Cn.getAll();H(At.data?.products||[]);const Ot=St.data;xe({...V,[L.index]:Ot.id}),re(!1),alert("rn oluturuldu ve eletirildi.")}}catch(Xe){alert("Hata: "+Xe.message)}finally{fe(!1)}}}})]})}function dG(){const[e,r]=Q.useState([]),[t,n]=Q.useState(!0),[a,i]=Q.useState(!1),[u,f]=Q.useState(!1),[g,m]=Q.useState(!1),[w,_]=Q.useState(null),[E,k]=Q.useState(!1),[N,A]=Q.useState(null),[C,I]=Q.useState({username:"",password:"",email:"",role:"calisan"}),[D,O]=Q.useState({}),[B,U]=Q.useState({days:[],start_time:"00:00",end_time:"23:59"}),[X,F]=Q.useState(!1),{isKurucu:Y,user:H}=Vi();Q.useEffect(()=>{ce()},[]);const ce=async()=>{try{const P=await Mi.getAll();r(P.data?.users||P.data||[])}catch(P){console.error("Kullanclar yklenirken hata:",P)}finally{n(!1)}},J=()=>{k(!1),A(null),I({username:"",password:"",email:"",role:"calisan"}),O({}),i(!0)},V=P=>{k(!0),A(P.id),I({username:P.username,password:"",email:P.email||"",role:P.role}),O(P.permissions||{}),i(!0)},xe=P=>{_(P),O(P.permissions||{}),f(!0)},W=P=>{_(P),U(P.access_schedule||{days:[],start_time:"00:00",end_time:"23:59"}),m(!0)},ne=async P=>{P.preventDefault(),F(!0);try{const Z={...C,permissions:D};if(E)await Mi.update(N,Z),C.password&&await Mi.updatePassword(N,C.password),await Mi.updatePermissions(N,D),alert("Kullanc gncellendi.");else{const pe=await Mi.add(Z);if(pe.data?.success===!1||pe.data?.message&&pe.data.message.includes("oluturuldu ancak"))throw new Error(pe.data.message||"Kullanc oluturulurken bir hata olutu.")}i(!1),ce()}catch(Z){let pe=Z.response?.data?.message||Z.message||"Bir hata olutu.";pe.includes("security purposes")&&pe.includes("seconds")?pe=`Gvenlik nedeniyle ilem kstland. Ltfen ${pe.match(/\d+/)?.[0]||"birka"} saniye bekleyip tekrar deneyin.`:pe.includes("Rate limit")&&(pe="ok fazla deneme yaptnz. Ltfen biraz bekleyin."),alert("Hata: "+pe)}finally{F(!1)}},be=async P=>{if(confirm("Bu kullancy silmek istediinizden emin misiniz?"))try{await Mi.delete(P),ce()}catch(Z){alert("Hata: "+(Z.response?.data?.message||Z.message))}},fe=async P=>{if(confirm("Bu kullancnn oturumunu kapatmak istediinizden emin misiniz?"))try{await Mi.forceLogout(P),alert("Kullancnn oturumu kapatld."),ce()}catch(Z){alert("Hata: "+(Z.response?.data?.message||Z.message))}},Ve=async()=>{try{await Mi.updatePermissions(w.id,D),f(!1),ce()}catch(P){alert("Hata: "+(P.response?.data?.message||P.message))}},ge=async()=>{try{await Mi.updateSchedule(w.id,B),m(!1),ce()}catch(P){alert("Hata: "+(P.response?.data?.message||P.message))}},We=P=>{U(Z=>({...Z,days:Z.days.includes(P)?Z.days.filter(pe=>pe!==P):[...Z.days,P]}))},re=[{key:"can_view_products",label:"rnler",icon:""},{key:"can_view_customers",label:"Mteriler",icon:""},{key:"can_view_invoices",label:"Gelen Faturalar",icon:""},{key:"can_view_sales",label:"Sat Gemii",icon:""},{key:"can_view_pos",label:"Sat Ekran (POS)",icon:""},{key:"can_view_users",label:"Kullanclar",icon:""},{key:"can_view_balances",label:"Bakiye Grme",icon:""},{key:"can_view_prices",label:"Fiyat Grme",icon:""}],L=[{key:"monday",label:"Pazartesi"},{key:"tuesday",label:"Sal"},{key:"wednesday",label:"aramba"},{key:"thursday",label:"Perembe"},{key:"friday",label:"Cuma"},{key:"saturday",label:"Cumartesi"},{key:"sunday",label:"Pazar"}],q=P=>P?new Date(P).toLocaleString("tr-TR"):"Giri Yok";return t?o.jsx("div",{className:"flex items-center justify-center min-h-96",children:o.jsx("div",{className:"spinner"})}):o.jsxs("div",{className:"h-[calc(100vh-64px)] overflow-y-auto bg-gray-50 p-5 space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" Kullanc Ynetimi"}),o.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[e.length," kullanc kaytl"]})]}),Y&&o.jsxs("button",{onClick:J,className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-medium hover:from-blue-700 hover:to-indigo-700 transition-all flex items-center gap-2 justify-center",children:[o.jsx("span",{children:""})," Yeni Kullanc"]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-blue-100 text-sm",children:"Toplam"}),o.jsx("p",{className:"text-2xl font-bold",children:e.length})]}),o.jsxs("div",{className:"bg-gradient-to-br from-violet-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-violet-100 text-sm",children:"Kurucular"}),o.jsx("p",{className:"text-2xl font-bold",children:e.filter(P=>P.role==="kurucu").length})]}),o.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-cyan-100 text-sm",children:"alanlar"}),o.jsx("p",{className:"text-2xl font-bold",children:e.filter(P=>P.role==="calisan").length})]}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-emerald-100 text-sm",children:"Aktif Oturum"}),o.jsx("p",{className:"text-2xl font-bold",children:e.filter(P=>P.is_active).length})]})]}),o.jsx("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Kullanc Ad"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"E-posta"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Rol"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Son Giri"}),o.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-500 uppercase",children:"lemler"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-50",children:e.map(P=>o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold ${P.role==="kurucu"?"bg-gradient-to-br from-violet-500 to-purple-600":"bg-gradient-to-br from-blue-500 to-cyan-600"}`,children:P.username?.charAt(0)?.toUpperCase()||"?"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-semibold text-gray-800",children:P.username}),P.is_active&&o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full",title:"Aktif"})]})]})}),o.jsx("td",{className:"px-4 py-3 text-gray-600 text-sm",children:P.email||"-"}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${P.role==="kurucu"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:P.role==="kurucu"?" Kurucu":" alan"})}),o.jsx("td",{className:"px-4 py-3 text-gray-500 text-sm",children:o.jsxs("span",{className:"flex items-center gap-1",children:[" ",q(P.last_login)]})}),o.jsx("td",{className:"px-4 py-3 text-right",children:Y&&P.id!==H?.id&&o.jsxs("div",{className:"flex justify-end gap-1 flex-wrap",children:[o.jsx("button",{onClick:()=>V(P),className:"px-2 py-1.5 text-xs bg-indigo-50 text-indigo-600 border border-indigo-200 rounded-lg hover:bg-indigo-100 transition-colors",title:"Dzenle",children:" Dzenle"}),o.jsx("button",{onClick:()=>fe(P.id),className:"px-2 py-1.5 text-xs bg-amber-50 text-amber-600 border border-amber-200 rounded-lg hover:bg-amber-100 transition-colors",title:"Oturumu Kapat",children:" k"}),o.jsx("button",{onClick:()=>xe(P),className:"px-2 py-1.5 text-xs bg-blue-50 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",title:"Yetkiler",children:" Yetki"}),o.jsx("button",{onClick:()=>W(P),className:"px-2 py-1.5 text-xs bg-violet-50 text-violet-600 border border-violet-200 rounded-lg hover:bg-violet-100 transition-colors",title:"Eriim Takvimi",children:" Takvim"}),P.role!=="kurucu"&&o.jsx("button",{onClick:()=>be(P.id),className:"px-2 py-1.5 text-xs bg-red-50 text-red-600 border border-red-200 rounded-lg hover:bg-red-100 transition-colors",title:"Sil",children:" Sil"})]})})]},P.id))})]}),e.length===0&&o.jsx("div",{className:"text-center py-12 text-gray-500",children:"Kaytl kullanc yok."})]})}),a&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsx("div",{className:"p-6 border-b border-gray-100",children:o.jsx("h2",{className:"text-xl font-bold text-gray-800",children:E?" Kullanc Dzenle":" Yeni alan Ekle"})}),o.jsxs("form",{onSubmit:ne,className:"p-6 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kullanc Ad *"}),o.jsx("input",{type:"text",value:C.username,onChange:P=>I({...C,username:P.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["E-posta ",E?"":"*"]}),o.jsx("input",{type:"email",value:C.email,onChange:P=>I({...C,email:P.target.value}),className:`w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 ${E?"bg-gray-50 text-gray-500":""}`,required:!E,disabled:E,placeholder:E?"E-posta deitirilemez":""})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ifre ",E?"(Bo ise deimez)":"*"]}),o.jsx("input",{type:"password",value:C.password,onChange:P=>I({...C,password:P.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",required:!E})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol"}),o.jsxs("select",{value:C.role,onChange:P=>I({...C,role:P.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"calisan",children:"alan"}),o.jsx("option",{value:"kurucu",children:"Kurucu"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Eriim Yetkileri"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 p-4 bg-gray-50 rounded-xl border border-gray-200",children:re.map(P=>o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:D[P.key]||!1,onChange:Z=>O({...D,[P.key]:Z.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),o.jsxs("span",{className:"text-sm text-gray-700",children:[P.icon," ",P.label]})]},P.key))})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2.5 border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50",disabled:X,children:"ptal"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:X,children:X?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"leniyor..."]}):E?"Gncelle":"Kullancy Ekle"})]})]})]})}),X&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl flex flex-col items-center animate-bounce-slow",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin mb-4"}),o.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"leminiz Yaplyor"}),o.jsx("p",{className:"text-gray-500 mt-2",children:"Ltfen bekleyiniz..."})]})}),X&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl flex flex-col items-center animate-bounce-slow",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin mb-4"}),o.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"leminiz Yaplyor"}),o.jsx("p",{className:"text-gray-500 mt-2",children:"Ltfen bekleyiniz..."})]})}),u&&w&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"p-6 border-b border-gray-100",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" Kullanc Yetkilerini Dzenle"}),o.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Kullanc: ",o.jsx("strong",{children:w.username})]})]}),o.jsx("div",{className:"p-6 space-y-3",children:o.jsx("div",{className:"grid grid-cols-2 gap-2 p-4 bg-gray-50 rounded-xl border border-gray-200",children:re.map(P=>o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:D[P.key]||!1,onChange:Z=>O({...D,[P.key]:Z.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),o.jsxs("span",{className:"text-sm text-gray-700",children:[P.icon," ",P.label]})]},P.key))})}),o.jsxs("div",{className:"p-6 border-t border-gray-100 flex gap-3",children:[o.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2.5 border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50",children:"ptal"}),o.jsx("button",{onClick:Ve,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:"Deiiklikleri Kaydet"})]})]})}),g&&w&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"p-6 border-b border-gray-100",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" Eriim Takvimi Dzenle"}),o.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Kullanc: ",o.jsx("strong",{children:w.username})]})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Eriim Gnleri"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:L.map(P=>o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg hover:bg-gray-50",children:[o.jsx("input",{type:"checkbox",checked:B.days?.includes(P.key)||!1,onChange:()=>We(P.key),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:P.label})]},P.key))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balang"}),o.jsx("input",{type:"time",value:B.start_time||"00:00",onChange:P=>U({...B,start_time:P.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Biti"}),o.jsx("input",{type:"time",value:B.end_time||"23:59",onChange:P=>U({...B,end_time:P.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),o.jsxs("div",{className:"p-6 border-t border-gray-100 flex gap-3",children:[o.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2.5 border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50",children:"ptal"}),o.jsx("button",{onClick:ge,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:"Kaydet"})]})]})})]})}function fG({isOpen:e,onClose:r,groupName:t}){const[n,a]=Q.useState([]),[i,u]=Q.useState(""),[f,g]=Q.useState([]),[m,w]=Q.useState(!1),[_,E]=Q.useState(!1);Q.useEffect(()=>{e&&t&&k()},[e,t]);const k=async()=>{w(!0);try{const B=(await Cn.getAll()).data?.products||[];a(B);const F=((await xo.getAll()).data?.shortcuts||[]).find(Y=>Y.name===t);if(F&&F.items&&Array.isArray(F.items)){const Y=F.items.map((H,ce)=>{const J=B.find(V=>V.stock_code===H);return J?{...J,orderVal:ce+1}:null}).filter(Boolean);g(Y)}else g([])}catch(O){console.error(O),alert("Veriler yklenirken hata olutu.")}finally{w(!1)}},N=O=>{if(f.some(U=>U.stock_code===O.stock_code))return;const B=f.reduce((U,X)=>Math.max(U,parseInt(X.orderVal)||0),0);g([...f,{...O,orderVal:B+1}])},A=O=>{g(f.filter(B=>B.stock_code!==O))},C=(O,B)=>{const U=[...f];U[O].orderVal=B,g(U)},I=async()=>{E(!0);try{const B=[...f].sort((U,X)=>{const F=parseInt(U.orderVal)||9999,Y=parseInt(X.orderVal)||9999;return F-Y}).map(U=>U.stock_code);await xo.updateCategory(t,{items:B}),r(),alert("Grup gncellendi!")}catch(O){console.error(O),alert("Kaydetme baarsz.")}finally{E(!1)}},D=n.filter(O=>{if(f.some(U=>U.stock_code===O.stock_code))return!1;const B=i.toLowerCase();return O.name.toLowerCase().includes(B)||O.stock_code.toLowerCase().includes(B)}).slice(0,50);return e?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[60] font-sans animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col border border-gray-200 overflow-hidden animate-in zoom-in-95 duration-200",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Grubu Dzenle: ",o.jsx("span",{className:"text-blue-200",children:t})]}),o.jsx("p",{className:"text-blue-200 mt-1",children:"rnleri sein ve sralama numaras vererek dzenleyin"})]}),o.jsx("button",{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-3 rounded-xl transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsx("div",{className:"flex-1 flex min-h-0 bg-gradient-to-br from-gray-50 to-blue-50 p-6 gap-6",children:m?o.jsx("div",{className:"flex-1 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600 font-medium",children:"Veriler ykleniyor..."})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"w-1/3 bg-white border-2 border-gray-200 rounded-2xl flex flex-col shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:[o.jsxs("h3",{className:"font-bold text-gray-800 text-base mb-3 flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"rn Listesi"]}),o.jsx("input",{className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-base focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"rn ara (isim veya stok kodu)...",value:i,onChange:O=>u(O.target.value),autoFocus:!0})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[D.map(O=>o.jsxs("div",{onClick:()=>N(O),className:"p-3 border-2 border-gray-100 rounded-xl hover:bg-blue-50 hover:border-blue-300 cursor-pointer transition-all group flex justify-between items-center",children:[o.jsxs("div",{className:"overflow-hidden",children:[o.jsx("div",{className:"text-base font-semibold text-gray-800 truncate",children:O.name}),o.jsx("div",{className:"text-sm text-gray-500 font-mono",children:O.stock_code})]}),o.jsx("span",{className:"text-blue-600 opacity-0 group-hover:opacity-100 font-bold text-2xl transition-opacity",children:"+"})]},O.stock_code)),D.length===0&&o.jsxs("div",{className:"text-center text-gray-400 py-8",children:[o.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsx("p",{children:"rn bulunamad"})]})]})]}),o.jsxs("div",{className:"flex-1 bg-white border-2 border-gray-200 rounded-2xl flex flex-col shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50 flex justify-between items-center",children:[o.jsxs("h3",{className:"font-bold text-blue-800 text-base flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Grup erii (",f.length," rn)"]}),o.jsx("span",{className:"text-sm text-blue-700 bg-blue-100 px-3 py-1.5 rounded-lg font-semibold",children:"Sra Numarasna Gre Kaydedilir"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:o.jsxs("table",{className:"w-full text-base text-left",children:[o.jsx("thead",{className:"text-sm text-gray-600 uppercase bg-gray-50 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 w-24 font-bold",children:"Sra"}),o.jsx("th",{className:"px-4 py-3 font-bold",children:"rn"}),o.jsx("th",{className:"px-4 py-3 text-right font-bold",children:"Fiyat"}),o.jsx("th",{className:"px-4 py-3 w-20 text-center font-bold",children:"Kaldr"})]})}),o.jsxs("tbody",{className:"divide-y divide-gray-100",children:[f.map((O,B)=>o.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsx("input",{type:"number",value:O.orderVal,onChange:U=>C(B,U.target.value),className:"w-20 border-2 border-gray-200 rounded-lg px-2 py-2 text-center font-bold text-blue-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})}),o.jsxs("td",{className:"px-4 py-3",children:[o.jsx("div",{className:"font-semibold text-gray-800",children:O.name}),o.jsx("div",{className:"text-sm text-gray-500 font-mono",children:O.stock_code})]}),o.jsxs("td",{className:"px-4 py-3 text-right font-mono font-semibold text-gray-700",children:["",O.price?.toLocaleString("tr-TR")||"0"]}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("button",{onClick:()=>A(O.stock_code),className:"p-2 text-gray-400 hover:text-white hover:bg-red-500 rounded-lg transition-all",title:"Kaldr",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},O.stock_code)),f.length===0&&o.jsx("tr",{children:o.jsxs("td",{colSpan:"4",className:"text-center py-16 text-gray-400",children:[o.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),o.jsx("p",{className:"text-lg font-medium",children:"Bu grupta henz rn yok"}),o.jsx("p",{className:"text-sm mt-1",children:"Soldan rn seerek gruba ekleyebilirsiniz"})]})})]})]})})]})]})}),o.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gradient-to-r from-gray-50 to-gray-100 flex justify-end gap-4",children:[o.jsxs("button",{onClick:r,className:"px-8 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl text-base font-semibold hover:bg-gray-100 hover:border-gray-400 transition-all shadow-sm flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Vazge"]}),o.jsxs("button",{onClick:I,disabled:_,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl text-base font-bold hover:from-blue-700 hover:to-indigo-700 shadow-lg shadow-blue-500/30 transition-all flex items-center gap-2 disabled:opacity-50",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),_?"Kaydediliyor...":"Kaydet ve Kapat"]})]})]})}):null}function hG({isOpen:e,onClose:r}){const[t,n]=Q.useState([]),[a,i]=Q.useState(!1),[u,f]=Q.useState(""),[g,m]=Q.useState(!1),[w,_]=Q.useState(null),[E,k]=Q.useState(null),[N,A]=Q.useState(""),[C,I]=Q.useState(!1);Q.useEffect(()=>{e&&D()},[e]);const D=async()=>{i(!0);try{const F=await xo.getAll();F.data?.shortcuts&&n(F.data.shortcuts)}catch(F){console.error(F),alert("Gruplar yklenemedi.")}finally{i(!1)}},O=async F=>{if(F.preventDefault(),!!u.trim()){m(!0);try{if(t.some(Y=>Y.name.toLowerCase()===u.trim().toLowerCase())){alert("Bu isimde bir grup zaten var."),m(!1);return}await xo.addCategory(u.trim()),f(""),await D()}catch(Y){console.error(Y),alert("Grup eklenirken hata olutu.")}finally{m(!1)}}},B=async F=>{if(window.confirm(`${F} grubunu silmek istediinize emin misiniz?`))try{await xo.deleteCategory(F),await D()}catch(Y){console.error(Y),alert("Silme ilemi baarsz.")}},U=F=>{k(F),A(F)},X=async()=>{if(!N.trim()||N.trim()===E){k(null);return}if(t.some(F=>F.name.toLowerCase()===N.trim().toLowerCase()&&F.name!==E)){alert("Bu isimde bir grup zaten var.");return}I(!0);try{await xo.updateCategory(E,{name:N.trim()}),await D(),k(null)}catch(F){console.error(F),alert("sim deitirme baarsz.")}finally{I(!1)}};return e?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 font-sans animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl border border-gray-200 overflow-hidden transform transition-all animate-in zoom-in-95 duration-200",children:[o.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-8 py-6",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Ksayol Gruplar"}),o.jsx("p",{className:"text-indigo-200 mt-1",children:"Sat ekran iin zel kategoriler oluturun ve ynetin"})]}),o.jsx("button",{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-3 rounded-xl transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsxs("div",{className:"p-8",children:[o.jsxs("form",{onSubmit:O,className:"flex gap-3 mb-8",children:[o.jsx("input",{type:"text",placeholder:"Yeni Grup Ad (rn: erezler, ecekler, Attrmalklar)",className:"flex-1 px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all text-base",value:u,onChange:F=>f(F.target.value)}),o.jsx("button",{type:"submit",disabled:g||!u.trim(),className:"px-8 py-4 bg-gradient-to-r from-emerald-500 to-green-600 text-white rounded-xl font-bold hover:from-emerald-600 hover:to-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all text-base shadow-lg shadow-emerald-500/25",children:g?"Ekleniyor...":"+ Yeni Grup Ekle"})]}),o.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:a?o.jsxs("div",{className:"text-center py-12 text-gray-500",children:[o.jsx("div",{className:"w-10 h-10 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto mb-4"}),"Gruplar ykleniyor..."]}):t.length===0?o.jsxs("div",{className:"text-center py-16 bg-gradient-to-br from-gray-50 to-indigo-50 rounded-2xl border-2 border-dashed border-gray-200",children:[o.jsx("span",{className:"text-5xl block mb-4",children:""}),o.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Henz grup oluturulmad"}),o.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Yukardaki alandan yeni bir grup ekleyin"})]}):t.map(F=>o.jsxs("div",{className:"flex items-center justify-between p-5 bg-gradient-to-r from-gray-50 to-white border-2 border-gray-100 rounded-xl hover:border-indigo-200 hover:shadow-md transition-all group",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-indigo-500/25",children:F.name.charAt(0).toUpperCase()}),o.jsx("span",{className:"font-semibold text-gray-800 text-lg",children:F.name})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>U(F.name),className:"px-4 py-2.5 bg-amber-100 hover:bg-amber-600 text-amber-700 hover:text-white rounded-xl font-semibold transition-all flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"smi Deitir"]}),o.jsxs("button",{onClick:()=>_(F.name),className:"px-4 py-2.5 bg-blue-100 hover:bg-blue-600 text-blue-700 hover:text-white rounded-xl font-semibold transition-all flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Dzenle"]}),o.jsxs("button",{onClick:()=>B(F.name),className:"px-4 py-2.5 bg-red-100 hover:bg-red-600 text-red-700 hover:text-white rounded-xl font-semibold transition-all flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Sil"]})]})]},F.id||F.name))})]}),o.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-8 py-5 border-t border-gray-200 flex justify-end",children:o.jsx("button",{onClick:r,className:"px-8 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl text-base font-semibold hover:bg-gray-100 hover:border-gray-400 transition-all shadow-sm",children:"Kapat"})}),o.jsx(fG,{isOpen:!!w,onClose:()=>_(null),groupName:w}),E&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[70] animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[o.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 px-6 py-5",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Grup smini Deitir"}),o.jsx("p",{className:"text-amber-100 text-sm mt-1",children:"Yeni grup adn giriniz"})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("label",{className:"text-base font-semibold text-gray-800 mb-2 block",children:"Grup Ad"}),o.jsx("input",{type:"text",value:N,onChange:F=>A(F.target.value),className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all text-base",autoFocus:!0,onKeyDown:F=>F.key==="Enter"&&X()})]}),o.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>k(null),className:"px-6 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-100 transition-all",children:"ptal"}),o.jsx("button",{onClick:X,disabled:C||!N.trim(),className:"px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-bold hover:from-amber-600 hover:to-orange-600 transition-all disabled:opacity-50",children:C?"Kaydediliyor...":"Kaydet"})]})]})})]})}):null}const W4={"A5 (148x210mm)":{width:420,height:595},"A4 (210x297mm)":{width:595,height:842},"Termal 80mm":{width:280,height:400},"Termal 58mm":{width:200,height:400}},Mg=e=>{switch(e){case"Termal 80mm":return{...rk};case"Termal 58mm":return{...nk};default:return{...tk}}},xG=[{key:"{{TARIH}}",label:"Tarih"},{key:"{{SAAT}}",label:"Saat"},{key:"{{FIS_NO}}",label:"Fi No"},{key:"{{MUSTERI_ADI}}",label:"Musteri Adi"},{key:"{{ODEME_TIPI}}",label:"deme Tipi"},{key:"{{URUN_ADI}}",label:"Urun Adi"},{key:"{{MIKTAR}}",label:"Miktar"},{key:"{{FIYAT}}",label:"Fiyat"},{key:"{{ISKONTO}}",label:"skonto"},{key:"{{SATIR_TOPLAM}}",label:"Satir Toplam"},{key:"{{GENEL_TOPLAM}}",label:"Genel Toplam"},{key:"{{ESKI_BAKIYE}}",label:"Eski Bakiye"},{key:"{{YENI_BAKIYE}}",label:"Yeni Bakiye"}];function mG({isOpen:e,onClose:r,initialPaperSize:t}){const[n,a]=Q.useState(null),[i,u]=Q.useState(null),[f,g]=Q.useState(null),[m,w]=Q.useState({x:0,y:0}),[_,E]=Q.useState(()=>localStorage.getItem("receipt_show_balance")==="true"),k=Q.useRef(null);if(Q.useEffect(()=>{if(e){const J=`receipt_design_template_${t||"default"}`,V=localStorage.getItem(J);if(V)try{a(JSON.parse(V))}catch{a(Mg(t||"Termal 80mm"))}else a(Mg(t||"Termal 80mm"))}},[e,t]),!e||!n)return null;const N=W4[n.paper_size]||W4["A5 (148x210mm)"],A=()=>{const J=`receipt_design_template_${t||n.paper_size}`;localStorage.setItem(J,JSON.stringify(n)),localStorage.setItem("receipt_show_balance",_),alert(`${t||n.paper_size} iin tasarm kaydedildi!`)},C=()=>{confirm("Varsayilan tasarima donmek istediginize emin misiniz?")&&(a(Mg(n.paper_size)),u(null))},I=()=>{const J={type:"text",id:`metin_${Date.now()}`,x:50,y:50,text:"Yeni Metin",font_family:"Inter",font_size:12,font_bold:!1,color:"#000000",text_width:100,text_height:20,text_align:"left"};a(V=>({...V,items:[...V.items,J]})),u(J.id)},D=J=>{const V=J.target.files[0];if(!V)return;if(V.size>2*1024*1024){alert("Resim boyutu 2MB'dan kucuk olmalidir.");return}const xe=new FileReader;xe.onload=W=>{const ne={type:"image",id:`resim_${Date.now()}`,x:50,y:50,width:100,height:100,src:W.target.result,is_dynamic_footer:!1};a(be=>({...be,items:[...be.items,ne]})),u(ne.id)},xe.readAsDataURL(V)},O=()=>{const J={type:"shape",id:`sekil_${Date.now()}`,x:50,y:50,width:100,height:30,fill_color:"#e5e7eb",border:{sides:{top:!0,bottom:!0,left:!0,right:!0},thickness:1,color:"#000000"},is_dynamic_footer:!1};a(V=>({...V,items:[...V.items,J]})),u(J.id)},B=()=>{i&&confirm("Bu elementi silmek istediginize emin misiniz?")&&(a(J=>({...J,items:J.items.filter(V=>V.id!==i)})),u(null))},U=(J,V)=>{i&&a(xe=>({...xe,items:xe.items.map(W=>W.id===i?{...W,[J]:V}:W)}))},X=()=>n.items.find(J=>J.id===i),F=(J,V)=>{J.stopPropagation(),u(V.id),g(V.id);const xe=k.current.getBoundingClientRect();w({x:J.clientX-xe.left-V.x,y:J.clientY-xe.top-V.y})},Y=J=>{if(!f)return;const V=k.current.getBoundingClientRect(),xe=Math.max(0,Math.min(N.width-20,J.clientX-V.left-m.x)),W=Math.max(0,Math.min(N.height-20,J.clientY-V.top-m.y));a(ne=>({...ne,items:ne.items.map(be=>be.id===f?{...be,x:Math.round(xe),y:Math.round(W)}:be)}))},H=()=>{g(null)},ce=X();return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-7xl h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Fis Tasarimcisi"}),o.jsx("p",{className:"text-white/70 text-sm",children:"Satis sonrasi fis gorunumunu ozellestin"})]})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsxs("div",{className:"w-64 bg-slate-50 border-r border-slate-200 p-4 flex flex-col gap-4 overflow-y-auto",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-bold text-slate-600 uppercase tracking-wide mb-3",children:"Kagit Boyutu"}),o.jsx("div",{className:"w-full px-3 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg text-sm font-semibold text-blue-700",children:t||n.paper_size}),o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Ayarlar sayfasindan degistirilebilir"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-bold text-slate-600 uppercase tracking-wide mb-3",children:"Element Ekle"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:I,className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors flex items-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Metin Ekle"]}),o.jsxs("button",{onClick:O,className:"w-full px-4 py-2 bg-emerald-500 text-white rounded-lg font-medium hover:bg-emerald-600 transition-colors flex items-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6z"})}),"Sekil Ekle"]}),o.jsxs("label",{className:"w-full px-4 py-2 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors flex items-center gap-2 cursor-pointer",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Resim Ekle",o.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden"})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-bold text-slate-600 uppercase tracking-wide mb-3",children:"Degiskenler"}),o.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:xG.map(J=>o.jsxs("div",{className:"text-xs bg-white px-2 py-1.5 rounded border border-slate-200 flex justify-between items-center",children:[o.jsx("span",{className:"text-slate-600",children:J.label}),o.jsx("code",{className:"bg-slate-100 px-1 rounded text-[10px]",children:J.key})]},J.key))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-bold text-slate-600 uppercase tracking-wide mb-3",children:"Tasarm Ayarlar"}),o.jsxs("label",{className:"flex items-center justify-between p-2 bg-white rounded-lg border border-slate-200 cursor-pointer hover:bg-slate-50 transition-colors",children:[o.jsx("span",{className:"text-xs font-semibold text-slate-700",children:"Tasarmda Bakiyeler Grnsn"}),o.jsxs("div",{className:`relative w-9 h-5 rounded-full transition-colors ${_?"bg-indigo-600":"bg-slate-300"}`,children:[o.jsx("input",{type:"checkbox",checked:_,onChange:J=>E(J.target.checked),className:"sr-only"}),o.jsx("div",{className:`absolute top-1 left-1 bg-white w-3 h-3 rounded-full transition-transform ${_?"translate-x-4":"translate-x-0"}`})]})]})]}),o.jsxs("div",{className:"mt-auto space-y-2",children:[o.jsx("button",{onClick:A,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 transition-colors",children:"Kaydet"}),o.jsx("button",{onClick:C,className:"w-full px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-medium hover:bg-slate-300 transition-colors",children:"Varsayilana Don"})]})]}),o.jsx("div",{className:"flex-1 bg-slate-200 p-6 overflow-auto flex items-start justify-center",children:o.jsx("div",{ref:k,className:"bg-white shadow-xl relative",style:{width:N.width,height:N.height,minWidth:N.width,backgroundColor:"#ffffff",backgroundImage:"linear-gradient(#e5e7eb 1px, transparent 1px), linear-gradient(90deg, #e5e7eb 1px, transparent 1px)",backgroundSize:"20px 20px"},onMouseMove:Y,onMouseUp:H,onMouseLeave:H,onClick:()=>u(null),children:n.items.map(J=>o.jsxs("div",{className:`absolute cursor-move ${i===J.id?"ring-2 ring-blue-500 ring-offset-1":""}`,style:{left:J.x,top:J.y,width:J.type==="text"?J.text_width:J.width,height:J.type==="text"?J.text_height:J.height,backgroundColor:J.type==="shape"?J.fill_color:"transparent",border:J.border?`${J.border.thickness}px solid ${J.border.color}`:"none",fontFamily:J.font_family,fontSize:J.font_size,fontWeight:J.font_bold?"bold":"normal",color:J.color,textAlign:J.text_align,display:"flex",alignItems:"center",justifyContent:J.text_align==="center"?"center":J.text_align==="right"?"flex-end":"flex-start",overflow:"hidden",whiteSpace:"nowrap"},onMouseDown:V=>F(V,J),onClick:V=>V.stopPropagation(),children:[J.type==="text"&&o.jsx("span",{children:J.text}),J.type==="image"&&o.jsx("img",{src:J.src,alt:"Item",style:{width:"100%",height:"100%",objectFit:"contain"},draggable:!1})]},J.id))})}),o.jsx("div",{className:"w-72 bg-slate-50 border-l border-slate-200 p-4 overflow-y-auto",children:ce?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-600 uppercase tracking-wide",children:"Ozellikler"}),o.jsx("button",{onClick:B,className:"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",title:"Elementi Sil",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-100 rounded-lg",children:o.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:ce.is_dynamic_footer||!1,onChange:J=>U("is_dynamic_footer",J.target.checked),className:"mt-1 rounded"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-bold text-blue-900 block",children:"Urun Listesi Altinda Goster"}),o.jsx("span",{className:"text-xs text-blue-700 block mt-0.5",children:"Bu secenek acildiginda, oge urun listesinin bittigi yerden sonra konumlanir."})]})]})}),o.jsxs("div",{className:"text-xs text-slate-500 bg-white px-3 py-2 rounded-lg border border-slate-200",children:["ID: ",o.jsx("code",{className:"bg-slate-100 px-1 rounded",children:ce.id})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"X"}),o.jsx("input",{type:"number",value:ce.x,onChange:J=>U("x",parseInt(J.target.value)||0),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Y"}),o.jsx("input",{type:"number",value:ce.y,onChange:J=>U("y",parseInt(J.target.value)||0),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]})]}),ce.type==="text"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Metin"}),o.jsx("input",{type:"text",value:ce.text,onChange:J=>U("text",J.target.value),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Font Boyutu"}),o.jsx("input",{type:"number",value:ce.font_size,onChange:J=>U("font_size",parseInt(J.target.value)||10),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Renk"}),o.jsx("input",{type:"color",value:ce.color,onChange:J=>U("color",J.target.value),className:"w-full h-8 bg-white border border-slate-200 rounded cursor-pointer"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:ce.font_bold,onChange:J=>U("font_bold",J.target.checked),className:"rounded"}),o.jsx("span",{className:"text-sm font-bold",children:"Kalin"})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Hizalama"}),o.jsxs("select",{value:ce.text_align,onChange:J=>U("text_align",J.target.value),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm",children:[o.jsx("option",{value:"left",children:"Sol"}),o.jsx("option",{value:"center",children:"Orta"}),o.jsx("option",{value:"right",children:"Sag"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Genislik"}),o.jsx("input",{type:"number",value:ce.text_width,onChange:J=>U("text_width",parseInt(J.target.value)||50),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Yukseklik"}),o.jsx("input",{type:"number",value:ce.text_height,onChange:J=>U("text_height",parseInt(J.target.value)||20),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]})]})]}),(ce.type==="shape"||ce.type==="image")&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Genislik"}),o.jsx("input",{type:"number",value:ce.width,onChange:J=>U("width",parseInt(J.target.value)||50),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Yukseklik"}),o.jsx("input",{type:"number",value:ce.height,onChange:J=>U("height",parseInt(J.target.value)||20),className:"w-full px-2 py-1.5 bg-white border border-slate-200 rounded text-sm"})]})]}),ce.type==="shape"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Dolgu Rengi"}),o.jsx("input",{type:"color",value:ce.fill_color==="#00000000"?"#ffffff":ce.fill_color,onChange:J=>U("fill_color",J.target.value),className:"w-full h-8 bg-white border border-slate-200 rounded cursor-pointer"})]})]})]}):o.jsxs("div",{className:"text-center text-slate-400 py-8",children:[o.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),o.jsx("p",{className:"text-sm",children:"Duzenlemek icin bir element secin"})]})})]})]})})}function gG({isOpen:e,onClose:r}){const[t,n]=Q.useState(""),[a,i]=Q.useState(""),[u,f]=Q.useState(""),[g,m]=Q.useState(!1),[w,_]=Q.useState(!1);Q.useEffect(()=>{e&&E()},[e]);const E=async()=>{_(!0);try{const N=await oa.get("birfatura_api_key"),A=await oa.get("birfatura_secret_key"),C=await oa.get("birfatura_integration_key");n(N.data||""),i(A.data||""),f(C.data||"")}catch(N){console.error("Error loading birfatura settings",N)}finally{_(!1)}},k=async()=>{m(!0);try{await oa.set("birfatura_api_key",t.trim()),await oa.set("birfatura_secret_key",a.trim()),await oa.set("birfatura_integration_key",u.trim()),alert("Ayarlar baaryla kaydedildi."),r()}catch(N){console.error("Error saving settings",N),alert("Ayarlar kaydedilemedi: "+N.message)}finally{m(!1)}};return e?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 font-sans animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col border border-gray-200 overflow-hidden transform transition-all animate-in zoom-in-95 duration-200",children:[o.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-orange-600 px-8 py-6",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-white",children:"BirFatura Entegrasyonu"}),o.jsx("p",{className:"text-amber-100 mt-1",children:"E-Fatura / E-Ariv API Anahtarlarn Ynetin"})]}),o.jsx("button",{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-3 rounded-xl transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsx("div",{className:"p-8 space-y-6 overflow-y-auto",children:w?o.jsxs("div",{className:"text-center py-12 text-gray-500",children:[o.jsx("div",{className:"w-10 h-10 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin mx-auto mb-4"}),"Ayarlar ykleniyor..."]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-5 rounded-xl text-base text-blue-800 border border-blue-200",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsxs("p",{children:["Ltfen ",o.jsx("strong",{children:"BirFatura paneli"}),"nden aldnz API anahtarlarn aadaki alanlara giriniz. Bu bilgiler irketinize zel olarak veritabannda saklanr."]})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-base font-semibold text-gray-800",children:"API Key"}),o.jsx("input",{type:"text",value:t,onChange:N=>n(N.target.value),placeholder:"BirFatura API Key",className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all font-mono text-base"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-base font-semibold text-gray-800",children:"Secret Key"}),o.jsx("input",{type:"password",value:a,onChange:N=>i(N.target.value),placeholder:"BirFatura Secret Key",className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all font-mono text-base"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-base font-semibold text-gray-800",children:"Integration Key"}),o.jsx("input",{type:"text",value:u,onChange:N=>f(N.target.value),placeholder:"BirFatura Integration Key",className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition-all font-mono text-base"})]})]})}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-8 py-5 border-t border-gray-200 flex justify-end gap-4",children:[o.jsxs("button",{onClick:r,className:"px-8 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl text-base font-semibold hover:bg-gray-100 hover:border-gray-400 transition-all shadow-sm flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"ptal"]}),o.jsxs("button",{onClick:k,disabled:g,className:"px-8 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white rounded-xl text-base font-bold hover:from-amber-600 hover:to-orange-700 shadow-lg shadow-orange-500/30 transition-all flex items-center gap-2 disabled:opacity-50",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),g?"Kaydediliyor...":"Ayarlar Kaydet"]})]})]})}):null}function pG({isOpen:e,onClose:r}){const[t,n]=Q.useState("Ykleniyor..."),[a,i]=Q.useState(!1);Q.useEffect(()=>{e&&u()},[e]);const u=async()=>{try{const{data:g}=await oa.get("secret_token");n(g||"")}catch(g){console.error("Error fetching secret token",g),n("Hata")}},f=async()=>{if(!window.confirm(`UYARI: Secret Token' deitirmek, mevcut entegrasyonlarn (BirFatura vb.) almasn durdurabilir ve yeni token' o sistemlere tekrar girmeniz gerekir.

Devam etmek istiyor musunuz?`))return;const g=crypto.randomUUID();i(!0);try{await oa.set("secret_token",g),n(g),alert("Yeni token oluturuldu ve kaydedildi.")}catch(m){console.error("Error regenerating token",m),alert("Token oluturulamad: "+m.message)}finally{i(!1)}};return e?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 font-sans animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl border border-gray-200 overflow-hidden transform transition-all animate-in zoom-in-95 duration-200",children:[o.jsx("div",{className:"bg-gradient-to-r from-red-500 to-rose-600 px-8 py-6",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Entegrasyon Token Ynetimi"}),o.jsx("p",{className:"text-red-100 mt-1",children:"Sipari / Stok Entegrasyon Gvenlik Anahtar"})]}),o.jsx("button",{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-3 rounded-xl transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-5 rounded-xl text-base text-amber-800 border border-amber-200",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("svg",{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsxs("p",{children:["Bu token, d sistemlerin (rn. ",o.jsx("strong",{children:"BirFatura paneli"}),") bu programa balanp siparileri ekebilmesi iin kullanlr.",o.jsx("strong",{children:" Ltfen gvenli bir yerde saklayn ve kimseyle paylamayn."})]})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("label",{className:"text-base font-semibold text-gray-800",children:"Secret Token"}),o.jsxs("button",{onClick:f,className:"text-sm text-red-600 hover:text-red-700 font-medium hover:underline flex items-center gap-1",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Yeni Secret Token Olutur"]})]}),o.jsx("input",{type:"text",value:t,readOnly:!0,className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl bg-gray-50 text-gray-600 focus:ring-0 cursor-not-allowed font-mono text-base"}),o.jsx("p",{className:"text-xs text-gray-500",children:`Token' deitirmek iin yukardaki "Yeni Secret Token Olutur" balantsn kullann.`})]})]}),o.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-8 py-5 border-t border-gray-200 flex justify-end gap-4",children:o.jsx("button",{onClick:r,className:"px-8 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-xl text-base font-semibold hover:bg-gray-100 hover:border-gray-400 transition-all shadow-sm flex items-center gap-2",children:"Kapat"})})]})}):null}function bG(){const[e,r]=Q.useState(!0),[t,n]=Q.useState(!1),[a,i]=Q.useState("123456"),[u,f]=Q.useState("123456"),[g,m]=Q.useState(!0),[w,_]=Q.useState(!0),[E,k]=Q.useState(!0),[N,A]=Q.useState(!1),[C,I]=Q.useState(!1),[D,O]=Q.useState("Termal 80mm"),[B,U]=Q.useState("..."),[X,F]=Q.useState(!1),[Y,H]=Q.useState(!1),[ce,J]=Q.useState(!1),[V,xe]=Q.useState(!1);Q.useEffect(()=>{W()},[]);const W=async()=>{r(!0);try{const{data:q}=await oa.getAll();q&&(q.pos_settings_ask_quantity!==void 0&&n(q.pos_settings_ask_quantity),q.sales_cancel_password&&i(q.sales_cancel_password),q.sales_edit_password&&f(q.sales_edit_password),q.sales_show_total_sales!==void 0&&m(q.sales_show_total_sales),q.sales_show_total_revenue!==void 0&&_(q.sales_show_total_revenue),q.invoices_show_total!==void 0&&k(q.invoices_show_total),q.integration_send_sales_to_birfatura!==void 0&&A(q.integration_send_sales_to_birfatura),q.receipt_auto_print!==void 0&&I(q.receipt_auto_print),q.receipt_paper_size&&O(q.receipt_paper_size),q.secret_token&&U(q.secret_token))}catch(q){console.error("Settings load error:",q)}finally{r(!1)}},ne=async(q,P)=>{try{await oa.set(q,P)}catch(Z){console.error(`Failed to save setting ${q}:`,Z),alert("Ayar kaydedilemedi.")}},be=()=>{const q=!t;n(q),ne("pos_settings_ask_quantity",q)},fe=async q=>{const P=q.target.value;i(P),ne("sales_cancel_password",P)},Ve=async q=>{const P=q.target.value;f(P),ne("sales_edit_password",P)},ge=()=>{const q=!g;m(q),ne("sales_show_total_sales",q)},We=()=>{const q=!w;_(q),ne("sales_show_total_revenue",q)},re=()=>{const q=!E;k(q),ne("invoices_show_total",q)},L=()=>{const q=!N;A(q),ne("integration_send_sales_to_birfatura",q)};return e?o.jsx("div",{className:"p-8 text-center text-gray-500",children:"Ayarlar ykleniyor..."}):o.jsxs("div",{className:"h-[calc(100vh-64px)] overflow-y-auto p-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Ayarlar"}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Sat Ekran Ayarlar"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"rn Seince Miktar Sor"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aktif edilirse, rn listesinden veya barkod ile rn seildiinde miktar girmeniz iin bir pencere alr."})]}),o.jsx("button",{onClick:be,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${t?"bg-blue-600":"bg-gray-200"}`,children:o.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${t?"translate-x-7":"translate-x-1"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"Sat Ekranndaki Ksayol Grup simleri"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sat ekrannda grnen zel rn grubu kategorilerini ynetin."})]}),o.jsx("button",{onClick:()=>F(!0),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-medium text-sm transition-colors shadow-sm",children:"Gruplar Ynet"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mt-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Sat ve ptal Ayarlar"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-red-800",children:"Sat ptal Etme Parolas"}),o.jsx("p",{className:"text-sm text-red-600 mt-1",children:'"Sat Detay" ekrannda sat iptal etmek istediinizde sorulacak parolay belirleyin.'})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Parola:"}),o.jsx("input",{type:"text",value:a,onChange:fe,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-center font-mono w-32",placeholder:"******"})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg border border-orange-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-orange-800",children:"Sat Detaylarn Deitirme Parolas"}),o.jsx("p",{className:"text-sm text-orange-600 mt-1",children:"Gemi satlarn detaylarn dzenlerken sorulacak parolay belirleyin."})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Parola:"}),o.jsx("input",{type:"text",value:u,onChange:Ve,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 text-center font-mono w-32",placeholder:"******"})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"Toplam Sat Kartn Gster"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Satlar sayfasndaki "Toplam Sat" bilgi kartn gster veya gizle.'})]}),o.jsx("button",{onClick:ge,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${g?"bg-blue-600":"bg-gray-200"}`,children:o.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${g?"translate-x-7":"translate-x-1"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"Toplam Ciro Kartn Gster"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Satlar sayfasndaki "Toplam Ciro" bilgi kartn gster veya gizle.'})]}),o.jsx("button",{onClick:We,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${w?"bg-blue-600":"bg-gray-200"}`,children:o.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${w?"translate-x-7":"translate-x-1"}`})})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mt-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Sat Sonras Fii Ayarlar"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"Sat Sonras Fii Otomatik Yazdrlsn"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ak olduunda her sat sonras fi otomatik olarak yazcya gnderilir."})]}),o.jsx("button",{onClick:()=>{const q=!C;I(q),ne("receipt_auto_print",q),localStorage.setItem("receipt_auto_print",q.toString())},className:`relative inline-flex h-7 w-14 items-center rounded-full transition-colors ${C?"bg-green-600":"bg-gray-300"}`,children:o.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-md transition-transform ${C?"translate-x-8":"translate-x-1"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"Kat Boyutu"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Yazdrlacak fi iin kullanlacak kat boyutunu sein."})]}),o.jsxs("select",{value:D,onChange:q=>{const P=q.target.value;O(P),ne("receipt_paper_size",P),localStorage.setItem("receipt_paper_size",P)},className:"px-4 py-2.5 bg-white border-2 border-blue-200 rounded-lg text-sm font-semibold text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none cursor-pointer hover:border-blue-400 transition-all",children:[o.jsx("option",{value:"Termal 80mm",children:"Termal 80mm"}),o.jsx("option",{value:"Termal 58mm",children:"Termal 58mm"}),o.jsx("option",{value:"A5 (148x210mm)",children:"A5 (148x210mm)"}),o.jsx("option",{value:"A4 (210x297mm)",children:"A4 (210x297mm)"})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg border border-indigo-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"Fi Grnm Tasarla"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Seili kat boyutu iin fi tasarmn zelletirin."}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:"Srkle Brak"}),o.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"Canl nizleme"}),o.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Deiken Destei"})]})]}),o.jsxs("button",{onClick:()=>H(!0),className:"px-5 py-2.5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 font-semibold text-sm transition-all shadow-lg shadow-indigo-500/25 hover:shadow-xl hover:shadow-indigo-500/30 flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Tasarmcy A"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mt-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Gelen Faturalar Ayarlar"}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"Toplam Tutar Grnm"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gelen Faturalar sayfasndaki toplam tutar kartn gster veya gizle."})]}),o.jsx("button",{onClick:re,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${E?"bg-blue-600":"bg-gray-200"}`,children:o.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${E?"translate-x-7":"translate-x-1"}`})})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mt-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b border-gray-200 pb-2",children:"Entegrasyon Ayarlar"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"BirFatura Entegrasyonu"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"E-Fatura ve E-Ariv ilemleriniz iin BirFatura API anahtarlarnz yaplandrn."})]}),o.jsxs("button",{onClick:()=>J(!0),className:"px-5 py-2.5 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-lg hover:from-amber-600 hover:to-orange-600 font-semibold text-sm transition-all shadow-lg shadow-orange-500/25 hover:shadow-xl hover:shadow-orange-500/30 flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})}),"Ayarlar Yaplandr"]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"Satlar BirFaturaya Sipari Olarak Gnder"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aktif edilirse, tamamlanan her sat otomatik olarak BirFatura sistemine sipari olarak iletilir."})]}),o.jsx("button",{onClick:L,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${N?"bg-orange-500":"bg-gray-200"}`,children:o.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${N?"translate-x-7":"translate-x-1"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-red-50 to-rose-50 rounded-lg border border-red-200",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:"Sipari Entegrasyon Token (Secret Token)"}),o.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Kaytl Token: ",o.jsx("span",{className:"font-mono bg-white px-2 py-0.5 rounded border border-gray-200 text-gray-600",children:B.length>20?B.substring(0,20)+"...":B})]})]}),o.jsxs("button",{onClick:()=>xe(!0),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-medium text-sm transition-colors shadow-sm flex items-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Dzenle"]})]})]})]}),o.jsx(hG,{isOpen:X,onClose:()=>F(!1)}),o.jsx(mG,{isOpen:Y,onClose:()=>H(!1),initialPaperSize:D}),o.jsx(gG,{isOpen:ce,onClose:()=>J(!1)}),o.jsx(pG,{isOpen:V,onClose:()=>{xe(!1),W()}})]})}function wG(){return o.jsx(MC,{children:o.jsx(KA,{children:o.jsxs(kA,{children:[o.jsx(pa,{path:"/register",element:o.jsx(PC,{})}),o.jsx(pa,{path:"/login",element:o.jsx(BC,{})}),o.jsx(pa,{path:"/email-success",element:o.jsx(UC,{})}),o.jsx(pa,{path:"/",element:o.jsx(Es,{permission:"can_view_pos",children:o.jsx(lo,{children:o.jsx(Sj,{})})})}),o.jsx(pa,{path:"/products",element:o.jsx(Es,{permission:"can_view_products",children:o.jsx(lo,{children:o.jsx(uz,{})})})}),o.jsx(pa,{path:"/customers",element:o.jsx(Es,{permission:"can_view_customers",children:o.jsx(lo,{children:o.jsx(dz,{})})})}),o.jsx(pa,{path:"/customer/:customerName",element:o.jsx(Es,{permission:"can_view_customers",children:o.jsx(lo,{children:o.jsx(fz,{})})})}),o.jsx(pa,{path:"/sales",element:o.jsx(Es,{permission:"can_view_sales",children:o.jsx(lo,{children:o.jsx(hz,{})})})}),o.jsx(pa,{path:"/invoices",element:o.jsx(Es,{permission:"can_view_invoices",children:o.jsx(lo,{children:o.jsx(uG,{})})})}),o.jsx(pa,{path:"/users",element:o.jsx(Es,{permission:"can_view_users",children:o.jsx(lo,{children:o.jsx(dG,{})})})}),o.jsx(pa,{path:"/settings",element:o.jsx(Es,{permission:"can_view_users",children:o.jsx(lo,{children:o.jsx(bG,{})})})}),o.jsx(pa,{path:"/mobile-pos",element:o.jsx(Es,{permission:"can_view_pos",children:o.jsx(Jj,{})})}),o.jsx(pa,{path:"/mobile-products",element:o.jsx(Es,{permission:"can_view_products",children:o.jsx(Qj,{})})}),o.jsx(pa,{path:"/mobile-customers",element:o.jsx(Es,{permission:"can_view_customers",children:o.jsx(eR,{})})}),o.jsx(pa,{path:"/mobile-sales",element:o.jsx(Es,{permission:"can_view_sales",children:o.jsx(tR,{})})}),o.jsx(pa,{path:"/mobile-invoices",element:o.jsx(Es,{permission:"can_view_invoices",children:o.jsx(aR,{})})}),o.jsx(pa,{path:"*",element:o.jsx(l3,{to:"/",replace:!0})})]})})})}S6.createRoot(document.getElementById("root")).render(o.jsx(Q.StrictMode,{children:o.jsx(wG,{})}));
